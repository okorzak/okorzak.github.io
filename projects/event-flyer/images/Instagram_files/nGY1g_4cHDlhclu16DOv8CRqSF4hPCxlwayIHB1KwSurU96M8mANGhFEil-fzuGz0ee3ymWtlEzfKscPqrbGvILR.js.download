;/*FB_PKG_DELIM*/

__d("EBEpochChangeListener",["EBIsEbEnabled","EBIsEbEnabledSubscriber","Promise","ReQL","WAPubSub","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$3=a}var c=a.prototype;c.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;(yield d("EBIsEbEnabled").isEbEnabledLS(this.$3.tables))&&this.$4(this.$3);yield d("EBIsEbEnabledSubscriber").isEbEnabledSubscriber().then(function(b){b.subscribe(function(b){b?a.$4(a.$3):a.$2==null||a.$2()})})});function c(){return a.apply(this,arguments)}return c}();c.$4=function(a){var b=this;this.$2==null&&(this.$2=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_epochs).subscribe(function(a,c){b.$1.publish(c)}));return this.$2};c.subscribe=function(a){return this.$1.subscribe(a)};return a}(),j;function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(j!=null)return(h||(h=b("Promise"))).resolve();j=new i(a);yield j.initialize()});return k.apply(this,arguments)}function e(a){if(j==null)throw c("err")("EBEpochChangeListener is not initialized");return j.subscribe(a)}g.initEBEpochChangeListener=a;g.subscribeToEpochChanges=e}),98);
__d("EBGraphQLRestoreDefinition",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toMpsMessageQueryForGraphQLQuery=a}),66);
__d("EBSMProperties",[],(function(a,b,c,d,e,f){"use strict";a=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"];b=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]);c={dbVersion:5,mandatoryTables:b,persistedTables:new Set(a),persistedTablesArray:a};d=c;f["default"]=d}),66);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeStart:b}})}function b(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeEnd:b}})}g.logMemoryForQPLStart=a;g.logMemoryForQPLEnd=b}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBLogger","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WebSession","asyncToGeneratorRuntime","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=d("CurrentMessengerUser").getIDorEIMU();var l=c("ReStoreTabNotifier")==null?void 0:c("ReStoreTabNotifier")("mwChat-"+e),m=null,n=!1,o=!1,p=d("EBLogger").EBLogger().tags(["EBSM","Pesistence","MainThread"]);function q(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a){var e=(k||(k=b("Promise"))).resolve(),f="flushChangesV2",g=new Map();function r(a){return q(g,a,function(){return new Map()})}var s=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:s,sessionTabId:d("WebSession").getId()}}});(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").START);d("QPLMemoryUtils").logMemoryForQPLStart(c("qpl")._(521481876,"1407"));function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a.rehydrateEBSMFromEBDB(r),d("QPLMemoryUtils").logMemoryForQPLEnd(c("qpl")._(521481876,"1407")),c("QPLUserFlow").endSuccess(c("qpl")._(521481876,"1407")),(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").SUCCESS)}catch(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED"),p.MUSTFIX(i||(i=babelHelpers.taggedTemplateLiteralLoose(["An error occured in EBSM hydration when loading EB data: ",""])),a),c("QPLUserFlow").endFailure(c("qpl")._(521481876,"1407"),"Hydration failed."),(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").FAIL)}});return u.apply(this,arguments)}m=t();l==null||l.onEventReceive("flushChangesV2",function(b){b=b.changeSet;var e=new Map();b.forEach(function(a,b){e.set(b,{toAdd:[],toDelete:[]});var c=r(b);a.forEach(function(a,f){if(d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)){var g;(g=e.get(b))==null||g.toDelete.push(c.get(f))}else{(g=e.get(b))==null||g.toAdd.push(a)}})});if(a.updateEBSM==null){p.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["ebdbEbsmApi.updateEBSM is not defined"])));return}c("promiseDone")(a.updateEBSM(e,f))});return{flush:function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var g;if(b.size===0)return;b.size>0&&b.forEach(function(a,c){a.size===0&&b["delete"](c)});if(b.size===0)return;e=((g=e.actionSource)==null?void 0:g.type)==="user_initiated"&&((g=e.actionSource)==null?void 0:g.source)===f;if(e){b.forEach(function(a,b){var c=r(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)?c["delete"](b):c.set(b,a)})});return}var h=new Map();b.forEach(function(a,b){h.set(b,{toAdd:[],toDelete:[]});var c=r(b);a.forEach(function(a,e){if(d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)){var f;(f=h.get(b))==null||f.toDelete.push(c.get(e));c["delete"](e)}else{(f=h.get(b))==null||f.toAdd.push(a);c.set(e,a)}})});l==null||l.postMessage("flushChangesV2",{changeSet:b,fromVersion:"",sentinelDeleted:d("ReStorePersistence").sentinelDeleted,version:""});g=d("Random").uint32();e=Array.from(b.keys());c("QPLUserFlow").start(c("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:e}},instanceKey:g});yield m;yield a.flushEBSMtoEBDB(h)["catch"](function(){})});function g(a,b){return e.apply(this,arguments)}return g}(),get:function(a,c,d){var e=r(c);if(n)return e.get(d);return m==null?(k||(k=b("Promise"))).reject("rehydration is not complete"):m.then(function(){n=!0;return e.get(d)})},logError:function(b,e,f,g){(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,b);if(f==="dbCorruption"){(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,b);f="Got unexpected undefined in ebsm, mode: "+e+", table: "+b+", id: "+((f=g==null?void 0:g.id)!=null?f:"")+", deletedInThisTxn: "+((e=g==null?void 0:g.deletedInThisTxn)!=null?e:"")+". Deleting EBSM db";p.mustfix(f);g=d("Random").uint32();d("MAWUnrecoverableDbErrors").setError(new(d("MAWUnrecoverableDbErrors").EbsmHydrationError)(f,!0,g,b),function(){c("promiseDone")(a.clearEbStores(),function(){(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,"db_deleted.main_thread")})});o||(o=!0,d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full"))}},queueCommitWork:void 0,runExclusively:function(a){return new(k||(k=b("Promise")))(function(c,d){e=e.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a()),e=b[0];b[1];try{c(yield e())}catch(a){d(a)}}))})},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!1},shouldSync:function(a,b){return a==="notifyInMemoryTable"?!1:!0},tabTablesNotifier:function(){return l},types:["ephemeral"],uniqueId:""}}g["default"]=a}),98);
__d("createReStoreTableNameAllowListPersistence",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e;return{clearCache:function(){a.clearCache==null||a.clearCache(),c.clearCache==null||c.clearCache()},close:function(){a.close==null||a.close(),c.close==null||c.close()},flush:function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var h=new Map(),i=new Map();e.forEach(function(a,b){d.has(b)?i.set(b,a):h.set(b,a)});yield (g||(g=b("Promise"))).all([a.flush(h,f),c.flush(i,f)])});function f(a,b){return e.apply(this,arguments)}return f}(),get:function(b,e,f,g){return d.has(e)?c.get(b,e,f,g):a.get(b,e,f,g)},isClosed:function(){return(a.isClosed==null?void 0:a.isClosed())||!1},isPersistenceSupported:a.isPersistenceSupported,logError:function(b,e,f,g){d.has(b)?c.logError==null||c.logError(b,e,f,g):a.logError==null||a.logError(b,e,f,g)},permitsSynchronousIO:function(b){if(d.has(b)){var e;return(e=c.permitsSynchronousIO==null?void 0:c.permitsSynchronousIO(b))!=null?e:!1}else{return(e=a.permitsSynchronousIO==null?void 0:a.permitsSynchronousIO(b))!=null?e:!1}},runExclusively:function(d,e){return a.runExclusively(function(){return new(g||(g=b("Promise")))(function(a,f){var h=c.runExclusively(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d()),e=c[0],f=c[1],i=new(g||(g=b("Promise")))(function(b){a([function(){b();return h},f])});return[b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield i;return e()}),f]}),e);h["catch"](f)})},e)},shouldApplySync:function(b,e){if(d.has(e))return c.shouldApplySync(b,e);else return a.shouldApplySync(b,e)},shouldInline:function(b,e){return d.has(b)?c.shouldInline(b,e):a.shouldInline(b,e)},shouldSync:function(b,e){if(d.has(e))return c.shouldSync(b,e);else return a.shouldSync(b,e)},tabTablesNotifier:(e=a.tabTablesNotifier)!=null?e:c.tabTablesNotifier,types:[].concat(a.types,c.types),uniqueId:c.uniqueId+a.uniqueId}}f["default"]=a}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=c("createReStoreTableNameAllowListPersistence")(d("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),c("createReStoreEBSMTablesPersistence")(a),c("EBSMProperties").persistedTables);return a}g.makeReStorePersistence=a}),98);
__d("EBWorkerAddDeviceUtils",["EBDB","EBDBEbsmApi","EBSMProperties","I64","LSAuthorityLevel","LSIntEnum","LSJSEBInMemoryStorage","LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","Promise","ReQL","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)));if(g!=null)return"dest_table_not_empty";g={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB,updateEBSM:function(){return(j||(j=b("Promise"))).resolve()}};g=(yield d("LSJSEBInMemoryStorage").makeReStorePersistence(g));if(g==null)throw c("err")("persistence is null");g=d("LSReStoreWrapper").createLSReStore(g,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);var k=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(g.tables.secure_encrypted_backups_epochs)));return k.filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).length===0?"source_epoch_not_authoritative":g.runInTransaction(function(c){return e.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){var e=(yield (j||(j=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c[a];b=b.entries(new WeakMap());var e=(yield b.next());if(e.done)return"source_table_empty";a=d[a];while(!e.done){var f=e.value,g=f[0];f=f[1];yield a.upsert(g,f);e=(yield b.next())}return"success"});return function(b){return a.apply(this,arguments)}}())));e=new Set(e);if(e.has("source_table_empty"))return"source_table_empty";else if(e.has("success")&&e.size===1)return"success";return"fail"});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":91")},"readonly",void 0,void 0,f.id+":89")});return k.apply(this,arguments)}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.runInTransaction(function(a){return(j||(j=b("Promise"))).all(c("EBSMProperties").persistedTablesArray.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=a[b];var c=b.entries(new WeakMap()),d=(yield c.next());while(!d.done)yield b["delete"].apply(b,d.value[0]),d=(yield c.next())});return function(a){return c.apply(this,arguments)}}()))},"readwrite",void 0,void 0,f.id+":132")});return l.apply(this,arguments)}g.copyEBStateTablesFromMainthreadToWorker=a;g.clearLSEBSMTables=e}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:1232")!=null&&b("cr:1232").shutdownAndClear()}function d(a,d,e,f,g,h){return function(i){if(b("cr:1232")!=null)return b("cr:1232").getInstance(i,a,d,e,f,g,h);else return c("FBMqttChannel")}}g.shutdownAndClear=a;g.getInstance=d}),98);
__d("LSIssueMessageRangeQueryTaskStoredProcedure",["LSIssueMessageRangeQueryTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageRangeQueryTask"),e.threadId,e.numMessages,e.startSortKey,e.isPointQuery,e.traceId,e.newerNumMessages,e.source,e.includeOffset);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[12]].join("")),d[11]=c.createArray(),void 0!==void 0?d[13]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[12],d[11],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[1]=c.i64.cast([0,0])}]):(f=e.item,c.sequence([function(e){return d[11]=f.backupId,d[10]=f.authorityLevel,c.i64.eq(d[10],c.i64.cast([0,20]))?c.resolve(d[9]=c.i64.cast([0,1])):c.sequence([function(e){return c.i64.eq(d[10],c.i64.cast([0,80]))?c.sequence([function(e){return c.i64.eq(d[11],void 0)?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[17]].join("")),d[16]=c.createArray(),void 0!==void 0?d[18]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[17],d[16],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[13]=c.i64.cast([0,2])}]):c.sequence([function(e){return c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[18]].join("")),d[17]=c.createArray(),void 0!==void 0?d[19]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[18],d[17],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[14]=c.i64.cast([-1,4294967295])}]):c.sequence([function(e){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[11])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,4])}]):(e.item,c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[20]].join("")),d[19]=c.createArray(),void 0!==void 0?d[21]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[20],d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,3])}]))})},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}]):c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[16]].join("")),d[15]=c.createArray(),void 0!==void 0?d[17]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[16],d[15],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[12]=c.i64.cast([-1,4294967295])}])},function(a){return d[9]=d[12]}])},function(a){return d[1]=d[9]}]))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsProcessBackupIdsStoredProcedure";a.__tables__=["encrypted_backups","secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSProcessBackupIdsStoredProcedure",["LSProcessBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSProcessBackupIds"),e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEncryptedBackupsProcessBackupIdsDEPRECATED",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIdsStoredProcedure","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLEvent","QPLUserFlow","ReQL","WebSession","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("gkx")("23914");function l(a){if(k){var e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:e,processBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});return a.runInTransaction(function(a){return c("LSProcessBackupIdsStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":53").then(function(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a[0]);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,"EB_STATE_"+a+".");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent});return a})}else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(d){if(d!=null){c("promiseDone")(l(a),b,function(a){c("FBLogger")("wmi_eb").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=l;g.subscribeToEncryptedBackupsRow=a}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPath",["EBAPIWorkerCheck","EBSMAPI","I64","LSAuthorityLevel","LSDataTraceType","LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWOfflineQueueStatus","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupIdsDEPRECATED","Promise","QPLEvent","QPLUserFlow","ReQL","WAJids","WATagsLogger","WebSession","gkx","isInstamadilloEB","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=c("gkx")("23961"),n=c("qex")._("121")===!0;function a(a){function b(){c("promiseDone")(c("EBSMAPI").fetchBackupIds("MWEncryptedBackupsListenForChangesToBackupStateInitPath"),function(){return p(a)})}function e(){var b=d("ReQL").fromTableAscending(a.tables.encrypted_backups),e=b.subscribe(function(a,b){if(b.operation==="delete"||!(j||(j=d("I64"))).equal(b.value.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))&&d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})});b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((l||(l=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:b,fetchBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});c("promiseDone")(a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(k||(k=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),isUiBlocking:!1})},"readwrite",void 0,void 0,f.id+":104"),function(){return p(a)})}b=b;(n||c("isInstamadilloEB")())&&(b=e,b());e=d("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger);return e.subscribe(b)}function o(a){return a.runInTransaction(function(a){var e=d("MAWOfflineQueueStatus").getAllThreadsWithOfflineQueueIncomplete();return(i||(i=b("Promise"))).all(e.map(function(b){var e=d("WAJids").threadIdForChatJid(b),f=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("MAWMainTraceUtils").startTraceWithTxn(a,(j||(j=d("I64"))).of_float(Date.now()),f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE)));e={isPointQuery:!1,newerNumMessages:j.zero,numMessages:j.of_int32(20),source:k.ofNumber(c("LSMEBTaskCreationSource").UNKNOWN),threadId:e,traceId:f};d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",f]).LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[EB Prefetch] Issuing message range query for thread "," with params ",""])),b,JSON.stringify(e));d("MAWEBRestoreTrackingUtils").markEBRestoreFrontloaded(c("LSMEBTaskCreationSource").UNKNOWN,f,!1);return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),e)}))},"readonly",void 0,void 0,f.id+":136")}function p(a){var b=d("MAWOfflineQueueStatus").isOfflineQueueComplete();m&&!b&&c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),function(b){if(d("EBAPIWorkerCheck").runningInWorker())return;b===3&&c("promiseDone")(o(a))})}e={listenForChangesToBackupState:a,preloadEBData:p};g["default"]=e}),98);
__d("EBLS",["EBDB","EBDBEbsmApi","EBEpochChangeListener","EBIsEbEnabled","EBIsEbEnabledSubscriber","EBLogger","EBReadyNotifier","EBReenrollmentTriggerListener","EBWorkerAddDeviceUtils","I64","LSAuthorityLevel","LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSInternetConnectionState","LSJSEBInMemoryStorage","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEBLSInWorkerSwitch","MAWEncryptedBackupsStateManager","MAWLSVaultingHooks","MAWODSProxy","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWEncryptedBackupsProcessBackupIdsDEPRECATED","MWPlatformTaskSystem","MqttEnv","Promise","QPLUserFlow","ReQL","ServerAppID","WAAssertUnreachable","WAOdsEnums","WAPromiseDelays","WAResolvable","WAWaitForUserUnblocked","asyncToGeneratorRuntime","cr:7533","emptyFunction","err","getMWLSRegion","gkx","nullthrows","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=d("EBLogger").EBLogger().tags(["EBLS"]),H=c("qpl")._(521478817,"2806");function a(){return L()}var I,J,K;function L(){return I?I.promise:M({copyKeys:!0,getNewDB:!1}).promise}function M(a){I!=null&&!I.isSettled&&I.reject(c("err")("LSClient is not settled"));J!=null&&!J.isSettled&&J.reject(c("err")("LSDBStorage is not settled"));var b=new(d("WAResolvable").Resolvable)();I=b;J=null;void P(a).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b}function N(){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("QPLUserFlow").addPoint(H,"offline_queue_wait_start"),yield d("WAWaitForUserUnblocked").waitForUserUnblocked(),c("QPLUserFlow").addPoint(H,"offline_queue_wait_end")});return O.apply(this,arguments)}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e;a=a.getNewDB;d("EBReadyNotifier").resetEBReady();(e=c("QPLUserFlow")).start(H,{timeoutInMs:6e4});e.addPoint(H,"ls_storage_creation_start");a=(yield R(a));e.addPoint(H,"ls_storage_creation_end");e.addPoint(H,"eb_worker_add_device_skipped");e.endSuccess(H);d("EBReadyNotifier").markEBReady();G.DEBUG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"])));e={appId:c("nullthrows")(c("ServerAppID").app_id),executeGraphQLLightSpeedRequest:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=(yield d("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:b}));return e});function c(){return a.apply(this,arguments)}return c}(),getDb:R,getEval:function(){return c("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return(F||(F=b("Promise"))).resolve(function(b,a){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),a,{getInstance:d("LSDedicatedMqttChannel").getInstance(function(){return!0},(b={},b[d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,b),function(a,b){return b},c("emptyFunction")),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})})},region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!1,syncParams:c("LSPlatformMessengerSyncParams")};G.DEBUG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["created config"])));c("QPLUserFlow").addAnnotations(H,{string:{appId:e.appId}});var f=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");c("QPLUserFlow").addPoint(H,"platform_client_init_start");e=(yield W(a,e,f));c("QPLUserFlow").addPoint(H,"platform_client_init_end");K=Y(a);yield d("EBIsEbEnabledSubscriber").initIsEbEnabledPubSub(a);yield d("EBEpochChangeListener").initEBEpochChangeListener(a);yield d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a);G.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"])));return e});return Q.apply(this,arguments)}function R(a){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(!a&&J!=null)return J.promise;a=new(d("WAResolvable").Resolvable)();J=a;yield d("MAWVaultMaterialsStorage").setupVaultMaterials();var e={clearEbStores:d("EBDB").clearEbStores,flushEBSMtoEBDB:d("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:d("EBDBEbsmApi").rehydrateEBSMFromEBDB},g=(yield d("LSJSEBInMemoryStorage").makeReStorePersistence(e));g=d("LSReStoreWrapper").createLSReStore(g,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);e.updateEBSM=d("EBDBEbsmApi").updateEBSM(g);yield g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("LSDefaultSyncGroups").seedDb(a,void 0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":240");a.resolve(g);return g});return S.apply(this,arguments)}function e(){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(b("cr:7533")!=null||I==null)return;yield d("EBWorkerAddDeviceUtils").clearLSEBSMTables(yield R())});return T.apply(this,arguments)}function U(a){var b=c("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(a);return function(){b&&b()}}function V(a,b){var e=b==="Connected"?(D||(D=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(D||(D=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);G.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""])),b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":280"),function(){G.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"])))},function(a){G.MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""])),a==null?void 0:a.message);throw a})}function W(a,b,c){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){G.DEBUG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."])));var g=(yield e.getEval());G.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"])));var h=g()(a);G.DEBUG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."])));G.DEBUG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"])));g=(yield e.realtimeUnderylingTransport());var i=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(g,e.appId,f);G.DEBUG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"])));var j=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,i,h,e.schemaVersion));G.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"])));var k=null;b("cr:7533")!=null?c("promiseDone")(N().then(function(a){return b("cr:7533")()}),function(b){c("QPLUserFlow").addPoint(H,"sync_system_creation_start"),k=b(a,i,h,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest),c("QPLUserFlow").addPoint(H,"sync_system_creation_end")}):c("QPLUserFlow").addPoint(H,"sync_system_creation_skipped");var l=U(a);G.DEBUG(z||(z=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"])));var m;c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){m=a}));G.DEBUG(A||(A=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"])));i.onConnectionStatusChange(function(b){V(a,b)});G.DEBUG(B||(B=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"])));return{cleanup:function(){var a;G.DEBUG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"])));j==null||j.cleanup();i.cleanup();(a=k)==null||a.cleanup();l();m==null||m();K.forEach(function(a){return a()})},db:a}});return X.apply(this,arguments)}function Y(a){var b=[];if(c("gkx")("12414")){var e=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"UpdateEBState",value:{newState:a}}]})},f=a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(b){if(b!=null){c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),e,function(a){G.catching(a).mustfix("Process backup ids failed")});return}})});b.push(f)}else{f=Z(a);b.push(f)}return b}function Z(a){var e=null;function f(a){var f=e===null?"null":String(e),g=String(a);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.state_transition."+f+"_to_"+g});G.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state transition: "," -> ",""])),f,g);e===!0&&a===!1&&(G.DEBUG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch detected true->false transition, setting timeout to check self-correction"]))),void d("WAPromiseDelays").delayMs(1e3).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBIsEbEnabled").isEBEnabled()),b=a===!0;G.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch true->false correction check: corrected=",", current_state=",""])),String(b),String(a));d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_correction."+(b?"corrected":"not_corrected")});b=c("MAWEBLSInWorkerSwitch").isEnabled();a=a===b?"match":"mismatch";d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"ebls_switch.true_to_false_check."+a})}))["catch"](function(a){G.catching(a).MUSTFIX(n||(n=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch failed to check true->false correction"])))}));c("MAWEBLSInWorkerSwitch").set(a);e=a}d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state)).then(function(a){a!=null?f($(a)):f(!1)})["catch"](function(a){G.catching(a).MUSTFIX(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Failed to get initial state for EBLS Switch"])))});return a.tables.secure_encrypted_backups_client_state.subscribe(function(a,b){G.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["EBLS Switch state changed. operation: ",""])),b.operation);switch(b.operation){case"delete":f(!1);break;case"add":case"put":f($(b.value));break;default:b.operation;throw c("WAAssertUnreachable")(b.operation)}})}function $(a){var b=a.authorityLevel;a=a.backupTenancy;if(b==null)return!1;a=a!=null?a:(D||(D=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION);return(E||(E=d("I64"))).equal(a,(D||(D=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))&&(E||(E=d("I64"))).equal(b,(D||(D=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}g.init=a;g.genLSClient=L;g.getLSStorage=R;g.clearEBSMStorage=e;g.platformClientInit=W}),98);
__d("EBMessagePointQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25052280894396554"}),null);
__d("EBMessagePointQuery.graphql",["EBMessagePointQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:!1,kind:"LocalArgument",name:"minos_gk_enabled"},d={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},e={defaultValue:null,kind:"LocalArgument",name:"restore_type"},f=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],g={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"supplemental_otid",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"actor_token",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"mek_fbid",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"mek_id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"transport_sender_signing_pk",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"transport_sender_message_signature",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"franking_tag",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"reporting_tag",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"message_encryption_version",storageKey:null},y=[h,i],z={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"EBMessagePointQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:f,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{args:[{kind:"Variable",name:"minos_gk_enabled",variableName:"minos_gk_enabled"}],kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,e,a,c],kind:"Operation",name:"EBMessagePointQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:f,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},g,h,i,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_tags",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[j,g,h,i,k,l],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[j,g,h,i,k,l,m,n],storageKey:null},{condition:"minos_gk_enabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMinosProtobufStanza",kind:"LinkedField",name:"top_level_protobuf_v2",plural:!1,selections:[o,p,q,r,s,t,u,v,w,x],storageKey:null},{alias:null,args:null,concreteType:"XFBMinosProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs_v2",plural:!0,selections:[o,p,s,q,r,m,n,t,u,v,w,x],storageKey:null}]}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_not_found",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:y,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:y,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null},{condition:"minos_gk_enabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBMinosDecryptionKeyMap",kind:"LinkedField",name:"minos_decryption_keys",plural:!0,selections:[z,{alias:null,args:null,concreteType:"XFBMinosDecryptionKeys",kind:"LinkedField",name:"keys",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBMinosMekInfo",kind:"LinkedField",name:"mek_info",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"roster_hash",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_mek",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBMinosRecipientInfo",kind:"LinkedField",name:"recipient_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"epoch_fbid",storageKey:null},h],storageKey:null},{alias:null,args:null,concreteType:"XFBMekCreatorInfo",kind:"LinkedField",name:"mek_creator_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBMinosEncryptionKeys",kind:"LinkedField",name:"minos_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sender_auth_pk",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_epoch_head",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBMinosTransportKeys",kind:"LinkedField",name:"transport_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ephm_hpke_pk",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ephm_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mek_creator_transport_signing_pk",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null},z],storageKey:null}],storageKey:null}]},params:{id:b("EBMessagePointQuery_facebookRelayOperation"),metadata:{},name:"EBMessagePointQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EBgenerateMPSMessageQuery",["EBGraphQLRestoreDefinition"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return{__typename:"MPSMessageQuery",ctx:{__typename:"MPSQueryContext",caller:"HISTORY_RESTORE"},query:{__typename:"MPSMessagePointQuery",include_deleted:!1,otids:b,thread_id:a}}}function a(a,b){return d("EBGraphQLRestoreDefinition").toMpsMessageQueryForGraphQLQuery(JSON.stringify(h(a,b)))}g.generateMPSMessageQuery=h;g.generateMPSMessageQueryForGraphQLQuery=a}),98);
__d("MAWConvertEchoMessagesToEBProtobufs",["MAWHandleEBRestoreWithHIM"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWHandleEBRestoreWithHIM").convertEchoMessagesToEBProtobufs(a,b)}g.convertEchoMessagesToEBProtobufs=a}),98);
__d("EBMessagePointQuery",["Base64Utils","EBAPIConvertNativeToLS","EBAPIDecryptionModule","EBAPIQPLPoints","EBAPIWorkerCheck","EBDedupeLabyrinthMessages","EBDeriveAndStoreEpochs","EBGetClientState","EBLS","EBMessagePointQuery.graphql","EBgenerateMPSMessageQuery","FBLogger","I64","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSFactory","LSMEBTaskCreationSource","LSShape","LSVec","MAWConvertEchoMessagesToEBProtobufs","MAWCurrentUser","MAWEncryptedBackupUtils","MAWJobDefinitions","MpsTypes","QPLFlow","WAHashStringToNumber","WAJids","WAResultOrError","WorkerRelay","WorkerRelayNetwork","asyncToGeneratorRuntime","cr:4467","cr:4482","cr:5247","cr:5284","getErrorSafe","gkx","handleRestoreMessagesGraphQLResponse","qex","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("EBMessagePointQuery.graphql");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,g=a.instanceKey,h=a.messageIds;a=a.source;var k=c("qpl")._(521474469,"2612");g=g!=null?g:d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")());k=d("QPLFlow").startQPLFlow(k,{annotations:{bool:{minos_mvp_enabled:c("qex")._("208")===!0,occam_only_mailbox_users:c("gkx")("16674"),repl_enabled:c("gkx")("12911")},"int":{source:a!=null?a:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:g});try{var l,m,n;if(!d("EBAPIWorkerCheck").runningInWorker()){k.endFail(d("EBAPIQPLPoints").EBAPIQPLCommonErrorPoints.UNSUPPORTED_CONTEXT);return d("WAResultOrError").makeError("unsupported-context")}a=(yield d("EBLS").init()).db;k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.LSDB_SINGLETON_RETRIEVED);g=(yield d("EBGetClientState").getClientState(a));k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.CLIENT_STATE_RETRIEVED,{string:{device_id:(i||(i=d("I64"))).to_string((l=g==null?void 0:g.device_id)!=null?l:(i||(i=d("I64"))).zero)}});if(g==null){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}});return d("WAResultOrError").makeError("no-client-state")}var o=d("WAJids").threadIdForChatJid(e);l=g.backupId;var p=g.device_id,q=g.locally_available_epochs,r=g.mailboxRootKey;g=g.ocmfClientStateBlob;if(l==null||p==null||r==null||g==null){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}});return d("WAResultOrError").makeError("invalid-client-state")}m=""+((m=d("MAWCurrentUser").getAppID())!=null?m:0);q={restore_context:{act_thread_id:o,site:"www",tam_thread_subtype:0},success:{device_context:{device_id:i.to_string(p),locally_available_epochs:q,raw_tokens:{mailbox_root_key:d("Base64Utils").fromArrayBuffer(r),ocmf_client_state_blob:d("Base64Utils").fromArrayBuffer(g)}},mps_message_query:d("EBgenerateMPSMessageQuery").generateMPSMessageQueryForGraphQLQuery(o,[].concat(h))}};r={app_id:m,minos_gk_enabled:c("qex")._("208")===!0,restore_payload_string:JSON.stringify(q),restore_type:"MESSAGE_QUERY_RESTORE"};k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.CREATE_WORKER_NETWORK_EXECUTE_START);yield d("WorkerRelayNetwork").createWorkerNetworkExecute();k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.CREATE_WORKER_NETWORK_EXECUTE_END);k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START);g=(yield d("WorkerRelay").createWorkerQuery(j,r));k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END);h=g==null||(n=g.viewer)==null||(n=n.encrypted_backup)==null||(n=n.mailbox)==null?void 0:n.messages_point_restore;if(h==null){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});return d("WAResultOrError").makeError("invalid-graphql-response")}if((h==null?void 0:h.encrypted_messages)==null){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}});return d("WAResultOrError").makeError("invalid-graphql-response")}m=h.backup_id;q=h.encrypted_messages;r=h.epoch_derivation_set;g=h.exception_string;h=h.minos_decryption_keys;if(g!=null){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:g}});return d("WAResultOrError").makeError("server-side-exception")}m==null&&k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL);k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START);k.addAnnotations({bool:{hasEpochs:r!=null&&r.epoch_edges.length>0,nonLS:c("gkx")("7473")}});c("gkx")("7473")?yield d("EBDeriveAndStoreEpochs").deriveAndStoreEpochsNonLS(a,r):yield d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(r,a,p,void 0,!0);k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END);k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_MINOS_PROTOBUF_START);g=b("cr:5284")!=null?b("cr:5284").processMinosMessages(q):[];r=b("cr:5247")!=null?yield b("cr:5247").minosDecryptAndValidateMessages({encryptedMinosMessages:g,minosDecryptionKeys:h,qplFlow:k,threadId:d("MpsTypes").toThreadId(e)}):d("WAResultOrError").makeResult({decryptionResult:new Map(),errorMessages:[]});p=r.success===!0&&r.value.decryptionResult.size>0?r.value.decryptionResult:null;h=r.success===!0?r.value.errorMessages:[(g=r.error)!=null?g:"unknown-error"];k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_MINOS_PROTOBUF_END,{bool:{minos_decrypt_success:h.length===0},string_array:{minos_decrypt_errors:h}});g=b("cr:4467")!=null&&p!=null?b("cr:4467").dedupeEncryptedLabyrinthMessages(q,p):q;h=d("handleRestoreMessagesGraphQLResponse").processMessageArray(g,m!=null?m:(i||(i=d("I64"))).to_string(l));var s=h.encryptedLSEchoMessages,t=h.encryptedMessagesWithProtobufs;q=h.encryptedNonLSEchoMessages;g=h.encryptedNonLSProtobufs;if(c("gkx")("7473")){k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_LABYRINTH10_MESSAGES_START);m=(yield d("EBAPIDecryptionModule").decryptUsingNativeJS(a,o,g,q));if(!m.success){k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_LABYRINTH10_MESSAGES_FAILURE);return d("WAResultOrError").makeError("native-decryption-error")}k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_LABYRINTH10_MESSAGES_END,{bool:{labyrinth_10_toplevel_decrypt_success:m.value.decryptedEchoMessages.length===q.length&&m.value.decryptedProtobufs.length===g.length}});l=m.value.decryptedEchoMessages;h=m.value.decryptedProtobufs;q=c("qex")._("208")===!0?d("EBDedupeLabyrinthMessages").dedupeLabyrinthMessages(h,p):h;g=d("EBAPIConvertNativeToLS").convertNativeDecryptionResponseToDecryptedMessageType(l,q);b("cr:4482")!=null&&b("cr:4482").compareDecryptedMessagesCallNative(m,r,k);h=c("LSVec").toArray(g.echo);m=g.protobuf;g=h.map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)});h=[];l.length>0?h=d("MAWConvertEchoMessagesToEBProtobufs").convertEchoMessagesToEBProtobufs(g,e):h=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(m);k.endSuccess({bool:{isEcho:l.length>0,isProtobuf:q.length>0}});return d("WAResultOrError").makeResult(h)}if(t.length!==0&&s.length!==0){k.endSuccess();return d("WAResultOrError").makeResult([])}if(t.length!==0){g={decryptedProtobufs:[],protobufDecryptionFailures:!1};k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START);m=(yield a.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:o,encryptedMessagesWithProtobufs:c("LSVec").ofArray(t)})},"readwrite",void 0,void 0,f.id+":507"));l=m[0];q=m[1];if(q!=null){g.protobufDecryptionFailures=!0;k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROTOBUF_DECRYPTION_FAILURE);return d("WAResultOrError").makeError("empty-decryption-response")}b("cr:4482")!=null&&b("cr:4482").compareDecryptedMessagesCallLS(l,r,k);h=c("qex")._("208")===!0?d("EBDedupeLabyrinthMessages").dedupeLabyrinthLSMessages(l,p):l;if(h!=null){m=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(h);g.decryptedProtobufs=[].concat(m)}k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END);k.endSuccess({bool:{isEcho:!1,isProtobuf:!0}});return d("WAResultOrError").makeResult(g.decryptedProtobufs)}else{q={decryptedEchoDocuments:[],echoDecryptionFailures:!1};k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START);r=(yield a.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:o,encryptedMessages:c("LSVec").ofArray(s)})},"readwrite",void 0,void 0,f.id+":579"));p=r[0];l=r[1];if(l!=null){q.echoDecryptionFailures=!0;k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_DECRYPTION_FAILURE);return d("WAResultOrError").makeError("empty-decryption-response")}if(p!=null){h=c("LSVec").toArray(p).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(d("LSShape").toRecord(a).value)});m=d("MAWConvertEchoMessagesToEBProtobufs").convertEchoMessagesToEBProtobufs(h,e);q.decryptedEchoDocuments=[].concat(m);k.addPoint(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END)}k.endSuccess({bool:{isEcho:!0,isProtobuf:!1}});return d("WAResultOrError").makeResult(q.decryptedEchoDocuments)}}catch(b){g=c("getErrorSafe")(b);k.endFail(d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{string:{error_description:g.message,errorStackTrace:(a=g.stack)!=null?a:""}});c("FBLogger")("wmi_eb").catching(g).mustfix("Runtime error performing messagePointQuery: %s",g.message);return d("WAResultOrError").DEPRECATED_makeError("runtime-error")}});return k.apply(this,arguments)}g.messagePointQuery=a}),98);
__d("EBProbe",["FBLogger","MAWODSProxy","Promise","WAOdsEnums","WAShiftTimer","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b,c){this.$5=!1,this.$1=a,this.$2=b,this.$3=c}var e=a.prototype;e.sample=function(a){a=this.$1.sample(a);a&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.EB_MESSAGE_PROBE,key:"sampled"});return a};e.start=function(){var a=this;if(this.$4!=null)return;this.$4=new(d("WAShiftTimer").ShiftTimer)(function(){void a.$6()});this.$4.onOrBefore(this.$3.validationIntervalMs,void 0)};e.stop=function(){this.$4!=null&&(this.$4.cancel(),this.$4=null)};e.hasStarted=function(){return this.$4!=null};e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.$7(),this.$4!=null&&this.$4.onOrBefore(this.$3.validationIntervalMs,void 0)});function c(){return a.apply(this,arguments)}return c}();e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$5)return;this.$5=!0;try{var a=d("WATimeUtils").castToMillisTime(Date.now()-this.$3.sampleAgeThresholdMs);a=this.$2.fetchOlderThan({consume:!0,cutOffTimestamp:a});if(a.length>0)try{d("MAWODSProxy").odsBumpEntityKey({amount:a.length,entity:d("WAOdsEnums").Entity.EB_MESSAGE_PROBE,key:"validated"}),yield this.validateSamples(a)}catch(b){a=b instanceof Error?b:c("err")(String(b));c("FBLogger")("wmi_eb").catching(a).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Exception in validateSamples()"])))}}finally{this.$5=!1}});function e(){return a.apply(this,arguments)}return e}();e.addMarkerToItem=function(a,b,c){return!1};e.getConfig=function(){return this.$3};e.getSamplingDB=function(){return this.$2};e.validateSamples=function(a){return(i||(i=b("Promise"))).reject(c("err")("validateSamples() must be implemented by concrete probe classes"))};return a}();g.EBProbe=a}),98);
__d("EBSampler",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.sample=function(a){var b=this.$3(a);b=((b=this.$2.get(b))!=null?b:0)*this.$1;var c=d("Random").random();c=c<b;c&&this.$4.append(a);return c};b.setSamplingMultipler=function(a,b){this.$2.set(a,b)};b.setSamplingRate=function(a){this.$1=a};return a}();g.EBSampler=a}),98);
__d("InMemorySamplingDB",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=[],this.$4=new Map(),this.$5=50,this.$2=a,this.$3=b}var b=a.prototype;b.append=function(a){var b=this.$3(a);this.$1.push([this.$2(a),a]);this.$4.set(b,a)};b.fetchOlderThan=function(a){var b=a.consume;b=b===void 0?!1:b;var c=a.cutOffTimestamp;a=a.limit;a=a===void 0?50:a;var d=[];if(a<=0)return d;var e=0,f=[];for(var g of this.$1){var h=g[0],i=g[1];h<=c&&(d.push(i),b===!0&&(e++,f.push(i)));if(d.length>=a)break}if(b===!0&&e>0){this.$1.splice(0,e);for(h of f){i=this.$3(h);this.$4["delete"](i)}}return d};b.getItemByPrimaryKey=function(a){return(a=this.$4.get(a))!=null?a:null};b.size=function(){return this.$1.length};b.pruneOlderThan=function(a){var b=[];this.$1=this.$1.filter(function(c){var d=c[0];c=c[1];if(d<=a){b.push(c);return!1}return!0});for(var c of b){var d=this.$3(c);this.$4["delete"](d)}};b.purgeAll=function(){this.$1=[],this.$4.clear()};return a}();f.InMemorySamplingDB=a}),66);
__d("EBMessageProbe",["EBMessagePointQuery","EBProbe","EBSampler","FBLogger","InMemorySamplingDB","MAWEBLSInWorkerSwitch","Promise","QPLFlow","WAHashStringToNumber","WATimeUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","justknobx","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var c={};for(a of a){var d=b(a);c[d]==null&&(c[d]=[]);c[d].push(a)}return c}var k={qplEvent:c("qpl")._(521475573,"3232"),sampleAgeThresholdMs:(a=c("justknobx"))._("3485"),validationIntervalMs:a._("3949")},l=a._("3573")/1e4,m=new Map([["text",a._("3952")],["image",a._("3957")],["video",a._("3969")],["audio",a._("3970")],["document",a._("3973")],["sticker",a._("3977")],["gif",a._("3981")]]),n=function(a){return a.timestampMs},o=function(a){return a.messageType},p=function(){return new(d("InMemorySamplingDB").InMemorySamplingDB)(n,function(a){return a.messageId})},q=function(a){return new(d("EBSampler").EBSampler)(l,m,o,a)};e=function(a){function e(b,c,d){d===void 0&&(d=k);return a.call(this,b,c,d)||this}babelHelpers.inheritsLoose(e,a);e.getInstance=function(){if(!e.$EBMessageProbe$p_1){var a=p(),b=q(a);e.$EBMessageProbe$p_1=new e(b,a,k)}return e.$EBMessageProbe$p_1};e.reset=function(){e.$EBMessageProbe$p_1=null};var f=e.prototype;f.addMarkerToItem=function(a,b,c){return this.addMarker(a,b,c)};f.addMarker=function(a,b,c){var e=this.getSamplingDB();if(e==null)return!1;e=e.getItemByPrimaryKey(a);if(e==null)return!1;a={event:b,metadata:c,timestampMs:d("WATimeUtils").castToMillisTime(Date.now())};e.markers.push(a);return!0};f.getMarkersForMessage=function(a){var b=this.getSamplingDB();if(b==null)return null;b=b.getItemByPrimaryKey(a);return b==null?null:[].concat(b.markers)};f.getMessageSample=function(a){var b=this.getSamplingDB();return b==null?null:b.getItemByPrimaryKey(a)};f.$EBMessageProbe$p_2=function(a){return a.length===0?"":a.map(function(a){return a.event}).join(",")};f.validateSamples=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var e=new Map();for(var f of a){var g=f.chatJid+"_"+f.messageId;if(e.has(g))continue;var k=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")()),l=Date.now()-f.timestampMs,m=l/(1e3*60),n=function(a){if(a<5)return"<5min";else if(a>=5&&a<10)return"5-10min";else return">10min"};l=d("QPLFlow").startQPLFlow(this.getConfig().qplEvent,{annotations:{bool:{eb_state:c("MAWEBLSInWorkerSwitch").isEnabled(),isProtobufOnlyUpload:c("gkx")("18095")},"int":{markerCount:f.markers.length,sampleSize:a.length,sampleTimestampMs:f.timestampMs,validationIntervalMs:l,validationTimestampMs:Date.now()},string:{chatJid:f.chatJid,markerEvents:this.$EBMessageProbe$p_2(f.markers),messageId:f.messageId,messageType:f.messageType,validationIntervalBucket:n(m)}},instanceKey:k});e.set(g,l)}try{n=j(a,function(a){return a.chatJid});m=Object.entries(n).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a[0];a=a[1];var b=a.map(function(a){return a.messageId}),c=a[0].chatJid;b={chatJid:c,messageIds:b};e.forEach(function(a,b){a.addPoint("point_query_start")});b=(yield d("EBMessagePointQuery").messagePointQuery(b));e.forEach(function(a,b){a.addPoint("point_query_end")});return{chatJid:c,result:b,samples:a}});return function(b){return a.apply(this,arguments)}}());k=(yield (i||(i=b("Promise"))).all(m));for(g of k){l=g.result;f=g.samples;if(l.success){a=new Set(l.value.map(function(a){return a.otid}));for(n of f){m=n.chatJid+"_"+n.messageId;k=e.get(m);k!=null&&(a.has(n.messageId)?k.endSuccess({bool:{messageFound:!0}}):k.endFail("message_not_found",{bool:{messageFound:!1},string:{error:"message-not-found"}}))}}else for(m of f){k=m.chatJid+"_"+m.messageId;n=e.get(k);if(n!=null){n.endFail("query_failed",{bool:{messageFound:!1},string:{error:(a=l.error)!=null?a:"unknown-query-failure"}})}}}}catch(a){f=c("getErrorSafe")(a);c("FBLogger")("wmi").catching(f).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to validate samples"])));for(k of e.values())if(k!=null){k.endFail("validation_exception",{bool:{messageFound:!1},string:{error:(n=f.message)!=null?n:"unknown-validation-exception"}})}}});function e(b){return a.apply(this,arguments)}return e}();return e}(d("EBProbe").EBProbe);f=e.getInstance;a=e.reset;g.EBMessageProbe=e;g.getEBMessageProbeInstance=f;g.resetEBMessageProbeInstance=a}),98);
__d("EBMinosWasmDeriveAttachmentAccessTokenSecret",["EBGetMinosWasm","EBMinosLogger","EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WACreateWasmFunction","WAResultOrError","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.getWasmModule,f=d("EBMinosLogger").minosLogger.TAGS(["derive-attachment-access-token-secret"]);function g(a){a=a.attachmentAccessTokenSecret;return d("WAResultOrError").makeResult(d("EBMinosTypes").unsafeCastToAttachmentAccessTokenSecret(a))}return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.mediaKey;if(c("gkx")("12911")){var b=(yield d("EBMinosWasmReactorSingleton").createMinosReactorCommand({InputSpec:d("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:d("EBMinosWasm.pb").DeriveAttachmentAccessTokenSecretResultSpec,validateResult:g}));return b({deriveAttachmentAccessTokenSecret:{mediaKey:a}})}else{b=d("WACreateWasmFunction").createWasmFunction({InputSpec:d("EBMinosWasm.pb").DeriveAttachmentAccessTokenSecretInputSpec,ResultSpec:d("EBMinosWasm.pb").DeriveAttachmentAccessTokenSecretResultSpec,cli:"minos_cli",command:"derive-attachment-access-token-secret",getWasmModule:e,logger:f,validateResult:g});b=(yield b({mediaKey:a}));return b}});function h(b){return a.apply(this,arguments)}return h}()}e=a({getWasmModule:d("EBGetMinosWasm").getMinosWasm});g.deriveAttachmentAccessTokenSecret=e}),98);
__d("EBMinosWasmDeriveAttachmentPrimaryKeySecret",["EBGetMinosWasm","EBMinosLogger","EBMinosTypes","EBMinosWasm.pb","EBMinosWasmReactorSingleton","WACreateWasmFunction","WAResultOrError","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.getWasmModule,f=d("EBMinosLogger").minosLogger.TAGS(["derive-attachment-primary-key-secret"]);function g(a){a=a.attachmentPrimaryKeySecret;return d("WAResultOrError").makeResult(d("EBMinosTypes").unsafeCastToAttachmentPrimaryKeySecret(a))}return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.mediaKey;if(c("gkx")("12911")){var b=(yield d("EBMinosWasmReactorSingleton").createMinosReactorCommand({InputSpec:d("EBMinosWasm.pb").MinosCommandSpec,ResultSpec:d("EBMinosWasm.pb").DeriveAttachmentPrimaryKeySecretResultSpec,validateResult:g}));return b({deriveAttachmentPrimaryKeySecret:{mediaKey:a}})}else{b=d("WACreateWasmFunction").createWasmFunction({InputSpec:d("EBMinosWasm.pb").DeriveAttachmentPrimaryKeySecretInputSpec,ResultSpec:d("EBMinosWasm.pb").DeriveAttachmentPrimaryKeySecretResultSpec,cli:"minos_cli",command:"derive-attachment-primary-key-secret",getWasmModule:e,logger:f,validateResult:g});b=(yield b({mediaKey:a}));return b}});function h(b){return a.apply(this,arguments)}return h}()}e=a({getWasmModule:d("EBGetMinosWasm").getMinosWasm});g.deriveAttachmentPrimaryKeySecret=e}),98);
__d("EBWorkerEBDBApi",["EBDB","EBDBConsistencyApi","EBLS","LSAuthorityLevel","LSEncryptedBackupsBackupTenancy","WALogger","WAResolvable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WAResolvable").Resolvable)();function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBLS").genLSClient());try{yield d("EBDBConsistencyApi").startListeningDeviceRegistrations(a.db,d("EBDB").EBDBEnvironment.Worker)}catch(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Error on EBDB init in Worker: ",""])),a)}finally{i.resolve(a.db)}});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);yield d("EBDBConsistencyApi").addNewDevice(b,d("EBDB").EBDBEnvironment.Worker,a)});return k.apply(this,arguments)}function f(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);void d("EBDBConsistencyApi").trackConsistency(b,d("EBDB").EBDBEnvironment.Worker,a);return d("EBDBConsistencyApi").getDeviceId()});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBDB").getEBDB());a=(yield a.store("secure_encrypted_backups_client_state").readAll());return a[0]});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBDB").getEBDB());a=(yield a.store("secure_encrypted_backups_client_state").readAll());if((a==null?void 0:a.length)===0)return!1;a=a[0];var b=a.authorityLevel;a=a.backupTenancy;if(b==null)return!1;a=a!=null?a:c("LSEncryptedBackupsBackupTenancy").PRODUCTION;return Number(a)===c("LSEncryptedBackupsBackupTenancy").PRODUCTION&&Number(b)===c("LSAuthorityLevel").AUTHORITATIVE});return p.apply(this,arguments)}g.startListeningEBDeviceRegistrations=a;g.addNewDevice=e;g.trackConsistency=f;g.getSecureEBClientState=m;g.isEBEnabledEBDB=o}),98);
__d("EncryptedBackupTaskFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5725");b=d("FalcoLoggerInternal").create("encrypted_backup_task_failure",a);e=b;g["default"]=e}),98);
__d("LSEBPayloadSerializerError",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_BACKUP_OPERATION:-7,INVALID_CONTENT_TYPE:-6,INVALID_PAYLOAD_FORMAT:-5,CQL_DB_ERROR:-4,REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT:-3,DEPRECATED_SPROC:-2,UNKNOWN_ERROR:-1,NOT_AN_ERROR:0,BACKUP_NOT_FOUND:1,REQUIRED_TABLE_NOT_FOUND:2,NATIVE_OP_NOT_FOUND:3,BACKUP_UPLOAD_KILLSWITCHED:4,TASK_ID_NOT_FOUND:5,NOT_IMPLEMENTED:6,NOT_SUPPORTED_ON_WEB:7,DUPLICATE_TASK:8,CLIENT_STATE_NOT_LOADED:9,RECOVERY_CODE_NOT_FOUND:10,EPOCH_KEYS_NOT_FOUND:11,DEVICE_PAYLOAD_NOT_CREATED:12,NULL_DEVICE_PAYLOAD:13,EPOCH_PAYLOAD_NOT_CREATED:14,NULL_EPOCH_PAYLOAD:15,VIRTUAL_DEVICE_PAYLOAD_NOT_CREATED:16,NULL_VIRTUAL_DEVICE_PAYLOAD:17,DEVICE_METADATA_NOT_FOUND:18,NO_MATCHING_DEVICE_PUBLIC_KEY:19,NULL_MAILBOX_ROOT_KEY:20,NULL_ENCRYPTION_VERSION:21,NULL_OCMF_KEY:22,NULL_EPOCH_KEYS:23,NULL_DEVICE_ID:24,OPE_KEY_DERIVATION_FAILED:25,MESSAGE_KEY_DERIVATION_FAILED:26,NULL_MAILBOX_ROOT_KEY_V2:27,ECHO_DOCUMENT_ENCODING_FAILED:30,ECHO_PAYLOAD_CREATION_DISABLED:31,ECHO_DOCUMENT_ENCODING_SKIPPED:32,MESSAGE_PAYLOAD_ENCRYPTION_FAILED:40,SERVER_THREAD_ID_NOT_FOUND_FOR_JID:52,UNKNOWN_PROTOBUF_TYPE:60,SUPPLEMENTARY_DATA_KEY_UNEXPECTED:61,PROTOBUF_ENCRYPTION_FAILED:62,PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE:63,PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE:64,SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE:65,SUPPLEMENTAL_ENCRYPTION_FAILED:66,PROTOBUF_CONTEXT_ROW_NOT_FOUND:67,PROTOBUF_FORMATTING_FAILED:68,SUPPLEMENTAL_FORMATTING_FAILED:69,PROTOBUF_ALREADY_DELETED:70,PROTOBUF_NOT_FOUND_IN_DELETED_MESSAGES_TABLE:71,DELETION_PROTOBUF_IS_NULL:72,PROTOBUF_PAYLOAD_IN_CONTEXT_ROW_IS_NOT_FOUND:73,PROTOBUF_ENCRYPTION_FAILED_RETRYABLE:74,VALUE_SECRET_REF_INVALID:75,MINOS_ENCRYPTION_RESULT_NULL:76,SUPPLEMENTAL_OTID_NOT_SET_IN_CONTEXT_TABLE:77,SNAPSHOT_NOT_FOUND_FAILURE:78,THREAD_PK_NOT_FOUND_FOR_JID:100,MESSAGE_DECRYPTION_FAILED:101,EPOCH_KEY_FETCH_FAILED:102,TOO_MANY_OPEN_EPOCHS:103,MESSAGE_RANGE_PREPARE_FAILURE:104,ECHO_DOCUMENT_RESTORE_FAILED:105,MISMATCH_POINT_QUERY_MESSAGE_AND_RANGE_LENGTH:106,INITIAL_THREADS_FETCH_FOR_RESTORE_FAILED:107,MISSING_SUPPLEMENTAL_KEY_CIPHERTEXT:108,SUPPLEMENTAL_KEY_DECRYPTION_FAILURE:109,DEVICE_ID_MISMATCH:110,RESTORE_TO_TAM_INFO:111,MISSING_SERVER_THREAD_KEY:112,EB_ADD_DEVICE_FOUND_NO_LOCAL_THREADS:113,EB_MORE_THREADS_IN_MAPPING_TABLE:114,RESTORE_INTEGRITY_CHECK_FAILED:115,RESTORE_TOP_LEVEL_PROTOBUF_NULL:116,DECRYPT_MINOS_PROTOBUF_FAILURE:117,MESSAGE_PK_NOT_FOUND_IN_CLIENT_MESSAGES:200,OTID_NOT_FOUND_IN_ACT_MESSAGES:201,THREAD_ID_NOT_FOUND_IN_ACT_THREADS:202,THREAD_PK_NOT_FOUND_IN_CLIENT_THREADS:203,FAILED_TO_GET_THREAD_SORT_KEY:204,MEDIA_INFO_INVALID:205,REVERB_DB_NOT_ENABLED_FOR_INSTAMADILLO:206,SKIPPED_EB_DISABLED:300,SKIPPED_THREAD_NOT_ELIGIBLE:301,SKIPPED_MESSAGE_NOT_ELIGIBLE:302,NO_EPOCHS_FOUND:400,LATEST_EPOCH_QUERY_BY_ID_FAILED:401,FOUND_EPOCH_WITH_NULL_ROOT_KEY:402,FOUND_EPOCH_WITH_NULL_ANON_ID:403,NO_RECOVERY_CODE:501,NO_ERROR:601,ERROR_GENERAL:602,UNKNOWN:603,ONBOARDING_MATERIAL_DERIVATION_FAILURE:604,NULL_DEVICE_HMAC:605,MISSING_LATEST_EPOCH_AT_ONBOARDING:606,NO_THREADS_TO_COMPARE:701,START_SORT_KEY_FAILURE:702,END_SORT_KEY_FAILURE:703,LOOPING_UPLOAD_PAYLOAD_NOT_FOUND:704,NULL_ECHO_IDENTIFIERS:705,ECHO_TIMESTAMP_CONVERSION_FAILED:706,ECHO_PROTOBUF_THREAD_ID_MISMATCH:707,ECHO_PROTOBUF_TIMESTAMP_MISMATCH:708,ECHO_PROTOBUF_OTID_MISMATCH:709,NULL_ECHO_DOCUMENT:710,INVALID_PROTOBUF_BACKUP_ACTION:711,EMPTY_ENCODED_ECHO_DOCUMENT:712,LOOPING_UPLOAD_TASK_QUEUE_FULL:713,ECHO_DOCUMENT_ENCODING_UNKNOWN_ENCODING_ERROR:750,ECHO_DOCUMENT_ENCODING_MESSAGE_PK_NOT_FOUND_ERROR:751,ECHO_DOCUMENT_ENCODING_DISK_WRITE_CHECK_FAILED:752,ECHO_DOCUMENT_ENCODING_THREAD_TRANSPORT_ID_FETCH_FAILED:753,ECHO_DOCUMENT_ENCODING_FILE_WRITE_FAILED:754,ECHO_DOCUMENT_ENCODING_DISK_WRITE_DISABLED:755,ECHO_DOCUMENT_ENCODING_SHOULD_NOT_PERSIST:756,MISSING_SUPPLEMENTAL_DATA:757,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REPLY_PROXY_ERROR:758,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_QUERY_ERROR:759,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_ERROR:760,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_RECEIPTS_ERROR:761,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REACTIONS_ERROR:762,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_VISUAL_MESSAGE_ACTIONS_ERROR:763,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_POLLS_ERROR:764,READ_CLIENT_STATE_FROM_MAIN_DB_ERROR:801,NOT_SUPPORTED_ON_MAIN_DB:802,SKIP_MPS_WRITE_DUE_TO_HIGHER_TIMESTAMP_AVAILABILITY:851,MESSAGE_ALREADY_DELETED:852});f["default"]=a}),66);
__d("WAAbPropsHelpers",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=86400,m=600,n=604800;function a(a){return a==null?l:Math.max(m,Math.min(n,a))}function o(a){var b=[];Object.keys(a).forEach(function(c){var d=a[c],e=d[0];d[1];d=d[2];if(typeof e!=="number")return;b.push({configName:c,configCode:e,configDefault:d})});return b}function b(a,b){a=a[b][0];return typeof a==="number"?a:null}function p(a,b){switch(typeof b){case"boolean":return a==="1";case"number":return parseFloat(a);case"string":return a;default:d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["parseValue: unsure how to read ",""])),a);return null}}function c(a,b){var c=new Map();b.forEach(function(a){var b=a.configCode,d=a.configValue;a=a.configExpoKey;c.set(b,{configValue:d,configExpoKey:a})});var d={},e={};o(a).forEach(function(a){var b=a.configName,f=a.configCode;a=a.configDefault;var g=c.get(f);if(g==null)return;var h=g.configValue;g=g.configExpoKey;h=p(h,a);h!=null&&(d[b]=h);e[f]=g!=null?g:null});return{values:d,expoKeys:e}}function e(a,b,c){var e=babelHelpers["extends"]({},b,a),f={};Object.keys(e).forEach(function(a){if(c[a]==null){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdatePropValues: deleting config ",""])),a);return}f[a]=e[a]});return f}function f(a,b,c){var e=babelHelpers["extends"]({},b,a),f={};a=o(c).map(function(a){return a.configCode});var g=new Set(a),h=new Set();Object.keys(e).forEach(function(a){a=parseInt(a,10);var c=b?b[a]:null;!g.has(a)?(d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: deleting config_expo_key ",""])),a),c!=null&&c.trim()&&h.add(c)):(e[a]!==c&&(d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateExpoKeys: config_expo_key "," changed"])),a),c!=null&&c.trim()&&h.add(c)),f[a]=e[a])});return{propExpoKeys:f,expoKeysToDelete:h}}function q(a,b){if(b==null)return;var c=b;a.forEach(function(a){c["delete"](a)});if(c.size===0)return;return{internalExpoKeys:c,expoKeyStr:Array.from(c).join(",")}}g.maybeUpdateRefresh=a;g.asAbList=o;g.asAbCode=b;g.parseAbProps=c;g.maybeUpdatePropValues=e;g.maybeUpdateExpoKeys=f;g.maybeUpdateInternalExpoKeys=q}),98);
__d("WAAbProps",["WAAbPropsHelpers","err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(a){if(h)return h;else throw c("err")("abProps::"+a+" called before startAbProps")}function a(a,b){h==null&&(h={config:b,db:a})}function b(){return i("getHash").db.getHash()}function e(){return i("getRefreshSecs").db.getRefreshSecs().then(function(a){return d("WAAbPropsHelpers").maybeUpdateRefresh(a)})}function f(){return i("getConfig").config}function j(){return i("getAbProps").db.getAbProps()}function k(a){return i("getAbProps").db.setAbProps(a)}g.startAbProps=a;g.getHash=b;g.getRefreshSecs=e;g.getConfig=f;g.getAbProps=j;g.setAbProps=k}),98);
__d("WAAppData",[],(function(a,b,c,d,e,f){"use strict";a=1;b=2;f.EPOCH_STATUS_OPEN=a;f.EPOCH_STATUS_CLOSE=b}),66);
__d("WAArmadilloICDC.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="ICDCIdentityList";a.internalSpec={seq:[1,(c=d("WAProtoConst")).TYPES.INT32],timestamp:[2,c.TYPES.INT64],devices:[3,c.FLAGS.REPEATED|c.TYPES.BYTES],signingDeviceIndex:[4,c.TYPES.INT32]};b.name="SignedICDCIdentityList";b.internalSpec={details:[1,c.TYPES.BYTES],signature:[2,c.TYPES.BYTES]};g.ICDCIdentityListSpec=a;g.SignedICDCIdentityListSpec=b}),98);
__d("WAArrayChunk",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){c===void 0&&(c=!1);var e=0,f=[];while(e<a.length){var g=[],h=0;while(e<a.length){var i=a[e],j=d?d(i):1;if(!c&&h===0||h+j<=b)h+=j,g.push(i),e++;else{c&&j>b&&e++;break}}g.length>0&&f.push(g)}return f}f.chunk=a}),66);
__d("WACryptoPkcs7",["WACryptoDependencies","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=new Uint8Array(1);do d("WACryptoDependencies").getCrypto().getRandomValues(b);while(b[0]===0);h(a,b[0])}function b(a){var b=new Uint8Array(1);d("WACryptoDependencies").getCrypto().getRandomValues(b);h(a,(b[0]&15)+1)}function h(a,b){for(var c=0;c<b;c++)a.writeUint8(b)}function e(a){if(a.length===0)throw c("err")("unpadPkcs7 given empty bytes");var b=a[a.length-1];if(b>a.length)throw c("err")("unpadPkcs7 given "+a.length+" bytes, but pad is "+b);return new Uint8Array(a.buffer,a.byteOffset,a.length-b)}g.writeRandomPad=a;g.writeRandomPadMax16=b;g.writePad=h;g.unpadPkcs7=e}),98);
__d("WAMsgTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NOOP:0,UPSERT:1,DELETE:2,UPSERT_AND_DELETE:3};b={};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};b.name="MessageTransport";b.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,c],protocol:[2,h.TYPES.MESSAGE,e]};c.name="MessageTransport$Payload";c.internalSpec={applicationPayload:[1,h.TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],futureProof:[3,h.TYPES.ENUM,d("WACommon.pb").FUTURE_PROOF_BEHAVIOR]};e.name="MessageTransport$Protocol";e.internalSpec={integral:[1,h.TYPES.MESSAGE,m],ancillary:[2,h.TYPES.MESSAGE,f]};f.name="MessageTransport$Protocol$Ancillary";f.internalSpec={skdm:[2,h.TYPES.MESSAGE,l],deviceListMetadata:[3,h.TYPES.MESSAGE,o],icdc:[4,h.TYPES.MESSAGE,j],backupDirective:[5,h.TYPES.MESSAGE,i]};i.name="MessageTransport$Protocol$Ancillary$BackupDirective";i.internalSpec={messageId:[1,h.TYPES.STRING],actionType:[2,h.TYPES.ENUM,a],supplementalKey:[3,h.TYPES.STRING]};j.name="MessageTransport$Protocol$Ancillary$ICDCParticipantDevices";j.internalSpec={senderIdentity:[1,h.TYPES.MESSAGE,k],recipientIdentities:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,k],recipientUserJids:[3,h.FLAGS.REPEATED|h.TYPES.STRING]};k.name="MessageTransport$Protocol$Ancillary$ICDCParticipantDevices$ICDCIdentityListDescription";k.internalSpec={seq:[1,h.TYPES.INT32],signingDevice:[2,h.TYPES.BYTES],unknownDevices:[3,h.FLAGS.REPEATED|h.TYPES.BYTES],unknownDeviceIds:[4,h.FLAGS.REPEATED|h.TYPES.INT32]};l.name="MessageTransport$Protocol$Ancillary$SenderKeyDistributionMessage";l.internalSpec={groupId:[1,h.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,h.TYPES.BYTES]};m.name="MessageTransport$Protocol$Integral";m.internalSpec={padding:[1,h.TYPES.BYTES],dsm:[2,h.TYPES.MESSAGE,n]};n.name="MessageTransport$Protocol$Integral$DeviceSentMessage";n.internalSpec={destinationJid:[1,h.TYPES.STRING],phash:[2,h.TYPES.STRING]};o.name="DeviceListMetadata";o.internalSpec={senderKeyHash:[1,h.TYPES.BYTES],senderTimestamp:[2,h.TYPES.UINT64],recipientKeyHash:[8,h.TYPES.BYTES],recipientTimestamp:[9,h.TYPES.UINT64]};g.MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE=a;g.MessageTransportSpec=b;g.MessageTransport$PayloadSpec=c;g.MessageTransport$ProtocolSpec=e;g.MessageTransport$Protocol$AncillarySpec=f;g.MessageTransport$Protocol$Ancillary$BackupDirectiveSpec=i;g.MessageTransport$Protocol$Ancillary$ICDCParticipantDevicesSpec=j;g.MessageTransport$Protocol$Ancillary$ICDCParticipantDevices$ICDCIdentityListDescriptionSpec=k;g.MessageTransport$Protocol$Ancillary$SenderKeyDistributionMessageSpec=l;g.MessageTransport$Protocol$IntegralSpec=m;g.MessageTransport$Protocol$Integral$DeviceSentMessageSpec=n;g.DeviceListMetadataSpec=o}),98);
__d("WAAsMessageTransport",["WABinary","WACryptoPkcs7","WAJids","WAMsgTransport.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.type){case"text":return{actionType:d("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:a.externalId,supplementalKey:null};case"media":return{actionType:d("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:a.externalId,supplementalKey:null};case"reaction":return{actionType:d("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:a.originalMsgExternalId,supplementalKey:"reaction:"+d("WAJids").extractChatId__DANGEROUS(a.chatJid)};case"edit":return{actionType:d("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE.UPSERT,messageId:a.originalMsgExternalId,supplementalKey:"edit:"+d("WAJids").extractChatId__DANGEROUS(a.chatJid)+":"+(a.timestamp*1e3).toString()}}}function b(a,b,c,e,f,g){g===void 0&&(g=2);var h;b!=null&&(h={destinationJid:b});var i;a!=null&&(i={applicationPayload:{payload:a,version:g}});b=new(d("WABinary").Binary)();d("WACryptoPkcs7").writeRandomPadMax16(b);return{payload:i,protocol:{integral:{padding:b.readBuffer(),dsm:h},ancillary:{skdm:c==null?void 0:c,icdc:e==null?void 0:e,backupDirective:f==null?void 0:{actionType:f.actionType,messageId:f.messageId,supplementalKey:f.supplementalKey}}}}}g.backupDirectiveActionType=d("WAMsgTransport.pb").MESSAGE_TRANSPORT_PROTOCOL_ANCILLARY_BACKUP_DIRECTIVE_ACTION_TYPE;g.constructBackupDirective=a;g.asMessageTransport=b}),98);
__d("WAConvertRegistrationIdMixin",["WAParsableXmlNode"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAParsableXmlNode").convertBytesToUint(a.registrationElementValue,4)}g.registrationIdMixin=a}),98);
__d("WAConvertSignedPreKeyMixin",["WAParsableXmlNode"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{id:d("WAParsableXmlNode").convertBytesToUint(a.skeyIdKeyIDMixin.elementValue,3),pubkey:a.skeyValueKeyDataMixin.elementValue,signature:a.skeySignatureElementValue}}g.convertSignedPreKeyMixin=a}),98);
__d("WASmaxInPreKeysIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInPreKeysIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInPreKeysIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",400,499);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);
__d("WASmaxInPreKeysIQErrorNoValidJIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNoValidJIDMixin=a}),98);
__d("WASmaxInPreKeysRequestErrorsFetch",["WAResultOrError","WASmaxInPreKeysIQErrorBadRequestMixin","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNoValidJIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInPreKeysIQErrorNoValidJIDMixin").parseIQErrorNoValidJIDMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorNoValidJID",value:c.value});var e=d("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[b,c,e])}g.parseRequestErrorsFetch=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrorsFetch:b.value}))}g.parseFetchKeyBundlesResponseRequestError=a}),98);
__d("WASmaxInPreKeysIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",500,599);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);
__d("WASmaxInPreKeysIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInPreKeysServerErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackServerMixin","WASmaxInPreKeysIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:b.value});var c=d("WASmaxInPreKeysIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[b,c])}g.parseServerErrors=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseFetchKeyBundlesResponseServerError=a}),98);
__d("WASmaxInPreKeysEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateDeviceJid,a.validateDeviceJid],typeName:"DeviceJid|DeviceJid"};c={validators:[a.validateDeviceJid,a.validateDeviceJid,a.validateInteropDeviceJid,a.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"};e={validators:[a.validateDeviceJid,a.validateDomainJid],typeName:"DeviceJid|DomainJid"};f={validators:[a.validateUserJid,a.validateUserJid],typeName:"UserJid|UserJid"};g.DEVICEJID_DEVICEJID=b;g.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=c;g.DEVICEJID_DOMAINJID=e;g.USERJID_USERJID=f}),98);
__d("WASmaxInPreKeysIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInPreKeysResponsePaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"padding");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(b.value,0,524288);return!a.success?a:d("WAResultOrError").makeResult({paddingElementValue:a.value})}g.parseResponsePaddingMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"code",500,599);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorFallbackMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(b.value,"text");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,b.value,"code",500);return!b.success?b:d("WAResultOrError").makeResult({errorText:a.value,errorCode:b.value})}g.parseFetchKeyBundlesUserErrorMixin=a}),98);
__d("WASmaxInPreKeysDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"device-identity");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytes(a.value);return!a.success?a:d("WAResultOrError").makeResult({deviceIdentityElementValue:a.value})}g.parseDeviceIdentityMixin=a}),98);
__d("WASmaxInPreKeysKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!a.success?a:d("WAResultOrError").makeResult({elementValue:a.value})}g.parseKeyDataMixin=a}),98);
__d("WASmaxInPreKeysIdentityKeyMixin",["WASmaxInPreKeysKeyDataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"identity");if(!a.success)return a;a=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:a}g.parseIdentityKeyMixin=a}),98);
__d("WASmaxInPreKeysKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"type");if(!a.success)return a;a=d("WASmaxParseUtils").contentLiteralBytes(a.value,new Uint8Array([5]));return!a.success?a:d("WAResultOrError").makeResult({typeElementValue:a.value})}g.parseKeyTypeMixin=a}),98);
__d("WASmaxInPreKeysKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"id");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,3,3);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseKeyIDMixin=a}),98);
__d("WASmaxInPreKeysPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"key");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!a.success)return a;b=d("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;a=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:d("WAResultOrError").makeResult({keyIdKeyIDMixin:b.value,keyValueKeyDataMixin:a.value})}g.parsePreKeyMixin=a}),98);
__d("WASmaxInPreKeysRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"registration");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,4,4);return!a.success?a:d("WAResultOrError").makeResult({registrationElementValue:a.value})}g.parseRegistrationIDMixin=a}),98);
__d("WASmaxInPreKeysSignedPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"skey");if(!a.success)return a;var b=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"value");if(!c.success)return c;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"signature");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!a.success)return a;b=d("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(b.value);if(!b.success)return b;c=d("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(c.value);return!c.success?c:d("WAResultOrError").makeResult({skeySignatureElementValue:a.value,skeyIdKeyIDMixin:b.value,skeyValueKeyDataMixin:c.value})}g.parseSignedPreKeyMixin=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_cloud_api","true");if(!c.success)return c;var e=d("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(a);if(!e.success)return e;var f=d("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(a),g=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(a);if(!g.success)return g;var h=d("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(a),i=d("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(a);if(!i.success)return i;a=d("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({t:b.value,isCloudApi:c.value},e.value,{keyTypeMixin:f.success?f.value:null},g.value,{preKeyMixin:h.success?h.value:null},i.value,{deviceIdentityMixin:a.success?a.value:null}))}g.parseFetchKeyBundlesUserSuccessMixin=a}),98);
__d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin","WASmaxInPreKeysFetchKeyBundlesUserErrorMixin","WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin").parseFetchKeyBundlesUserSuccessMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserSuccess",value:b.value});var c=d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin").parseFetchKeyBundlesUserErrorMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserError",value:c.value});var e=d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin").parseFetchKeyBundlesUserErrorFallbackMixin(a);return e.success?d("WAResultOrError").makeResult({name:"FetchKeyBundlesUserErrorFallback",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UserSuccess","UserError","UserErrorFallback"],[b,c,e])}g.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=a}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysResponsePaddingMixin","WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"jid",d("WASmaxInPreKeysEnums").DEVICEJID_DEVICEJID);if(!b.success)return b;a=d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!c.success)return c;b=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d("WASmaxInPreKeysResponsePaddingMixin").parseResponsePaddingMixin(a);c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"user",0,1e5,h);return!c.success?c:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{responsePaddingMixin:a.success?a.value:null,listUser:c.value}))}g.parseFetchKeyBundlesResponseSuccessListUser=h;g.parseFetchKeyBundlesResponseSuccess=a}),98);
__d("WASmaxAttrs",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return d("WAWap").DROP_ATTR;else return a(b)}function b(a,b){if(b)return a;else return d("WAWap").DROP_ATTR}g.OPTIONAL=a;g.OPTIONAL_LITERAL=b}),98);
__d("WASmaxChildren",["WADeepEquals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return null;else return a(b)}function b(a,b){if(b==null)return null;else if(b)return a()}function c(a,b){if(b)for(var c=1;c<b.length;c++)if(!d("WADeepEquals").deepEqual(b[c],b[0]))throw new Error("expected all homogeneous children to be equal, but they were not");c=h(a,b,0,Infinity);return c}function e(a,b){return i(a,b,0,Infinity)}function h(a,b,c,d){if(b==null){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}var e=b.length;if(e<c)throw new Error("expected at least "+c+" children, but found "+e);else if(e>d)throw new Error("expected at most "+d+" children, but found "+e);return b.map(function(b){return a(b)})}function i(a,b,c,d){if(b===0){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}if(b<c)throw new Error("expected at least "+c+" children, but found "+b);else if(b>d)throw new Error("expected at most "+d+" children, but found "+b);c=[];for(d=0;d<b;d++)c.push(a());return c}g.OPTIONAL_CHILD=a;g.HAS_OPTIONAL_CHILD=b;g.HOMOGENEOUS_CHILD=c;g.HOMOGENEOUS_CHILD_COUNT=e;g.REPEATED_CHILD=h;g.REPEATED_CHILD_COUNT=i}),98);
__d("WASmaxOutPreKeysClientRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),xmlns:"encrypt",to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientRequestMixin=a}),98);
__d("WASmaxOutPreKeysFetchKeyBundlesRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.userJid;a=a.hasUserReasonIdentity;b=d("WASmaxJsx").smax("user",{jid:d("WAWap").JID(b),reason:d("WASmaxAttrs").OPTIONAL_LITERAL("identity",a)});return b}function a(a){a=a.userArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"get"},d("WASmaxJsx").smax("key",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,1e5))));return a}g.makeFetchKeyBundlesRequestKeyUser=h;g.makeFetchKeyBundlesRequest=a}),98);
__d("WASmaxParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,"SmaxParsingFailure: "+b)||this;c.name="SmaxParsingFailure";c.reason=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.toString=function(){return"SmaxParsingFailure: "+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxParsingFailure=a}),66);
__d("WASmaxRpcUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Object.keys(b).map(function(a){var c=a==="Request"?"<request>":'<response name="'+a+'">';return"Tried "+c+", but failed with "+b[a].error+"."}).join(" ");return'Failed to parse incoming stanza of <rpc name="'+a+'">. '+c}f.errorMessageRpcParsing=a}),66);
__d("WASmaxPreKeysFetchKeyBundlesRPC",["WAComms","WASmaxInPreKeysFetchKeyBundlesResponseRequestError","WASmaxInPreKeysFetchKeyBundlesResponseServerError","WASmaxInPreKeysFetchKeyBundlesResponseSuccess","WASmaxOutPreKeysFetchKeyBundlesRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutPreKeysFetchKeyBundlesRequest").makeFetchKeyBundlesRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess").parseFetchKeyBundlesResponseSuccess(b,a);if(c.success)return{name:"FetchKeyBundlesResponseSuccess",value:c.value};var e=d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError").parseFetchKeyBundlesResponseRequestError(b,a);if(e.success)return{name:"FetchKeyBundlesResponseRequestError",value:e.value};b=d("WASmaxInPreKeysFetchKeyBundlesResponseServerError").parseFetchKeyBundlesResponseServerError(b,a);if(b.success)return{name:"FetchKeyBundlesResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchKeyBundles",{Success:c,RequestError:e,ServerError:b}))});return h.apply(this,arguments)}g.sendFetchKeyBundlesRPC=a}),98);
__d("WAFetchPreKeyBundlesProtocol",["WAConvertRegistrationIdMixin","WAConvertSignedPreKeyMixin","WAParsableXmlNode","WAResultOrError","WASignalKeys","WASmaxPreKeysFetchKeyBundlesRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("WATagsLogger").TAGS(["fetchPreKeyBundlesProtocol"]);function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){l.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start fetching prekey of ","..."])),a.join(", "));a=(yield d("WASmaxPreKeysFetchKeyBundlesRPC").sendFetchKeyBundlesRPC({userArgs:a.map(function(a){return{userJid:a,hasUserReasonIdentity:!1}})}));switch(a.name){case"FetchKeyBundlesResponseSuccess":l.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["fetched prekey successfully"])));var b=new Map();a.value.listUser.map(function(a){var c=a.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;c.name==="FetchKeyBundlesUserSuccess"&&b.set(a.jid,n(c.value))});return d("WAResultOrError").makeResult(b);case"FetchKeyBundlesResponseServerError":var c=a.value.errorServerErrors.name;l.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["ServerError: ",""])),c);return d("WAResultOrError").makeError({type:"server-error",payload:c});case"FetchKeyBundlesResponseRequestError":c=a.value.errorRequestErrorsFetch.name;l.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["RequestError: ",""])),c);return d("WAResultOrError").makeError({type:"request-error",payload:c})}});return m.apply(this,arguments)}function n(a){var b=d("WAConvertRegistrationIdMixin").registrationIdMixin(a),c=d("WASignalKeys").serializeIdentity(a.elementValue),e=d("WAConvertSignedPreKeyMixin").convertSignedPreKeyMixin(a),f=a.preKeyMixin?o(a.preKeyMixin):null;a=d("WATimeUtils").castToUnixTime(a.t||0);return{keys:{regId:b,identity:c,oneTimeKey:f,signedKey:{id:e.id,signature:e.signature,publicKey:d("WASignalKeys").serializeIdentity(e.pubkey)}},timestamp:a}}function o(a){return{id:d("WAParsableXmlNode").convertBytesToUint(a.keyIdKeyIDMixin.elementValue,3),publicKey:d("WASignalKeys").serializeIdentity(a.keyValueKeyDataMixin.elementValue)}}g.fetchPreKeyBundlesProtocol=a}),98);
__d("WABulkRequestKeys",["WAFetchPreKeyBundlesProtocol","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAFetchPreKeyBundlesProtocol").fetchPreKeyBundlesProtocol(a));return!a.success?d("WAResultOrError").makeError("errRequestKeysParsingFailed"):d("WAResultOrError").makeResult(a.value)});return h.apply(this,arguments)}g.bulkRequestKeys=a}),98);
__d("WALock",["Promise","WAResolvable","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return{lock:function(c,e){var f=new(d("WAResolvable").Resolvable)(),g=c.map(function(a){return[a,new(d("WAResolvable").Resolvable)()]});(i||(i=b("Promise"))).all(g.map(function(b){var c=b[0],d=b[1];return a.enqueue(c,function(){d.resolve();return f.promise})}))["catch"](function(){d("WATagsLogger").TAGS(["WALock"]).ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Lock failed for ",""])),c)});return i.all(g.map(function(a){a[0];a=a[1];return a.promise})).then(function(){return e()})["finally"](function(){f.resolve()})},wait:function(b){return a.wait(b)}}}g.makeLock=a}),98);
__d("WALockMap",["WALock","WAPromiseQueue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=-1);a=new(d("WAPromiseQueue").PromiseQueueMap)(a);return d("WALock").makeLock(a)}g.makeLockMap=a}),98);
__d("WACryptoLibraryConfig",[],(function(a,b,c,d,e,f){"use strict";var g={signalFutureMessagesMax:2e3,S508658PreventOldSessionLookupAndPromote:!1,S508658AutoAcknowledgeStaleSessions:!1};function a(){return g}function b(a){g=a}f.getCryptoLibraryConfig=a;f.setCryptoLibraryConfig=b}),66);
__d("WASignalSessions",["WABinary","WACryptoLibraryConfig","WASignalKeys","WASignalOther","err"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function a(a){if(!d("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658AutoAcknowledgeStaleSessions)return a;return a.initialExchangeInfo==null?a:o(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,null,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function b(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function e(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function f(a,b){return o(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function l(a,b,c){return o(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function m(a,b,c,d){c===void 0&&(c=a.sendChain);return o(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function n(a,b,c,d,e,f,g){return o(a,b,c,d,e,f,0,[],g)}function o(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function p(a,b){b=new(d("WABinary").Binary)(b);var c=d("WASignalOther").readBytes(b,32),e=d("WASignalOther").readBytes(b,32);b=d("WASignalOther").readBytes(b,16);return q(a,c,e,b)}function q(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function r(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function s(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function t(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:s(a.sendChain),receiverChains:a.recvChains.map(r),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function u(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d("WASignalOther").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d("WASignalOther").toBuffer(b.pubKey),remoteIdentityPublic:d("WASignalOther").toBuffer(c.pubKey),rootKey:d("WASignalOther").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d("WASignalOther").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d("WASignalOther").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d("WASignalOther").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d("WASignalOther").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d("WASignalOther").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d("WASignalOther").toBuffer(a.cipherKey),macKey:d("WASignalOther").toBuffer(a.macKey),iv:d("WASignalOther").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey==null?void 0:d("WASignalOther").toBuffer(a.aliceBaseKey)}}function v(a){var b=B(a.currentSession,"currentSession");return x(b,a.previousSessions)}function w(a){return x(a,[])}function x(a,b){var e=B(a.sessionVersion,"sessionVersion");if(e!==h)throw c("err")("Signal: bad session version "+e);e=B(a.senderChain,"senderChain");var f=B(e.chainKey,"senderChain.chainKey");e=j(d("WASignalKeys").makeSerializedKeyPairFrom(A(e.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),z(e.senderRatchetKey,"senderRatchetKey")),B(f.index,"senderChain.chainKey.index"),A(f.key,32,"senderChain.chainKey.key"));f=B(a.receiverChains,"receiverChains").map(function(a){var b=B(a.chainKey,"receiverChains[].chainKey");return i(z(a.senderRatchetKey,"receiverChains[].senderRatchetKey"),B(b.index,"receiverChains[].chainKey.index"),A(b.key,32,"receiverChains[].chainKey.key"),y(a.messageKeys))});var g={regId:d("WASignalOther").castRegistrationId(B(a.localRegistrationId,"localRegistrationId")),pubKey:z(a.localIdentityPublic,"localIdentityPublic")},l={regId:d("WASignalOther").castRegistrationId(B(a.remoteRegistrationId,"remoteRegistrationId")),pubKey:z(a.remoteIdentityPublic,"remoteIdentityPublic")},m=a.pendingPreKey,n=null;if(m){var p=m.preKeyId;n=k(p!=null?d("WASignalKeys").castToPreKeyId(p):null,d("WASignalKeys").castToSignedPreKeyId(B(m.signedPreKeyId,"pendingPreKey.signedPreKeyId")),z(m.baseKey,"pendingPreKey.baseKey"))}p=a.aliceBaseKey==null?null:z(a.aliceBaseKey,"aliceBaseKey");return o(g,l,A(a.rootKey,32,"rootKey"),f,e,n,a.previousCounter||0,b,p)}function y(a){return a.map(function(a){return{index:B(a.index,"messageKeys[].index"),cipherKey:A(a.cipherKey,32,"messageKeys[].cipherKey"),macKey:A(a.macKey,32,"messageKeys[].macKey"),iv:A(a.iv,16,"messageKeys[].iv")}})}function z(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(B(a,b)))}function A(a,b,c){return d("WASignalOther").toBytes(B(a,c),b)}function B(a,b){if(a==null)throw c("err")("Signal: protobuf is missing "+b);return a}g.FORMAT_VERSION=h;g.maybeClearPendingPreKey=a;g.makeFreshRecvChain=b;g.makeRecvChain=i;g.makeFreshSendChain=e;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=f;g.updateChains=l;g.ratchetSession=m;g.makeFreshSession=n;g.makeSession=o;g.splitMsgKey=p;g.serializeSession=t;g.detachSession=u;g.parseSessionFromRecord=v;g.parseSession=w;g._parseSession=x;g.bytesOrThrow=A;g.definedOrThrow=B}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,(d=d("WAProtoConst")).TYPES.BYTES],counter:[2,d.TYPES.UINT32],previousCounter:[3,d.TYPES.UINT32],ciphertext:[4,d.TYPES.BYTES]};b.internalSpec={registrationId:[5,d.TYPES.UINT32],preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[6,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],identityKey:[3,d.TYPES.BYTES],message:[4,d.TYPES.BYTES]};c.internalSpec={id:[1,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],ratchetKey:[3,d.TYPES.BYTES],identityKey:[4,d.TYPES.BYTES],baseKeySignature:[5,d.TYPES.BYTES]};e.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],ciphertext:[3,d.TYPES.BYTES]};f.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],chainKey:[3,d.TYPES.BYTES],signingKey:[4,d.TYPES.BYTES]};h.internalSpec={generation:[1,d.TYPES.UINT32],signature:[2,d.TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(a,b,c,d,e,f,g){"use strict";var h=5,i=3;function j(a){var b=d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey"),c=d("WASignalSessions").definedOrThrow(a.senderMessageKeys,"senderMessageKeys"),e=d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:r(b["public"],"public"),senderSigningKeyPrivate:b["private"]?d("WASignalSessions").bytesOrThrow(b["private"],32,"private"):void 0,senderKeyId:d("WASignalSessions").definedOrThrow(a.senderKeyId,"senderKeyId"),unusedMsgKeys:c.map(function(a){return k(d("WASignalSessions").definedOrThrow(a.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(a.seed,50,"seed"))}),senderKeyChainKey:l(d("WASignalSessions").definedOrThrow(e.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(e.seed,32,"seed"))}}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e==null?[]:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d("WASignalSessions").definedOrThrow(a.senderKeyStates,"senderKeyStates");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});return c===-1?void 0:a.senderKeyStates[c]}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{"public":a.senderSigningKeyPublic,"private":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}})}}function r(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(d("WASignalSessions").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WACryptoDependencies","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Uint8Array(32);i.fill(255);var j=new Uint8Array([1]),k=new Uint8Array([2]);function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f=a.regId;a=a.staticKeyPair;var g=b.identity,h=b.signedKey.publicKey,j=c.privateKey,k=a.privateKey;e=(e=b.oneTimeKey)==null?void 0:e.publicKey;k=d("WABinary").Binary.build(i,v(k,h),v(j,g),v(j,h),e&&v(j,e)).readByteArrayView();h=(yield t(k,"WhisperText"));j=h[0];e=h[1];k=b.ratchetKey;h=d("WASignalSessions").makeFreshRecvChain(k,e);e=d("WASignalKeys").makeSerializedKeyPair();j=(yield r(j,e,k));k=d("WASignalSessions").makeInitialExchangeInfo(b.oneTimeKey==null?null:b.oneTimeKey.id,b.signedKey.id,d("WASignalKeys").serializePubKey(c));return d("WASignalSessions").makeFreshSession({regId:f,pubKey:d("WASignalKeys").serializePubKey(a)},{regId:b.regId,pubKey:g},j.rootKey,[h],d("WASignalSessions").makeFreshSendChain(e,j.chainKey),k,d("WASignalKeys").serializePubKey(c))});return l.apply(this,arguments)}function c(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f,g=a.regId;a=a.staticKeyPair;var h=a.privateKey,j=e.signed.privateKey,k=c,l=b.pubKey;f=(f=e.oneTime)==null?void 0:f.privateKey;l=d("WABinary").Binary.build(i,w(l,j),w(k,h),w(k,j),f&&w(k,f)).readByteArrayView();h=(yield t(l,"WhisperText"));j=h[0];k=h[1];f=e.ratchet;l=d("WASignalSessions").makeFreshSendChain(f,k);return d("WASignalSessions").makeSession({regId:g,pubKey:d("WASignalKeys").serializePubKey(a)},b,j,[],l,null,0,[],c)});return m.apply(this,arguments)}function e(a){a=d("WASignalGroupSession").makeSenderKeyState(d("WASignalKeys").serializePubKey(a),a.privateKey,d("WASignalGroupSession").makeSenderKeyChainKey(0,d("WASignalKeys").makeRawSenderKey()),d("WASignalOther").makeSenderKeyId(),[]);return(h||(h=b("Promise"))).resolve(d("WASignalGroupSession").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d("WASignalGroupSession").makeSenderKeyState(e,void 0,d("WASignalGroupSession").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d("WASignalGroupSession").updateSessionWithNewSenderKeyState(g,e):c=d("WASignalGroupSession").makeNewSenderKeySession(e);return(h||(h=b("Promise"))).resolve(c)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));c=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};var f=c(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperMessageKeys",80)}).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)});c=c(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return(h||(h=b("Promise"))).all([c,f])});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));c=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};var f=c(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperGroup",50)}).then(function(b){return d("WASignalGroupSession").makeSenderKeyMsgKey(a,b)});c=c(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return(h||(h=b("Promise"))).all([c,f])});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=b.privateKey;c=c;b=d("WASignalKeys").ecdh(b,c);c=(yield t(new Uint8Array(b),"WhisperRatchet",a));b=c[0];a=c[1];return{rootKey:b,chainKey:a}});return s.apply(this,arguments)}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=null);a=(yield d("WASignalOther").hkdf(a,c,b,64));return[d("WASignalOther").sliceBytes(a,0,32),d("WASignalOther").sliceBytes(a,32,32)]});return u.apply(this,arguments)}function v(a,b){return new Uint8Array(d("WASignalKeys").ecdh(a,b))}function w(a,b){return v(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=n;g.deriveSenderKeyMsgKey=p;g.calculateRatchet=r}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoDependencies","WACryptoLibraryConfig","WACryptoUtils","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=40,m=8,n=2e3;function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.sendChain,e=(yield d("WASignalWhitepaper").deriveMsgKey(c.nextMsgIndex,c.chainKey)),f=e[0];e=e[1];var g=(yield B(e)),h=g.cipherKey;g=g.macKey;h=(yield d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:e.iv},h,b));b=new(d("WABinary").Binary)();b.writeByteArray(a.local.pubKey);b.writeByteArray(a.remote.pubKey);var i=b.size();b.writeUint8(y(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:c.ratchetKey.serializedPubKey,counter:e.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:h},b);h=b.readByteArrayView();b=(yield A(g,h));g=h.subarray(i);h=d("WABinary").Binary.build(g,new Uint8Array(b,0,m)).readByteArrayView();i=a.initialExchangeInfo;if(i!=null){g=new(d("WABinary").Binary)();g.writeUint8(y(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(b=i.remoteOneTimeId)!=null?b:void 0,signedPreKeyId:i.remoteSignedId,baseKey:i.localOneTimePubKey,identityKey:a.local.pubKey,message:h},g);b="pkmsg";i=g.readByteArrayView()}else b="msg",i=h;g=d("WASignalSessions").makeSendChain(c.ratchetKey,e.index+1,f);h=d("WASignalSessions").updateChains(a,a.recvChains,g);return[h,{type:b,ciphertext:i}]});return o.apply(this,arguments)}function c(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return d("WAResultOrError").makeError("errSignalNoSession");var c=(yield t(a,b));if(c.success){var e=c.value,f=e[0];e=e[1];return d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:f,plaintext:e})}else{f=a.prevSessions;e=c;for(c=0;!e.success&&c<f.length;c++){var g=d("WASignalSessions").maybeClearPendingPreKey(d("WASignalSessions").parseSession(f[c])),h=(yield t(g,b));if(h.success){h=h.value;var i=h[0];h=h[1];i=d("WASignalSessions").setPrevSessions(i,[d("WASignalSessions").detachSession(a)].concat(f.slice(0,c),f.slice(c+1)));var j=!a||!d("WACryptoUtils").serializedPubKeysEqual(i.remote.pubKey,a.remote.pubKey)?i.remote.pubKey:null;e=d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:j,baseSession:g,usedPreKey:null},updatedSession:i,plaintext:h})}}return e}});return p.apply(this,arguments)}function e(a,b){if(a==null)return d("WAResultOrError").makeResult(null);a=a;if(C(a,b))return d("WAResultOrError").makeResult(a);var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d("WASignalSessions").parseSession(c[e]);if(C(f,b))return d("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658PreventOldSessionLookupAndPromote===!0?d("WAResultOrError").makeError("errSignalInvalidMsg"):d("WAResultOrError").makeResult(d("WASignalSessions").setPrevSessions(f,[d("WASignalSessions").detachSession(a)].concat(c.slice(0,e),c.slice(e+1))))}return d("WAResultOrError").makeResult(null)}function f(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=e.localSignedPreKey;if(f==null)return d("WAResultOrError").makeError("errSignalInvalidSignedPreKey");f=d("WASignalSignatures").deserializeSignedPreKey(f);if(f==null)return d("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization");if(f.id!==c.localSignedPreKeyId)return d("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch");var g=null;if(c.localOneTimeKeyId!=null){e=e.localOneTimeKey;if(e==null)return d("WAResultOrError").makeError("errSignalInvalidOneTimeKey");g=d("WASignalKeys").deserializePreKey(e);if(g==null)return d("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization");if(g.id!==c.localOneTimeKeyId)return d("WAResultOrError").makeError("errSignalOneTimeKeyMismatch")}a=(yield d("WASignalWhitepaper").initiateSessionIncoming(a,c.remote,c.sessionBaseKey,{signed:f.keyPair,oneTime:(e=g)==null?void 0:e.keyPair,ratchet:d("WASignalKeys").toSerializedKeyPair(f.keyPair)}));g=a.remote.pubKey;e=!b||!d("WACryptoUtils").serializedPubKeysEqual(g,b.remote.pubKey)?g:null;b&&!e&&(a=d("WASignalSessions").setPrevSessions(a,[d("WASignalSessions").detachSession(b)].concat(b.prevSessions.slice(0,l-1))));f=(yield t(a,c));if(!f.success)return f;g=f.value;b=g[0];c=g[1];return d("WAResultOrError").makeResult({newIdentity:e,baseSession:a,updatedSession:b,plaintext:c})});return q.apply(this,arguments)}function r(a){var b,c,e=null;try{var f=x(a,d("WASignalSessions").FORMAT_VERSION,m);if(!f.success)return f;f=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");b=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g))}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d("WAResultOrError").makeResult(f)}function s(a){a=x(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var h=a.registrationId,j=a.preKeyId,k=a.signedPreKeyId,l=a.baseKey,m=a.identityKey;a=a.message;if(h==null||k==null||l==null||m==null||a==null)return d("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");f=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(l));b={regId:d("WASignalOther").castRegistrationId(h),pubKey:d("WASignalKeys").castToSerializedPubKey(new Uint8Array(m))};e=j!=null?d("WASignalKeys").castToPreKeyId(j):null;c=d("WASignalKeys").castToSignedPreKeyId(k);g=new Uint8Array(a)}catch(a){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["deserializePkMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}l=r(g);return!l.success?l:d("WAResultOrError").makeResult(babelHelpers["extends"]({},l.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.ratchetPubKey,e=b.counter,f=b.ciphertext;b=b.versionContentMac;var g=a.recvChains,h=a.recvChains.findIndex(function(a){return d("WACryptoUtils").serializedPubKeysEqual(a.ratchetPubKey,c)});if(h===-1){var i=(yield d("WASignalWhitepaper").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,c)),k=d("WASignalSessions").makeFreshRecvChain(c,i.chainKey);k=(yield v(k,e));if(!k.success)return k;k=k.value;var l=d("WASignalKeys").makeSerializedKeyPair();i=(yield d("WASignalWhitepaper").calculateRatchet(i.rootKey,l,c));var n=g.slice(-4);n.push(k.updatedChain);k=k.msgKey;n=d("WASignalSessions").ratchetSession(a,n,d("WASignalSessions").makeFreshSendChain(l,i.chainKey),i.rootKey)}else{l=(yield v(g[h],e));if(!l.success)return l;i=l.value;e=g.slice();e[h]=i.updatedChain;k=i.msgKey;n=d("WASignalSessions").updateChains(a,e,a.sendChain)}l=(yield B(k));g=l.cipherKey;i=l.macKey;e=d("WABinary").Binary.build(a.remote.pubKey,a.local.pubKey,b.subarray(0,-m)).readByteArrayView();l=(yield A(i,e));a=b.subarray(-m);i=!d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(l,0,m),a);e=null;try{e=(yield d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:k.iv},g,f))}catch(a){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["decryptMsgFromSession error ",""])),a)}if(i&&e==null)return h===-1?d("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"):d("WAResultOrError").makeError("errInvalidMacInvalidCipherKey");if(i)return d("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext");return e==null?d("WAResultOrError").makeError("errUnknownInvalidCipherKey"):d("WAResultOrError").makeResult([n,e])});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b-a.nextMsgIndex,e=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(c>e)return d("WAResultOrError").makeError("errSignalTooManyMessagesInFuture");e=a.unusedMsgKeys;if(c<0){var f=e.findIndex(function(a){return a.index===b});return f===-1?d("WAResultOrError").makeError("errDuplicateMsg"):d("WAResultOrError").makeResult({msgKey:e[f],updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,z(e,f))})}f=a.nextMsgIndex;var g=(yield d("WASignalWhitepaper").deriveMsgKey(f,a.chainKey)),h=g[0];g=g[1];var i=null;if(c>0){c=c+e.length-n;c>0?(i=e.slice(c),c-=e.length):i=e.slice();for(f=f+1;f<=b;f++){c>0?c--:i.push(g);var j=(yield d("WASignalWhitepaper").deriveMsgKey(f,h));h=j[0];g=j[1]}}return d("WAResultOrError").makeResult({msgKey:g,updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,b+1,h,i||e)})});return w.apply(this,arguments)}function x(a,b,c){if(a.length<1)return d("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var e=a[0]>>>4;if(e!==b)return e<b?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");e=a.length-c;return e<1?d("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):d("WAResultOrError").makeResult(a.subarray(1,e))}function y(a,b){return(a<<4|b)&255}function z(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function A(a,b){return d("WACryptoDependencies").getCrypto().subtle.sign(d("WASignalOther").HMAC_SHA256,a,b)}function B(a){return(k||(k=b("Promise"))).all([d("WASignalOther").makeCryptoKey(a.cipherKey,"aes-cbc"),d("WASignalOther").makeCryptoKey(a.macKey,"hmac-sha256")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function C(a,b){a=a.aliceBaseKey;return!a?!1:d("WACryptoUtils").serializedPubKeysEqual(a,b)}g.MAX_UNUSED_KEYS=n;g.encryptMsg=a;g.decryptMsg=c;g.findMatchingSession=e;g.decryptPkMsgWithNewSession=f;g.deserializeMsg=r;g.deserializePkMsg=s;g.decryptMsgFromSession=t;g.readContent=x;g.versionByte=y}),98);
__d("WASignalGroupCipher",["WABinary","WACryptoDependencies","WACryptoLibraryConfig","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=64;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=n(a);if(!a.success)return a;a=a.value;var c=a.senderKeyId,e=a.iteration,f=a.signingKeyPublic;a=a.chainKey;c=(yield d("WASignalWhitepaper").initiateSenderKeySessionIncoming(c,e,f,a,b));return d("WAResultOrError").makeResult(c)});return k.apply(this,arguments)}function c(a){a=d("WASignalGroupSession").serializeSenderKeyState(a);var b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:a.senderKeyId,iteration:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").iteration,chainKey:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").seed,signingKey:d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey")["public"]},b);return b.readByteArrayView()}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!a.senderKeyStates||a.senderKeyStates.length===0)return d("WAResultOrError").makeError("errSignalNoSession");var c=a.senderKeyStates[a.senderKeyStates.length-1],e=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(c.senderKeyChainKey.nextMsgIndex,c.senderKeyChainKey.chainKey)),f=e[0];e=e[1];var g=(yield p(e.seed)),h=g[0];g=g[1];g=(yield d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:g},h,b));h=new(d("WABinary").Binary)();d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:c.senderKeyId,iteration:e.iteration,ciphertext:g},h);b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));b.writeBinary(h);g=d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalSessions").definedOrThrow(c.senderSigningKeyPrivate,"senderSigningKeyPrivate"),c.senderSigningKeyPublic);g=d("WASignalSignatures").signSenderKeyMessage(g,b.readByteArrayView());b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));b.writeBinary(h);b.writeByteArray(g);h=d("WASignalGroupSession").makeSenderKeyChainKey(e.iteration+1,f);g=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,h,c.senderKeyId,c.unusedMsgKeys));return d("WAResultOrError").makeResult([g,b.readByteArrayView()])});return l.apply(this,arguments)}function f(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.senderKeyMessageId,e=b.iteration,f=b.ciphertext;b=b.versionContentMac;c=d("WASignalGroupSession").findSenderKeyState(a,c);if(c==null)return d("WAResultOrError").makeError("errSignalNoSession");var g=c.senderSigningKeyPublic;b=r(b,g);if(!b)return d("WAResultOrError").makeError("errSignalInvalidKey");g=(yield s(c,e));if(!g.success)return g;b=g.value;c=b.msgKey;e=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,b.updatedSenderKeyState);g=(yield p(c.seed));a=g[0];b=g[1];c=(yield d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:b},a,f));return d("WAResultOrError").makeResult([e,c])});return m.apply(this,arguments)}function n(a){var b,c,e,f;try{a=d("WASignalCipher").readContent(a,d("WASignalGroupSession").FORMAT_VERSION,0);if(!a.success)return a;a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,a.value);b=a.id;c=a.iteration;var g=d("WASignalSessions").bytesOrThrow(a.signingKey,33,"signingKey");e=d("WASignalKeys").castToSerializedPubKey(g);f=d("WASignalSessions").bytesOrThrow(a.chainKey,32,"chainKey");if(b==null||c==null)return d("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeSenderKeyDistributionMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return d("WAResultOrError").makeResult({senderKeyId:b,iteration:c,signingKeyPublic:e,chainKey:f})}function o(a){if(a.length<1)return d("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var b=a[0]>>>4;if(b!==d("WASignalGroupSession").FORMAT_VERSION)return b<d("WASignalGroupSession").FORMAT_VERSION?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");if(a.length<1+j)return d("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var c,e,f;try{b=a.subarray(1,-j);b=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,b);c=b.id;e=b.iteration;f=b.ciphertext;if(c==null||e==null||f==null)return d("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""])),a);return d("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return d("WAResultOrError").makeResult({senderKeyMessageId:c,iteration:e,ciphertext:new Uint8Array(f),versionContentMac:a})}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new(d("WABinary").Binary)(a);var b=d("WASignalOther").readBytes(a,16);a=d("WASignalOther").readBytes(a,32);return[yield d("WASignalOther").makeCryptoKey(a,"aes-cbc"),b]});return q.apply(this,arguments)}function r(a,b){var c=a.subarray(a.length-j);a=a.subarray(0,a.length-j);return d("WASignalSignatures").verifyMsgSignalVariant(b,a,d("WASignalOther").toBytes(d("WASignalOther").toBuffer(c),64))}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a,e=b-c.senderKeyChainKey.nextMsgIndex,f=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(e>f)return d("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture");f=a.unusedMsgKeys||[];if(e<0){var g=f.findIndex(function(a){return a.iteration===b});return g===-1?d("WAResultOrError").makeError("errDuplicateMsg"):d("WAResultOrError").makeResult({msgKey:f[g],updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,c.senderKeyChainKey,c.senderKeyId,u(f,g))})}g=c.senderKeyChainKey.nextMsgIndex;var h=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(g,c.senderKeyChainKey.chainKey)),i=h[0];h=h[1];var j=null;if(e>0){e=e+f.length-d("WASignalCipher").MAX_UNUSED_KEYS;e>0?(j=f.slice(e),e-=f.length):j=f.slice();for(g=g+1;g<=b;g++){e>0?e--:j.push(h);var k=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(g,i));i=k[0];h=k[1]}}return d("WAResultOrError").makeResult({msgKey:h,updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,d("WASignalGroupSession").makeSenderKeyChainKey(b+1,i),a.senderKeyId,j||f)})});return t.apply(this,arguments)}function u(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}g.processSenderKeyDistributionMsg=a;g.createSenderKeyDistributionProto=c;g.encryptSenderKeyMsgWithSession=e;g.decryptSenderKeyMsgFromSession=f;g.deserializeSenderKeyMsg=o}),98);
__d("WACryptoLibrary",["WACryptoUtils","WAJids","WALockMap","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WALockMap").makeLockMap(60*1e3),k=[],l=300;function m(a){k.push(a),k.length>=l&&k.shift()}function a(a){a(k),k=[]}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){m("createOutgoingSession");b=y(b);var c=b.signedKey;c=(yield d("WASignalSignatures").verifyMsgSignalVariant(b.identity,c.publicKey,c.signature));d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["getSessionForRecipient pkmsg signature verification result: ",""])),c);if(!c){m("createOutgoingSession: errSignalInvalidKey");return d("WAResultOrError").makeError("errSignalInvalidKey")}c=(yield d("WASignalWhitepaper").initiateSessionOutgoing(a,b,d("WASignalKeys").makeKeyPair()));return d("WAResultOrError").makeResult(c)});return o.apply(this,arguments)}function c(a,b,c,d,e){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){a=a.handleNewSession;m("establishOutgoingSession");b=(yield n(b,d));if(!b.success)return b;d=b.value;return a(c,d,d.remote.pubKey,null,e)});return p.apply(this,arguments)}function e(a,c,e,f){var g=a.loadSession,h=a.handleNewSession;m("encryptContent");return j.lock([d("WAJids").extractUserJid(c)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=null;do{var b=(yield g(c,"cryptoLibraryEncryptContent"));if(b==null){m("encryptContent: errSignalInvalidKey");return d("WAResultOrError").makeError("errSignalInvalidKey")}if(f!=null&&!d("WACryptoUtils").uint8ArraysEqual(f,b.remote.pubKey)){m("encryptContent: identity-mismatch");return d("WAResultOrError").makeError("identity-mismatch")}b=(yield d("WASignalCipher").encryptMsg(b,e));var i=b[0];b=b[1];var j=(yield h(c,i,i.remote.pubKey));j.success?a=d("WAResultOrError").makeResult(babelHelpers["extends"]({},b,{baseKey:i.aliceBaseKey})):j.error}while(a==null);return a}))}function f(a,c,e,f,g){var h=a.loadSession,i=a.handleNewSession,k=a.loadSignedPreKey,l=a.loadOneTimePreKey;m("decryptContent");return j.lock([d("WAJids").extractUserJid(e)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=!1,b=(yield h(e,"decryptContent"));if(f.type==="pkmsg"){var j=d("WASignalCipher").deserializePkMsg(f.ciphertext);if(!j.success){m("decryptContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}j=j.value;j=(yield q({loadSignedPreKey:k,loadOneTimePreKey:l},c,j,b));if(!j.success)return j;j=j.value}else{f.type;var n=d("WASignalCipher").deserializeMsg(f.ciphertext);if(!n.success){m("decryptContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}n=n.value;b=(yield d("WASignalCipher").decryptMsg(b,n));if(!b.success)return b;j=b.value}n=j;b=n.newSessionInfo;b&&(b.newIdentity!=null||b.usedPreKey!=null)&&(yield i(e,b.baseSession,b.newIdentity,b.usedPreKey));if(!a){n=b==null?void 0:b.baseSession.remote.pubKey;yield g(new Uint8Array(j.plaintext),n);a=!0}yield i(e,j.updatedSession,j.updatedSession.remote.pubKey);return d("WAResultOrError").makeResult()}))}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a.loadSignedPreKey;a=a.loadOneTimePreKey;m("decryptPkMsg");var g=d("WASignalCipher").findMatchingSession(e,c.sessionBaseKey);if(!g.success)return g;g=g.value;if(g){g=(yield d("WASignalCipher").decryptMsgFromSession(g,c));if(!g.success)return g;g=g.value;var h=g[0];g=g[1];return d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:h,plaintext:g})}else{h=c.localOneTimeKeyId;g=(yield f(c.localSignedPreKeyId));f=h==null?null:yield a(h);a=(yield d("WASignalCipher").decryptPkMsgWithNewSession(b,e,c,{localSignedPreKey:g,localOneTimeKey:f}));if(!a.success)return a;b=a.value;e=b.newIdentity;c=b.baseSession;g=b.updatedSession;f=b.plaintext;return d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:e,baseSession:c,usedPreKey:h},updatedSession:g,plaintext:f})}});return r.apply(this,arguments)}function s(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;m("encryptGroupContent");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){do{var b=(yield h(e,f));if(!b.success)return d("WAResultOrError").makeError(b.error);b=b.value;var c=(yield d("WASignalGroupCipher").encryptSenderKeyMsgWithSession(b,g));if(c.success){c=c.value;var i=c[0];c=c[1];yield a(e,f,i);i=b.senderKeyStates[b.senderKeyStates.length-1];b=d("WAResultOrError").makeResult({ciphertext:{ciphertext:c,type:"skmsg"},senderKeyId:i.senderKeyId,senderKeyDistributionProto:d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(i))})}else{m("encryptGroupContent: sender-key-no-session");return d("WAResultOrError").makeError("sender-key-no-session")}}while(b==null);return b}))}function t(c,e,f,g,i){var k=c.loadSenderKeySession,a=c.saveSenderKeySession;m("decryptGroupContent");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=!1,c=(yield k(e,f));if(!c.success){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[WACryptoLibrary] Unable to load sender key session for group during decryptGroupContent: ",", author: ",""])),e,f);return d("WAResultOrError").makeError(c.error)}var j=d("WASignalGroupCipher").deserializeSenderKeyMsg(g);if(!j.success){m("decryptGroupContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}c=c.value;c=(yield d("WASignalGroupCipher").decryptSenderKeyMsgFromSession(c,j.value));if(!c.success)return c;j=c.value;c=j[0];j=j[1];b||(yield i(new Uint8Array(j)),b=!0);yield a(e,f,c);return d("WAResultOrError").makeResult()}))}function u(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;m("saveSenderKeySession");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=null;if(h){var c=(yield h(e,f));b=c.success?c.value:null}c=(yield d("WASignalGroupCipher").processSenderKeyDistributionMsg(g,b));if(!c.success)return c;b=c.value;yield a(e,f,b);return d("WAResultOrError").makeResult()}))}function v(c,e,f,g){var a=c.saveSenderKeySession;m("rotateGroupSenderKey");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WASignalWhitepaper").initiateSenderKeySessionOutgoing(g)),c=b.senderKeyStates[0].senderKeyId;yield a(e,f,b);return{senderKeyId:c}}))}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.loadSenderKeySession;a=a.saveSenderKeySession;m("createSenderKeyDistributionMsg");var f=(yield e(b,c)),g=f.error;if(!f.success&&g==="errLoadSenderKeySession"){g=(yield d("WASignalKeys").makeKeyPair());yield v({saveSenderKeySession:a},b,c,g);f=(yield e(b,c))}if(f.success){a=f.value.senderKeyStates.slice(-1);if(a.length>0)return d("WAResultOrError").makeResult(d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(a[0])))}m("createSenderKeyDistributionMsg: errGetSenderKeyProto");return d("WAResultOrError").makeError("errGetSenderKeyProto")});return x.apply(this,arguments)}function y(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;m("sanitizeInitialSessionInfo");var f=d("WASignalKeys").castToSerializedPubKey(e.publicKey);return{regId:d("WASignalOther").castRegistrationId(b),identity:d("WASignalKeys").castToSerializedPubKey(c),signedKey:{id:d("WASignalKeys").castToSignedPreKeyId(e.id),publicKey:f,signature:d("WASignalOther").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d("WASignalKeys").castToPreKeyId(a.id),publicKey:d("WASignalKeys").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}g.publishLogs=a;g.createOutgoingSession=n;g.establishOutgoingSession=c;g.encryptContent=e;g.decryptContent=f;g.encryptGroupContent=s;g.decryptGroupContent=t;g.saveSenderKeySession=u;g.rotateGroupSenderKey=v;g.createSenderKeyDistributionMsg=w}),98);
__d("WACryptoManager",["Promise","WABridge","WACryptoLibrary","WACryptoUtils","WAGlobals","WAJids","WALogger","WALoggerTag","WANullthrows","WAOdsEnums","WAPromiseQueue","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","WASignalSessions","WASignalSignatures","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u=d("WATagsLogger").TAGS([c("WALoggerTag").CryptoManager]),v={type:"default"};function a(a){return{flush:function(){return a.storage.savePendingToDatabase().then(function(){})}}}function e(a){return{regInfo:a.regInfo,network:a.network,storage:a.storage}}function w(a,b,c,d,e){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){e=(yield e(b,f));if(e!=null&&c.type!=="requestNewSession"){f=e;if(c.type==="default")return d("WAResultOrError").makeResult(f);else if(f.aliceBaseKey!=null&&c.session.baseKey!=null){c.type;if(!d("WACryptoUtils").uint8ArraysEqual(c.session.baseKey,f.aliceBaseKey))return d("WAResultOrError").makeResult(f)}}if(c.type==="useSession")e=c.session.keys;else{c.type;f=(yield a.network.requestKeys(b));if(!f.success)return f;e=f.value.keys;c.type==="compareTSAndUseSession"&&c.session.timestamp>=f.value.timestamp&&(e=c.session.keys)}b=(yield d("WACryptoLibrary").createOutgoingSession(a.regInfo,e));return!b.success?b:d("WAResultOrError").makeResult(b.value)});return x.apply(this,arguments)}function f(a,b,c,e){return d("WACryptoLibrary").establishOutgoingSession({handleNewSession:a.storage.handleNewSession},a.regInfo,b,c,e)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Establish outgoing sessions"])));var c=(yield a.storage.loadSessions(b));b=b.filter(function(a){return!c.has(a)});if(b.length===0){d("WALogger").DEV(l||(l=babelHelpers.taggedTemplateLiteralLoose(["[sessions] No need to establish outgoing sessions"])));return c}d("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Missing sessions: ",". Requesting keys"])),b.length);b=(yield a.network.bulkRequestKeys(b));if(!b.success){d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["[sessions] fail during key requesting"])));return c}for(var e of c.entries()){var f=e[0],g=e[1];g.sendChain.nextMsgIndex>=d("WAGlobals").getConfig().sessionDropIfTooOld()&&(d("WALogger").DEV(o||(o=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Removing session "," due to ratchet key"])),f),c["delete"](f),d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WA_LONG_SESSION_DROP,key:"decryption"}))}g=b.value;d("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Received keys ",""])),g.size);var h=new(d("WAPromiseQueue").PromiseQueue)();g.forEach(function(e,b){h.enqueue(function(){return d("WACryptoLibrary").createOutgoingSession(a.regInfo,e.keys).then(function(a){a.success===!1?d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["[sessions] Failed to create a session"]))):c.set(b,a.value)})})});yield h.wait();return c});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=Array.from(e.keys());d("WALogger").LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] sendWrittenMsg bulkEncryptContent"])));f=(yield y(a,f));var g=new Map();d("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] start encryption"])));return(t||(t=b("Promise"))).all(Array.from(f.entries()).map(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f=b[0];b=b[1];b=(yield d("WASignalCipher").encryptMsg(b,c("WANullthrows")((b=e.get(f))==null?void 0:b.plaintext)));var h=b[0];b=b[1];g.set(f,babelHelpers["extends"]({},b,{baseKey:null}));return a.storage.handleNewSession(f,h,h.remote.pubKey)});return function(a){return f.apply(this,arguments)}}())).then(function(){return d("WAResultOrError").makeResult(g)})});return B.apply(this,arguments)}function C(a,b,c,e,f){return d("WACryptoLibrary").encryptContent({loadSession:function(b){return w(a,b,e,a.storage.loadSession,"cryptoManagerEncryptContent").then(function(a){if(a.success===!0)return a.value;else return null})},handleNewSession:a.storage.handleNewSession},b,c,f)}function D(a,b,c,e){return d("WACryptoLibrary").decryptContent({loadSession:a.storage.loadSession,handleNewSession:a.storage.handleNewSession,loadSignedPreKey:a.storage.loadSignedPreKey,loadOneTimePreKey:a.storage.loadOneTimePreKey},a.regInfo,b,c,e)}function E(a,b){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.storage.loadSession(b,"getParticipantInfo"));return a==null?void 0:a.remote});return F.apply(this,arguments)}function G(a){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,e=(yield a.storage.getLastPreKeyGenerationId());b=((b=e==null?void 0:e.lastPreKeyId)!=null?b:0)+1;b=d("WASignalKeys").makePreKeys(b,1)[0];a=(yield a.storage.saveOneTimePreKey({keyId:b.plainObject.id,encoded:b.record}));if(a.success)return b.plainObject;throw c("err")("Cannot save one time prekey: "+a.error+", LastPreKeyId: "+((b=e==null?void 0:e.lastPreKeyId)!=null?b:0))});return H.apply(this,arguments)}function I(a,b){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=d("WAGlobals").getConfig().maxPrekeysToUpload());var c=(yield a.storage.getLastPreKeyGenerationId());c=d("WASignalKeys").makePreKeys(((c=c==null?void 0:c.lastPreKeyId)!=null?c:0)+1,b);return a.storage.savePreKeysGeneration(c.map(function(a){var b=a.plainObject;a=a.record;return{keyId:b.id,encoded:a}}))});return J.apply(this,arguments)}function K(a){return a.storage.loadLatestSignedPreKey().then(function(b){if(b.success===!1){var e,f,g;u.TAGS([c("WALoggerTag").SignedPrekey]).ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate signed prekey ",""])),b==null||(e=b.payload)==null?void 0:e.toString());throw c("err")("Failed to generate signed prekey: "+((f=b==null||(g=b.payload)==null?void 0:g.message)!=null?f:""))}f=b.value;f=d("WASignalSignatures").deserializeSignedPreKey(f);if(f==null){u.TAGS([c("WALoggerTag").SignedPrekey]).ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize signed prekey: ",""])),b);throw c("err")("failed to deserialize signed prekey")}return L(a,f.id+1)})}function L(a,b){var e=d("WASignalSignatures").makeSignedPreKey(b,d("WATimeUtils").unixTimeMs(),a.regInfo.staticKeyPair);b=d("WASignalSignatures").serializeSignedPreKeyForPrivateStorage(e);return a.storage.saveSignedPreKeyIfNew(e.id,b).then(function(a){if(a.type==="success")return d("WAResultOrError").makeResult(e);else{a.type;return d("WAResultOrError").makeResult(a.key)}}).then(function(a){if(!a.success){var b,d;u.TAGS([c("WALoggerTag").SignedPrekey]).ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate signed prekey with id: ",""])),a);throw c("err")("Unexpected error when generateSignedPreKeyWithId: "+((b=a==null||(d=a.payload)==null?void 0:d.message)!=null?b:a.error))}return a.value})}function M(a,b,c,e){return d("WACryptoLibrary").encryptGroupContent({loadSenderKeySession:a.storage.loadSenderKeySession,saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e)}function N(a,b,c,e,f){return d("WACryptoLibrary").decryptGroupContent({loadSenderKeySession:a.storage.loadSenderKeySession,saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e,f)}function O(a,b,c,e){return d("WACryptoLibrary").saveSenderKeySession({saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e)}function P(a,b,c){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield G(a));return d("WACryptoLibrary").rotateGroupSenderKey({saveSenderKeySession:a.storage.saveSenderKeySession},b,c,e.keyPair)});return Q.apply(this,arguments)}function R(a){return(t||(t=b("Promise"))).resolve().then(function(){return{regId:d("WASignalOther").makeRegistrationId(a),staticKeyPair:d("WASignalKeys").makeKeyPair(),authKeyPair:d("WASignalKeys").makeKeyPair()}})}function S(a){return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,d("WASignalSessions").serializeSession(a))}function T(a){return d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,a,d("WASignalSessions").parseSessionFromRecord)}function U(a){return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,d("WASignalGroupSession").serializeSession(a))}function V(a){return d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").SenderKeyRecordStructureSpec,a,d("WASignalGroupSession").parseSessionFromRecord)}function W(a){return a}function X(a,b){return a+"|"+b}function Y(a){a=a.split("|");if(a.length!==2)throw c("err")("Incorrect ComplexSenderKey");return{groupId:d("WAJids").unsafeCoerceToGroupJid(a[0]),deviceId:d("WAJids").unsafeCoerceToDeviceJid(a[1])}}g.DEFAULT_SESSION_REQUEST=v;g.cryptoManagerFlushable=a;g.initCryptoManager=e;g.getSessionForRecipient=w;g.establishOutgoingSession=f;g.ensureSessionsExists=y;g.bulkEncryptContent=A;g.encryptContent=C;g.decryptContent=D;g.getParticipantInfo=E;g.generateOneTimePreKey=G;g.generatePreKeys=I;g.generateSignedPreKey=K;g.generateSignedPreKeyWithId=L;g.encryptGroupContent=M;g.decryptGroupContent=N;g.saveSenderKeySession=O;g.rotateGroupSenderKey=P;g.generateRegistrationInfo=R;g.encodeSession=S;g.decodeSession=T;g.encodeSenderKeySession=U;g.decodeSenderKeySession=V;g.castToPreKeyGenerationId=W;g.encodeSenderKey=X;g.decodeSenderKey=Y}),98);
__d("WADbSignal",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a,b,c){return a+"_"+b+"_"+c}c={abProps:"abProps",authKeyPair:"authKeyPair",cat:"cat",certificateChain:"certificateChain",clockSkew:"clockSkew",deviceId:"deviceId",deviceUUID:"deviceUUID",edgeInfo:"edgeInfo",fbid:"fbid",identityKeyPair:"identityKeyPair",lastPrekeyGenerationId:"lastPrekeyGenerationId",lastPrekeyId:"lastPrekeyId",lastSessionDeviceWasLinkedTo:"lastSessionDeviceWasLinkedTo",lastSignedPrekeyId:"lastSignedPrekeyId",regId:"regId",registrationVersion:"registrationVersion",deviceRegUnixTime:"deviceRegUnixTime"};({msgrDeviceId:"msgrDeviceId"});d={registrationHistory:"registrationHistory"};f.unsafeCoerceToSenderKeySessionId=a;f.buildSenderKeySessionId=b;f.MetaKeysEnum=c;f.PlainTextMetaKeysEnum=d}),66);
__d("WABulkSaveSignalDataApi",["Promise","WACryptoManager","WADbSignal","WAJids","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.dhashUpdate,e=a.icdcUpdate,f=a.identityRemove,g=a.identityUpdate,j=a.preKeyRemove,l=a.senderKeySessionUpdate,m=a.sessionRemove,n=a.sessionUpdate,o=a.lastSyncTsUpdate,p=n.map(function(a){var b=a.id;a=a.updated;return{id:b,session:d("WACryptoManager").encodeSession(a)}}),q=[];l.forEach(function(a){var b=a.author,c=a.groupId;a=a.updated;var e=d("WAJids").extractUserJid(b);b=d("WAJids").extractDeviceId(b);var f=d("WADbSignal").buildSenderKeySessionId(c,e,b);q.push({deviceId:b,groupJid:c,id:f,record:d("WACryptoManager").encodeSenderKeySession(a),userJid:e})});yield d("WASignalDB").getDb().runInTransaction(["contacts","identity","prekey","senderKeySessions","session"],"readwrite",function(a){var d=a.stores,l=d.session,n=d.identity,r=d.senderKeySessions;d=d.prekey;return(h||(h=b("Promise"))).all([l.bulkDelete(m),n.bulkDelete(f),l.bulkPut(p),r.bulkPut(q),k(a.stores,g),i(a.stores,e,g,c,o),d.bulkDelete(j.map(function(a){a=a.id;return a}))])},d("WASignalDB").signalOp("bulkSaveSignalData"))});return function(b){return a.apply(this,arguments)}}();function i(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=new Set();for(c of c)g.add(d("WAJids").extractUserJid(c.id));c=Array.from(g);for(var h of b)g.add(h.id);h=(yield a.contacts.bulkGet(Array.from(g)));g=new Map();for(h of h){if(h==null)continue;g.set(h.contactJid,h)}for(h of c){c=g.get(h);c==null?(c={contactJid:h,dhash:null},g.set(h,c)):c.dhash=null}for(c of b){h=g.get(c.id);h==null?(h={contactJid:c.id,dhash:null,icdcInfo:c.icdc},g.set(c.id,h)):h.icdcInfo=c.icdc}for(b of e){h=g.get(b.id);h==null?(h={contactJid:b.id,dhash:b.dhash},g.set(b.id,h)):h.dhash=b.dhash}for(c of f){e=g.get(c.id);e==null?(e={contactJid:c.id,dhash:null,lastSyncTs:c.lastSyncTs},g.set(c.id,e)):e.lastSyncTs=c.lastSyncTs}return a.contacts.bulkPut(Array.from(g.values()))});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.length===0)return;b=b.map(function(a){var b=a.id;a=a.identity;return{deviceJid:b,identity:a,userJid:d("WAJids").extractUserJid(b)}});yield a.identity.bulkPut(b)});return l.apply(this,arguments)}g.bulkSaveSignalData=a}),98);
__d("WAIdentityUtils",["WABinary","WACryptoDependencies","WASignalOther"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.length===33&&a[0]===5;return b?a.slice(1):a}function i(a,b){for(var c=0;c<a.length&&c<b.length;++c)if(a[c]!==b[c])return a[c]-b[c];return a.length-b.length}function a(a){a=a.map(function(a){return h(a)});var b=new(d("WABinary").Binary)();a.sort(i).forEach(function(a){return b.writeByteArray(a)});a=d("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",b.readByteArrayView());return a.then(function(a){a=new Uint8Array(a);return d("WASignalOther").sliceBytes(a,0,10)})}g.removeKeyTypeIfNeeded=h;g.computeIdentitiesHash=a}),98);
__d("WAICDCUtils",["WAArmadilloICDC.pb","WABase64","WABinary","WACryptoDependencies","WACryptoEd25519","WACryptoUtils","WAIdentityUtils","WALogger","WASignalKeys","WASignalOther","WASignalSignatures","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function a(a,b,c,e){if(a!==e.details.seq){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched sequence between XML node and byte structure"])));return null}if(c!==e.details.timestamp){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched timestamp between XML node and byte structure"])));return null}if(e.details.signingDeviceIndex==null){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Received ICDC has mismatched missed signingDeviceIndex"])));return null}var f=e.details.signingDeviceIndex;return{dirty:b,sequence:a,timestamp:c,signingDeviceIndex:f,devices:e.details.devices.map(function(a){return new Uint8Array(a)})}}function b(a){return a.signingDeviceIndex<0||a.signingDeviceIndex>=a.devices.length}function e(a){a=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,a);var b=a.signature;a=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloICDC.pb").ICDCIdentityListSpec,a.details);return{signature:b,details:a}}function f(a){return a.map(function(a){return d("WASignalKeys").serializeIdentity(new Uint8Array(d("WABase64").decodeB64UrlSafe(a)))})}function m(a,b,e,f,g){var h=d("WAIdentityUtils").removeKeyTypeIfNeeded(a.publicKey);e=e.map(function(a){return d("WAIdentityUtils").removeKeyTypeIfNeeded(a)});var i=e.findIndex(function(a){return d("WACryptoUtils").uint8ArraysEqual(a,h)});if(i===-1){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["signingDeviceIndex not found. This should never happen. ",". caller: ",""])),f,g);throw c("err")("signingDeviceIndex not found")}f=b==null?1:b+1;g=d("WATimeUtils").unixTime();g<0&&d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["ICDC timestamp is negative. time: ",", closkSkew: ",""])),Date.now(),d("WATimeUtils").getClockSkew());b={seq:f,timestamp:g,devices:e,signingDeviceIndex:i};f=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloICDC.pb").ICDCIdentityListSpec,b).readBuffer();g=n(a,d("WABinary").Binary.build(f).readByteArrayView());e={details:f,signature:g};i=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloICDC.pb").SignedICDCIdentityListSpec,e).readBuffer();return{icdcInfo:b,encodedSignedICDC:i}}function n(a,b){var c=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(c);var e=new Uint8Array(64);d("WACryptoEd25519").hashSha512(e,b,b.length);e=d("WASignalSignatures").makeSignature(a,b,c);return d("WABinary").Binary.build(e).readBuffer()}var o=4*d("WATimeUtils").HOUR_SECONDS;function p(a){return a==null?!0:!d("WATimeUtils").happenedWithin(a,o)}g.validateAndPrepareICDCFromNotification=a;g.isICDCIndexInvalid=b;g.decodeICDCInfo=e;g.base64DeviceIdentitiesToSerializedPubKeys=f;g.computeICDCInfoForUpload=m;g.isLastSyncTsExpired=p}),98);
__d("WAComputeAndUploadICDCInfo",["WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WAGetDevices","WAGlobals","WAICDCUtils","WAIdentityUtils","WALogger","WAPromiseBackoffs","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=new(c("WADeprecatedWapParser"))("parseUploadICDCInfoResponse",function(a){a.assertTag("iq"),a.assertFromServer(),a.assertAttr("type","result")}),m=0;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=c.reason;var e=c.caller;c=c.sequence;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["computeAndUploadICDCInfo called ",""])),c);var f;try{f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.cryptoManager;var b=(yield a.storage.loadIdentities(d("WAGlobals").getMyUserJid()));a=a.regInfo;return{regInfo:a,identities:Array.from(b.values())}});return function(b){return a.apply(this,arguments)}}(),{operationType:"icdc_load_identities",flush:!1,afterInit:!0}))}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Loading identities fails with error: ",""])),a.toString())}if(f==null)return;var g=f,n=g.regInfo;g=g.identities;n=d("WAICDCUtils").computeICDCInfoForUpload(n.staticKeyPair,c,g,a,e);var o=n.icdcInfo;c=n.encodedSignedICDC;a=(yield d("WAIdentityUtils").computeIdentitiesHash(g));e=d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"fbid:devices"},d("WAWap").wap("icdc",{ihash:d("WAWap").CUSTOM_STRING(d("WABase64").encodeB64(a)),seq:d("WAWap").INT(o.seq),ts:d("WAWap").INT(o.timestamp)},c));n=(yield d("WADeprecatedSendIq").deprecatedSendIq(e,l));n.success?(m=0,yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.saveICDC(d("WAGlobals").getMyUserJid(),{sequence:o.seq,timestamp:o.timestamp,devices:o.devices,signingDeviceIndex:o.signingDeviceIndex,dirty:!1})},{operationType:"save_icdc",flush:!0,afterInit:!0})):(m+=1,n.errorCode===406||n.errorCode===500?setTimeout(function(){d("WAGetDevices").getDevices(null,{ignoreDhash:!0,reason:"compute-Upload-icdc",users:new Set().add(d("WAGlobals").getMyUserJid())})["catch"](function(a){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed getting devices ",""])),a.toString())})},d("WAPromiseBackoffs").getDelay(m,{jitter:.1,max:3e4,algo:{type:"fibonacci",first:1e3,second:1e3}})):d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Cannot update ICDC for user, because of "," server response"])),n.errorCode))});return function(b,c){return a.apply(this,arguments)}}();g.computeAndUploadICDCInfo=a}),98);
__d("WAPushSafeTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.unsafeNotNullable=a}),66);
__d("WAGetDevices",["WADevicesState","WALogger","WAPushSafeTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAPushSafeTypes").unsafeNotNullable(b);b=a.users;var c=a.reason;a=a.ignoreDhash;a=a===void 0?!1:a;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["fetchAndSaveDevices: ",""])),c);a&&d("WADevicesState").getDevicesState().reset(Array.from(b));yield d("WADevicesState").getDevicesState().waitForUserDevices(Array.from(b),"getDevices job: "+c,a)});return i.apply(this,arguments)}g.getDevices=a}),98);
__d("WAFetchAndSaveDevices",["Promise","WAComputeAndUploadICDCInfo","WAGlobals","WAICDCUtils","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var c=[];yield d("WAGlobals").getWaOneQueue().enqueue(function(e){var f=e.cryptoManager;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Update user devices signal and DB"])));return(j||(j=b("Promise"))).all(a.map(function(a){var b;c.push({contactJid:a.jid,dhash:a.dhash,lastSyncTs:a.lastSyncTs,icdcInfo:(b=a.icdcInfo)!=null?b:void 0});return f.storage.updateUserDevicesInfo([a])}))},{operationType:"get_devices",flush:!0,afterInit:!0});var e=d("WAGlobals").getMyUserJid(),f=a.find(function(a){return a.jid===e});if(f!=null){f=f.icdcInfo;if(f==null||d("WAICDCUtils").isICDCIndexInvalid(f)||f!=null&&f.dirty){var g;f==null?g="empty":f.dirty?g="dirty":g="invalidIndex";d("WAComputeAndUploadICDCInfo").computeAndUploadICDCInfo(null,{reason:g,caller:"get_devices",sequence:f==null?void 0:f.sequence})["catch"](function(a){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["computeAndSaveICDC: ",""])),a)})}}});return k.apply(this,arguments)}g.updateUsersDevicesSignalAndDB=a}),98);
__d("WAHandleFbDeviceChangeNotificationProtocol",["WAICDCUtils","WAResultOrError","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.dhash}function b(a){var b;b=((b=a.iCDCDirtyMixin)==null?void 0:b.dirty)==="true";var c=d("WATimeUtils").castToUnixTime(a.ts),e=a.seq;a=d("WAICDCUtils").decodeICDCInfo(a.elementValue);e=d("WAICDCUtils").validateAndPrepareICDCFromNotification(e,b,c,a);return e==null?d("WAResultOrError").makeError("icdc-validation-failure"):d("WAResultOrError").makeResult(e)}g.parseDhash=a;g.parseICDCFromServer=b}),98);
__d("WALoadContactsApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(b){return b.stores.contacts.bulkGet(a).then(function(a){return new Map(a.filter(Boolean).map(function(a){return[a.contactJid,{contactJid:a.contactJid,dhash:a.dhash,icdcFails:a.icdcFails,icdcInfo:a.icdcInfo,lastSyncTs:a.lastSyncTs}]}))})},d("WASignalDB").signalOp("loadContacts"))};g.loadContacts=a}),98);
__d("WARPCAbortController",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h="rpc-timeout";function a(a,c){var d,e=new(g||(g=b("Promise")))(function(a,b){d=setTimeout(function(){b(h)},c)});return g.race([a,e])["finally"](function(){clearTimeout(d)})}f.RPC_TIMEOUT=h;f.rpcAbortController=a}),66);
__d("WASmaxInDevicesIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInDevicesIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInDevicesNonRetryableIQErrorMixin",["WASmaxInDevicesIQErrorBadRequestMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxInDevicesIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);return!b.success?b:b}g.parseNonRetryableIQErrorMixin=a}),98);
__d("WASmaxInDevicesIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInDevicesIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorMixin","WASmaxInDevicesIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInDevicesIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorServiceUnavailable"],[b,c])}g.parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup=a}),98);
__d("WASmaxInDevicesRetryableIQErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"backoff",0,86400);if(!b.success)return b;a=d("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({backoff:b.value,iQErrorInternalServerErrorOrServiceUnavailableMixinGroup:a.value})}g.parseRetryableIQErrorMixin=a}),98);
__d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup",["WAResultOrError","WASmaxInDevicesNonRetryableIQErrorMixin","WASmaxInDevicesRetryableIQErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesRetryableIQErrorMixin").parseRetryableIQErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"RetryableIQError",value:b.value});var c=d("WASmaxInDevicesNonRetryableIQErrorMixin").parseNonRetryableIQErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NonRetryableIQError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RetryableIQError","NonRetryableIQError"],[b,c])}g.parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup=a}),98);
__d("WASmaxInDevicesFetchResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:b.value}))}g.parseFetchResponseError=a}),98);
__d("WASmaxInDevicesIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInDevicesFetchNonRetryableUserErrorMixin",["WASmaxInDevicesIQErrorItemNotFoundMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxInDevicesIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);return!b.success?b:b}g.parseFetchNonRetryableUserErrorMixin=a}),98);
__d("WASmaxInDevicesFetchRetryableUserErrorMixin",["WAResultOrError","WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxInDevicesIQErrorInternalServerErrorOrServiceUnavailableMixinGroup").parseIQErrorInternalServerErrorOrServiceUnavailableMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({iQErrorInternalServerErrorOrServiceUnavailableMixinGroup:b.value})}g.parseFetchRetryableUserErrorMixin=a}),98);
__d("WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup",["WAResultOrError","WASmaxInDevicesFetchNonRetryableUserErrorMixin","WASmaxInDevicesFetchRetryableUserErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesFetchRetryableUserErrorMixin").parseFetchRetryableUserErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FetchRetryableUserError",value:b.value});var c=d("WASmaxInDevicesFetchNonRetryableUserErrorMixin").parseFetchNonRetryableUserErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"FetchNonRetryableUserError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["RetryableUserError","NonRetryableUserError"],[b,c])}g.parseFetchOrFetchNonRetryableUserErrorMixinGroup=a}),98);
__d("WASmaxInDevicesFetchUserResponseFailureMixin",["WAResultOrError","WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!b.success)return b;a=d("WASmaxParseJid").attrUserJid(a,"jid");if(!a.success)return a;b=d("WASmaxInDevicesFetchOrFetchNonRetryableUserErrorMixinGroup").parseFetchOrFetchNonRetryableUserErrorMixinGroup(b.value);return!b.success?b:d("WAResultOrError").makeResult({jid:a.value,errorFetchOrFetchNonRetryableUserErrorMixinGroup:b.value})}g.parseFetchUserResponseFailureMixin=a}),98);
__d("WASmaxInDevicesDeviceModelInfoMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"platform");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"model");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").optionalChildWithTag(a,"platform",h);if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(a,"model",i);return!a.success?a:d("WAResultOrError").makeResult({platform:b.value,model:a.value})}g.parseDeviceModelInfoPlatform=h;g.parseDeviceModelInfoModel=i;g.parseDeviceModelInfoMixin=a}),98);
__d("WASmaxInDevicesDhashMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"dhash");return!a.success?a:d("WAResultOrError").makeResult({dhash:a.value})}g.parseDhashMixin=a}),98);
__d("WASmaxInDevicesKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!a.success?a:d("WAResultOrError").makeResult({elementValue:a.value})}g.parseKeyDataMixin=a}),98);
__d("WASmaxInDevicesIdentityKeyMixin",["WASmaxInDevicesKeyDataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"identity");if(!a.success)return a;a=d("WASmaxInDevicesKeyDataMixin").parseKeyDataMixin(a.value);return!a.success?a:a}g.parseIdentityKeyMixin=a}),98);
__d("WASmaxInDevicesDeviceListMixin",["WAResultOrError","WASmaxInDevicesDeviceModelInfoMixin","WASmaxInDevicesDhashMixin","WASmaxInDevicesIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"device");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"id",1,999);if(!b.success)return b;var c=d("WASmaxInDevicesIdentityKeyMixin").parseIdentityKeyMixin(a);if(!c.success)return c;a=d("WASmaxInDevicesDeviceModelInfoMixin").parseDeviceModelInfoMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({id:b.value},c.value,{deviceModelInfoMixin:a.success?a.value:null}))}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"devices");if(!b.success)return b;b=d("WASmaxInDevicesDhashMixin").parseDhashMixin(a);a=d("WASmaxParseUtils").mapChildrenWithTag(a,"device",0,25,h);return!a.success?a:d("WAResultOrError").makeResult({dhashMixin:b.success?b.value:null,device:a.value})}g.parseDeviceListDevice=h;g.parseDeviceListMixin=a}),98);
__d("WASmaxInDevicesICDCDirtyMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"icdc");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"dirty","true");return!b.success?b:d("WAResultOrError").makeResult({dirty:b.value})}g.parseICDCDirtyMixin=a}),98);
__d("WASmaxInDevicesICDCSeqMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrIntRange(a,"seq",0,2147483647);return!a.success?a:d("WAResultOrError").makeResult({seq:a.value})}g.parseICDCSeqMixin=a}),98);
__d("WASmaxInDevicesICDCSignedListMixin",["WAResultOrError","WASmaxInDevicesICDCSeqMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"icdc");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"ts",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").contentBytesRange(a,1,40072);if(!c.success)return c;a=d("WASmaxInDevicesICDCSeqMixin").parseICDCSeqMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({ts:b.value,elementValue:c.value},a.value))}g.parseICDCSignedListMixin=a}),98);
__d("WASmaxInDevicesICDCFromServerMixin",["WAResultOrError","WASmaxInDevicesICDCDirtyMixin","WASmaxInDevicesICDCSignedListMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"icdc");if(!b.success)return b;b=d("WASmaxInDevicesICDCSignedListMixin").parseICDCSignedListMixin(a);if(!b.success)return b;a=d("WASmaxInDevicesICDCDirtyMixin").parseICDCDirtyMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{iCDCDirtyMixin:a.success?a.value:null}))}g.parseICDCFromServerMixin=a}),98);
__d("WASmaxInDevicesFetchUserResponseSuccessMixin",["WAResultOrError","WASmaxInDevicesDeviceListMixin","WASmaxInDevicesICDCFromServerMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"devices");if(!b.success)return b;b=d("WASmaxInDevicesDeviceListMixin").parseDeviceListMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"icdc");if(!b.success)return b;b=d("WASmaxInDevicesICDCFromServerMixin").parseICDCFromServerMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"devices",h);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"icdc",i);if(!c.success)return c;a=d("WASmaxParseJid").attrUserJid(a,"jid");return!a.success?a:d("WAResultOrError").makeResult({jid:a.value,devices:b.value,icdc:c.value})}g.parseFetchUserResponseSuccessDevices=h;g.parseFetchUserResponseSuccessIcdc=i;g.parseFetchUserResponseSuccessMixin=a}),98);
__d("WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup",["WAResultOrError","WASmaxInDevicesFetchUserResponseFailureMixin","WASmaxInDevicesFetchUserResponseSuccessMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInDevicesFetchUserResponseFailureMixin").parseFetchUserResponseFailureMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FetchUserResponseFailure",value:b.value});var c=d("WASmaxInDevicesFetchUserResponseSuccessMixin").parseFetchUserResponseSuccessMixin(a);return c.success?d("WAResultOrError").makeResult({name:"FetchUserResponseSuccess",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["UserResponseFailure","UserResponseSuccess"],[b,c])}g.parseUserResponseFetchFailureOrFetchSuccessMixinGroup=a}),98);
__d("WASmaxInDevicesFetchUserResponseMixin",["WAResultOrError","WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxInDevicesUserResponseFetchFailureOrFetchSuccessMixinGroup").parseUserResponseFetchFailureOrFetchSuccessMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({userResponseFetchFailureOrFetchSuccessMixinGroup:b.value})}g.parseFetchUserResponseMixin=a}),98);
__d("WASmaxInDevicesIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInDevicesFetchResponseSuccess",["WAResultOrError","WASmaxInDevicesFetchUserResponseMixin","WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"user");if(!b.success)return b;b=d("WASmaxInDevicesFetchUserResponseMixin").parseFetchUserResponseMixin(a);return!b.success?b:b}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"users");if(!c.success)return c;a=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"user",0,25,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{usersUser:b.value}))}g.parseFetchResponseSuccessUsersUser=h;g.parseFetchResponseSuccess=a}),98);
__d("WASmaxOutDevicesBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutDevicesDhashMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyDhash;a=d("WASmaxJsx").smax("smax$any",{dhash:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeDhashMixin=a}),98);
__d("WASmaxOutDevicesICDCSeqMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anySeq;a=d("WASmaxJsx").smax("smax$any",{seq:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeICDCSeqMixin=a}),98);
__d("WASmaxOutDevicesFetchRequest",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutDevicesBaseIQGetRequestMixin","WASmaxOutDevicesDhashMixin","WASmaxOutDevicesICDCSeqMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.userJid,c=a.dhashMixinArgs;a=a.iCDCSeqMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutDevicesICDCSeqMixin").mergeICDCSeqMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutDevicesDhashMixin").mergeDhashMixin,d("WASmaxJsx").smax("user",{jid:d("WAWap").USER_JID(b)}),c),a);return b}function a(a){a=a.userArgs;a=d("WASmaxOutDevicesBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxJsx").smax("users",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,25))));return a}g.makeFetchRequestUsersUser=h;g.makeFetchRequest=a}),98);
__d("WASmaxDevicesFetchRPC",["WAComms","WASmaxInDevicesFetchResponseError","WASmaxInDevicesFetchResponseSuccess","WASmaxOutDevicesFetchRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutDevicesFetchRequest").makeFetchRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInDevicesFetchResponseSuccess").parseFetchResponseSuccess(b,a);if(c.success)return{name:"FetchResponseSuccess",value:c.value};b=d("WASmaxInDevicesFetchResponseError").parseFetchResponseError(b,a);if(b.success)return{name:"FetchResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Fetch",{Success:c,Error:b}))});return h.apply(this,arguments)}g.sendFetchRPC=a}),98);
__d("WAFetchFbDevicesProtocolV2",["Promise","WAArrayChunk","WAHandleFbDeviceChangeNotificationProtocol","WAJids","WALoadContactsApi","WARPCAbortController","WASignalKeys","WASmaxDevicesFetchRPC","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=25,l=1e4,m=d("WATagsLogger").TAGS(["wa-devices-protocol"]);function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(a.length===0)return new Map();var e=(yield o(a,c));c=d("WAArrayChunk").chunk(a.map(function(a){var b=e.get(a);b=b!=null?{anyDhash:b}:null;return{userJid:a,dhashMixinArgs:b}}),k);var f=new Map();yield (j||(j=b("Promise"))).allSettled(c.map(function(a){return q(f,a)}));return f});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b)return new Map();b=(yield d("WALoadContactsApi").loadContacts(a));var c=new Map();b.forEach(function(a){a&&a.dhash!=null&&c.set(a.contactJid,a.dhash)});return c});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var e=new Set(b.map(function(a){return a.userJid}));b=(yield d("WARPCAbortController").rpcAbortController(d("WASmaxDevicesFetchRPC").sendFetchRPC({userArgs:b}),l));if(b.name==="FetchResponseError")throw c("err")("Failed to fetch user devices");b.value.usersUser.map(function(b){b=b.userResponseFetchFailureOrFetchSuccessMixinGroup;if(b.name==="FetchUserResponseFailure")return;b=b.value;var c=b.jid,f=b.devices;b=b.icdc;e["delete"](c);a.set(c,{newState:s(c,f,b,d("WATimeUtils").unixTime()),stateIsUpToDate:!1})});e.forEach(function(b){a.set(b,{stateIsUpToDate:!0})})}catch(a){if(a===d("WARPCAbortController").RPC_TIMEOUT){m.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Timeout for fetchAndSaveDevices"])));return}m.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["",""])),a)}});return r.apply(this,arguments)}function s(a,b,c,e){e===void 0&&(e=null);var f=[],g=null;if(b){f=b.device.map(function(a){var b;return{id:d("WAJids").interpretAsDeviceId(a.id),identity:d("WASignalKeys").serializeIdentity(a.elementValue),platform:(b=a.deviceModelInfoMixin)==null||(b=b.platform)==null?void 0:b.elementValue,model:(b=a.deviceModelInfoMixin)==null||(b=b.model)==null?void 0:b.elementValue}});g=(b=b.dhashMixin)==null?void 0:b.dhash}b=null;if(c){c=d("WAHandleFbDeviceChangeNotificationProtocol").parseICDCFromServer(c);b=c.success?c.value:null}return{jid:a,devices:f,lastSyncTs:d("WATimeUtils").unixTime(),dhash:g,icdcInfo:b,notificationTs:e}}g.fetchFbDevicesProtocol=a}),98);
__d("WADevicesState",["Promise","WAFetchAndSaveDevices","WAFetchFbDevicesProtocolV2","WAPREList","WAPREMetrics","WAResolvable","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=3e4,n=1e3*60*60,o=d("WATagsLogger").TAGS(["WADevicesState"]);c=function(){function a(){this.$1=new Map()}var c=a.prototype;c.$2=function(a){var b=this;setTimeout(function(){a.forEach(function(a){var c=a[0];a=a[1];a.resolveWasCalled()||(a.resolve(d("WAResultOrError").makeError()),b.$1.get(c)===a&&b.$1["delete"](c))})},m);setTimeout(function(){a.forEach(function(a){var c=a[0];a=a[1];b.$1.get(c)===a&&b.$1["delete"](c)})},n)};c.waitForUserDevices=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=this;e===void 0&&(e=!1);var g=[],m=[];e===!0&&a.forEach(function(a){f.$1["delete"](a)});a.forEach(function(a){var b=f.$1.get(a);if(b==null){var c=new(d("WAResolvable").Resolvable)();g.push([a,c]);f.$1.set(a,c)}else m.push([a,b.promise])});this.$2(g);o.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["getDevices called for users ",", reason: ",""])),Array.from(a),c);var n=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.GET_DEVICES,{string:{reason:c}});n.addPoint("fetch_start");var p=(yield d("WAFetchFbDevicesProtocolV2").fetchFbDevicesProtocol(g.map(function(a){a=a[0];return a}),e)["catch"](function(a){n.addPoint("fetch_fail");o.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["fetchFBDevicesProtocol failed: ",""])),a);return new Map()}));n.addPoint("fetch_end");var q=!0;o.DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["getDevices -> update devices signal"])));n.addPoint("signal_update_start");yield d("WAFetchAndSaveDevices").updateUsersDevicesSignalAndDB(Array.from(p.values()).map(function(a){return a.newState}).filter(Boolean))["catch"](function(a){q=!1,o.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["updateDevicesSignalAndDB failed: ",""])),a)});n.addPoint("signal_update_end");g.forEach(function(a){var b=a[0];a=a[1];if(!q){a.resolve(d("WAResultOrError").makeError());f.$1["delete"](b);return}p.has(b)?a.resolve(d("WAResultOrError").makeResult()):(a.resolve(d("WAResultOrError").makeError()),f.$1["delete"](b))});n.endSuccess();yield (l||(l=b("Promise"))).allSettled(m.map(function(a){a[0];a=a[1];return a}))});function c(b,c,d){return a.apply(this,arguments)}return c}();c.reset=function(a){var b=this;a.forEach(function(a){return b.$1["delete"](a)})};return a}();var p=new c();function a(){return p}g.DeviceStateClassV2=c;g.getDevicesState=a}),98);
__d("WAComputeICDC",["Promise","WAGetDevices","WAICDCUtils","WAIdentityUtils","WAJids","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("WATagsLogger").TAGS(["WAComputeICDC"]);function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=new Set(),n=[].concat(a);a=a.find(function(a){return a.user===c});if(a==null){a=(yield f.cryptoManager.storage.loadIdentities(c));a=a.get(e);if(a==null){m.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Sender does not have identity"])));return}n.push({user:c,devicesInfo:[{identity:a,jid:e}]})}a=void 0;var o=[],p=[];yield (l||(l=b("Promise"))).all(n.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var h=(yield (l||(l=b("Promise"))).all([f.cryptoManager.storage.loadICDC(e.user),f.cryptoManager.storage.loadLastSyncTs(e.user)])),j=h[0];h=h[1];d("WAICDCUtils").isLastSyncTsExpired(h)&&g.add(e.user);h=new Set();if(j==null)g.add(e.user);else if(d("WAICDCUtils").isICDCIndexInvalid(j))g.add(e.user),m.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["ICDC has invalid index"]))),j=null;else for(var k of j.devices)h.add(k.toString());k=[];var n=[];for(var q of e.devicesInfo){var r=d("WAJids").extractDeviceId(q.jid),s=d("WAIdentityUtils").removeKeyTypeIfNeeded(q.identity);h.has(s.toString())||(k.push(r),n.push(s.buffer))}r={unknownDevices:n,unknownDeviceIds:k};j!=null&&(r.seq=j.sequence,r.signingDevice=j.devices[j.signingDeviceIndex].buffer);e.user===c?a=r:(o.push(r),p.push(e.user))});return function(a){return e.apply(this,arguments)}}()));g.size>0&&(m.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Triggering getDevices for users with missing or incorrect icdc info."]))),d("WAGetDevices").getDevices(null,{ignoreDhash:!0,reason:"missing-icdc-info",users:g})["catch"](function(a){m.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Error during get devices for users with missing icdc info: ",""])),a)}));return{senderIdentity:a,recipientIdentities:o,recipientUserJids:p}});return n.apply(this,arguments)}g.computeICDC=a}),98);
__d("WAMultiDevice.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={};a.name="MultiDevice";a.internalSpec={payload:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,c],metadata:[2,d.TYPES.MESSAGE,b]};b.name="MultiDevice$Metadata";b.internalSpec={};c.name="MultiDevice$Payload";c.internalSpec={applicationData:[1,d.TYPES.MESSAGE,e],signal:[2,d.TYPES.MESSAGE,m],__oneofs__:{payload:["applicationData","signal"]}};e.name="MultiDevice$ApplicationData";e.internalSpec={appStateSyncKeyShare:[1,d.TYPES.MESSAGE,h],appStateSyncKeyRequest:[2,d.TYPES.MESSAGE,f],__oneofs__:{applicationData:["appStateSyncKeyShare","appStateSyncKeyRequest"]}};f.name="MultiDevice$ApplicationData$AppStateSyncKeyRequestMessage";f.internalSpec={keyIds:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,l]};h.name="MultiDevice$ApplicationData$AppStateSyncKeyShareMessage";h.internalSpec={keys:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i]};i.name="MultiDevice$ApplicationData$AppStateSyncKey";i.internalSpec={keyId:[1,d.TYPES.MESSAGE,l],keyData:[2,d.TYPES.MESSAGE,j]};j.name="MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData";j.internalSpec={keyData:[1,d.TYPES.BYTES],fingerprint:[2,d.TYPES.MESSAGE,k],timestamp:[3,d.TYPES.INT64]};k.name="MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData$AppStateSyncKeyFingerprint";k.internalSpec={rawId:[1,d.TYPES.UINT32],currentIndex:[2,d.TYPES.UINT32],deviceIndexes:[3,d.FLAGS.REPEATED|d.FLAGS.PACKED|d.TYPES.UINT32]};l.name="MultiDevice$ApplicationData$AppStateSyncKeyId";l.internalSpec={keyId:[1,d.TYPES.BYTES]};m.name="MultiDevice$Signal";m.internalSpec={};g.MultiDeviceSpec=a;g.MultiDevice$MetadataSpec=b;g.MultiDevice$PayloadSpec=c;g.MultiDevice$ApplicationDataSpec=e;g.MultiDevice$ApplicationData$AppStateSyncKeyRequestMessageSpec=f;g.MultiDevice$ApplicationData$AppStateSyncKeyShareMessageSpec=h;g.MultiDevice$ApplicationData$AppStateSyncKeySpec=i;g.MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyDataSpec=j;g.MultiDevice$ApplicationData$AppStateSyncKey$AppStateSyncKeyData$AppStateSyncKeyFingerprintSpec=k;g.MultiDevice$ApplicationData$AppStateSyncKeyIdSpec=l;g.MultiDevice$SignalSpec=m}),98);
__d("WAParseAppStateSyncKeyRequest",["WASyncdKeyTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];for(a of a.keyIds)a.keyId!=null&&b.push(d("WASyncdKeyTypes").toSyncKeyId(a.keyId));return{keyIds:b}}g.parseAppStateSyncKeyRequest=a}),98);
__d("WASyncdKeyManagementUtils",["WASyncdKeyTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new DataView(d("WASyncdKeyTypes").fromSyncKeyId(a)).getUint16(0)}function h(a){return new DataView(d("WASyncdKeyTypes").fromSyncKeyId(a)).getUint32(2)}function b(a){return h(a)+1}g.getKeyDeviceId=a;g.getKeyEpoch=h;g.generateNewKeyEpoch=b}),98);
__d("WAParseAppStateSyncKeyShare",["WALogger","WALongInt","WASyncdKeyManagementUtils","WASyncdKeyTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=[],c=[];for(a of a.keys){var d=i(a);d!=null&&(d.type==="orphan"?c.push(d.keyId):(d.type,b.push(d.keyData)))}return{keys:b,orphanKeys:c}}function i(a){var b,c,e,f,g,i;if(((b=a.keyId)==null?void 0:b.keyId)==null){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Key missing keyId"])));return null}b=d("WASyncdKeyTypes").toSyncKeyId(a.keyId.keyId);c=(c=a.keyData)==null?void 0:c.keyData;e=d("WALongInt").maybeNumberOrThrowIfTooLarge((e=a.keyData)==null?void 0:e.timestamp);f=(f=a.keyData)==null||(f=f.fingerprint)==null?void 0:f.currentIndex;g=(g=a.keyData)==null||(g=g.fingerprint)==null?void 0:g.deviceIndexes;i=(i=a.keyData)==null||(i=i.fingerprint)==null?void 0:i.rawId;return a.keyData==null||c==null||e==null||f==null||g==null||i==null?{keyId:b,type:"orphan"}:{keyData:{fingerprint:{currentIndex:f,deviceIndexes:g,rawId:i},keyData:d("WASyncdKeyTypes").toSyncKeyData(c),keyEpoch:d("WASyncdKeyManagementUtils").getKeyEpoch(b),keyId:b,timestamp:e},type:"key"}}g.parseAppStateSyncKeyShare=a}),98);
__d("WAConvertAppData",["WAAppData","WAArmadilloApplication.pb","WAJids","WALogger","WAMultiDevice.pb","WAParseAppStateSyncKeyRequest","WAParseAppStateSyncKeyShare","WAStanzaUtils","WASyncdKeyTypes","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u;function v(a){a=d("WAJids").interpretAndValidateJid(a);if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else{a.jidType;throw c("err")("Incorrect jid type: "+a.jidType)}}function w(a){a=d("WAJids").interpretAndValidateJid(a);if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="msgrDevice")return d("WAJids").extractUserJid(a.deviceJid);else{a.jidType;throw c("err")("Incorrect jid type: "+a.jidType)}}function x(a){return a!=null?typeof a==="number"&&a>d("WATimeUtils").MAX_INT?d("WATimeUtils").castMilliSecondsToUnixTime(a):d("WATimeUtils").castLongIntToUnixTime(a):void 0}function y(a){return a==null?void 0:{lastMessageTimestamp:x(a.lastMessageTimestamp),lastSystemMessageTimestamp:x(a.lastSystemMessageTimestamp),messages:a.messages==null?[]:a.messages.map(function(a){return{key:a.key==null?void 0:{fromMe:a.key.fromMe,id:a.key.id},ts:x(a.timestamp)}})}}function z(a,b){var c=a.chatId;if(c==null){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing chatId in chat action: ",""])),a);return null}if(a.chatArchive!=null){var e=a.chatArchive;e=y(e.messageRange);return{chatJid:v(c),messageRange:e,ts:b,type:"chat_archive"}}else if(a.chatDelete!=null){e=a.chatDelete;e=y(e.messageRange);return{chatJid:v(c),messageRange:e,ts:b,type:"chat_delete"}}else if(a.chatRead!=null){e=a.chatRead;var f=y(e.messageRange);return{chatJid:v(c),messageRange:f,read:e.read,ts:b,type:"chat_read"}}else{d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),a);return null}}function A(a){var b=a.key,c=b==null?void 0:b.remoteJid,e=b==null?void 0:b.id,f=b==null?void 0:b.fromMe;if(b==null||c==null||f==null||e==null){d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Missing messageKey in message action: ",""])),a);return null}var g=v(c),h=d("WAJids").interpretAsGroupJid(g)!=null;if(h&&!f){if((b==null?void 0:b.participant)==null){d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["No participant in messageKey in message action when it is group chat and message is not fromMe: ",""])),a);return null}h=w(b.participant)}else f?h=d("WAJids").AUTHOR_ME:h=w(c);b={author:h,chat:g,externalId:d("WAStanzaUtils").toStanzaId(e)};if(a.messageDelete!=null)return{protocolMsgId:b,type:"delete_for_me"};else{d("WALogger").WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),a);return null}}function B(a){var b=[];for(a of a){var c=x(a.actionTimestamp);if(a.chatAction!=null){c=z(a.chatAction,c);c!=null&&b.push({chatAction:c})}else if(a.messageAction!=null){c=A(a.messageAction);c!=null&&b.push({messageAction:c})}else d("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata sync action type: ",""])),a)}return b}function C(a){var b=a.anonId,c=a.id,e=a.rootKey;a=a.status;if(a==null||c==null||b==null||e==null){d("WALogger").WARN(n||(n=babelHelpers.taggedTemplateLiteralLoose(["missing keys in EncryptedBackupsSecretsEpoch"])));return null}var f;if(a===d("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_OPEN)f=d("WAAppData").EPOCH_STATUS_OPEN;else if(a===d("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_CLOSE)f=d("WAAppData").EPOCH_STATUS_CLOSE;else{d("WALogger").WARN(o||(o=babelHelpers.taggedTemplateLiteralLoose(["status in EncryptedBackupsSecretsEpoch has invalid value"])));return null}return{anonId:b,id:c,rootKey:e,status:f}}function D(a){var b=a.backupId,c=a.epoch,e=a.mailboxRootKey,f=a.obliviousValidationToken,g=a.serverDataId;a=a.tempOcmfClientState;if(b==null||g==null||a==null||e==null||f==null){d("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["missing keys in EncryptedBackupsSecrets"])));return null}return{backupId:b,epoch:c.map(C).reduce(function(a,b){if(b!=null)return a.concat([b]);else return a},[]),mailboxRootKey:e,obliviousValidationToken:f,serverDataId:g,tempOcmfClientState:a}}function E(a){var b;if(((b=a.applicationData)==null||(b=b.metadataSync)==null?void 0:b.actions)!=null){return{actions:B((b=a.applicationData)==null||(b=b.metadataSync)==null?void 0:b.actions),type:"meta_sync"}}else if(((b=a.signal)==null?void 0:b.encryptedBackupsSecrets)!=null){b=D(a.signal.encryptedBackupsSecrets);return b==null?null:{encryptedBackupsSecrets:b,type:"backups_secrets"}}else{d("WALogger").WARN(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),a);return null}}function F(a){var b;if(((b=a.applicationData)==null?void 0:b.appStateSyncKeyShare)!=null){return{syncKeyShare:d("WAParseAppStateSyncKeyShare").parseAppStateSyncKeyShare((b=a.applicationData)==null?void 0:b.appStateSyncKeyShare),type:"sync_key_share"}}else if(((b=a.applicationData)==null?void 0:b.appStateSyncKeyRequest)!=null){return{syncKeyRequest:d("WAParseAppStateSyncKeyRequest").parseAppStateSyncKeyRequest((b=a.applicationData)==null?void 0:b.appStateSyncKeyRequest),type:"sync_key_request"}}else{d("WALogger").WARN(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),a);return null}}function a(a){if(a.subprotocolType==="armadillo"){var b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAArmadilloApplication.pb").ArmadilloSpec,a.payload);if(b.payload==null)throw c("err")("Appdata contains unparseable armadillo data.");return E(b.payload)}else if(a.subprotocolType==="multiDevice"){b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMultiDevice.pb").MultiDeviceSpec,a.payload);if(b.payload==null)throw c("err")("Appdata contains unparseable armadillo data.");return F(b.payload)}else throw c("err")("Appdata contains unexpected message application: "+a.subprotocolType)}function G(a){return a==null?void 0:{lastMessageTimestamp:a.lastMessageTimestamp,lastSystemMessageTimestamp:a.lastSystemMessageTimestamp,messages:a.messages.map(function(a){return{key:a.key==null?void 0:{fromMe:a.key.fromMe,id:a.key.id},timestamp:a.ts}})}}function H(a){switch(a.type){case"meta_sync":return{payload:{applicationData:P(a)}};case"backups_secrets":return{payload:{signal:{encryptedBackupsSecrets:N(a.encryptedBackupsSecrets)}}};default:a.type;d("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),a.type);return{}}}function I(a){return{keyId:d("WASyncdKeyTypes").fromSyncKeyId(a)}}function J(a){return{keyData:{fingerprint:{currentIndex:a.fingerprint.currentIndex,deviceIndexes:a.fingerprint.deviceIndexes,rawId:a.fingerprint.rawId},keyData:d("WASyncdKeyTypes").fromSyncKeyData(a.keyData),timestamp:a.timestamp},keyId:I(a.keyId)}}function K(a){var b=a.keys.map(J);a=a.orphanKeys==null?[]:a.orphanKeys.map(function(a){return{keyId:I(a)}});b.push.apply(b,a);return{keys:b}}function L(a){return{keyIds:a.keyIds.map(I)}}function M(a){switch(a.type){case"sync_key_share":return{payload:{applicationData:{appStateSyncKeyShare:K(a.syncKeyShare)}}};case"sync_key_request":return{payload:{applicationData:{appStateSyncKeyRequest:L(a.syncKeyRequest)}}};default:a.type;d("WALogger").WARN(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),a.type);return{}}}function b(a){var b;switch(a.type){case"meta_sync":case"backups_secrets":var c=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,H(a));b={armadillo:{payload:c.readByteArrayView(),version:1}};break;case"sync_key_share":case"sync_key_request":c=d("encodeProtobuf").encodeProtobuf(d("WAMultiDevice.pb").MultiDeviceSpec,M(a));b={multiDevice:{payload:c.readByteArrayView(),version:1}};break;default:a.type,d("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Unknown appdata type: ",""])),a.type),b={}}return{payload:{subProtocol:b}}}function N(a){return{backupId:a.backupId,epoch:a.epoch.map(O),mailboxRootKey:a.mailboxRootKey,obliviousValidationToken:a.obliviousValidationToken,serverDataId:a.serverDataId,tempOcmfClientState:a.tempOcmfClientState}}function O(a){var b;a.status===d("WAAppData").EPOCH_STATUS_OPEN?b=d("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_OPEN:a.status===d("WAAppData").EPOCH_STATUS_CLOSE&&(b=d("WAArmadilloApplication.pb").ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS.ES_CLOSE);return{anonId:a.anonId,id:a.id,rootKey:a.rootKey,status:b}}function P(a){return{metadataSync:{actions:a.actions.map(function(a){if(a.chatAction)return{actionTimestamp:a.chatAction.ts,chatAction:Q(a.chatAction)};else return{messageAction:R(a.messageAction)}})}}}function Q(a){var b=G(a.messageRange),c=a.chatJid;switch(a.type){case"chat_archive":return{chatArchive:{archived:a.archived,messageRange:b},chatId:c};case"chat_delete":return{chatDelete:{messageRange:b},chatId:c};default:a.type;return{chatId:c,chatRead:{messageRange:b,read:a.read}}}}function R(a){if(a.type==="delete_for_me"){var b=a.protocolMsgId.chat,e=d("WAJids").interpretAsGroupJid(b)!=null;return{key:{fromMe:d("WAJids").isAuthorMe(a.protocolMsgId.author),id:a.protocolMsgId.externalId,participant:!d("WAJids").isAuthorMe(a.protocolMsgId.author)&&e?a.protocolMsgId.author:void 0,remoteJid:b},messageDelete:{}}}else throw c("err")("No other available type")}function e(a){if(a.type!=="meta_sync")return[];a=a.actions.map(function(a){var b=a.chatAction;a=a.messageAction;return(a=a==null?void 0:a.protocolMsgId.chat)!=null?a:b==null?void 0:b.chatJid}).filter(Boolean);return Array.from(new Set(a))}g.parseArmadilloAppData=E;g.parseMultiDeviceAppData=F;g.parseAppData=a;g.convertArmadilloAppData=H;g.convertMultiDeviceAppData=M;g.convertAppData=b;g.getChatJidForAppData=e}),98);
__d("WADbPersonalSenderKeyStatusTxns",["WASignalDB","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["groupJid","senderKeyTs"],i=["groupJid","senderKeyTs"],j={hasSenderKey:new Set(),rotateSenderKey:!0,senderKeyId:null,senderKeyTs:d("WATimeUtils").castToUnixTime(0)};a=function(a){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(b){return b.stores.personalSenderKeyStatuses.bulkPut(a.map(function(a){return babelHelpers["extends"]({},j,{groupJid:a})}))},d("WASignalDB").signalOp("bulkPutNewPersonalSenderKeyStatus"))};c=function(a,c,e){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=(yield b.stores.personalSenderKeyStatuses.get(a));yield b.stores.personalSenderKeyStatuses.bulkPut([babelHelpers["extends"]({},d||j,{groupJid:a,rotateSenderKey:!1,senderKeyId:c,senderKeyTs:e})])});return function(a){return d.apply(this,arguments)}}(),d("WASignalDB").signalOp("markSenderKeyAsRotated"))};e=function(a){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield b.stores.personalSenderKeyStatuses.get(a));if(c!=null){c.groupJid;var d=c.senderKeyTs;c=babelHelpers.objectWithoutPropertiesLoose(c,h);return babelHelpers["extends"]({},c,{ts:d})}c=babelHelpers["extends"]({},j,{groupJid:a});yield b.stores.personalSenderKeyStatuses.bulkPut([c]);c.groupJid;d=c.senderKeyTs;b=babelHelpers.objectWithoutPropertiesLoose(c,i);return babelHelpers["extends"]({},b,{ts:d})});return function(a){return c.apply(this,arguments)}}(),"Signal - getSenderKeyStatus")};f=function(a){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield b.stores.personalSenderKeyStatuses.bulkGet(a));yield b.stores.personalSenderKeyStatuses.bulkPut(c.filter(function(a){return a!=null}).map(function(a){return babelHelpers["extends"]({},a,{rotateSenderKey:!0})}))});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("bulkSetRotateSenderKeyToTrue"))};var k=function(a){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(b){return b.stores.personalSenderKeyStatuses.bulkDelete(a)},d("WASignalDB").signalOp("deletePersonalSenderKeyStatus"))};g.bulkPutNewPersonalSenderKeyStatus=a;g.markSenderKeyAsRotated=c;g.getSenderKeyStatus=e;g.bulkSetRotateSenderKeyToTrue=f;g.deletePersonalSenderKeyStatus=k}),98);
__d("WACreateGroup",["WADbPersonalSenderKeyStatusTxns","WAGlobals","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAGlobals").getDependencies().createGroups(a),yield d("WADbPersonalSenderKeyStatusTxns").bulkPutNewPersonalSenderKeyStatus(a.map(function(a){return a.groupToCreate.jid}))});return function(b){return a.apply(this,arguments)}}();g.createGroups=a}),98);
__d("WAGetPrekeyIdsInRange",["WASignalKeys"],(function(a,b,c,d,e,f,g){"use strict";var h=16777215;function i(a){return a}function a(a,b){var c=[];a=i(a);var e=i(b);if(a<=e)for(var f=a;f<=b;f++)c.push(d("WASignalKeys").castToPreKeyId(f));else{for(b=a;b<h;b++)c.push(d("WASignalKeys").castToPreKeyId(b));for(f=1;f<=e;f++)c.push(d("WASignalKeys").castToPreKeyId(f))}return c}g.PRE_KEY_MAX_ID=h;g.getPrekeyIdsInRange=a}),98);
__d("WADeletePreKeyGenerationsApi",["Promise","WAGetPrekeyIdsInRange","WALogger","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a){return d("WASignalDB").getDb().runInTransaction(["prekey","prekeyGeneration"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield c.stores.prekeyGeneration.bulkGet(a)),f=[];for(e of e){if(e==null){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Attempting to delete non-existent prekey generation"])));continue}for(var g of d("WAGetPrekeyIdsInRange").getPrekeyIdsInRange(e.startingId,e.endingId))f.push(g)}yield (i||(i=b("Promise"))).all([c.stores.prekeyGeneration.bulkDelete(a),c.stores.prekey.bulkDelete(f)])});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("deletePreKeyGenerations"))};g.deletePreKeyGenerations=a}),98);
__d("WAGetLastPreKeyGenerationIdApi",["Promise","WADbSignal","WASignalDB","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(a){return(h||(h=b("Promise"))).all([a.stores.meta.get(d("WADbSignal").MetaKeysEnum.lastPrekeyId).then(function(a){return a==null?void 0:a.value.lastPrekeyId}),a.stores.meta.get(d("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId).then(function(a){return a==null?void 0:a.value.lastPrekeyGenerationId})])},d("WASignalDB").signalOp("getLastPreKeyGenerationId"))),e=a[0];a=a[1];if(e==null&&a!=null||e!=null&&a==null)throw c("err")("Last prekey id and Last prekey generation id should both be non-null");return e!=null&&a!=null?{lastGenerationId:a,lastPreKeyId:e}:null});return function(){return a.apply(this,arguments)}}();g.getLastPreKeyGenerationId=a}),98);
__d("WAGetPreKeyGenerationsTimestampsApi",["WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WASignalDB").getDb().runInTransaction(["prekeyGeneration"],"readonly",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.stores.prekeyGeneration.readAll());return a.map(function(a){return{id:a.generationId,timestamp:a.createdTs}})});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("getPreKeyGenerationsTimestamps"))};g.getPreKeyGenerationsTimestamps=a}),98);
__d("WALoadICDCApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(b){return b.stores.contacts.bulkGet([a]).then(function(a){a=a.filter(Boolean).length>0?a[0]:null;return(a=a==null?void 0:a.icdcInfo)!=null?a:null})},d("WASignalDB").signalOp("loadICDC"))};g.loadICDC=a}),98);
__d("WALoadIdentitiesApi",["Promise","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return d("WASignalDB").getDb().runInTransaction(["identity"],"readonly",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield b.stores.identity.readIndex("userJid",[a]));return new Map(b.filter(Boolean).map(function(a){return[a.deviceJid,a.identity]}))});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("loadIdentities"))};c=function(a){return d("WASignalDB").getDb().runInTransaction(["identity"],"readonly",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var d=(yield (h||(h=b("Promise"))).all(a.map(function(a){return c.stores.identity.readIndex("userJid",[a])}))),e=new Map();for(d of d)for(var f of d){if(f==null)continue;var g=e.get(f.userJid);g==null&&(g=new Map());g.set(f.deviceJid,f.identity);e.set(f.userJid,g)}return e});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("bulkLoadIdentities"))};g.loadIdentities=a;g.bulkLoadIdentities=c}),98);
__d("WALoadLastSyncTsApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["contacts"],"readonly",function(b){return b.stores.contacts.bulkGet([a]).then(function(a){a=a.filter(Boolean).length>0?a[0]:null;return(a=a==null?void 0:a.lastSyncTs)!=null?a:null})},d("WASignalDB").signalOp("loadLastSyncTs"))};g.loadLastSyncTs=a}),98);
__d("WADbMetaTxns",["WADbSignal","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.meta.bulkGet([d("WADbSignal").MetaKeysEnum.lastSignedPrekeyId,d("WADbSignal").MetaKeysEnum.identityKeyPair]).then(function(a){var b=a[0];a=a[1];b=b==null?void 0:b.value.lastSignedPrekeyId;a=a==null?void 0:a.value.identityKeyPair;return{identityPair:a,keyId:b}})}c=function(a){return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield b.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.cat,value:{cat:a}}]);return a});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("saveCAT"))};g.maybeGetLastSignedPrekeyIdAndIdentity=a;g.saveCAT=c}),98);
__d("WADbSignedPrekeyTxns",["WADbMetaTxns","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WADbMetaTxns").maybeGetLastSignedPrekeyIdAndIdentity(a)),c=b.identityPair;b=b.keyId;if(b==null)if(c==null)return d("WAResultOrError").makeError("missing-last-signed-prekey-id-and-registration");else return d("WAResultOrError").makeError("missing-last-signed-prekey-id");c=(yield a.signedPrekey.get(b));return c==null?d("WAResultOrError").makeError("missing-last-signed-prekey"):d("WAResultOrError").makeResult(c.encoded)});return h.apply(this,arguments)}g.getLatestSignedPreKey=a}),98);
__d("WALoadLatestSignedPreKeyApi",["WADbSignedPrekeyTxns","WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readonly",function(a){return d("WADbSignedPrekeyTxns").getLatestSignedPreKey(a.stores)},d("WASignalDB").signalOp("loadLatestSignedPreKey"))};g.loadLatestSignedPreKey=a}),98);
__d("WALoadOneTimePreKeyApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["prekey"],"readonly",function(b){return b.stores.prekey.get(a).then(function(a){return a==null?void 0:a.encoded})},d("WASignalDB").signalOp("loadOneTimePreKey"))};g.loadOneTimePreKey=a}),98);
__d("WADbPrekeyTxns",["WAGetPrekeyIdsInRange","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield a.prekeyGeneration.get(b));if(b==null)throw c("err")("Expected a prekey generation row");b=d("WAGetPrekeyIdsInRange").getPrekeyIdsInRange(b.startingId,b.endingId);a=(yield a.prekey.bulkGet(b));return a.filter(Boolean).map(function(a){return a.encoded})});return h.apply(this,arguments)}g.getPrekeysForGeneration=a}),98);
__d("WALoadPreKeysApi",["WADbPrekeyTxns","WADbSignal","WADbSignedPrekeyTxns","WALoggerTag","WASignalDB","WASignalSignatures","WATagsLogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("WATagsLogger").TAGS([c("WALoggerTag").SignedPrekey]);a=function(a){return d("WASignalDB").getDb().runInTransaction(["identity","meta","prekey","prekeyGeneration","signedPrekey"],"readonly",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(yield d("WADbSignedPrekeyTxns").getLatestSignedPreKey(b.stores));if(!e.success){var f;k.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to get latest signed prekey"])));throw(f=e.error)!=null?f:c("err")("Failed to get latest signed prekey")}var g=d("WASignalSignatures").deserializeSignedPreKey(e.value);if(g==null){k.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize signed prekey"])));throw c("err")("Failed to deserialize signed prekey")}f=a!=null?a:yield b.stores.meta.get(d("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId).then(function(a){return a==null?void 0:a.value.lastPrekeyGenerationId});if(f==null){k.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["No last prekey generation id"])));throw c("err")("No last prekey generation id")}return d("WADbPrekeyTxns").getPrekeysForGeneration(b.stores,f).then(function(a){return{preKeys:a,signedPreKey:g}})});return function(a){return e.apply(this,arguments)}}(),d("WASignalDB").signalOp("loadPreKeys"))};g.loadPreKeys=a}),98);
__d("WALoadSenderKeySessionApi",["WACryptoManager","WADbSignal","WAJids","WAResultOrError","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,c){var e=d("WAJids").extractUserJid(c);c=d("WAJids").extractDeviceId(c);var f=d("WADbSignal").buildSenderKeySessionId(a,e,c);return d("WASignalDB").getDb().runInTransaction(["senderKeySessions"],"readonly",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.stores.senderKeySessions.get(f));if(a==null)return d("WAResultOrError").makeError("errLoadSenderKeySession");a=d("WACryptoManager").decodeSenderKeySession(a.record);return d("WAResultOrError").makeResult(a)});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("loadSenderKeySession"))};g.loadSenderKeySession=a}),98);
__d("WALoadSignedPreKeyApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["signedPrekey"],"readonly",function(b){return b.stores.signedPrekey.get(a).then(function(a){return a==null?void 0:a.encoded})},d("WASignalDB").signalOp("loadSignedPreKey"))};g.loadSignedPreKey=a}),98);
__d("WASaveOneTimePreKeyApi",["Promise","WADbSignal","WAResultOrError","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return d("WASignalDB").getDb().runInTransaction(["meta","prekey"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield c.stores.meta.get(d("WADbSignal").MetaKeysEnum.lastPrekeyId));e=e==null?void 0:e.value.lastPrekeyId;if(e==null)return d("WAResultOrError").makeError("missing_last_prekey");yield (h||(h=b("Promise"))).all([c.stores.prekey.bulkPut([babelHelpers["extends"]({},a,{isDeleted:!1})]),c.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.lastPrekeyId,value:{lastPrekeyId:a.keyId}}])]);return d("WAResultOrError").makeResult()});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("saveOneTimePreKey"))};g.saveOneTimePreKey=a}),98);
__d("WASavePreKeysGenerationApi",["Promise","WACryptoManager","WADbSignal","WAResultOrError","WASignalDB","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)throw c("err")("Keys provided to savePreKeysGeneration cannot be empty");var e=(yield d("WASignalDB").getDb().runInTransaction(["meta","prekey","prekeyGeneration"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield c.stores.meta.get(d("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId));e=d("WACryptoManager").castToPreKeyGenerationId(((e=e==null?void 0:e.value.lastPrekeyGenerationId)!=null?e:0)+1);var f=a[0].keyId,g=a[a.length-1].keyId,i=a.map(function(a){return babelHelpers["extends"]({},a,{isDeleted:!1})});yield (h||(h=b("Promise"))).all([c.stores.prekey.bulkPut(i),c.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.lastPrekeyId,value:{lastPrekeyId:g}},{key:d("WADbSignal").MetaKeysEnum.lastPrekeyGenerationId,value:{lastPrekeyGenerationId:e}}]),c.stores.prekeyGeneration.bulkPut([{createdTs:d("WATimeUtils").unixTime(),endingId:g,generationId:e,startingId:f}])]);return d("WAResultOrError").makeResult(e)});return function(a){return c.apply(this,arguments)}}(),d("WASignalDB").signalOp("savePreKeysGeneration")));return e});return function(b){return a.apply(this,arguments)}}();g.savePreKeysGeneration=a}),98);
__d("WASaveSignedPreKeyIfNewApi",["Promise","WADbSignal","WASignalDB","WASignalSignatures","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c){return d("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readwrite",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=(yield e.stores.signedPrekey.get(a));if(f!=null){f=d("WASignalSignatures").deserializeSignedPreKey(f.encoded);if(f!=null)return{key:f,type:"duplicate"}}yield (h||(h=b("Promise"))).all([e.stores.signedPrekey.bulkPut([{encoded:c,keyId:a}]),e.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:a}}])]);return{type:"success"}});return function(a){return e.apply(this,arguments)}}(),d("WASignalDB").signalOp("saveSignedPreKeyIfNew"))};g.saveSignedPreKeyIfNew=a}),98);
__d("WASessionApi",["WACryptoManager","WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().store("session").get(a).then(function(a){return a==null?null:d("WACryptoManager").decodeSession(a.session)})};b=function(a){return d("WASignalDB").getDb().store("session").bulkGet(a).then(h)};function h(a){var b=new Map();for(a of a){if(a==null)continue;var c=d("WACryptoManager").decodeSession(a.session);b.set(a.id,c)}return b}g.loadSession=a;g.bulkLoadSession=b}),98);
__d("WACryptoDbCallbacks",["WABulkSaveSignalDataApi","WADeletePreKeyGenerationsApi","WAGetLastPreKeyGenerationIdApi","WAGetPreKeyGenerationsTimestampsApi","WALoadICDCApi","WALoadIdentitiesApi","WALoadLastSyncTsApi","WALoadLatestSignedPreKeyApi","WALoadOneTimePreKeyApi","WALoadPreKeysApi","WALoadSenderKeySessionApi","WALoadSignedPreKeyApi","WASaveOneTimePreKeyApi","WASavePreKeysGenerationApi","WASaveSignedPreKeyIfNewApi","WASessionApi"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return{bulkLoadIdentities:d("WALoadIdentitiesApi").bulkLoadIdentities,bulkSaveSignalData:d("WABulkSaveSignalDataApi").bulkSaveSignalData,deletePreKeyGenerations:d("WADeletePreKeyGenerationsApi").deletePreKeyGenerations,getLastPreKeyGenerationId:d("WAGetLastPreKeyGenerationIdApi").getLastPreKeyGenerationId,getPreKeyGenerationsTimestamps:d("WAGetPreKeyGenerationsTimestampsApi").getPreKeyGenerationsTimestamps,loadICDC:d("WALoadICDCApi").loadICDC,loadIdentities:d("WALoadIdentitiesApi").loadIdentities,loadLastSyncTs:d("WALoadLastSyncTsApi").loadLastSyncTs,loadLatestSignedPreKey:d("WALoadLatestSignedPreKeyApi").loadLatestSignedPreKey,loadOneTimePreKey:d("WALoadOneTimePreKeyApi").loadOneTimePreKey,loadPreKeys:d("WALoadPreKeysApi").loadPreKeys,loadSenderKeySession:d("WALoadSenderKeySessionApi").loadSenderKeySession,loadSession:d("WASessionApi").loadSession,loadSessions:d("WASessionApi").bulkLoadSession,loadSignedPreKey:d("WALoadSignedPreKeyApi").loadSignedPreKey,saveOneTimePreKey:d("WASaveOneTimePreKeyApi").saveOneTimePreKey,savePreKeysGeneration:d("WASavePreKeysGenerationApi").savePreKeysGeneration,saveSignedPreKeyIfNew:d("WASaveSignedPreKeyIfNewApi").saveSignedPreKeyIfNew}};g.getCryptoDbCallbacks=a}),98);
__d("WAMPSFlushable",["MpsTypes","WebMps","asyncToGeneratorRuntime","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=new Map(),this.$3=new Set()}var e=a.prototype;e.enqueue=function(a,b,c){if(a==null)return;this.$1.push(a);this.$2.set(a.messageId,b);this.$3.add(c)};e.flush=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){if(this.$1.length===0)return;a=this.$1;b=Array.from(this.$3).join(", ");f=this.$2;this.$1=[];this.$2=new Map();this.$3=new Set();try{var h=(yield d("WebMps").mps().saveNewMessages(a.map(function(a){return{directive:null,message:a,insertionSource:d("MpsTypes").InsertionSource.Receive}}),{source:b}));f.forEach(function(a,b){a(h.get(b))})}catch(a){var i=c("getErrorSafe")(a);e==null||e.addPoint("mps_persistance_fail");f.forEach(function(a){a(i)})}});function e(b,c,d,e,f){return a.apply(this,arguments)}return e}();return a}();e=new a();g.MPSFlushable=a;g.mpsFlushable=e}),98);
__d("WASignalEntityStoreV2",["$InternalEnum","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["NOT_PERSISTED","PERSIST_IN_PROGRESS","PERSISTED"]);a=function(){function a(){this.$1=new Map()}var c=a.prototype;c.TEST_ONLY_LOAD_FROM_MEMORY=function(a){return this.$2(a)};c.$2=function(a){a=this.$1.get(a);return a!=null?{entity:a.entity,deleted:a.deleted}:null};c.load=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this.$2(a);if(c!=null&&c.deleted)return null;if(c!=null&&c.entity!=null)return c.entity;c=(yield b(a));this.$3(a,c);return c});function c(b,c){return a.apply(this,arguments)}return c}();c.bulkLoad=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[],d=new Map();for(a of a){var e=this.$2(a);if(e==null){c.push(a);continue}if(e.deleted)continue;e.entity!=null?d.set(a,e.entity):c.push(a)}e=(yield b(c));for(a of e.entries()){b=a[0];c=a[1];d.set(b,c);this.$3(b,c)}return d});function c(b,c){return a.apply(this,arguments)}return c}();c.$3=function(a,b){this.$1.set(a,{entity:b,status:g.PERSISTED,deleted:!1})};c.store=function(a,b){this.$1.set(a,{entity:b,status:g.NOT_PERSISTED,deleted:!1})};c.remove=function(a){this.$1.set(a,{entity:null,status:g.NOT_PERSISTED,deleted:!0})};c.pureSnapshot=function(){var a=[],b=Array.from(this.$1.entries()).filter(function(a){a[0];a=a[1];return a.status===g.NOT_PERSISTED}).filter(function(b){var c=b[0];b=b[1];b.deleted&&a.push({id:c});return!b.deleted}).filter(function(a){a[0];a=a[1];return a.entity!=null}).map(function(a){var b=a[0];a=a[1];return{id:b,cachedEntity:a.entity}});return{update:b,remove:a}};c.snapshot=function(){var a=this,b=this.pureSnapshot();b.remove.forEach(function(b){b=b.id;b=a.$1.get(b);b&&(b.status=g.PERSIST_IN_PROGRESS)});b.update.forEach(function(b){b=b.id;b=a.$1.get(b);b&&(b.status=g.PERSIST_IN_PROGRESS)});return b};c.markSnapshotAsCommitted=function(){this.$1.forEach(function(a){a.status===g.PERSIST_IN_PROGRESS&&(a.status=g.PERSISTED)})};c.markSnapshotAsFailed=function(){this.$1.forEach(function(a){a.status===g.PERSIST_IN_PROGRESS&&(a.status=g.NOT_PERSISTED)})};c.clear=function(){this.$1=new Map()};return a}();f.PersistStatus=g;f.SignalEntityStore=a}),66);
__d("WASignalIdentityStore",["Promise","WAJids","WALogger","WASignalEntityStoreV2","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(){this.$1=new Map(),this.$2=new(d("WASignalEntityStoreV2").SignalEntityStore)()}var c=a.prototype;c.bulkLoadIdentities=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this,d=function*(){var a=e[0],d=e[1];yield c.loadIdentitiesByUser(a,function(){return(i||(i=b("Promise"))).resolve(d)})};for(var e of a)yield* d();return a});function c(b){return a.apply(this,arguments)}return c}();c.loadIdentitiesByUser=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=this.$1.get(a);if(e==null){var f=this.$3(a,yield c(a));c=Array.from(f.keys());this.$1.set(a,new Set(c));return this.$2.bulkLoad(c,function(){return(i||(i=b("Promise"))).resolve(f)})}else return this.$2.bulkLoad(Array.from(e),function(a){a.length>0&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[WASignalIdentityStore] This should never happen."])));return(i||(i=b("Promise"))).resolve(new Map())})});function c(b,c){return a.apply(this,arguments)}return c}();c.$3=function(a,b){b=new Map(b);var c=this.$2.pureSnapshot(),e=c.remove;c=c.update;for(e of e){var f=e.id;b["delete"](f)}for(f of c){e=f.id;c=f.cachedEntity;c!=null&&d("WAJids").extractUserJid(e)===a&&b.set(e,c)}return b};c.store=function(a,b){this.$2.store(a,b);b=d("WAJids").extractUserJid(a);b=this.$1.get(b);b!=null&&b.add(a)};c.remove=function(a){this.$2.remove(a);var b=d("WAJids").extractUserJid(a);b=this.$1.get(b);b!=null&&b["delete"](a)};c.clear=function(){this.$2.clear(),this.$1=new Map()};c.load=function(a,b){return this.$2.load(a,b)};c.bulkLoad=function(a,b){return this.$2.bulkLoad(a,b)};c.snapshot=function(){return this.$2.snapshot()};c.pureSnapshot=function(){return this.pureSnapshot()};c.markSnapshotAsCommitted=function(){this.$2.markSnapshotAsCommitted()};c.markSnapshotAsFailed=function(){this.$2.markSnapshotAsFailed()};return a}();g.SignalIdentityStore=a}),98);
__d("WAInMemorySignalStore",["MAWMpsGating","Promise","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WACryptoManager","WACryptoUtils","WAGlobals","WAIdentityUtils","WAJids","WAMPSFlushable","WAProtocolQueue","WAResultOrError","WASignalEntityStoreV2","WASignalIdentityStore","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u=d("WATagsLogger").TAGS(["CryptoManager","InMemorySignalStore"]);a=function(){function a(a,c){var e=this;this.loadSession=function(a,b){return e.$1.load(a,function(a){return e.$9.loadSession(a,b)})};this.loadSessions=function(a){return e.$1.bulkLoad(a,function(a){return e.$9.loadSessions(a).then(function(a){return new Map(Array.from(a.entries()).map(function(a){return[a[0],a[1]]}))})}).then(function(a){return new Map(Array.from(a.entries()).map(function(a){return[a[0],a[1]]}))})};this.loadSignedPreKey=function(a){return e.$7.load(a,function(){return e.$9.loadSignedPreKey(a)})};this.bulkLoadIdentities=function(a){var c=new Map();return(t||(t=b("Promise"))).all(a.map(function(a){return e.loadIdentities(a).then(function(b){c.set(a,b)})})).then(function(){return c})};this.loadIdentities=function(a){return e.$5.loadIdentitiesByUser(a,function(){return e.$9.loadIdentities(a)})};this.saveIdentity=function(a,c){return(t||(t=b("Promise"))).resolve(e.storeIdentity(a,c))};this.loadOneTimePreKey=function(a){return e.$6.load(a,function(){return e.$9.loadOneTimePreKey(a)})};this.saveSenderKeySession=function(a,c,d){e.storeSenderKeySession(a,c,d);return(t||(t=b("Promise"))).resolve()};this.saveSignedPreKeyIfNew=function(a,b){return e.$9.saveSignedPreKeyIfNew(a,b)};this.loadSenderKeySession=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var f=(yield e.$8.load(d("WACryptoManager").encodeSenderKey(a,c),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield e.$9.loadSenderKeySession(a,c));return b.success?b.value:null})));return f==null?d("WAResultOrError").makeError("errLoadSenderKeySession"):d("WAResultOrError").makeResult(f)});return function(b,c){return a.apply(this,arguments)}}();this.handleNewSession=function(a,c,f,g,h){e.storeSession(a,c);f!=null&&e.storeIdentity(a,f);g!=null&&e.removeOneTimePreKey(g);return(t||(t=b("Promise"))).resolve(d("WAResultOrError").makeResult())};this.saveICDC=function(a,c){e.$3.store(a,c);return(t||(t=b("Promise"))).resolve()};this.loadICDC=function(a){return e.$3.load(a,function(){return e.$9.loadICDC(a)})};this.saveLastSyncTs=function(a,c){e.$4.store(a,c);return(t||(t=b("Promise"))).resolve()};this.loadLastSyncTs=function(a){return e.$4.load(a,function(){return e.$9.loadLastSyncTs(a)})};this.saveDhash=function(a,c){e.$2.store(a,c);return(t||(t=b("Promise"))).resolve()};this.getLastPreKeyGenerationId=function(){return e.$9.getLastPreKeyGenerationId()};this.savePreKeysGeneration=function(a){return e.$9.savePreKeysGeneration(a)};this.getPreKeyGenerationsTimestamps=function(){return e.$9.getPreKeyGenerationsTimestamps()};this.deletePreKeyGenerations=function(a){return e.$9.deletePreKeyGenerations(a)};this.saveOneTimePreKey=function(a){return e.$9.saveOneTimePreKey(a)};this.loadPreKeys=function(a){return e.$9.loadPreKeys(a)};this.loadLatestSignedPreKey=function(){return e.$9.loadLatestSignedPreKey()};this.$9=a;this.$10=c;this.$5=new(d("WASignalIdentityStore").SignalIdentityStore)();this.$1=new((a=d("WASignalEntityStoreV2")).SignalEntityStore)();this.$2=new a.SignalEntityStore();this.$3=new a.SignalEntityStore();this.$4=new a.SignalEntityStore();this.$6=new a.SignalEntityStore();this.$7=new a.SignalEntityStore();this.$8=new a.SignalEntityStore()}var c=a.prototype;c.storeSession=function(a,b){this.$1.store(a,b)};c.storeIdentity=function(a,b){if(!b)return;this.$5.store(a,b)};c.removeOneTimePreKey=function(a){this.$6.remove(a)};c.storeSenderKeySession=function(a,b,c){this.$8.store(d("WACryptoManager").encodeSenderKey(a,b),c)};c.updateUserDevicesInfo=function(a){var c=this;return(t||(t=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield c.loadIdentities(a.jid)),f=a.devices,g=a.jid,o=a.notificationTs,p=a.dhash,q=a.icdcInfo,r=a.lastSyncTs;u.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Update user devices: userJid: ","; new identities: ","; previous identities: ","}"])),g,f.map(function(b){b=b.id;return d("WAJids").toDeviceJid(a.jid,b)}).join(","),Array.from(e.keys()).join(","));var s=new Set(e.keys()),v=[],w=[];for(var x of f){var y=x.id,z=x.identity,A=x.model,B=x.platform;y=d("WAJids").toDeviceJid(a.jid,y);var C=e.get(y);if(d("WAGlobals").getMyDeviceJid()===y){var D=d("WACryptoUtils").uint8ArraysEqual(d("WAIdentityUtils").removeKeyTypeIfNeeded(c.$10.staticKeyPair.publicKey),d("WAIdentityUtils").removeKeyTypeIfNeeded(z));D||u.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Receiving an identity for my device but it is different from original one"])))}s["delete"](y);if(C==null)w.push({instruction:"identityAdded",jid:d("WAJids").extractUserJid(y),type:"instruction",device:y,identity:z,model:A,platform:B,notificationTs:o,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow});else if(!d("WACryptoUtils").uint8ArraysEqual(C,z)){if(d("WAJids").extractUserJid(y)!==g){u.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Device notification of one user cannot remove session the other one"])));continue}v.push(y);u.DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Removing session dur to identity mismatch: ",""])),y);w.push({instruction:"identityChanged",jid:d("WAJids").extractUserJid(y),type:"instruction",device:y,identity:z,model:A,platform:B,notificationTs:o,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow})}}D=[];for(C of s){if(d("WAJids").extractUserJid(C)!==g){u.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Device notification of one user cannot remove identity the other one "])));continue}D.push(C);d("WAGlobals").getMyDeviceJid()===C&&u.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Removing my device identity. This should not happen"])));u.DEV(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Removing old identity: ",""])),C);w.push({instruction:"identityRemoved",jid:d("WAJids").extractUserJid(C),type:"instruction",device:C,notificationTs:o,priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow})}return(t||(t=b("Promise"))).all([p!=null?c.saveDhash(g,p):(t||(t=b("Promise"))).resolve(),r!=null?c.saveLastSyncTs(g,r):(t||(t=b("Promise"))).resolve(),q!=null?c.saveICDC(g,q):(t||(t=b("Promise"))).resolve()].concat(Array.from(D).map(function(a){return c.deleteIdentity(a)}),[D.concat(v).map(function(a){return c.$11(a)})],f.map(function(b){var a=b.id;b=b.identity;return c.saveIdentity(d("WAJids").toDeviceJid(g,a),b)}))).then(function(){return w})});return function(b){return a.apply(this,arguments)}}())).then(function(a){a=a.flat();a.forEach(function(a){var b;switch(a.instruction){case"identityAdded":b=d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED;break;case"identityChanged":b=d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED;break;case"identityRemoved":b=d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED;break;default:return}if(d("MAWMpsGating").isFullMpsEnabled()||d("MAWMpsGating").isMpsWaAdminMsgsEnabled()){var c,e=d("WAGlobals").getDependencies().generateExternalId();d("WAMPSFlushable").mpsFlushable.enqueue(d("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(a.jid,(c=a.notificationTs)!=null?c:d("WATimeUtils").unixTime(),e,b,a.platform,a.model),function(a){if(a!=null){u.ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Failed to save device change admin message: ",""])),a);return}},"handle_device_change")}d("MAWMpsGating").isFullMpsEnabled()||d("WAProtocolQueue").pqFlushable.enqueue(a)});d("MAWMpsGating").isFullMpsEnabled()&&d("WAGlobals").getDependencies().recordDeviceChangeHistory(a.map(function(a){var b;if(a.device==null)return null;var c=a.device;switch(a.instruction){case"identityAdded":return{jid:a.jid,deviceChangeType:d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.ADDED,platform:a.platform,model:a.model,device:c,identity:a.identity,ts:(b=a.notificationTs)!=null?b:d("WATimeUtils").unixTime()};case"identityChanged":return{jid:a.jid,deviceChangeType:d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,platform:a.platform,model:a.model,device:c,identity:a.identity,ts:(b=a.notificationTs)!=null?b:d("WATimeUtils").unixTime()};case"identityRemoved":return{jid:a.jid,deviceChangeType:d("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REMOVED,device:c,ts:(b=a.notificationTs)!=null?b:d("WATimeUtils").unixTime()};default:return null}}).filter(Boolean))["catch"](function(a){u.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to record device change history: ",""])),a)})}).then(function(){})};c.savePendingToDatabase=function(){var a=this,c=this.$12();if(c==null)return(t||(t=b("Promise"))).resolve();u.DEV(q||(q=babelHelpers.taggedTemplateLiteralLoose(["Snapshot: ",""])),c);u.LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["Snapshot save: start"])));return this.$9.bulkSaveSignalData(c).then(function(){u.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Snapshot save: end"]))),a.$13()},function(c){a.$14();return(t||(t=b("Promise"))).reject(c)})};c.clear=function(){this.$1.clear(),this.$5.clear(),this.$6.clear(),this.$7.clear(),this.$8.clear(),this.$2.clear(),this.$3.clear()};c.deleteIdentity=function(a){this.$5.remove(a);return(t||(t=b("Promise"))).resolve()};c.$11=function(a){this.$1.remove(a);return(t||(t=b("Promise"))).resolve()};c.$13=function(){this.$1.markSnapshotAsCommitted(),this.$2.markSnapshotAsCommitted(),this.$3.markSnapshotAsCommitted(),this.$4.markSnapshotAsCommitted(),this.$5.markSnapshotAsCommitted(),this.$6.markSnapshotAsCommitted(),this.$7.markSnapshotAsCommitted(),this.$8.markSnapshotAsCommitted()};c.$14=function(){this.$1.markSnapshotAsFailed(),this.$2.markSnapshotAsFailed(),this.$3.markSnapshotAsFailed(),this.$4.markSnapshotAsFailed(),this.$5.markSnapshotAsFailed(),this.$6.markSnapshotAsFailed(),this.$7.markSnapshotAsFailed(),this.$8.markSnapshotAsFailed()};c.$12=function(){var a=this.$1.snapshot(),b=[],c=a.remove.map(function(a){return a.id});a.update.forEach(function(c){var a=c.id;c=c.cachedEntity;if(c==null)return;b.push({id:a,updated:c})});var e=[];this.$8.snapshot().update.forEach(function(a){var b=d("WACryptoManager").decodeSenderKey(a.id),c=b.groupId;b=b.deviceId;a.cachedEntity!=null&&c&&b&&e.push({groupId:c,author:b,updated:a.cachedEntity})});a=this.$5.snapshot();var f=a.remove.map(function(a){return a.id}),g=[];a.update.forEach(function(b){var a=b.id;b=b.cachedEntity;if(b==null)return;g.push({id:a,identity:b})});a=this.$6.snapshot().remove;var h=this.$2.snapshot(),i=[];for(h of h.update){var j=h.cachedEntity,k=h.id;j!=null&&i.push({id:k,dhash:j})}k=this.$4.snapshot();j=[];for(h of k.update){k=h.cachedEntity;var l=h.id;k!=null&&j.push({id:l,lastSyncTs:k})}l=this.$3.snapshot();k=[];for(h of l.update){l=h.cachedEntity;var m=h.id;l!=null&&k.push({id:m,icdc:l})}return b.length===0&&c.length===0&&g.length===0&&e.length===0&&a.length===0&&k.length===0&&i.length===0&&j.length===0&&f.length===0?null:{dhashUpdate:i,icdcUpdate:k,identityRemove:f,identityUpdate:g,preKeyRemove:a,senderKeySessionUpdate:e,sessionRemove:c,sessionUpdate:b,lastSyncTsUpdate:j}};c.warmCache=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;a=a.map(d("WAJids").interpretAsUserJid).filter(Boolean);a=(yield this.$9.bulkLoadIdentities(a).then(function(a){return b.$5.bulkLoadIdentities(a)}));a=Array.from(a.values()).reduce(function(a,b){return a.concat(Array.from(b.keys()))},[]);yield this.loadSessions(a)});function c(b){return a.apply(this,arguments)}return c}();return a}();g.InMemorySignalStoreImpl=a}),98);
__d("WARequestKeysBatcher",["WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h={delayMs:50,maxSize:100};function a(a,b){b=b===void 0?h:b;var c=b.delayMs,e=b.maxSize,f=null;function g(b){f&&f.args===b&&(f=null);return a(b)}return function(a){if(f!=null)f.args.push(a);else{var b=[a],h=new(d("WAResolvable").Resolvable)();a=h.promise.then(g);var i=function(){return void h.resolve(b)},j=setTimeout(i,c);f={args:b,batchPromise:a,run:i,timer:j}}a=f;i=a.args;j=a.batchPromise;var k=i.length-1;if(i.length>=e){clearTimeout((a=f)==null?void 0:a.timer);f.run();f=null}return j.then(function(a){return a[k]})}}g.makeSimpleBatcher=a}),98);
__d("WARequestKeys",["WABulkRequestKeys","WAPromiseManagement","WARequestKeysBatcher","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=d("WARequestKeysBatcher").makeSimpleBatcher(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WABulkRequestKeys").bulkRequestKeys(a));return b.success===!1?a.map(function(){return b}):a.map(function(a){a=b.value.get(a);return a?d("WAResultOrError").makeResult(a):d("WAResultOrError").makeError("errRequestKeysNoKeys")})});return function(b){return a.apply(this,arguments)}}());c=d("WAPromiseManagement").cacheWhilePending(function(a){return a},a);g.requestKeys=c}),98);
__d("WACryptoManagerUtils",["Promise","WABulkRequestKeys","WACryptoDbCallbacks","WACryptoManager","WAGlobals","WAHandleFailureUtils","WAInMemorySignalStore","WALogger","WALoggerTag","WAPREList","WAPREMetrics","WARequestKeys","WAResultOrError","WASignalKeys","WASignalSignatures","WATagsLogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q=d("WATagsLogger").TAGS([c("WALoggerTag").SignedPrekey]);function a(a){var b=new(d("WAInMemorySignalStore").InMemorySignalStoreImpl)(d("WACryptoDbCallbacks").getCryptoDbCallbacks(),a),c=r();return{manager:d("WACryptoManager").initCryptoManager({regInfo:a,storage:b,network:c}),storage:b}}function r(){return{requestKeys:d("WARequestKeys").requestKeys,bulkRequestKeys:d("WABulkRequestKeys").bulkRequestKeys}}function e(a,c,e,f){var g=null;return d("WACryptoManager").decryptContent(f.cryptoManager,c,{ciphertext:e,type:a},function(a,c){g={plaintext:a,remoteIdentity:c};return(p||(p=b("Promise"))).resolve()}).then(function(a){if(a.success)return d("WAResultOrError").makeResult(g);else return a})["catch"](function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["DecryptMsg runtime error: ",""])),a);throw a})}function f(a,c,e,f){var g=null;return d("WACryptoManager").decryptGroupContent(f.cryptoManager,a,c,e,function(a){g={plaintext:a};return(p||(p=b("Promise"))).resolve()}).then(function(a){if(a.success)return d("WAResultOrError").makeResult(g);else return a})["catch"](function(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["DecryptMsg runtime error: ",""])),a);throw a})}function s(a,b){return d("WACryptoManager").getParticipantInfo(b,a)}function t(a){return a.storage.getPreKeyGenerationsTimestamps()}function u(a,b){return b.storage.deletePreKeyGenerations(a)}function v(a,b,c,e){return d("WACryptoManager").saveSenderKeySession(e.cryptoManager,a,b,c)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield a.storage.loadLatestSignedPreKey());if(e.success===!1){q.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Missing signed prekey: ",", triggering reregistration"])),e.error);yield d("WAHandleFailureUtils").reregisterPhone();throw c("err")("No signed prekey: "+e.error)}e=d("WASignalSignatures").deserializeSignedPreKey(e.value);if(e==null){q.ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Cannot deserialize signed prekey"])));throw c("err")("Cannot deserialize signed prekey")}var f=(yield d("WACryptoManager").generateOneTimePreKey(a));if(f==null){d("WATagsLogger").TAGS([c("WALoggerTag").OneTimePrekey]).ERROR(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate one time prekey"])));throw c("err")("Cannot generate one time prekey")}a=a.regInfo;var g=a.regId;a=a.staticKeyPair;return(p||(p=b("Promise"))).resolve({regId:g,keyType:d("WASignalKeys").KEY_TYPE,publicKey:a.publicKey,signedPreKey:e,preKey:f})});return x.apply(this,arguments)}function y(a,b,c){var e=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:"group",jid:a}},void 0);return d("WACryptoManager").encryptGroupContent(c.cryptoManager,a,d("WAGlobals").getMyDeviceJid(),b).then(function(a){a.success?e.endSuccess():(d("WATagsLogger").TAGS(["EncryptGroupContent"]).ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Failed to encrypt group content: ",""])),a.error),e.endFail(a.error));return a})["catch"](function(a){d("WATagsLogger").TAGS(["EncryptGroupContent"]).ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Runtime excpetion when encrypting group content: ",""])),a);e.endFail("runtime-exception");return d("WAResultOrError").makeError("runtime-exception")})}function z(a,b,c,e,f,g){var h=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:"1:1",jid:c},string_array:{node_types:e,message_types:f,media_types:g}},void 0);return d("WACryptoManager").bulkEncryptContent(b.cryptoManager,a).then(function(a){if(a.success)h.endSuccess();else{var b=a.error;switch(b){case"missing":case"mismatch":case"runtime-exception":break;default:break}h.endFail(b)}return a})}function A(a,b,c,e,f,g){var h=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MESSAGE_ENCRYPTION,{string:{chat:"1:1",jid:g}},void 0);return d("WACryptoManager").encryptContent(c.cryptoManager,a,b,e||d("WACryptoManager").DEFAULT_SESSION_REQUEST,f).then(function(a){if(a.success)h.endSuccess();else{var b=a.error;switch(b){case"identity-mismatch":case"errSignalInvalidKey":break;default:break}h.endFail(b)}return a})}function B(a,b){return d("WACryptoManager").bulkEncryptContent(b.cryptoManager,a).then(function(a){if(a.success===!1){d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["[SendMessage] Fail encrypt messages"])));return new Map()}return a.value})}function C(a,b){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield d("WACryptoManager").ensureSessionsExists(c.cryptoManager,a));yield (p||(p=b("Promise"))).all(Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return c.cryptoManager.storage.handleNewSession(b,a,a.remote.pubKey)}))});return D.apply(this,arguments)}g.createCryptoManager=a;g.decryptMsg=e;g.decryptGroupMsg=f;g.getParticipantInfo=s;g.getPreKeyGenerationsTimestamps=t;g.deletePreKeyGenerations=u;g.saveSenderKeySession=v;g.getSignalInfoForRetry=w;g.encryptGroupContentWithMetrics=y;g.bulkEncryptMsgWithMetrics=z;g.encryptMsgWithMetrics=A;g.bulkEncrypt=B;g.bulkPreEstablishOutgoingSession=C}),98);
__d("WADbRegistrationApi",["Promise","WADbSignal","WAJids","WALogger","WASignalDB","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a,c){return d("WASignalDB").getDb().runInTransaction(["contacts"],"readwrite",function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=(yield b.stores.contacts.get(a));if(d!=null)return b.stores.contacts.bulkPut([babelHelpers["extends"]({},d,{icdcInfo:c})]);else return b.stores.contacts.bulkPut([{contactJid:a,dhash:null,icdcInfo:c}])});return function(a){return d.apply(this,arguments)}}(),d("WASignalDB").signalOp("saveICDC"))};function a(a){return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(b){return b.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.deviceId,value:{deviceId:a}}])},d("WASignalDB").signalOp("saveDeviceId"))}function e(a,c){return d("WASignalDB").getDb().runInTransaction(["meta","signedPrekey"],"readwrite",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield (i||(i=b("Promise"))).all([e.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.deviceUUID,value:{deviceUUID:c.deviceUUID}},{key:d("WADbSignal").MetaKeysEnum.fbid,value:{fbid:a}},{key:d("WADbSignal").MetaKeysEnum.regId,value:{regId:c.signalRegInfo.regId}},{key:d("WADbSignal").MetaKeysEnum.identityKeyPair,value:{identityKeyPair:c.signalRegInfo.identityKeyPair}},{key:d("WADbSignal").MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:c.signalRegInfo.signedPreKey.keyId}},{key:d("WADbSignal").MetaKeysEnum.registrationVersion,value:{registrationVersion:c.registrationVersion}},{key:d("WADbSignal").MetaKeysEnum.authKeyPair,value:{authKeyPair:c.signalRegInfo.authKeyPair}},{key:d("WADbSignal").MetaKeysEnum.deviceRegUnixTime,value:{deviceRegUnixTime:c.registrationUnixTime}}]),e.stores.signedPrekey.bulkPut([c.signalRegInfo.signedPreKey])])});return function(a){return e.apply(this,arguments)}}(),d("WASignalDB").signalOp("saveRegistrationMeta"))}var k=function(a,b){var c=b.sessionId;return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(a){return a.stores.meta.bulkPut([{key:d("WADbSignal").MetaKeysEnum.lastSessionDeviceWasLinkedTo,value:{lastSessionDeviceWasLinkedTo:c}}])},d("WASignalDB").signalOp("saveLastSessionDeviceWasLinkedTo"))};function f(){return d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.stores.meta.bulkGet([(a=d("WADbSignal")).MetaKeysEnum.fbid,a.MetaKeysEnum.deviceId,a.MetaKeysEnum.cat,a.MetaKeysEnum.regId,a.MetaKeysEnum.identityKeyPair,a.MetaKeysEnum.authKeyPair]));var b=a[0],e=a[1],f=a[2],g=a[3],i=a[4];a=a[5];d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["worker: got db data"])));b=b==null?void 0:b.value.fbid;e=e==null?void 0:e.value.deviceId;f=f==null?void 0:f.value.cat;g=g==null?void 0:g.value.regId;i=i==null?void 0:i.value.identityKeyPair;a=a==null?void 0:a.value.authKeyPair;if(b==null)throw c("err")("fbid not set");if(e==null)throw c("err")("deviceId not set");if(f==null)throw c("err")("fbCat not set");if(g==null||i==null)throw c("err")("regInfo not set");return{deviceJid:d("WAJids").toDeviceJid(d("WAJids").toMsgrUserJid(b),e),fbCat:f.encrypted_serialized_cat,regInfo:{authKeyPair:a,regId:g,staticKeyPair:i},userJid:d("WAJids").toMsgrUserJid(b)}});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("loadAllRegistrationMeta"))}g.saveICDC=j;g.saveDeviceId=a;g.saveRegistrationMeta=e;g.saveLastSessionDeviceWasLinkedTo=k;g.loadAllRegistrationMetaInTransaction=f}),98);
__d("WAMapUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return new Map(Array.from(a.entries()).map(function(a){return[a[0],b(a[1],a[0])]}))}f.mapValues=a}),66);
__d("WAProtocolMediaType",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case"image":case"sticker":case"gif":case"video":case"ptt":case"audio":case"document":case"product":return a;case"xma-image":return"document";default:return null}}f.castToProtocolMediaType=a}),66);
__d("WAEncNode",["WAAsMessageTransport","WACryptoManagerUtils","WAGlobals","WALogger","WAMapUtils","WAMsgTransport.pb","WANullthrows","WAProtocolMediaType","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f){var g=new Set(),i=new Set(),m=new Set(),n=d("WAMapUtils").mapValues(a,function(a,b){var c=a.params;a=a.icdc;var d;g.add(c.type);switch(c.type){case"message":d=j({messageBytes:c.messageBytes,to:b,icdc:a,chat:c.chat,backupDirective:c.backupDirective,applicationPayloadVersion:c.applicationPayloadVersion});i.add(c.messageType.type);c.messageType.mediaType!=null&&m.add(c.messageType.mediaType);break;case"appdata":d=k({messageBytes:c.messageBytes});break;default:c.type,d=l({skdm:c.skdm,icdc:a})}return{plaintext:d}});return d("WACryptoManagerUtils").bulkEncryptMsgWithMetrics(n,b,e,Array.from(g),Array.from(i),Array.from(m)).then(function(b){if(!b.success){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to encrypt message: ",""])),b.error);return null}return d("WAMapUtils").mapValues(b.value,function(b,e){var g,h=b.type,i=b.ciphertext;b=b.baseKey;g=c("WANullthrows")((g=a.get(e))==null?void 0:g.params);var j=g.type==="message"&&g.messageType.type==="media"?d("WAProtocolMediaType").castToProtocolMediaType(g.messageType.mediaType):null;return{encType:"device",to:e,v:((e=g.messageBytes)==null?void 0:e.version)==="v2"?"2":"3",type:h,mediaType:j,count:f,ciphertext:i,baseKey:b}})})}function b(a,b,c,e,f,g,h,m){var n;switch(b.type){case"message":n=j({messageBytes:b.messageBytes,to:a,icdc:h,chat:b.chat,backupDirective:m,applicationPayloadVersion:b.applicationPayloadVersion});break;case"appdata":n=k({messageBytes:b.messageBytes});break;default:b.type,n=l({skdm:b.skdm,icdc:h})}m=d("WACryptoManagerUtils").encryptMsgWithMetrics(a,n,c,f,g,b==null?void 0:b.chat);return m.then(function(c){var f;if(!c.success){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg failed to encrypt message: ",""])),c.error);return null}var g=b.type==="message"&&b.messageType.type==="media"?d("WAProtocolMediaType").castToProtocolMediaType(b.messageType.mediaType):null,h=c.value,j=h.type;h=h.ciphertext;return{encType:"device",to:a,v:((f=b.messageBytes)==null?void 0:f.version)==="v2"?"2":"3",type:j,mediaType:g,count:e,ciphertext:h,baseKey:c.value.baseKey}})}function j(a){var b=a.messageBytes,c=a.to,e=a.icdc,f=a.chat,g=a.backupDirective;a=a.applicationPayloadVersion;if(b.version==="v3"){var h=null;d("WAGlobals").isPeerDevice(c)&&(h=f);f=d("WAAsMessageTransport").asMessageTransport(b.bytes,h,null,e,g,a);return d("encodeProtobuf").encodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,f).readByteArrayView()}else if(d("WAGlobals").isPeerDevice(c))return b.bytesForPeer;else return b.bytes}function k(a){a=a.messageBytes;if(a.version==="v3"){a=d("WAAsMessageTransport").asMessageTransport(a.bytes);return d("encodeProtobuf").encodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,a).readByteArrayView()}else throw c("err")("Plaintext v2 not supported yet")}function l(a){var b=a.skdm;a=a.icdc;b=d("WAAsMessageTransport").asMessageTransport(null,null,b,a);return d("encodeProtobuf").encodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,b).readByteArrayView()}g.getEncNodes=a;g.getEncNode=b}),98);
__d("WAPhash",["Promise","WABase64","WABinary","WACryptoDependencies","WALogger","WASortedLists"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Calculate pHash -- Start"])));a=d("WASortedLists").sortAndDedupe(a);var c=new(d("WABinary").Binary)();for(var e=0;e<a.length;e++)c.writeString(a[e]);return(j||(j=b("Promise"))).resolve(d("WACryptoDependencies").getCrypto().subtle.digest("SHA-256",c.readByteArrayView()).then(function(a){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Calculate pHash -- end"])));a=new Uint8Array(a,0,6);return"2:"+d("WABase64").encodeB64(a)}))}g.calculatePHash=a}),98);
__d("WAEncUserMsg",["Promise","WAComputeICDC","WAEncNode","WAGlobals","WAJids","WAPhash","WATagsLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s=d("WATagsLogger").TAGS(["WAEncUserMsg"]);function a(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){s.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- START"])));a.length===0&&s.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- no recipient"])));s.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- ICDC"])));var h=a.flatMap(function(a){return a.devicesInfo}).map(function(a){return a.jid});w(a)&&s.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- OTHER_RECIPENT_DEVICE_EMPTY"])));var i;e.type==="message"&&!c("gkx")("3176")&&(i=(yield x(a,f,g)));return(r||(r=b("Promise"))).all([u(h,e,f,i,g),d("WAPhash").calculatePHash(h.concat(d("WAGlobals").getMyDeviceJid()))]).then(function(a){var b=a[0];a=a[1];s.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptUserMsg -- user message -- DONE"])));return{participants:b,phash:a}})});return t.apply(this,arguments)}function e(a,b,c){return u(a,b,c)}function u(a,b,c,d,e){return v(a,b,c,d,e).then(function(a){if(a.length===0){s.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- getParticipantNodes -- EMPTY NODE"])));e==null||e.addPoint("getParticipantNodes_empty_node");return}return a})}function f(a,b,c,e,f,g){return d("WAEncNode").getEncNode(a,b,c,e,f,g)}function v(a,b,c,e,f){var g=!1;s.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- encrypt -- getParticipantNodes -- START"])));(b.type!=="message"||d("WAJids").interpretAsGroupJid(b.chat)!=null)&&(g=!0);a=d("WAEncNode").getEncNodes(new Map(a.map(function(a){return[a,{params:b,icdc:e}]})),c).then(function(a){if(a==null){s.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- encrypt - getParticipantNodes -- EMPTY DEVICE JIDS"])));f==null||f.addPoint("getParticipantNodes_empty_device_jids");return[]}b.type==="message"&&(g=g||Array.from(a.keys()).some(function(a){return d("WAJids").extractUserJid(a)===b.chat}));return Array.from(a==null?void 0:a.values())});return a.then(function(a){if(g)return a;else{s.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- getParticipantNodes -- receiverEncypted -- FALSE"])));f==null||f.addPoint("getParticipantNodes_receiverEncypted_false");return[]}}).then(function(a){return a.filter(Boolean)})}function w(a){return a.filter(function(a){return a.user!==d("WAGlobals").getMyUserJid()}).flatMap(function(a){return a.devicesInfo}).length===0}function x(a,b,c){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;try{c==null||c.addPoint("icdc_start"),e=(yield d("WAComputeICDC").computeICDC(a,d("WAGlobals").getMyUserJid(),d("WAGlobals").getMyDeviceJid(),b)),c==null||c.addPoint("icdc_end",{bool:{isICDCEmpty:e==null}})}catch(a){c==null||c.addPoint("icdc-error"),s.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["WAEncUserMsg -- ICDC calc error: ",""])),a)}return e});return y.apply(this,arguments)}g.encryptUserMsg=a;g.encryptGroupFanoutMsg=e;g.encryptDeviceJidMessage=f}),98);
__d("WAGetUserDevices",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield b.storage.bulkLoadIdentities(a));return Array.from(b).flatMap(function(a){a=a[1];return Array.from(a.keys())})});return g.apply(this,arguments)}f.getUserDevices=a}),66);
__d("WAEncGroupMsg",["WAAsMessageTransport","WABridge","WACryptoManager","WACryptoManagerUtils","WADbPersonalSenderKeyStatusTxns","WAEncUserMsg","WAGetUserDevices","WAGlobals","WAHex","WAMsgTransport.pb","WAOdsEnums","WAPhash","WAPromiseQueue","WAProtocolMediaType","WAResultOrError","WASortedLists","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=d("WATagsLogger").TAGS(["WAEncGroupMsg"]),p=30*d("WATimeUtils").DAY_SECONDS,q=new(d("WAPromiseQueue").PromiseQueue)();function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.senderKeyId;if(e==null||a.rotateSenderKey||!d("WATimeUtils").happenedWithin(a.ts,p))return d("WAResultOrError").makeError("sender-key-invalid");c=(yield c.cryptoManager.storage.loadSenderKeySession(b,d("WAGlobals").getMyDeviceJid()));if(c.success===!1||c.value.senderKeyStates.length===0)return d("WAResultOrError").makeError("sender-key-missing");b=c.value.senderKeyStates.at(-1);if(b==null)return d("WAResultOrError").makeError("sender-key-missing");return b.senderKeyId!==a.senderKeyId?d("WAResultOrError").makeError("sender-key-id-mismatch"):d("WAResultOrError").makeResult({senderKeyId:e})});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("WACryptoManager").rotateGroupSenderKey(b.cryptoManager,a,d("WAGlobals").getMyDeviceJid()));yield d("WADbPersonalSenderKeyStatusTxns").markSenderKeyAsRotated(a,b.senderKeyId,d("WATimeUtils").unixTime());return{senderKeyId:b.senderKeyId}});return u.apply(this,arguments)}function v(a,c,e,f){return q.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WADbPersonalSenderKeyStatusTxns").getSenderKeyStatus(a)),g=(yield r(b,a,e)),i=(yield d("WAGetUserDevices").getUserDevices(c,e.cryptoManager)),j=new Set(i);if(g.success===!1){o.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Rotating sender key for group "," because ",""])),a,g.error);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.GROUP_SKS_INVALID,key:g.error});f.addPoint("sender_key_rotation_start");var k=(yield t(a,e));f.addPoint("sender_key_rotation_end");return{senderKeyId:k.senderKeyId,needsSenderKey:j,groupParticipants:new Set(i)}}else{((k=b.hasSenderKey)!=null?k:[]).forEach(function(a){return j["delete"](a)});f.addPoint("no_sk_rotation",{"int":{noRotationNeedsSK:j.size}});return{senderKeyId:g.value.senderKeyId,needsSenderKey:j,groupParticipants:new Set(i)}}}))}function a(a,b,c,d,e,f,g){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h){h.addPoint("enc_group_start");var p=(yield v(a,b.map(function(a){return a.user}),f,h)),q=p.senderKeyId,r=p.needsSenderKey;p=p.groupParticipants;o.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Finish rotate participant info"])));h.addPoint("rotated_participant_info");var s=null,t,u;b=b.flatMap(function(a){return a.devicesInfo}).map(function(a){return a.jid});p["delete"](d("WAGlobals").getMyDeviceJid());var w=!d("WASortedLists").areEqual(d("WASortedLists").asSortedSet(p),d("WASortedLists").sortAndDedupe(b)),y=e.type==="text"&&e.isRevoked,z=e.type==="media"?d("WAProtocolMediaType").castToProtocolMediaType(e.mediaType):null;if(w||y){w=(yield d("WAEncUserMsg").encryptGroupFanoutMsg(b,{type:"message",messageBytes:c,messageType:e,chat:a,backupDirective:g},f));w&&!(e.type==="text"&&e.isInvisible===!0)&&(t=w,u={encType:"group",to:a,v:c.version==="v3"?"3":"2",type:"skmsg",mediaType:z,ciphertext:null});o.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Finish group fanout msg"])));h.addPoint("finish_group_fanout_msg")}else{if(c.version==="v3"){y=d("WAAsMessageTransport").asMessageTransport(c.bytes);g=d("encodeProtobuf").encodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,y).readByteArrayView()}else g=c.bytes;w=(yield d("WACryptoManagerUtils").encryptGroupContentWithMetrics(a,g,f));o.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Finish encrypt group content"])));h.addPoint("finish_encrypt_group_content");if(w.success){o.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Encrypt success"])));y=w.value;q!==y.senderKeyId&&p.forEach(function(a){return r.add(a)});if(r.size>0){g={groupId:a,axolotlSenderKeyDistributionMessage:d("WAHex").bytesToBuffer(y.senderKeyDistributionProto)};o.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start key distribution"])));w=b.filter(function(a){return r.has(a)});q=(yield x(w,g,f));o.LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["end key distribution"])));h.addPoint("finish_skdm_enc_node");q.length>0&&(t=q,s={group:a,senderKeyId:y.senderKeyId,knowsSenderKey:new Set(w)})}u={encType:"group",to:a,v:c.version==="v2"?"2":"3",type:y.ciphertext.type,mediaType:z,ciphertext:y.ciphertext.ciphertext};e.type==="text"&&e.isInvisible===!0&&(u={encType:"group",to:a,v:c.version==="v2"?"2":"3",type:"skmsg",mediaType:null,ciphertext:null})}}p=(yield d("WAPhash").calculatePHash(b.concat(d("WAGlobals").getMyDeviceJid())));h.addPoint("phash_finish");return{phash:p,participants:t,encNode:u,senderKeyDistributionInfo:s}});return w.apply(this,arguments)}function x(a,b,c){b=d("WAAsMessageTransport").asMessageTransport(null,null,b,null);var e=d("encodeProtobuf").encodeProtobuf(d("WAMsgTransport.pb").MessageTransportSpec,b).readByteArrayView();return d("WACryptoManagerUtils").bulkEncrypt(new Map(a.map(function(a){return[a,{plaintext:e}]})),c).then(function(a){var b=[];a.forEach(function(a,c){b.push({encType:"device",to:c,v:"3",type:a.type,ciphertext:a.ciphertext,mediaType:null,count:null,baseKey:null})});return b})}g.encryptGroupMsg=a}),98);
__d("WAFrankingNode",["Promise","WAFranking","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,c,e){if(c==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Franking key is missing"])));return(j||(j=b("Promise"))).resolve(null)}if(e!=null&&e!==0){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Can't handle franking version ",""])),e);return(j||(j=b("Promise"))).resolve(null)}return d("WAFranking").genFrankingTag(c,a)}g.genFrankingTagFromMessageApplicationEncode=a}),98);
__d("WAGenReportingMeta",["WAByteArray","WAFranking","WAFrankingNode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAFrankingNode").genFrankingTagFromMessageApplicationEncode(a,b,c));return{frankingKey:b,frankingTag:e,frankingVersion:d("WAFranking").getFrankingVersion(c),reportingContent:d("WAByteArray").uint8ArrayToBuffer(a),reportingTag:null}});return h.apply(this,arguments)}g.genReportingMeta=a}),98);
__d("WAGetKeysForUpload",["WALoggerTag","WAResultOrError","WASignalKeys","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("WATagsLogger").TAGS([c("WALoggerTag").PrekeyGenerateAndUpload,c("WALoggerTag").SignedPrekey]);function a(a,b){return a.storage.loadPreKeys(b).then(function(b){var c=b.preKeys;b=b.signedPreKey;var e=[];c.forEach(function(a){a=d("WASignalKeys").deserializePreKey(a);a==null?i.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to deserialize prekey received from the db"]))):e.push(a)});return d("WAResultOrError").makeResult({regInfo:a.regInfo,keyType:d("WASignalKeys").KEY_TYPE,preKeys:e,signedPreKey:b})})}g.getKeysForUpload=a}),98);
__d("WAMakeSignedPreKeyMixin",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={idElementValue:d("WAWap").BIG_ENDIAN_CONTENT(a.id,3)},c={anyElementValue:a.keyPair.publicKey};a=a.signature;return{keyIDMixinArgs:b,keyDataMixinArgs:c,signatureElementValue:a}}g.makeSignedPreKeyMixin=a}),98);
__d("WARandomJitter",[],(function(a,b,c,d,e,f){"use strict";function a(){return Math.round(Math.random()*500-250)}f.getRandomJitter=a}),66);
__d("WARetryUtils",["WARandomJitter"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a)return{algo:{backoff:{first:1,second:1,type:"fibonacci"},toMs:function(a){return(1+a)*1e3+d("WARandomJitter").getRandomJitter()},type:"adjust"},relativeDelay:!0,max:6e5};else return{algo:{type:"adjust",backoff:{type:"fibonacci",first:1,second:1},toMs:function(a){return(9+a)*1e3}},max:62e4}}g.fibonacciBackoff=a}),98);
__d("WASmaxInPreKeysSetVnameFailureBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");return!b.success?b:d("WAResultOrError").makeResult({text:b.value})}g.parseSetVnameFailureBadRequestMixin=a}),98);
__d("WASmaxInPreKeysSetVnameFailureFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");return!b.success?b:d("WAResultOrError").makeResult({text:b.value})}g.parseSetVnameFailureFallbackMixin=a}),98);
__d("WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");return!b.success?b:d("WAResultOrError").makeResult({text:b.value})}g.parseSetVnameFailureInternalServerErrorMixin=a}),98);
__d("WASmaxInPreKeysSetVnameFailureNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"violation");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!a.success)return a;var c=d("WASmaxParseUtils").attrString(b.value,"reason");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrInt,b.value,"max");if(!e.success)return e;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrInt,b.value,"length");return!b.success?b:d("WAResultOrError").makeResult({text:a.value,violationReason:c.value,violationMax:e.value,violationLength:b.value})}g.parseSetVnameFailureNotAcceptableMixin=a}),98);
__d("WASmaxInPreKeysVnameFailures",["WAResultOrError","WASmaxInPreKeysSetVnameFailureBadRequestMixin","WASmaxInPreKeysSetVnameFailureFallbackMixin","WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin","WASmaxInPreKeysSetVnameFailureNotAcceptableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysSetVnameFailureNotAcceptableMixin").parseSetVnameFailureNotAcceptableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"SetVnameFailureNotAcceptable",value:b.value});var c=d("WASmaxInPreKeysSetVnameFailureBadRequestMixin").parseSetVnameFailureBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"SetVnameFailureBadRequest",value:c.value});var e=d("WASmaxInPreKeysSetVnameFailureInternalServerErrorMixin").parseSetVnameFailureInternalServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"SetVnameFailureInternalServerError",value:e.value});var f=d("WASmaxInPreKeysSetVnameFailureFallbackMixin").parseSetVnameFailureFallbackMixin(a);return f.success?d("WAResultOrError").makeResult({name:"SetVnameFailureFallback",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["VnameFailureNotAcceptable","VnameFailureBadRequest","VnameFailureInternalServerError","VnameFailureFallback"],[b,c,e,f])}g.parseVnameFailures=a}),98);
__d("WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysVnameFailures","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"error");if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(c.value,"text");if(!f.success)return f;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,c.value,"code",207);if(!c.success)return c;var g=d("WASmaxParseUtils").attrIntRange(e.value,"code",400,599);if(!g.success)return g;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysVnameFailures").parseVnameFailures(e.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorText:f.value,errorCode:c.value,errorErrorCode:g.value},a.value,{errorErrorVnameFailures:b.value}))}g.parseSetResponsePreKeySuccessVnameFailure=a}),98);
__d("WASmaxInPreKeysIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"field");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"reason");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,reason:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"field",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);
__d("WASmaxInPreKeysRequestErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:b.value});var c=d("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorNotAcceptable","IQErrorFallbackClient"],[b,c])}g.parseRequestErrors=a}),98);
__d("WASmaxInPreKeysSetResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrors").parseRequestErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrors:b.value}))}g.parseSetResponseRequestError=a}),98);
__d("WASmaxInPreKeysSetResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseSetResponseServerError=a}),98);
__d("WASmaxInPreKeysSetResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseSetResponseSuccess=a}),98);
__d("WASmaxOutPreKeysKeyDataMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeKeyDataMixin=a}),98);
__d("WASmaxOutPreKeysIdentityKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(d("WASmaxJsx").smax("identity",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIdentityKeyMixin=a}),98);
__d("WASmaxOutPreKeysKeyTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("type",null,new Uint8Array([5])));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeKeyTypeMixin=a}),98);
__d("WASmaxOutPreKeysKeyIDMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.idElementValue;a=d("WASmaxJsx").smax("id",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeKeyIDMixin=a}),98);
__d("WASmaxOutPreKeysPreKeyListMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin","WASmaxOutPreKeysKeyIDMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.keyIDMixinArgs;a=a.keyDataMixinArgs;b=d("WASmaxJsx").smax("key",null,d("WASmaxOutPreKeysKeyIDMixin").mergeKeyIDMixin(d("WASmaxJsx").smax("id",null),b),d("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(d("WASmaxJsx").smax("value",null),a));return b}function i(a){a=a.keyArgs;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("list",null,d("WASmaxChildren").REPEATED_CHILD(h,a,0,2e4)));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makePreKeyListListKey=h;g.mergePreKeyListMixin=a}),98);
__d("WASmaxOutPreKeysRegistrationIDMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.registrationElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("registration",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRegistrationIDMixin=a}),98);
__d("WASmaxOutPreKeysRequestPaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.paddingElementValue;a=d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("padding",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRequestPaddingMixin=a}),98);
__d("WASmaxOutPreKeysSignedPreKeyMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysKeyDataMixin","WASmaxOutPreKeysKeyIDMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.keyIDMixinArgs,e=a.keyDataMixinArgs;a=a.signatureElementValue;c=(b=d("WASmaxJsx")).smax("smax$any",null,b.smax("skey",null,d("WASmaxOutPreKeysKeyIDMixin").mergeKeyIDMixin(b.smax("id",null),c),d("WASmaxOutPreKeysKeyDataMixin").mergeKeyDataMixin(b.smax("value",null),e),b.smax("signature",null,a)));return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSignedPreKeyMixin=a}),98);
__d("WASmaxOutPreKeysVerifiedNameMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.verifiedNameElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("verified_name",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeVerifiedNameMixin=a}),98);
__d("WASmaxOutPreKeysIdentityKeyBundleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutPreKeysIdentityKeyMixin","WASmaxOutPreKeysKeyTypeMixin","WASmaxOutPreKeysPreKeyListMixin","WASmaxOutPreKeysRegistrationIDMixin","WASmaxOutPreKeysRequestPaddingMixin","WASmaxOutPreKeysSignedPreKeyMixin","WASmaxOutPreKeysVerifiedNameMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.verifiedNameMixinArgs,c=a.requestPaddingMixinArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutPreKeysRequestPaddingMixin").mergeRequestPaddingMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutPreKeysVerifiedNameMixin").mergeVerifiedNameMixin,d("WASmaxOutPreKeysKeyTypeMixin").mergeKeyTypeMixin(d("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(d("WASmaxOutPreKeysPreKeyListMixin").mergePreKeyListMixin(d("WASmaxOutPreKeysIdentityKeyMixin").mergeIdentityKeyMixin(d("WASmaxOutPreKeysRegistrationIDMixin").mergeRegistrationIDMixin(d("WASmaxJsx").smax("iq",null),a),a),a),a)),b),c);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIdentityKeyBundleMixin=a}),98);
__d("WASmaxOutPreKeysSetRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysIdentityKeyBundleMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutPreKeysIdentityKeyBundleMixin").mergeIdentityKeyBundleMixin(d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"set"})),a);return a}g.makeSetRequest=a}),98);
__d("WASmaxPreKeysSetRPC",["WAComms","WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure","WASmaxInPreKeysSetResponseRequestError","WASmaxInPreKeysSetResponseServerError","WASmaxInPreKeysSetResponseSuccess","WASmaxOutPreKeysSetRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutPreKeysSetRequest").makeSetRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInPreKeysSetResponseSuccess").parseSetResponseSuccess(b,a);if(c.success)return{name:"SetResponseSuccess",value:c.value};var e=d("WASmaxInPreKeysSetResponsePreKeySuccessVnameFailure").parseSetResponsePreKeySuccessVnameFailure(b,a);if(e.success)return{name:"SetResponsePreKeySuccessVnameFailure",value:e.value};var f=d("WASmaxInPreKeysSetResponseRequestError").parseSetResponseRequestError(b,a);if(f.success)return{name:"SetResponseRequestError",value:f.value};b=d("WASmaxInPreKeysSetResponseServerError").parseSetResponseServerError(b,a);if(b.success)return{name:"SetResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Set",{Success:c,PreKeySuccessVnameFailure:e,RequestError:f,ServerError:b}))});return h.apply(this,arguments)}g.sendSetRPC=a}),98);
__d("WAGenerateAndUploadPreKeysProtocol",["WACryptoManager","WAGetKeysForUpload","WAGlobals","WAMakeSignedPreKeyMixin","WAPromiseRetryLoop","WAResultOrError","WARetryUtils","WASmaxPreKeysSetRPC","WATagsLogger","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("WATagsLogger").TAGS(["generateAndUploadPreKeysProtocol"]);function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAGlobals").getWaOneQueue().enqueue(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.cryptoManager;var b=(yield d("WACryptoManager").generatePreKeys(a));if(!b.success)return b;m.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["About to upload pre keys"]))).devConsole("generation "+b.value);return d("WAGetKeysForUpload").getKeysForUpload(a,b.value)});return function(b){return a.apply(this,arguments)}}(),{operationType:"generate_prekeys",flush:!0,afterInit:!0}));a=a.value;var c=a.regInfo,e=a.preKeys;a=a.signedPreKey;var f=babelHelpers["extends"]({registrationElementValue:d("WAWap").BIG_ENDIAN_CONTENT(c.regId),anyElementValue:c.staticKeyPair.publicKey,keyArgs:e.map(o)},d("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(a));c=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"uploadKeys",timer:d("WARetryUtils").fibonacciBackoff(!1),code:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){m.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Attempt to upload keys"])));var b=(yield d("WASmaxPreKeysSetRPC").sendSetRPC(f));switch(b.name){case"SetResponseSuccess":m.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Keys are successfully uploaded"])));a(d("WAResultOrError").makeResult({preKeys:e}));return;case"SetResponseRequestError":m.WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Got Malformed upload keys IQ on upload pre keys attempt"])));a(d("WAResultOrError").makeError("request-error"));return;default:b.name,m.WARN(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Got unexpected error: ",", will retry after backoff"])),b.name)}});function c(b){return a.apply(this,arguments)}return c}()});c.start();return c.promise()});return n.apply(this,arguments)}function o(a){var b={idElementValue:d("WAWap").BIG_ENDIAN_CONTENT(a.id,3)};a={anyElementValue:a.keyPair.publicKey};return{keyIDMixinArgs:b,keyDataMixinArgs:a}}g.generateAndUploadPreKeysProtocol=a}),98);
__d("WAGenerateAndUploadPreKeys",["WABridge","WAGenerateAndUploadPreKeysProtocol","WALoggerTag","WAOdsEnums","WATagsLogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS([c("WALoggerTag").PrekeyGenerateAndUpload,c("WALoggerTag").SignedPrekey]);function a(a,b){a=b.reason;j.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["About to generate and upload pre keys with reason: ",""])),a);return d("WAGenerateAndUploadPreKeysProtocol").generateAndUploadPreKeysProtocol().then(function(a){if(a.success){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PREKEY_UPLOAD,key:"success",amount:a.value.preKeys.length},!0);return}var b=a.error;if(b==="request-error"){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PREKEY_UPLOAD,key:"malformed"},!0);throw c("err")("Malformed upload keys IQ")}b;j.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate and upload prekeys with error ",": ","}"])),b,(b=a.payload)==null?void 0:b.message)})}g.generateAndUploadPreKeys=a}),98);
__d("WAGetMetaApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(a){return a.stores.meta.bulkGet(["certificateChain","deviceId","identityKeyPair","abProps","edgeInfo","clockSkew","authKeyPair"]).then(function(a){var b,c,d,e,f,g,h,i=a[0],j=a[1],k=a[2],l=a[3],m=a[4],n=a[5];a=a[6];return{abProps:l==null||(b=l.value)==null?void 0:b.abProps,authKeyPair:a==null||(c=a.value)==null?void 0:c.authKeyPair,certificateChain:i==null||(d=i.value)==null?void 0:d.certificateChain,clockSkew:n==null||(e=n.value)==null?void 0:e.clockSkew,deviceId:j==null||(f=j.value)==null?void 0:f.deviceId,edgeInfo:m==null||(g=m.value)==null?void 0:g.edgeInfo,identityKeyPair:k==null||(h=k.value)==null?void 0:h.identityKeyPair}})},d("WASignalDB").signalOp("getMeta"))};g.getMeta=a}),98);
__d("WAGetCurrentUserDeviceInfoApi",["WAGetMetaApi","WASignalKeys"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return d("WAGetMetaApi").getMeta().then(function(a){var b=a==null?void 0:a.deviceId;a=a==null?void 0:a.identityKeyPair;if(b==null||a==null)return null;a=d("WASignalKeys").serializePubKey(a);return{deviceId:b,identityKey:a}})};b=function(){return d("WAGetMetaApi").getMeta().then(function(a){return(a==null?void 0:a.deviceId)==null?null:{deviceId:a==null?void 0:a.deviceId}})};g.getCurrentUserDeviceInfo=a;g.getCurrentUserDeviceId=b}),98);
__d("WAGetDeviceIdentityMixin",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null?{deviceIdentityElementValue:a}:null}f.getDeviceIdentityMixin=a}),66);
__d("WAGetLocalPublicPrivateIdentityKeyApi",["WADbSignal","WALogger","WASignalDB","WASignalKeys","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){return d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=(yield a.stores.meta.get(d("WADbSignal").MetaKeysEnum.identityKeyPair));if((a==null||(b=a.value)==null?void 0:b.identityKeyPair)==null){var e="[Remote Presence Error] Identity key pair was null";d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",""])),e);throw c("err")(e)}return d("WASignalKeys").toSerializedKeyPair(a.value.identityKeyPair)});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("getLocalPublicPrivateIdentityKey"))};g.getLocalPublicPrivateIdentityKey=a}),98);
__d("WAGetIdentityKeys",["WAGetLocalPublicPrivateIdentityKeyApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAGetLocalPublicPrivateIdentityKeyApi").getLocalPublicPrivateIdentityKey());var b=a.privateKey;a=a.serializedPubKey;return{identityPrivateKey:b,identityPublicKey:a}});return h.apply(this,arguments)}g.getIdentityKeysInWorker=a}),98);
__d("WAGroupInviteUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toInviteCode=a}),66);
__d("WAGroupParserUtils",["WAGroupInviteUtils","WAJids","WALogger","WAResultOrError","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i={superadmin:"superadmin",admin:"admin",participant:"participant",nonparticipant:"nonparticipant"};function j(a){if(!a.hasAttr("error"))throw c("err")("Expected participant node to have error attr");var b=a.attrInt("error"),e=a.attrUserJid("jid");switch(b){case 401:return{errorCode:b,text:"not-authorized",user:e};case 403:a=a.child("add_request");return{errorCode:b,text:"request-code",code:d("WAGroupInviteUtils").toInviteCode(a.attrString("code")),expiration:a.attrTime("expiration"),user:e};case 404:return{errorCode:b,text:"not-found",user:e};case 406:return{errorCode:b,text:"enterprise-not-allowed",user:e};case 408:return{errorCode:b,text:"temporarily-blocked",user:e};case 409:return{errorCode:b,text:"conflict",user:e};case 500:return{errorCode:b,text:"resource-constraint",user:e};default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["received unknown participant error code: ",""])),b);return{errorCode:-1,text:"unknown",user:e}}}function k(a,b){a.assertTag("participant");var c="participant";switch(b){case"add":case"demote":c="participant";break;case"promote":c="admin";break;case"remove":c="nonparticipant";break}b=a.attrUserJid("jid");if(a.hasAttr("error")){var e=j(a);return d("WAResultOrError").makeError(e)}else{e=a.attrEnumOrDefault("type",i,c);c=a.maybeAttrString("addressable")!=="false";return d("WAResultOrError").makeResult({user:b,type:e,addressable:c})}}function a(a){a.assertTag("group");var b,c=a.attrString("id");c.includes("@")?b=a.attrGroupJid("id"):b=d("WAJids").toGroupJid(c);return{jid:b,creator:a.maybeAttrUserJid("creator")||void 0,creationTs:a.attrTime("creation"),subject:{content:a.maybeAttrString("subject")||void 0,user:a.maybeAttrUserJid("s_o")||void 0,ts:a.hasAttr("s_t")?a.attrTime("s_t"):void 0},description:m(a)||void 0,participantVersion:a.maybeAttrString("p_v_id")||void 0,participants:a.mapChildrenWithTag("participant",function(a){return k(a)}),memberAddMode:l(a)||void 0}}function l(a){if(a.hasChild("member_add_mode")){a=a.child("member_add_mode");if(a.hasContent()){a=a.contentString();if(a==="admin_add"||a==="all_member_add")return a}}return null}function m(a){if(a.hasChild("description")){a=a.child("description");if(a.hasChild("body")){var b=a.child("body");if(b.hasContent())return{id:a.attrString("id"),ts:a.attrTime("t"),content:b.contentString(),user:b.maybeAttrUserJid("participant")||void 0}}}return null}g.PARTICIPANT_TYPES=i;g.parseProtocolGroupParticipantNode=k;g.parseGroupNode=a}),98);
__d("WALoadReceiptApi",["MAWTransactionMode","WADbTransactor","WAMsg","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({receipts:d("MAWTransactionMode").READONLY},"loadReceipt",function(a){return function(b){var c=d("WAMsg").craftWAMsgIdString(b);return a.receipts.get({waMsgId:c}).then(function(a){var c;return a==null?d("WAResultOrError").makeError("missing-receipt"):d("WAResultOrError").makeResult({id:b,permittedIdentitiesPerDevice:(c=a.permittedIdentitiesPerDevice)!=null?c:new Map(),recipientDevices:a.recipientDevices})})}});g.loadReceipt=a}),98);
__d("WAMarkSenderKeyAsSentApi",["WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,c,e){return d("WASignalDB").getDb().runInTransaction(["personalSenderKeyStatuses"],"readwrite",function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=(yield b.stores.personalSenderKeyStatuses.get(a));if(d==null)return;if(d.senderKeyId!==c)return;e.forEach(function(a){d.hasSenderKey.add(a)});yield b.stores.personalSenderKeyStatuses.bulkPut([d])});return function(a){return d.apply(this,arguments)}}(),d("WASignalDB").signalOp("markSenderKeyAsSent"))};g.markSenderKeyAsSent=a}),98);
__d("WASmaxInDevicesNotifyResponseError",["WAResultOrError","WASmaxInDevicesIQErrorResponseMixin","WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInDevicesIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInDevicesRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup").parseRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup:b.value}))}g.parseNotifyResponseError=a}),98);
__d("WASmaxInDevicesNotifyResponseSuccess",["WASmaxInDevicesIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInDevicesIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseNotifyResponseSuccess=a}),98);
__d("WASmaxOutDevicesBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutDevicesNotifyRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutDevicesBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.userJid;a=d("WASmaxJsx").smax("user",{jid:d("WAWap").USER_JID(a)});return a}function a(a){a=a.userArgs;a=d("WASmaxOutDevicesBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"fbid:devices"},d("WASmaxJsx").smax("users",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,25))));return a}g.makeNotifyRequestUsersUser=h;g.makeNotifyRequest=a}),98);
__d("WASmaxDevicesNotifyRPC",["WAComms","WASmaxInDevicesNotifyResponseError","WASmaxInDevicesNotifyResponseSuccess","WASmaxOutDevicesNotifyRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutDevicesNotifyRequest").makeNotifyRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInDevicesNotifyResponseSuccess").parseNotifyResponseSuccess(b,a);if(c.success)return{name:"NotifyResponseSuccess",value:c.value};b=d("WASmaxInDevicesNotifyResponseError").parseNotifyResponseError(b,a);if(b.success)return{name:"NotifyResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Notify",{Success:c,Error:b}))});return h.apply(this,arguments)}g.sendNotifyRPC=a}),98);
__d("WANotifyDeviceChange",["Promise","WAGlobals","WALogger","WAPersistedJobManager","WASmaxDevicesNotifyRPC","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){a=c.users;if(a.size===0)return(i||(i=b("Promise"))).resolve();c=d("WAGlobals").getConfig().maxUsersForNotifyDeviceChange();var e=Array.from(a);a.size>c&&(d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["The maximum number of users that can be notified is ",""])),c),e=e.slice(0,c));return j(e)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxDevicesNotifyRPC").sendNotifyRPC({userArgs:a.map(function(a){return{userJid:a}})}));if(a.name==="NotifyResponseSuccess")return;a.name;a=a.value.errorRetryableIQErrorOrNonRetryableIQErrorRetryableIQErrorMixinGroup;if(a.name==="RetryableIQError"){var b=a.value.backoff;if(b!=null)throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"constant",delay:b},jitter:0});else throw new(d("WAPersistedJobManager").RetryOnBackoff)({algo:{type:"exponential",first:d("WATimeUtils").HOUR_MILLISECONDS/60},jitter:.1})}throw c("err")("Failed with an unexpected error code "+a.value.code)});return k.apply(this,arguments)}g.notifyDeviceChange=a}),98);
__d("WAParseFranking",["WAFranking","WAFrankingTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;if(a==null)return null;b=(b=a.maybeChild("franking_tag"))==null?void 0:b.contentBytes();a=(a=a.maybeChild("reporting_tag"))==null?void 0:a.contentBytes();return{frankingKey:null,frankingTag:b!=null?d("WAFrankingTypes").castToFrankingTag(b):null,reportingTag:a!=null?d("WAFrankingTypes").castToReportingTag(a):null,frankingVersion:d("WAFranking").getFrankingVersion(),reportingContent:null}}g.parseFrankingNode=a}),98);
__d("WAWaterFlow",["$InternalEnum","WAMapWithDefault","WAPREMetrics","WATagsLogger","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r=d("WATagsLogger").TAGS(["WAWaterflow"]),s=b("$InternalEnum").Mirrored(["INIT","ON_GOING","COMPLETED"]),t=function(){function a(a,b,c){this.$1=s.INIT,this.$7=[],this.$9=new(d("WAMapWithDefault").MapWithDefault)(function(){return[]}),this.$5=r.TAGS([a]),this.$8=b,this.$3={},this.$4=new Set(),this.$10=!c,this.$6=d("WATimeUtils").performanceAbsoluteNow()}var b=a.prototype;b.$11=function(){var a=this,b={"int":{},bool:{},string:{},string_array:{}};this.$4.forEach(function(c){var d=a.$3[c];Array.isArray(d)&&(b.string_array[c]=d);typeof d==="boolean"&&(b.bool[c]=d);typeof d==="number"&&(b["int"][c]=d);typeof d==="string"&&(b.string[c]=d)});return b};b.$12=function(a){if(a==null)return;for(var b in a){var c=a[b];c!==this.$3[b]&&(this.$4.add(b),this.$3[b]=c)}};b.$13=function(a,b){this.$6=d("WATimeUtils").performanceAbsoluteNow();this.$12(a);a=this.$11();this.$4.clear();this.$10&&this.$5.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose([" -> Start.",""])),u(this.$3));this.$1=s.ON_GOING;if(this.$8==null)return this;this.$2=d("WAPREMetrics").startMetric(this.$8,a,b);return this};b.startMetric=function(a){return this.$13(a)};b.reStartMetric=function(a,b){return this.$13(b,a)};b.startPoint=function(a,b){var e;if(typeof a!=="string"){this.$5.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Step should be a enum type"])));throw c("err")("Step should be a enum type")}this.$12(b);b=this.$11();(e=this.$2)==null||e.addPoint(a+"_start",b);this.$4.clear();e={step:a,from:d("WATimeUtils").performanceAbsoluteNow()};this.$7.push(e);this.$9.get(a).push(e);this.$10&&this.$5.LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose([""," -> Start.","",""])),a,v(this.$7,this.$6),u(this.$3))};b.endPoint=function(a,b){var e,f=d("WATimeUtils").performanceAbsoluteNow(),g=this.$9.get(a).pop();g==null?this.$5.WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["No start point was found for step: ","."])),a):g.to=f;if(typeof a!=="string"){this.$5.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Step should be a enum type"])));throw c("err")("Step should be a enum type")}this.$12(b);b=this.$11();(e=this.$2)==null||e.addPoint(a+"_end",b);this.$4.clear();this.$10&&this.$5.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose([""," -> Done.;\nTime taken: ",";\nTime from start: ",";","","\n"])),a,w(g!=null?f-g.from:0),w(f-this.$6),v(this.$7,this.$6),u(this.$3))};b.isOnGoing=function(){return this.$1===s.ON_GOING};b.isCompleted=function(){return this.$1===s.COMPLETED};b.annotate=function(a){this.$12(a)};b.reAnnotate=function(a){this.$12(a(this.$3))};b.getAnnotations=function(){return this.$3};b.annotateImmediately=function(a){var b;this.$12(a);a=this.$11();(b=this.$2)==null||b.addAnnotations(a);this.$4.clear()};b.addPoint=function(a,b){var d;if(typeof a!=="string"){this.$5.ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Step should be a enum type"])));throw c("err")("Step should be a enum type")}this.$12(b);b=this.$11();(d=this.$2)==null||d.addPoint(a,b);this.$4.clear()};b.getStartTime=function(){return this.$6};b.log=function(){this.$10&&this.$5.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose([" -> in progress.\nTime passed: "," sec;","","\n"])),(d("WATimeUtils").performanceAbsoluteNow()-this.$6)/1e3,v(this.$7,this.$6),u(this.$3))};b.endSuccess=function(a){var b;this.$12(a);a=this.$11();(b=this.$2)==null||b.endSuccess(a);this.$4.clear();this.$10&&this.$5.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose([" -> Done. Success: true\nTime taken: "," sec;","","\n"])),(d("WATimeUtils").performanceAbsoluteNow()-this.$6)/1e3,v(this.$7,this.$6),u(this.$3));this.$1=s.COMPLETED};b.endFail=function(a,b){var c;this.$12(b);b=this.$11();(c=this.$2)==null||c.endFail(a,b);this.$4.clear();this.$10&&this.$5.LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose([" -> Done. Success: false\nTime taken: "," sec;","","\n"])),(d("WATimeUtils").performanceAbsoluteNow()-this.$6)/1e3,v(this.$7,this.$6),u(this.$3));this.$1=s.COMPLETED};return a}();function a(a){if(a==null)return{};var b={bool:{},"int":{},string:{},string_array:{}};for(var c in a)Array.isArray(a[c])&&(b.string_array[c]=a[c]),typeof a[c]==="number"&&(b["int"][c]=a[c]),typeof a[c]==="boolean"&&(b.bool[c]=a[c]),typeof a[c]==="string"&&(b.string[c]=a[c]);return b}function u(a){a=Object.entries(a).map(function(a){var b=a[0];a=a[1];return b+": "+String(a)});return a.length>0?"\n"+a.join("\n"):""}function v(a,b){a=a.map(function(a){var c=a.step,e=a.from;a=a.to;return typeof c==="string"?c+" => Started after: "+w(e-b)+"; "+(a!=null?"Completed after: "+w(a-e):"In progress: "+w(d("WATimeUtils").performanceAbsoluteNow()-e)):""}).filter(Boolean);return a.length>0?"\n"+a.join("\n"):""}function w(a){return a/1e3+"s"}function e(a,b,c){return new t(a,b,c!=null?c:!1)}g.WAWaterflow=t;g.convertToPREAnnotation=a;g.makeWaterflow=e}),98);
__d("WAQueryGroup",["$InternalEnum","WADeprecatedSendIq","WADeprecatedWapParser","WAGroupParserUtils","WAPREList","WAPREMetrics","WAResultOrError","WAWap","WAWaterFlow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("WADeprecatedWapParser"))("queryAllGroupsResponse",function(a){a.assertTag("iq");return{groups:a.child("groups").mapChildren(d("WAGroupParserUtils").parseGroupNode)}});function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.QUERY_GROUPS);a=(a=d("WAWap")).wap("iq",{id:a.generateId(),to:a.G_US,type:"get",xmlns:"w:g2"},a.wap("participating",null,a.wap("participants",null),a.wap("description",null)));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(!a.success){b.endFail("query_groups_fail");return d("WAResultOrError").makeError(a)}b.endSuccess();return d("WAResultOrError").makeResult(a.result)});return i.apply(this,arguments)}var j=new(c("WADeprecatedWapParser"))("queryAllGroupsResponse",function(a){a.assertTag("iq");return{group:d("WAGroupParserUtils").parseGroupNode(a.child("group"))}}),k=b("$InternalEnum").Mirrored(["IQ_REQUEST"]);function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b!=null?b:"unknown",e=d("WAWaterFlow").makeWaterflow("query-group",d("WAPREList").PRE_METRIC.QUERY_GROUP).startMetric();e.addPoint(k.IQ_REQUEST,{key:c});a=(yield d("WADeprecatedSendIq").deprecatedSendIq(d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").GROUP_JID(a),type:"get",xmlns:"w:g2"},d("WAWap").wap("query",{request:b!=null?d("WAWap").CUSTOM_STRING(b):d("WAWap").DROP_ATTR})),j));if(!a.success){e.endFail("Fail-"+c+"-"+a.errorCode);return d("WAResultOrError").makeError(a)}e.endSuccess();return d("WAResultOrError").makeResult(a.result.group)});return l.apply(this,arguments)}g.queryAllGroups=a;g.parseQueryGroupResponse=j;g.queryGroup=e}),98);
__d("WAQueryGroups",["Promise","WACreateGroup","WAGetDevices","WAPushSafeTypes","WAQueryGroup","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!1);a=d("WAPushSafeTypes").unsafeNotNullable(e);e={groups:[]};if(a.type==="all"){var g=(yield d("WAQueryGroup").queryAllGroups());if(g.success===!1){var i;throw c("err")("Failed to parse queryAllGroup response with error "+JSON.stringify((i=g.error)!=null?i:null))}e=g.value}else{a.type;i=(yield (h||(h=b("Promise"))).all(a.groups.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAQueryGroup").queryGroup(a));if(a.success===!1){var b;throw c("err")("Failed to parse queryGroup response with error "+JSON.stringify((b=a.error)!=null?b:null))}return a.value});return function(b){return a.apply(this,arguments)}}())));e={groups:i}}yield d("WACreateGroup").createGroups(e.groups.map(function(a){return{groupStatus:"queried",groupToCreate:a,serverTs:d("WATimeUtils").unixTime(),extras:void 0,folder:void 0,key:void 0}}));var j=new Set();e.groups.forEach(function(a){return a.participants.forEach(function(a){a.success?j.add(a.value.user):j.add(a.error.user)})});yield d("WAGetDevices").getDevices(null,{users:j,reason:"query-groups",ignoreDhash:f})});return i.apply(this,arguments)}g.queryGroups=a}),98);
__d("WASmaxInPreKeysIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInPreKeysRequestErrorsFetchDigest",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorItemNotFoundMixin","WASmaxInPreKeysIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:b.value});var c=d("WASmaxInPreKeysIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorNotAcceptable","IQErrorItemNotFound","IQErrorFallbackClient"],[b,c,e])}g.parseRequestErrorsFetchDigest=a}),98);
__d("WASmaxInPreKeysFetchDigestResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetchDigest","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrorsFetchDigest").parseRequestErrorsFetchDigest(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrorsFetchDigest:b.value}))}g.parseFetchDigestResponseRequestError=a}),98);
__d("WASmaxInPreKeysFetchDigestResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseFetchDigestResponseServerError=a}),98);
__d("WASmaxInPreKeysKeysHashMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"hash");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,20,20);return!a.success?a:d("WAResultOrError").makeResult({hashElementValue:a.value})}g.parseKeysHashMixin=a}),98);
__d("WASmaxInPreKeysPreKeyIDListMixin",["WAResultOrError","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"id");if(!b.success)return b;b=d("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(a);return!b.success?b:b}function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"list");if(!a.success)return a;a=d("WASmaxParseUtils").mapChildrenWithTag(a.value,"id",0,2e4,h);return!a.success?a:d("WAResultOrError").makeResult({listId:a.value})}g.parsePreKeyIDListListId=h;g.parsePreKeyIDListMixin=a}),98);
__d("WASmaxInPreKeysIdentityDigestBundleMixin",["WAResultOrError","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysKeysHashMixin","WASmaxInPreKeysPreKeyIDListMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(a);if(!b.success)return b;var c=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(a);if(!c.success)return c;var e=d("WASmaxInPreKeysPreKeyIDListMixin").parsePreKeyIDListMixin(a);if(!e.success)return e;var f=d("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(a);if(!f.success)return f;var g=d("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(a);a=d("WASmaxInPreKeysKeysHashMixin").parseKeysHashMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,e.value,f.value,{keyTypeMixin:g.success?g.value:null},a.value))}g.parseIdentityDigestBundleMixin=a}),98);
__d("WASmaxInPreKeysFetchDigestResponseSuccess",["WAResultOrError","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysIdentityDigestBundleMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"digest");if(!c.success)return c;var e=d("WASmaxParseReference").optionalAttrStringFromReference(b,["digest","identity_type"]);if(!e.success)return e;e=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,c.value,"identity_type",e.value);if(!e.success)return e;c=d("WASmaxInPreKeysIdentityDigestBundleMixin").parseIdentityDigestBundleMixin(c.value);if(!c.success)return c;a=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({hasDigestIdentityType:e.value!=null,digestIdentityDigestBundleMixin:c.value},a.value))}g.parseFetchDigestResponseSuccess=a}),98);
__d("WASmaxOutPreKeysFetchDigestRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"get"},d("WASmaxJsx").smax("digest",null)));return a}g.makeFetchDigestRequest=a}),98);
__d("WASmaxPreKeysFetchDigestRPC",["WAComms","WASmaxInPreKeysFetchDigestResponseRequestError","WASmaxInPreKeysFetchDigestResponseServerError","WASmaxInPreKeysFetchDigestResponseSuccess","WASmaxOutPreKeysFetchDigestRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WASmaxOutPreKeysFetchDigestRequest").makeFetchDigestRequest();a=(yield d("WAComms").sendSmaxStanza(b,a));var c=d("WASmaxInPreKeysFetchDigestResponseSuccess").parseFetchDigestResponseSuccess(a,b);if(c.success)return{name:"FetchDigestResponseSuccess",value:c.value};var e=d("WASmaxInPreKeysFetchDigestResponseRequestError").parseFetchDigestResponseRequestError(a,b);if(e.success)return{name:"FetchDigestResponseRequestError",value:e.value};a=d("WASmaxInPreKeysFetchDigestResponseServerError").parseFetchDigestResponseServerError(a,b);if(a.success)return{name:"FetchDigestResponseServerError",value:a.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("FetchDigest",{Success:c,RequestError:e,ServerError:a}))});return h.apply(this,arguments)}g.sendFetchDigestRPC=a}),98);
__d("WARequestPreKeyDigestProtocol",["WABinary","WAConvertRegistrationIdMixin","WAConvertSignedPreKeyMixin","WACryptoDependencies","WACryptoUtils","WAParsableXmlNode","WAResultOrError","WASignalKeys","WASmaxPreKeysFetchDigestRPC","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["requestPreKeyDigestProtocol"]);function a(a){return d("WASmaxPreKeysFetchDigestRPC").sendFetchDigestRPC({withoutRetry:!1}).then(function(b){switch(b.name){case"FetchDigestResponseServerError":var c=b.value.errorServerErrors.name;j.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",": ",""])),b.name,c);return d("WAResultOrError").makeError({type:"server-error",payload:c});case"FetchDigestResponseRequestError":c=b.value.errorRequestErrorsFetchDigest.name;j.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["",": ",""])),b.name,c);return d("WAResultOrError").makeError({type:"request-error",payload:c});default:b.name;c=k(b.value.digestIdentityDigestBundleMixin);return l(c,a).then(function(a){return a==="ok"?d("WAResultOrError").makeResult():d("WAResultOrError").makeError({type:"compare-error",payload:a})})}})}function k(a){var b=d("WAConvertRegistrationIdMixin").registrationIdMixin(a),c=d("WAConvertSignedPreKeyMixin").convertSignedPreKeyMixin(a),e=a.listId.map(function(a){return d("WASignalKeys").castToPreKeyId(d("WAParsableXmlNode").convertBytesToUint(a.elementValue,3))});a=a.hashElementValue;return{regId:b,skeyId:c.id,preKeyIds:e,hash:a}}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.regId!==b.regInfo.regId)return"RegIdMismatch";if(a.skeyId!==b.signedPreKey.id)return"SignedPreKeyIdMismatch";var c=new Map();b.preKeys.forEach(function(a){return c.set(a.id,a)});var e=a.preKeyIds.some(function(a){return!c.has(a)});if(e)return"UnknownPreKey";e=a.preKeyIds.map(function(a){return c.get(a)}).filter(Boolean);b=(yield n(b,e));return!d("WACryptoUtils").uint8ArraysEqual(b,a.hash)?"HashMismatch":"ok"});return m.apply(this,arguments)}function n(a,b){var c=new(d("WABinary").Binary)();c.writeByteArray(a.regInfo.staticKeyPair.publicKey);c.writeByteArray(a.signedPreKey.keyPair.publicKey);c.writeByteArray(a.signedPreKey.signature);b.forEach(function(a){c.writeByteArray(a.keyPair.publicKey)});return d("WACryptoDependencies").getCrypto().subtle.digest("SHA-1",c.readByteArrayView()).then(function(a){return new Uint8Array(a)})}g.requestPreKeyDigestProtocol=a}),98);
__d("WARequestPreKeyDigest",["WABridge","WAGenerateAndUploadPreKeys","WAGetKeysForUpload","WAGlobals","WALogger","WAOdsEnums","WARequestPreKeyDigestProtocol","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a(function(a){a=a.cryptoManager;return d("WAGetKeysForUpload").getKeysForUpload(a)}));a=(yield d("WARequestPreKeyDigestProtocol").requestPreKeyDigestProtocol(a.value));if(a.success===!1){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PREKEY_DIGEST,key:"fail"});if(a.error.type==="compare-error"){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["PreKey digest comparison failed: ",""])),a.error.payload);d("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"prekey digest comparison failed"})["catch"](function(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""])),a)});return}throw c("err")("Error while requesting key digest: "+a.error.type+" "+a.error.payload)}a.success;d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PREKEY_DIGEST,key:"success"})});return k.apply(this,arguments)}function a(a){return j(function(a){return d("WAGlobals").getWaOneQueue().enqueue(a,{operationType:"request_prekey_digest",flush:!1})})}g.requestPreKeyDigestFn=j;g.requestPreKeyDigest=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrors").parseRequestErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrors:b.value}))}g.parseRotateSignedResponseRequestError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseRotateSignedResponseServerError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseRotateSignedResponseSuccess=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseValidationError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(c.value,"text");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(c.value,"code",400,499);if(!f.success)return f;c=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(c.value);if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorText:e.value,errorCode:f.value,errorIdentityKeyMixin:c.value},a.value))}g.parseRotateSignedResponseValidationError=a}),98);
__d("WASmaxOutPreKeysRotateSignedRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysSignedPreKeyMixin"],(function(a,b,c,d,e,f,g){function a(a){a=a.signedPreKeyMixinArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"set"},d("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(d("WASmaxJsx").smax("rotate",null),a)));return a}g.makeRotateSignedRequest=a}),98);
__d("WASmaxPreKeysRotateSignedRPC",["WAComms","WASmaxInPreKeysRotateSignedResponseRequestError","WASmaxInPreKeysRotateSignedResponseServerError","WASmaxInPreKeysRotateSignedResponseSuccess","WASmaxInPreKeysRotateSignedResponseValidationError","WASmaxOutPreKeysRotateSignedRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutPreKeysRotateSignedRequest").makeRotateSignedRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInPreKeysRotateSignedResponseSuccess").parseRotateSignedResponseSuccess(b,a);if(c.success)return{name:"RotateSignedResponseSuccess",value:c.value};var e=d("WASmaxInPreKeysRotateSignedResponseValidationError").parseRotateSignedResponseValidationError(b,a);if(e.success)return{name:"RotateSignedResponseValidationError",value:e.value};var f=d("WASmaxInPreKeysRotateSignedResponseRequestError").parseRotateSignedResponseRequestError(b,a);if(f.success)return{name:"RotateSignedResponseRequestError",value:f.value};b=d("WASmaxInPreKeysRotateSignedResponseServerError").parseRotateSignedResponseServerError(b,a);if(b.success)return{name:"RotateSignedResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RotateSigned",{Success:c,ValidationError:e,RequestError:f,ServerError:b}))});return h.apply(this,arguments)}g.sendRotateSignedRPC=a}),98);
__d("WARotateSignedPreKeyProtocol",["WACryptoManager","WAErrorMessage","WAGlobals","WAHandleFailureUtils","WAMakeSignedPreKeyMixin","WAResultOrError","WASmaxPreKeysRotateSignedRPC","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=d("WATagsLogger").TAGS(["rotateSignedPreKeyProtocol"]);function a(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){n.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start generating skey..."])));try{var a=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WACryptoManager").generateSignedPreKey(a)},{operationType:"generate_signed_prekey",flush:!0,afterInit:!0}));n.LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["generated skey. Start rotating skey..."])));a=(yield d("WASmaxPreKeysRotateSignedRPC").sendRotateSignedRPC({signedPreKeyMixinArgs:d("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(a)}));switch(a.name){case"RotateSignedResponseValidationError":var b=a.value,c=b.errorCode,e=b.errorText;b=b.errorIdentityKeyMixin;n.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["ValidationError: "," ",""])),c,e);return d("WAResultOrError").makeError({type:"validation-error",identity:b.elementValue});case"RotateSignedResponseRequestError":c=a.value.errorRequestErrors.value.code;e=a.value.errorRequestErrors.name;n.ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["RequestError: "," ",""])),c,e);return d("WAResultOrError").makeError({type:"request-error"});case"RotateSignedResponseServerError":b=a.value.errorServerErrors.value.code;c=a.value.errorServerErrors.name;n.ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["ServerError: "," ",""])),b,c);return d("WAResultOrError").makeError({type:"server-error"});default:a.name;n.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["successfully rotated new skey"])));return d("WAResultOrError").makeResult()}}catch(a){e=d("WAErrorMessage").maybeGetMessageFromError(a);if(e.includes("No lastSignedPrekeyId and registration")){yield d("WAHandleFailureUtils").reregisterPhone();return d("WAResultOrError").makeError({type:"no-prekey-reregistered"})}throw a}});return o.apply(this,arguments)}g.rotateSignedPreKeyProtocol=a}),98);
__d("WARotateSignedPreKey",["Promise","WAGenerateAndUploadPreKeys","WALoggerTag","WARotateSignedPreKeyProtocol","WATagsLogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("WATagsLogger").TAGS([c("WALoggerTag").SignedPrekeyRotation,c("WALoggerTag").SignedPrekey]);function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WARotateSignedPreKeyProtocol").rotateSignedPreKeyProtocol());if(a.success||a.error.type==="no-prekey-reregistered")return;if(a.error.type==="validation-error"){l.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Signed prekey failed server validation. need to upload all keys."])));d("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"signed prekey failed server validation"})["catch"](function(a){l.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""])),a)});return(k||(k=b("Promise"))).resolve()}l.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["rotateSignedPreKey failed."])));throw c("err")("rotateSignedPreKey RPC failed: "+a.error.type)});return m.apply(this,arguments)}g.rotateSignedPreKey=a}),98);
__d("WASmaxInMessagePublishAckAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","3");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckAdminEditMixin=a}),98);
__d("WASmaxInMessagePublishAckAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","8");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckAdminRevokeMixin=a}),98);
__d("WASmaxInMessagePublishAckMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","1");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckMessageEditMixin=a}),98);
__d("WASmaxInMessagePublishAckMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","2");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckMessagePinMixin=a}),98);
__d("WASmaxInMessagePublishEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={CBP:"CBP",NBP:"NBP",PMP:"PMP"};b={delivery:"delivery",no_optimization:"no_optimization"};c={"false":"false","true":"true"};e={free_customer_service:"free_customer_service",free_entry_point:"free_entry_point",regular:"regular"};f={lid:"lid",pn:"pn"};var h={validators:[(d=d("WAJids")).validateDeviceJid,d.validateDeviceJid,d.validateUserJid,d.validateUserJid],typeName:"DeviceJid|DeviceJid|UserJid|UserJid"};d={validators:[d.validateUserJid,d.validateUserJid],typeName:"UserJid|UserJid"};g.ENUM_CBP_NBP_PMP=a;g.ENUM_DELIVERY_NOOPTIMIZATION=b;g.ENUM_FALSE_TRUE=c;g.ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR=e;g.ENUM_LID_PN=f;g.DEVICEJID_DEVICEJID_USERJID_USERJID=h;g.USERJID_USERJID=d}),98);
__d("WASmaxInMessagePublishAckPaidConversationMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"delivery_context");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"optimization_goal",d("WASmaxInMessagePublishEnums").ENUM_DELIVERY_NOOPTIMIZATION);return!b.success?b:d("WAResultOrError").makeResult({optimizationGoal:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"source_url");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"referral");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"source_url",i);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"source_type");return!a.success?a:d("WAResultOrError").makeResult({sourceType:a.value,sourceUrl:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"origin");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"referral",j);if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"type");return!a.success?a:d("WAResultOrError").makeResult({type:a.value,referral:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"pricing");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"consumer_country_code");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"business_country_code");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"conversation_status",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"latest_c2b_timestamp",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"analytics_conversation_id");if(!g.success)return g;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"b2c_timestamp",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({consumerCountryCode:b.value,businessCountryCode:c.value,conversationStatus:e.value,latestC2bTimestamp:f.value,analyticsConversationId:g.value,b2cTimestamp:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(b.value,"delivery_context",h);if(!a.success)return a;var c=d("WASmaxParseUtils").optionalChildWithTag(b.value,"origin",k);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(b.value,"pricing",l);if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(b.value,"paid_convo_id");if(!f.success)return f;var g=d("WASmaxParseUtils").attrStringEnum(b.value,"pricing_model",d("WASmaxInMessagePublishEnums").ENUM_CBP_NBP_PMP);if(!g.success)return g;var i=d("WASmaxParseUtils").attrStringEnum(b.value,"billable",d("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"expiration_timestamp",0,void 0);if(!j.success)return j;var m=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"pricing_category");if(!m.success)return m;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"pricing_type",d("WASmaxInMessagePublishEnums").ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR);return!b.success?b:d("WAResultOrError").makeResult({bizPaidConvoId:f.value,bizPricingModel:g.value,bizBillable:i.value,bizExpirationTimestamp:j.value,bizPricingCategory:m.value,bizPricingType:b.value,bizDeliveryContext:a.value,bizOrigin:c.value,bizPricing:e.value})}g.parseAckPaidConversationBizDeliveryContext=h;g.parseAckPaidConversationBizOriginReferralSourceUrl=i;g.parseAckPaidConversationBizOriginReferral=j;g.parseAckPaidConversationBizOrigin=k;g.parseAckPaidConversationBizPricing=l;g.parseAckPaidConversationMixin=a}),98);
__d("WASmaxInMessagePublishAckPaidGroupConversationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"biz");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"pricing");if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"business_country_code");return!b.success?b:d("WAResultOrError").makeResult({bizPricingBusinessCountryCode:b.value})}g.parseAckPaidGroupConversationMixin=a}),98);
__d("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup",["WAResultOrError","WASmaxInMessagePublishAckPaidConversationMixin","WASmaxInMessagePublishAckPaidGroupConversationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessagePublishAckPaidConversationMixin").parseAckPaidConversationMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AckPaidConversation",value:b.value});var c=d("WASmaxInMessagePublishAckPaidGroupConversationMixin").parseAckPaidGroupConversationMixin(a);return c.success?d("WAResultOrError").makeResult({name:"AckPaidGroupConversation",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AckPaidConversation","AckPaidGroupConversation"],[b,c])}g.parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup=a}),98);
__d("WASmaxInMessagePublishAckRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","7");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAckRevokeMixin=a}),98);
__d("WASmaxInMessagePublishServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"franking");if(!a.success)return a;a=d("WASmaxParseUtils").flattenedChildWithTag(a.value,"reporting_tag");if(!a.success)return a;a=d("WASmaxParseUtils").contentBytesRange(a.value,9,128);return!a.success?a:d("WAResultOrError").makeResult({frankingReportingTagElementValue:a.value})}g.parseServerFrankingTagMixin=a}),98);
__d("WASmaxInMessagePublishAckMixin",["WAResultOrError","WASmaxInMessagePublishAckAdminEditMixin","WASmaxInMessagePublishAckAdminRevokeMixin","WASmaxInMessagePublishAckMessageEditMixin","WASmaxInMessagePublishAckMessagePinMixin","WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup","WASmaxInMessagePublishAckRevokeMixin","WASmaxInMessagePublishServerFrankingTagMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"class","message");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var e=d("WASmaxInMessagePublishAckMessageEditMixin").parseAckMessageEditMixin(a),f=d("WASmaxInMessagePublishAckAdminEditMixin").parseAckAdminEditMixin(a),g=d("WASmaxInMessagePublishAckMessagePinMixin").parseAckMessagePinMixin(a),h=d("WASmaxInMessagePublishAckAdminRevokeMixin").parseAckAdminRevokeMixin(a),i=d("WASmaxInMessagePublishAckRevokeMixin").parseAckRevokeMixin(a),j=d("WASmaxInMessagePublishServerFrankingTagMixin").parseServerFrankingTagMixin(a);a=d("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup").parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup(a);return d("WAResultOrError").makeResult({"class":c.value,t:b.value,ackMessageEditMixin:e.success?e.value:null,ackAdminEditMixin:f.success?f.value:null,ackMessagePinMixin:g.success?g.value:null,ackAdminRevokeMixin:h.success?h.value:null,ackRevokeMixin:i.success?i.value:null,serverFrankingTagMixin:j.success?j.value:null,ackPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup:a.success?a.value:null})}g.parseAckMixin=a}),98);
__d("WASmaxInMessagePublishApplicationNegativeAckMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"application_error",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({applicationError:b.value})}g.parseApplicationNegativeAckMixin=a}),98);
__d("WASmaxInMessagePublishMessageNackRetryAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"backoff",0,86400);return!b.success?b:d("WAResultOrError").makeResult({backoff:b.value})}g.parseMessageNackRetryAttributesMixin=a}),98);
__d("WASmaxInMessagePublishNegativeAckMixin",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishApplicationNegativeAckMixin","WASmaxInMessagePublishMessageNackRetryAttributesMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").attrString(a,"error");if(!c.success)return c;b=d("WASmaxInMessagePublishAckMixin").parseAckMixin(a,b);if(!b.success)return b;var e=d("WASmaxInMessagePublishApplicationNegativeAckMixin").parseApplicationNegativeAckMixin(a);a=d("WASmaxInMessagePublishMessageNackRetryAttributesMixin").parseMessageNackRetryAttributesMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({error:c.value},b.value,{applicationNegativeAckMixin:e.success?e.value:null,messageNackRetryAttributesMixin:a.success?a.value:null}))}g.parseNegativeAckMixin=a}),98);
__d("WASmaxInMessagePublishIndividualResponseNegative",["WAResultOrError","WASmaxInMessagePublishNegativeAckMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"recipient");if(!c.success)return c;a=d("WASmaxInMessagePublishNegativeAckMixin").parseNegativeAckMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({recipient:c.value},a.value))}g.parseIndividualResponseNegative=a}),98);
__d("WASmaxInMessagePublishAckRcatMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"rcat");if(!b.success)return b;a=d("WASmaxParseUtils").contentBytes(b.value);return!a.success?a:d("WAResultOrError").makeResult({rcatElementValue:a.value})}g.parseAckRcatMixin=a}),98);
__d("WASmaxInMessagePublishDeviceListStaleMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"phash");return!b.success?b:d("WAResultOrError").makeResult({phash:b.value})}g.parseDeviceListStaleMixin=a}),98);
__d("WASmaxInMessagePublishRefreshLIDMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"refresh_lid",d("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);return!b.success?b:d("WAResultOrError").makeResult({refreshLid:b.value})}g.parseRefreshLIDMixin=a}),98);
__d("WASmaxInMessagePublishIndividualResponseSuccess",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishAckRcatMixin","WASmaxInMessagePublishDeviceListStaleMixin","WASmaxInMessagePublishEnums","WASmaxInMessagePublishRefreshLIDMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"recipient");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrJidEnum,a,"participant",d("WASmaxInMessagePublishEnums").USERJID_USERJID);if(!e.success)return e;b=d("WASmaxInMessagePublishAckMixin").parseAckMixin(a,b);if(!b.success)return b;var f=d("WASmaxInMessagePublishDeviceListStaleMixin").parseDeviceListStaleMixin(a),g=d("WASmaxInMessagePublishRefreshLIDMixin").parseRefreshLIDMixin(a);a=d("WASmaxInMessagePublishAckRcatMixin").parseAckRcatMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({recipient:c.value,participant:e.value},b.value,{deviceListStaleMixin:f.success?f.value:null,refreshLIDMixin:g.success?g.value:null,ackRcatMixin:a.success?a.value:null}))}g.parseIndividualResponseSuccess=a}),98);
__d("WASmaxOutMessagePublishAppdataMetaAttributeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaAppdata;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{appdata:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAppdataMetaAttributeMixin=a}),98);
__d("WASmaxOutMessagePublishAutomatedMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("automated",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAutomatedMixin=a}),98);
__d("WASmaxOutMessagePublishAuthMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.authVerificationTimestamp,c=a.authDisableIosAutofill;a=a.authEnableRiskCheck;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("auth",{verification_timestamp:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,b),disable_ios_autofill:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c),enable_risk_check:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAuthMixin=a}),98);
__d("WASmaxOutMessagePublishBizAcceptTsMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizAcceptTs;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",{accept_ts:d("WAWap").INT(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizAcceptTsMixin=a}),98);
__d("WASmaxOutMessagePublishBizAutoResponseMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizAutoResponse;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",{auto_response:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizAutoResponseMixin=a}),98);
__d("WASmaxOutMessagePublishBizCampaignMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.bizCampaignId;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",{campaign_id:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizCampaignMixin=a}),98);
__d("WASmaxOutMessagePublishBizEngagementDataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.engagementConversationState;a=a.engagementCustomerServiceState;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("engagement",{conversation_state:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),customer_service_state:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizEngagementDataMixin=a}),98);
__d("WASmaxOutMessagePublishBizMetadataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.metadataAppOwner,f=a.metadataCsidBm,g=a.metadataPaymentBm,h=a.metadataCustomerCategory;a=a.metadataDidBepRun;e=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("metadata",{app_owner:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,e),csid_bm:b.OPTIONAL(c.CUSTOM_STRING,f),payment_bm:b.OPTIONAL(c.CUSTOM_STRING,g),customer_category:b.OPTIONAL(c.CUSTOM_STRING,h),did_bep_run:b.OPTIONAL(c.CUSTOM_STRING,a)})));return e}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizMetadataMixin=a}),98);
__d("WASmaxOutMessagePublishBizPricingDataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.pricingConsumerCountryCode;a=a.pricingBusinessCountryCode;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("pricing",{consumer_country_code:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),business_country_code:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizPricingDataMixin=a}),98);
__d("WASmaxOutMessagePublishBizRolesMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.bizHostStorage,c=a.bizActualActors;a=a.bizPrivacyModeTs;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",{host_storage:d("WAWap").INT(b),actual_actors:d("WAWap").INT(c),privacy_mode_ts:d("WAWap").INT(a)}));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizRolesMixin=a}),98);
__d("WASmaxMixinGroupExhaustiveError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="SmaxMixinGroupExhaustiveError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxMixinGroupExhaustiveError=a}),66);
__d("WASmaxOutMessagePublishButtonsMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("buttons",null)));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeButtonsMixin=a}),98);
__d("WASmaxOutMessagePublishExtensionsMetadataMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.capabilityArgs;a=d("WASmaxJsx").smax("capabilities",null,d("WASmaxChildren").REPEATED_CHILD(i,a,1,50));return a}function i(a){a=a.capabilityName;a=d("WASmaxJsx").smax("capability",{name:d("WAWap").CUSTOM_STRING(a)});return a}function j(a){var b=a.capabilitiesArgs,c=a.extensionsMetadataWellVersion,e=a.extensionsMetadataDataApiVersion;a=a.extensionsMetadataFlowMessageVersion;c=d("WASmaxJsx").smax("native_flow",null,d("WASmaxJsx").smax("extensions_metadata",{well_version:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,c),data_api_version:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,e),flow_message_version:d("WAWap").INT(a)},d("WASmaxChildren").OPTIONAL_CHILD(h,b)));return c}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeExtensionsMetadataExtensionsMetadataCapabilities=h;g.makeExtensionsMetadataExtensionsMetadataCapabilitiesCapability=i;g.mergeExtensionsMetadataMixin=a}),98);
__d("WASmaxOutMessagePublishMixedMetadataMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.paymentsMetadataVersion;a=d("WASmaxJsx").smax("native_flow",null,d("WASmaxJsx").smax("mixed_metadata",null,d("WASmaxJsx").smax("payments_metadata",{version:d("WAWap").INT(a)})));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMixedMetadataMixin=a}),98);
__d("WASmaxOutMessagePublishNativeFlowMessageTypeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishExtensionsMetadataMixin","WASmaxOutMessagePublishMixedMetadataMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.nativeFlowName,c=a.nativeFlowV,e=a.extensionsMetadataMixinArgs;a=a.mixedMetadataMixinArgs;b=d("WASmaxJsx").smax("interactive",{type:"native_flow"},d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishMixedMetadataMixin").mergeMixedMetadataMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishExtensionsMetadataMixin").mergeExtensionsMetadataMixin,d("WASmaxJsx").smax("native_flow",{name:d("WAWap").CUSTOM_STRING(b),v:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,c)}),e),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNativeFlowMessageTypeMixin=a}),98);
__d("WASmaxOutMessagePublishInteractiveMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishNativeFlowMessageTypeMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.hasInteractiveV1;a=a.nativeFlowMessageTypeMixinArgs;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxOutMessagePublishNativeFlowMessageTypeMixin").mergeNativeFlowMessageTypeMixin(d("WASmaxJsx").smax("interactive",{v:d("WASmaxAttrs").OPTIONAL_LITERAL("1",b)}),a)));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInteractiveMixin=a}),98);
__d("WASmaxOutMessagePublishNativeFlowMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.bizNativeFlowName;a=a.bizNativeFlowVersion;b=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",{native_flow_name:d("WAWap").CUSTOM_STRING(b),native_flow_version:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,a)}));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNativeFlowMixin=a}),98);
__d("WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishButtonsMixin","WASmaxOutMessagePublishInteractiveMixin","WASmaxOutMessagePublishNativeFlowMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isButtons)return d("WASmaxOutMessagePublishButtonsMixin").mergeButtonsMixin(a);if(b.nativeFlow)return d("WASmaxOutMessagePublishNativeFlowMixin").mergeNativeFlowMixin(a,b.nativeFlow);if(b.interactive)return d("WASmaxOutMessagePublishInteractiveMixin").mergeInteractiveMixin(a,b.interactive);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeButtonsOrNativeFlowOrInteractiveMixinGroup=a}),98);
__d("WASmaxOutMessagePublishConversionRecipientStatusMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.conversionRecipientStatus;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("conversion",{recipient_status:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeConversionRecipientStatusMixin=a}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.ctwaAttributionElementValue;a=d("WASmaxJsx").smax("ctwa_attribution",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClickToWhatsAppAttributionMixin=a}),98);
__d("WASmaxOutMessagePublishCtwaAttributionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppAttributionMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin").mergeClickToWhatsAppAttributionMixin(d("WASmaxJsx").smax("ctwa_attribution",null),a);return a}function i(a){a=a.ctwaAttributionArgs;a=d("WASmaxJsx").smax("message",null,d("WASmaxChildren").OPTIONAL_CHILD(h,a));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeCtwaAttributionCtwaAttribution=h;g.mergeCtwaAttributionMixin=a}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppTypeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.sourceUrlElementValue;a=d("WASmaxJsx").smax("source_url",null,a);return a}function i(a){var b,c,e=a.sourceUrlArgs,f=a.ctwaConversionSource,g=a.ctwaConversionData,i=a.ctwaSourceType,j=a.ctwaEntryPointConversionSource,k=a.ctwaEntryPointConversionApp;a=a.ctwaSignals;f=d("WASmaxJsx").smax("ctwa",{conversion_source:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,f),conversion_data:b.OPTIONAL(c.CUSTOM_STRING,g),source_type:b.OPTIONAL(c.CUSTOM_STRING,i),entry_point_conversion_source:b.OPTIONAL(c.CUSTOM_STRING,j),entry_point_conversion_app:b.OPTIONAL(c.CUSTOM_STRING,k),signals:b.OPTIONAL(c.CUSTOM_STRING,a)},d("WASmaxChildren").OPTIONAL_CHILD(h,e));return f}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeClickToWhatsAppTypeSourceUrl=h;g.mergeClickToWhatsAppTypeMixin=a}),98);
__d("WASmaxOutMessagePublishCtwaConversionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppTypeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishClickToWhatsAppTypeMixin").mergeClickToWhatsAppTypeMixin(d("WASmaxJsx").smax("ctwa",null),a);return a}function i(a){a=a.ctwaArgs;a=d("WASmaxJsx").smax("message",null,d("WASmaxChildren").OPTIONAL_CHILD(h,a));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeCtwaConversionCtwa=h;g.mergeCtwaConversionMixin=a}),98);
__d("WASmaxOutMessagePublishDeliveryContextMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.deliveryContextHsmMaxBid,f=a.deliveryContextOptimizationGoal,g=a.deliveryContextTemplateId,h=a.deliveryContextCampaignId,i=a.deliveryContextSourceType,j=a.deliveryContextTierType,k=a.deliveryContextDeliveryType,l=a.deliveryContextClientToken,m=a.deliveryContextPrice,n=a.deliveryContextWabaId,o=a.deliveryContextQualityFlag,p=a.deliveryContextIsZeroRatedTemplate,q=a.deliveryContextPartnerId,r=a.deliveryContextAppId,s=a.deliveryContextVertical,t=a.deliveryContextBmMessageLimitStatus;a=a.deliveryContextShouldBypassIntegrityPhoneLimit;e=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("delivery_context",{hsm_max_bid:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).INT,e),optimization_goal:b.OPTIONAL(c.CUSTOM_STRING,f),template_id:b.OPTIONAL(c.CUSTOM_STRING,g),campaign_id:b.OPTIONAL(c.CUSTOM_STRING,h),source_type:b.OPTIONAL(c.CUSTOM_STRING,i),tier_type:b.OPTIONAL(c.CUSTOM_STRING,j),delivery_type:b.OPTIONAL(c.CUSTOM_STRING,k),client_token:b.OPTIONAL(c.CUSTOM_STRING,l),price:b.OPTIONAL(c.INT,m),waba_id:b.OPTIONAL(c.CUSTOM_STRING,n),quality_flag:b.OPTIONAL(c.CUSTOM_STRING,o),is_zero_rated_template:b.OPTIONAL(c.CUSTOM_STRING,p),partner_id:b.OPTIONAL(c.CUSTOM_STRING,q),app_id:b.OPTIONAL(c.CUSTOM_STRING,r),vertical:b.OPTIONAL(c.INT,s),bm_message_limit_status:b.OPTIONAL(c.CUSTOM_STRING,t),should_bypass_integrity_phone_limit:b.OPTIONAL(c.CUSTOM_STRING,a)})));return e}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeDeliveryContextMixin=a}),98);
__d("WASmaxOutMessagePublishCapabilitiesMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasFeatureV1;a=d("WASmaxJsx").smax("feature",{name:"full_catalog",v:d("WASmaxAttrs").OPTIONAL_LITERAL("1",a)});return a}function i(a){a=a.featureArgs;a=d("WASmaxJsx").smax("hsm",null,d("WASmaxJsx").smax("capabilities",null,d("WASmaxChildren").OPTIONAL_CHILD(h,a)));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeCapabilitiesCapabilitiesFeature=h;g.mergeCapabilitiesMixin=a}),98);
__d("WASmaxOutMessagePublishHSMReviewMetadataMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c,e=a.anyCategory,f=a.anyTag,g=a.anyId,h=a.anySubTag,i=a.anyLibraryTemplateId;a=a.anyIsTemplateFromLibraryEdited;e=d("WASmaxJsx").smax("smax$any",{category:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,e),tag:b.OPTIONAL(c.CUSTOM_STRING,f),id:b.OPTIONAL(c.CUSTOM_STRING,g),sub_tag:b.OPTIONAL(c.CUSTOM_STRING,h),library_template_id:b.OPTIONAL(c.CUSTOM_STRING,i),is_template_from_library_edited:b.OPTIONAL(c.CUSTOM_STRING,a)});return e}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHSMReviewMetadataMixin=a}),98);
__d("WASmaxOutMessagePublishQualityTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){var b=a.hasQualityTokenV1;a=a.qualityTokenElementValue;b=d("WASmaxJsx").smax("hsm",null,d("WASmaxJsx").smax("quality_token",{v:d("WASmaxAttrs").OPTIONAL_LITERAL("1",b)},a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeQualityTokenMixin=a}),98);
__d("WASmaxOutMessagePublishHsmMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishCapabilitiesMixin","WASmaxOutMessagePublishHSMReviewMetadataMixin","WASmaxOutMessagePublishQualityTokenMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.messageTtl,e=a.hasHsmV1,f=a.hasHsmButtons1,g=a.hsmObjective,h=a.hSMReviewMetadataMixinArgs,i=a.capabilitiesMixinArgs;a=a.qualityTokenMixinArgs;c=d("WASmaxJsx").smax("message",{ttl:(b=d("WASmaxAttrs")).OPTIONAL(d("WAWap").INT,c)},d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishQualityTokenMixin").mergeQualityTokenMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishCapabilitiesMixin").mergeCapabilitiesMixin,d("WASmaxOutMessagePublishHSMReviewMetadataMixin").mergeHSMReviewMetadataMixin(d("WASmaxJsx").smax("hsm",{v:b.OPTIONAL_LITERAL("1",e),buttons:b.OPTIONAL_LITERAL("1",f),objective:b.OPTIONAL(d("WAWap").CUSTOM_STRING,g)}),h),i),a));return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHsmMixin=a}),98);
__d("WASmaxOutMessagePublishQualityControlMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.decisionSourceValue;a=d("WASmaxJsx").smax("decision_source",{value:d("WAWap").CUSTOM_STRING(a)});return a}function i(a){var b=a.decisionSourceArgs,c=a.qualityControlSourceType;a=a.qualityControlDecisionId;c=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("quality_control",{source_type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c),decision_id:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)},d("WASmaxChildren").REPEATED_CHILD(h,b,0,Infinity))));return c}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeQualityControlBizQualityControlDecisionSource=h;g.mergeQualityControlMixin=a}),98);
__d("WASmaxOutMessagePublishBizMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAuthMixin","WASmaxOutMessagePublishBizAcceptTsMixin","WASmaxOutMessagePublishBizAutoResponseMixin","WASmaxOutMessagePublishBizCampaignMixin","WASmaxOutMessagePublishBizEngagementDataMixin","WASmaxOutMessagePublishBizMetadataMixin","WASmaxOutMessagePublishBizPricingDataMixin","WASmaxOutMessagePublishBizRolesMixin","WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup","WASmaxOutMessagePublishConversionRecipientStatusMixin","WASmaxOutMessagePublishCtwaAttributionMixin","WASmaxOutMessagePublishCtwaConversionMixin","WASmaxOutMessagePublishDeliveryContextMixin","WASmaxOutMessagePublishHsmMixin","WASmaxOutMessagePublishQualityControlMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.hsmMixinArgs,e=a.bizRolesMixinArgs,f=a.bizAutoResponseMixinArgs,g=a.bizAcceptTsMixinArgs,h=a.bizCampaignMixinArgs,i=a.deliveryContextMixinArgs,j=a.qualityControlMixinArgs,k=a.authMixinArgs,l=a.conversionRecipientStatusMixinArgs,m=a.ctwaConversionMixinArgs,n=a.bizMetadataMixinArgs,o=a.ctwaAttributionMixinArgs,p=a.bizEngagementDataMixinArgs,q=a.bizPricingDataMixinArgs;a=a.buttonsOrNativeFlowOrInteractiveMixinGroupArgs;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutMessagePublishButtonsOrNativeFlowOrInteractiveMixinGroup").mergeButtonsOrNativeFlowOrInteractiveMixinGroup,b.optionalMerge(d("WASmaxOutMessagePublishBizPricingDataMixin").mergeBizPricingDataMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizEngagementDataMixin").mergeBizEngagementDataMixin,b.optionalMerge(d("WASmaxOutMessagePublishCtwaAttributionMixin").mergeCtwaAttributionMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizMetadataMixin").mergeBizMetadataMixin,b.optionalMerge(d("WASmaxOutMessagePublishCtwaConversionMixin").mergeCtwaConversionMixin,b.optionalMerge(d("WASmaxOutMessagePublishConversionRecipientStatusMixin").mergeConversionRecipientStatusMixin,b.optionalMerge(d("WASmaxOutMessagePublishAuthMixin").mergeAuthMixin,b.optionalMerge(d("WASmaxOutMessagePublishQualityControlMixin").mergeQualityControlMixin,b.optionalMerge(d("WASmaxOutMessagePublishDeliveryContextMixin").mergeDeliveryContextMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizCampaignMixin").mergeBizCampaignMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizAcceptTsMixin").mergeBizAcceptTsMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizAutoResponseMixin").mergeBizAutoResponseMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizRolesMixin").mergeBizRolesMixin,b.optionalMerge(d("WASmaxOutMessagePublishHsmMixin").mergeHsmMixin,d("WASmaxJsx").smax("message",null),c),e),f),g),h),i),j),k),l),m),n),o),p),q),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBizMixin=a}),98);
__d("WASmaxOutMessagePublishClientFrankingTagMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.frankingTagElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("franking",null,d("WASmaxJsx").smax("franking_tag",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientFrankingTagMixin=a}),98);
__d("WASmaxOutMessagePublishClientReportingTokenMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.reportingTokenV;a=a.reportingTokenElementValue;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("reporting",null,d("WASmaxJsx").smax("reporting_token",{v:d("WAWap").INT(b)},a)));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientReportingTokenMixin=a}),98);
__d("WASmaxOutMessagePublishDeviceIdentityMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceIdentityElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("device-identity",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeDeviceIdentityMixin=a}),98);
__d("WASmaxOutMessagePublishInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.testConfig;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("test",{config:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInternalTestMixin=a}),98);
__d("WASmaxOutMessagePublishLIDSessionDeprecationMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaDeprecatedLidSession;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{deprecated_lid_session:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeLIDSessionDeprecationMixin=a}),98);
__d("WASmaxOutMessagePublishMessageAssociationTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaMessageAssociationType;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{message_association_type:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageAssociationTypeMixin=a}),98);
__d("WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("meta",{"decrypt-fail":"hide"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMetaHideDecryptionPlaceholderMixin=a}),98);
__d("WASmaxOutMessagePublishMulticastMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("multicast",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMulticastMixin=a}),98);
__d("WASmaxOutMessagePublishNoExtraFanoutMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{device_fanout:"false"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNoExtraFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishAnonPaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.taPadElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("ta_pad",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAnonPaddingMixin=a}),98);
__d("WASmaxOutMessagePublishWireSizePaddingMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.paddingElementValue;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("padding",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeWireSizePaddingMixin=a}),98);
__d("WASmaxOutMessagePublishPaddingMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAnonPaddingMixin","WASmaxOutMessagePublishWireSizePaddingMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.anonPaddingMixinArgs;a=a.wireSizePaddingMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishWireSizePaddingMixin").mergeWireSizePaddingMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishAnonPaddingMixin").mergeAnonPaddingMixin,d("WASmaxJsx").smax("message",null),b),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePaddingMixin=a}),98);
__d("WASmaxOutMessagePublishPreFilledNumberMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("url_number",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePreFilledNumberMixin=a}),98);
__d("WASmaxOutMessagePublishPreFilledTextMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("url_text",null));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePreFilledTextMixin=a}),98);
__d("WASmaxOutMessagePublishSenderIntentMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{sender_intent:"hosted"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSenderIntentMixin=a}),98);
__d("WASmaxOutMessagePublishRequestIDMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestIdElementValue;a=d("WASmaxJsx").smax("trace",null,d("WASmaxJsx").smax("request_id",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRequestIDMixin=a}),98);
__d("WASmaxOutMessagePublishTraceIDMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.edgeIdElementValue;a=d("WASmaxJsx").smax("edge_id",null,a);return a}function i(a){var b=a.deviceArgs,c=a.correlationIdType;a=a.idElementValue;c=d("WASmaxJsx").smax("correlation_id",{type:d("WAWap").CUSTOM_STRING(c)},d("WASmaxJsx").smax("id",null,a),d("WASmaxChildren").OPTIONAL_CHILD(k,b));return c}function j(a){a=a.observabilityFlagsId;a=d("WASmaxJsx").smax("observability_flags",{id:d("WAWap").INT(a)});return a}function k(a){a=a.deviceId;a=d("WASmaxJsx").smax("device",{id:d("WAWap").INT(a)});return a}function l(a){var b=a.edgeIdArgs,c=a.correlationIdArgs,e=a.observabilityFlagsArgs;a=a.traceIdElementValue;a=d("WASmaxJsx").smax("trace",null,[d("WASmaxJsx").smax("trace_id",null,a),d("WASmaxChildren").OPTIONAL_CHILD(h,b)].concat(d("WASmaxChildren").REPEATED_CHILD(i,c,0,10),[d("WASmaxChildren").OPTIONAL_CHILD(j,e)]));return a}function a(a,b){b=l(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeTraceIDEdgeId=h;g.makeTraceIDCorrelationId=i;g.makeTraceIDObservabilityFlags=j;g.makeTraceIDCorrelationIdDevice=k;g.mergeTraceIDMixin=a}),98);
__d("WASmaxOutMessagePublishRequestOrTraceIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishRequestIDMixin","WASmaxOutMessagePublishTraceIDMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.requestID)return d("WASmaxOutMessagePublishRequestIDMixin").mergeRequestIDMixin(a,b.requestID);if(b.traceID)return d("WASmaxOutMessagePublishTraceIDMixin").mergeTraceIDMixin(a,b.traceID);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeRequestOrTraceIDMixinGroup=a}),98);
__d("WASmaxOutMessagePublishTraceContextMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishRequestOrTraceIDMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestOrTraceIDMixinGroupArgs;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutMessagePublishRequestOrTraceIDMixinGroup").mergeRequestOrTraceIDMixinGroup(d("WASmaxJsx").smax("trace",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTraceContextMixin=a}),98);
__d("WASmaxOutMessagePublishVerifiedNameNameMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageVerifiedName;a=d("WASmaxJsx").smax("message",{verified_name:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeVerifiedNameNameMixin=a}),98);
__d("WASmaxOutMessagePublishWebDriverConfigMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaWebdriverConfig;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{webdriver_config:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeWebDriverConfigMixin=a}),98);
__d("WASmaxOutMessagePublishBaseMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAutomatedMixin","WASmaxOutMessagePublishBizMixin","WASmaxOutMessagePublishClientFrankingTagMixin","WASmaxOutMessagePublishClientReportingTokenMixin","WASmaxOutMessagePublishDeviceIdentityMixin","WASmaxOutMessagePublishInternalTestMixin","WASmaxOutMessagePublishLIDSessionDeprecationMixin","WASmaxOutMessagePublishMessageAssociationTypeMixin","WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin","WASmaxOutMessagePublishMulticastMixin","WASmaxOutMessagePublishNoExtraFanoutMixin","WASmaxOutMessagePublishPaddingMixin","WASmaxOutMessagePublishPreFilledNumberMixin","WASmaxOutMessagePublishPreFilledTextMixin","WASmaxOutMessagePublishSenderIntentMixin","WASmaxOutMessagePublishTraceContextMixin","WASmaxOutMessagePublishVerifiedNameNameMixin","WASmaxOutMessagePublishWebDriverConfigMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.deviceIdentityMixinArgs,e=a.hasNoExtraFanout,f=a.hasMulticast,g=a.hasPreFilledText,h=a.hasPreFilledNumber,i=a.hasAutomated,j=a.bizMixinArgs,k=a.verifiedNameNameMixinArgs,l=a.clientFrankingTagMixinArgs,m=a.clientReportingTokenMixinArgs,n=a.internalTestMixinArgs,o=a.hasMetaHideDecryptionPlaceholder,p=a.traceContextMixinArgs,q=a.hasSenderIntent,r=a.lIDSessionDeprecationMixinArgs,s=a.paddingMixinArgs,t=a.webDriverConfigMixinArgs;a=a.messageAssociationTypeMixinArgs;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutMessagePublishMessageAssociationTypeMixin").mergeMessageAssociationTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishWebDriverConfigMixin").mergeWebDriverConfigMixin,b.optionalMerge(d("WASmaxOutMessagePublishPaddingMixin").mergePaddingMixin,b.optionalMerge(d("WASmaxOutMessagePublishLIDSessionDeprecationMixin").mergeLIDSessionDeprecationMixin,b.optionalMerge(d("WASmaxOutMessagePublishSenderIntentMixin").mergeSenderIntentMixin,b.optionalMerge(d("WASmaxOutMessagePublishTraceContextMixin").mergeTraceContextMixin,b.optionalMerge(d("WASmaxOutMessagePublishMetaHideDecryptionPlaceholderMixin").mergeMetaHideDecryptionPlaceholderMixin,b.optionalMerge(d("WASmaxOutMessagePublishInternalTestMixin").mergeInternalTestMixin,b.optionalMerge(d("WASmaxOutMessagePublishClientReportingTokenMixin").mergeClientReportingTokenMixin,b.optionalMerge(d("WASmaxOutMessagePublishClientFrankingTagMixin").mergeClientFrankingTagMixin,b.optionalMerge(d("WASmaxOutMessagePublishVerifiedNameNameMixin").mergeVerifiedNameNameMixin,b.optionalMerge(d("WASmaxOutMessagePublishBizMixin").mergeBizMixin,b.optionalMerge(d("WASmaxOutMessagePublishAutomatedMixin").mergeAutomatedMixin,b.optionalMerge(d("WASmaxOutMessagePublishPreFilledNumberMixin").mergePreFilledNumberMixin,b.optionalMerge(d("WASmaxOutMessagePublishPreFilledTextMixin").mergePreFilledTextMixin,b.optionalMerge(d("WASmaxOutMessagePublishMulticastMixin").mergeMulticastMixin,b.optionalMerge(d("WASmaxOutMessagePublishNoExtraFanoutMixin").mergeNoExtraFanoutMixin,b.optionalMerge(d("WASmaxOutMessagePublishDeviceIdentityMixin").mergeDeviceIdentityMixin,d("WASmaxJsx").smax("message",null),c),e),f),g),h),i),j),k),l),m),n),o),p),q),r),s),t),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseMixin=a}),98);
__d("WASmaxOutMessagePublishGroupInviteTargetMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaGroupInvite;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{group_invite:d("WAWap").GROUP_JID(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGroupInviteTargetMixin=a}),98);
__d("WASmaxOutMessagePublishBotFeedbackMessageTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("bot",{type:"feedback"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotFeedbackMessageTypeMixin=a}),98);
__d("WASmaxOutMessagePublishEncRetryMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encCount;a=d("WASmaxJsx").smax("enc",{count:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncRetryMixin=a}),98);
__d("WASmaxOutMessagePublishEncPayloadMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.encElementValue;a=d("WASmaxJsx").smax("enc",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncPayloadMixin=a}),98);
__d("WASmaxOutMessagePublishEncTypeIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncPayloadMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encType;b=d("WASmaxOutMessagePublishEncPayloadMixin").mergeEncPayloadMixin(d("WASmaxJsx").smax("enc",{type:d("WAWap").CUSTOM_STRING(b)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncTypeIndividualMixin=a}),98);
__d("WASmaxOutMessagePublishEncVersion2Mixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("enc",{v:"2"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncVersion2Mixin=a}),98);
__d("WASmaxOutMessagePublishEncVersionFutureproofMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encV;a=d("WASmaxJsx").smax("enc",{v:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncVersionFutureproofMixin=a}),98);
__d("WASmaxOutMessagePublishEncVersionBot",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncVersion2Mixin","WASmaxOutMessagePublishEncVersionFutureproofMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isEncVersion2)return d("WASmaxOutMessagePublishEncVersion2Mixin").mergeEncVersion2Mixin(a);if(b.encVersionFutureproof)return d("WASmaxOutMessagePublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(a,b.encVersionFutureproof);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeEncVersionBot=a}),98);
__d("WASmaxOutMessagePublishMediaTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encMediatype;a=d("WASmaxJsx").smax("enc",{mediatype:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMediaTypeMixin=a}),98);
__d("WASmaxOutMessagePublishBotRequestMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncRetryMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersionBot","WASmaxOutMessagePublishMediaTypeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid,c=a.encRetryMixinArgs,e=a.encTypeIndividualMixinArgs,f=a.mediaTypeMixinArgs;a=a.encVersionBotArgs;b=d("WASmaxJsx").smax("to",{jid:d("WAWap").JID(b)},d("WASmaxOutMessagePublishEncVersionBot").mergeEncVersionBot(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishMediaTypeMixin").mergeMediaTypeMixin,d("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishEncRetryMixin").mergeEncRetryMixin,d("WASmaxJsx").smax("enc",null),c),e),f),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotRequestMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"media"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeMediaMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"text"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeTextMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishContentTypeTextMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(a);if(b.isContentTypeMedia)return d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeTextOrMediaMixinGroup=a}),98);
__d("WASmaxOutMessagePublishBotMetricsEntryPointMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaOrigin;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{origin:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotMetricsEntryPointMixin=a}),98);
__d("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botLocalAutomatedType;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("bot",{local_automated_type:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotLocalAutomatedTypeMixin=a}),98);
__d("WASmaxOutMessagePublishBotMessageTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botType;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("bot",{type:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotMessageTypeMixin=a}),98);
__d("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaThreadOrigin;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{thread_origin:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotMetricsThreadEntryPointMixin=a}),98);
__d("WASmaxOutMessagePublishBotPersonaTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botPersonaType;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("bot",{persona_type:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotPersonaTypeMixin=a}),98);
__d("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botFeedbackRequested;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("bot",{feedback_requested:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBusinessBotMessageFeedbackRequestedMixin=a}),98);
__d("WASmaxOutMessagePublishBusinessBotMessageMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botBizBot;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("bot",{biz_bot:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBusinessBotMessageMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeEventMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaEventType;a=d("WASmaxJsx").smax("message",{type:"event"},d("WASmaxJsx").smax("meta",{event_type:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeEventMixin=a}),98);
__d("WASmaxOutMessagePublishProductListMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("list",{type:"product_list"})));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeProductListMixin=a}),98);
__d("WASmaxOutMessagePublishSingleSelectListMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.listV;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("biz",null,d("WASmaxJsx").smax("list",{type:"single_select",v:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSingleSelectListMixin=a}),98);
__d("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishProductListMixin","WASmaxOutMessagePublishSingleSelectListMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.singleSelectList)return d("WASmaxOutMessagePublishSingleSelectListMixin").mergeSingleSelectListMixin(a,b.singleSelectList);if(b.isProductList)return d("WASmaxOutMessagePublishProductListMixin").mergeProductListMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeSingleSelectOrProductListMixinGroup=a}),98);
__d("WASmaxOutMessagePublishContentTypeListFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("to",null,d("WASmaxJsx").smax("enc",{mediatype:"list"}));return a}function i(a){var b=a.toCount;a=a.singleSelectOrProductListMixinGroupArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup").mergeSingleSelectOrProductListMixinGroup,d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").HOMOGENEOUS_CHILD_COUNT(h,b)))),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeContentTypeListFanoutParticipantsTo=h;g.mergeContentTypeListFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishLiveLocationModeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaLivelocMode;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{liveloc_mode:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeLiveLocationModeMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishLiveLocationModeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d("WASmaxJsx").smax("to",null,d("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,a)}));return a}function i(a){var b=a.toArgs;a=a.liveLocationModeMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishLiveLocationModeMixin").mergeLiveLocationModeMixin,d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").HOMOGENEOUS_CHILD(h,b)))),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeContentTypeLiveLocationFanoutParticipantsTo=h;g.mergeContentTypeLiveLocationFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMedianotifyMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"medianotify"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeMedianotifyMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishContentTypeMedianotifyMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeMedia)return d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(a);if(b.isContentTypeMedianotify)return d("WASmaxOutMessagePublishContentTypeMedianotifyMixin").mergeContentTypeMedianotifyMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeMediaOrMedianotifyMixinGroup=a}),98);
__d("WASmaxOutMessagePublishSenderContentBindingMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.senderContentBindingElementValue;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("sender_content_binding",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeSenderContentBindingMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.hasEncStickerTypeAvatar;a=a.encNativeFlowName;b=d("WASmaxJsx").smax("to",null,d("WASmaxJsx").smax("enc",{mediatype:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),sticker_type:d("WASmaxAttrs").OPTIONAL_LITERAL("avatar",c),native_flow_name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return b}function i(a){var b=a.toArgs,c=a.senderContentBindingMixinArgs;a=a.contentTypeMediaOrMedianotifyMixinGroupArgs;b=d("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").HOMOGENEOUS_CHILD(h,b))),c),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeContentTypeMediaFanoutDeprecatedParticipantsTo=h;g.mergeContentTypeMediaFanoutDeprecatedMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaFanoutMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.hasEncStickerTypeAvatar;a=a.encNativeFlowName;b=d("WASmaxJsx").smax("to",null,d("WASmaxJsx").smax("enc",{mediatype:d("WAWap").CUSTOM_STRING(b),sticker_type:d("WASmaxAttrs").OPTIONAL_LITERAL("avatar",c),native_flow_name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return b}function i(a){var b=a.toArgs,c=a.senderContentBindingMixinArgs;a=a.contentTypeMediaOrMedianotifyMixinGroupArgs;b=d("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").HOMOGENEOUS_CHILD(h,b))),c),a);return b}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeContentTypeMediaFanoutParticipantsTo=h;g.mergeContentTypeMediaFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePollCreationMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaContenttype;a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"creation",contenttype:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollCreationMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"result_snapshot"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollResultSnapshotMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePollVoteMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaContenttype;a=d("WASmaxJsx").smax("message",{type:"poll"},d("WASmaxJsx").smax("meta",{polltype:"vote",contenttype:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePollVoteMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeReactionMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"reaction"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeReactionMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypePayMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{type:"pay"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypePayMixin=a}),98);
__d("WASmaxOutMessagePublishPayNodeTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.payType;a=d("WASmaxJsx").smax("pay",{type:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePayNodeTypeMixin=a}),98);
__d("WASmaxOutMessagePublishBasePayNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishPayNodeTypeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.payCountry,c=a.payVersion,e=a.payIsFirstSend;b=d("WASmaxOutMessagePublishPayNodeTypeMixin").mergePayNodeTypeMixin(d("WASmaxJsx").smax("pay",{country:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),version:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,c),is_first_send:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,e)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBasePayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishLegacyAmountMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.payCurrency;a=a.payAmount;b=d("WASmaxJsx").smax("pay",{currency:d("WAWap").CUSTOM_STRING(b),amount:d("WAWap").CUSTOM_STRING(a)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeLegacyAmountMixin=a}),98);
__d("WASmaxOutMessagePublishMoneyMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.moneyValue,c=a.moneyOffset;a=a.moneyCurrency;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("money",{value:d("WAWap").CUSTOM_STRING(b),offset:d("WAWap").CUSTOM_STRING(c),currency:d("WAWap").CUSTOM_STRING(a)}));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMoneyMixin=a}),98);
__d("WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBasePayNodeMixin","WASmaxOutMessagePublishLegacyAmountMixin","WASmaxOutMessagePublishMoneyMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(d("WASmaxJsx").smax("amount",null),a);return a}function i(a){var b=a.amountArgs,c=a.payCredentialId,e=a.payDeviceId,f=a.payRequestId,g=a.legacyAmountMixinArgs;c=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishLegacyAmountMixin").mergeLegacyAmountMixin,d("WASmaxOutMessagePublishBasePayNodeMixin").mergeBasePayNodeMixin(d("WASmaxJsx").smax("pay",{"credential-id":d("WAWap").CUSTOM_STRING(c),"device-id":d("WAWap").CUSTOM_STRING(e),"request-id":d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,f)},d("WASmaxChildren").OPTIONAL_CHILD(h,b)),a),g);return c}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeBaseIndividualPublishSendPayNodeAmount=h;g.mergeBaseIndividualPublishSendPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishInstallmentMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishMoneyMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(d("WASmaxJsx").smax("due_amount",null),a);return a}function i(a){a=d("WASmaxOutMessagePublishMoneyMixin").mergeMoneyMixin(d("WASmaxJsx").smax("interest",null),a);return a}function j(a){var b=a.dueAmountArgs,c=a.interestArgs,e=a.installmentMaxCount;a=a.installmentSelectedCount;e=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("installment",{max_count:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,e),selected_count:d("WAWap").INT(a)},d("WASmaxChildren").OPTIONAL_CHILD(h,b),d("WASmaxChildren").OPTIONAL_CHILD(i,c)));return e}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeInstallmentInstallmentDueAmount=h;g.makeInstallmentInstallmentInterest=i;g.mergeInstallmentMixin=a}),98);
__d("WASmaxOutMessagePublishBeneficiaryMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.beneficiaryName,e=a.beneficiaryAddressLine1,f=a.beneficiaryAddressLine2,g=a.beneficiaryCity,h=a.beneficiaryState,i=a.beneficiaryPhoneNumber,j=a.beneficiaryCountry;a=a.beneficiaryPostalCode;e=d("WASmaxJsx").smax("beneficiary",{name:(b=d("WAWap")).CUSTOM_STRING(c),address_line1:b.CUSTOM_STRING(e),address_line2:(c=d("WASmaxAttrs")).OPTIONAL(b.CUSTOM_STRING,f),city:c.OPTIONAL(b.CUSTOM_STRING,g),state:c.OPTIONAL(b.CUSTOM_STRING,h),phone_number:c.OPTIONAL(b.CUSTOM_STRING,i),country:b.CUSTOM_STRING(j),postal_code:b.CUSTOM_STRING(a)});return e}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBeneficiaryMixin=a}),98);
__d("WASmaxOutMessagePublishBeneficiariesMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBeneficiaryMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishBeneficiaryMixin").mergeBeneficiaryMixin(d("WASmaxJsx").smax("beneficiary",null),a);return a}function i(a){a=a.beneficiaryArgs;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxChildren").REPEATED_CHILD(h,a,1,5));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeBeneficiariesBeneficiary=h;g.mergeBeneficiariesMixin=a}),98);
__d("WASmaxOutMessagePublishOrderInPaymentMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBeneficiariesMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishBeneficiariesMixin").mergeBeneficiariesMixin(d("WASmaxJsx").smax("beneficiaries",null),a);return a}function i(a){var b,c=a.beneficiariesArgs,e=a.orderId,f=a.orderMessageId,g=a.orderPaymentConfigId;a=a.orderType;e=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("order",{id:(b=d("WAWap")).CUSTOM_STRING(e),message_id:d("WASmaxAttrs").OPTIONAL(b.STANZA_ID,f),payment_config_id:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,g),type:d("WASmaxAttrs").OPTIONAL(b.CUSTOM_STRING,a)},d("WASmaxChildren").OPTIONAL_CHILD(h,c)));return e}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeOrderInPaymentOrderBeneficiaries=h;g.mergeOrderInPaymentMixin=a}),98);
__d("WASmaxOutMessagePublishPaymentInitiatorMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPaymentInitiator;a=d("WASmaxJsx").smax("smax$any",{payment_initiator:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePaymentInitiatorMixin=a}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishInstallmentMixin","WASmaxOutMessagePublishOrderInPaymentMixin","WASmaxOutMessagePublishPaymentInitiatorMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.orderInPaymentMixinArgs,c=a.paymentInitiatorMixinArgs;a=a.installmentMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishInstallmentMixin").mergeInstallmentMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishPaymentInitiatorMixin").mergePaymentInitiatorMixin,d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishOrderInPaymentMixin").mergeOrderInPaymentMixin,d("WASmaxJsx").smax("pay",{"transaction-type":"p2m"}),b),c),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeP2MMixin=a}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("pay",{"transaction-type":"p2p"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeP2PMixin=a}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin","WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isBRPublishSendPayNodeP2P)return d("WASmaxOutMessagePublishBRPublishSendPayNodeP2PMixin").mergeBRPublishSendPayNodeP2PMixin(a);if(b.bRPublishSendPayNodeP2M)return d("WASmaxOutMessagePublishBRPublishSendPayNodeP2MMixin").mergeBRPublishSendPayNodeP2MMixin(a,b.bRPublishSendPayNodeP2M);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeBRPublishSendPayNodeP2POrMMixinGroup=a}),98);
__d("WASmaxOutMessagePublishBRSendPayEloNodeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.eloDeviceSignature,e=a.eloWalletSignature,f=a.eloChallengeId;a=a.eloCardholderVerificationMethod;c=d("WASmaxJsx").smax("pay",null,d("WASmaxJsx").smax("elo",{device_signature:(b=d("WAWap")).CUSTOM_STRING(c),wallet_signature:b.CUSTOM_STRING(e),challenge_id:b.CUSTOM_STRING(f),cardholder_verification_method:b.CUSTOM_STRING(a)}));return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBRSendPayEloNodeMixin=a}),98);
__d("WASmaxOutMessagePublishBRPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup","WASmaxOutMessagePublishBRSendPayEloNodeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.payId,e=a.payPaymentRails,f=a.payTrustedDeviceInfo,g=a.payNonce,h=a.bRSendPayEloNodeMixinArgs;a=a.bRPublishSendPayNodeP2POrMMixinGroupArgs;c=d("WASmaxOutMessagePublishBRPublishSendPayNodeP2POrMMixinGroup").mergeBRPublishSendPayNodeP2POrMMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishBRSendPayEloNodeMixin").mergeBRSendPayEloNodeMixin,d("WASmaxJsx").smax("pay",{id:(b=d("WAWap")).CUSTOM_STRING(c),"payment-rails":b.CUSTOM_STRING(e),"trusted-device-info":b.CUSTOM_STRING(f),nonce:b.CUSTOM_STRING(g)}),h),a);return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBRPublishSendPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishUPILiteDetailsMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.upiLiteDetailsLiteReferenceNumber,e=a.upiLiteDetailsLiteArqc,f=a.upiLiteDetailsLiteTimestamp;a=a.upiLiteDetailsLitePurpose;c=d("WASmaxJsx").smax("upi_lite_details",{lite_reference_number:(b=d("WAWap")).CUSTOM_STRING(c),lite_arqc:b.CUSTOM_STRING(e),lite_timestamp:b.INT(f),lite_purpose:b.CUSTOM_STRING(a)});return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeUPILiteDetailsMixin=a}),98);
__d("WASmaxOutMessagePublishOrderMessageMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.orderOrderId,e=a.orderOrderMessageId,f=a.orderExpiryTs,g=a.orderOrderType;a=a.orderDiscountProgramName;e=d("WASmaxJsx").smax("order",{"order-id":(b=d("WAWap")).CUSTOM_STRING(c),"order-message-id":(c=d("WASmaxAttrs")).OPTIONAL(b.CUSTOM_STRING,e),"expiry-ts":c.OPTIONAL(b.INT,f),"order-type":c.OPTIONAL(b.CUSTOM_STRING,g),"discount-program-name":c.OPTIONAL(b.CUSTOM_STRING,a)});return e}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeOrderMessageMixin=a}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishOrderMessageMixin","WASmaxOutMessagePublishPaymentInitiatorMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.orderArgs;a=a.paymentLinkArgs;b=d("WASmaxJsx").smax("upi",null,d("WASmaxChildren").OPTIONAL_CHILD(i,b),d("WASmaxChildren").OPTIONAL_CHILD(j,a));return b}function i(a){a=d("WASmaxOutMessagePublishOrderMessageMixin").mergeOrderMessageMixin(d("WASmaxJsx").smax("order",null),a);return a}function j(a){var b=a.paymentLinkOrderId;a=a.paymentLinkMessageId;b=d("WASmaxJsx").smax("payment_link",{order_id:d("WAWap").CUSTOM_STRING(b),message_id:d("WAWap").CUSTOM_STRING(a)});return b}function k(a){var b=a.upiArgs;a=a.paymentInitiatorMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishPaymentInitiatorMixin").mergePaymentInitiatorMixin,d("WASmaxJsx").smax("pay",{"transaction-type":"p2m"},d("WASmaxChildren").OPTIONAL_CHILD(h,b)),a);return b}function a(a,b){b=k(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeUPIPublishSendPayNodeP2MUpi=h;g.makeUPIPublishSendPayNodeP2MUpiOrder=i;g.makeUPIPublishSendPayNodeP2MUpiPaymentLink=j;g.mergeUPIPublishSendPayNodeP2MMixin=a}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.hasPayTransactionTypeP2P;a=d("WASmaxJsx").smax("pay",{"transaction-type":d("WASmaxAttrs").OPTIONAL_LITERAL("p2p",a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeUPIPublishSendPayNodeP2PMixin=a}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.uPIPublishSendPayNodeP2P)return d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2PMixin").mergeUPIPublishSendPayNodeP2PMixin(a,b.uPIPublishSendPayNodeP2P);if(b.uPIPublishSendPayNodeP2M)return d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2MMixin").mergeUPIPublishSendPayNodeP2MMixin(a,b.uPIPublishSendPayNodeP2M);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeUPIPublishSendPayNodeP2POrMMixinGroup=a}),98);
__d("WASmaxOutMessagePublishUPIPublishSendPayNodeMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishUPILiteDetailsMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.upiLiteDetailsArgs;a=a.upiToken;a=d("WASmaxJsx").smax("upi",{token:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)},d("WASmaxChildren").OPTIONAL_CHILD(i,b));return a}function i(a){a=d("WASmaxOutMessagePublishUPILiteDetailsMixin").mergeUPILiteDetailsMixin(d("WASmaxJsx").smax("upi_lite_details",null),a);return a}function j(a){var b,c,e=a.upiArgs,f=a.payId,g=a.payMpin,i=a.payReceiverVpa,j=a.payReceiverVpaId,k=a.paySenderVpa,l=a.paySenderVpaId,m=a.paySeqNo,n=a.payUpiBankInfo,o=a.payMode,p=a.payPurposeCode,q=a.payMcc,r=a.payRefId,s=a.payDeviceSsid,t=a.payNote;a=a.uPIPublishSendPayNodeP2POrMMixinGroupArgs;f=d("WASmaxOutMessagePublishUPIPublishSendPayNodeP2POrMMixinGroup").mergeUPIPublishSendPayNodeP2POrMMixinGroup(d("WASmaxJsx").smax("pay",{id:(b=d("WASmaxAttrs")).OPTIONAL((c=d("WAWap")).CUSTOM_STRING,f),mpin:b.OPTIONAL(c.CUSTOM_STRING,g),"receiver-vpa":c.CUSTOM_STRING(i),"receiver-vpa-id":b.OPTIONAL(c.CUSTOM_STRING,j),"sender-vpa":c.CUSTOM_STRING(k),"sender-vpa-id":b.OPTIONAL(c.CUSTOM_STRING,l),"seq-no":c.CUSTOM_STRING(m),"upi-bank-info":c.CUSTOM_STRING(n),mode:b.OPTIONAL(c.CUSTOM_STRING,o),"purpose-code":b.OPTIONAL(c.CUSTOM_STRING,p),mcc:b.OPTIONAL(c.CUSTOM_STRING,q),"ref-id":b.OPTIONAL(c.CUSTOM_STRING,r),device_ssid:b.OPTIONAL(c.CUSTOM_STRING,s),note:b.OPTIONAL(c.CUSTOM_STRING,t)},d("WASmaxChildren").OPTIONAL_CHILD(h,e)),a);return f}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeUPIPublishSendPayNodeUpi=h;g.makeUPIPublishSendPayNodeUpiUpiLiteDetails=i;g.mergeUPIPublishSendPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBRPublishSendPayNodeMixin","WASmaxOutMessagePublishUPIPublishSendPayNodeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.bRPublishSendPayNode)return d("WASmaxOutMessagePublishBRPublishSendPayNodeMixin").mergeBRPublishSendPayNodeMixin(a,b.bRPublishSendPayNode);if(b.uPIPublishSendPayNode)return d("WASmaxOutMessagePublishUPIPublishSendPayNodeMixin").mergeUPIPublishSendPayNodeMixin(a,b.uPIPublishSendPayNode);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeBRPublishOrUPIPublishSendPayNodeMixinGroup=a}),98);
__d("WASmaxOutMessagePublishIntegrationPublishPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.bRPublishOrUPIPublishSendPayNodeMixinGroupArgs;a=d("WASmaxOutMessagePublishBRPublishOrUPIPublishSendPayNodeMixinGroup").mergeBRPublishOrUPIPublishSendPayNodeMixinGroup(d("WASmaxJsx").smax("pay",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIntegrationPublishPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin","WASmaxOutMessagePublishIntegrationPublishPayNodeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishIntegrationPublishPayNodeMixin").mergeIntegrationPublishPayNodeMixin(d("WASmaxOutMessagePublishBaseIndividualPublishSendPayNodeMixin").mergeBaseIndividualPublishSendPayNodeMixin(d("WASmaxJsx").smax("pay",null),a),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualNonNoviPublishSendPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishIndividualNonNoviPublishSendPayNodeMixin").mergeIndividualNonNoviPublishSendPayNodeMixin(d("WASmaxJsx").smax("pay",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualPublishSendPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualRequestPayNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBasePayNodeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.paySender,c=a.payExpiryTs,e=a.payRequestId;b=d("WASmaxOutMessagePublishBasePayNodeMixin").mergeBasePayNodeMixin(d("WASmaxJsx").smax("pay",{sender:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,b),"expiry-ts":d("WAWap").CUSTOM_STRING(c),"request-id":d("WAWap").CUSTOM_STRING(e)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualRequestPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishPayInviteNodeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.payService;a=d("WASmaxJsx").smax("pay",{type:"invite",service:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePayInviteNodeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin","WASmaxOutMessagePublishIndividualRequestPayNodeMixin","WASmaxOutMessagePublishPayInviteNodeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualPublishSendPayNode)return d("WASmaxOutMessagePublishIndividualPublishSendPayNodeMixin").mergeIndividualPublishSendPayNodeMixin(a,b.individualPublishSendPayNode);if(b.individualRequestPayNode)return d("WASmaxOutMessagePublishIndividualRequestPayNodeMixin").mergeIndividualRequestPayNodeMixin(a,b.individualRequestPayNode);if(b.payInviteNode)return d("WASmaxOutMessagePublishPayInviteNodeMixin").mergePayInviteNodeMixin(a,b.payInviteNode);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup=a}),98);
__d("WASmaxOutMessagePublishIndividualPublishPayNodeMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.individualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroupArgs;a=d("WASmaxOutMessagePublishIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup").mergeIndividualPublishSendPayOrIndividualRequestPayOrPayInviteNodeMixinGroup(d("WASmaxJsx").smax("pay",null),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualPublishPayNodeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualPublishPayNodeMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishIndividualPublishPayNodeMixin").mergeIndividualPublishPayNodeMixin(d("WASmaxJsx").smax("pay",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualIndividualPublishPayNodeMessageMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypePayMixin","WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.individualIndividualPublishPayNodeMessageMixinArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishIndividualIndividualPublishPayNodeMessageMixin").mergeIndividualIndividualPublishPayNodeMessageMixin,d("WASmaxOutMessagePublishContentTypePayMixin").mergeContentTypePayMixin(d("WASmaxJsx").smax("message",null)),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualContentTypePayIndividualMixin=a}),98);
__d("WASmaxOutMessagePublishContentFanoutMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeEventMixin","WASmaxOutMessagePublishContentTypeListFanoutMixin","WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin","WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin","WASmaxOutMessagePublishContentTypeMediaFanoutMixin","WASmaxOutMessagePublishContentTypeMedianotifyMixin","WASmaxOutMessagePublishContentTypePollCreationMixin","WASmaxOutMessagePublishContentTypePollResultSnapshotMixin","WASmaxOutMessagePublishContentTypePollVoteMixin","WASmaxOutMessagePublishContentTypeReactionMixin","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(a);if(b.contentTypeMediaFanout)return d("WASmaxOutMessagePublishContentTypeMediaFanoutMixin").mergeContentTypeMediaFanoutMixin(a,b.contentTypeMediaFanout);if(b.contentTypeMediaFanoutDeprecated)return d("WASmaxOutMessagePublishContentTypeMediaFanoutDeprecatedMixin").mergeContentTypeMediaFanoutDeprecatedMixin(a,b.contentTypeMediaFanoutDeprecated);if(b.contentTypeLiveLocationFanout)return d("WASmaxOutMessagePublishContentTypeLiveLocationFanoutMixin").mergeContentTypeLiveLocationFanoutMixin(a,b.contentTypeLiveLocationFanout);if(b.individualContentTypePayIndividual)return d("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin").mergeIndividualContentTypePayIndividualMixin(a,b.individualContentTypePayIndividual);if(b.contentTypeListFanout)return d("WASmaxOutMessagePublishContentTypeListFanoutMixin").mergeContentTypeListFanoutMixin(a,b.contentTypeListFanout);if(b.isContentTypeReaction)return d("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(a);if(b.contentTypePollCreation)return d("WASmaxOutMessagePublishContentTypePollCreationMixin").mergeContentTypePollCreationMixin(a,b.contentTypePollCreation);if(b.contentTypePollVote)return d("WASmaxOutMessagePublishContentTypePollVoteMixin").mergeContentTypePollVoteMixin(a,b.contentTypePollVote);if(b.isContentTypePollResultSnapshot)return d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin").mergeContentTypePollResultSnapshotMixin(a);if(b.isContentTypeMedianotify)return d("WASmaxOutMessagePublishContentTypeMedianotifyMixin").mergeContentTypeMedianotifyMixin(a);if(b.contentTypeEvent)return d("WASmaxOutMessagePublishContentTypeEventMixin").mergeContentTypeEventMixin(a,b.contentTypeEvent);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentFanoutMixins=a}),98);
__d("WASmaxOutMessagePublishLidChatOriginMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{origin:"ctwa"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeLidChatOriginMixin=a}),98);
__d("WASmaxOutMessagePublishMsgMetaOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaOrigin;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{origin:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMsgMetaOriginMixin=a}),98);
__d("WASmaxOutMessagePublishPeripheralOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaPeripheral;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{peripheral:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeripheralOriginMixin=a}),98);
__d("WASmaxOutMessagePublishTDeprecatedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageT;a=d("WASmaxJsx").smax("message",{t:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTDeprecatedMixin=a}),98);
__d("WASmaxOutMessagePublishToContentBindingMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid;a=a.contentBindingElementValue;b=d("WASmaxJsx").smax("to",{jid:d("WAWap").JID(b)},d("WASmaxJsx").smax("content_binding",null,a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeToContentBindingMixin=a}),98);
__d("WASmaxOutMessagePublishAvatarStickerTypeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("enc",{sticker_type:"avatar"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeAvatarStickerTypeMixin=a}),98);
__d("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAvatarStickerTypeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encMediatype,c=a.encNativeFlowName;a=a.hasAvatarStickerType;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishAvatarStickerTypeMixin").mergeAvatarStickerTypeMixin,d("WASmaxJsx").smax("enc",{mediatype:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b),native_flow_name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncMediaTypeDeprecatedMixin=a}),98);
__d("WASmaxOutMessagePublishEncVersion3Mixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("enc",{v:"3"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncVersion3Mixin=a}),98);
__d("WASmaxOutMessagePublishEncVersion",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncVersion2Mixin","WASmaxOutMessagePublishEncVersion3Mixin","WASmaxOutMessagePublishEncVersionFutureproofMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isEncVersion2)return d("WASmaxOutMessagePublishEncVersion2Mixin").mergeEncVersion2Mixin(a);if(b.isEncVersion3)return d("WASmaxOutMessagePublishEncVersion3Mixin").mergeEncVersion3Mixin(a);if(b.encVersionFutureproof)return d("WASmaxOutMessagePublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(a,b.encVersionFutureproof);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeEncVersion=a}),98);
__d("WASmaxOutMessagePublishToDeviceMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersion","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid,c=a.encTypeIndividualMixinArgs,e=a.encMediaTypeDeprecatedMixinArgs;a=a.encVersionArgs;b=d("WASmaxJsx").smax("to",{jid:d("WAWap").JID(b)},d("WASmaxOutMessagePublishEncVersion").mergeEncVersion(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin,d("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(d("WASmaxJsx").smax("enc",null),c),e),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeToDeviceMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotLocalAutomatedTypeMixin","WASmaxOutMessagePublishBotMessageTypeMixin","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin","WASmaxOutMessagePublishBotPersonaTypeMixin","WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin","WASmaxOutMessagePublishBusinessBotMessageMixin","WASmaxOutMessagePublishContentFanoutMixins","WASmaxOutMessagePublishLidChatOriginMixin","WASmaxOutMessagePublishMsgMetaOriginMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WASmaxOutMessagePublishTDeprecatedMixin","WASmaxOutMessagePublishToContentBindingMixin","WASmaxOutMessagePublishToDeviceMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toContentBindingMixinArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishToContentBindingMixin").mergeToContentBindingMixin,d("WASmaxOutMessagePublishToDeviceMixin").mergeToDeviceMixin(d("WASmaxJsx").smax("to",null),a),b);return a}function a(){var a=d("WASmaxJsx").smax("enc",null);return a}function i(a){var b,c=a.toArgs,e=a.messageTo,f=a.tDeprecatedMixinArgs,g=a.botMessageTypeMixinArgs,i=a.businessBotMessageMixinArgs,j=a.botMetricsEntryPointMixinArgs,k=a.botMetricsThreadEntryPointMixinArgs,l=a.msgMetaOriginMixinArgs,m=a.hasLidChatOrigin,n=a.botLocalAutomatedTypeMixinArgs,o=a.businessBotMessageFeedbackRequestedMixinArgs,p=a.botPersonaTypeMixinArgs,q=a.peripheralOriginMixinArgs;a=a.contentFanoutMixinsArgs;b=d("WASmaxOutMessagePublishContentFanoutMixins").mergeContentFanoutMixins((b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotPersonaTypeMixin").mergeBotPersonaTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin").mergeBusinessBotMessageFeedbackRequestedMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin").mergeBotLocalAutomatedTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishLidChatOriginMixin").mergeLidChatOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishMsgMetaOriginMixin").mergeMsgMetaOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin").mergeBotMetricsThreadEntryPointMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin,b.optionalMerge(d("WASmaxOutMessagePublishBusinessBotMessageMixin").mergeBusinessBotMessageMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMessageTypeMixin").mergeBotMessageTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishTDeprecatedMixin").mergeTDeprecatedMixin,d("WASmaxJsx").smax("message",{to:d("WAWap").JID(e)},d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").REPEATED_CHILD(h,c,1,1997))),f),g),i),j),k),l),m),n),o),p),q),a);return b}function b(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeIndividualIndividualFanoutParticipantsTo=h;g.makeIndividualIndividualFanoutEnc=a;g.mergeIndividualIndividualFanoutMixin=b}),98);
__d("WASmaxOutMessagePublishEncListMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("enc",{mediatype:"list"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncListMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeListMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishEncListMixin","WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.singleSelectOrProductListMixinGroupArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishSingleSelectOrProductListMixinGroup").mergeSingleSelectOrProductListMixinGroup,d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishEncListMixin").mergeEncListMixin(d("WASmaxJsx").smax("enc",null)))),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeListMixin=a}),98);
__d("WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncLiveLocationDeprecatedMixin=a}),98);
__d("WASmaxOutMessagePublishEncLiveLocationMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encDuration;a=d("WASmaxJsx").smax("enc",{mediatype:"livelocation",duration:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncLiveLocationMixin=a}),98);
__d("WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin","WASmaxOutMessagePublishEncLiveLocationMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.encLiveLocation)return d("WASmaxOutMessagePublishEncLiveLocationMixin").mergeEncLiveLocationMixin(a,b.encLiveLocation);if(b.encLiveLocationDeprecated)return d("WASmaxOutMessagePublishEncLiveLocationDeprecatedMixin").mergeEncLiveLocationDeprecatedMixin(a,b.encLiveLocationDeprecated);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup=a}),98);
__d("WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin","WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup","WASmaxOutMessagePublishLiveLocationModeMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.liveLocationModeMixinArgs;a=a.encLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroupArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishLiveLocationModeMixin").mergeLiveLocationModeMixin,d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup").mergeEncLiveLocationEncLiveLocationOrEncLiveLocationDeprecatedMixinGroup(d("WASmaxJsx").smax("enc",null),a))),b);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeLiveLocationSingleMixin=a}),98);
__d("WASmaxOutMessagePublishEncMediaTypeMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAvatarStickerTypeMixin","WASmaxOutMessagePublishMediaTypeMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encNativeFlowName,c=a.hasAvatarStickerType;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishAvatarStickerTypeMixin").mergeAvatarStickerTypeMixin,d("WASmaxOutMessagePublishMediaTypeMixin").mergeMediaTypeMixin(d("WASmaxJsx").smax("enc",{native_flow_name:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b)}),a),c);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncMediaTypeMixin=a}),98);
__d("WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncMediaTypeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.encMediaType)return d("WASmaxOutMessagePublishEncMediaTypeMixin").mergeEncMediaTypeMixin(a,b.encMediaType);if(b.encMediaTypeDeprecated)return d("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin(a,b.encMediaTypeDeprecated);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup=a}),98);
__d("WASmaxOutMessagePublishContentTypeMediaSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup","WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup","WASmaxOutMessagePublishSenderContentBindingMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.senderContentBindingMixinArgs,c=a.contentTypeMediaOrMedianotifyMixinGroupArgs;a=a.encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs;a=d("WASmaxOutMessagePublishContentTypeMediaOrMedianotifyMixinGroup").mergeContentTypeMediaOrMedianotifyMixinGroup(d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishSenderContentBindingMixin").mergeSenderContentBindingMixin,d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup").mergeEncMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroup(d("WASmaxJsx").smax("enc",null),a)),b),c);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeContentTypeMediaSingleMixin=a}),98);
__d("WASmaxOutMessagePublishContentMixins",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeEventMixin","WASmaxOutMessagePublishContentTypeListMixin","WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin","WASmaxOutMessagePublishContentTypeMediaSingleMixin","WASmaxOutMessagePublishContentTypePollCreationMixin","WASmaxOutMessagePublishContentTypePollResultSnapshotMixin","WASmaxOutMessagePublishContentTypePollVoteMixin","WASmaxOutMessagePublishContentTypeReactionMixin","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(a);if(b.contentTypeMediaSingle)return d("WASmaxOutMessagePublishContentTypeMediaSingleMixin").mergeContentTypeMediaSingleMixin(a,b.contentTypeMediaSingle);if(b.contentTypeLiveLocationSingle)return d("WASmaxOutMessagePublishContentTypeLiveLocationSingleMixin").mergeContentTypeLiveLocationSingleMixin(a,b.contentTypeLiveLocationSingle);if(b.individualContentTypePayIndividual)return d("WASmaxOutMessagePublishIndividualContentTypePayIndividualMixin").mergeIndividualContentTypePayIndividualMixin(a,b.individualContentTypePayIndividual);if(b.contentTypeList)return d("WASmaxOutMessagePublishContentTypeListMixin").mergeContentTypeListMixin(a,b.contentTypeList);if(b.isContentTypeReaction)return d("WASmaxOutMessagePublishContentTypeReactionMixin").mergeContentTypeReactionMixin(a);if(b.contentTypePollCreation)return d("WASmaxOutMessagePublishContentTypePollCreationMixin").mergeContentTypePollCreationMixin(a,b.contentTypePollCreation);if(b.contentTypePollVote)return d("WASmaxOutMessagePublishContentTypePollVoteMixin").mergeContentTypePollVoteMixin(a,b.contentTypePollVote);if(b.isContentTypePollResultSnapshot)return d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin").mergeContentTypePollResultSnapshotMixin(a);if(b.contentTypeEvent)return d("WASmaxOutMessagePublishContentTypeEventMixin").mergeContentTypeEventMixin(a,b.contentTypeEvent);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentMixins=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipient;a=d("WASmaxJsx").smax("message",{recipient:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualIndividualRetryToPeerMixin=a}),98);
__d("WASmaxOutMessagePublishRetryMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncRetryMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageT;a=a.encRetryMixinArgs;b=d("WASmaxJsx").smax("message",{t:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,b)},d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishEncRetryMixin").mergeEncRetryMixin,d("WASmaxJsx").smax("enc",null),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRetryMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualRetryMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin","WASmaxOutMessagePublishRetryMixin"],(function(a,b,c,d,e,f,g){function h(a){var b=a.individualIndividualRetryToPeerMixinArgs;a=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishIndividualIndividualRetryToPeerMixin").mergeIndividualIndividualRetryToPeerMixin,d("WASmaxOutMessagePublishRetryMixin").mergeRetryMixin(d("WASmaxJsx").smax("message",null),a),b);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualIndividualRetryMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.contentBindingElementValue;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("content_binding",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualIndividualSingleContentBindingMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotLocalAutomatedTypeMixin","WASmaxOutMessagePublishBotMessageTypeMixin","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin","WASmaxOutMessagePublishBotPersonaTypeMixin","WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin","WASmaxOutMessagePublishBusinessBotMessageMixin","WASmaxOutMessagePublishContentMixins","WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin","WASmaxOutMessagePublishEncTypeIndividualMixin","WASmaxOutMessagePublishEncVersion","WASmaxOutMessagePublishIndividualIndividualRetryMixin","WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin","WASmaxOutMessagePublishLidChatOriginMixin","WASmaxOutMessagePublishMsgMetaOriginMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.messageTo,e=a.individualIndividualRetryMixinArgs,f=a.individualIndividualSingleContentBindingMixinArgs,g=a.botMessageTypeMixinArgs,h=a.businessBotMessageMixinArgs,i=a.botMetricsEntryPointMixinArgs,j=a.botMetricsThreadEntryPointMixinArgs,k=a.msgMetaOriginMixinArgs,l=a.hasLidChatOrigin,m=a.botLocalAutomatedTypeMixinArgs,n=a.businessBotMessageFeedbackRequestedMixinArgs,o=a.botPersonaTypeMixinArgs,p=a.peripheralOriginMixinArgs,q=a.contentMixinsArgs,r=a.encTypeIndividualMixinArgs,s=a.encMediaTypeDeprecatedMixinArgs;a=a.encVersionArgs;c=d("WASmaxOutMessagePublishContentMixins").mergeContentMixins((b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotPersonaTypeMixin").mergeBotPersonaTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishBusinessBotMessageFeedbackRequestedMixin").mergeBusinessBotMessageFeedbackRequestedMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotLocalAutomatedTypeMixin").mergeBotLocalAutomatedTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishLidChatOriginMixin").mergeLidChatOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishMsgMetaOriginMixin").mergeMsgMetaOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMetricsThreadEntryPointMixin").mergeBotMetricsThreadEntryPointMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin,b.optionalMerge(d("WASmaxOutMessagePublishBusinessBotMessageMixin").mergeBusinessBotMessageMixin,b.optionalMerge(d("WASmaxOutMessagePublishBotMessageTypeMixin").mergeBotMessageTypeMixin,b.optionalMerge(d("WASmaxOutMessagePublishIndividualIndividualSingleContentBindingMixin").mergeIndividualIndividualSingleContentBindingMixin,b.optionalMerge(d("WASmaxOutMessagePublishIndividualIndividualRetryMixin").mergeIndividualIndividualRetryMixin,d("WASmaxJsx").smax("message",{to:d("WAWap").JID(c)},d("WASmaxOutMessagePublishEncVersion").mergeEncVersion(b.optionalMerge(d("WASmaxOutMessagePublishEncMediaTypeDeprecatedMixin").mergeEncMediaTypeDeprecatedMixin,d("WASmaxOutMessagePublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(d("WASmaxJsx").smax("enc",null),r),s),a)),e),f),g),h),i),j),k),l),m),n),o),p),q);return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualIndividualSingleMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishBotMetricsEntryPointMixin","WASmaxOutMessagePublishIndividualIndividualFanoutMixin","WASmaxOutMessagePublishIndividualIndividualSingleMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualIndividualSingle)return d("WASmaxOutMessagePublishIndividualIndividualSingleMixin").mergeIndividualIndividualSingleMixin(a,b.individualIndividualSingle);if(b.individualIndividualFanout)return d("WASmaxOutMessagePublishIndividualIndividualFanoutMixin").mergeIndividualIndividualFanoutMixin(a,b.individualIndividualFanout);if(b.botMetricsEntryPoint)return d("WASmaxOutMessagePublishBotMetricsEntryPointMixin").mergeBotMetricsEntryPointMixin(a,b.botMetricsEntryPoint);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup=a}),98);
__d("WASmaxOutMessagePublishIndividualBotRequestMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotFeedbackMessageTypeMixin","WASmaxOutMessagePublishBotRequestMixin","WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup","WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.messageTo,c=a.contentTypeTextOrMediaMixinGroupArgs,e=a.individualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroupArgs,f=a.hasBotFeedbackMessageType;a=a.botRequestMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup").mergeIndividualIndividualSingleOrIndividualIndividualFanoutOrBotMetricsEntryPointMixinGroup,d("WASmaxOutMessagePublishContentTypeTextOrMediaMixinGroup").mergeContentTypeTextOrMediaMixinGroup(d("WASmaxJsx").smax("message",{to:d("WAWap").USER_JID(b)},d("WASmaxMixins").optionalMerge(d("WASmaxOutMessagePublishBotFeedbackMessageTypeMixin").mergeBotFeedbackMessageTypeMixin,d("WASmaxJsx").smax("bot",null,d("WASmaxOutMessagePublishBotRequestMixin").mergeBotRequestMixin(d("WASmaxJsx").smax("to",null),a)),f)),c),e);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualBotRequestMessageMixin=a}),98);
__d("WASmaxOutMessagePublishBotResponseMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.botEditTargetId,e=a.botSenderTimestampMs,f=a.botEdit;a=a.hasBotTypeVoice;c=d("WASmaxJsx").smax("bot",{edit_target_id:(b=d("WASmaxAttrs")).OPTIONAL(d("WAWap").STANZA_ID,c),sender_timestamp_ms:b.OPTIONAL(d("WAWap").INT,e),edit:b.OPTIONAL(d("WAWap").CUSTOM_STRING,f),type:b.OPTIONAL_LITERAL("voice",a)});return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotResponseMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishContentTypeMediaMixin"],(function(a,b,c,d,e,f,g){function h(a){a=a.toCount;a=d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").REPEATED_CHILD_COUNT(i,a,2,2));return a}function i(){var a=d("WASmaxJsx").smax("to",null,d("WASmaxJsx").smax("enc",{mediatype:"image"}));return a}function j(a){a=a.participantsArgs;a=d("WASmaxOutMessagePublishContentTypeMediaMixin").mergeContentTypeMediaMixin(d("WASmaxJsx").smax("message",null,d("WASmaxChildren").OPTIONAL_CHILD(h,a)));return a}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeIndividualContentTypeBotResponseMediaFanoutParticipants=h;g.makeIndividualContentTypeBotResponseMediaFanoutParticipantsTo=i;g.mergeIndividualContentTypeBotResponseMediaFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishContentTypeTextMixin","WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isContentTypeText)return d("WASmaxOutMessagePublishContentTypeTextMixin").mergeContentTypeTextMixin(a);if(b.individualContentTypeBotResponseMediaFanout)return d("WASmaxOutMessagePublishIndividualContentTypeBotResponseMediaFanoutMixin").mergeIndividualContentTypeBotResponseMediaFanoutMixin(a,b.individualContentTypeBotResponseMediaFanout);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup=a}),98);
__d("WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishEncPayloadMixin"],(function(a,b,c,d,e,f,g){function h(a){a=d("WASmaxOutMessagePublishEncPayloadMixin").mergeEncPayloadMixin(d("WASmaxJsx").smax("enc",{type:"msmsg"}),a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncTypeMessageSecretMessageMixin=a}),98);
__d("WASmaxOutMessagePublishMessageTargetMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.metaTargetId,e=a.metaTargetSenderJid,f=a.metaTargetChatJid;a=a.metaTargetChatJidLid;c=d("WASmaxJsx").smax("meta",{target_id:(b=d("WAWap")).STANZA_ID(c),target_sender_jid:d("WASmaxAttrs").OPTIONAL(b.USER_JID,e),target_chat_jid:d("WASmaxAttrs").OPTIONAL(b.JID,f),target_chat_jid_lid:d("WASmaxAttrs").OPTIONAL(b.JID,a)});return c}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageTargetMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualBotResponseFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishBotResponseMixin","WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup","WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin","WASmaxOutMessagePublishEncVersionBot","WASmaxOutMessagePublishMessageTargetMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.toArgs;a=d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").REPEATED_CHILD(i,a,2,2));return a}function i(a){a=a.toJid;a=d("WASmaxJsx").smax("to",{jid:d("WAWap").USER_JID(a)});return a}function j(a){var b,c=a.participantsArgs,e=a.messageTo,f=a.contentTypeTextOrIndividualBotResponseMediaFanoutMixinGroupArgs,g=a.botResponseMixinArgs,i=a.messageTargetMixinArgs,j=a.encTypeMessageSecretMessageMixinArgs;a=a.encVersionBotArgs;e=d("WASmaxOutMessagePublishContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup").mergeContentTypeTextOrIndividualBotResponseMediaFanoutMixinGroup((b=d("WASmaxJsx")).smax("message",{to:d("WAWap").USER_JID(e)},d("WASmaxOutMessagePublishBotResponseMixin").mergeBotResponseMixin(b.smax("bot",null),g),d("WASmaxOutMessagePublishMessageTargetMixin").mergeMessageTargetMixin(b.smax("meta",null),i),d("WASmaxOutMessagePublishEncVersionBot").mergeEncVersionBot(d("WASmaxOutMessagePublishEncTypeMessageSecretMessageMixin").mergeEncTypeMessageSecretMessageMixin(b.smax("enc",null),j),a),d("WASmaxChildren").OPTIONAL_CHILD(h,c)),f);return e}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeIndividualBotResponseFanoutParticipants=h;g.makeIndividualBotResponseFanoutParticipantsTo=i;g.mergeIndividualBotResponseFanoutMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishIndividualBotRequestMessageMixin","WASmaxOutMessagePublishIndividualBotResponseFanoutMixin","WASmaxOutMessagePublishIndividualIndividualFanoutMixin","WASmaxOutMessagePublishIndividualIndividualSingleMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.individualBotResponseFanout)return d("WASmaxOutMessagePublishIndividualBotResponseFanoutMixin").mergeIndividualBotResponseFanoutMixin(a,b.individualBotResponseFanout);if(b.individualBotRequestMessage)return d("WASmaxOutMessagePublishIndividualBotRequestMessageMixin").mergeIndividualBotRequestMessageMixin(a,b.individualBotRequestMessage);if(b.individualIndividualSingle)return d("WASmaxOutMessagePublishIndividualIndividualSingleMixin").mergeIndividualIndividualSingleMixin(a,b.individualIndividualSingle);if(b.individualIndividualFanout)return d("WASmaxOutMessagePublishIndividualIndividualFanoutMixin").mergeIndividualIndividualFanoutMixin(a,b.individualIndividualFanout);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup=a}),98);
__d("WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipient;a=d("WASmaxJsx").smax("message",{recipient:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIndividualRecipientDeprecaredMixin=a}),98);
__d("WASmaxOutMessagePublishMessageEditMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"1"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessageEditMixin=a}),98);
__d("WASmaxOutMessagePublishMessagePinMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"2"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMessagePinMixin=a}),98);
__d("WASmaxOutMessagePublishRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",{edit:"7"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRevokeMixin=a}),98);
__d("WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishMessageEditMixin","WASmaxOutMessagePublishMessagePinMixin","WASmaxOutMessagePublishRevokeMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.isMessageEdit)return d("WASmaxOutMessagePublishMessageEditMixin").mergeMessageEditMixin(a);if(b.isMessagePin)return d("WASmaxOutMessagePublishMessagePinMixin").mergeMessagePinMixin(a);if(b.isRevoke)return d("WASmaxOutMessagePublishRevokeMixin").mergeRevokeMixin(a);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeMessageEditOrMessagePinOrRevokeMixinGroup=a}),98);
__d("WASmaxOutMessagePublishMetaDestinationIdMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaDestinationId;a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{destination_id:d("WAWap").CUSTOM_STRING(a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeMetaDestinationIdMixin=a}),98);
__d("WASmaxOutMessagePublishPeerRecipientUsernameMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPeerRecipientUsername;a=d("WASmaxJsx").smax("smax$any",{peer_recipient_username:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeerRecipientUsernameMixin=a}),98);
__d("WASmaxOutMessagePublishPeerRecipientLIDMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPeerRecipientLid;a=d("WASmaxJsx").smax("smax$any",{peer_recipient_lid:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeerRecipientLIDMixin=a}),98);
__d("WASmaxOutMessagePublishPeerRecipientPNMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyPeerRecipientPn;a=d("WASmaxJsx").smax("smax$any",{peer_recipient_pn:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeerRecipientPNMixin=a}),98);
__d("WASmaxOutMessagePublishRecipientPNMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.messageRecipientPn;a=d("WASmaxJsx").smax("message",{recipient_pn:d("WAWap").JID(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRecipientPNMixin=a}),98);
__d("WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishPeerRecipientLIDMixin","WASmaxOutMessagePublishPeerRecipientPNMixin","WASmaxOutMessagePublishRecipientPNMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.recipientPN)return d("WASmaxOutMessagePublishRecipientPNMixin").mergeRecipientPNMixin(a,b.recipientPN);if(b.peerRecipientPN)return d("WASmaxOutMessagePublishPeerRecipientPNMixin").mergePeerRecipientPNMixin(a,b.peerRecipientPN);if(b.peerRecipientLID)return d("WASmaxOutMessagePublishPeerRecipientLIDMixin").mergePeerRecipientLIDMixin(a,b.peerRecipientLID);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup=a}),98);
__d("WASmaxOutMessagePublishStatusMentionMessageMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{is_status_mention:"true"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeStatusMentionMessageMixin=a}),98);
__d("WASmaxOutMessagePublishPrivacyTokenContentsMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.anyElementValue;a=d("WASmaxJsx").smax("smax$any",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePrivacyTokenContentsMixin=a}),98);
__d("WASmaxOutMessagePublishTCTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishPrivacyTokenContentsMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.tctokenT;a=a.privacyTokenContentsMixinArgs;b=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutMessagePublishPrivacyTokenContentsMixin").mergePrivacyTokenContentsMixin(d("WASmaxJsx").smax("tctoken",{t:d("WASmaxAttrs").OPTIONAL(d("WAWap").INT,b)}),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTCTokenMixin=a}),98);
__d("WASmaxOutMessagePublishThreadTypeTagEnumMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaThreadType;a=d("WASmaxJsx").smax("meta",{thread_type:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeThreadTypeTagEnumMixin=a}),98);
__d("WASmaxOutMessagePublishThreadTypeTagLegacyMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.metaThreadType;a=d("WASmaxJsx").smax("meta",{thread_type:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeThreadTypeTagLegacyMixin=a}),98);
__d("WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutMessagePublishThreadTypeTagEnumMixin","WASmaxOutMessagePublishThreadTypeTagLegacyMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.threadTypeTagEnum)return d("WASmaxOutMessagePublishThreadTypeTagEnumMixin").mergeThreadTypeTagEnumMixin(a,b.threadTypeTagEnum);if(b.threadTypeTagLegacy)return d("WASmaxOutMessagePublishThreadTypeTagLegacyMixin").mergeThreadTypeTagLegacyMixin(a,b.threadTypeTagLegacy);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeThreadTypeTagEnumOrLegacyMixinGroup=a}),98);
__d("WASmaxOutMessagePublishThreadTypeTagMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.threadTypeTagEnumOrLegacyMixinGroupArgs;a=d("WASmaxJsx").smax("message",null,d("WASmaxOutMessagePublishThreadTypeTagEnumOrLegacyMixinGroup").mergeThreadTypeTagEnumOrLegacyMixinGroup(d("WASmaxJsx").smax("meta",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeThreadTypeTagMixin=a}),98);
__d("WASmaxOutMessagePublishViewOnceMetaAttributeMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("message",null,d("WASmaxJsx").smax("meta",{view_once:"true"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeViewOnceMetaAttributeMixin=a}),98);
__d("WASmaxOutMessagePublishIndividualRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishAppdataMetaAttributeMixin","WASmaxOutMessagePublishBaseMixin","WASmaxOutMessagePublishGroupInviteTargetMixin","WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup","WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin","WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup","WASmaxOutMessagePublishMetaDestinationIdMixin","WASmaxOutMessagePublishPeerRecipientUsernameMixin","WASmaxOutMessagePublishPeripheralOriginMixin","WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup","WASmaxOutMessagePublishStatusMentionMessageMixin","WASmaxOutMessagePublishTCTokenMixin","WASmaxOutMessagePublishThreadTypeTagMixin","WASmaxOutMessagePublishViewOnceMetaAttributeMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.messageId,e=a.groupInviteTargetMixinArgs,f=a.threadTypeTagMixinArgs,g=a.peerRecipientUsernameMixinArgs,h=a.individualRecipientDeprecaredMixinArgs,i=a.appdataMetaAttributeMixinArgs,j=a.hasStatusMentionMessage,k=a.tCTokenMixinArgs,l=a.hasViewOnceMetaAttribute,m=a.metaDestinationIdMixinArgs,n=a.peripheralOriginMixinArgs,o=a.individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs,p=a.messageEditOrMessagePinOrRevokeMixinGroupArgs,q=a.recipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroupArgs;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutMessagePublishRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup").mergeRecipientPNOrPeerRecipientPNOrPeerRecipientLIDMixinGroup,b.optionalMerge(d("WASmaxOutMessagePublishMessageEditOrMessagePinOrRevokeMixinGroup").mergeMessageEditOrMessagePinOrRevokeMixinGroup,d("WASmaxOutMessagePublishIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup").mergeIndividualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroup(b.optionalMerge(d("WASmaxOutMessagePublishPeripheralOriginMixin").mergePeripheralOriginMixin,b.optionalMerge(d("WASmaxOutMessagePublishMetaDestinationIdMixin").mergeMetaDestinationIdMixin,b.optionalMerge(d("WASmaxOutMessagePublishViewOnceMetaAttributeMixin").mergeViewOnceMetaAttributeMixin,b.optionalMerge(d("WASmaxOutMessagePublishTCTokenMixin").mergeTCTokenMixin,b.optionalMerge(d("WASmaxOutMessagePublishStatusMentionMessageMixin").mergeStatusMentionMessageMixin,b.optionalMerge(d("WASmaxOutMessagePublishAppdataMetaAttributeMixin").mergeAppdataMetaAttributeMixin,b.optionalMerge(d("WASmaxOutMessagePublishIndividualRecipientDeprecaredMixin").mergeIndividualRecipientDeprecaredMixin,b.optionalMerge(d("WASmaxOutMessagePublishPeerRecipientUsernameMixin").mergePeerRecipientUsernameMixin,b.optionalMerge(d("WASmaxOutMessagePublishThreadTypeTagMixin").mergeThreadTypeTagMixin,b.optionalMerge(d("WASmaxOutMessagePublishGroupInviteTargetMixin").mergeGroupInviteTargetMixin,d("WASmaxOutMessagePublishBaseMixin").mergeBaseMixin(d("WASmaxJsx").smax("message",{id:d("WAWap").STANZA_ID(c)}),a),e),f),g),h),i),j),k),l),m),n),o),p),q);return b}g.makeIndividualRequest=a}),98);
__d("WASmaxMessagePublishIndividualRPC",["WAComms","WASmaxInMessagePublishIndividualResponseNegative","WASmaxInMessagePublishIndividualResponseSuccess","WASmaxOutMessagePublishIndividualRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutMessagePublishIndividualRequest").makeIndividualRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInMessagePublishIndividualResponseNegative").parseIndividualResponseNegative(b,a);if(c.success)return{name:"IndividualResponseNegative",value:c.value};b=d("WASmaxInMessagePublishIndividualResponseSuccess").parseIndividualResponseSuccess(b,a);if(b.success)return{name:"IndividualResponseSuccess",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Individual",{Negative:c,Success:b}))});return h.apply(this,arguments)}g.sendIndividualRPC=a}),98);
__d("WASendMsgRPC",["WADeprecatedSendIq","WADeprecatedWapParser","WAFrankingTypes","WAGetDeviceIdentityMixin","WAJids","WALogger","WAParseFranking","WASmaxMessagePublishIndividualRPC","WATimeUtils","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=!1);var g=d("WAJids").interpretAsGroupJid(a.protocolMsgId.chat),h=a.messageType.type==="text"&&a.messageType.invitedParticipantUserJid!=null;if(b.type==="direct_user"){var i={individualIndividualSingle:{messageTo:b.message.to,individualIndividualRetryMixinArgs:n(a.count,b.recipient),contentMixinsArgs:m(a,b.message),encTypeIndividualMixinArgs:o(b.message),encVersionArgs:p(b.message)}};i={messageId:a.externalId,deviceIdentityMixinArgs:d("WAGetDeviceIdentityMixin").getDeviceIdentityMixin(a.deviceIdentity),hasNoExtraFanout:a.messageType.isInvisible===!0?!0:null,messageEditOrMessagePinOrRevokeMixinGroupArgs:q(a.messageType),clientFrankingTagMixinArgs:c!=null&&c.frankingTag?{frankingTagElementValue:c.frankingTag}:null,hasMetaHideDecryptionPlaceholder:a.messageType.isInvisible===!0?!0:null,groupInviteTargetMixinArgs:h&&g!=null?{metaGroupInvite:g}:null,individualBotResponseFanoutOrIndividualBotRequestMessageOrIndividualIndividualSingleOrIndividualIndividualFanoutMixinGroupArgs:i,internalTestMixinArgs:f?{testConfig:"armadillo_express"}:null};e==null||e.addPoint("send_individual_rpc");i=(yield d("WASmaxMessagePublishIndividualRPC").sendIndividualRPC(i));if(i.name==="IndividualResponseSuccess"){var j;j=((j=i.value.deviceListStaleMixin)==null?void 0:j.phash)!=null?{type:"mismatch",local:null,server:i.value.deviceListStaleMixin.phash}:{type:"ok"};var s=i.value.serverFrankingTagMixin!=null&&c!=null?babelHelpers["extends"]({},c,{reportingTag:d("WAFrankingTypes").castToReportingTag(i.value.serverFrankingTagMixin.frankingReportingTagElementValue)}):null;return{type:"success",ts:d("WATimeUtils").castToUnixTime(i.value.t),phash:j,count:null,reportingMeta:s}}else{i.name;return{type:"error",errorCode:parseInt(i.value.error,10),backoff:parseInt((j=i.value.messageNackRetryAttributesMixin)==null?void 0:j.backoff,10),applicationError:(s=i.value.applicationNegativeAckMixin)==null?void 0:s.applicationError}}}j=a.messageType.isInvisible===!0?"false":d("WAWap").DROP_ATTR;i=b.participant!=null?d("WAWap").JID(b.participant):d("WAWap").DROP_ATTR;s=b.phash!=null&&b.type==="group"?d("WAWap").CUSTOM_STRING(b.phash):d("WAWap").DROP_ATTR;function t(){if(a.messageType.type==="text"&&a.messageType.isRevoked)return d("WAWap").CUSTOM_STRING("7");else if(a.messageType.type==="text"&&a.messageType.isEdit===!0)return d("WAWap").CUSTOM_STRING("1");return d("WAWap").DROP_ATTR}t=t();function u(){if(h&&g!=null)return d("WAWap").wap("meta",{"decrypt-fail":"hide",group_invite:d("WAWap").CUSTOM_STRING(g)});return a.messageType.isInvisible===!0||a.messageType.isEdit===!0?d("WAWap").wap("meta",{"decrypt-fail":"hide"}):null}u=u();f=f?d("WAWap").wap("test",{config:d("WAWap").CUSTOM_STRING("armadillo_express")}):null;var v=a.deviceIdentity!=null?d("WAWap").wap("device-identity",null,a.deviceIdentity):null,w=(c==null?void 0:c.frankingTag)!=null?d("WAWap").wap("franking",null,d("WAWap").wap("franking_tag",null,c.frankingTag)):null,x=null;b.participants!=null&&(x=d("WAWap").wap("participants",null,b.participants.map(function(a){return k(a)})));var y=null;b.message!=null&&(y=k(b.message,!0));j=d("WAWap").wap("message",{device_fanout:j,edit:t,id:d("WAWap").CUSTOM_STRING(a.externalId),participant:i,phash:s,to:d("WAWap").JID(b.messageTo),type:d("WAWap").CUSTOM_STRING(a.messageType.type)},u,w,x,y,v,f);r(a.externalId);e==null||e.addPoint("send_stanza_and_return_ack");t=(yield d("WADeprecatedSendIq").deprecatedSendStanzaAndReturnAck(j,{id:a.externalId,"class":"message",from:b.messageTo,participant:b.participant!=null?b.participant:null}));e==null||e.addPoint("send_msg_ack_parser");i=l.parse(t);if(i.success){e==null||e.addPoint("send_msg_ack_parser_success");s=i.success;u=s.errorCode;w=s.applicationError;x=s.backoff;if(u==null){y=i.success;v=y.ts;f=y.phash;j=y.count;s=c!=null?babelHelpers["extends"]({},c,{reportingTag:(t=i.success.reportingMeta)==null?void 0:t.reportingTag}):null;return{type:"success",ts:v,phash:f==null||f===b.phash?{type:"ok"}:{type:"mismatch",local:b.phash,server:f},count:j,reportingMeta:s}}else{e==null||e.addPoint("send_msg_ack_parser_failed",{"int":{errorCode:u,applicationError:w}});return{type:"error",errorCode:u,applicationError:w,backoff:x}}}else return{type:"parsing_error"}});return j.apply(this,arguments)}function k(a,b){b===void 0&&(b=!1);var c=d("WAWap").wap("enc",{count:a.count!=null?d("WAWap").INT(a.count):d("WAWap").DROP_ATTR,mediatype:a.mediaType!=null?d("WAWap").CUSTOM_STRING(a.mediaType):d("WAWap").DROP_ATTR,type:d("WAWap").CUSTOM_STRING(a.type),v:d("WAWap").CUSTOM_STRING(a.v)},a.ciphertext);if(b||a.encType==="group")return c;else return d("WAWap").wap("to",{jid:d("WAWap").DEVICE_JID(a.to)},c)}var l=new(c("WADeprecatedWapParser"))("sendMsgAck",function(a){a.assertTag("ack");return{count:a.maybeAttrInt("count"),errorCode:a.maybeAttrInt("error"),phash:a.maybeAttrString("phash"),applicationError:a.maybeAttrInt("application_error"),ts:a.attrTime("t"),reportingMeta:d("WAParseFranking").parseFrankingNode(a.maybeChild("franking")),backoff:a.maybeAttrInt("backoff")}});function m(a,b){if(a.messageType.type==="reaction")return{isContentTypeReaction:!0};if(a.messageType.type==="text")return{isContentTypeText:!0};a.messageType.type;if(b.mediaType!=null){b={contentTypeMediaOrMedianotifyMixinGroupArgs:{isContentTypeMedia:!0},encMediaTypeEncMediaTypeOrEncMediaTypeDeprecatedMixinGroupArgs:{encMediaType:{encMediatype:b.mediaType}}};return{contentTypeMediaSingle:b}}d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["WASendMsgRPC: Wrong media type: ",""])),a.messageType.mediaType);return{isContentTypeText:!0}}function n(a,b){a=a!=null?{encCount:a}:null;b=b!=null?{messageRecipient:b}:null;return{encRetryMixinArgs:a,individualIndividualRetryToPeerMixinArgs:b}}function o(a){return{encType:a.type,encElementValue:a.ciphertext}}function p(a){return a.v==="2"?{isEncVersion2:!0}:{isEncVersion3:!0}}function q(a){return a.type==="text"&&a.isRevoked?{isRevoke:!0}:null}function r(a){try{BigInt(a)}catch(b){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[WASendMsgRPC] Sending message with not allowed stanzaId: ",", error: ",""])),a,b)}}g.sendStanza=a;g.createEncWapNode=k}),98);
__d("WASendMsgInternal",["FBLogger","Promise","WABridge","WADevicesState","WAEncGroupMsg","WAEncUserMsg","WAGlobals","WAJids","WALogger","WAMarkSenderKeyAsSentApi","WAOdsEnums","WAQueryGroups","WAResultOrError","WASendMsgRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=10002,p=10009;function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;b.addPoint("encrypt_start",{string:{sentMessageType:a.messageType.isRevoked===!0?"revoke":a.messageType.type},bool:{isInvisibleMsg:a.messageType.type==="text"&&a.messageType.isInvisible===!0}});var f=(yield d("WAGlobals").getWaOneQueue().enqueue(function(c){c=c.cryptoManager;return a.type==="chat"?w(a,b,2,{cryptoManager:c}):u(a,{cryptoManager:c},2)},{operationType:"encrypt",flush:!0}));b.addPoint("finish_encrypt",{string:{chatType:f.success?f.value.type:f.error}});if(f.success===!1)throw c("FBLogger")("wmi").mustfixThrow("Encryption failed %s",f.error);f=f.value;b.addPoint("sending_stanza_start",{string:{encryptionType:f.type},"int":{ciphertextByteLength:(e=(e=(e=f.message)==null||(e=e.ciphertext)==null?void 0:e.length)!=null?e:(e=f.participants)==null||(e=e[0].ciphertext)==null?void 0:e.length)!=null?e:0}});e=(yield d("WASendMsgRPC").sendStanza(a,f,a.reportingMeta,b));b.addPoint("sending_stanza_end",{bool:{wai:e.type==="success"}});return{serverResponse:e,encryption:f}});return q.apply(this,arguments)}function e(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f;e===void 0&&(e=!1);B(a,c);var g=e?3:2,h=function(b){return a.type==="chat"?w(a,c,g,{cryptoManager:b}):u(a,{cryptoManager:b},g)},i=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return h(a)},{operationType:"encrypt",flush:!0})),j=i.success?i.value.type:i.error;c.addPoint("finish_encrypt",{string:{chatType:j}});if(i.success===!1){d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["MAWSendMsg Failed to encrypt message for "," message"])),j);return d("WAResultOrError").makeError({type:"encryption-error",isRetriable:!1})}i=i.value;c.addPoint("sending_stanza_start",{string:{encryptionType:i.type},"int":{ciphertextByteLength:(f=(f=(f=i.message)==null||(f=f.ciphertext)==null?void 0:f.length)!=null?f:(f=i.participants)==null||(f=f[0].ciphertext)==null?void 0:f.length)!=null?f:0}});f=(yield d("WASendMsgRPC").sendStanza(a,i,a.reportingMeta,c,e));c.addPoint("sending_stanza_end");if(f.type==="success"){c.addPoint("send_stanza_success");try{e=(yield (n||(n=b("Promise"))).all([x(a,i,f,c),z(i)]));e=e[0];c.addPoint("mark_sender_key_sent");return d("WAResultOrError").makeResult({baseKey:(i=i.message)==null?void 0:i.baseKey,reportingMeta:f.reportingMeta,serverTs:f.ts,meta:{pOrDhashMismatch:e}})}catch(a){c.addPoint("send_stanza_failed");throw a}}f.type;C(f,j,c);f.applicationError===o&&(yield d("WAGlobals").getDependencies().handleReachabilityErrorAdminMsg(a.chat));if(f.type==="parsing_error")return d("WAResultOrError").makeError({type:"result-parsing-error",isRetriable:!0});if(f.type==="error"){i=f.errorCode!=null&&f.errorCode>=500;if(i)return d("WAResultOrError").makeError({type:"retryable-error",backoff:f.backoff,isRetriable:!0});else return d("WAResultOrError").makeError({type:"non-retryable-error",applicationErrorCode:f.applicationError,errorCode:f.errorCode,isRetriable:!1})}return d("WAResultOrError").makeError({type:"unexpected-message-codepath",details:"impossible-server-error-result",isRetriable:!0,applicationErrorCode:f.applicationError})});return r.apply(this,arguments)}function s(a){d("WADevicesState").getDevicesState().reset([a]);return d("WADevicesState").getDevicesState().waitForUserDevices([a],"SendMsgUtil_recoverUser",!0)}function t(a){return d("WAJids").switchOnChatJidType(a,{interopUser:s,msgrUser:s,lidUser:s,phoneUser:s,group:function(a){return d("WAQueryGroups").queryGroups(null,{type:"array",groups:[a]},!0)}})}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.chat,f=a.to,g=a.messageBytes,h=a.messageType,i=a.count,j=a.sessionInfo,k=a.identityKey,l=a.backupDirective,m=(yield d("WAEncUserMsg").encryptDeviceJidMessage(f,{type:"message",chat:e,messageBytes:g,messageType:h,applicationPayloadVersion:c,backupDirective:l},b,i,j,k));return d("WAJids").switchOnUserChatJidType(e,{user:function(b){return m!=null?d("WAResultOrError").makeResult({type:"direct_user",messageTo:a.to,message:m,recipient:d("WAGlobals").isPeerDevice(a.to)?b:null}):d("WAResultOrError").makeError("direct_user")},group:function(b){return m!=null?d("WAResultOrError").makeResult({type:"direct_group",messageTo:b,participant:a.to,message:m}):d("WAResultOrError").makeError("direct_group")}})});return v.apply(this,arguments)}function w(a,c,e,f){var g=a.recipients,j=a.messageBytes,k=a.messageType,l=a.chat,m=a.backupDirective;return d("WAJids").switchOnUserChatJidType(l,{user:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAEncUserMsg").encryptUserMsg(g,{type:"message",messageBytes:j,messageType:k,chat:a,applicationPayloadVersion:e,backupDirective:m},f,c)),h=b.participants;return h!=null&&h.length>0?d("WAResultOrError").makeResult({type:"user",messageTo:a,participants:h,phash:b.phash}):d("WAResultOrError").makeError("user")});function h(b){return a.apply(this,arguments)}return h}(),group:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptChatMessage -- group message"])));var b=(yield d("WAEncGroupMsg").encryptGroupMsg(a,g,j,k,f,m,c));d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg -- encryptChatMessage -- finish encrypt group message"])));var e=b.participants,l=b.encNode;return e==null&&l==null?d("WAResultOrError").makeError("group"):d("WAResultOrError").makeResult({type:"group",messageTo:a,participants:e,message:l,senderKeyDistributionInfo:b.senderKeyDistributionInfo,phash:b.phash})});function e(b){return a.apply(this,arguments)}return e}()})}function x(a,b,c,d){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){if(c.type!=="success")return!1;c=c.phash;if(c.type==="mismatch"){e.addPoint("phash_mismatch");d("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Got phash mismatch, local[","] server[","]"])),c.local,c.server);d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.PHASH_MISMATCH,key:b.type});yield t(a.chat);e.addPoint("participant_recovery_finished");return!0}return!1});return y.apply(this,arguments)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.senderKeyDistributionInfo!=null){a=a.senderKeyDistributionInfo;var b=a.group,c=a.senderKeyId;a=a.knowsSenderKey;yield d("WAMarkSenderKeyAsSentApi").markSenderKeyAsSent(b,c,a)}});return A.apply(this,arguments)}function B(a,b){var c=0;a.type==="chat"&&(c=a.recipients.reduce(function(a,b){return a+b.devicesInfo.length},0));var d=a.messageType.type==="text"&&a.messageType.isRevoked;d=d?"revoke":a.messageType.type;b.addPoint("start_encrypt",{string:{sentMessageType:d},"int":{numDevices:c},bool:{isInvisibleMsg:a.messageType.type==="text"&&a.messageType.isInvisible===!0}})}function C(a,b,c){if(a.type==="success")return;a.type==="parsing_error"&&(d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["sendMessage ack success is false, chatType:",""])),b),c.addPoint("ack_parse_fail"));var e=a.errorCode;a=a.applicationError;a===o&&c.addPoint("reachability_error_code");d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["sendMessage ack success is true, error: ",", applicationError: ",", chatType:",""])),e,a,b);e!=null&&c.addPoint("ack_success_error_"+e,{"int":{applicationError:a}});a===p&&c.addPoint("sender_blocked",{})}g.sendMessageV2=a;g.sendMessage=e}),98);
__d("WASentBytesCacheApi",["MAWTransactionMode","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";c=(a=d("WADbTransactor")).makeSignalTransactor({sentBytesCache:(b=d("MAWTransactionMode")).READWRITE},"deleteSentBytes",function(a){return function(b){return a.sentBytesCache.bulkDelete(b)}});e=a.makeSignalTransactor({sentBytesCache:b.READONLY},"loadExpired",function(a){return function(b){return a.sentBytesCache.where("ts").belowOrEqual(b).toArray().then(function(a){return a.map(function(a){return a.waMsgId})})}});f=a.makeSignalTransactor({sentBytesCache:b.READONLY},"loadSentBytes",function(a){return function(b){return a.sentBytesCache.bulkGet(b).then(function(a){return a.filter(Boolean)})}});d=a.makeSignalTransactor({sentBytesCache:b.READWRITE},"saveSentBytes",function(a){return function(b){return a.sentBytesCache.put(b).then(function(){})}});g.deleteSentBytes=c;g.loadExpired=e;g.loadSentBytes=f;g.saveSentBytes=d}),98);
__d("WASentBytesCache",["WAGlobals","WAJids","WAMsg","WASentBytesCacheApi","WATagsLogger","WATimeUtils","WAWaitForUserUnblocked","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["SentBytesCache"]),k=30*24*60*60;c=function(){function a(){var a=this;void d("WAWaitForUserUnblocked").waitForUserUnblocked().then(function(){a.$1()["catch"](function(a){j.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to prune sent bytes: ",""])),a)})})}var c=a.prototype;c.loadSentBytes=function(a){return d("WASentBytesCacheApi").loadSentBytes(a)};c.getMsgsForRetry=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=Array.from(new Set(a.map(function(a){a=a.deviceJid;return d("WAJids").extractUserJid(a)}))),c=new Map();try{c=(yield d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return a.storage.bulkLoadIdentities(b)},{operationType:"retries_load_identities",flush:!1,afterInit:!0}))}catch(a){j.ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["It fails to bulkLoadIdentities: ",""])),a.toString())}var e=(yield this.loadSentBytes(a.map(function(a){a=a.protocolMsgId;return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.chat,externalId:a.externalId})})));return a.map(function(a){var b=a.deviceJid,f=a.protocolMsgId,g=d("WAMsg").craftWAMsgIdString({author:f.author,chat:f.chat,externalId:f.externalId});f=(f=c.get(d("WAJids").extractUserJid(b)))==null?void 0:f.get(b);if(f==null)return{type:"unauthorized"};b=e.find(function(a){return a.waMsgId===g});if(b==null)return{type:"missing"};else if(!d("WATimeUtils").happenedWithin(b.ts,k))return{type:"unauthorized"};return{frankingKey:b.frankingKey,frankingVersion:b.frankingVersion,messageBytes:b.messageBytes,backupDirective:b.backupDirective,messageType:b.messageType,protocolMsgId:b.protocolMsgId,retryCount:a.retryCount+1,type:"unacked"}})});function c(b){return a.apply(this,arguments)}return c}();c.saveSentBytes=function(a){return d("WASentBytesCacheApi").saveSentBytes(a)};c.$1=function(){return d("WASentBytesCacheApi").loadExpired(d("WATimeUtils").pastUnixTime(k)).then(function(a){return d("WASentBytesCacheApi").deleteSentBytes(a)})};return a}();var l=new c();function a(){return l}g.SentBytesCache=c;g.sentBytesCache=a}),98);
__d("WASetMetaApi",["WASignalDB"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return d("WASignalDB").getDb().runInTransaction(["meta"],"readwrite",function(b){return b.stores.meta.bulkPut(Object.entries(a).map(function(a){var b,c=a[0];a=a[1];return{key:c,value:(b={},b[c]=a,b)}}))},d("WASignalDB").signalOp("setMeta"))};g.setMeta=a}),98);
__d("WASmaxInAppdataPublishAckMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"class","appdata");if(!c.success)return c;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({"class":c.value,t:b.value})}g.parseAckMixin=a}),98);
__d("WASmaxInAppdataPublishPeerResponseNegative",["WAResultOrError","WASmaxInAppdataPublishAckMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxParseUtils").attrString(a,"error");if(!c.success)return c;a=d("WASmaxInAppdataPublishAckMixin").parseAckMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({error:c.value},a.value))}g.parsePeerResponseNegative=a}),98);
__d("WASmaxInAppdataPublishDeviceListStaleMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ack");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"phash");return!b.success?b:d("WAResultOrError").makeResult({phash:b.value})}g.parseDeviceListStaleMixin=a}),98);
__d("WASmaxInAppdataPublishPeerResponseSuccess",["WAResultOrError","WASmaxInAppdataPublishAckMixin","WASmaxInAppdataPublishDeviceListStaleMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"ack");if(!c.success)return c;c=d("WASmaxInAppdataPublishAckMixin").parseAckMixin(a,b);if(!c.success)return c;b=d("WASmaxInAppdataPublishDeviceListStaleMixin").parseDeviceListStaleMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},c.value,{deviceListStaleMixin:b.success?b.value:null}))}g.parsePeerResponseSuccess=a}),98);
__d("WASmaxOutAppdataPublishDeviceIdentityMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceIdentityElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("device-identity",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeDeviceIdentityMixin=a}),98);
__d("WASmaxOutAppdataPublishInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.testConfig;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("test",{config:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeInternalTestMixin=a}),98);
__d("WASmaxOutAppdataPublishRequestIDMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestIdElementValue;a=d("WASmaxJsx").smax("trace",null,d("WASmaxJsx").smax("request_id",null,a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRequestIDMixin=a}),98);
__d("WASmaxOutAppdataPublishTraceIDMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.edgeIdElementValue;a=d("WASmaxJsx").smax("edge_id",null,a);return a}function i(a){var b=a.deviceArgs,c=a.correlationIdType;a=a.idElementValue;c=d("WASmaxJsx").smax("correlation_id",{type:d("WAWap").CUSTOM_STRING(c)},d("WASmaxJsx").smax("id",null,a),d("WASmaxChildren").OPTIONAL_CHILD(j,b));return c}function j(a){a=a.deviceId;a=d("WASmaxJsx").smax("device",{id:d("WAWap").INT(a)});return a}function k(a){var b=a.edgeIdArgs,c=a.correlationIdArgs;a=a.traceIdElementValue;a=d("WASmaxJsx").smax("trace",null,[d("WASmaxJsx").smax("trace_id",null,a),d("WASmaxChildren").OPTIONAL_CHILD(h,b)].concat(d("WASmaxChildren").REPEATED_CHILD(i,c,0,10)));return a}function a(a,b){b=k(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeTraceIDEdgeId=h;g.makeTraceIDCorrelationId=i;g.makeTraceIDCorrelationIdDevice=j;g.mergeTraceIDMixin=a}),98);
__d("WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup",["WASmaxMixinGroupExhaustiveError","WASmaxOutAppdataPublishRequestIDMixin","WASmaxOutAppdataPublishTraceIDMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.requestID)return d("WASmaxOutAppdataPublishRequestIDMixin").mergeRequestIDMixin(a,b.requestID);if(b.traceID)return d("WASmaxOutAppdataPublishTraceIDMixin").mergeTraceIDMixin(a,b.traceID);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergeRequestOrTraceIDMixinGroup=a}),98);
__d("WASmaxOutAppdataPublishTraceContextMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup"],(function(a,b,c,d,e,f,g){function h(a){a=a.requestOrTraceIDMixinGroupArgs;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxOutAppdataPublishRequestOrTraceIDMixinGroup").mergeRequestOrTraceIDMixinGroup(d("WASmaxJsx").smax("trace",null),a));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeTraceContextMixin=a}),98);
__d("WASmaxOutAppdataPublishWithDeviceListCheckMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.appdataDeviceListCheck;a=d("WASmaxJsx").smax("appdata",{device_list_check:d("WAWap").CUSTOM_STRING(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeWithDeviceListCheckMixin=a}),98);
__d("WASmaxOutAppdataPublishBaseMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishDeviceIdentityMixin","WASmaxOutAppdataPublishInternalTestMixin","WASmaxOutAppdataPublishTraceContextMixin","WASmaxOutAppdataPublishWithDeviceListCheckMixin"],(function(a,b,c,d,e,f,g){function h(a){var b,c=a.deviceIdentityMixinArgs,e=a.withDeviceListCheckMixinArgs,f=a.internalTestMixinArgs;a=a.traceContextMixinArgs;b=(b=d("WASmaxMixins")).optionalMerge(d("WASmaxOutAppdataPublishTraceContextMixin").mergeTraceContextMixin,b.optionalMerge(d("WASmaxOutAppdataPublishInternalTestMixin").mergeInternalTestMixin,b.optionalMerge(d("WASmaxOutAppdataPublishWithDeviceListCheckMixin").mergeWithDeviceListCheckMixin,b.optionalMerge(d("WASmaxOutAppdataPublishDeviceIdentityMixin").mergeDeviceIdentityMixin,d("WASmaxJsx").smax("appdata",null),c),e),f),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseMixin=a}),98);
__d("WASmaxOutAppdataPublishEncPayloadMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.encElementValue;a=d("WASmaxJsx").smax("enc",null,a);return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncPayloadMixin=a}),98);
__d("WASmaxOutAppdataPublishEncTypeIndividualMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncPayloadMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.encType;b=d("WASmaxOutAppdataPublishEncPayloadMixin").mergeEncPayloadMixin(d("WASmaxJsx").smax("enc",{type:d("WAWap").CUSTOM_STRING(b)}),a);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncTypeIndividualMixin=a}),98);
__d("WASmaxOutAppdataPublishEncVersionFutureproofMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encV;a=d("WASmaxJsx").smax("enc",{v:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncVersionFutureproofMixin=a}),98);
__d("WASmaxOutAppdataPublishPeerPeerFanoutMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncTypeIndividualMixin","WASmaxOutAppdataPublishEncVersionFutureproofMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.toJid,c=a.encVersionFutureproofMixinArgs;a=a.encTypeIndividualMixinArgs;b=d("WASmaxJsx").smax("to",{jid:d("WAWap").DEVICE_JID(b)},d("WASmaxOutAppdataPublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(d("WASmaxOutAppdataPublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(d("WASmaxJsx").smax("enc",null),c),a));return b}function i(a){var b=a.toArgs;a=a.appdataTo;a=d("WASmaxJsx").smax("appdata",{to:d("WAWap").USER_JID(a)},d("WASmaxJsx").smax("participants",null,d("WASmaxChildren").REPEATED_CHILD(h,b,1,24)));return a}function a(a,b){b=i(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makePeerPeerFanoutParticipantsTo=h;g.mergePeerPeerFanoutMixin=a}),98);
__d("WASmaxOutAppdataPublishEncRetryMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.encCount;a=d("WASmaxJsx").smax("enc",{count:d("WAWap").INT(a)});return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeEncRetryMixin=a}),98);
__d("WASmaxOutAppdataPublishRetryMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncRetryMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.appdataT;a=a.encRetryMixinArgs;b=d("WASmaxJsx").smax("appdata",{t:d("WAWap").INT(b)},d("WASmaxOutAppdataPublishEncRetryMixin").mergeEncRetryMixin(d("WASmaxJsx").smax("enc",null),a));return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeRetryMixin=a}),98);
__d("WASmaxOutAppdataPublishPeerPeerSingleMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutAppdataPublishEncTypeIndividualMixin","WASmaxOutAppdataPublishEncVersionFutureproofMixin","WASmaxOutAppdataPublishRetryMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.appdataTo,c=a.retryMixinArgs,e=a.encVersionFutureproofMixinArgs;a=a.encTypeIndividualMixinArgs;b=d("WASmaxMixins").optionalMerge(d("WASmaxOutAppdataPublishRetryMixin").mergeRetryMixin,d("WASmaxJsx").smax("appdata",{to:d("WAWap").DEVICE_JID(b)},d("WASmaxOutAppdataPublishEncTypeIndividualMixin").mergeEncTypeIndividualMixin(d("WASmaxOutAppdataPublishEncVersionFutureproofMixin").mergeEncVersionFutureproofMixin(d("WASmaxJsx").smax("enc",null),e),a)),c);return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergePeerPeerSingleMixin=a}),98);
__d("WASmaxOutAppdataPublishPeerMsgTypes",["WASmaxMixinGroupExhaustiveError","WASmaxOutAppdataPublishPeerPeerFanoutMixin","WASmaxOutAppdataPublishPeerPeerSingleMixin"],(function(a,b,c,d,e,f,g){function a(a,b){if(b.peerPeerFanout)return d("WASmaxOutAppdataPublishPeerPeerFanoutMixin").mergePeerPeerFanoutMixin(a,b.peerPeerFanout);if(b.peerPeerSingle)return d("WASmaxOutAppdataPublishPeerPeerSingleMixin").mergePeerPeerSingleMixin(a,b.peerPeerSingle);throw new(d("WASmaxMixinGroupExhaustiveError").SmaxMixinGroupExhaustiveError)()}g.mergePeerMsgTypes=a}),98);
__d("WASmaxOutAppdataPublishPeerRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAppdataPublishBaseMixin","WASmaxOutAppdataPublishPeerMsgTypes","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.appdataId,c=a.appdataPushPriority,e=a.peerMsgTypesArgs;b=d("WASmaxOutAppdataPublishPeerMsgTypes").mergePeerMsgTypes(d("WASmaxOutAppdataPublishBaseMixin").mergeBaseMixin(d("WASmaxJsx").smax("appdata",{id:d("WAWap").STANZA_ID(b),category:"peer",push_priority:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c)}),a),e);return b}g.makePeerRequest=a}),98);
__d("WASmaxAppdataPublishPeerRPC",["WAComms","WASmaxInAppdataPublishPeerResponseNegative","WASmaxInAppdataPublishPeerResponseSuccess","WASmaxOutAppdataPublishPeerRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutAppdataPublishPeerRequest").makePeerRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInAppdataPublishPeerResponseNegative").parsePeerResponseNegative(b,a);if(c.success)return{name:"PeerResponseNegative",value:c.value};b=d("WASmaxInAppdataPublishPeerResponseSuccess").parsePeerResponseSuccess(b,a);if(b.success)return{name:"PeerResponseSuccess",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Peer",{Negative:c,Success:b}))});return h.apply(this,arguments)}g.sendPeerRPC=a}),98);/*FB_PKG_DELIM*/
__d("IGDSPrivateToast.react",["BaseTheme.react","IGDSBox.react","IGDSTextVariants.react","IGDSThemeConfig","react","react-compiler-runtime","useCurrentDisplayMode","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j="x1xuf6tn-B",k={messageBox:{flexBasis:"x1t1x2f9",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",height:"x5yr21d",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0},rootBox:{flexBasis:"x1t1x2f9",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(32),e=a.ref,f=a.actionComponent,g=a["data-testid"],h=a.icon,l=a.isVisible,m=a.message,n=a.messageSecondary,o=a.onClose;a=a.target;a=a===void 0?"center":a;var p=c("useFadeEffect")(l),q=p[1];p=p[2];var r=c("useCurrentDisplayMode")();r=r==="dark"?"light":"dark";var s;b[0]!==f||b[1]!==l||b[2]!==q||b[3]!==a?(s={0:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xg01cxk xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xeroabh x1ww3oar"},4:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xg01cxk xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid"},2:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xeroabh x1ww3oar xs4xyr0 x1wpepyw x4hg4is x1iy03kw"},6:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xs4xyr0 x1wpepyw x4hg4is x1iy03kw"},1:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xeroabh x1ww3oar xs4xyr0 xqf3suz x4hg4is xg01cxk"},5:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xs4xyr0 xqf3suz x4hg4is xg01cxk"},3:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xeroabh x1ww3oar xs4xyr0 xqf3suz x4hg4is xg01cxk"},7:{className:"x6s0dn4 x1jx94hy x1obq294 x5a5i1n xde0f50 x15x8krk xdy0x9s x78zum5 x2lah0s x1qughib xyamay9 x1xnnf8n x1l90r2v x106a9eq x2b8uid xs4xyr0 xqf3suz x4hg4is xg01cxk"}}[!!(a==="center"&&f==null)<<2|!!q<<1|!!!l<<0],b[0]=f,b[1]=l,b[2]=q,b[3]=a,b[4]=s):s=b[4];b[5]!==o?(l=function(a){a.animationName===j&&o!=null&&o()},b[5]=o,b[6]=l):l=b[6];b[7]!==h?(q=h!=null&&i.jsx(c("IGDSBox.react"),{marginEnd:3,children:h}),b[7]=h,b[8]=q):q=b[8];b[9]!==m?(a=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{maxLines:3,textAlign:"start",zeroMargin:!0,children:m}),b[9]=m,b[10]=a):a=b[10];b[11]!==n?(h=n!=null&&i.jsx(c("IGDSBox.react"),{marginTop:1,children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",maxLines:1,textAlign:"start",zeroMargin:!0,children:n})}),b[11]=n,b[12]=h):h=b[12];b[13]!==a||b[14]!==h?(m=i.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",wrap:!0,xstyle:k.messageBox,children:[a,h]}),b[13]=a,b[14]=h,b[15]=m):m=b[15];b[16]!==e||b[17]!==q||b[18]!==m?(n=i.jsxs(c("IGDSBox.react"),{alignItems:"center",containerRef:e,direction:"row",overflow:"hidden",xstyle:k.rootBox,children:[q,m]}),b[16]=e,b[17]=q,b[18]=m,b[19]=n):n=b[19];b[20]!==f?(a=f!=null&&i.jsx("div",{className:"x1c4vz4f x2lah0s",children:f}),b[20]=f,b[21]=a):a=b[21];b[22]!==s||b[23]!==l||b[24]!==n||b[25]!==a?(h=i.jsxs("div",babelHelpers["extends"]({},s,{onAnimationEnd:l,children:[n,a]})),b[22]=s,b[23]=l,b[24]=n,b[25]=a,b[26]=h):h=b[26];b[27]!==p||b[28]!==g||b[29]!==r||b[30]!==h?(e=i.jsx(c("BaseTheme.react"),{"aria-atomic":!0,config:c("IGDSThemeConfig"),displayMode:r,ref:p,role:"alert",testid:void 0,children:h}),b[27]=p,b[28]=g,b[29]=r,b[30]=h,b[31]=e):e=b[31];return e}g["default"]=a}),98);
__d("IGDSPrivateToastContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({onHideFactory:null});g["default"]=b}),98);
__d("IGDSPrivateToaster.react",["BaseContextualLayer.react","DateConsts","IGDSPrivateToast.react","IGDSPrivateToastContext","PolarisUA","clearTimeout","react","react-compiler-runtime","setTimeout","stylex","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.useLayoutEffect;b.useMemo;var m=b.useRef,n=b.useState,o={bottomContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,position:"xixxii4",transform:"xjebx4m",$$css:!0},bottomLeftContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",insetInlineStart:"xr2ch4k",left:null,right:null,position:"xixxii4",$$css:!0},bottomRightContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",insetInlineEnd:"x145d82y",left:null,right:null,position:"xixxii4",$$css:!0},centerContainer:{left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,position:"xixxii4",top:"xwa60dl",transform:"x11lhmoz",zIndex:"x1vjfegm",$$css:!0}},p=3*d("DateConsts").MS_PER_SEC;function q(a){var b=d("react-compiler-runtime").c(29),e=a.config;a=a.toast;var f=n("transition"),g=f[0],h=f[1];f=n(null);var i=f[0],o=f[1],q=e.isVisible===!1;f=n(q);var r=f[0],s=f[1],t=m(null),v=e.isSticky!=null&&e.isSticky,w=e.duration!=null?e.duration:p,x;b[0]!==q?(f=function(){return s(!q)},x=[q],b[0]=q,b[1]=f,b[2]=x):(f=b[1],x=b[2]);l(f,x);b[3]!==w||b[4]!==v||b[5]!==r?(f=function(){r&&!v?t.current=c("setTimeout")(function(){s(!1)},w):c("clearTimeout")(t.current);return function(){return c("clearTimeout")(t.current)}},b[3]=w,b[4]=v,b[5]=r,b[6]=f):f=b[6];b[7]!==e||b[8]!==w||b[9]!==v||b[10]!==r?(x=[r,e,w,v],b[7]=e,b[8]=w,b[9]=v,b[10]=r,b[11]=x):x=b[11];k(f,x);b[12]!==e||b[13]!==g||b[14]!==i?(f=function(){i==null||i(g),e.onAfterHide==null||e.onAfterHide()},b[12]=e,b[13]=g,b[14]=i,b[15]=f):f=b[15];var y=f;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(a){o(function(b){return a});return function(a){s(!1),h(a)}},b[16]=x):x=b[16];f=x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x={onHideFactory:f},b[17]=x):x=b[17];f=x;x=f;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"xjkvuk6"},b[18]=f):f=b[18];var z;b[19]!==r||b[20]!==y?(z=function(){r||y()},b[19]=r,b[20]=y,b[21]=z):z=b[21];b[22]!==e||b[23]!==r||b[24]!==a?(x=j.jsx(c("IGDSPrivateToastContext").Provider,{value:x,children:j.jsx(u,{config:e,isVisible:r,toast:a})}),b[22]=e,b[23]=r,b[24]=a,b[25]=x):x=b[25];b[26]!==z||b[27]!==x?(a=j.jsx("div",babelHelpers["extends"]({},f,{onAnimationEnd:z,children:x})),b[26]=z,b[27]=x,b[28]=a):a=b[28];return a}function a(a){var b=d("react-compiler-runtime").c(23),e=a["data-testid"];a=a.items;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisUA").isMobile(),b[0]=f):f=b[0];var g=f;f=m(null);if(a.length===0)return null;var h,i,k,l;b[1]!==a?(l=[],k=[],h=[],i=[],a.map(function(a){bb5:switch(a.toast.target){case"center":l.push(a);break bb5;case"bottom":k.push(a);break bb5;case"bottom-left":g?k.push(a):h.push(a);break bb5;case"bottom-right":g?k.push(a):i.push(a);break bb5;default:v(a.toast)?k.push(a):l.push(a)}}),b[1]=a,b[2]=h,b[3]=i,b[4]=k,b[5]=l):(h=b[2],i=b[3],k=b[4],l=b[5]);b[6]!==l||b[7]!==e?(a=j.jsx(s,{"data-testid":void 0,items:l,target:"center"}),b[6]=l,b[7]=e,b[8]=a):a=b[8];var n;b[9]!==k||b[10]!==e?(n=j.jsx(s,{"data-testid":void 0,items:k,target:"bottom"}),b[9]=k,b[10]=e,b[11]=n):n=b[11];var o;b[12]!==h||b[13]!==e?(o=j.jsx(s,{"data-testid":void 0,items:h,target:"bottom-left"}),b[12]=h,b[13]=e,b[14]=o):o=b[14];var p;b[15]!==i||b[16]!==e?(p=j.jsx(s,{"data-testid":void 0,items:i,target:"bottom-right"}),b[15]=i,b[16]=e,b[17]=p):p=b[17];b[18]!==a||b[19]!==n||b[20]!==o||b[21]!==p?(e=j.jsxs(c("BaseContextualLayer.react"),{contextRef:f,children:[a,n,o,p]}),b[18]=a,b[19]=n,b[20]=o,b[21]=p,b[22]=e):e=b[22];return e}function r(a){switch(a){case"center":return o.centerContainer;case"bottom-left":return o.bottomLeftContainer;case"bottom-right":return o.bottomRightContainer;case"bottom":default:return o.bottomContainer}}function s(a){var b=d("react-compiler-runtime").c(8),e=a["data-testid"],f=a.items;a=a.target;if(f.length>0){var g;b[0]!==a?(g=(h||(h=c("stylex"))).props(r(a)),b[0]=a,b[1]=g):g=b[1];b[2]!==f?(a=f.map(t),b[2]=f,b[3]=a):a=b[3];b[4]!==e||b[5]!==g||b[6]!==a?(f=j.jsx("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:a})),b[4]=e,b[5]=g,b[6]=a,b[7]=f):f=b[7];return f}return null}function t(a){var b=a.config;a=a.toast;return j.jsx(q,{config:b,toast:a},b.key)}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b=d("react-compiler-runtime").c(12),e=a.config,f=a.isVisible;a=a.toast;var g=e==null?void 0:e.onImpressionCallback,h;b[0]!==g?(h={onImpressionStart:g},b[0]=g,b[1]=h):h=b[1];g=c("useSinglePartialViewImpression")(h);b[2]!==e.key||b[3]!==e.onAfterHide||b[4]!==f||b[5]!==a.actionComponent||b[6]!==a.icon||b[7]!==a.message||b[8]!==a.messageSecondary||b[9]!==a.target||b[10]!==g?(h=j.jsx(c("IGDSPrivateToast.react"),{actionComponent:a.actionComponent,"data-testid":void 0,icon:a.icon,isVisible:f,message:a.message,messageSecondary:a.messageSecondary,onClose:e.onAfterHide,ref:g,target:a.target}),b[2]=e.key,b[3]=e.onAfterHide,b[4]=f,b[5]=a.actionComponent,b[6]=a.icon,b[7]=a.message,b[8]=a.messageSecondary,b[9]=a.target,b[10]=g,b[11]=h):h=b[11];return h}function v(a){return a.actionComponent!=null}g["default"]=a}),98);
__d("PolarisFBSDK",[],(function(a,b,c,d,e,f){function a(){try{window.FB&&!window.FB.__buffer||(function(){var c=Function.prototype.apply;function d(a,b){return function(){return c.call(a,b,arguments)}}var b={__type:"JS_SDK_SANDBOX",window:window,document:window.document},e=["setTimeout","setInterval","clearTimeout","clearInterval"];for(var f=0;f<e.length;f++)b[e[f]]=d(window[e[f]],window);(function(){var a=window,c=this,d={};(function(a){var b={},e=function(a,b){if(!a&&!b)return null;var c={};typeof a!=="undefined"&&(c.type=a);typeof b!=="undefined"&&(c.signature=b);return c},f=function(a,b){return e(a&&/^[A-Z]/.test(a)?a:void 0,b&&(b.params&&b.params.length||b.returns)?"function("+(b.params?b.params.map(function(a){return/\?/.test(a)?"?"+a.replace("?",""):a}).join(","):"")+")"+(b.returns?":"+b.returns:""):void 0)};a=function(a,b,c){return a};var g=function(a,b,e){"sourcemeta"in d&&(a.__SMmeta=b);"typechecks"in d&&(b=f(b?b.name:void 0,e),b&&c.__w(a,b));return a},h=function(a,b,c){return c.apply(a,b)},i;(function(a,b,d,e){e&&e.params&&c.__t.apply(a,e.params);d=d.apply(a,b);e&&e.returns&&c.__t([d,e.returns]);return d});i=function(a,c,d,f,e){e&&(e.callId||(e.callId=e.module+":"+(e.line||0)+":"+(e.column||0)),f=e.callId,b[f]=(b[f]||0)+1);return d.apply(a,c)};typeof d==="undefined"?(c.__annotator=a,c.__bodyWrapper=h):(c.__annotator=g,"codeusage"in d?(c.__annotator=a,c.__bodyWrapper=i,c.__bodyWrapper.getCodeUsage=function(){return b},c.__bodyWrapper.clearCodeUsage=function(){b={}}):"typechecks"in d?c.__bodyWrapper=h:c.__bodyWrapper=h)})(typeof c!=="undefined"?c:typeof b!=="undefined"?b:typeof window!=="undefined"?window:typeof this!=="undefined"?this:typeof a!=="undefined"?a:{});(function(a){a.__t=function(a){return a[0]},a.__w=function(a){return a}})(typeof c!=="undefined"?c:typeof b!=="undefined"?b:typeof window!=="undefined"?window:typeof this!=="undefined"?this:typeof a!=="undefined"?a:{});(function(b){var d={},e=["global","require","requireDynamic","requireLazy","module","exports"],f=["global","require","importDefault","importNamespace","requireLazy","module","exports"],g=1,h=32,i=64,j={},a=Object.prototype.hasOwnProperty;function k(c,j){if(!a.call(d,c)){if(j)return null;throw new Error("Module "+c+" has not been defined")}j=d[c];if(j.resolved)return j;c=j.special;var k=j.factory.length,o=c&h?f.concat(j.deps):e.concat(j.deps),p=[],q;for(var r=0;r<k;r++){switch(o[r]){case"module":q=j;break;case"exports":q=j.exports;break;case"global":q=b;break;case"require":q=l;break;case"requireDynamic":q=null;break;case"requireLazy":q=null;break;case"importDefault":q=m;break;case"importNamespace":q=n;break;default:typeof o[r]==="string"&&(q=l.call(null,o[r]))}p.push(q)}o=j.factory.apply(b,p);o&&(j.exports=o);c&i?j.exports!=null&&a.call(j.exports,"default")&&(j.defaultExport=j.exports["default"]):j.defaultExport=j.exports;j.resolved=!0;return j}function l(a,b){a=k(a,b);if(a)return a.defaultExport!==j?a.defaultExport:a.exports}function m(a){a=k(a);if(a)return a.defaultExport!==j?a.defaultExport:null}function n(a){a=k(a);if(a)return a.exports}function o(a,b,c,e){typeof c==="function"?(d[a]={factory:c,deps:b,defaultExport:j,exports:{},special:e||0,resolved:!1},e!=null&&e&g&&l.call(null,a)):d[a]={defaultExport:c,exports:c,resolved:!0}}c.__d=o;c.require=l;c.importDefault=m;c.importNamespace=n;c.$RefreshReg$=function(){};c.$RefreshSig$=function(){return function(a){return a}}})(this);c.__d("ES5FunctionPrototype",[],function(a,b,c,d,e,f){a={bind:function(a){if(typeof this!=="function")throw new TypeError("Bind must be called on a function");var b=this,c=Array.prototype.slice.call(arguments,1);function d(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}d.displayName="bound:"+(b.displayName||b.name||"(?)");d.toString=function(){return"bound: "+b};return d}},b=a,f["default"]=b},66);c.__d("ES5StringPrototype",[],function(a,b,c,d,e,f){a={startsWith:function(a){var b=String(this);if(this==null)throw new TypeError("String.prototype.startsWith called on null or undefined");var c=arguments.length>1?Number(arguments[1]):0;isNaN(c)&&(c=0);var d=Math.min(Math.max(c,0),b.length);return b.indexOf(String(a),c)==d},endsWith:function(a){var b=String(this);if(this==null)throw new TypeError("String.prototype.endsWith called on null or undefined");var c=b.length,d=String(a),e=arguments.length>1?Number(arguments[1]):c;isNaN(e)&&(e=0);var f=Math.min(Math.max(e,0),c),g=f-d.length;return g<0?!1:b.lastIndexOf(d,g)==g},includes:function(a){if(this==null)throw new TypeError("String.prototype.contains called on null or undefined");var b=String(this),c=arguments.length>1?Number(arguments[1]):0;isNaN(c)&&(c=0);return b.indexOf(String(a),c)!=-1},repeat:function(a){if(this==null)throw new TypeError("String.prototype.repeat called on null or undefined");var b=String(this);a=a?Number(a):0;isNaN(a)&&(a=0);if(a<0||a===Infinity)throw RangeError();if(a===1)return b;if(a===0)return"";var c="";while(a)a&1&&(c+=b),(a>>=1)&&(b+=b);return c}},b=a,f["default"]=b},66);c.__d("ES6Array",[],function(a,b,c,d,e,f){"use strict";a={from:function(b){if(b==null)throw new TypeError("Object is null or undefined");var c=arguments[1],d=arguments[2],e=this,f=Object(b),g=typeof Symbol==="function"&&navigator.userAgent.indexOf("Trident/7.0")===-1?typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator":"@@iterator",h=typeof c==="function",i=typeof f[g]==="function",a=0,j,k;if(i){j=typeof e==="function"?new e():[];var l=f[g](),m;while(!(m=l.next()).done)k=m.value,h&&(k=c.call(d,k,a)),j[a]=k,a+=1;j.length=a;return j}var n=f.length;(isNaN(n)||n<0)&&(n=0);j=typeof e==="function"?new e(n):new Array(n);while(a<n)k=f[a],h&&(k=c.call(d,k,a)),j[a]=k,a+=1;j.length=a;return j}},b=a,f["default"]=b},66);c.__d("ES6ArrayPrototype",[],function(a,b,c,d,e,f){var g={find:function(a,b){if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!=="function")throw new TypeError("predicate must be a function");a=g.findIndex.call(this,a,b);return a===-1?void 0:this[a]},findIndex:function(a,b){if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof a!=="function")throw new TypeError("predicate must be a function");var c=Object(this),d=c.length>>>0;for(var e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1},fill:function(b,c,d){if(this==null)throw new TypeError("Array.prototype.fill called on null or undefined");var e=Object(this),f=e.length>>>0,h=arguments[1],g=h>>0,i=g<0?Math.max(f+g,0):Math.min(g,f),a=arguments[2],j=a===void 0?f:a>>0,k=j<0?Math.max(f+j,0):Math.min(j,f);while(i<k)e[i]=b,i++;return e}};a=g;f["default"]=a},66);c.__d("ES6Number",[],function(a,b,c,d,e,f){a=Math.pow(2,-52),b=Math.pow(2,53)-1,c=-1*b,d={isFinite:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return typeof a==="number"&&isFinite(a)}),isNaN:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return typeof a==="number"&&isNaN(a)}),isInteger:function(a){return this.isFinite(a)&&Math.floor(a)===a},isSafeInteger:function(a){return this.isFinite(a)&&a>=this.MIN_SAFE_INTEGER&&a<=this.MAX_SAFE_INTEGER&&Math.floor(a)===a},EPSILON:a,MAX_SAFE_INTEGER:b,MIN_SAFE_INTEGER:c},e=d,f["default"]=e},66);c.__d("ES6Object",[],function(a,b,c,d,e,f){var g={}.hasOwnProperty;a={assign:function(a){if(a==null)throw new TypeError("Object.assign target cannot be null or undefined");a=Object(a);for(var b=0;b<(arguments.length<=1?0:arguments.length-1);b++){var c=b+1<1||arguments.length<=b+1?void 0:arguments[b+1];if(c==null)continue;c=Object(c);for(var d in c)g.call(c,d)&&(a[d]=c[d])}return a},is:function(a,b){if(a===b)return a!==0||1/a===1/b;else return a!==a&&b!==b}};b=a;f["default"]=b},66);c.__d("ES5Array",[],function(a,b,c,d,e,f){a={isArray:function(a){return Object.prototype.toString.call(a)=="[object Array]"}},b=a,f["default"]=b},66);c.__d("ES5ArrayPrototype",[],function(a,b,c,d,e,f){a={indexOf:function(a,b){b=b;var c=this.length;b|=0;b<0&&(b+=c);for(;b<c;b++)if(b in this&&this[b]===a)return b;return-1}},b=a,f["default"]=b},66);c.__d("ES7ArrayPrototype",["ES5Array","ES5ArrayPrototype"],function(b,c,d,e,f,g){var h=c("ES5Array").isArray,i=c("ES5ArrayPrototype").indexOf;function a(a){return Math.min(Math.max(j(a),0),Number.MAX_SAFE_INTEGER)}function j(a){a=Number(a);return isFinite(a)&&a!==0?k(a)*Math.floor(Math.abs(a)):a}function k(a){return a>=0?1:-1}b={includes:function(b){"use strict";if(b!==void 0&&h(this)&&!(typeof b==="number"&&isNaN(b)))return i.apply(this,arguments)!==-1;var c=Object(this),d=c.length?a(c.length):0;if(d===0)return!1;var e=arguments.length>1?j(arguments[1]):0,f=e<0?Math.max(d+e,0):e,g=isNaN(b)&&typeof b==="number";while(f<d){var k=c[f];if(k===b||typeof k==="number"&&g&&isNaN(k))return!0;f++}return!1}};f.exports=b},null);c.__d("ES7Object",[],function(a,b,c,d,e,f){var g={}.hasOwnProperty;a={entries:function(a){if(a==null)throw new TypeError("Object.entries called on non-object");var b=[];for(var c in a)g.call(a,c)&&b.push([c,a[c]]);return b},values:function(a){if(a==null)throw new TypeError("Object.values called on non-object");var b=[];for(var c in a)g.call(a,c)&&b.push(a[c]);return b}};b=a;f["default"]=b},66);c.__d("ES7StringPrototype",[],function(a,b,c,d,e,f){a={trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")}},b=a,f["default"]=b},66);c.__d("json3-3.3.2",[],function(b,c,d,e,f,g){"use strict";var h={},i={exports:h},a;function j(){(function(){var c=typeof a==="function"&&a.amd,d={"function":!0,object:!0},e=d[typeof h]&&h&&!h.nodeType&&h,f=d[typeof window]&&window||this,j=e&&d[typeof i]&&i&&!i.nodeType&&typeof b=="object"&&b;j&&(j.global===j||j.window===j||j.self===j)&&(f=j);function k(c,b){c||(c=f.Object());b||(b=f.Object());var e=c.Number||f.Number,o=c.String||f.String,i=c.Object||f.Object,a=c.Date||f.Date,j=c.SyntaxError||f.SyntaxError,l=c.TypeError||f.TypeError,m=c.Math||f.Math;c=c.JSON||f.JSON;typeof c=="object"&&c&&(b.stringify=c.stringify,b.parse=c.parse);c=i.prototype;var n=c.toString,p,q,r,s=new a(-3509827334573292);try{s=s.getUTCFullYear()==-109252&&s.getUTCMonth()===0&&s.getUTCDate()===1&&s.getUTCHours()==10&&s.getUTCMinutes()==37&&s.getUTCSeconds()==6&&s.getUTCMilliseconds()==708}catch(a){}function t(c){if(t[c]!==r)return t[c];var d;if(c=="bug-string-char-index")d="a"[0]!="a";else if(c=="json")d=t("json-stringify")&&t("json-parse");else{var f,h='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(c=="json-stringify"){var l=b.stringify,m=typeof l=="function"&&s;if(m){(f=function(){return 1}).toJSON=f;try{m=l(0)==="0"&&l(new e())==="0"&&l(new o())=='""'&&l(n)===r&&l(r)===r&&l()===r&&l(f)==="1"&&l([f])=="[1]"&&l([r])=="[null]"&&l(null)=="null"&&l([r,n,null])=="[null,null,null]"&&l({a:[f,!0,!1,null,"\0\b\n\f\r\t"]})==h&&l(null,f)==="1"&&l([1,2],null,1)=="[\n 1,\n 2\n]"&&l(new a(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&l(new a(864e13))=='"+275760-09-13T00:00:00.000Z"'&&l(new a(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&l(new a(-1))=='"1969-12-31T23:59:59.999Z"'}catch(a){m=!1}}d=m}if(c=="json-parse"){l=b.parse;if(typeof l=="function")try{if(l("0")===0&&!l(!1)){f=l(h);var p=f.a.length==5&&f.a[0]===1;if(p){try{p=!l('"\t"')}catch(a){}if(p)try{p=l("01")!==1}catch(a){}if(p)try{p=l("1.")!==1}catch(a){}}}}catch(a){p=!1}d=p}}return t[c]=!!d}if(!t("json")){var u="[object Function]",v="[object Date]",w="[object Number]",x="[object String]",y="[object Array]",z="[object Boolean]",A=t("bug-string-char-index");if(!s)var B=m.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(a,b){return C[b]+365*(a-1970)+B((a-1969+(b=+(b>1)))/4)-B((a-1901+b)/100)+B((a-1601+b)/400)};(p=c.hasOwnProperty)||(p=function(a){var b={},c;(b.__proto__=null,b.__proto__={toString:1},b).toString!=n?p=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a}:(c=b.constructor,p=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])});return p.call(this,a)});q=function(a,b){var c=0,e,f;(e=function(){this.valueOf=0}).prototype.valueOf=0;f=new e();for(e in f)p.call(f,e)&&c++;f=null;c?c==2?q=function(a,b){var c={},d=n.call(a)==u,e;for(e in a)!(d&&e=="prototype")&&!p.call(c,e)&&(c[e]=1)&&p.call(a,e)&&b(e)}:q=function(a,b){var c=n.call(a)==u,d,e;for(d in a)!(c&&d=="prototype")&&p.call(a,d)&&!(e=d==="constructor")&&b(d);(e||p.call(a,d="constructor"))&&b(d)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],q=function(a,b){var c=n.call(a)==u,e,g=!c&&typeof a.constructor!="function"&&d[typeof a.hasOwnProperty]&&a.hasOwnProperty||p;for(e in a)!(c&&e=="prototype")&&g.call(a,e)&&b(e);for(c=f.length;e=f[--c];g.call(a,e)&&b(e));});return q(a,b)};if(!t("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F="000000",G=function(a,b){return(F+(b||0)).slice(-a)},H="\\u00",I=function(a){var b='"',c=0,d=a.length,e=!A||d>10,f=e&&(A?a.split(""):a);for(;c<d;c++){var i=a.charCodeAt(c);switch(i){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=E[i];break;default:if(i<32){b+=H+G(2,i.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},J=function(b,c,d,e,f,o,E){var F,a,H,K,L,M,N,O,P,Q;try{F=c[b]}catch(a){}if(typeof F=="object"&&F){a=n.call(F);if(a==v&&!p.call(F,"toJSON"))if(F>-1/0&&F<1/0){if(D){L=B(F/864e5);for(H=B(L/365.2425)+1970-1;D(H+1,0)<=L;H++);for(K=B((L-D(H,0))/30.42);D(H,K+1)<=L;K++);L=1+L-D(H,K);M=(F%864e5+864e5)%864e5;N=B(M/36e5)%24;O=B(M/6e4)%60;P=B(M/1e3)%60;M=M%1e3}else H=F.getUTCFullYear(),K=F.getUTCMonth(),L=F.getUTCDate(),N=F.getUTCHours(),O=F.getUTCMinutes(),P=F.getUTCSeconds(),M=F.getUTCMilliseconds();F=(H<=0||H>=1e4?(H<0?"-":"+")+G(6,H<0?-H:H):G(4,H))+"-"+G(2,K+1)+"-"+G(2,L)+"T"+G(2,N)+":"+G(2,O)+":"+G(2,P)+"."+G(3,M)+"Z"}else F=null;else typeof F.toJSON=="function"&&(a!=w&&a!=x&&a!=y||p.call(F,"toJSON"))&&(F=F.toJSON(b))}d&&(F=d.call(c,b,F));if(F===null)return"null";a=n.call(F);if(a==z)return""+F;else if(a==w)return F>-1/0&&F<1/0?""+F:"null";else if(a==x)return I(""+F);if(typeof F=="object"){for(H=E.length;H--;)if(E[H]===F)throw l();E.push(F);Q=[];K=o;o+=f;if(a==y){for(L=0,H=F.length;L<H;L++)N=J(L,F,d,e,f,o,E),Q.push(N===r?"null":N);O=Q.length?f?"[\n"+o+Q.join(",\n"+o)+"\n"+K+"]":"["+Q.join(",")+"]":"[]"}else q(e||F,function(a){var b=J(a,F,d,e,f,o,E);b!==r&&Q.push(I(a)+":"+(f?" ":"")+b)}),O=Q.length?f?"{\n"+o+Q.join(",\n"+o)+"\n"+K+"}":"{"+Q.join(",")+"}":"{}";E.pop();return O}};b.stringify=function(b,c,e){var f,l,m,o;if(d[typeof c]&&c)if((o=n.call(c))==u)l=c;else if(o==y){m={};for(var a=0,p=c.length,q;a<p;q=c[a++],(o=n.call(q),o==x||o==w)&&(m[q]=1));}if(e)if((o=n.call(e))==w){if((e-=e%1)>0)for(f="",e>10&&(e=10);f.length<e;f+=" ");}else o==x&&(f=e.length<=10?e:e.slice(0,10));return J("",(q={},q[""]=b,q),l,m,f,"",[])}}if(!t("json-parse")){var K=o.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M,N,O=function(){M=N=null;throw j()},P=function(){var a=N,b=a.length,c,d,e,f,i;while(M<b){i=a.charCodeAt(M);switch(i){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:c=A?a.charAt(M):a[M];M++;return c;case 34:for(c="@",M++;M<b;){i=a.charCodeAt(M);if(i<32)O();else if(i==92){i=a.charCodeAt(++M);switch(i){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=L[i];M++;break;case 117:d=++M;for(e=M+4;M<e;M++)i=a.charCodeAt(M),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||O();c+=K("0x"+a.slice(d,M));break;default:O()}}else{if(i==34)break;i=a.charCodeAt(M);d=M;while(i>=32&&i!=92&&i!=34)i=a.charCodeAt(++M);c+=a.slice(d,M)}}if(a.charCodeAt(M)==34){M++;return c}O();default:d=M;i==45&&(f=!0,i=a.charCodeAt(++M));if(i>=48&&i<=57){i==48&&(i=a.charCodeAt(M+1),i>=48&&i<=57)&&O();f=!1;for(;M<b&&(i=a.charCodeAt(M),i>=48&&i<=57);M++);if(a.charCodeAt(M)==46){e=++M;for(;e<b&&(i=a.charCodeAt(e),i>=48&&i<=57);e++);e==M&&O();M=e}i=a.charCodeAt(M);if(i==101||i==69){i=a.charCodeAt(++M);(i==43||i==45)&&M++;for(e=M;e<b&&(i=a.charCodeAt(e),i>=48&&i<=57);e++);e==M&&O();M=e}return+a.slice(d,M)}f&&O();if(a.slice(M,M+4)=="true"){M+=4;return!0}else if(a.slice(M,M+5)=="false"){M+=5;return!1}else if(a.slice(M,M+4)=="null"){M+=4;return null}O()}}return"$"},Q=function(a){var b,c;a=="$"&&O();if(typeof a=="string"){if((A?a.charAt(0):a[0])=="@")return a.slice(1);if(a=="["){b=[];for(;;c||(c=!0)){a=P();if(a=="]")break;c&&(a==","?(a=P(),a=="]"&&O()):O());a==","&&O();b.push(Q(a))}return b}else if(a=="{"){b={};for(;;c||(c=!0)){a=P();if(a=="}")break;c&&(a==","?(a=P(),a=="}"&&O()):O());(a==","||typeof a!="string"||(A?a.charAt(0):a[0])!="@"||P()!=":")&&O();b[a.slice(1)]=Q(P())}return b}O()}return a},R=function(a,b,c){c=S(a,b,c),c===r?delete a[b]:a[b]=c},S=function(a,b,c){var d=a[b],e;if(typeof d=="object"&&d)if(n.call(d)==y)for(e=d.length;e--;)R(d,e,c);else q(d,function(a){R(d,a,c)});return c.call(a,b,d)};b.parse=function(a,b){var c;M=0;N=""+a;a=Q(P());P()!="$"&&O();M=N=null;return b&&n.call(b)==u?S((c={},c[""]=a,c),"",b):a}}}b.runInContext=k;return b}if(e&&!c)k(f,e);else{var l=f.JSON,m=f.JSON3,n=!1,o=k(f,f.JSON3={noConflict:function(){n||(n=!0,f.JSON=l,f.JSON3=m,l=m=null);return o}});f.JSON={parse:o.parse,stringify:o.stringify}}c&&a(function(){return o})}).call(this)}var k=!1;function l(){k||(k=!0,j());return i.exports}function c(a){switch(a){case void 0:return l()}}f.exports=c},null);c.__d("json3",["json3-3.3.2"],function(a,b,c,d,e,f){e.exports=b("json3-3.3.2")()},null);c.__d("ES",["ES5FunctionPrototype","ES5StringPrototype","ES6Array","ES6ArrayPrototype","ES6Number","ES6Object","ES7ArrayPrototype","ES7Object","ES7StringPrototype","json3"],function(b,c,d,e,f,g,h){var i={}.toString,a={"JSON.stringify":d("json3").stringify,"JSON.parse":d("json3").parse};e={"Function.prototype":d("ES5FunctionPrototype"),"String.prototype":d("ES5StringPrototype")};f={Object:d("ES6Object"),"Array.prototype":d("ES6ArrayPrototype"),Number:d("ES6Number"),Array:d("ES6Array")};g={Object:d("ES7Object"),"String.prototype":d("ES7StringPrototype"),"Array.prototype":d("ES7ArrayPrototype")};function b(b){for(var c in b){if(!Object.prototype.hasOwnProperty.call(b,c))continue;var d=b[c],e=c.split(".");if(e.length===2){var f=e[0],g=e[1];if(!f||!g||!window[f]||!window[f][g]){var h=f?window[f]:"-",i=f&&window[f]&&g?window[f][g]:"-";throw new Error("Unexpected state (t11975770): "+(f+", "+g+", "+h+", "+i+", "+c))}}f=e.length===2?window[e[0]][e[1]]:window[c];for(g in d){if(!Object.prototype.hasOwnProperty.call(d,g))continue;if(typeof d[g]!=="function"){a[c+"."+g]=d[g];continue}h=f[g];a[c+"."+g]=h&&/\{\s+\[native code\]\s\}/.test(h)?h:d[g]}}}b(e);b(f);b(g);function c(b,c,d){var e=d?i.call(b).slice(8,-1)+".prototype":b,f;if(Array.isArray(b))if(typeof e==="string")f=a[e+"."+c];else throw new Error("Can't polyfill "+c+" directly on an Array.");else if(typeof e==="string")f=a[e+"."+c];else if(typeof b==="string")throw new Error("Can't polyfill "+c+" directly on a string.");else f=b[c];if(typeof f==="function"){for(var g=arguments.length,h=new Array(g>3?g-3:0),j=3;j<g;j++)h[j-3]=arguments[j];return f.apply(b,h)}else if(f)return f;throw new Error("Polyfill "+e+" does not have implementation of "+c)}h["default"]=c},98);c.__d("ES5Object",[],function(a,b,c,d,e,f){var g={}.hasOwnProperty;a={create:function(a){var b=typeof a;if(b!="object"&&b!="function")throw new TypeError("Object prototype may only be a Object or null");h.prototype=a;return new h()},keys:function(a){var b=typeof a;if(b!="object"&&b!="function"||a===null)throw new TypeError("Object.keys called on non-object");b=[];for(var c in a)g.call(a,c)&&b.push(c);return b},freeze:function(a){return a},isFrozen:function(){return!1},seal:function(a){return a}};function h(){}b=a;f["default"]=b},66);c.__d("sdk.babelHelpers",["ES5FunctionPrototype","ES5Object","ES6Object"],function(a,b,c,d,e,f){var g={},h=Object.prototype.hasOwnProperty;g.inheritsLoose=function(a,c){b("ES6Object").assign(a,c);a.prototype=b("ES5Object").create(c&&c.prototype);a.prototype.constructor=a;a.__superConstructor__=c;return c};g.inherits=g.inheritsLoose;g.wrapNativeSuper=function(a){var b=typeof Map==="function"?new Map():void 0;g.wrapNativeSuper=function(a){if(a===null)return null;if(typeof a!=="function")throw new TypeError("Super expression must either be null or a function");if(b!==void 0){if(b.has(a))return b.get(a);b.set(a,c)}g.inheritsLoose(c,a);function c(){a.apply(this,arguments)}return c};return g.wrapNativeSuper(a)};g.assertThisInitialized=function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a};g._extends=b("ES6Object").assign;g["extends"]=g._extends;g.construct=function(a,b){var c=[null];c.push.apply(c,b);return new(Function.prototype.bind.apply(a,c))()};g.objectWithoutPropertiesLoose=function(a,b){var c={};for(var d in a){if(!h.call(a,d)||b.indexOf(d)>=0)continue;c[d]=a[d]}return c};g.objectWithoutProperties=g.objectWithoutPropertiesLoose;g.taggedTemplateLiteralLoose=function(a,b){b||(b=a.slice(0));a.raw=b;return a};g.bind=b("ES5FunctionPrototype").bind;e.exports=g},null);var e=c.require("ES"),f=c.require("sdk.babelHelpers");(function(b,c){var d="keys",f="values",g="entries",h=function(){var a=j(Array),b;a||(b=function(){"use strict";function a(a,b){this.$1=a,this.$2=b,this.$3=0}var b=a.prototype;b.next=function(){if(this.$1==null)return{value:void 0,done:!0};var a=this.$1,b=this.$1.length,c=this.$3,e=this.$2;if(c>=b){this.$1=void 0;return{value:void 0,done:!0}}this.$3=c+1;if(e===d)return{value:c,done:!1};else if(e===f)return{value:a[c],done:!1};else if(e===g)return{value:[c,a[c]],done:!1}};b[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]=function(){return this};return a}());return{keys:a?function(a){return a.keys()}:function(a){return new b(a,d)},values:a?function(a){return a.values()}:function(a){return new b(a,f)},entries:a?function(a){return a.entries()}:function(a){return new b(a,g)}}}(),i=function(){var a=j(String),b;a||(b=function(){"use strict";function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.next=function(){if(this.$1==null)return{value:void 0,done:!0};var a=this.$2,b=this.$1,c=b.length;if(a>=c){this.$1=void 0;return{value:void 0,done:!0}}var d=b.charCodeAt(a);d<55296||d>56319||a+1===c?d=b[a]:(c=b.charCodeAt(a+1),c<56320||c>57343?d=b[a]:d=b[a]+b[a+1]);this.$2=a+d.length;return{value:d,done:!1}};b[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]=function(){return this};return a}());return{keys:function(){throw TypeError("Strings default iterator doesn't implement keys.")},values:a?function(a){return a[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]()}:function(a){return new b(a)},entries:function(){throw TypeError("Strings default iterator doesn't implement entries.")}}}();function j(a){return typeof a.prototype[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]==="function"&&typeof a.prototype.values==="function"&&typeof a.prototype.keys==="function"&&typeof a.prototype.entries==="function"}var a=function(){"use strict";function a(a,b){this.$1=a,this.$2=b,this.$3=Object.keys(a),this.$4=0}var b=a.prototype;b.next=function(){var a=this.$3.length,b=this.$4,c=this.$2,e=this.$3[b];if(b>=a){this.$1=void 0;return{value:void 0,done:!0}}this.$4=b+1;if(c===d)return{value:e,done:!1};else if(c===f)return{value:this.$1[e],done:!1};else if(c===g)return{value:[e,this.$1[e]],done:!1}};b[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]=function(){return this};return a}(),k={keys:function(b){return new a(b,d)},values:function(b){return new a(b,f)},entries:function(b){return new a(b,g)}};function l(a,b){if(typeof a==="string")return i[b||f](a);else if(Array.isArray(a))return h[b||f](a);else if(a[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"])return a[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();else return k[b||g](a)}e("Object","assign",!1,l,{KIND_KEYS:d,KIND_VALUES:f,KIND_ENTRIES:g,keys:function(a){return l(a,d)},values:function(a){return l(a,f)},entries:function(a){return l(a,g)},generic:k.entries});b.FB_enumerate=l})(typeof b==="object"?b:typeof this==="object"?this:typeof window==="object"?window:typeof a==="object"?a:{});c.__d("JSSDKCanvasPrefetcherConfig",[],{enabled:!0,excludedAppIds:[144959615576466,768691303149786,320528941393723],sampleRate:500});c.__d("JSSDKConfig",[],{features:{allow_non_canvas_app_events:!1,xd_timeout:{rate:1,value:6e4},use_bundle:!1,should_log_response_error:!0,https_only_enforce_starting:25388092e5,https_only_learn_more:"https://developers.facebook.com/blog/post/2018/06/08/enforce-https-facebook-login/",https_only_scribe_logging:{rate:.001},log_perf:{rate:.001},legacy_xd_init:{rate:0},use_x_xd:{rate:100},cache_auth_response:{rate:100},oauth_funnel_logger_version:1,iab_login_status:!0,iab_login_android_support_version:"277.0",force_popup_to_canvas_apps_with_id:[],force_popup_to_all_canvas_app:!1,max_oauth_dialog_retries:{rate:100,value:99999},idle_callback_wait_time_ms:3e3,chat_plugin_facade_timeout_ms:8e3,chat_plugin_facade_enabled_pageids:["102493178867330","107331571710078","1032787970130843","107771111665395","261907812360345","101305975654752","275483104252055","101664622285042","112682113428700","271628573687012","385757598521443","100545935690488"],should_enable_ig_login_status_fetch:!0,log_cookies_usage:{rate:.1},allow_shadow_dom_for_apps_with_id:[520916077950649,152351391599356,132081130190180,468663283258845,409976882430412,189845245141894,360467581347,274266067164],allow_shadow_dom:!0,xfoa_login_enabled:!1}});c.__d("JSSDKCssConfig",[],{rules:".fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}\n.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://connect.facebook.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0;margin:0;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://connect.facebook.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:#fff;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#043b87;box-shadow:white 0 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267B2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:#fff;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://connect.facebook.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://connect.facebook.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}\n.fb_mpn_mobile_landing_page_slide_out{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_out_from_left{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out_from_left;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_up{animation-duration:500ms;animation-name:fb_mpn_landing_page_slide_up;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_in{animation-duration:300ms;animation-name:fb_mpn_bounce_in;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out{animation-duration:300ms;animation-name:fb_mpn_bounce_out;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out_v2{animation-duration:300ms;animation-name:fb_mpn_fade_out;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_v2{animation-duration:300ms;animation-name:fb_bounce_in_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_from_left{animation-duration:300ms;animation-name:fb_bounce_in_from_left;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2{animation-duration:300ms;animation-name:fb_bounce_out_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_from_left{animation-duration:300ms;animation-name:fb_bounce_out_from_left;transition-timing-function:ease-in}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}@keyframes fb_mpn_landing_page_slide_out{0%{margin:0 12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;margin:0 24px;width:60px}}@keyframes fb_mpn_landing_page_slide_out_from_left{0%{left:12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;left:12px;width:60px}}@keyframes fb_mpn_landing_page_slide_up{0%{bottom:0;opacity:0}100%{bottom:24px;opacity:1}}@keyframes fb_mpn_bounce_in{0%{opacity:.5;top:100%}100%{opacity:1;top:0}}@keyframes fb_mpn_fade_out{0%{bottom:30px;opacity:1}100%{bottom:0;opacity:0}}@keyframes fb_mpn_bounce_out{0%{opacity:1;top:0}100%{opacity:.5;top:100%}}@keyframes fb_bounce_in_v2{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}50%{transform:scale(1.03, 1.03);transform-origin:bottom right}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}}@keyframes fb_bounce_in_from_left{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}50%{transform:scale(1.03, 1.03);transform-origin:bottom left}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}}@keyframes fb_bounce_out_v2{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}}@keyframes fb_bounce_out_from_left{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}}@keyframes slideInFromBottom{0%{opacity:.1;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes slideInFromBottomDelay{0%{opacity:0;transform:translateY(100%)}97%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}",components:["css:fb.css.base","css:fb.css.dialog","css:fb.css.iframewidget","css:fb.css.customer_chat_plugin_iframe"]});c.__d("JSSDKRuntimeConfig",[],{locale:"en_US",revision:"1007242444",rtl:!1,sdkab:null,sdkns:"",sdkurl:"https://connect.facebook.net/en_US/sdk.js",scribeurl:"https://www.facebook.com/platform/scribe_endpoint.php/"});c.__d("JSSDKXDConfig",[],{XXdUrl:"/x/connect/xd_arbiter/?version=C-8998888-1007242444-20230404094308",useCdn:!0});c.__d("UrlMapConfig",[],{www:"www.facebook.com",m:"m.facebook.com",business:"business.facebook.com",api:"api.facebook.com",api_read:"api-read.facebook.com",graph:"graph.facebook.com",an:"an.facebook.com",fbcdn:"static.xx.fbcdn.net",cdn:"staticxx.facebook.com",graph_facebook:"graph.facebook.com",graph_gaming:"graph.fb.gg",graph_instagram:"graph.instagram.com",www_instagram:"www.instagram.com",social_plugin:"socialplugin.facebook.net"});c.__d("JSSDKShadowCssConfig",[],{"css:fb.shadow.css.fb_login_button":".fb_login_button_container{align-content:center;align-items:center;border:0;color:#fff;display:flex;font-family:'Roboto', 'Freight Sans LF Pro', Helvetica, Arial, 'Lucida Grande', sans-serif;font-weight:bold;margin:auto}.fb-button-main-element{display:flex;flex-wrap:nowrap;overflow:hidden}.fb-iframe-overlay{display:flex}.fb-button-main-element:hover{cursor:pointer}.fb-button-main-element:focus{filter:brightness(80%)}.fb_button_label_element{align-items:center;display:flex;font-weight:bold;justify-content:center}.fb_button_label{margin:auto;pointer-events:none}.fb_button_svg_logo{height:1.33em;margin-left:.4em;margin-right:.4em;padding:.065em}.login_fb_logo .f_logo_f{fill:transparent}.single_button_svg_logo{margin-bottom:.08em}"});c.__d("DOMWrapper",[],function(b,c,d,e,f,g){"use strict";var h,i;function b(a){h=a}function c(){return h||document.body}function d(a){i=a}function e(){return i||a}g.setRoot=b;g.getRoot=c;g.setWindow=d;g.getWindow=e},66);c.__d("dotAccess",[],function(a,b,c,d,e,f){function a(a,b,c){b=b.split(".");do{var d=b.shift();a=a[d]||c&&(a[d]={})}while(b.length&&a);return a}f["default"]=a},66);c.__d("guid",[],function(a,b,c,d,e,f){function a(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}f["default"]=a},66);c.__d("wrapFunction",[],function(a,b,c,d,e,f){var g={};function a(a,b,c){var d=b in g?g[b](a,c):a;return function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d.apply(this,b)}}a.setWrapper=function(a,b){g[b]=a};f["default"]=a},66);c.__d("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(b,c,d,e,f,g,h){var i,a;function j(b){i=d("dotAccess")(e("DOMWrapper").getWindow(),b,!0),a=b}function b(b,c){i||j("__globalCallbacks");var e=d("guid")();i[e]=d("wrapFunction")(b,"entry",(b=c)!=null?b:"GlobalCallback");return a+"."+e}function c(b){b=b.substring(a.length+1),delete i[b]}h.setPrefix=j;h.create=b;h.remove=c},98);c.__d("Log",[],function(b,c,d,f,g,h){"use strict";var i=-1;c={DEBUG:3,INFO:2,WARNING:1,ERROR:0};d=function(b,c,k){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];var j=0,a=k.replace(/%s/g,function(){return String(e[j++])}),l=window.console;l&&i>=c&&l[b in l?b:"log"](a)};function b(a){i=a}f=e(d,"bind",!0,null,"debug",c.DEBUG);g=e(d,"bind",!0,null,"info",c.INFO);var j=e(d,"bind",!0,null,"warn",c.WARNING),a=e(d,"bind",!0,null,"error",c.ERROR);h.Level=c;h.log=d;h.setLevel=b;h.debug=f;h.info=g;h.warn=j;h.error=a},66);c.__d("sdk.UA",[],function(b,c,d,e,f,g){b=navigator.userAgent;var h={iphone:/\b(iPhone|iP[ao]d)/.test(b),ipad:/\b(iP[ao]d)/.test(b),android:/Android/i.test(b),nativeApp:/FBAN\/\w+;/i.test(b)&&!/FBAN\/mLite;/.test(b),nativeAndroidApp:/FB_IAB\/\w+;/i.test(b),nativeInstagramApp:/Instagram/i.test(b),nativeMessengeriOSApp:/MessengerForiOS/i.test(b),nativeMessengerAndroidApp:/Orca\-Android/i.test(b),ucBrowser:/UCBrowser/i.test(b)},i=/Mobile/i.test(b),a={ie:NaN,firefox:NaN,chrome:NaN,webkit:NaN,osx:NaN,edge:NaN,operaMini:NaN,ucWeb:NaN};c=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(b);c&&(a.ie=c[1]?parseFloat(c[1]):c[4]?parseFloat(c[4]):NaN,a.firefox=c[2]||"",a.webkit=c[3]||"",c[3]&&(d=/(?:Chrome\/(\d+\.\d+))/.exec(b),a.chrome=d?d[1]:"",e=/(?:Edge\/(\d+\.\d+))/.exec(b),a.edge=e?e[1]:""));f=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(b);f&&(a.osx=f[1]);c=/(?:Opera Mini\/(\d+(?:\.\d+)?))/.exec(b);c&&(a.operaMini=c[1]);d=/(?:UCWEB\/(\d+(?:\.\d+))?)/.exec(b);d&&(a.ucWeb=d[1]||"2.0");function j(a){return String(a).split(".").map(function(a){return parseFloat(a)})}var k={};Object.keys(a).map(function(b){var c=function(){return parseFloat(a[b])};c.getVersionParts=function(){return j(a[b])};k[b]=c});Object.keys(h).map(function(a){k[a]=function(){return h[a]}});k.mobile=function(){return h.iphone||h.ipad||h.android||i};k.mTouch=function(){return h.android||h.iphone||h.ipad};k.facebookInAppBrowser=function(){return h.nativeApp||h.nativeAndroidApp};k.inAppBrowser=function(){return h.nativeApp||h.nativeAndroidApp||h.nativeInstagramApp};k.mBasic=function(){return!!(a.ucWeb||a.operaMini)};k.instagram=function(){return h.nativeInstagramApp};k.messenger=function(){return h.nativeMessengeriOSApp||h.nativeMessengerAndroidApp};k.isSupportedIABVersion=function(a){if(!k.facebookInAppBrowser())return!1;var b=/(?:FBAV\/(\d+(\.\d+)+))/.exec(navigator.userAgent);if(b){b=parseFloat(b[1]);if(b>=a)return!0}return!1};e=k;g["default"]=e},66);c.__d("sdk.domReady",[],function(a,b,c,d,e,f){var g;c="readyState"in document?/loaded|complete/.test(document.readyState):!!document.body;function a(){if(!g)return;var a;while(a=g.shift())a();g=null}function b(a){if(g){g.push(a);return}else a()}c||(g=[],document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a)));f["default"]=b},67);c.__d("sdk.Content",["Log","sdk.UA","sdk.domReady"],function(b,c,d,e,f,g,h){"use strict";var i,a;function j(a,b){b||(i?b=i:(i=b=document.getElementById("fb-root"),b||(e("Log").warn('The "fb-root" div has not been created, auto-creating'),i=b=document.createElement("div"),b.id="fb-root",d("sdk.UA").ie()||!document.body?d("sdk.domReady")(function(){b&&document.body&&document.body.appendChild(b)}):document.body.appendChild(b)),b.className+=" fb_reset"));b.appendChild(a);return a}function k(b){if(!a){a=document.createElement("div");var c=a.style;c.position="absolute";c.top="-10000px";c.width="0";c.height="0";a=j(a)}return j(b,a)}function b(a,b){var c=document.createElement("form");c.action=a.url;c.target=a.target;c.method=b?"GET":"POST";k(c);for(b in a.params)if(Object.prototype.hasOwnProperty.call(a.params,b)){var d=a.params[b];if(d!=null){var e=document.createElement("input");e.name=b;e.value=d;c.appendChild(e)}}c.submit();c.parentNode&&c.parentNode.removeChild(c)}h.append=j;h.appendHidden=k;h.submitToTarget=b},98);c.__d("sdk.DOM",["guid","sdk.domReady"],function(b,c,d,f,g,h,i){var j={},a={};function k(a,b){a=a.getAttribute(b)||a.getAttribute(b.replace(/_/g,"-"))||a.getAttribute(b.replace(/-/g,"_"))||a.getAttribute(b.replace(/-/g,""))||a.getAttribute(b.replace(/_/g,""))||a.getAttribute("data-"+b)||a.getAttribute("data-"+b.replace(/_/g,"-"))||a.getAttribute("data-"+b.replace(/-/g,"_"))||a.getAttribute("data-"+b.replace(/-/g,""))||a.getAttribute("data-"+b.replace(/_/g,""));return a!=null?String(a):null}function b(a,b){a=k(a,b);return a!=null?/^(true|1|yes|on)$/.test(a):null}function c(a,b){try{a.innerHTML=b}catch(a){throw new Error("Could not set innerHTML : "+a.message)}}function l(a,b){a=" "+a.className+" ";return a.indexOf(" "+b+" ")>=0}function f(a,b){if(a==null)return;l(a,b)||(a.className=a.className+" "+b)}function g(a,b){if(a==null)return;b=new RegExp("\\s*"+b,"g");a.className=a.className.replace(b,"").trim()}function h(a,b,c){c===void 0&&(c="*");b=b||document.body;if(b==null)return[];c=c||"*";return e("Array","from",!1,b.querySelectorAll(c+"."+a))}function m(a,b){b=v(b);var c=document.defaultView.getComputedStyle(a).getPropertyValue(b);c=a.style.getPropertyValue(b);/background-position?/.test(b)&&/top|left/.test(c)&&(c="0%");return c}function n(a,b,c){a.style.setProperty(v(b),c)}function o(b,c,d,e,f){b=b.styleSheets;for(var k=0;k<b.length;k++){var l;if(b[k].ownerNode instanceof HTMLElement&&b[k].ownerNode.dataset!=null&&((l=b[k].ownerNode.dataset.fbcssmodules)==null?void 0:l.indexOf(c))!==-1){l=b[k];if(l instanceof CSSStyleSheet){for(var m=0;m<l.cssRules.length;m++){var a=l.cssRules[m];if(a instanceof CSSStyleRule&&a.selectorText===d){a.style.setProperty(v(e),f);return}}l.insertRule(d+"{"+v(e)+":"+((a=f)!=null?a:"")+"}",0)}}}}function p(b,c,e){var f;if(e!=null&&e.nodeType===11){var m=e;m.host.id!=null&&a[m.host.id]!=null?f=a[m.host.id]:(m.host.id||(m.host.id=d("guid")()),f={},a[m.host.id]=f)}else f=j;m=!0;for(var n=0,o;o=c[n++];)o in f||(m=!1,f[o]=!0);if(m)return;o=document.createElement("style");o.type="text/css";o.textContent=b;var p="";c.forEach(function(a){return p+=a+" "});o.setAttribute("data-fbcssmodules",p.trim());e==null||e===document?document.getElementsByTagName("head")[0].appendChild(o):e.appendChild(o)}function q(a){if(!a||!a.parentNode)return null;else return a.parentNode.removeChild(a)}function r(){var a,b=document.documentElement&&document.compatMode=="CSS1Compat"?document.documentElement:document.body;return{scrollTop:(b==null?void 0:b.scrollTop)||((a=document.body)==null?void 0:a.scrollTop),scrollLeft:(b==null?void 0:b.scrollLeft)||((a=document.body)==null?void 0:a.scrollLeft),width:window.innerWidth?window.innerWidth:b==null?void 0:b.clientWidth,height:window.innerHeight?window.innerHeight:b==null?void 0:b.clientHeight}}var s=/[A-Z]/g,t=/^\([^-]\)-/,u=["o","moz","ms","webkit"];function v(a){a=a.replace(s,"-$&").toLowerCase();var b=a.match(t);b&&u.indexOf(b[1])!==-1&&(a="-"+a);return a}i.getAttr=k;i.getBoolAttr=b;i.html=c;i.containsCss=l;i.addCss=f;i.removeCss=g;i.getByClass=h;i.getStyle=m;i.setStyle=n;i.updateOrAddCssRule=o;i.addCssRules=p;i.remove=q;i.getViewportInfo=r;i.ready=d("sdk.domReady")},98);c.__d("ManagedError",[],function(a,b,c,d,e,g){a=function(a){f.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,b!==null&&b!==void 0?b:"")||this;b!==null&&b!==void 0?d.message=b:d.message="";d.innerError=c;return d}return b}(f.wrapNativeSuper(Error)),g["default"]=a},66);c.__d("normalizeError",["sdk.UA"],function(a,b,c,d,e,f,g){"use strict";function a(a){var b={line:a.lineNumber||a.line,message:a.message,name:a.name,script:a.fileName||a.sourceURL||a.script,stack:a.stackTrace||a.stack};b._originalError=a;a=/([\w:\.\/]+\.js):(\d+)/.exec(a.stack);c("sdk.UA").chrome()&&a&&(b.script=a[1],b.line=parseInt(a[2],10));for(a in b)b[a]==null&&delete b[a];return b}g["default"]=a},98);c.__d("ObservableMixin",[],function(a,b,c,d,e,f){function a(){this.__observableEvents={}}a.prototype={inform:function(a){var e=this,b=Array.prototype.slice.call(arguments,1),c=Array.prototype.slice.call(this.getSubscribers(a)),f=function(){if(c[d]===null)return 1;try{c[d].apply(e,b)}catch(a){window.setTimeout(function(){throw a},0)}};for(var d=0;d<c.length;d++)if(f())continue;return this},getSubscribers:function(a){return this.__observableEvents[a]||(this.__observableEvents[a]=[])},clearSubscribers:function(a){a&&(this.__observableEvents[a]=[]);return this},subscribe:function(a,b){a=this.getSubscribers(a);a.push(b);return this},unsubscribe:function(a,b){a=this.getSubscribers(a);for(var c=0;c<a.length;c++)if(a[c]===b){a.splice(c,1);break}return this}};e.exports=a},null);c.__d("AssertionError",["ManagedError"],function(a,b,c,d,e,g,h){a=function(a){f.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(c("ManagedError")),h["default"]=a},98);c.__d("sprintf",[],function(a,b,c,d,e,f){function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}f["default"]=a},66);c.__d("Assert",["AssertionError","sprintf"],function(b,c,d,f,g,h,i){function j(a,b){if(typeof a!=="boolean"||a===!1)throw new(d("AssertionError"))(b);return a}function a(a,b,c){var e;if(b===void 0)e="undefined";else if(b===null)e="null";else{var f=Object.prototype.toString.call(b);f=/\s(\w*)/.exec(f);e=f==null?typeof f:f[1].toLowerCase()}j(a.indexOf(e)!==-1,(f=c)!=null?f:d("sprintf")("Expression is of type %s, not %s",e,a));return b}function b(a,b,c){j(b instanceof a,(a=c)!=null?a:"Expression not instance of type");return b}function k(a,b){l["is"+a]=b,l["maybe"+a]=function(a,c){return a==null?a:b(a,c)}}c=function(a,b){return a};var l={isInstanceOf:b,isTrue:j,isTruthy:function(a,b){return j(!!a,b)},isBoolean:c,isFunction:c,isNumber:c,isObject:c,isString:c,isUndefined:c,maybeObject:c,maybeNumber:c,maybeFunction:c};["Boolean","Function","Number","Object","String","Undefined"].forEach(function(b){k(b,e(a,"bind",!0,null,b.toLowerCase()))});f=l;i["default"]=f},98);c.__d("Type",["Assert"],function(b,c,d,f,g,h){function i(){var a=this.__mixins;if(a)for(var b=0;b<a.length;b++)a[b].apply(this,arguments)}function j(a,b){if(b instanceof a)return!0;if(b instanceof i)for(var c=0;c<b.__mixins.length;c++)if(b.__mixins[c]==a)return!0;return!1}function a(a,b){var c=a.prototype;Array.isArray(b)||(b=[b]);for(a=0;a<b.length;a++){var d=b[a];typeof d==="function"&&(c.__mixins.push(d),d=d.prototype);Object.keys(d).forEach(function(a){c[a]=d[a]})}}function k(b,d,f){var j=d&&Object.prototype.hasOwnProperty.call(d,"constructor")?d.constructor:function(){this.parent.apply(this,arguments)};c("Assert").isFunction(j);if(b&&b.prototype instanceof i===!1)throw new Error("parent type does not inherit from Type");b=b||i;function h(){}h.prototype=b.prototype;j.prototype=new h();d&&e("Object","assign",!1,j.prototype,d);j.prototype.constructor=j;j.parent=b;j.prototype.__mixins=b.prototype.__mixins?Array.prototype.slice.call(b.prototype.__mixins):[];f&&a(j,f);j.prototype.parent=function(){this.parent=b.prototype.parent,b.apply(this,arguments)};j.prototype.parentCall=function(a){return b.prototype[a].apply(this,Array.prototype.slice.call(arguments,1))};j.extend=function(a,b){return k(this,a,b)};return j}e("Object","assign",!1,i.prototype,{instanceOf:function(a){return j(a,this)}});e("Object","assign",!1,i,{extend:function(a,b){return typeof a==="function"?k.apply(null,arguments):k(null,a,b)},instanceOf:j});g.exports=i},null);c.__d("sdk.Model",["ObservableMixin","Type"],function(a,b,c,d,e,f,g){"use strict";a=c("Type").extend({constructor:function(a){this.parent();var b={},c=this;Object.keys(a).forEach(function(d){b[d]=a[d],c["set"+d]=function(a){if(a===b[d])return c;b[d]=a;c.inform(d+".change",a);return c},c["get"+d]=function(){return b[d]}})}},c("ObservableMixin")),b=a,g["default"]=b},98);c.__d("sdk.Runtime",["JSSDKRuntimeConfig","sdk.Model"],function(b,c,d,f,g,h,i){var j={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},a=new(d("sdk.Model"))({AccessToken:"",AutoLogAppEvents:!1,ClientID:"",CookieUserID:"",EnforceHttps:!1,Environment:j.UNKNOWN,FamilyLoginLoaded:!1,GraphDomain:"",Initialized:!1,IsSPIN:Boolean(f("JSSDKRuntimeConfig").isSPIN),IsVersioned:!1,KidDirectedSite:void 0,Locale:f("JSSDKRuntimeConfig").locale,LoggedIntoFacebook:void 0,LoginStatus:void 0,Revision:f("JSSDKRuntimeConfig").revision,Rtl:f("JSSDKRuntimeConfig").rtl,Scope:void 0,SDKAB:f("JSSDKRuntimeConfig").sdkab,SDKUrl:f("JSSDKRuntimeConfig").sdkurl,SDKNS:f("JSSDKRuntimeConfig").sdkns,ShouldLoadFamilyLogin:!1,UseCookie:!1,UseLocalStorage:!0,UserID:"",Version:void 0});e("Object","assign",!1,a,{ENVIRONMENTS:j,isEnvironment:function(a){var b=this.getEnvironment();return(a|b)===b},isCanvasEnvironment:function(){return this.isEnvironment(j.CANVAS)||this.isEnvironment(j.PAGETAB)}});(function(){var b=/app_runner/.test(window.name)?j.PAGETAB:/iframe_canvas/.test(window.name)?j.CANVAS:j.UNKNOWN;(b|j.PAGETAB)===b&&(b|=j.CANVAS);a.setEnvironment(b)})();b=a;i["default"]=b},98);c.__d("sdk.ErrorHandler",["ManagedError","normalizeError","sdk.Runtime","wrapFunction"],function(a,b,c,d,f,g,h){function a(b,d){var f="";function i(a){var b=a._originalError;delete a._originalError;d(a);throw b}function g(a,d){return function(){if(!b)return a.apply(this,arguments);try{f=d;return a.apply(this,arguments)}catch(a){if(a instanceof c("ManagedError"))throw a;var g=c("normalizeError")(a);if(!g.script){var j=/.*\/([^?#]+)/.exec(c("sdk.Runtime").getSDKUrl());g.script=j!==null?j[1]:""}g.entry=d;var i=Array.prototype.slice.call(arguments).map(function(a){var b=Object.prototype.toString.call(a);return/^\[object (String|Number|Boolean|Object|Date)\]$/.test(b)?a:a.toString()});g.args=e("JSON","stringify",!1,i).substring(0,200);i(g)}finally{f=""}}}function h(a){a.__wrapper||(a.__wrapper=function(){try{return a.apply(this,arguments)}catch(a){window.setTimeout(function(){throw a},0);return!1}});return a.__wrapper}function j(a){try{return a&&a.callee&&a.callee.caller?a.callee.caller.name:""}catch(a){return""}}function a(a,b){return function(d,e){var h=b+":"+(f||"[global]")+":"+(d.name||"[anonymous]"+j(arguments));return a(c("wrapFunction")(d,"entry",h),e)}}b&&(setTimeout=a(setTimeout,"setTimeout"),setInterval=a(setInterval,"setInterval"),c("wrapFunction").setWrapper(g,"entry"));return{guard:g,unguard:h}}h.create=a},98);c.__d("QueryString",[],function(a,b,c,d,e,f){function g(a){var b=[];Object.keys(a).sort().forEach(function(c){var d=a[c];if(d===void 0)return;if(d===null){b.push(c);return}b.push(encodeURIComponent(c)+"="+encodeURIComponent(String(d)))});return b.join("&")}function a(a,b){b===void 0&&(b=!1);var c={};if(a==="")return c;a=a.split("&");for(var d=0;d<a.length;d++){var e=a[d].split("=",2),f=decodeURIComponent(e[0]);if(b&&Object.prototype.hasOwnProperty.call(c,f))throw new URIError("Duplicate key: "+f);c[f]=e.length===2?decodeURIComponent(e[1]):null}return c}function b(a,b){return a+(a.indexOf("?")!==-1?"&":"?")+(typeof b==="string"?b:g(b))}c={encode:g,decode:a,appendToUrl:b};f["default"]=c},66);c.__d("Env",[],function(a,b,c,d,f,g){b={ajaxpipe_token:null,compat_iframe_token:null,iframeKey:"",iframeTarget:"",iframeToken:"",isCQuick:!1,jssp_header_sent:!1,jssp_targeting_enabled:!1,start:Date.now(),nocatch:!1,useTrustedTypes:!1,isTrustedTypesReportOnly:!1,enableDefaultTrustedTypesPolicy:!1,ig_server_override:"",ig_mqtt_wss_endpoint:"",ig_mqtt_polling_endpoint:"",scheduledCSSJSScheduler:!1},a.Env&&e("Object","assign",!1,b,a.Env),a.Env=b,c=b,g["default"]=c},66);c.__d("fb-error-lite",[],function(a,b,c,d,e,f){"use strict";var g={PREVIOUS_FILE:1,PREVIOUS_FRAME:2,PREVIOUS_DIR:3,FORCED_KEY:4};function a(a){var b=new Error(a);if(b.stack===void 0)try{throw b}catch(a){}b.messageFormat=a;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b.messageParams=d.map(function(a){return String(a)});b.taalOpcodes=[g.PREVIOUS_FRAME];return b}b={err:a,TAALOpcode:g};f["default"]=b},66);c.__d("invariant",["Env","fb-error-lite","sprintf"],function(b,c,d,e,f,g,h){"use strict";function b(b,c){if(!b){var e=c;for(var f=arguments.length,g=new Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];if(typeof e==="number"){var a=i(e,g),j=a.message,k=a.decoderLink;e=j;g.unshift(k)}else if(e===void 0){e="Invariant: ";for(var l=0;l<g.length;l++)e+="%s,"}var m=e,n=new Error(m);n.name="Invariant Violation";n.messageFormat=e;n.messageParams=g.map(function(a){return String(a)});n.taalOpcodes=[d("fb-error-lite").TAALOpcode.PREVIOUS_FRAME];n.stack;throw n}}function i(b,c){var e="Minified invariant #"+b+"; %s";c.length>0&&(e+=" Params: "+c.map(function(a){return"%s"}).join(", "));b=d("Env").show_invariant_decoder===!0?"visit "+a(b,c)+" to see the full message.":"";return{message:e,decoderLink:b}}function a(a,b){a="https://www.internalfb.com/intern/invariant/"+a+"/";b.length>0&&(a+="?"+b.map(function(a,b){return"args["+b+"]="+encodeURIComponent(String(a))}).join("&"));return a}h["default"]=b},98);c.__d("UrlMap",["invariant","UrlMapConfig","sdk.Runtime"],function(a,b,c,d,e,f,g,h){function a(a){var b="https";if(a==="graph_domain"){var e=c("sdk.Runtime").getGraphDomain();e?a="graph_".concat(e):a="graph"}if(a in d("UrlMapConfig"))return b+"://"+d("UrlMapConfig")[a];a in d("UrlMapConfig")||h(0,2511,a);return""}g.resolve=a},98);c.__d("sdk.Scribe",["QueryString","UrlMap","sdk.Runtime"],function(a,b,c,d,g,h,i){var j={};function a(a,b,g){g===void 0&&(g=!1);if(a==="jssdk_error"){var h=e("JSON","stringify",!1,b);if(Object.prototype.hasOwnProperty.call(j,h))return;else j[h]=!0}b.extra!=null&&typeof b.extra==="object"&&(h=b.extra,h.revision=c("sdk.Runtime").getRevision());h=new Image();var i=d("UrlMap").resolve("www")+"/platform/scribe_endpoint.php/";g||(h.crossOrigin="anonymous");h.src=c("QueryString").appendToUrl(i,{c:a,m:e("JSON","stringify",!1,f["extends"]({},b,{isSPIN:c("sdk.Runtime").getIsSPIN()}))})}i.log=a},98);c.__d("sdk.FeatureFunctor",[],function(a,b,c,d,e,f){function g(a,b,c){if(a.features&&b in a.features){a=a.features[b];if(typeof a==="object"&&typeof a.rate==="number")if(a.rate&&Math.random()*100<=a.rate)return a.value||!0;else return a.value?null:!1;else return a}return c}function a(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];if(c.length<2)throw new Error("Default value is required");var e=c[0],f=c[1];return g(a,e,f)}}f.create=a},66);c.__d("sdk.feature",["JSSDKConfig","sdk.FeatureFunctor"],function(a,b,c,d,e,f,g){a=d("sdk.FeatureFunctor").create(d("JSSDKConfig")),g["default"]=a},98);c.__d("sdk.ErrorHandling",["sdk.ErrorHandler","sdk.Runtime","sdk.Scribe","sdk.feature"],function(a,b,c,d,e,f,g){a=c("sdk.feature")("error_handling",!1),b=d("sdk.ErrorHandler").create(a,function(a){d("sdk.Scribe").log("jssdk_error",{appId:c("sdk.Runtime").getClientID(),error:a.name||a.message,extra:a})}),g["default"]=b},98);c.__d("FB",["DOMWrapper","GlobalCallback","JSSDKCssConfig","Log","dotAccess","sdk.Content","sdk.DOM","sdk.ErrorHandling","sdk.domReady"],function(b,c,d,g,h,i,j){window.FB&&window.FB.__buffer&&(window.__buffer=f["extends"]({},window.FB.__buffer));var k=window.FB={};c={};g("Log").setLevel(0);g("GlobalCallback").setPrefix("FB.__globalCallbacks");var a=document.createElement("div");g("DOMWrapper").setRoot(a);d("sdk.domReady")(function(){g("Log").info("domReady"),g("sdk.Content").appendHidden(a),d("JSSDKCssConfig").rules&&g("sdk.DOM").addCssRules(d("JSSDKCssConfig").rules,d("JSSDKCssConfig").components)});function l(a,b,c,e){return d("sdk.ErrorHandling").guard(function(){function f(a){return Array.isArray(a)?a.map(f):a&&typeof a==="object"&&a.__wrapped?a.__wrapped:typeof a==="function"&&/^function/.test(a.toString())?d("sdk.ErrorHandling").unguard(a):a}var h=Array.prototype.slice.call(arguments).map(f),j=a.apply(e,h),k,c=!0;if(j&&typeof j==="object"){k=Object.create(j);k.__wrapped=j;for(var m in j){var n=j[m];if(typeof n!=="function"||m==="constructor")continue;c=!1;k[m]=l(n,b+":"+m,m,j)}}return c?c?j:k:k},b)}function b(a,b){var c=a?d("dotAccess")(k,a,!0):k;Object.keys(b).forEach(function(d){var e=b[d];if(typeof e==="function"){var f=(a?a+".":"")+d;f=l(e,f,d,b);f&&(c[d]=f)}else(typeof e==="object"||typeof e==="number")&&(c[d]=e)})}e("Object","assign",!1,c,{provide:b});h=c;j["default"]=h},98);c.__d("AppUserPropertyAPIBuiltinField",[],function(a,b,c,d,e,f){e.exports={GENDER:"$gender",CITY:"$city",STATE:"$state",ZIPCODE:"$zipcode",COUNTRY:"$country",LANGUAGE:"$language",CURRENCY:"$currency",INSTALL_SOURCE:"$install_source",USER_TYPE:"$user_type",ACCOUNT_CREATED_TIME:"$account_created_time",APP_ID:"$app_id"}},null);c.__d("ArgumentError",["ManagedError"],function(a,b,c,d,e,g,h){a=function(a){f.inheritsLoose(b,a);function b(b,c){return a.call(this,b,c)||this}return b}(c("ManagedError")),h["default"]=a},98);c.__d("flattenObject",[],function(a,b,c,d,f,g){"use strict";function a(a){var b={};for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=a[c];if(d==null)continue;else typeof d==="string"?b[c]=d:b[c]=e("JSON","stringify",!1,d)}return b}g["default"]=a},66);c.__d("performance",[],function(a,b,c,d,e,f){"use strict";b=a.performance||a.msPerformance||a.webkitPerformance||{},c=b,f["default"]=c},66);c.__d("performanceNow",["performance"],function(b,c,d,e,f,g,h){if(d("performance").now)c=function(){return d("performance").now()};else{e=b._cstart;f=Date.now();var i=typeof e==="number"&&e<f?e:f,a=0;c=function(){var b=Date.now(),c=b-i;c<a&&(i-=a-c,c=b-i);a=c;return c}}g=c;h["default"]=g},98);c.__d("performanceNowSinceAppStart",["performanceNow"],function(a,b,c,d,e,f,g){g["default"]=c("performanceNow")},98);c.__d("removeFromArray",[],function(a,b,c,d,e,f){function a(a,b){b=a.indexOf(b),b!==-1&&a.splice(b,1)}f["default"]=a},66);c.__d("fb-error",["performanceNowSinceAppStart","removeFromArray"],function(b,c,d,g,h,i){"use strict";var j={PREVIOUS_FILE:1,PREVIOUS_FRAME:2,PREVIOUS_DIR:3,FORCED_KEY:4};function k(b){var a=new Error(b);if(a.stack===void 0)try{throw a}catch(a){}a.messageFormat=b;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.messageParams=d.map(function(a){return String(a)});a.taalOpcodes=[j.PREVIOUS_FRAME];return a}var a=!1,l={errorListener:function(c){var d=b.console,e=d[c.type]?c.type:"error";(c.type==="fatal"||e==="error"&&!a)&&(e=c.message,d.error("ErrorUtils caught an error:\n\n"+e+"\n\nSubsequent non-fatal errors won't be logged; see https://fburl.com/debugjs."),a=!0)}},m={access_token:null},n=6,o=6e4,p=10*o,q=new Map(),r=0;function s(){var a=c("performanceNowSinceAppStart")();if(a>r+o){var b=a-p;for(var d=q,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var l;if(e){if(f>=d.length)break;l=d[f++]}else{f=d.next();if(f.done)break;l=f.value}l=l;var m=l[0];l=l[1];l.lastAccessed<b&&q["delete"](m)}r=a}}function t(a){s();var b=c("performanceNowSinceAppStart")(),d=q.get(a);if(d==null){q.set(a,{dropped:0,logged:[b],lastAccessed:b});return 1}a=d.dropped;var e=d.logged;d.lastAccessed=b;while(e[0]<b-o)e.shift();if(e.length<n){d.dropped=0;e.push(b);return a+1}else{d.dropped++;return null}}var u={shouldLog:function(a){return t(a.hash)}},v="RE_EXN_ID";function w(a){var b=null;a==null||typeof a!=="object"?b=k("Non-object thrown: %s",String(a)):Object.prototype.hasOwnProperty.call(a,v)?b=k("Rescript exception thrown: %s",e("JSON","stringify",!1,a)):typeof a.message!=="string"?b=k("Non-error thrown: %s, keys: %s",String(a),e("JSON","stringify",!1,Object.keys(a).sort())):Object.isExtensible&&!Object.isExtensible(a)&&(b=k("Non-extensible thrown: %s",String(a.message)));if(b!=null){b.taalOpcodes=b.taalOpcodes||[];b.taalOpcodes.push(j.PREVIOUS_FRAME);return b}return a}var x=typeof window==="undefined"?"<self.onerror>":"<window.onerror>",y;function z(a){var b=a.error!=null?w(a.error):k(a.message||"");b.fileName==null&&a.filename!=null&&(b.fileName=a.filename);b.line==null&&a.lineno!=null&&(b.line=a.lineno);b.column==null&&a.colno!=null&&(b.column=a.colno);b.guardList=[x];b.loggingSource="ONERROR";(a=y)===null||a===void 0?void 0:a.reportError(b)}var A={setup:function(a){if(typeof b.addEventListener!=="function")return;if(y!=null)return;y=a;b.addEventListener("error",z)}},B=[],C={pushGuard:function(a){B.unshift(a)},popGuard:function(){B.shift()},inGuard:function(){return B.length!==0},cloneGuardList:function(){return B.map(function(a){return a.name})},findDeferredSource:function(){for(var a=0;a<B.length;a++){var b=B[a];if(b.deferredSource!=null)return b.deferredSource}}};function D(a){if(a.type!=null)return a.type;if(a.loggingSource=="GUARDED"||a.loggingSource=="ERROR_BOUNDARY")return"fatal";if(a.name=="SyntaxError")return"fatal";return a.loggingSource=="ONERROR"&&a.message.indexOf("ResizeObserver loop")>=0?"warn":a.stack!=null&&a.stack.indexOf("chrome-extension://")>=0?"warn":"error"}var E=[],F=function(){function a(){this.metadata=[].concat(E)}var b=a.prototype;b.addEntries=function(){var a;(a=this.metadata).push.apply(a,arguments);return this};b.addEntry=function(a,b,c){this.metadata.push([a,b,c]);return this};b.isEmpty=function(){return this.metadata.length===0};b.clearEntries=function(){this.metadata=[]};b.format=function(){var a=[];this.metadata.forEach(function(b){b&&b.length&&(b=b.map(function(a){return a!=null?String(a).replace(/:/g,"_"):""}).join(":"),a.push(b))});return a};b.getAll=function(){return this.metadata};a.addGlobalMetadata=function(a,b,c){E.push([a,b,c])};a.getGlobalMetadata=function(){return E};a.unsetGlobalMetadata=function(a,b){E=E.filter(function(c){return!(Array.isArray(c)&&c[0]===a&&c[1]===b)})};return a}(),G={debug:1,info:2,warn:3,error:4,fatal:5};function d(a,b){if(Object.isFrozen(a))return;b.type&&(!a.type||G[a.type]>G[b.type])&&(a.type=b.type);var c=b.metadata;if(c!=null){var d;d=(d=a.metadata)!==null&&d!==void 0?d:new F();c!=null&&d.addEntries.apply(d,c.getAll());a.metadata=d}b.project!=null&&(a.project=b.project);b.errorName!=null&&(a.errorName=b.errorName);b.componentStack!=null&&(a.componentStack=b.componentStack);b.deferredSource!=null&&(a.deferredSource=b.deferredSource);b.blameModule!=null&&(a.blameModule=b.blameModule);b.loggingSource!=null&&(a.loggingSource=b.loggingSource);d=(c=a.messageFormat)!==null&&c!==void 0?c:a.message;c=(c=a.messageParams)!==null&&c!==void 0?c:[];if(d!==b.messageFormat&&b.messageFormat!=null){var e;d+=" [Caught in: "+b.messageFormat+"]";c.push.apply(c,(e=b.messageParams)!==null&&e!==void 0?e:[])}a.messageFormat=d;a.messageParams=c;e=b.forcedKey;d=a.forcedKey;c=e!=null&&d!=null?e+"_"+d:e!==null&&e!==void 0?e:d;a.forcedKey=c}function g(a){var b;return H((b=a.messageFormat)!==null&&b!==void 0?b:a.message,a.messageParams||[])}function H(a,b){var c=0;a=a.replace(/%s/g,function(){return c<b.length?b[c++]:"NOPARAM"});c<b.length&&(a+=" PARAMS"+e("JSON","stringify",!1,b.slice(c)));return a}function i(a){return(a!==null&&a!==void 0?a:[]).map(function(a){return String(a)})}var I={aggregateError:d,toReadableMessage:g,toStringParams:i},J=5,K=[];function L(a){K.push(a),K.length>J&&K.shift()}function M(a){var b=a.getAllResponseHeaders();b!=null&&b.indexOf("X-FB-Debug")>=0&&(b=a.getResponseHeader("X-FB-Debug"),b&&L(b))}function N(){return K}var O={add:L,addFromXHR:M,getAll:N},P="abcdefghijklmnopqrstuvwxyz012345";function Q(){var b=0;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];for(var f=0;f<d.length;f++){var m=d[f];if(m!=null){var n=m.length;for(var o=0;o<n;o++)b=(b<<5)-b+m.charCodeAt(o)}}var a="";for(var p=0;p<6;p++)a=P.charAt(b&31)+a,b>>=5;return a}var R=[/\(([^\s\)\()]+):(\d+):(\d+)\)$/,/@([^\s\)\()]+):(\d+):(\d+)$/,/^([^\s\)\()]+):(\d+):(\d+)$/,/^at ([^\s\)\()]+):(\d+):(\d+)$/],S=/^\w+:\s.*?\n/g;Error.stackTraceLimit!=null&&Error.stackTraceLimit<80&&(Error.stackTraceLimit=80);function T(a){var b=a.name,c=a.message;a=a.stack;if(a==null)return null;if(b!=null&&c!=null&&c!==""){var d=b+": "+c+"\n";if(e(a,"startsWith",!0,d))return a.substr(d.length);if(a===b+": "+c)return null}if(b!=null){d=b+"\n";if(e(a,"startsWith",!0,d))return a.substr(d.length)}if(c!=null&&c!==""){b=": "+c+"\n";d=a.indexOf(b);c=a.substring(0,d);if(/^\w+$/.test(c))return a.substring(d+b.length)}return a.replace(S,"")}function U(a){a=a.trim();var b;a;var c,d,f;if(e(a,"includes",!0,"charset=utf-8;base64,"))b="<inlined-file>";else{var l;for(var m=0;m<R.length;m++){var n=R[m];l=a.match(n);if(l!=null)break}l!=null&&l.length===4?(c=l[1],d=parseInt(l[2],10),f=parseInt(l[3],10),b=a.substring(0,a.length-l[0].length)):b=a;b=b.replace(/^at /,"").trim()}n={identifier:b,script:c,line:d,column:f};n.text=ba(n);return n}function V(a){return a==null||a===""?[]:a.split(/\n\n/)[0].split("\n").map(U)}function W(a){a=T(a);return V(a)}function aa(a){if(a==null||a==="")return null;a=a.split("\n");a.splice(0,1);return a.map(function(a){return a.trim()})}function ba(a){var b=a.identifier,c=a.script,d=a.line;a=a.column;b="    at "+(b!==null&&b!==void 0?b:"<unknown>");c!=null&&d!=null&&a!=null&&(b+=" ("+c+":"+d+":"+a+")");return b}function ca(d){var e,f,w,x,a,y,z=W(d);e=(e=d.taalOpcodes)!==null&&e!==void 0?e:[];var A=d.framesToPop;if(A!=null){A=Math.min(A,z.length);while(A-->0)e.unshift(j.PREVIOUS_FRAME)}A=(A=d.messageFormat)!==null&&A!==void 0?A:d.message;f=((f=d.messageParams)!==null&&f!==void 0?f:[]).map(function(a){return String(a)});var B=aa(d.componentStack),C=B==null?null:B.map(U),E=d.metadata?d.metadata.format():new F().format();E.length===0&&(E=void 0);var G=z.map(function(a){return a.text}).join("\n");w=(w=d.errorName)!==null&&w!==void 0?w:d.name;var H=D(d),J=d.loggingSource,K=d.project;x=(x=d.lineNumber)!==null&&x!==void 0?x:d.line;a=(a=d.columnNumber)!==null&&a!==void 0?a:d.column;y=(y=d.fileName)!==null&&y!==void 0?y:d.sourceURL;var L=z.length>0;L&&x==null&&(x=z[0].line);L&&a==null&&(a=z[0].column);L&&y==null&&(y=z[0].script);C={blameModule:d.blameModule,column:a==null?null:String(a),clientTime:Math.floor(Date.now()/1e3),componentStackFrames:C,deferredSource:d.deferredSource!=null?ca(d.deferredSource):null,extra:(L=d.extra)!==null&&L!==void 0?L:{},fbtrace_id:d.fbtrace_id,guardList:(a=d.guardList)!==null&&a!==void 0?a:[],hash:Q(w,G,H,K,J),isNormalizedError:!0,line:x==null?null:String(x),loggingSource:J,message:I.toReadableMessage(d),messageFormat:A,messageParams:f,metadata:E,name:w,page_time:Math.floor(c("performanceNowSinceAppStart")()),project:K,reactComponentStack:B,script:y,serverHash:d.serverHash,stack:G,stackFrames:z,type:H,xFBDebug:O.getAll()};d.forcedKey!=null&&(C.forcedKey=d.forcedKey);e.length>0&&(C.taalOpcodes=e);L=b.location;L&&(C.windowLocationURL=L.href);for(a in C)C[a]==null&&delete C[a];return C}function da(a){return a!=null&&typeof a==="object"&&a.isNormalizedError===!0?a:null}var X={formatStackFrame:ba,normalizeError:ca,ifNormalizedError:da},ea="<global.react>",Y=[],fa=[],ga=50,ha=!1,Z={history:fa,addListener:function(a,b){b===void 0&&(b=!1),Y.push(a),b||fa.forEach(function(b){return a(b,(b=b.loggingSource)!==null&&b!==void 0?b:"DEPRECATED")})},unshiftListener:function(a){Y.unshift(a)},removeListener:function(a){c("removeFromArray")(Y,a)},reportError:function(a){a=X.normalizeError(a),Z.reportNormalizedError(a)},reportNormalizedError:function(b){if(ha)return!1;var a=C.cloneGuardList();b.componentStackFrames&&a.unshift(ea);a.length>0&&(b.guardList=a);b.deferredSource==null&&(a=C.findDeferredSource(),a!=null&&(b.deferredSource=X.normalizeError(a)));fa.length>ga&&fa.splice(ga/2,1);fa.push(b);ha=!0;for(a=0;a<Y.length;a++)try{var c;Y[a](b,(c=b.loggingSource)!==null&&c!==void 0?c:"DEPRECATED")}catch(a){}ha=!1;return!0}};Z.addListener(l.errorListener);var ia="<anonymous guard>",ja=!1,ka={applyWithGuard:function(a,b,c,d){C.pushGuard({name:((d===null||d===void 0?void 0:d.name)!=null?d.name:null)||(a.name?"func_name:"+a.name:null)||ia,deferredSource:d===null||d===void 0?void 0:d.deferredSource});if(ja)try{return a.apply(b,c)}finally{C.popGuard()}try{return Function.prototype.apply.call(a,b,c)}catch(g){try{b=d!==null&&d!==void 0?d:f["extends"]({},null);var l=b.deferredSource,m=b.onError;b=b.onNormalizedError;var n=w(g);l={deferredSource:l,loggingSource:"GUARDED",project:(l=d===null||d===void 0?void 0:d.project)!==null&&l!==void 0?l:"ErrorGuard",type:d===null||d===void 0?void 0:d.errorType};I.aggregateError(n,l);d=X.normalizeError(n);n==null&&a&&(d.extra[a.toString().substring(0,100)]="function",c!=null&&c.length&&(d.extra[e("Array","from",!1,c).toString().substring(0,100)]="args"));d.guardList=C.cloneGuardList();m&&m(n);b&&b(d);Z.reportNormalizedError(d)}catch(a){}}finally{C.popGuard()}},guard:function(a,b){function c(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return ka.applyWithGuard(a,this,d,b)}a.__SMmeta&&(c.__SMmeta=a.__SMmeta);return c},inGuard:function(){return C.inGuard()},skipGuardGlobal:function(a){ja=a}},la=1024,ma=[],na=0;function oa(a){return String(a)}function $(a){return a==null?null:String(a)}function pa(a,b){var c={};b&&b.forEach(function(a){c[a]=!0});Object.keys(a).forEach(function(b){a[b]?c[b]=!0:c[b]&&delete c[b]});return Object.keys(c)}function qa(a){return(a!==null&&a!==void 0?a:[]).map(function(a){return{column:$(a.column),identifier:a.identifier,line:$(a.line),script:a.script}})}function ra(a){a=String(a);return a.length>la?a.substring(0,la-3)+"...":a}function sa(a,b){var c;c={appId:$(b.appId),cavalry_lid:b.cavalry_lid,access_token:m.access_token,ancestor_hash:a.hash,bundle_variant:(c=b.bundle_variant)!==null&&c!==void 0?c:null,clientTime:oa(a.clientTime),column:a.column,componentStackFrames:qa(a.componentStackFrames),events:a.events,extra:pa(a.extra,b.extra),forcedKey:a.forcedKey,frontend_env:(c=b.frontend_env)!==null&&c!==void 0?c:null,guardList:a.guardList,line:a.line,loggingFramework:b.loggingFramework,messageFormat:ra(a.messageFormat),messageParams:a.messageParams.map(ra),name:a.name,sample_weight:$(b.sample_weight),script:a.script,site_category:b.site_category,stackFrames:qa(a.stackFrames),type:a.type,page_time:$(a.page_time),project:a.project,push_phase:b.push_phase,report_source:b.report_source,report_source_ref:b.report_source_ref,rollout_hash:(c=b.rollout_hash)!==null&&c!==void 0?c:null,script_path:b.script_path,server_revision:$(b.server_revision),spin:$(b.spin),svn_rev:String(b.client_revision),additional_client_revisions:e("Array","from",!1,(c=b.additional_client_revisions)!==null&&c!==void 0?c:[]).map(oa),taalOpcodes:a.taalOpcodes==null?null:a.taalOpcodes.map(function(a){return a}),web_session_id:b.web_session_id,version:"3",xFBDebug:a.xFBDebug};b=a.blameModule;var d=a.deferredSource;b!=null&&(c.blameModule=String(b));d&&d.stackFrames&&(c.deferredSource={stackFrames:qa(d.stackFrames)});a.metadata&&(c.metadata=a.metadata);a.loadingUrls&&(c.loadingUrls=a.loadingUrls);a.serverHash!=null&&(c.serverHash=a.serverHash);a.windowLocationURL!=null&&(c.windowLocationURL=a.windowLocationURL);a.loggingSource!=null&&(c.loggingSource=a.loggingSource);return c}function ta(a,b,c){var d;na++;if(b.sample_weight===0)return!1;var f=u.shouldLog(a);if(f==null)return!1;if((d=b.projectBlocklist)!==null&&d!==void 0&&e(d,"includes",!0,a.project))return!1;d=sa(a,b);e("Object","assign",!1,d,{ancestors:ma.slice(),clientWeight:oa(f),page_position:oa(na)});ma.length<15&&ma.push(a.hash);c(d);return!0}var ua={createErrorPayload:sa,postError:ta},va=null,wa=!1;function xa(a){if(va==null)return;var b=va,c=a.reason,d;if(c!=null&&typeof c==="object"&&(c.name==null||c.name===""||c.message==null||c.message===""))try{d=k("UnhandledRejection: %s",e("JSON","stringify",!1,c)),d.loggingSource="ONUNHANDLEDREJECTION"}catch(a){d=k("UnhandledRejection: (circular) %s",Object.keys(c).join(",")),d.loggingSource="ONUNHANDLEDREJECTION"}else d=w(c),d.loggingSource||(d.loggingSource="ONUNHANDLEDREJECTION");try{c=a.promise,d.stack=String(d.stack||"")+(c!=null&&typeof c.settledStack==="string"?"\n(<promise_settled_stack_below>)\n"+c.settledStack:"")+(c!=null&&typeof c.createdStack==="string"?"\n(<promise_created_stack_below>)\n"+c.createdStack:"")}catch(a){}b.reportError(d);a.preventDefault()}function ya(a){va=a,typeof b.addEventListener==="function"&&!wa&&(wa=!0,b.addEventListener("unhandledrejection",xa))}var za={onunhandledrejection:xa,setup:ya};d={preSetup:function(a){(a==null||a.ignoreOnError!==!0)&&A.setup(Z),(a==null||a.ignoreOnUnahndledRejection!==!0)&&za.setup(Z)},setup:function(a,b){Z.addListener(function(c){ua.postError(c,a,b)})}};var Aa=function(){function a(a){this.project=a,this.events=[],this.metadata=new F(),this.taalOpcodes=[]}var b=a.prototype;b.$1=function(c,d){var v=String(d),w=this.events,x=this.project,y=this.metadata,b=this.blameModule,z=this.forcedKey,A=this.error,B;for(var C=arguments.length,D=new Array(C>2?C-2:0),E=2;E<C;E++)D[E-2]=arguments[E];if(this.normalizedError){var F={message:this.normalizedError.messageFormat+" [Caught in: "+v+"]",params:[].concat(this.normalizedError.messageParams,D),forcedKey:z};B=f["extends"]({},this.normalizedError,{message:F.message,messageFormat:F.message,messageParams:I.toStringParams(F.params),project:x,type:c,loggingSource:"FBLOGGER"})}else if(A)this.taalOpcodes.length>0&&new a("fblogger").blameToPreviousFrame().blameToPreviousFrame().warn("Blame helpers do not work with catching"),I.aggregateError(A,{messageFormat:v,messageParams:I.toStringParams(D),errorName:A.name,forcedKey:z,project:x,type:c,loggingSource:"FBLOGGER"}),B=X.normalizeError(A);else{A=new Error(v);if(A.stack===void 0)try{throw A}catch(a){}A.messageFormat=v;A.messageParams=I.toStringParams(D);A.blameModule=b;A.forcedKey=z;A.project=x;A.type=c;A.loggingSource="FBLOGGER";A.taalOpcodes=[j.PREVIOUS_FRAME,j.PREVIOUS_FRAME].concat(this.taalOpcodes);B=X.normalizeError(A);B.name="FBLogger"}if(!y.isEmpty())if(B.metadata==null)B.metadata=y.format();else{var G=B.metadata.concat(y.format()),H=new Set(G);B.metadata=e("Array","from",!1,H.values())}if(w.length>0)if(B.events!=null){var J;(J=B.events).push.apply(J,w)}else B.events=w;Z.reportNormalizedError(B);return A};b.fatal=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$1.apply(this,["fatal",a].concat(c))};b.mustfix=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$1.apply(this,["error",a].concat(c))};b.warn=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$1.apply(this,["warn",a].concat(c))};b.info=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$1.apply(this,["info",a].concat(c))};b.debug=function(a){};b.mustfixThrow=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=this.$1.apply(this,["error",a].concat(c));e||(e=k("mustfixThrow does not support catchingNormalizedError"),e.taalOpcodes=e.taalOpcodes||[],e.taalOpcodes.push(j.PREVIOUS_FRAME));throw e};b.catching=function(b){b instanceof Error?this.error=b:new a("fblogger").blameToPreviousFrame().warn("Catching non-Error object is not supported");return this};b.catchingNormalizedError=function(a){this.normalizedError=a;return this};b.event=function(a){this.events.push(a);return this};b.blameToModule=function(a){this.blameModule=a;return this};b.blameToPreviousFile=function(){this.taalOpcodes.push(j.PREVIOUS_FILE);return this};b.blameToPreviousFrame=function(){this.taalOpcodes.push(j.PREVIOUS_FRAME);return this};b.blameToPreviousDirectory=function(){this.taalOpcodes.push(j.PREVIOUS_DIR);return this};b.addToCategoryKey=function(a){this.forcedKey=a;return this};b.addMetadata=function(a,b,c){this.metadata.addEntry(a,b,c);return this};return a}();g=function(a,b){var c=new Aa(a);return b!=null?c.event(a+"."+b):c};g.addGlobalMetadata=function(a,b,c){F.addGlobalMetadata(a,b,c)};i={blameToPreviousFile:function(a){var b;a.taalOpcodes=(b=a.taalOpcodes)!==null&&b!==void 0?b:[];a.taalOpcodes.push(j.PREVIOUS_FILE);return a},blameToPreviousFrame:function(a){var b;a.taalOpcodes=(b=a.taalOpcodes)!==null&&b!==void 0?b:[];a.taalOpcodes.push(j.PREVIOUS_FRAME);return a},blameToPreviousDirectory:function(a){var b;a.taalOpcodes=(b=a.taalOpcodes)!==null&&b!==void 0?b:[];a.taalOpcodes.push(j.PREVIOUS_DIR);return a}};M={err:k,ErrorBrowserConsole:l,ErrorDynamicData:m,ErrorFilter:u,ErrorGlobalEventHandler:A,ErrorGuard:ka,ErrorGuardState:C,ErrorMetadata:F,ErrorNormalizeUtils:X,ErrorPoster:ua,ErrorPubSub:Z,ErrorSerializer:I,ErrorSetup:d,ErrorXFBDebug:O,FBLogger:g,getErrorSafe:w,getSimpleHash:Q,TAAL:i,TAALOpcode:j};h.exports=M},null);c.__d("FBLogger",["fb-error"],function(a,b,c,d,e,f,g){"use strict";g["default"]=c("fb-error").FBLogger},98);c.__d("BaseDeserializePHPQueryData",[],function(a,b,c,d,e,f){"use strict";var g=/^([-_\w]+)((?:\[[-_\w]*\])+)=?(.*)/;function h(a){return a==="hasOwnProperty"||a==="__proto__"?"\ud83d\udf56":a}function a(b,c){if(b==null||b==="")return{};var d={};b=b.replace(/%5B/gi,"[").replace(/%5D/gi,"]");b=b.split("&");var e=Object.prototype.hasOwnProperty;for(var f=0,i=b.length;f<i;f++){var a=b[f].match(g);if(!a){var j=b[f].indexOf("=");if(j===-1)d[c(b[f])]=null;else{var k=b[f].substring(0,j);j=b[f].substring(j+1);d[c(k)]=c(j)}}else{k=a[2].split(/\]\[|\[|\]/).slice(0,-1);j=a[1];a=c(a[3]||"");k[0]=j;j=d;for(var l=0;l<k.length-1;l++){var m=h(k[l]);if(m){if(!e.call(j,m)){var n=k[l+1]&&!k[l+1].match(/^\d{1,3}$/)?{}:[];j[m]=n;if(j[m]!==n)return d}j=j[m]}else k[l+1]&&!k[l+1].match(/^\d{1,3}$/)?j.push({}):j.push([]),j=j[j.length-1]}j instanceof Array&&k[k.length-1]===""?j.push(a):j[h(k[k.length-1])]=a}}return d}f.deserialize=a},66);c.__d("flattenPHPQueryData",["invariant"],function(b,c,d,e,f,g,h,i){function b(b){return a(b,"",{})}function a(b,c,d){if(b==null)d[c]=void 0;else if(typeof b==="object"){typeof b.appendChild!=="function"||i(0,2616);for(var e in b)e!=="$$typeof"&&Object.prototype.hasOwnProperty.call(b,e)&&b[e]!==void 0&&a(b[e],c?c+"["+e+"]":e,d)}else d[c]=b;return d}h["default"]=b},98);c.__d("PHPQuerySerializer",["BaseDeserializePHPQueryData","flattenPHPQueryData"],function(b,c,d,e,f,g,h){function b(a){var b=[];a=d("flattenPHPQueryData")(a);for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var e=i(c);a[c]===void 0?b.push(e):b.push(e+"="+i(String(a[c])))}return b.join("&")}function i(a){return encodeURIComponent(a).replace(/%5D/g,"]").replace(/%5B/g,"[")}function c(b){return e("BaseDeserializePHPQueryData").deserialize(b,a)}function a(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}}f={decodeComponent:a,deserialize:c,encodeComponent:i,serialize:b};g.exports=f},34);c.__d("PHPStrictQuerySerializer",["PHPQuerySerializer","flattenPHPQueryData"],function(a,b,c,d,e,f,g){function a(a){var b=[];a=c("flattenPHPQueryData")(a);for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=h(d);a[d]===void 0?b.push(e):b.push(e+"="+h(String(a[d])))}return b.join("&")}function h(a){return encodeURIComponent(a)}g.serialize=a;g.encodeComponent=h;g.deserialize=d("PHPQuerySerializer").deserialize;g.decodeComponent=d("PHPQuerySerializer").decodeComponent},98);c.__d("URIRFC3986",[],function(a,b,c,d,e,f){var g=new RegExp("^([^:/?#]+:)?(//([^\\\\/?#@]*@)?(\\[[A-Fa-f0-9:.]+\\]|[^\\/?#:]*)(:[0-9]*)?)?([^?#]*)(\\?[^#]*)?(#.*)?");function a(a){if(a.trim()==="")return null;a=a.match(g);if(a==null)return null;var b=a[2]?a[2].substr(2):null,c=a[1]?a[1].substr(0,a[1].length-1):null;a={uri:a[0]?a[0]:null,scheme:c,authority:b,userinfo:a[3]?a[3].substr(0,a[3].length-1):null,host:a[2]?a[4]:null,port:a[5]?a[5].substr(1)?parseInt(a[5].substr(1),10):null:null,path:a[6]?a[6]:null,query:a[7]?a[7].substr(1):null,fragment:a[8]?a[8].substr(1):null,isGenericURI:b===null&&!!c};return a}f.parse=a},66);c.__d("createObjectFrom",[],function(a,b,c,d,e,f){function g(a,b){if(b===void 0)return g(a,!0);var c={};if(Array.isArray(b))for(var d=a.length-1;d>=0;d--)c[a[d]]=b[d];else for(d=a.length-1;d>=0;d--)c[a[d]]=b;return c}f["default"]=g},66);c.__d("URISchemes",["createObjectFrom"],function(a,b,c,d,e,f,g){"use strict";var h=c("createObjectFrom")(["apk","accountscenter","aidemos","aistudio","blob","cmms","fb","fba","fbatwork","fb-ama","fb-internal","fb-workchat","fb-workchat-secure","fb-messenger","fb-messenger-public","fb-messenger-group-thread","fb-page-messages","fb-pma","fbcf","fbconnect","fbinternal","fbmobilehome","fbrpc","file","flipper","ftp","gtalk","http","https","mailto","wss","ms-app","intent","itms","itms-apps","itms-services","lasso","market","svn+ssh","fbstaging","tel","sms","pebblejs","sftp","whatsapp","moments","flash","fblite","chrome-extension","webcal","instagram","iglite","fb124024574287414","fb124024574287414rc","fb124024574287414master","fb1576585912599779","fb929757330408142","designpack","fbpixelcloud","fbapi20130214","fb1196383223757595","tbauth","oculus","oculus.store","oculus.feed","oculusstore","odh","com.oculus.rd","aria","skype","ms-windows-store","callto","messenger","workchat","fb236786383180508","fb1775440806014337","data","fb-mk","munki","origami-file","fb-nimble-vrsrecorder","fb-nimble-monohandtrackingvis","together","togetherbl","horizonlauncher","venues","whatsapp-consumer","whatsapp-smb","fb-ide-opener","fb-vscode","fb-vscode-insiders","editor","spark-studio","arstudio","manifold","origami-internal","origami-public","stella","mwa","mattermost","logaggregator","workrooms","pcoip","cinema","home","oculus360photos","systemux"]);function a(a){return a==null||a===""?!0:Object.prototype.hasOwnProperty.call(h,a.toLowerCase())}g.isAllowed=a},98);c.__d("isSameOrigin",[],function(a,b,c,d,e,f){"use strict";function a(a,b){return!a.getProtocol()||!a.getDomain()||!b.getProtocol()||!b.getDomain()?!1:a.getOrigin()===b.getOrigin()}f["default"]=a},66);c.__d("setHostSubdomain",[],function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.split(".");a.length<3?a.unshift(b):a[0]=b;return a.join(".")}f["default"]=a},66);c.__d("URIAbstractBase",["invariant","FBLogger","PHPStrictQuerySerializer","URIRFC3986","URISchemes","isSameOrigin","setHostSubdomain"],function(b,c,d,f,g,h,i){var j,a,k=new RegExp("[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]"),l=new RegExp("^(?:[^/]*:|[\\x00-\\x1f]*/[\\x00-\\x1f]*/)"),m=[];b=function(){"use strict";b.parse=function(d,f,m,h){if(!f)return!0;if(f instanceof b){d.setProtocol(f.getProtocol());d.setDomain(f.getDomain());d.setPort(f.getPort());d.setPath(f.getPath());d.setQueryData(h.deserialize(h.serialize(f.getQueryData())));d.setFragment(f.getFragment());d.setIsGeneric(f.getIsGeneric());d.setForceFragmentSeparator(f.getForceFragmentSeparator());d.setOriginalRawQuery(f.getOriginalRawQuery());d.setQueryParamModified(!1);return!0}f=f.toString().trim();var i=(j||(j=c("URIRFC3986"))).parse(f)||{fragment:null,scheme:null,query:null};if(!m&&!(a||(a=c("URISchemes"))).isAllowed(i.scheme))return!1;d.setProtocol(i.scheme||"");if(!m&&k.test(i.host||""))return!1;d.setDomain(i.host||"");d.setPort(i.port||"");d.setPath(i.path||"");if(m)d.setQueryData(h.deserialize(i.query||"")||{});else try{d.setQueryData(h.deserialize(i.query||"")||{})}catch(a){return!1}d.setFragment(i.fragment||"");i.fragment===""&&d.setForceFragmentSeparator(!0);d.setIsGeneric(i.isGenericURI||!1);d.setOriginalRawQuery(i.query);d.setQueryParamModified(!1);if(i.userinfo!==null){if(m)throw new Error("URI.parse: invalid URI (userinfo is not allowed in a URI): "+f);return!1}if(!d.getDomain()&&d.getPath().indexOf("\\")!==-1){if(m)throw new Error("URI.parse: invalid URI (no domain but multiple back-slashes): "+f);return!1}if(!d.getProtocol()&&l.test(f)){if(m)throw new Error("URI.parse: invalid URI (unsafe protocol-relative URLs): "+f+"'");return!1}if(d.getDomain()&&d.getPath()&&!e(d.getPath(),"startsWith",!0,"/")){if(m)throw new Error("URI.parse: invalid URI (domain and path where path lacks leading slash): "+f);return!1}d.getProtocol()&&!d.getIsGeneric()&&!d.getDomain()&&d.getPath()!==""&&c("FBLogger")("uri").warn('URI.parse: invalid URI (protocol "'+d.getProtocol()+'" with no domain)');return!0};b.tryParse=function(a,c){var d=new b(null,c);return b.parse(d,a,!1,c)?d:null};b.isValid=function(a,c){return!!b.tryParse(a,c)};function b(a,c){c||i(0,2966),this.$9=c,this.$7="",this.$1="",this.$6="",this.$5="",this.$3="",this.$4=!1,this.$8={},this.$2=!1,b.parse(this,a,!0,c),this.$11=!1}var d=b.prototype;d.setProtocol=function(b){(a||(a=c("URISchemes"))).isAllowed(b)||i(0,11793,b);this.$7=b;return this};d.getProtocol=function(){return(this.$7||"").toLowerCase()};d.setSecure=function(a){return this.setProtocol(a?"https":"http")};d.isSecure=function(){return this.getProtocol()==="https"};d.setDomain=function(a){if(k.test(a))throw new Error("URI.setDomain: unsafe domain specified: "+a+" for url "+this.toString());this.$1=a;return this};d.getDomain=function(){return this.$1};d.setPort=function(a){this.$6=a;return this};d.getPort=function(){return this.$6};d.setPath=function(a){this.$5=a;return this};d.getPath=function(){return this.$5};d.addQueryData=function(a,b){Object.prototype.toString.call(a)==="[object Object]"?e("Object","assign",!1,this.$8,a):this.$8[a]=b;this.$11=!0;return this};d.setQueryData=function(a){this.$8=a;this.$11=!0;return this};d.getQueryData=function(){return this.$8};d.setQueryString=function(a){return this.setQueryData(this.$9.deserialize(a))};d.getQueryString=function(a,b,c){a===void 0&&(a=!1);b===void 0&&(b=function(){return!1});c===void 0&&(c=null);return this.$12(!1,a,b,c)};d.$12=function(a,b,c,d){a===void 0&&(a=!1);b===void 0&&(b=!1);c===void 0&&(c=function(){return!1});d===void 0&&(d=null);return!this.$11&&(b||c(this.getDomain()))?(b=this.$10)!=null?b:"":(a&&d?d:this.$9).serialize(this.getQueryData())};d.removeQueryData=function(a){Array.isArray(a)||(a=[a]);for(var b=0,c=a.length;b<c;++b)delete this.$8[a[b]];this.$11=!0;return this};d.setFragment=function(a){this.$3=a;this.setForceFragmentSeparator(!1);return this};d.getFragment=function(){return this.$3};d.setForceFragmentSeparator=function(a){this.$2=a;return this};d.getForceFragmentSeparator=function(){return this.$2};d.setIsGeneric=function(a){this.$4=a;return this};d.getIsGeneric=function(){return this.$4};d.getOriginalRawQuery=function(){return this.$10};d.setOriginalRawQuery=function(a){this.$10=a;return this};d.setQueryParamModified=function(a){this.$11=a;return this};d.isEmpty=function(){return!(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||Object.keys(this.getQueryData()).length>0||this.getFragment())};d.toString=function(a,b){a===void 0&&(a=function(){return!1});b===void 0&&(b=null);return this.$13(!1,!1,a,b)};d.toStringRawQuery=function(a,b){a===void 0&&(a=function(){return!1});b===void 0&&(b=null);return this.$13(!0,!1,a,b)};d.toStringPreserveQuery=function(a,b){a===void 0&&(a=function(){return!1});b===void 0&&(b=null);return this.$13(!1,!0,a,b)};d.toStringStrictQueryEncoding=function(a){a===void 0&&(a=function(){return!1});return this.$13(!0,!1,a,c("PHPStrictQuerySerializer"))};d.$13=function(a,b,c,d){a===void 0&&(a=!1);b===void 0&&(b=!1);c===void 0&&(c=function(){return!1});d===void 0&&(d=null);var e=this;for(var f=0;f<m.length;f++)e=m[f](e);return e.$14(a,b,c,d)};d.$14=function(a,b,c,d){a===void 0&&(a=!1);b===void 0&&(b=!1);c===void 0&&(c=function(){return!1});d===void 0&&(d=null);var e="",f=this.getProtocol();f&&(e+=f+":"+(this.getIsGeneric()?"":"//"));f=this.getDomain();f&&(e+=f);f=this.getPort();f&&(e+=":"+f);f=this.getPath();f?e+=f:e&&(e+="/");f=this.$12(a,b,c,d);f&&(e+="?"+f);a=this.getFragment();a?e+="#"+a:this.getForceFragmentSeparator()&&(e+="#");return e};b.registerFilter=function(a){m.push(a)};d.getOrigin=function(){var a=this.getPort();return this.getProtocol()+"://"+this.getDomain()+(a?":"+a:"")};d.isSameOrigin=function(a){return c("isSameOrigin")(this,a)};d.getQualifiedURIBase=function(){return new b(this,this.$9).qualify()};d.qualify=function(){if(!this.getDomain()){var a=new b(window.location.href,this.$9);this.setProtocol(a.getProtocol()).setDomain(a.getDomain()).setPort(a.getPort())}return this};d.setSubdomain=function(a){var b=this.qualify();b=b.getDomain();return this.setDomain(c("setHostSubdomain")(b,a))};d.getSubdomain=function(){if(!this.getDomain())return"";var a=this.getDomain().split(".");if(a.length<=2)return"";else return a[0]};d.isSubdomainOfDomain=function(a){var c=this.getDomain();return b.isDomainSubdomainOfDomain(c,a,this.$9)};b.isDomainSubdomainOfDomain=function(a,c,d){if(c===""||a==="")return!1;if(e(a,"endsWith",!0,c)){var f=a.length,j=c.length,k=f-j-1;if(f===j||a[k]==="."){f=new b(null,d);f.setDomain(c);return b.isValid(f,d)}}return!1};return b}();g.exports=b},null);c.__d("sdk.URI",["QueryString","URIAbstractBase"],function(b,c,d,e,g,h,i){var j=/\.facebook\.com$/,a={serialize:function(a){return a?d("QueryString").encode(a):""},deserialize:function(a){return a?d("QueryString").decode(a):{}}};b=function(b){f.inheritsLoose(c,b);function c(c){return b.call(this,c,a)||this}var e=c.prototype;e.isFacebookURI=function(){return j.test(this.getDomain())};e.valueOf=function(){return this.toString()};c.isValidURI=function(b){return d("URIAbstractBase").isValid(b,a)};return c}(d("URIAbstractBase"));i["default"]=b},98);c.__d("ApiClientUtils",["ArgumentError","Assert","Log","flattenObject","sdk.URI","sprintf"],function(a,b,c,d,e,f,g){var h={get:!0,post:!0,"delete":!0,put:!0};function a(a){var b=a.shift();c("Assert").isString(b,"Invalid path");!/^https?/.test(b)&&b.charAt(0)!=="/"&&(b="/"+b);var e,f={};try{e=new(c("sdk.URI"))(b)}catch(a){throw new(c("ArgumentError"))(a.message,a)}a.forEach(function(a){return f[typeof a]=a});b=(f.string||"get").toLowerCase();c("Assert").isTrue(Object.prototype.hasOwnProperty.call(h,b),c("sprintf")("Invalid method passed to ApiClient: %s",b));a=f["function"];a||d("Log").warn("No callback passed to the ApiClient");f.object&&e.addQueryData(c("flattenObject")(f.object));var g=e.getQueryData();g.method=b;return{uri:e,callback:a,params:g}}g.parseCallDataFromArgs=a},98);c.__d("errorCode",[],function(a,b,c,d,e,f){"use strict";function a(a){throw new Error('errorCode("'+a+'"): This should not happen. Oh noes!')}f["default"]=a},66);c.__d("nullthrows",[],function(a,b,c,d,e,f){function a(a,b){b===void 0&&(b="Got unexpected null or undefined");if(a!=null)return a;a=new Error(b);a.framesToPop=1;throw a}f["default"]=a},66);c.__d("sdk.safelyParseResponse",["errorCode","nullthrows"],function(b,c,d,f,g,h,i,j){"use strict";var a=function(a,b,c,d){return k};function b(b,c,f){c===void 0&&(c=null);f===void 0&&(f=null);try{return b===null?k:e("JSON","parse",!1,d("nullthrows")(b))}catch(d){return a(d,b,c,f)}}var k={error:{code:1,error_subcode:1357046,message:"Received Invalid JSON reply.",type:"http"}};b.ERROR=k;b.setErrorHandler=function(b){a=b};c=b;i["default"]=c},98);c.__d("whitelistObjectKeys",[],function(a,b,c,d,e,f){function a(a,b){var c={};b=Array.isArray(b)?b:Object.keys(b);for(var d=0;d<b.length;d++)typeof a[b[d]]!=="undefined"&&(c[b[d]]=a[b[d]]);return c}f["default"]=a},66);c.__d("ApiBatcher",["invariant","ApiClientUtils","QueryString","sdk.safelyParseResponse","whitelistObjectKeys"],function(b,c,d,e,f,g,h,i){"use strict";var a=50,j=105440539523;b=function(){function b(a,b){this.$1=[],this.$2=[],this.$4=null,this.executeRequest=a,this.$3=b}var c=b.prototype;c.scheduleBatchCall=function(){var c=this;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=b.prepareBatchParams(e),h=g.body,i=g.callback,j=g.method,k=g.relative_url,l={method:j,relative_url:k};h&&(l.body=h);this.$1.push(l);this.$2.push(i);this.$1.length==a?(this.$4&&window.clearTimeout(this.$4),this.$5()):this.$4||(this.$4=window.setTimeout(function(){c.$5()},0))};b.prepareBatchParams=function(b,c){c===void 0&&(c=[]);b=e("ApiClientUtils").parseCallDataFromArgs(b);var f=b.uri,j=b.callback;b=b.params.method;var h,i=f.removeQueryData("method").toString();if(b.toLowerCase()=="post"){var a=f.getQueryData();h=d("QueryString").encode(a);a=d("whitelistObjectKeys")(a,c);i=f.setQueryData(a).toString()}return{body:h,callback:j,method:b,relative_url:i}};c.$5=function(){this.$1.length>0||i(0,4698);this.$1.length===this.$2.length||i(0,4699);var a=this.$1,b=this.$2;this.$1=[];this.$2=[];this.$4=null;if(a.length===1){var c=a[0],e=b[0],f=c.body?d("QueryString").decode(c.body):null;this.executeRequest(c.relative_url,c.method,f,e);return}this.executeRequest("/","POST",{batch:a,include_headers:!1,batch_app_id:this.$3||j},function(a){Array.isArray(a)?a.forEach(function(a,c){b[c](d("sdk.safelyParseResponse")(a&&a.body))}):b.forEach(function(a){return a({error:{message:"Fatal: batch call failed."}})})})};return b}();h["default"]=b},98);c.__d("RequestConstants",["errorCode"],function(a,b,c,d,e,f,g,h){a={code:1,error_subcode:1357045,message:"unknown error (empty response)",type:"http",status:0},g.PARSE_ERROR_TEMPLATE=a},98);c.__d("sdk.Cookie",["QueryString","sdk.Runtime","sdk.Scribe","sdk.feature"],function(b,c,d,f,g,h,i){var j=null,a=["fblo_","fbsr_","fbm_"];function k(b,c,l,m){if(!e(a,"includes",!0,b)){f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"unknown_cookie_prefix."+b});if(d("sdk.feature")("limit_unknown_cookie_setting",!1))return}b=b+d("sdk.Runtime").getClientID();m=m?"; SameSite=None;Secure":"";var n=j!==null&&j!==".";n&&(document.cookie=b+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT"+m,document.cookie=b+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;domain="+location.hostname+m);var k=new Date(l).toUTCString();document.cookie=b+"="+c+(c&&l===0?"":"; expires="+k)+"; path=/"+(n?"; domain="+((b=j)!=null?b:""):"")+m}function l(a){a=a+d("sdk.Runtime").getClientID();a=new RegExp("\\b"+a+"=([^;]*)\\b");a=document.cookie.match(a);if(a==null)return null;else return a[1]}function b(a){j=a;a=d("QueryString").encode({base_domain:j!==null&&j!=="."?j:""});var b=new Date();b.setFullYear(b.getFullYear()+1);k("fbm_",a,b.getTime(),!0)}function c(){return j}function m(){var a=l("fbm_");if(a!=null&&j===null){a=d("QueryString").decode(a);j=a.base_domain;return{base_domain:j}}return null}function g(){return l("fbsr_")}function h(a,b){if(a==="")throw new Error("Value passed to Cookie.setSignedRequestCookie was empty.");k("fbsr_",a,b,!0)}function n(){m(),k("fbsr_","",0,!0)}i.setRaw=k;i.getRaw=l;i.setDomain=b;i.getDomain=c;i.loadMeta=m;i.loadSignedRequest=g;i.setSignedRequestCookie=h;i.clearSignedRequestCookie=n},98);c.__d("CORSRequest",["Log","QueryString","RequestConstants","sdk.Cookie","sdk.safelyParseResponse","wrapFunction"],function(c,d,g,h,i,j,k){function l(c,d,e){e===void 0&&(e={withCredentials:!1});if(!a.XMLHttpRequest)return null;var f=new XMLHttpRequest(),m=function(){};((e=e)==null?void 0:e.withCredentials)&&(f.withCredentials=!0);if("withCredentials"in f)f.open(c,d,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded");else if(a.XDomainRequest){f=new XDomainRequest();try{f.open(c,d),f.onprogress=f.ontimeout=m}catch(a){return null}}else return null;var n={send:function(a){f.send(a)}},l=g("wrapFunction")(function(){l=m,"onload"in n&&n.onload(f)},"entry","XMLHttpRequest:load"),b=g("wrapFunction")(function(){b=m,"onerror"in n&&n.onerror(f)},"entry","XMLHttpRequest:error");f.onload=function(){l()};f.onerror=function(){b()};f.onreadystatechange=function(){f.readyState==4&&(f.status==200?l():b())};return n}var b="for (;;);",m=b.length;function n(a){a.substring(0,m)==b&&(a=a.substring(m));return a}function c(c,d,m,j,k){k===void 0&&(k={withCredentials:!1});if(e(c,"includes",!0,"/../")||e(c,"includes",!0,"/..\\")||e(c,"includes",!0,"\\../")||e(c,"includes",!0,"\\..\\")){h("Log").error("CORSRequest.execute(): path traversal is not allowed.");return!1}try{if(a.document){var b=h("sdk.Cookie").getRaw("cppo");b&&(c=g("QueryString").appendToUrl(c,g("QueryString").encode({__cppo:b})))}}catch(a){}m.suppress_http_code=1;b=g("QueryString").encode(m);d!="post"&&(c=g("QueryString").appendToUrl(c,b),b="");m=l(d,c,k);if(!m)return!1;m.onload=function(a){j(g("sdk.safelyParseResponse")(n(a.responseText),c,a.status))};m.onerror=function(a){a.responseText?j(g("sdk.safelyParseResponse")(n(a.responseText),c,a.status)):j({error:f["extends"]({},h("RequestConstants").PARSE_ERROR_TEMPLATE,{status:a.status})})};m.send(b);return!0}d={execute:c};i=d;k["default"]=i},98);c.__d("ApiClient",["ApiBatcher","ApiClientUtils","Assert","CORSRequest","Log","ObservableMixin","QueryString","UrlMap","flattenObject"],function(b,c,d,g,h,i,j){var k,a,l,m=[],n=!1,o=2e3,p={fql_query:!0,fql_multiquery:!0,friends_get:!0,notifications_get:!0,stream_get:!0,users_getinfo:!0},q=["cors"],r=0,s=[],t=0,u=0,v,w=g("Log");function x(b,c,e,w){var y=t!==0&&r>=t;if(y){s.push(function(){return x(b,c,e,w)});A.inform("request.queued",b,c,e);return}r++;var z=f["extends"]({},l,e);z.pretty=z.pretty||0;z=d("flattenObject")(z);y={cors:d("CORSRequest")};var a={},B=z.access_token||k;B&&(a.access_token=B);c!=="get"&&m.forEach(function(b){a[b]=z[b]});B=Object.keys(a);B.length>0&&(b=d("QueryString").appendToUrl(b,a),delete z.access_token);B=q;for(var p=0;p<B.length;p++){var u=y[B[p]],v=f["extends"]({},z);if(u.execute(b,c,v,w,{withCredentials:n}))return}w({error:{type:"no-transport",message:"Could not find a usable transport for request"}})}function y(a,b,c,d,e,f,l,m){if(d.transport&&d.transport==="chunked"&&m===!1){a(l,!1);return}l&&l.error&&A.inform("request.error",b,c,d,l,Date.now()-e,f);A.inform("request.complete",b,c,d,l,Date.now()-e,f);r--;a&&a(l);m=s.length>0&&r<t;m&&(b=s.shift(),b())}function z(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var f=g("ApiClientUtils").parseCallDataFromArgs(c),n=f.uri,o=f.callback,p=f.params,a=p.method;B(n,a)&&(a="post");var q=n.getProtocol()&&n.getDomain()?n.setQueryData({}).toString():g("UrlMap").resolve("graph_domain")+n.getPath(),r=u++;"_fb_domain"in p&&A.setKeptQueryParams(["_fb_domain"]);A.inform("request.prepare",q,p,r);x(q,a=="get"?"get":"post",p,e(y,"bind",!0,null,o,n.getPath(),a,p,Date.now(),r))}function b(){var b;v||(v=new(d("ApiBatcher"))(z,a));(b=v).scheduleBatchCall.apply(b,arguments)}function c(b,c){d("Assert").isObject(b);d("Assert").isString(b.method,"method missing");c||w.warn("No callback passed to the ApiClient");var f=b.method.toLowerCase().replace(".","_");b.format="json-strings";b.api_key=a;f=f in p?"api_read":"api";f=g("UrlMap").resolve(f)+"/restserver.php";var j=u++;c=e(y,"bind",!0,null,c,"/restserver.php","get",b,Date.now(),j);x(f,"get",b,c)}function h(a){return d("ApiBatcher").prepareBatchParams(a,m)}var A=e("Object","assign",!1,new(d("ObservableMixin"))(),{setAccessToken:function(a){k&&a&&k!==a&&w.error("You are overriding current access token, that means some other app is expecting different access token and you will probably break things. Please consider passing access_token directly to API parameters instead of overriding the global settings."),k=a},setAccessTokenForClientID:function(b,c){k&&a&&a!==c?w.error("Not overriding access token since it was not initialized by your application."):k=b},setWithCredentials:function(a){n=a},getWithCredentials:function(){return n},getClientID:function(){return a},getAccessToken:function(){return k},setClientID:function(b){a&&a!==b&&w.warn("Warning: Two different applications have attempted to set the client ID. Overriding the previously set client ID."),a=b},setDefaultParams:function(a){l=a},getDefaultParams:function(){return l},setDefaultTransports:function(a){q=a},setLogger:function(a){w=a},setMaxConcurrentRequests:function(a){t=a},setKeptQueryParams:function(a){m=a},getCurrentlyExecutingRequestCount:function(){return r},getQueuedRequestCount:function(){return s.length},rest:c,graph:z,scheduleBatchCall:b,prepareBatchParams:h});function B(a,b){return a.toString().length>o&&b==="get"}i=A;j["default"]=i},98);c.__d("FBEventsParamList",[],function(b,c,d,f,g,h){"use strict";var i="deep",j="shallow";b=function(){function b(){this.list=[]}var c=b.prototype;c.append=function(a,b){this.$1(encodeURIComponent(a),b,i)};c.each=function(a){var b=this.list;for(var c=0,d=b.length;c<d;c++)a(b[c][0],b[c][1])};c.toQueryString=function(){var a=[];this.each(function(b,c){a.push(b+"="+encodeURIComponent(c))});return a.join("&")};c.$1=function(b,c,d){Object(c)!==c?this.$2(b,c):d===i?this.$3(b,c):this.$2(b,a(c))};c.$2=function(a,b){b!=null&&this.list.push([a,b])};c.$3=function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)){var d=a+"["+encodeURIComponent(c)+"]";this.$1(d,b[c],j)}};return b}();function a(a){if(typeof JSON==="undefined"||JSON===null||!e("JSON","stringify",!1))return Object.prototype.toString.call(a);else return e("JSON","stringify",!1,a)}h["default"]=b},66);c.__d("FBEventsUtils",[],function(a,b,c,d,e,f){"use strict";var g=!("addEventListener"in document);function a(a,b,c){var d=g?"on"+b:b;b=function b(){g?a.detachEvent&&a.detachEvent(d,b):a.removeEventListener(d,b,!1),c()};g?a.attachEvent&&a.attachEvent(d,b):a.addEventListener(d,b,!1)}f.listenOnce=a},66);c.__d("FBPixelEndpoint",["invariant","FBEventsParamList","FBEventsUtils"],function(b,c,d,e,f,g,h,i){"use strict";var a="https://www.facebook.com/tr/",j=location.href,k=window.top!==window,l=document.referrer;function m(a,b,c,e){e===void 0&&(e={});var f=new(d("FBEventsParamList"))();f.append("id",a);f.append("ev",b);f.append("dl",j);f.append("rl",l);f.append("if",k);f.append("ts",new Date().valueOf());f.append("cd",c);f.append("sw",window.screen.width);f.append("sh",window.screen.height);for(a in e)f.append(a,e[a]);return f}function b(b,c,d,e){b=m(b,c,d,e),c=b.toQueryString(),2048>(a+"?"+c).length?n(a,c):o(a,b)}function n(a,b){var c=new Image();c.src=a+"?"+b}function o(a,b){var c="fb"+Math.random().toString().replace(".",""),d=document.createElement("form");d.method="post";d.action=a;d.target=c;d.acceptCharset="utf-8";d.style.display="none";a=!!(window.attachEvent&&!window.addEventListener);a=a?'<iframe name="'+c+'">':"iframe";var f=document.createElement(a);f instanceof HTMLIFrameElement||i(0,20659);f.src="javascript:false";f.id=c;f.name=c;d.appendChild(f);e("FBEventsUtils").listenOnce(f,"load",function(){b.each(function(a,b){var c=document.createElement("input");c.name=a;c.value=b;d.appendChild(c)}),e("FBEventsUtils").listenOnce(f,"load",function(){var a;(a=d.parentNode)==null?void 0:a.removeChild(d)}),d.submit()});(a=document.body)==null?void 0:a.appendChild(d)}h.sendEvent=b},98);c.__d("FBAppEvents",["ApiClient","FBPixelEndpoint"],function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){var g={};e!=null&&(g.vts=e.toString());f!=null&&(g.at=f);d("FBPixelEndpoint").sendEvent(a.toString(),b,c,g)}function b(a,b,d,e){b="/"+b+"/user_properties",a={data:[{user_unique_id:a,custom_data:d}]},c("ApiClient").graph(b,"post",a,e)}g.logEvent=a;g.updateUserProperties=b},98);c.__d("Miny",[],function(a,b,c,d,e,f){var g="Miny1",h="wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split("");a={encode:function(a){if(/^$|[~\\]|__proto__/.test(a))return a;a=(a=a.match(/\w+|\W+/g))!=null?a:[];var b,c=Object.create(null);for(b=0;b<a.length;b++)c[a[b]]=(c[a[b]]||0)+1;var d=Object.keys(c);d.sort(function(a,b){return parseInt(c[b],10)-parseInt(c[a],10)});for(b=0;b<d.length;b++){var e=(b-b%32)/32;c[d[b]]=e?e.toString(32)+h[b%32]:h[b%32]}e="";for(b=0;b<a.length;b++)e+=c[a[b]];d.unshift(g,d.length);d.push(e);return d.join("~")}};b=a;f["default"]=b},66);c.__d("getBlankIframeSrc",["sdk.UA"],function(a,b,c,d,e,f,g){function a(){return c("sdk.UA").ie()<10?"javascript:false":"about:blank"}g["default"]=a},98);c.__d("insertIframe",["GlobalCallback","getBlankIframeSrc","guid"],function(a,b,c,d,e,f,g){function a(b){var e=b.id!=null?b.id:c("guid")(),f=b.name!=null?b.name:c("guid")(),h=!1,g=!1,i=function(){h&&!g&&(g=!0,typeof b.onload==="function"&&b.onload(b.root.firstChild))},a=d("GlobalCallback").create(i);if(document.attachEvent){var j='<iframe id="'+e+'" name="'+f+'"'+(b.title!=null?' title="'+b.title+'"':"")+(b.className!=null?' class="'+b.className+'"':"")+' style="border:none;'+(b.width!=null?"width:"+b.width+"px;":"")+(b.height!=null?"height:"+b.height+"px;":"")+'" src="'+c("getBlankIframeSrc")()+'" frameborder="0" scrolling="no" allowtransparency="true" onload="'+a+'()"></iframe>';b.root.innerHTML='<iframe src="'+c("getBlankIframeSrc")()+'" frameborder="0" scrolling="no" style="height:1px"></iframe>';h=!0;window.setTimeout(function(){b.root.innerHTML=j,b.root.firstChild.src=b.url,typeof b.onInsert==="function"&&b.onInsert(b.root.firstChild)},0)}else a=document.createElement("iframe"),a.id=e,a.name=f,a.onload=i,a.scrolling="no",a.style.border="none",a.style.overflow="hidden",b.title!=null&&(a.title=b.title),b.className!=null&&(a.className=b.className),b.height!==void 0&&(a.style.height=b.height+"px"),b.width!==void 0&&(b.width==="100%"?a.style.width=b.width:a.style.width=b.width+"px"),b.root.appendChild(a),h=!0,a.src=b.url,b.onInsert&&b.onInsert(a)}g["default"]=a},98);c.__d("sdk.Impressions",["Miny","QueryString","UrlMap","getBlankIframeSrc","guid","insertIframe","sdk.Content","sdk.Runtime"],function(b,c,d,g,h,i,j){function k(b,c){c===void 0&&(c=!1);var e=d("sdk.Runtime").getClientID(),f=d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.CANVAS);e&&(typeof b.api_key!=="string"||b.api_key==="")&&(b.api_key=e);b.kid_directed_site=d("sdk.Runtime").getKidDirectedSite();e=g("UrlMap").resolve("www")+"/platform/impression.php/"+d("guid")()+"/";f&&(e=g("UrlMap").resolve("www")+"/platform/canvas_impression.php/"+d("guid")()+"/");var j=d("QueryString").appendToUrl(e,b);if(j.length>2e3&&b.payload&&typeof b.payload==="string"){var k=b.payload,m=d("Miny").encode(k);m&&m.length<k.length&&(b.payload=m,j=d("QueryString").appendToUrl(e,b))}window.fetch?a(e,j,b,c||f):l(e,j,b,c||f)}function a(a,b,c,d){d===void 0&&(d=!1);var e={mode:"no-cors",credentials:"include"};d||(e.credentials="omit");if(b.length<=2e3)window.fetch(b,e);else{d=new URLSearchParams();for(b in c)if(Object.prototype.hasOwnProperty.call(c,b)){var j=c[b];j!=null&&d.set(b,j)}j=f["extends"]({method:"POST",body:d},e);window.fetch(a,j)}}function l(a,b,c,e){e===void 0&&(e=!1);if(b.length<=2e3){var f=new Image();e||(f.crossOrigin="anonymous");f.src=b}else{if(!e)return;f=d("guid")();var l=g("sdk.Content").appendHidden(document.createElement("div"));d("insertIframe")({url:d("getBlankIframeSrc")(),root:l,name:f,className:"fb_hidden fb_invisible",onload:function(){l.parentNode!=null&&l.parentNode.removeChild(l)}});g("sdk.Content").submitToTarget({url:a,target:f,params:c})}}function b(a,b){(typeof b.source!=="string"||b.source==="")&&(b.source="jssdk"),k({lid:a,payload:e("JSON","stringify",!1,b)})}j.impression=k;j.log=b},98);c.__d("sdk.AppEvents",["AppUserPropertyAPIBuiltinField","Assert","FBAppEvents","sdk.Impressions","sdk.Model","sdk.Runtime"],function(b,c,d,g,h,i,j){var k=Object.freeze({COMPLETED_REGISTRATION:"fb_mobile_complete_registration",VIEWED_CONTENT:"fb_mobile_content_view",SEARCHED:"fb_mobile_search",RATED:"fb_mobile_rate",COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",ADDED_TO_CART:"fb_mobile_add_to_cart",ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",ACHIEVED_LEVEL:"fb_mobile_level_achieved",UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",PAGE_VIEW:"fb_page_view",SPENT_CREDITS:"fb_mobile_spent_credits"}),a=Object.freeze({ACTIVATED_APP:"fb_mobile_activate_app",PURCHASED:"fb_mobile_purchase"}),l=Object.freeze({APP_USER_ID:"_app_user_id",APP_VERSION:"_appVersion",CURRENCY:"fb_currency",REGISTRATION_METHOD:"fb_registration_method",CONTENT_TYPE:"fb_content_type",CONTENT_ID:"fb_content_id",SEARCH_STRING:"fb_search_string",SUCCESS:"fb_success",MAX_RATING_VALUE:"fb_max_rating_value",PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",NUM_ITEMS:"fb_num_items",LEVEL:"fb_level",DESCRIPTION:"fb_description"}),m=/^[0-9a-zA-Z_][0-9a-zA-Z _-]{0,39}$/,n=40,o=m,p=n,q=100,r=100,s=100,t=100,u=e("Object","values",!1,d("AppUserPropertyAPIBuiltinField")),v=new(d("sdk.Model"))({UserID:"",Version:""});function w(a,b,c){var e=F();H(a);var f=v.getUserID();f!==""&&(c=c||{},c[l.APP_USER_ID]=f);f=v.getVersion();f!==""&&(c=c||{},c[l.APP_VERSION]=f);d("sdk.Runtime").isCanvasEnvironment()?D(e,a,b,c):E(e,a,b,c)}function b(b,c,d){var e={};e[l.CURRENCY]=c;w(a.PURCHASED,b,f["extends"]({},d,e))}function c(){w(a.ACTIVATED_APP)}function h(){w(k.PAGE_VIEW)}function i(a){J(a),v.setUserID(a)}function x(){return v.getUserID()}function y(){v.setUserID("")}function z(a){I(a),v.setVersion(a)}function A(){return v.getVersion()}function B(){v.setVersion("")}function C(a,b){var c=F(),d=x();J(d);Object.keys(a).forEach(function(b){return a[b]==null&&delete a[b]});G(a);g("FBAppEvents").updateUserProperties(d,c,a,b)}function D(a,b,c,d){b={ae:1,ev:b,vts:c,canvas:1},d&&(b.cd=d),g("sdk.Impressions").impression({api_key:a,payload:e("JSON","stringify",!1,b)})}function E(a,b,c,e){var f=d("sdk.Runtime").getAccessToken();g("FBAppEvents").logEvent(a,b,e||{},c,f)}function F(){var a=d("sdk.Runtime").getClientID();d("Assert").isTrue(a!==null&&a.length>0,"You need to call FB.init() with App ID first.");return a}function G(a){d("Assert").isTrue(Object.keys(a).length<=s,"The total number of user properties cannot exceed "+s+".");for(var b in a)d("Assert").isTrue(o.test(b)||e(u,"includes",!0,b),"Invalid user properties key name: "+b+". It must be between 1 and "+p+" characters, and must contain only alphanumerics, _, - or spaces, starting with alphanumeric or _. Or, it must be a pre-defined user property"),d("Assert").isTrue(a[b].toString().length<=t,"Invalid user properties value: "+a[b]+". It must be no longer than "+t+" characters.")}function H(a){d("Assert").isTrue(m.test(a),"Invalid event name: "+a+". It must be between 1 and "+n+" characters, and must be contain only alphanumerics, _, - or spaces, starting with alphanumeric or _.")}function I(a){d("Assert").isTrue(a.length<=r,"Invalid app version: "+a+". It must be no longer than "+r+" characters.")}function J(a){d("Assert").isTrue(a.length!==0,"User ID must be set before updateUserProperties can be called."),d("Assert").isTrue(a.length<=q,"Invalid user ID: "+a+". It must be no longer than "+q+" characters.")}b=Object.freeze({logEvent:w,logPurchase:b,activateApp:c,logPageView:h,setUserID:i,getUserID:x,clearUserID:y,updateUserProperties:C,setAppVersion:z,getAppVersion:A,clearAppVersion:B,EventNames:k,ParameterNames:l});j.assertGetValidAppID=F;j.assertValidUserProperties=G;j.assertValidEventName=H;j.assertValidAppVersion=I;j.assertValidUserID=J;j.AppEvents=b},98);c.__d("sdk.Event",[],function(b,c,d,e,f,g){"use strict";var h="event.subscribe",i="event.unsubscribe",a;function j(){a||(a={});return a}function k(a,b){var c=j();c[a]?c[a].indexOf(b)==-1&&c[a].push(b):c[a]=[b];a!=h&&a!=i&&m(h,a,c[a])}function l(a,b){var c=j()[a];c&&c.forEach(function(a,d){a===b&&c.splice(d,1)});a!=h&&a!=i&&m(i,a,c)}function b(a,b){var c=arguments;if(!b()){var d=function d(){b.apply(b,c)&&l(a,d)};k(a,d)}}function c(a){delete j()[a]}function m(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=j()[a];e&&e.forEach(function(a){a&&a.apply(this,c)})}g.SUBSCRIBE=h;g.UNSUBSCRIBE=i;g.subscribers=j;g.subscribe=k;g.unsubscribe=l;g.monitor=b;g.clear=c;g.fire=m},66);c.__d("sdk.AppEvents-public",["Assert","FB","sdk.AppEvents","sdk.Event","sdk.Runtime"],function(a,b,c,d,e,f,g){function a(){d("sdk.Event").subscribe("init:post",function(a){c("sdk.Runtime").getClientID()&&(a.autoLogAppEvents!==void 0&&(c("Assert").isBoolean(a.autoLogAppEvents,"Type of property autoLogAppEvents must be boolean"),c("sdk.Runtime").setAutoLogAppEvents(a.autoLogAppEvents)),c("sdk.Runtime").getAutoLogAppEvents()&&d("sdk.AppEvents").AppEvents.logPageView())}),c("FB").provide("AppEvents",d("sdk.AppEvents").AppEvents)}b={init:a};e=b;g["default"]=e},98);c.__d("sdk.AuthState",["sdk.AuthUtils"],function(b,c,d,f,g,h,i){"use strict";var j=a();function a(){var a={igAuthResponse:null,fbAuthResponse:null,fbLoginStatus:null,igLoginStatus:null};return{currentAuthResponse:null,shouldSecondLoginRequestTimeOut:!1,mixedAuthState:a,loadState:null,timer:null,currentTimeOut:f("sdk.AuthUtils").AuthConstants.CONNECTED_REVALIDATE_PERIOD}}function b(){return e("Object","assign",!1,a(),j)}function c(b){j=e("Object","assign",!1,a(),j,b)}d={getState:b,setState:c};g=d;i["default"]=g},98);c.__d("sdk.Observable",[],function(a,b,c,d,e,f){a=function(){var a=this;this.getSubscribers=function(b){return a.$1[b]||(a.$1[b]=[])};this.clearSubscribers=function(b){b&&(a.$1[b]=[])};this.subscribe=function(b,c){b=a.getSubscribers(b),b.push(c)};this.unsubscribe=function(b,c){b=a.getSubscribers(b);for(var d=0;d<b.length;d++)if(b[d]===c){b.splice(d,1);break}};this.inform=function(b,c){b=a.getSubscribers(b);var e=function(){if(b[d]===null)return 1;try{b[d].call(a,c)}catch(a){window.setTimeout(function(){throw a},0)}};for(var d=0;d<b.length;d++)if(e())continue};this.$1={}},f.Observable=a},66);c.__d("sdk.AuthUtils",["sdk.AuthState","sdk.Cookie","sdk.Observable","sdk.Runtime"],function(b,c,d,e,f,g,h){"use strict";var i=365*24*60*60*1e3;function b(a){return a!=null&&a.graphDomain!=null?a.graphDomain==="instagram":!1}function c(a){d("sdk.Runtime").getUseCookie()&&e("sdk.Cookie").getDomain()==null&&e("sdk.Cookie").setDomain("."+a)}function f(){var a={fbAuthResponse:null,fbLoginStatus:null,igAuthResponse:null,igLoginStatus:null},b=!1;d("sdk.AuthState").setState({mixedAuthState:a,shouldSecondLoginRequestTimeOut:b})}function g(a){a!=null?(d("sdk.Runtime").setGraphDomain(a),a=="instagram"&&d("sdk.Runtime").setIsVersioned(!1)):d("sdk.Runtime").setGraphDomain("")}function a(){e("sdk.Cookie").setRaw(s.LOGOUT_COOKIE_PREFIX,"y",Date.now()+i,!1)}function j(a){a===void 0&&(a=s.CONNECTED_REVALIDATE_PERIOD);var b=d("sdk.AuthState").getState().timer;b&&window.clearTimeout(b);b=window.setTimeout(function(){r.inform(s.REVALIDATE_TIMER_TIMEOUT)},a);d("sdk.AuthState").setState({timer:b});d("sdk.AuthState").setState({currentTimeOut:a})}function k(){e("sdk.Cookie").setRaw(s.LOGOUT_COOKIE_PREFIX,"",0,!1),e("sdk.Cookie").setRaw(s.LOGOUT_COOKIE_PREFIX,"",0,!0)}var l=new(e("sdk.Observable").Observable)();function m(a,b){l.inform(a,b)}function n(a,b){l.subscribe(a,b)}function o(a){l.clearSubscribers(a)}function p(a,b){l.unsubscribe(a,b)}function q(a){return l.getSubscribers(a)}var r={inform:m,subscribe:n,clearSubscribers:o,unsubscribe:p,getSubscribers:q},s={LOCAL_STORAGE_TOKEN_PREFIX:"fblst_",IG_LOCAL_STORAGE_TOKEN_PREFIX:"iglst_",SESSION_STORAGE_LOGIN_STATUS_PREFIX:"fbssls_",CONNECTED_REVALIDATE_PERIOD:60*90*1e3,DEFAULT_REVALIDATE_PERIOD:60*60*24*1e3,LOGOUT_COOKIE_PREFIX:"fblo_",CORS_FETCH_COMPLETED_EVENT:"cors_fetch_completed",XFOA_FINAL_RESPONSE_EVENT:"xfoa_final_response",LOAD_XFOA_SUBSCRIBERS:"load_xfoa_subscribers",REVALIDATE_TIMER_TIMEOUT:"revalidate_timer_timeout"};h.isInstagramLogin=b;h.setBaseDomain=c;h.resetFBAndIGLoginStatus=f;h.setGraphDomain=g;h.setLogoutState=a;h.setRevalidateTimer=j;h.removeLogoutState=k;h.AuthInternalEvent=r;h.AuthConstants=s},98);c.__d("sdk.WebStorage",["Log"],function(a,b,c,d,e,f,g){"use strict";function a(){try{return window.localStorage}catch(a){d("Log").warn("Failed to get local storage")}return null}function b(){try{var a=window.localStorage;if(a){var b="__test__"+Date.now();a.setItem(b,"");a.removeItem(b)}return a}catch(a){d("Log").warn("Failed to get local storage")}return null}function c(){try{return window.sessionStorage}catch(a){d("Log").warn("Failed to get session storage")}return null}function e(){try{var a=window.sessionStorage;if(a){var b="__test__"+Date.now();a.setItem(b,"");a.removeItem(b)}return a}catch(a){d("Log").warn("Failed to get session storage")}return null}g.getLocalStorage=a;g.getLocalStorageForRead=b;g.getSessionStorage=c;g.getSessionStorageForRead=e},98);c.__d("sdk.AuthStorageUtils",["sdk.AuthUtils","sdk.Runtime","sdk.WebStorage","sdk.feature"],function(b,c,d,f,g,h,i){"use strict";function b(a,b){if(j()&&b!=null&&b!==""){var c=f("sdk.WebStorage").getLocalStorage();c&&(a=f("sdk.AuthUtils").isInstagramLogin(a)?f("sdk.AuthUtils").AuthConstants.IG_LOCAL_STORAGE_TOKEN_PREFIX:f("sdk.AuthUtils").AuthConstants.LOCAL_STORAGE_TOKEN_PREFIX,c.setItem(a+d("sdk.Runtime").getClientID(),b))}}function c(a){var b=f("sdk.WebStorage").getLocalStorage();b&&(a==="instagram"?b.removeItem(f("sdk.AuthUtils").AuthConstants.IG_LOCAL_STORAGE_TOKEN_PREFIX+d("sdk.Runtime").getClientID()):b.removeItem(f("sdk.AuthUtils").AuthConstants.LOCAL_STORAGE_TOKEN_PREFIX+d("sdk.Runtime").getClientID()))}function g(a,b){if(!j())return;var c=f("sdk.WebStorage").getSessionStorage();c&&c.setItem(f("sdk.AuthUtils").AuthConstants.SESSION_STORAGE_LOGIN_STATUS_PREFIX+d("sdk.Runtime").getClientID(),e("JSON","stringify",!1,{authResponse:a,status:b,expiresAt:a!=null&&a.expiresIn&&a.expiresIn!==0?Date.now()+Math.min(a.expiresIn*.75*1e3,f("sdk.AuthUtils").AuthConstants.CONNECTED_REVALIDATE_PERIOD):Date.now()+f("sdk.AuthUtils").AuthConstants.DEFAULT_REVALIDATE_PERIOD}))}function j(){return d("sdk.feature")("cache_auth_response",!1)&&d("sdk.Runtime").getUseLocalStorage()&&location.protocol==="https:"}function h(){var a=null,b=null;if(d("sdk.Runtime").getUseLocalStorage()){var c=f("sdk.WebStorage").getLocalStorageForRead();c&&(a=c.getItem(f("sdk.AuthUtils").AuthConstants.LOCAL_STORAGE_TOKEN_PREFIX+d("sdk.Runtime").getClientID()),b=c.getItem(f("sdk.AuthUtils").AuthConstants.IG_LOCAL_STORAGE_TOKEN_PREFIX+d("sdk.Runtime").getClientID()))}return{fbToken:a,igToken:b}}function a(){if(!j())return null;var a=f("sdk.WebStorage").getSessionStorageForRead();if(a){a=a.getItem(f("sdk.AuthUtils").AuthConstants.SESSION_STORAGE_LOGIN_STATUS_PREFIX+d("sdk.Runtime").getClientID());if(a!=null)try{a=e("JSON","parse",!1,a);if(a!=null&&a.expiresAt!=null&&a.expiresAt>Date.now())return a}catch(a){return null}}return null}i.setLocalStorageToken=b;i.removeLocalStorageToken=c;i.setSessionStorage=g;i.getLocalStorageTokens=h;i.getCachedResponse=a},98);c.__d("Base64",[],function(b,c,d,f,g,h){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function j(a){a=a.charCodeAt(0)<<16|a.charCodeAt(1)<<8|a.charCodeAt(2);return String.fromCharCode(i.charCodeAt(a>>>18),i.charCodeAt(a>>>12&63),i.charCodeAt(a>>>6&63),i.charCodeAt(a&63))}var a=">___?456789:;<=_______\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function k(b){b=a.charCodeAt(b.charCodeAt(0)-43)<<18|a.charCodeAt(b.charCodeAt(1)-43)<<12|a.charCodeAt(b.charCodeAt(2)-43)<<6|a.charCodeAt(b.charCodeAt(3)-43);return String.fromCharCode(b>>>16,b>>>8&255,b&255)}var l={encode:function(a){a=unescape(encodeURI(a));var b=(a.length+2)%3;a=(a+"\0\0".slice(b)).replace(/[\s\S]{3}/g,j);return a.slice(0,a.length+b-2)+"==".slice(b)},decode:function(a){a=a.replace(/[^A-Za-z0-9+\/]/g,"");var b=a.length+3&3;a=(a+"AAA".slice(b)).replace(/..../g,k);a=a.slice(0,a.length+b-3);try{return decodeURIComponent(escape(a))}catch(a){throw new Error("Not valid UTF-8")}},encodeObject:function(a){return l.encode(e("JSON","stringify",!1,a))},decodeObject:function(a){return e("JSON","parse",!1,l.decode(a))},encodeNums:function(a){return String.fromCharCode.apply(String,a.map(function(a){return i.charCodeAt((a|-(a>63?1:0))&-(a>0?1:0)&63)}))}};b=l;h["default"]=b},66);c.__d("sdk.SignedRequest",["Base64"],function(a,b,c,d,e,f,g){function a(a){if(a==null||a==="")return null;a=a.split(".",2)[1].replace(/\-/g,"+").replace(/\_/g,"/");return c("Base64").decodeObject(a)}g.parse=a},98);c.__d("sdk.getContextType",["sdk.Runtime","sdk.UA"],function(a,b,c,d,e,f,g){function a(){if(c("sdk.UA").nativeApp())return 3;return c("sdk.UA").mobile()?2:c("sdk.Runtime").isEnvironment(c("sdk.Runtime").ENVIRONMENTS.CANVAS)?5:1}g["default"]=a},98);c.__d("sdk.statusCORS",["Log","UrlMap","sdk.AuthState","sdk.AuthStorageUtils","sdk.AuthUtils","sdk.Impressions","sdk.Runtime","sdk.Scribe","sdk.URI","sdk.feature","sdk.getContextType"],function(b,c,d,f,g,h,i){"use strict";var j=6e4,a=114;function b(b,c,g,h){h===void 0&&(h="facebook");var i=n(c),m=Date.now();function q(){var c=new XMLHttpRequest();c&&(c.open("GET",i.toString(),!0),c.withCredentials=!0,c.onreadystatechange=function(){if(c.readyState===4){if(d("sdk.feature")("e2e_ping_tracking",!0)){var j={init:m,close:Date.now(),method:"cors"};f("Log").debug("e2e: %s",e("JSON","stringify",!1,j));f("sdk.Impressions").log(a,{payload:j})}c.status===200?k(b,(j=c.getResponseHeader("fb-s"))!=null?j:"unknown",(j=c.getResponseHeader("fb-ar"))!=null?j:"{}",h):l(b,c.status,g,h)}},c.send())}function r(){o(h)||window.setTimeout(function(){p(h==="facebook"?"instagram":"facebook"),d("sdk.AuthState").setState({shouldSecondLoginRequestTimeOut:!0})},j)}function s(){window.fetch(i.toString(),{referrer:"/",mode:"cors",credentials:"include"}).then(function(a){if(d("sdk.AuthState").getState().shouldSecondLoginRequestTimeOut){d("sdk.AuthState").setState({shouldSecondLoginRequestTimeOut:!1});return}r();if(a.status===200){var c;k(b,(c=a.headers.get("fb-s"))!=null?c:"unknown",(c=a.headers.get("fb-ar"))!=null?c:"{}",h)}else l(b,a.status,g,h)})["catch"](function(a){if(d("sdk.AuthState").getState().shouldSecondLoginRequestTimeOut){d("sdk.AuthState").setState({shouldSecondLoginRequestTimeOut:!1});return}r();l(b,0,g,h)})}typeof window.fetch==="function"?s():q()}function k(a,b,c,j){j===void 0&&(j="facebook");switch(b){case"connected":c=e("JSON","parse",!1,c);var k={accessToken:c.access_token,userID:c.user_id,expiresIn:Number(c.expires_in),signedRequest:c.signed_request,graphDomain:c.graph_domain};c.enforce_https!=null&&d("sdk.Runtime").setEnforceHttps(!0);c.data_access_expiration_time!=null&&(k.data_access_expiration_time=Number(c.data_access_expiration_time));c.base_domain!=null&&f("sdk.AuthUtils").setBaseDomain(c.base_domain);f("sdk.AuthUtils").setGraphDomain(c.graph_domain);f("sdk.AuthStorageUtils").setLocalStorageToken(k,c.long_lived_token);f("sdk.AuthUtils").removeLogoutState();c={authResponse:k,status:b,loginSource:j,cb:a};f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,c);break;case"not_authorized":case"unknown":default:k={authResponse:null,status:b,loginSource:j,cb:a},f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,k)}}function l(a,b,c,e){e===void 0&&(e="facebook"),b===0?(d("sdk.feature")("cors_status_fetch_cancel_tracking",!1)&&f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"CORS_STATUS_FETCH_CANCELLED",extra:{message:"Status 0 returned."}}),f("Log").error("Error retrieving login status, fetch cancelled.")):(f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"CORS_STATUS_FETCH",extra:{message:"HTTP Status Code "+b}}),f("Log").error("Error retrieving login status, HTTP status code: "+b)),b=m(),b&&b===e?(b={authResponse:c,status:d("sdk.Runtime").getLoginStatus(),loginSource:e,cb:a,shouldSetAuthResponse:!1},f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,b)):(c={authResponse:null,status:"unknown",loginSource:e,cb:a,shouldSetAuthResponse:!1},f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,c))}function m(){var a=d("sdk.AuthState").getState().currentAuthResponse;return a?f("sdk.AuthUtils").isInstagramLogin(a)?"instagram":"facebook":null}function n(a){a=new(d("sdk.URI"))(f("UrlMap").resolve("www").replace("web.","www.")+"/x/oauth/status").addQueryData("client_id",d("sdk.Runtime").getClientID()).addQueryData("input_token",a).addQueryData("redirect_uri",window.location.href).addQueryData("origin",d("sdk.getContextType")()).addQueryData("sdk","joey").addQueryData("wants_cookie_data",d("sdk.Runtime").getUseCookie());if(window.location.ancestorOrigins){var b=window.location.ancestorOrigins;if(b.length>0){var c="";for(var e=0;e<b.length;e++)c+=b[e],c+=",";a.addQueryData("ancestor_origins",c.slice(0,-1))}}return a}function o(a){var b=d("sdk.AuthState").getState().mixedAuthState;switch(a){case"facebook":return(b==null?void 0:b.fbLoginStatus)===null&&(b==null?void 0:b.igLoginStatus)!==null;case"instagram":return(b==null?void 0:b.igLoginStatus)===null&&(b==null?void 0:b.fbLoginStatus)!==null;default:return!1}}function p(a){var b=d("sdk.AuthState").getState().mixedAuthState;if((b==null?void 0:b.fbLoginStatus)!=null&&(b==null?void 0:b.igLoginStatus)!=null)return;b={authResponse:null,status:"unknown",loginSource:a};f("sdk.AuthUtils").AuthInternalEvent.inform("xFoAFetchCompleted",b)}c={getLoginStatusCORS:b};g=c;i["default"]=g},98);c.__d("sdk.Auth.LoginStatus",["Log","QueryString","sdk.Auth","sdk.AuthState","sdk.AuthStorageUtils","sdk.AuthUtils","sdk.Cookie","sdk.Runtime","sdk.Scribe","sdk.SignedRequest","sdk.feature","sdk.statusCORS"],function(b,c,d,f,g,h,i){"use strict";var j=/^https?:\/\/([\w\.]+)?\.facebook\.com\/?/;d("sdk.Runtime").subscribe("AccessToken.change",function(a){!a&&d("sdk.Runtime").getLoginStatus()==="connected"&&m(null,!0)});function b(a){a.legacyStatusInit?o.getLoginStatus(function(a){a!=null&&a.status==="connected"&&f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"legacy_status_init_success"})}):a.status&&o.getLoginStatus();if(d("sdk.Runtime").getClientID()&&d("sdk.Runtime").getUseCookie()){d("sdk.feature")("log_cookies_usage",!1)&&f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"jssdk_cookie_toggled_on"});a=f("sdk.Cookie").loadSignedRequest();var b;if(a){try{b=f("sdk.SignedRequest").parse(a)}catch(a){f("sdk.Cookie").clearSignedRequestCookie()}b!=null&&b.user_id!=null&&d("sdk.Runtime").setCookieUserID(b.user_id)}}}function a(a){window.location.protocol!=="https:"&&n(a);var b=d("sdk.AuthState").getState().timer;b&&(window.clearTimeout(b),d("sdk.AuthState").setState({timer:null}));f("sdk.AuthUtils").resetFBAndIGLoginStatus();b=f("sdk.Cookie").getRaw(f("sdk.AuthUtils").AuthConstants.LOGOUT_COOKIE_PREFIX)==="y";var c=l(a),i=c.access_token;c=c.redirect_cancelled;if(b||c){n(a);return}b=f("sdk.AuthStorageUtils").getLocalStorageTokens();c=b.fbToken;b=b.igToken;i!=null&&(e(i,"startsWith",!0,"IG")?b=i:c=i);d("sdk.Runtime").getShouldLoadFamilyLogin()&&d("sdk.feature")("should_enable_ig_login_status_fetch",!1)?d("sdk.Runtime").getFamilyLoginLoaded()?f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.LOAD_XFOA_SUBSCRIBERS):d("sdk.Runtime").subscribe("FamilyLoginLoaded.change",function(a){a&&f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.LOAD_XFOA_SUBSCRIBERS)}):f("sdk.AuthUtils").AuthInternalEvent.subscribe(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,d("sdk.Auth").setFinalAuthResponse);k(c,b,a)}function k(a,b,c){d("sdk.statusCORS").getLoginStatusCORS(c,a,d("sdk.AuthState").getState().currentAuthResponse,"facebook"),d("sdk.Runtime").getShouldLoadFamilyLogin()&&d("sdk.feature")("should_enable_ig_login_status_fetch",!1)&&(b!=null?d("sdk.statusCORS").getLoginStatusCORS(c,b,d("sdk.AuthState").getState().currentAuthResponse,"instagram"):(a={authResponse:null,status:"unknown",loginSource:"instagram",cb:c},f("sdk.AuthUtils").AuthInternalEvent.inform(f("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT,a)))}function l(b){var c=null,e=!1;if(d("sdk.Runtime").getLoginStatus()!=="connected"&&(document.referrer===""||j.test(document.referrer))){var l=location.hash.substr(1);if(l!==""){var m=d("QueryString").decode(l,!0);c=m.access_token;var a=m.signed_request;c!=null&&f("sdk.AuthUtils").removeLogoutState();if(window==top&&c!=null){var n=b;b=function(e){var b;e!=null&&e.status==="connected"&&((b=e.authResponse)==null?void 0:b.accessToken)===c&&(delete m.access_token,delete m.code,delete m.signed_request,location.hash=d("QueryString").encode(m),a!=null&&e.authResponse!=null&&(e.authResponse.signedRequest=a));n!=null&&n(e)}}}l=d("QueryString").decode(location.search);l.error==="access_denied"&&(e=!0)}return{access_token:c,redirect_cancelled:e}}function m(b,c){c===void 0&&(c=!1);var e=d("sdk.Runtime").getClientID();if(e==null||e===""){f("Log").warn("FB.getLoginStatus() called before calling FB.init().");n(b);return}if(!(typeof e==="number"||typeof e==="string")||e===0||typeof e==="string"&&(e==="0"||!/^\d+$/.test(e))){f("Log").warn("FB.getLoginStatus() not checked for an invalid client ID "+e);n(b);return}e=d("sdk.Runtime").getLoginStatus()!=="connected"&&j.test(document.referrer)&&location.hash.indexOf("cb=")>-1;if(!e&&!c){e=f("sdk.AuthStorageUtils").getCachedResponse();if(e!=null){var i;d("sdk.AuthState").setState({loadState:"loaded"});d("sdk.Auth").setAuthResponse(e.authResponse,(i=e.status)!=null?i:"unknown","facebook",!0);f("sdk.AuthUtils").setRevalidateTimer(e.status==="connected"?f("sdk.AuthUtils").AuthConstants.CONNECTED_REVALIDATE_PERIOD:f("sdk.AuthUtils").AuthConstants.DEFAULT_REVALIDATE_PERIOD)}}if(!c)if(d("sdk.AuthState").getState().loadState==="loaded"){b&&(i={authResponse:d("sdk.Auth").getAuthResponse(),status:d("sdk.Runtime").getLoginStatus()},b(i));return}else if(d("sdk.AuthState").getState().loadState==="loading"){b&&f("sdk.AuthUtils").AuthInternalEvent.subscribe("FB.loginStatus",b);return}b&&f("sdk.AuthUtils").AuthInternalEvent.subscribe("FB.loginStatus",b);d("sdk.AuthState").setState({loadState:"loading"});e=function(a){d("sdk.AuthState").setState({loadState:"loaded"}),f("sdk.AuthUtils").AuthInternalEvent.inform("FB.loginStatus",a),f("sdk.AuthUtils").AuthInternalEvent.clearSubscribers("FB.loginStatus")};a(e)}function n(a){var b="unknown";d("sdk.Auth").setAuthResponse(null,b,null);b={authResponse:null,status:b,loginSource:null};a&&a(b)}var o={getLoginStatus:m,fetchLoginStatus:a,onSDKInit:b};c=o;i["default"]=c},98);c.__d("sdk.LoggingUtils",["sdk.Impressions","sdk.feature"],function(b,c,d,e,g,h,i){"use strict";var j={buttonLoad:"client_login_button_load",buttonClick:"client_login_click",loginSuccess:"client_login_success",loginCancel:"client_login_cancel",popupHide:"client_login_popup_hide_xfoa",popupShow:"client_login_popup_show_xfoa",loginEnd:"client_login_end",loginStart:"client_login_start",loginCompleteHeartbeat:"client_login_complete_heartbeat",loginStatusPopupShowXfoa:"client_login_status_popup_show_xfoa",loginStatusPopupHideXfoa:"client_login_status_popup_hide_xfoa",loginStatusPopupClickXfoa:"client_login_status_popup_click_xfoa",loginStatusPopupErrorXfoa:"client_login_status_popup_error_xfoa"};function a(a,b,c){e("sdk.Impressions").log(117,{payload:f["extends"]({},c||{},{logger_id:a,action:b,client_funnel_version:d("sdk.feature")("oauth_funnel_logger_version",1)})})}function b(b,c){var d=b&&b.cbt!==void 0?Number(b.cbt):0;a(b==null?void 0:b.logger_id,c,{cbt_delta:Date.now()-d})}function c(b,c){c!==void 0&&a(b,c)}function g(b,c){b!==void 0&&a(c,j.loginStatusPopupErrorXfoa,{message:b})}i.logEventName=j;i.logEvent=a;i.logLoginEvent=b;i.logPopupEvent=c;i.logDisambiguationTrayEvent=g},98);c.__d("sdk.Auth",["Log","UrlMap","sdk.AuthState","sdk.AuthStorageUtils","sdk.AuthUtils","sdk.Cookie","sdk.Frictionless","sdk.LoggingUtils","sdk.Runtime","sdk.Scribe","sdk.SignedRequest","sdk.URI","sdk.ui"],function(b,c,d,g,h,i,j){c("sdk.Frictionless");var k=5*1e3;function b(a,b){b&&b.perms&&!b.scope&&(b.scope=b.perms,delete b.perms,g("Log").warn("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update."));var c=d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.CANVAS)||d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.PAGETAB);d("sdk.ui")(f["extends"]({method:"permissions.oauth",display:c?"async":"popup",domain:location.hostname},b||{}),a)}function a(a){switch(a){case"connected":return"connected";case"not_authorized":return"not_authorized";default:return"unknown"}}function h(b){(b==null?void 0:b.shouldSetAuthResponse)!==!1&&((b==null?void 0:b.status)==="connected"&&g("sdk.AuthUtils").setRevalidateTimer(),l(b==null?void 0:b.authResponse,a(b==null?void 0:b.status),b==null?void 0:b.loginSource));var c=b==null?void 0:b.cb;c!=null&&(b={authResponse:b==null?void 0:b.authResponse,status:a(b==null?void 0:b.status),loginSource:b==null?void 0:b.loginSource},c(b));g("sdk.AuthUtils").AuthInternalEvent.clearSubscribers(g("sdk.AuthUtils").AuthConstants.CORS_FETCH_COMPLETED_EVENT);g("sdk.AuthUtils").AuthInternalEvent.clearSubscribers(g("sdk.AuthUtils").AuthConstants.XFOA_FINAL_RESPONSE_EVENT)}function l(b,c,e,f){e===void 0&&(e="facebook");f===void 0&&(f=!1);var o=d("sdk.Runtime").getUserID(),p=d("sdk.Runtime").getLoginStatus(),a="";if(b!=null){d("sdk.AuthState").setState({loadState:"loaded"});if(b.userID!=null&&b.userID!=="")a=b.userID;else if(b.signedRequest!=null&&b.signedRequest!==""){var l=g("sdk.SignedRequest").parse(b.signedRequest);l!=null&&l!==""&&l.user_id!=null&&l.user_id!==""&&(a=l.user_id)}d("sdk.Runtime").getUseCookie()&&(l=b.expiresIn===0?0:Date.now()+b.expiresIn*1e3,g("sdk.Cookie").setSignedRequestCookie(b.signedRequest,l))}else d("sdk.Runtime").getUseCookie()&&g("sdk.Cookie").clearSignedRequestCookie(),d("sdk.Runtime").getUseLocalStorage()&&g("sdk.AuthStorageUtils").removeLocalStorageToken((l=e)!=null?l:"facebook");l=p==="unknown"&&b!=null||d("sdk.Runtime").getUseCookie()&&d("sdk.Runtime").getCookieUserID()!==a;var m=o!=null&&o!==""&&b==null;o=b!=null&&o!=null&&o!==""&&o!=a;var n=b!=d("sdk.AuthState").getState().currentAuthResponse;p=c!=p;d("sdk.Runtime").setLoginStatus(c);d("sdk.Runtime").setAccessToken(b&&b.accessToken||null);d("sdk.Runtime").setUserID(a);d("sdk.Runtime").setGraphDomain(b&&b.graphDomain||"");d("sdk.AuthState").setState({currentAuthResponse:b});a={authResponse:b,status:c,loginSource:e};(m||o)&&g("sdk.AuthUtils").AuthInternalEvent.inform("logout",a);(l||o)&&g("sdk.AuthUtils").AuthInternalEvent.inform("login",a);n&&g("sdk.AuthUtils").AuthInternalEvent.inform("authresponse.change",a);p&&g("sdk.AuthUtils").AuthInternalEvent.inform("status.change",a);f||g("sdk.AuthStorageUtils").setSessionStorage(b,c);return a}function m(){return d("sdk.AuthState").getState().currentAuthResponse}function i(a){var b=m(),c=g("sdk.AuthUtils").isInstagramLogin(b)?"instagram":"facebook";l(null,"unknown",c);g("sdk.AuthUtils").setLogoutState();if(b!=null&&b.accessToken!=null){c=new(d("sdk.URI"))(g("UrlMap").resolve("www").replace("web.","www.")+"/x/oauth/logout").addQueryData("access_token",b.accessToken);var e=new XMLHttpRequest(),f=!1;e&&(e.open("GET",c.toString(),!0),e.withCredentials=!0,a&&(e.onreadystatechange=function(){if(e.readyState>=2){if(f)return;a({authResponse:m(),status:d("sdk.Runtime").getLoginStatus()});f=!0}}),e.send())}g("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"PLATFORM_AUTH_LOGOUT",extra:{args:{fblo:!0}}})}function n(a,b,c,n){return function(c){if(c&&c.access_token){var i=g("sdk.SignedRequest").parse(c.signed_request);i=i!=null?i.user_id!=null?i.user_id:null:null;b={accessToken:c.access_token,userID:i,expiresIn:Number(c.expires_in),signedRequest:c.signed_request,graphDomain:c.graph_domain};c.asset_scopes&&(b=f["extends"]({},b,{asset_scopes:e("JSON","parse",!1,c.asset_scopes)}));b=p(b,c);g("sdk.AuthUtils").removeLogoutState();i="connected";l(b,i);o(n)}else if(c&&c.asset_scopes)b={asset_scopes:e("JSON","parse",!1,c.asset_scopes)},b=p(b,c),g("sdk.AuthUtils").removeLogoutState(),i="connected",l(b,i),o(n);else if(c&&(c.error||c.error_message||c.error_description||c.error_code||c.error_reason||c.result&&c.result.closeWindow)){g("sdk.AuthUtils").setLogoutState();i="unknown";l(null,i);var k=c.error_message||c.error_description;i={authResponse:m(),status:i,message:k};c.error==="access_denied"||c.result&&c.result.closeWindow?g("sdk.AuthUtils").AuthInternalEvent.inform("loginDenied",i):g("sdk.AuthUtils").AuthInternalEvent.inform("loginError",i)}else c&&c.result&&(g("sdk.AuthUtils").removeLogoutState(),b=c.result.authResponse);a&&(k={authResponse:b,status:d("sdk.Runtime").getLoginStatus()},a(k));return b}}function o(a){if(a&&a.tp&&a.tp!=="unspecified")return;g("sdk.LoggingUtils").logLoginEvent(a,g("sdk.LoggingUtils").logEventName.loginEnd);window.setTimeout(function(){g("sdk.LoggingUtils").logLoginEvent(a,g("sdk.LoggingUtils").logEventName.loginCompleteHeartbeat)},k)}function p(a,b){b.granted_scopes&&(a=f["extends"]({},a,{grantedScopes:b.granted_scopes}));b.data_access_expiration_time&&(a=f["extends"]({},a,{data_access_expiration_time:Number(b.data_access_expiration_time)}));b.base_domain!=null&&g("sdk.AuthUtils").setBaseDomain(b.base_domain);g("sdk.AuthUtils").setGraphDomain(b.graph_domain);b.enforce_https&&d("sdk.Runtime").setEnforceHttps(!0);b.referred&&(a=f["extends"]({},a,{referred:b.referred}));g("sdk.AuthStorageUtils").setLocalStorageToken(a,b.long_lived_token);return a}c={setFinalAuthResponse:h,login:b,logout:i,setAuthResponse:l,getAuthResponse:m,parseSignedRequest:g("sdk.SignedRequest").parse,xdResponseWrapper:n,subscribe:g("sdk.AuthUtils").AuthInternalEvent.subscribe,unsubscribe:g("sdk.AuthUtils").AuthInternalEvent.unsubscribe};h=c;j["default"]=h},98);c.__d("dedupString",[],function(a,b,c,d,e,f){"use strict";function a(a){var b;return Object.keys((b={},b[a]=0,b))[0]}f["default"]=a},66);c.__d("emptyFunction",[],function(a,b,c,d,e,f){function a(a){return function(){return a}}b=function(){};b.thatReturns=a;b.thatReturnsFalse=a(!1);b.thatReturnsTrue=a(!0);b.thatReturnsNull=a(null);b.thatReturnsThis=function(){return this};b.thatReturnsArgument=function(a){return a};c=b;f["default"]=c},66);c.__d("passiveEventListenerUtil",[],function(a,b,c,d,e,f){"use strict";b=!1;try{c=Object.defineProperty({},"passive",{get:function(){b=!0}}),window.addEventListener("test",null,c)}catch(a){}var g=b;function a(a){return g?a:typeof a==="boolean"?a:a.capture||!1}f.isPassiveEventListenerSupported=g;f.makeEventOptions=a},66);c.__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],function(b,c,d,e,f,g,h){var i=c("passiveEventListenerUtil").isPassiveEventListenerSupported,a,j;window.addEventListener?(a=function(a,b,d,e){e===void 0&&(e=!1),d.wrapper=c("wrapFunction")(d,"entry",c("dedupString")("DOMEventListener.add "+b)),a.addEventListener(b,d.wrapper,i?e:!1)},j=function(a,b,c,d){d===void 0&&(d=!1),a.removeEventListener(b,c.wrapper,i?d:!1)}):window.attachEvent?(a=function(a,b,d,e){e===void 0,d.wrapper=c("wrapFunction")(d,"entry","DOMEventListener.add "+b),a.attachEvent||h(0,2798),a.attachEvent("on"+b,d.wrapper)},j=function(a,b,c,d){d===void 0,a.detachEvent||h(0,2799),a.detachEvent("on"+b,c.wrapper)}):j=a=c("emptyFunction");b={add:function(b,c,d,e){e===void 0&&(e=!1);a(b,c,d,e);return{remove:function(){j(b,c,d,e)}}},remove:j};f.exports=b},null);c.__d("JSONRPC",["Log"],function(a,b,c,d,f,g){a=function(){"use strict";function a(a){var b=this;this.$1=0;this.$2={};this.remote=function(a){b.$3=a;return b.remote};this.local={};this.$4=a}var c=a.prototype;c.stub=function(a){var b=this;this.remote[a]=function(){var c={jsonrpc:"2.0",method:a};for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];typeof f[f.length-1]==="function"&&(c.id=++b.$1,b.$2[c.id]=f.pop());c.params=f;b.$4(e("JSON","stringify",!1,c),b.$3||{method:a})}};c.read=function(a,c){a=e("JSON","parse",!1,a);var d=a.id;if(!a.method){if(!this.$2[d]){b("Log").warn("Could not find callback %s",d);return}var f=this.$2[d];delete this.$2[d];delete a.id;delete a.jsonrpc;f(a);return}var g=this;f=this.local[a.method];var h;d?h=function(a,b){var f={jsonrpc:"2.0",id:d};f[a]=b;window.setTimeout(function(){g.$4(e("JSON","stringify",!1,f),c)},0)}:h=function(){};if(!f){b("Log").error('Method "%s" has not been defined',a.method);h("error",{code:-32601,message:"Method not found",data:a.method});return}a.params.push(e(h,"bind",!0,null,"result"));a.params.push(e(h,"bind",!0,null,"error"));try{f=f.apply(c||null,a.params),typeof f!=="undefined"&&h("result",f)}catch(c){b("Log").error("Invokation of RPC method %s resulted in the error: %s",a.method,c.message),h("error",{code:-32603,message:"Internal error",data:c.message})}};return a}(),f.exports=a},null);c.__d("Queue",[],function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){b?(b=this._queue).unshift.apply(b,a._queue):(b=this._queue).push.apply(b,a._queue);a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();f["default"]=a},66);c.__d("sdk.RPC",["Assert","JSONRPC","Queue"],function(b,c,d,f,g,h,i){var j=new(d("Queue"))(),a=new(d("JSONRPC"))(function(a){j.enqueue(a)});b={local:a.local,remote:a.remote,stub:e(a.stub,"bind",!0,a),setInQueue:function(b){d("Assert").isInstanceOf(d("Queue"),b),b.start(function(b){a.read(b)})},getOutQueue:function(){return j}};c=b;i["default"]=c},98);c.__d("sdk.Canvas.Environment",["sdk.RPC"],function(a,b,c,d,e,f,g){function a(a){c("sdk.RPC").remote.getPageInfo(function(b){a(b.result)})}function b(a,b){c("sdk.RPC").remote.scrollTo({x:a||0,y:b||0})}c("sdk.RPC").stub("getPageInfo");c("sdk.RPC").stub("scrollTo");d={getPageInfo:a,scrollTo:b};e=d;g["default"]=e},98);c.__d("sdk.DialogUtils",["DOMEventListener","sdk.Content","sdk.DOM","sdk.UA"],function(b,c,d,e,f,g,h){"use strict";var i=590,a=240,j=575;function b(){return window.innerWidth<window.innerHeight}function c(a,b,c){var d=null;return e("DOMEventListener").add(a,"click",function(){d!==null&&(window.clearTimeout(d),d=null,b()),d=window.setTimeout(function(){d=null},c)})}function f(a,b,c){var d,f,i=function(){d=window.setTimeout(b,c)};i();return e("DOMEventListener").add(a,"mouseenter",function(){window.clearTimeout(d),f||(f=e("DOMEventListener").add(a,"mouseleave",function(){i()}))})}function g(a){if(!d("sdk.UA").mobile())return null;var b="onorientationchange"in window?"orientationchange":"resize",c=function(b){return window.setTimeout(function(b){return a(b)},50)};return e("DOMEventListener").add(window,b,c)}function k(a){if(a==null)return;var b=e("sdk.DOM").getViewportInfo();a.style.minHeight=b.height?b.height+"px":"";a.style.top=b.scrollTop?b.scrollTop+"px":""}function l(b,c,f){var o,p,k,l=function(a){return typeof a==="number"?a:parseInt(a,10)},m=e("sdk.DOM").getViewportInfo(),n=l(b.offsetWidth);l=l(b.offsetHeight);o=(o=m.scrollLeft)!=null?o:0+((o=m.width)!=null?o:j-n)/2;n=((n=m.height)!=null?n:a-l)/2.5;o<n&&(n=o);p=(p=m.height)!=null?p:a-l-n;k=((k=m.height)!=null?k:a-l)/2;f&&(k=f.scrollTop-f.offsetTop+(f.clientHeight-l)/2);k<n?k=n:k>p&&(k=p);k+=(f=m.scrollTop)!=null?f:0;d("sdk.UA").mobile()&&(n=100,c?(n+=((p=m.height)!=null?p:i-l)/2,e("sdk.DOM").addCss(document.body,"fb_reposition")):(e("sdk.DOM").addCss(document.body,"fb_hidden"),document.body.style.width="auto",k=1e4),f=e("sdk.DOM").getByClass("fb_dialog_padding",b),f.length&&(f[0].style.height=n+"px"));b.style.left=(o>0?o:0)+"px";b.style.top=(k>0?k:0)+"px"}function m(a,b,c){l(a,b,c),b=e("sdk.DOM").getViewportInfo(),b=(c=b.scrollTop)!=null?c:0+((c=b.height)!=null?c:i-a.offsetHeight)*.05,e("sdk.DOM").setStyle(a,"top",b+"px")}function n(){var a=document.createElement("div");a.setAttribute("id","fb_dialog_ipad_overlay");k(a);return a}function o(a){a=a||{};var b=document.createElement("div"),c=a;c=c.onClose;if(a.closeIcon&&c){var f=document.createElement("a");f.className="fb_dialog_close_icon";e("DOMEventListener").add(f,"click",c);b.appendChild(f)}c="fb_dialog";c+=" "+(a.classes||"");c+=d("sdk.UA").mobile()?" fb_dialog_mobile":" fb_dialog_advanced";b.className=c;a.width&&(f=parseInt(a.width,10),isNaN(f)||(b.style.width=f+"px"));c=document.createElement("div");a.content&&e("sdk.Content").append(a.content,c);c.className="fb_dialog_content";b.appendChild(c);d("sdk.UA").mobile()&&(f=document.createElement("div"),f.className="fb_dialog_padding",b.appendChild(f));return{dialogElement:b,contentRoot:c}}function p(a){var b=document.body;a?e("sdk.DOM").removeCss(b,"fb_reposition"):e("sdk.DOM").removeCss(b,"fb_hidden")}h.isOrientationPotrait=b;h.addDoubleClickAction=c;h.addIdleDesktopAction=f;h.addMobileOrientationChangeAction=g;h.applyScreenDimensions=k;h.setDialogPositionToCenter=l;h.setDialogPositionToTop=m;h.setupNewDarkOverlay=n;h.setupNewDialog=o;h.onDialogHideCleanup=p},98);c.__d("sdk.fbt",[],function(a,b,c,d,e,f){a=function(){},a._=function(a){var b=typeof a==="string"?a:a[0];b==null&&typeof a==="object"&&a!==null&&!Array.isArray(a)&&"*"in a&&(b=a["*"]);return b},b=a,f["default"]=b},66);c.__d("sdk.Dialog",["DOMEventListener","ObservableMixin","Type","sdk.Canvas.Environment","sdk.Content","sdk.DOM","sdk.DialogUtils","sdk.Runtime","sdk.UA","sdk.fbt"],function(b,c,d,f,g,h,i){var j=30,a=590,k=500,l=240,m=575;function n(){var b=f("sdk.DOM").getViewportInfo(),c=b.height;b=b.width;return c!=null&&b!=null?{width:Math.min(b,k),height:Math.min(c,a)}:null}var o=d("Type").extend({constructor:function(a,b){this.parent(),this.id=a,this.display=b,this._e2e={},p._dialogs||(p._dialogs={},p._addOrientationHandler()),p._dialogs[a]=this,this.trackEvent("init")},trackEvent:function(a,b){if(this._e2e[a])return this;this._e2e[a]=b||Date.now();a=="close"&&this.inform("e2e:end",this._e2e);return this},trackEvents:function(a){typeof a==="string"&&(a=e("JSON","parse",!1,a));for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&this.trackEvent(b,a[b]);return this}},d("ObservableMixin")),p={newInstance:function(a,b){return new o(a,b)},_dialogs:null,_lastYOffset:0,_availScreenWidth:null,_overlayListeners:[],_loaderEl:null,_overlayEl:null,_stack:[],_active:null,get:function(a){return p._dialogs[a]},_findRoot:function(a){a=a;while(a){if(f("sdk.DOM").containsCss(a,"fb_dialog"))return a;a.parentElement instanceof HTMLElement&&(a=a.parentElement)}},_createWWWLoader:function(a){a=a?a:"460";var b=document.createElement("div");b.innerHTML='<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>';return p.create({content:b,width:a})},_createMobileLoader:function(){var a=document.createElement("div");d("sdk.UA").nativeApp()?a.innerHTML='<div class="dialog_header"></div>':p.isTabletStyle()?a.innerHTML='<div class="overlayLoader"><div id="fb_dialog_loader_spinner"></div><a id="fb_dialog_loader_close" href="#">'+d("sdk.fbt")._("Cancel")+"</a></div>":a.innerHTML='<div class="dialog_header"><table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+d("sdk.fbt")._("Cancel")+'"            id="fb_dialog_loader_close"/>        </label>      </td>      <td class="header_center">        <div>         '+d("sdk.fbt")._("Loading...")+'        </div>      </td>      <td class="header_right">      </td>    </tr>  </tbody></table></div>';return p.create({classes:"loading"+(p.isTabletStyle()?" centered":""),content:a})},_setDialogOverlayStyle:function(){p._overlayEl!=null&&f("sdk.DialogUtils").applyScreenDimensions(p._overlayEl)},_showTabletOverlay:function(a){if(!p.isTabletStyle())return;p._overlayEl==null?(a=f("sdk.DialogUtils").setupNewDarkOverlay(),a.className="",p._overlayEl=a,f("sdk.Content").append(p._overlayEl,null)):p._overlayEl.className=""},_hideTabletOverlay:function(){p.isTabletStyle()&&(p._overlayEl!=null&&(p._overlayEl.className="hidden"),p._overlayListeners.forEach(function(a){return a.remove()}),p._overlayListeners=[])},showLoader:function(a,b){a||(a=function(){});var c=function(){p._hideLoader(),f("sdk.DialogUtils").onDialogHideCleanup(p.isTabletStyle()),p._hideTabletOverlay(),a!=null&&a()};p._showTabletOverlay(c);p._loaderEl||(p._loaderEl=p._findRoot(d("sdk.UA").mobile()?p._createMobileLoader():p._createWWWLoader(b)));b=document.getElementById("fb_dialog_loader_close");b&&(f("sdk.DOM").removeCss(b,"fb_hidden"),b=f("DOMEventListener").add(b,"click",c),p._overlayListeners.push(b));p._loaderEl!=null&&p._makeActive(p._loaderEl)},_hideLoader:function(){p._loaderEl&&p._loaderEl==p._active&&(p._loaderEl.style.top="-10000px")},_makeActive:function(a){p._setDialogSizes(),p._lowerActive(),p._active=a,d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.CANVAS)&&d("sdk.Canvas.Environment").getPageInfo(function(a){p._centerActive(a)}),p._centerActive()},_lowerActive:function(){if(!p._active)return;p._active.style.top="-10000px";p._active=null},_removeStacked:function(a){p._stack=p._stack.filter(function(b){return b!=a})},_centerActive:function(a){var b=p._active;if(!b)return;f("sdk.DialogUtils").setDialogPositionToCenter(b,p.isTabletStyle(),a)},_setDialogSizes:function(a){a===void 0&&(a=!1);if(!d("sdk.UA").mobile())return;for(var b in p._dialogs)if(Object.prototype.hasOwnProperty.call(p._dialogs,b)){var c=document.getElementById(b);c&&(c.style.width=p.getDefaultSize().width+"px",a||(c.style.height=p.getDefaultSize().height+"px"))}},getDefaultSize:function(){if(d("sdk.UA").mobile()){var b=n();if(b){var c;((c=(c=f("sdk.DOM").getViewportInfo())==null?void 0:c.width)!=null?c:k<=b.width)&&(b.width=(c=(c=f("sdk.DOM").getViewportInfo())==null?void 0:c.width)!=null?c:k-j);((c=(c=f("sdk.DOM").getViewportInfo())==null?void 0:c.height)!=null?c:a<=b.height)&&(b.height=(c=(c=f("sdk.DOM").getViewportInfo())==null?void 0:c.height)!=null?c:a-j);return b}if(d("sdk.UA").ipad())return{width:k,height:a};if(d("sdk.UA").android())return{width:screen.availWidth,height:screen.availHeight};else{c=window.innerWidth;b=window.innerHeight;var e=c/b>1.2;return{width:c,height:Math.max(b,e?screen.width:screen.height)}}}return{width:m,height:l}},_handleOrientationChange:function(){var a;p._availScreenWidth=(a=(a=f("sdk.DOM").getViewportInfo())==null?void 0:a.width)!=null?a:k;if(p.isTabletStyle())p._setDialogSizes(!0),p._centerActive(),p._setDialogOverlayStyle();else{a=p.getDefaultSize().width;for(var b in p._dialogs)if(Object.prototype.hasOwnProperty.call(p._dialogs,b)){var c=document.getElementById(b);c&&(c.style.width=a+"px")}}},_addOrientationHandler:function(){var a;if(!d("sdk.UA").mobile())return;p._availScreenWidth=(a=(a=f("sdk.DOM").getViewportInfo())==null?void 0:a.width)!=null?a:k;f("sdk.DialogUtils").addMobileOrientationChangeAction(p._handleOrientationChange)},create:function(a){var b=f("sdk.DialogUtils").setupNewDialog(a);f("sdk.Content").append(b.dialogElement);a.visible&&p.show(b.dialogElement);typeof a.styles==="object"&&e("Object","assign",!1,b.dialogElement.style,a.styles);return b.contentRoot},show:function(a){var b=p._findRoot(a);b!=null&&(p._removeStacked(b),p._hideLoader(),p._makeActive(b),p._stack.push(b),"fbCallID"in a&&p.get(a.fbCallID).inform("iframe_show").trackEvent("show"))},hide:function(a){var b=p._findRoot(a);p._hideLoader();b==p._active&&(p._lowerActive(),f("sdk.DialogUtils").onDialogHideCleanup(p.isTabletStyle()),p._hideTabletOverlay(),"fbCallID"in a&&p.get(a.fbCallID).inform("iframe_hide").trackEvent("hide"))},remove:function(a){var b=p._findRoot(a);b&&(a=p._active==b,p._removeStacked(b),a?(p._hideLoader(),p._stack.length>0?p.show(p._stack.pop()):(p._lowerActive(),f("sdk.DialogUtils").onDialogHideCleanup(p.isTabletStyle()),p._hideTabletOverlay())):p._active===null&&p._stack.length>0&&p.show(p._stack.pop()),window.setTimeout(function(){var a;(a=b.parentNode)==null?void 0:a.removeChild(b)},3e3))},isActive:function(a){a=p._findRoot(a);return a!=null&&a===p._active},isTabletStyle:function(){if(!d("sdk.UA").mobile())return!1;var b=n();return b!=null&&(b.height>=a||b.width>=k)}};b=p;i["default"]=b},98);c.__d("sdk.PlatformVersioning",["ManagedError","sdk.Runtime"],function(a,b,c,d,e,f,g){var h=/^v\d+\.\d\d?$/;function a(){if(!c("sdk.Runtime").getVersion())throw new(c("ManagedError"))("init not called with valid version")}function b(a){if(!h.test(a))throw new(c("ManagedError"))("invalid version specified")}g.REGEX=h;g.assertVersionIsSet=a;g.assertValidVersion=b},98);c.__d("sdk.warnInsecure",["Log","sdk.Runtime","sdk.Scribe","sdk.feature"],function(b,c,d,e,f,g,h){"use strict";var i=d("sdk.feature")("https_only_learn_more",""),a={};function b(b){window.location.protocol!=="https:"&&(e("Log").log("error",-1,"The method FB.%s can no longer be called from http pages. %s",b,i),d("sdk.feature")("https_only_scribe_logging",!0)&&!Object.prototype.hasOwnProperty.call(a,b)&&(e("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"HttpsOnly",extra:{message:b}}),a[b]=!0));return!0}h["default"]=b},98);c.__d("sdk.api",["ApiClient","sdk.PlatformVersioning","sdk.Runtime","sdk.URI","sdk.warnInsecure"],function(a,b,c,d,e,f,g){function a(a){for(var b=arguments.length,e=new Array(b>1?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];c("sdk.warnInsecure")("api");if(typeof a==="string")if(c("sdk.Runtime").getIsVersioned()){d("sdk.PlatformVersioning").assertVersionIsSet();var g=a;!/https?/.test(g)&&g.charAt(0)!=="/"&&(g="/"+g);g=new(c("sdk.URI"))(g).setDomain("").setProtocol("").toString();d("sdk.PlatformVersioning").REGEX.test(g.substring(1,g.indexOf("/",1)))||(g="/"+c("sdk.Runtime").getVersion()+g);var h=[g].concat(Array.prototype.slice.call(arguments,1));c("ApiClient").graph.apply(c("ApiClient"),h)}else c("ApiClient").graph.apply(c("ApiClient"),arguments);else c("ApiClient").rest.apply(c("ApiClient"),arguments)}g["default"]=a},98);c.__d("sdk.Frictionless",["sdk.Auth.LoginStatus","sdk.Dialog","sdk.Event","sdk.api"],function(a,b,c,d,e,f,g){var h={_allowedRecipients:{},_useFrictionless:!1,_updateRecipients:function(){h._allowedRecipients={},c("sdk.api")("/me/apprequestformerrecipients",function(a){if(!a||(a==null?void 0:a.error))return;a.data.forEach(function(a){h._allowedRecipients[a.recipient_id]=!0})})},init:function(){h._useFrictionless=!0,c("sdk.Auth.LoginStatus").getLoginStatus(function(a){(a==null?void 0:a.status)=="connected"&&h._updateRecipients()}),d("sdk.Event").subscribe("auth.login",function(a){a.authResponse&&h._updateRecipients()})},_processRequestResponse:function(a,b){return function(d){var e=d&&d.updated_frictionless;h._useFrictionless&&e!==null&&h._updateRecipients();d&&(!b&&d.frictionless!==null&&c("sdk.Dialog")._hideLoader(),delete d.frictionless,delete d.updated_frictionless);a&&a(d)}},isAllowed:function(a){a=a;if(!a)return!1;if(typeof a==="number")return a in h._allowedRecipients;typeof a==="string"&&(a=a.split(","));a=a.map(function(a){return String(a).trim()});var b=!0,c=!1;a.forEach(function(a){b=b&&a in h._allowedRecipients,c=!0});return b&&c}};a=h;g["default"]=a},98);c.__d("resolveURI",[],function(a,b,c,d,e,f){function a(a){if(a==null||a==="")return window.location.href;var b=document.createElement("a");b.href=a;return b.href}f["default"]=a},66);c.__d("sdk.NativeExtensions",["DOMEventListener","Log","sdk.UA"],function(b,c,d,e,f,g,h){var i="fbNativeExtensionsReady";function a(){return window._FBSdkExtensions&&window._FBSdkExtensions.jsonRPC&&window._FBSdkExtensions.initializeCallbackHandler&&window._FBSdkExtensions.supportsDialog?window._FBSdkExtensions:null}function b(b){if(!d("sdk.UA").facebookInAppBrowser()){e("Log").error("FB.NativeExtensions.onReady only works when the page is rendered in a WebView of the native Facebook app.");return}var c=a();if(c){b(c);return}var f=!1;c=function c(){var d=a();if(f||!d)return;f=!0;b(d);e("DOMEventListener").remove(window,i,c)};e("DOMEventListener").add(window,i,c)}h.onReady=b},98);c.__d("sdk.Extensions",["JSONRPC","Queue","sdk.NativeExtensions","sdk.UA"],function(b,c,d,f,g,h,i){"use strict";var j=new(d("Queue"))(),a=new(d("JSONRPC"))(function(a){j.enqueue(a)}),k=new(d("Queue"))();k.start(function(b){a.read(b)});var l=null;d("sdk.UA").facebookInAppBrowser()&&f("sdk.NativeExtensions").onReady(function(a){l=a,window._FBBrowserCallbackHandler=function(a){k.enqueue(e("JSON","stringify",!1,a))},a.initializeCallbackHandler(e("JSON","stringify",!1,{name:"_FBBrowserCallbackHandler"})),j.start(function(b){a.jsonRPC(b)})});c=a.local;g=a.remote;h=e(a.stub,"bind",!0,a);function b(a){return!!l&&l.supportsDialog(a)}i.local=c;i.remote=g;i.stub=h;i.supportsDialog=b},98);c.__d("sdk.Native",["Log","sdk.UA"],function(a,b,c,d,f,g,h){var i="fbNativeReady";a={onready:function(a){if(!c("sdk.UA").nativeApp()){d("Log").error("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");return}window.__fbNative&&!this.nativeReady&&e("Object","assign",!1,this,window.__fbNative);if(this.nativeReady)a();else{var b=function b(){window.removeEventListener(i,b),this.onready(a)};window.addEventListener(i,b,!1)}}};b=a;h["default"]=b},98);c.__d("sdk.Popup",["sdk.Content","sdk.Runtime","sdk.Scribe","sdk.UA","sdk.feature"],function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=h({name:a.name,height:a.size.height,width:a.size.width,isOAuth:b}),f;a.post?(f=window.open("about:blank",a.id,e),f&&d("sdk.Content").submitToTarget({url:a.url,target:a.id,params:a.params})):f=window.open(a.url,a.id,e);!f&&c("sdk.feature")("popup_blocker_scribe_logging",!0)&&(e=b?"POPUP_MAYBE_BLOCKED_OAUTH":"POPUP_MAYBE_BLOCKED",d("sdk.Scribe").log("jssdk_error",{appId:c("sdk.Runtime").getClientID(),error:e,extra:{call:a.name}}));return f}function h(a){var b=window.screenX,d=window.screenY,e=window.outerWidth,f=window.outerHeight,g=c("sdk.UA").mobile()?0:a.width,h=c("sdk.UA").mobile()?0:a.height;b=b<0?window.screen.width+b:b;b=b+(e-g)/2;e=d+(f-h)/2.5;d=[];g!==null&&d.push("width="+g);h!==null&&d.push("height="+h);d.push("left="+b);d.push("top="+e);d.push("scrollbars=1");a.isOAuth&&(d.push("toolbar=0"),(!c("sdk.UA").chrome()||c("sdk.UA").chrome()<59)&&d.push("location=1"));return d.join(",")}g.popup=a},98);c.__d("isFacebookDotNetURI",[],function(a,b,c,d,e,f){"use strict";function a(a){if(a.getProtocol()!=="http"&&a.getProtocol()!=="https")return!1;var b=Number(a.getPort());return!!b&&b!==80&&b!==443?!1:a.isSubdomainOfDomain("facebook.net")?!0:!1}f["default"]=a},66);c.__d("isFacebookURI",[],function(a,b,c,d,e,f){var g=null,h=["http","https"];function a(a){g||(g=new RegExp("(^|\\.)facebook\\.com$","i"));return a.isEmpty()&&a.toString()!=="#"?!1:!a.getDomain()&&!a.getProtocol()?!0:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}a.setRegex=function(a){g=a};f["default"]=a},66);c.__d("isInstagramURI",[],function(a,b,c,d,e,f){var g=null;function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;if(!a.getDomain()&&!a.getProtocol())return!1;if(a.getProtocol()!=="https")return!1;g||(g=new RegExp("(^|\\.)instagram\\.com$","i"));return g.test(a.getDomain())}f["default"]=a},66);c.__d("resolveWindow",[],function(a,b,c,d,e,f){function a(a){if(a==null)return null;var b=window;a=a.split(".");try{for(var c=0;c<a.length;c++){var d=a[c],e=/^frames\[[\'\"]?([a-zA-Z0-9\-_]+)[\'\"]?\]$/.exec(d);if(e)b=b.frames[e[1]];else if(d==="opener"||d==="parent"||d==="top")b=b[d];else return null}}catch(a){return null}return b}f["default"]=a},66);c.__d("sdk.XD",["JSSDKXDConfig","Log","QueryString","Queue","UrlMap","guid","isFacebookDotNetURI","isFacebookURI","isInstagramURI","resolveWindow","sdk.Event","sdk.RPC","sdk.Runtime","sdk.Scribe","sdk.URI","sdk.feature"],function(b,c,d,f,g,h,i){var j=new(d("Queue"))(),a="parent",k=null,l=/^https:\/\/.*\.(facebook|instagram)\.(com|net)$/;b=f("JSSDKXDConfig").useCdn?"cdn":"www";var m=f("UrlMap").resolve(b)+f("JSSDKXDConfig").XXdUrl;c=function(){if("origin"in location)if(location.origin&&location.origin!="null")return location.origin;else if(window!==window.parent)try{var a=parent.location.origin;if(a&&a!="null")return a}catch(a){}return location.protocol+"//"+location.host};var n=d("guid")(),o=c(),p=!1,q=new(d("Queue"))();d("sdk.RPC").setInQueue(q);function r(a){f("Log").info("Remote XD can talk to facebook.com (%s)",a),d("sdk.Runtime").setEnvironment(a==="canvas"?d("sdk.Runtime").ENVIRONMENTS.CANVAS:d("sdk.Runtime").ENVIRONMENTS.PAGETAB)}function s(a,b){if(!b){f("Log").error("No senderOrigin");throw new Error()}switch(a.xd_action){case"plugin_ready":if(typeof a.name==="string"){var c=a.name;f("Log").info("Plugin %s ready from %s",c,b);if(l.test(b)){var e=d("Queue").get(c,{});e.start(function(a){if(a==null){f("Log").warn("Discarding null message from %s to %s on %s",b,c,o);return}window.frames[c]!=null?window.frames[c].postMessage({xdArbiterHandleMessage:!0,message:a,origin:o},b):f("Log").info("Message discarded for plugin at window.frames[%s] which may have been removed by a new XFBML.parse() call.",c)})}else{f("Log").error("Plugin attempted to register from non-Facebook domain %s",b);return}}else f("Log").error("plugin_ready message received without a name");break}a.data!=null&&(typeof a.data==="object"||typeof a.data==="string")&&t(a.data,b)}function t(a,b){var c=new(d("sdk.URI"))(b);if(b!=null&&b!=="native"&&!d("isFacebookURI")(c)&&!d("isFacebookDotNetURI")(c)&&!d("isInstagramURI")(c))return;if(typeof a==="string"){if(/^FB_RPC:/.test(a)){q.enqueue(a.substring(7));return}if(a.substring(0,1)=="{")try{a=e("JSON","parse",!1,a)}catch(b){f("Log").warn("Failed to decode %s as JSON",a);return}else a=d("QueryString").decode(a)}c=a;if(c.xd_action){s(c,b);return}typeof c.cb==="string"&&(a=x._callbacks[c.cb],x._forever[c.cb]||delete x._callbacks[c.cb],a&&a(c))}function u(b,c){b=="facebook"?(c.relation=a,j.enqueue(c),!d("sdk.Runtime").isCanvasEnvironment()&&!j.isStarted()&&w(k)):d("Queue").get(b,{}).enqueue(c)}d("sdk.RPC").getOutQueue().start(function(a){j.enqueue("FB_RPC:"+a)});function v(a){if(p)return;p=!0;window.addEventListener("message",function(a){var b=a.data,c=a.origin||"native";if(!/^(https?:\/\/|native$)/.test(c)){f("Log").debug("Received message from invalid origin type: %s",c);return}if(!l.test(c))return;if(typeof b==="string")t(b,c);else{if(a.source==parent&&a.data.xdArbiterRegisterAck&&l.test(c)){typeof a.data.xdArbiterRegisterAck==="string"&&a.data.xdArbiterRegisterAck!==""&&r(a.data.xdArbiterRegisterAck);j.isStarted()||j.start(function(a){if(a==null){f("Log").warn("Discarding null message from %s to %s",o,c);return}var b=parent;typeof a==="object"&&typeof a.relation==="string"&&(b=d("resolveWindow")(a.relation));((b=b)!=null?b:parent).postMessage({xdArbiterHandleMessage:!0,message:a,origin:o},c)});return}return}});d("sdk.Runtime").isCanvasEnvironment()&&w(a)}function w(b){var c;p||v();if(window.parent!=top){f("Log").warn("cannot deliver messages to facebook unless window.parent is top and facebook.com.");return}var e=(c=d("sdk.feature")("xd_timeout",6e4))!=null?c:6e4;c=200;var k=0,l=e/c,a=function(){return parent.postMessage({xdArbiterRegister:!0,xdProxyName:b,origin:o},"*")};k=window.setInterval(function(){if(!j.isStarted()&&l>0)l--,f("Log").debug("resending xdArbiterRegister"),a();else{window.clearInterval(k);if(l===0){f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"XD_FB_QUEUE_INITIALIZATION",extra:{message:"Failed to initialize in "+e+"ms"}});f("Log").error("xdAbiterRegisterAck not received");return}}},c)}var x={rpc:d("sdk.RPC"),_callbacks:{},_forever:{},_channel:n,_origin:o,onMessage:t,init:v,sendToFacebook:u,inform:function(a,b,c,d){u("facebook",{method:a,params:e("JSON","stringify",!1,b||{}),behavior:d||"p",relation:c})},handler:function(a,b,c,e){a="#"+d("QueryString").encode({cb:x.registerCallback(a,c,e),origin:o+"/"+n,domain:location.hostname,relation:b||"opener",is_canvas:d("sdk.Runtime").isCanvasEnvironment()});return m+a},registerCallback:function(a,b,c){c=c||d("guid")();b&&(x._forever[c]=!0);x._callbacks[c]=a;return c}};f("sdk.Event").subscribe("init:post",function(a){k=a.xdProxyName,v(a.xdProxyName)});h.exports=x},34);c.__d("sdk.modFeatureCheck",["JSSDKConfig"],function(a,b,c,d,e,f,g){function a(a,b,c){c===void 0&&(c=!1);if(d("JSSDKConfig").features&&a in d("JSSDKConfig").features){var e=d("JSSDKConfig").features[a];if(typeof e==="object"&&Array.isArray(e))return b.some(function(a){return e.some(function(b){return a%b===0})})}return c}g.forIDs=a},98);c.__d("sdk.openMessenger",["sdk.UA"],function(b,c,d,e,f,g,h){"use strict";var i="https://itunes.apple.com/us/app/messenger/id454638411",a="https://play.google.com/store/apps/details?id=com.facebook.orca",j=3e3;function b(b){var c,e,f=b.link;b=b.app_id;d("sdk.UA").android()?(c="intent://share/#Intent;package=com.facebook.orca;scheme=fb-messenger;S.android.intent.extra.TEXT="+encodeURIComponent(f)+";S.trigger=send_plugin;",b&&(c+="S.platform_app_id="+encodeURIComponent(b)+";"),c+="end",e=a):(c="fb-messenger://share?link="+encodeURIComponent(f),b&&(c+="&app_id="+encodeURIComponent(b)),e=i);setTimeout(function(){window.location.href=e},j);window.location.href=c}h["default"]=b},98);c.__d("sdk.UIServer",["Log","QueryString","UrlMap","createObjectFrom","flattenObject","guid","insertIframe","resolveURI","sdk.Auth","sdk.Auth.LoginStatus","sdk.Content","sdk.DOM","sdk.Dialog","sdk.Event","sdk.Extensions","sdk.Frictionless","sdk.LoggingUtils","sdk.Native","sdk.Popup","sdk.RPC","sdk.Runtime","sdk.UA","sdk.XD","sdk.api","sdk.fbt","sdk.feature","sdk.getContextType","sdk.modFeatureCheck","sdk.openMessenger"],function(b,c,d,g,h,i,j){var k={transform:function(a){if(a.params.display==="touch"&&r.canIframe(a.params)&&window.postMessage){a.params.channel=r._xdChannelHandler(a.id,"parent");d("sdk.UA").nativeApp()||(a.params.in_iframe=1);return a}else return r.genericTransform(a)},getXdRelation:function(a){var b=a.display;return b==="touch"&&window.postMessage&&a.in_iframe?"parent":r.getXdRelation(a)}};function a(a){return r.isOAuth(a)&&g("sdk.Extensions").supportsDialog("oauth")}function l(a){return r.isOAuth(a)&&(a.is_account_link===!0||a.is_account_link==="true")&&g("sdk.Extensions").supportsDialog("accountLink")}function m(a){if(!d("sdk.Runtime").getClientID()){g("Log").error("FB.login() called before FB.init().");return}if(d("sdk.Auth").getAuthResponse()&&!a.params.scope&&!a.params.asset_scope&&!a.params.auth_type){a.params.plugin_prepare||(g("Log").error("FB.login() called when user is already connected."),a.cb&&(a==null?void 0:a.cb({status:d("sdk.Runtime").getLoginStatus(),authResponse:d("sdk.Auth").getAuthResponse()})));return}var b=a.cb,c=a.id;delete a.cb;a&&a.params&&!a.params.logger_id&&(a.params.logger_id=d("guid")());a&&a.params&&!a.params.cbt&&(a.params.cbt=Date.now());(a.params.fx_app==="instagram"||a.params.fx_app==="ig_single")&&!a.params.scope&&(a.params.scope="public_profile");var f=a.params.auth_type;f=f&&e(f,"includes",!0,"reauthenticate");var k={token:!0,signed_request:!0,graph_domain:!0};k=Object.keys(e("Object","assign",!1,a.params.response_type?d("createObjectFrom")(a.params.response_type.split(",")):{},k)).join(",");a.params.display==="async"?(e("Object","assign",!1,a.params,{client_id:d("sdk.Runtime").getClientID(),origin:d("sdk.getContextType")(),response_type:k,domain:location.hostname}),a.cb=d("sdk.Auth").xdResponseWrapper(b,d("sdk.Auth").getAuthResponse(),"permissions.oauth",a.params)):(f&&r._xdNextHandler(function(a){b({authResponse:null,status:"not_authorized"})},c,a.params.plugin_prepare?"opener.parent":"opener",!0),e("Object","assign",!1,a.params,{client_id:d("sdk.Runtime").getClientID(),redirect_uri:d("resolveURI")(r.xdHandler(b,c,a.params.plugin_prepare?"opener.parent":"opener",d("sdk.Auth").getAuthResponse(),"permissions.oauth",!f,a.params)),origin:d("sdk.getContextType")(),response_type:k,domain:location.hostname}));c=a.params&&a.params.tp&&a.params.tp!=="unspecified";!a.params.plugin_prepare&&!c&&g("sdk.LoggingUtils").logEvent(a.params.logger_id,g("sdk.LoggingUtils").logEventName.loginStart,{cbt_delta:0});return a}b={"stream.share":{size:{width:670,height:340},url:"sharer.php",transform:function(a){a.params.u||(a.params.u=window.location.toString());a.params.display="popup";return a}},gaming_friendfinder:{url:"gaming/me/friendfinder/",transform:function(a){if(!d("sdk.Runtime").getClientID()){g("Log").error("FriendFinder called before FB.init().");return}a.url+=d("sdk.Runtime").getClientID();a.size={width:400,height:800};return a}},gaming_media_library:{url:"gaming/me/media_asset/",transform:function(a){a.url+=a.params.media_id;a.size={width:400,height:800};return a}},apprequests:{transform:function(a){a=k.transform(a);a.size={width:445,height:635};a.params.display="popup";a.params.in_iframe=!1;a.params.frictionless=d("sdk.Frictionless")&&d("sdk.Frictionless")._useFrictionless;a.params.frictionless&&(d("sdk.Frictionless").isAllowed(a.params.to)&&(a.hideLoader=!0),a.cb=d("sdk.Frictionless")._processRequestResponse(a.cb,a.hideLoader));a.closeIcon=!1;return a},getXdRelation:k.getXdRelation},"permissions.oauth":{url:"dialog/oauth",size:{width:d("sdk.UA").mobile()?null:600,height:d("sdk.UA").mobile()?null:679},transform:function(a){return m(a)}},"permissions.ig_oauth":{url:"oauth/authorize",size:{width:d("sdk.UA").mobile()?null:600,height:d("sdk.UA").mobile()?null:679},transform:function(a){return m(a)}},photo_picker:{url:"dialog/photo_picker",size:{width:d("sdk.UA").mobile()?null:600,height:d("sdk.UA").mobile()?null:679},transform:function(a){if(!d("sdk.Runtime").getClientID()){g("Log").error("Photo Picker was called before FB.init().");return}var b=a.cb,c=a.id;delete a.cb;e("Object","assign",!1,a.params,{client_id:d("sdk.Runtime").getClientID(),redirect_uri:d("resolveURI")(r.xdHandlerPhotoPicker(b,c,a.params.plugin_prepare?"opener.parent":"opener","photo_picker",a.params)),origin:d("sdk.getContextType")(),domain:location.hostname});return a}},"auth.logout":{transform:function(a){d("sdk.Runtime").getClientID()?d("sdk.Auth").getAuthResponse()?d("sdk.Auth").logout(a.cb):g("Log").error("FB.logout() called without an access token."):g("Log").error("FB.logout() called before calling FB.init().")}},"login.status":{transform:function(a){d("sdk.Auth.LoginStatus").getLoginStatus(a.cb)}},pay:{size:{width:555,height:120},connectDisplay:"popup"},live_broadcast:{transform:function(a){a.params.phase==="create"&&(a.size={width:480,height:280});a.params.phase==="publish"&&(a.size={width:772,height:540});return a},require_access_token:!0},boost:{transform:function(a){a.size={width:960,height:760};a.params.display="popup";return a}},share_referral:{size:{width:482,height:725}}};var n={},o=0;function p(a,b){n[b]=!0;return function(c){delete n[b],a(c)}}function q(a){var b=a.method.toLowerCase();return b==="pay"&&a.display==="async"?!0:!1}var r={Methods:b,_oauthMethodNameSet:new Set(["permissions.oauth","permissions.request","permissions.ig_oauth"]),_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',_popupInterval:null,genericTransform:function(a){(a.params.display=="dialog"||a.params.display=="iframe")&&e("Object","assign",!1,a.params,{display:"iframe",channel:r._xdChannelHandler(a.id,"parent.parent")},!0);return a},isOAuth:function(a){return r._oauthMethodNameSet.has(a.method)||a.method=="oauth"},checkOauthDisplay:function(a){var b=a.scope||a.perms||d("sdk.Runtime").getScope();return b?"popup":a.display},prepareCall:function(a,b){var c=a.method.toLowerCase(),l=Object.prototype.hasOwnProperty.call(r.Methods,c)?f["extends"]({},r.Methods[c]):{},m=a.id||d("guid")(),k=!0;e("Object","assign",!1,a,{app_id:d("sdk.Runtime").getClientID(),locale:d("sdk.Runtime").getLocale(),sdk:"joey",access_token:k&&d("sdk.Runtime").getAccessToken()||void 0});a.display=r.getDisplayMode(l,a);l.url||(l.url="dialog/"+c);(l.url=="dialog/oauth"||l.url=="dialog/permissions.request")&&(a.display=="iframe"||a.display=="touch"&&a.in_iframe)&&(a.display=r.checkOauthDisplay(a));if(l.url=="dialog/oauth"){if(o>=((k=d("sdk.feature")("max_oauth_dialog_retries",100))!=null?k:100)){g("Log").error("Your request to oauth has exceeded the rate limit, please try again later");return}o++}a.display=="popup"&&!l.require_access_token&&delete a.access_token;d("sdk.Runtime").getIsVersioned()&&l.url.substring(0,7)==="dialog/"&&(k=a.version||d("sdk.Runtime").getVersion(),k!=null&&k!==""&&k!=="null"&&(l.url=k+"/"+l.url));if(q(a)){if(n[c]){k='Dialog "'+c+'" is trying to run more than once.';g("Log").warn(k);b({error_code:-100,error_message:k});return}b=p(b,c)}k={cb:b,id:m,size:l.size||r.getDefaultSize(),url:g("UrlMap").resolve(a.fx_app==="instagram"||a.fx_app==="ig_single"?"www_instagram":a.display=="touch"?"m":"www")+"/"+l.url,params:a,name:c,dialog:d("sdk.Dialog").newInstance(m,a.display)};b=l.transform?l.transform:r.genericTransform;if(b){k=b(k);if(!k)return}a.display==="touch"&&a.in_iframe&&(k.params.parent_height=window.innerHeight);c=l.getXdRelation||r.getXdRelation;b=c(k.params);!(k.id in r._defaultCb)&&!("next"in k.params)&&!("redirect_uri"in k.params)&&(k.params.next=r._xdResult(k.cb,k.id,b,!0));(b==="parent"||b==="opener")&&e("Object","assign",!1,k.params,{channel_url:r._xdChannelHandler(m,b==="parent"?"parent.parent":"opener")},!0);k=r.prepareParams(k);return k},prepareParams:function(a){a.params.display!=="async"&&delete a.params.method;a.params.kid_directed_site=d("sdk.Runtime").getKidDirectedSite()||a.params.kid_directed_site;a.params=d("flattenObject")(a.params);var b=d("QueryString").encode(a.params);!d("sdk.UA").nativeApp()&&r.urlTooLongForIE(a.url+"?"+b)?a.post=!0:b&&(a.url+="?"+b);return a},urlTooLongForIE:function(a){return d("sdk.UA").ie()!=null&&d("sdk.UA").ie()<=8&&a.length>2048},getDisplayMode:function(b,c){if(c.display==="hidden"||c.display==="none"||c.display==="native")return c.display;var e=d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.CANVAS)||d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.PAGETAB);if(e&&(g("sdk.modFeatureCheck").forIDs("force_popup_to_canvas_apps_with_id",[d("sdk.Runtime").getClientID()])||d("sdk.feature")("force_popup_to_all_canvas_app",!1)))return"popup";if(e&&!c.display)return"async";if(a(c)||l(c))return"async";if(d("sdk.UA").mobile()||c.display==="touch")return"touch";if((c.display=="iframe"||c.display=="dialog")&&!r.canIframe(c)){g("Log").error('"dialog" mode can only be used when the user is connected.');return"popup"}return b.connectDisplay&&!e?b.connectDisplay:c.display||(r.canIframe(c)?"dialog":"popup")},canIframe:function(a){return d("sdk.Runtime").getAccessToken()},getXdRelation:function(a){a=a.display;if(a==="popup"||a==="touch")return"opener";return a==="dialog"||a==="iframe"||a==="hidden"||a==="none"?"parent":a==="async"?"parent.frames["+window.name+"]":""},popup:function(a){var b=g("sdk.Popup").popup(a,r.isOAuth({method:a.name}));b&&(r.setLoadedNode(a,b,"popup"),a.id in r._defaultCb&&r._popupMonitor())},setLoadedNode:function(a,b,c){c==="iframe"&&(b.fbCallID=a.id),b={node:b,type:c,fbCallID:a.id,method:a.name,params:a.params},r._loadedNodes[a.id]=b},getLoadedNode:function(a){a=typeof a==="object"?a.id:a;a=r._loadedNodes[a];return a?a.node:null},hidden:function(a){a.className="FB_UI_Hidden",a.root=g("sdk.Content").appendHidden(document.createElement("div")),r._insertIframe(a)},iframe:function(a){a.className="FB_UI_Dialog";var b=function(){var b=e("JSON","stringify",!1,{error_code:4201,error_message:d("sdk.fbt")._("User canceled the Dialog flow")});r._triggerDefault(a.id,b)},c={onClose:b,closeIcon:a.closeIcon===void 0?!0:a.closeIcon,classes:d("sdk.Dialog").isTabletStyle()?"centered":""};a.root=d("sdk.Dialog").create(c);a.hideLoader||d("sdk.Dialog").showLoader(b,a.size.width);g("sdk.DOM").addCss(a.root,"fb_dialog_iframe");r._insertIframe(a)},touch:function(a){a.params&&a.params.in_iframe?a.ui_created?d("sdk.Dialog").showLoader(function(){r._triggerDefault(a.id,null)},0):r.iframe(a):d("sdk.UA").nativeApp()&&!a.ui_created?(a.frame=a.id,d("sdk.Native").onready(function(){r.setLoadedNode(a,d("sdk.Native").open(a.url+"#cb="+a.frameName),"native")}),r._popupMonitor()):a.ui_created||r.popup(a)},async:function(b){b.params.redirect_uri=location.protocol+"//"+location.host+location.pathname;delete b.params.access_token;b.params.is_canvas=d("sdk.Runtime").isCanvasEnvironment();var c=function(c){c=c.result;if(c&&c.e2e){var a=d("sdk.Dialog").get(b.id);a.trackEvents(c.e2e);a.trackEvent("close");delete c.e2e}b.cb(c)};a(b.params)||l(b.params)?(b.params.method="oauth",b.params.redirect_uri=b.params.next,g("sdk.Extensions").remote.showDialog(b.params,c)):d("sdk.RPC").remote.showDialog(b.params,c)},"native":function(a){d("sdk.openMessenger")(a.params)},getDefaultSize:function(){return d("sdk.Dialog").getDefaultSize()},_insertIframe:function(a){r._loadedNodes[a.id]=!1;var b=function(b){a.id in r._loadedNodes&&r.setLoadedNode(a,b,"iframe")};a.post?d("insertIframe")({url:"about:blank",root:a.root,className:a.className,width:a.size.width,height:a.size.height,id:a.id,onInsert:b,onload:function(b){g("sdk.Content").submitToTarget({url:a.url,target:b.name,params:a.params})}}):d("insertIframe")({url:a.url,root:a.root,className:a.className,width:a.size.width,height:a.size.height,id:a.id,name:a.frameName,onInsert:b})},_handleResizeMessage:function(a,b){a=r.getLoadedNode(a);if(!a)return;b.height&&(a.style.height=b.height+"px");b.width&&b.width!=0&&(a.style.width=b.width+"px");d("sdk.XD").inform("resize.ack",b||{},"parent.frames["+a.name+"]");d("sdk.Dialog").isActive(a)?d("sdk.Dialog")._centerActive():d("sdk.Dialog").show(a)},_triggerDefault:function(a,b){var c={frame:a,result:""};b&&(c.result=b);r._xdRecv(c,r._defaultCb[a]||function(){})},_popupMonitor:function(){var a;for(var b in r._loadedNodes)if(Object.prototype.hasOwnProperty.call(r._loadedNodes,b)&&b in r._defaultCb){var c=function(){var c=r._loadedNodes[b];if(c.type!="popup"&&c.type!="native")return"continue";var e=c.node;try{e.closed?r.isOAuth(c)?d("sdk.Auth.LoginStatus").getLoginStatus(function(a){(a==null?void 0:a.status)==="connected"&&c.params!=null&&c.params.return_scopes?d("sdk.api")("/me/permissions",function(c){(!c||c.error)&&r._triggerDefault(b,a);var d="";c=c&&c.data?c.data:[];for(var e=0;e<c.length;e++)c[e].status==="granted"&&(d!==""&&(d+=","),d+=c[e].permission);a.authResponse&&a.authResponse.grantedScopes&&(a.authResponse.grantedScopes=d);r._triggerDefault(b,a)}):((a==null?void 0:a.status)!=="connected"&&(a.closeWindow=!0),r._triggerDefault(b,a))},!0):r._triggerDefault(b,null):a=!0}catch(a){}}();if(c==="continue")continue}a&&!r._popupInterval?r._popupInterval=window.setInterval(r._popupMonitor,100):!a&&r._popupInterval&&(window.clearInterval(r._popupInterval),r._popupInterval=null)},_xdChannelHandler:function(a,b){return d("sdk.XD").handler(function(b){var c=r.getLoadedNode(a);if(!c)return;b.type=="resize"?r._handleResizeMessage(a,b):b.type=="hide"?d("sdk.Dialog").hide(c):b.type=="rendered"?(c=d("sdk.Dialog")._findRoot(c),d("sdk.Dialog").show(c)):b.type=="fireevent"&&g("sdk.Event").fire(b.event,b)},b,!0,null)},_xdNextHandler:function(a,b,c,e){e&&(r._defaultCb[b]=a);return d("sdk.XD").handler(function(b){r._xdRecv(b,a)},c)+"&frame="+b},_xdRecv:function(a,b){var c=r.getLoadedNode(a.frame);if(c)if(c.close)try{c.close(),/iPhone.*Version\/(5|6)/.test(navigator.userAgent)&&RegExp.$1!=="5"&&window.focus(),r._popupCount--}catch(a){}else g("sdk.DOM").containsCss(c,"FB_UI_Hidden")?window.setTimeout(function(){c.parentNode.parentNode.removeChild(c.parentNode)},3e3):g("sdk.DOM").containsCss(c,"FB_UI_Dialog")&&d("sdk.Dialog").remove(c);delete r._loadedNodes[a.frame];delete r._defaultCb[a.frame];if(a.e2e){var e=d("sdk.Dialog").get(a.frame);e.trackEvents(a.e2e);e.trackEvent("close");delete a.e2e}b(a)},_xdResult:function(a,b,c,d){return r._xdNextHandler(function(b){a&&a(b.result&&b.result!=r._resultToken&&e("JSON","parse",!1,b.result))},b,c,d)+"&result="+encodeURIComponent(r._resultToken)},xdHandler:function(a,b,c,e,f,l,m){return r._xdNextHandler(d("sdk.Auth").xdResponseWrapper(a,e,f,m),b,c,l)},xdHandlerPhotoPicker:function(a,b,c,d,e){return r._xdNextHandler(r.xdResponseWrapperPhotoPicker(a),b,c,!1)},xdResponseWrapperPhotoPicker:function(a){return function(b){var c;b&&b.result&&b.result.closeWindow?c="Photo picker call was cancelled by the user":c=b.photos;a&&a(c);return null}}};g("sdk.Extensions").stub("showDialog");d("sdk.RPC").stub("showDialog");c=r;j["default"]=c},98);c.__d("sdk.ui",["Assert","Log","sdk.Impressions","sdk.PlatformVersioning","sdk.Runtime","sdk.UIServer","sdk.feature"],function(a,b,c,d,g,h,i){function a(a,b){c("Assert").isObject(a);c("Assert").maybeFunction(b);c("sdk.Runtime").getIsVersioned()&&(d("sdk.PlatformVersioning").assertVersionIsSet(),a.version?d("sdk.PlatformVersioning").assertValidVersion(a.version):a.version=c("sdk.Runtime").getVersion());a=f["extends"]({},a);if(!a.method){d("Log").error('"method" is a required parameter for FB.ui().');return null}a.method=="pay.prompt"&&(a.method="pay");var g=a.method;a.redirect_uri&&(d("Log").warn("When using FB.ui, you should not specify a redirect_uri."),delete a.redirect_uri);a.fallback_redirect_uri||(a.fallback_redirect_uri=document.location.href);c("sdk.UIServer").isOAuth(g)&&(a.display=="iframe"||a.display=="dialog")&&(a.display=c("sdk.UIServer").checkOauthDisplay(a));if(a.display==="native"&&g!=="send"){d("Log").error('display type "native" not supported');return null}var h=c("sdk.feature")("e2e_tracking",!0);h&&(a.e2e={});a=c("sdk.UIServer").prepareCall(a,b||function(){});if(!a)return null;var i=a.params.display;i==="dialog"?i="iframe":i==="none"&&(i="hidden");b=c("sdk.UIServer")[i];if(!b){d("Log").error('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"');return null}h&&a.dialog.subscribe("e2e:end",function(a){a.method=g,a.display=i,d("Log").debug("e2e: %s",e("JSON","stringify",!1,a)),d("sdk.Impressions").log(114,{payload:a})});b(a);return a.dialog}i["default"]=a},98);c.__d("sdk.Auth-public",["FB","sdk.Auth","sdk.Auth.LoginStatus","sdk.AuthUtils","sdk.Event","sdk.Runtime","sdk.ui","sdk.warnInsecure"],function(a,b,c,d,f,g,h){"use strict";function a(){c("FB").provide("",{getLoginStatus:function(){c("sdk.warnInsecure")("getLoginStatus");return c("sdk.Auth.LoginStatus").getLoginStatus.apply(c("sdk.Auth"),arguments)},getAuthResponse:function(){c("sdk.warnInsecure")("getAuthResponse");return c("sdk.Auth").getAuthResponse()},getAccessToken:function(){c("sdk.warnInsecure")("getAccessToken");return c("sdk.Runtime").getAccessToken()||null},getUserID:function(){c("sdk.warnInsecure")("getUserID");return c("sdk.Runtime").getUserID()||c("sdk.Runtime").getCookieUserID()},login:function(a,b){c("sdk.warnInsecure")("login"),c("sdk.Auth").login(a,b)},logout:function(a){c("sdk.ui")({method:"auth.logout",display:"hidden"},a)}}),c("sdk.Auth").subscribe("logout",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.logout")),c("sdk.Auth").subscribe("login",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.login")),c("sdk.Auth").subscribe("authresponse.change",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.authResponseChange")),c("sdk.Auth").subscribe("status.change",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.statusChange")),c("sdk.Auth").subscribe("loginDenied",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.denied")),c("sdk.Auth").subscribe("loginError",e(d("sdk.Event").fire,"bind",!0,d("sdk.Event"),"auth.error")),c("sdk.Runtime").subscribe("AccessToken.change",function(a){!a&&c("sdk.Runtime").getLoginStatus()==="connected"&&c("sdk.Auth.LoginStatus").getLoginStatus(null,!0)}),d("sdk.AuthUtils").AuthInternalEvent.subscribe(d("sdk.AuthUtils").AuthConstants.REVALIDATE_TIMER_TIMEOUT,function(a){c("sdk.Auth.LoginStatus").fetchLoginStatus(function(){})}),d("sdk.Event").subscribe("init:post",function(a){c("sdk.Auth.LoginStatus").onSDKInit(a)})}b={init:a};f=b;h["default"]=f},98);c.__d("sdk.Canvas.IframeHandling",["DOMWrapper","sdk.RPC"],function(b,c,d,e,f,g,h){var i=null,a;function j(){var a=e("DOMWrapper").getWindow().document,b=a.body;a=a.documentElement;var c=Math.max(b.offsetTop,0),d=Math.max(a.offsetTop,0),f=b.scrollHeight+c;b=b.offsetHeight+c;c=a.scrollHeight+d;a=a.offsetHeight+d;return Math.max(f,b,c,a)}function k(b){typeof b!=="object"&&(b={});var c=0,e=0;b.height||(b.height=j(),c=16,e=4);b.frame||(b.frame=window.name||"iframe_canvas");if(a){var f=a.height;f=b.height-f;if(f<=e&&f>=-c)return!1}a=b;d("sdk.RPC").remote.setSize(b);return!0}function b(a,b){b===void 0&&typeof a==="number"&&(b=a,a=!0),a||a===void 0?(i===null&&(i=window.setInterval(function(){k()},b||100)),k()):i!==null&&(window.clearInterval(i),i=null)}d("sdk.RPC").stub("setSize");c={setSize:k,setAutoGrow:b};f=c;h["default"]=f},98);c.__d("sdk.Canvas.Navigation",["sdk.RPC"],function(a,b,c,d,e,f){function a(a){b("sdk.RPC").local.navigate=function(b){a({path:b})},b("sdk.RPC").remote.setNavigationEnabled(!0)}b("sdk.RPC").stub("setNavigationEnabled");c={setUrlHandler:a};d=c;f["default"]=d},66);c.__d("sdk.Canvas.Plugin",["Log","sdk.Runtime","sdk.UA","sdk.api"],function(b,c,d,f,g,h,i){var j="CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",a="CLSID:444785F1-DE89-4295-863A-D46C3A781394",k=null;h=d("sdk.UA").osx()&&d("sdk.UA").osx.getVersionParts();var l=!(h&&h[0]>10&&h[1]>10&&(d("sdk.UA").chrome()>=31||d("sdk.UA").webkit()>=537.71||d("sdk.UA").firefox()>=25));function m(a){a._hideunity_savedstyle={},a._hideunity_savedstyle.left=a.style.left,a._hideunity_savedstyle.position=a.style.position,a._hideunity_savedstyle.width=a.style.width,a._hideunity_savedstyle.height=a.style.height,a.style.left="-10000px",a.style.position="absolute",a.style.width="1px",a.style.height="1px"}function n(a){a._hideunity_savedstyle&&(a.style.left=a._hideunity_savedstyle.left,a.style.position=a._hideunity_savedstyle.position,a.style.width=a._hideunity_savedstyle.width,a.style.height=a._hideunity_savedstyle.height)}function o(a){a._old_visibility=a.style.visibility,a.style.visibility="hidden"}function p(a){a.style.visibility=a._old_visibility||"",delete a._old_visibility}function q(a){var b=a.type?a.type.toLowerCase():null;b=b==="application/x-shockwave-flash"||a.classid&&a.classid.toUpperCase()==j;if(!b)return!1;b=/opaque|transparent/i;if(b.test(a.getAttribute("wmode")))return!1;for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(/param/i.test(d.nodeName)&&/wmode/i.test(d.name)&&b.test(d.value))return!1}return!0}function r(b){var c=b.type?b.type.toLowerCase():null;return c==="application/vnd.unity"||b.classid&&b.classid.toUpperCase()==a}function b(a){var b=e("Array","from",!1,window.document.getElementsByTagName("object"));b=b.concat(e("Array","from",!1,window.document.getElementsByTagName("embed")));var c=!1,h=!1;b.forEach(function(b){var d=q(b),e=l&&r(b);if(!d&&!e)return;c=c||d;h=h||e;e=function(){a.state==="opened"?d?o(b):m(b):d?p(b):n(b)};if(k){f("Log").info("Calling developer specified callback");var g={state:a.state,elem:b};k(g);window.setTimeout(e,200)}else e()});Math.random()<=1/1e3&&(b={unity:h,flash:c},d("sdk.api")(d("sdk.Runtime").getClientID()+"/occludespopups","post",b))}function c(){o(),m()}function g(){p(),n()}h={_setHidePluginCallback:function(a){k=a},hidePluginCallback:b,hidePluginElement:c,showPluginElement:g};b=h;i["default"]=b},98);c.__d("sdk.Canvas.Prefetcher",["JSSDKCanvasPrefetcherConfig","sdk.Runtime","sdk.api"],function(b,c,d,f,g,h,i){var j={AUTOMATIC:0,MANUAL:1},a=(h=f("JSSDKCanvasPrefetcherConfig").excludedAppIds)!=null?h:[],k=j.AUTOMATIC,l=[];function m(){var a={object:"data",link:"href",script:"src"};k==j.AUTOMATIC&&Object.keys(a).forEach(function(b){var c=a[b];e("Array","from",!1,document.getElementsByTagName(b)).forEach(function(a){a[c]&&l.push(a[c])})});if(l.length===0)return;d("sdk.api")(d("sdk.Runtime").getClientID()+"/staticresources","post",{urls:e("JSON","stringify",!1,l),is_https:location.protocol==="https:"});l=[]}function b(){if(!d("sdk.Runtime").isEnvironment(d("sdk.Runtime").ENVIRONMENTS.CANVAS)||!d("sdk.Runtime").getClientID()||!f("JSSDKCanvasPrefetcherConfig").sampleRate)return;if(Math.random()>=1/f("JSSDKCanvasPrefetcherConfig").sampleRate||!f("JSSDKCanvasPrefetcherConfig").enabled||e(a,"includes",!0,d("sdk.Runtime").getClientID()))return;setTimeout(m,3e4)}function c(a){k=a}function g(a){l.push(a)}h={COLLECT_AUTOMATIC:j.AUTOMATIC,COLLECT_MANUAL:j.MANUAL,addStaticResource:g,setCollectionMode:c,_maybeSample:b};g=h;i["default"]=g},98);c.__d("sdk.Canvas.Tti",["sdk.RPC","sdk.Runtime"],function(a,b,c,d,e,f,g){function h(a,b){b={appId:c("sdk.Runtime").getClientID(),time:Date.now(),name:b},b=[b],a&&b.push(function(b){a(b.result)}),c("sdk.RPC").remote.logTtiMessage.apply(null,b)}function a(){h(null,"StartIframeAppTtiTimer")}function b(a){h(a,"StopIframeAppTtiTimer")}function d(a){h(a,"RecordIframeAppTti")}c("sdk.RPC").stub("logTtiMessage");e={setDoneLoading:d,startTimer:a,stopTimer:b};f=e;g["default"]=f},98);c.__d("sdk.Canvas-public",["Assert","FB","Log","sdk.Canvas.Environment","sdk.Canvas.IframeHandling","sdk.Canvas.Navigation","sdk.Canvas.Plugin","sdk.Canvas.Prefetcher","sdk.Canvas.Tti","sdk.Event","sdk.RPC","sdk.Runtime"],function(a,b,c,d,f,g,h){function a(){c("FB").provide("Canvas",{setSize:function(a){c("Assert").maybeObject(a,"Invalid argument");return c("sdk.Canvas.IframeHandling").setSize.apply(null,arguments)},setAutoGrow:function(){return c("sdk.Canvas.IframeHandling").setAutoGrow.apply(null,arguments)},getPageInfo:function(a){c("Assert").isFunction(a,"Invalid argument");return c("sdk.Canvas.Environment").getPageInfo.apply(null,arguments)},scrollTo:function(a,b){c("Assert").maybeNumber(a,"Invalid argument");c("Assert").maybeNumber(b,"Invalid argument");return c("sdk.Canvas.Environment").scrollTo.apply(null,arguments)},setDoneLoading:function(a){c("Assert").maybeFunction(a,"Invalid argument");return c("sdk.Canvas.Tti").setDoneLoading.apply(null,arguments)},startTimer:function(){return c("sdk.Canvas.Tti").startTimer.apply(null,arguments)},stopTimer:function(a){c("Assert").maybeFunction(a,"Invalid argument");return c("sdk.Canvas.Tti").stopTimer.apply(null,arguments)},setUrlHandler:function(a){c("Assert").isFunction(a,"Invalid argument");return c("sdk.Canvas.Navigation").setUrlHandler.apply(null,arguments)}}),c("sdk.RPC").local.fireEvent=e(d("sdk.Event").fire,"bind",!0,d("sdk.Event")),d("sdk.Event").subscribe("init:post",function(a){c("sdk.Runtime").isEnvironment(c("sdk.Runtime").ENVIRONMENTS.CANVAS)&&(c("Assert").isTrue(!a.hideFlashCallback||!a.hidePluginCallback,"cannot specify deprecated hideFlashCallback and new hidePluginCallback"),c("sdk.Canvas.Plugin")._setHidePluginCallback(a.hidePluginCallback||a.hideFlashCallback))})}function i(){c("sdk.RPC").local.hidePluginObjects=function(){d("Log").info("hidePluginObjects called"),c("sdk.Canvas.Plugin").hidePluginCallback({state:"opened"})},c("sdk.RPC").local.showPluginObjects=function(){d("Log").info("showPluginObjects called"),c("sdk.Canvas.Plugin").hidePluginCallback({state:"closed"})},c("sdk.RPC").local.showFlashObjects=c("sdk.RPC").local.showPluginObjects,c("sdk.RPC").local.hideFlashObjects=c("sdk.RPC").local.hidePluginObjects}function b(){i(),c("FB").provide("Canvas.Plugin",c("sdk.Canvas.Plugin"))}function f(){c("FB").provide("Canvas.Prefetcher",c("sdk.Canvas.Prefetcher")),d("sdk.Event").subscribe("init:post",function(a){c("sdk.Runtime").isEnvironment(c("sdk.Runtime").ENVIRONMENTS.CANVAS)&&c("sdk.Canvas.Prefetcher")._maybeSample()})}function g(){d("sdk.Event").subscribe(d("sdk.Event").SUBSCRIBE,a);d("sdk.Event").subscribe(d("sdk.Event").UNSUBSCRIBE,b);c("sdk.RPC").stub("useFriendsOnline");function a(a,b){if(a!="canvas.friendsOnlineUpdated")return;b.length===1&&c("sdk.RPC").remote.useFriendsOnline(!0)}function b(a,b){if(a!="canvas.friendsOnlineUpdated")return;b.length===0&&c("sdk.RPC").remote.useFriendsOnline(!1)}}a={init:a,initCanvasPlugin:b,initCanvasPrefetcher:f,initCanvasPresence:g,initRPC:i};b=a;h["default"]=b},98);c.__d("sdk.Event-public",["FB","Log","sdk.Event"],function(a,b,c,d,f,g,h){function a(){var a=function(a){return d("Log").error("FB.Event."+a+"() has been deprecated")};c("FB").provide("Event",{subscribe:function(a,b){return d("sdk.Event").subscribe(a,b)},unsubscribe:e(d("sdk.Event").unsubscribe,"bind",!0,d("sdk.Event")),clear:e(a,"bind",!0,null,"clear"),fire:e(a,"bind",!0,null,"fire")})}b={init:a};f=b;h["default"]=f},98);c.__d("sdk.Frictionless-public",["FB","sdk.Event","sdk.Frictionless"],function(a,b,c,d,e,f,g){"use strict";function a(){d("sdk.Event").subscribe("init:post",function(a){a.frictionlessRequests&&c("sdk.Frictionless").init()}),c("FB").provide("Frictionless",c("sdk.Frictionless"))}b={init:a};e=b;g["default"]=e},98);c.__d("sdk.GamingServices",["sdk.api","sdk.ui"],function(a,b,c,d,e,f,g){function a(a){c("sdk.ui")({display:"touch",method:"gaming_friendfinder"},a)}function b(a,b,d,e){c("sdk.api")("me/photos","POST",{caption:b,url:a},function(a){if(d===!1||!a||a.error)e!==null&&e(a);else{var b=a.id;c("sdk.ui")({display:"touch",method:"gaming_media_library",media_id:b},function(b){e!==null&&e(a)})}})}d={friendFinder:a,uploadImageToMediaLibrary:b};e=d;g["default"]=e},98);c.__d("sdk.GamingServices-public",["FB","sdk.GamingServices"],function(a,b,c,d,e,f,g){"use strict";function a(){c("FB").provide("",{gamingservices:c("sdk.GamingServices")})}b={init:a};d=b;g["default"]=d},98);c.__d("sdk.PluginUtils",["resolveURI","sdk.Event"],function(b,c,d,e,f,g,h){var i={string:function(a){return a},bool:function(a){return a!=null?/^(?:true|1|yes|on)$/i.test(a):void 0},url:function(a){return d("resolveURI")(a)},url_maybe:function(a){return a!=null&&a!==""?d("resolveURI")(a):void 0},hostname:function(a){return a!=null&&a!==""?a:"window.location.hostname"},px:function(a){if(typeof a==="string"){var b=a.match(/^(\d+)(?:px)?$/);return b!=null?parseInt(b[0],10):void 0}else if(typeof a==="number")return a;else return void 0},text:function(a){return a}};function a(a,b){var c;return(c=(c=(c=(c=(c=(c=a[b])!=null?c:a[b.replace(/_/g,"-")])!=null?c:a[b.replace(/_/g,"")])!=null?c:a["data-"+b])!=null?c:a["data-"+b.replace(/_/g,"-")])!=null?c:a["data-"+b.replace(/_/g,"")])!=null?c:void 0}function b(b,c,d,e){Object.keys(b).forEach(function(f){if(b[f]==="text"&&!d[f]){var h;d[f]=(h=(h=c.textContent)!=null?h:c.innerText)!=null?h:void 0;c.setAttribute(f,d[f])}e[f]=i[b[f]](a(d,f))})}function j(a,b,c){b==="100%"?a.style.width="100%":b!=null&&b!==""&&(a.style.width=b+"px"),(c!=null&&c!==""||c===0)&&(a.style.height=c+"px")}function c(a){return function(b){b={width:b.width,height:b.height,pluginID:a},e("sdk.Event").fire("xfbml.resize",b)}}function f(a){return a==="100%"?"100%":a!=null?parseInt(a,10):void 0}function g(a){a!=null&&j(a,0,0)}var k={skin:"string",font:"string",width:"string",height:"px",ref:"string",lazy:"bool",color_scheme:"string"};h.getVal=a;h.validate=b;h.resize=j;h.resizeBubbler=c;h.parse=f;h.collapseIframe=g;h.baseParams=k},98);c.__d("isNumberLike",[],function(a,b,c,d,e,f){function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}f["default"]=a},66);c.__d("sdk.createIframe",["DOMEventListener","getBlankIframeSrc","guid","isNumberLike"],function(a,b,c,d,f,g,h){function a(b){var f=e("Object","assign",!1,{},b),i,g=f.name||c("guid")(),h=f.root,j=f.style||{border:"none"},a=f.url,k=f.onload,l=f.onerror;i=document.createElement("iframe");i.name=g;delete f.style;delete f.name;delete f.url;delete f.root;delete f.onload;delete f.onerror;delete f.height;delete f.width;f.frameBorder===void 0&&(f.frameBorder=0);f.allowTransparency===void 0&&(f.allowTransparency=!0);f.allowFullscreen===void 0&&(f.allowFullscreen=!0);f.scrolling===void 0&&(f.scrolling="no");f.allow===void 0&&(f.allow="encrypted-media");f.lazy&&(f.loading="lazy",j.visibility&&delete j.visibility);delete f.lazy;b.width!=null&&c("isNumberLike")(b.width)&&(i.width=b.width+"px");b.height!=null&&c("isNumberLike")(b.height)&&(i.height=b.height+"px");f.testid&&i.dataset!=null&&(i.dataset.testid=f.testid,delete f.testid);for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&i.setAttribute(g,f[g]);e("Object","assign",!1,i.style,j);i.src=c("getBlankIframeSrc")();h!=null&&h.appendChild(i);if(k)var m=d("DOMEventListener").add(i,"load",function(){m.remove(),k()});if(l)var n=d("DOMEventListener").add(i,"error",function(){n.remove(),l()});i.src=a;return i}h["default"]=a},98);c.__d("IframePlugin",["Log","ObservableMixin","QueryString","Type","UrlMap","guid","sdk.Auth.LoginStatus","sdk.AuthUtils","sdk.DOM","sdk.Event","sdk.PlatformVersioning","sdk.PluginUtils","sdk.Runtime","sdk.UA","sdk.URI","sdk.XD","sdk.createIframe"],function(a,b,c,d,g,h,i){var j=c("Type").extend({constructor:function(b,f,g,h){var i=this;this.parent();g=g.replace(/-/g,"_");var j=d("sdk.PluginUtils").getVal(h,"plugin_id");this.subscribe("xd.resize",d("sdk.PluginUtils").resizeBubbler(j));this.subscribe("xd.resize.flow",d("sdk.PluginUtils").resizeBubbler(j));this.subscribe("xd.resize.flow",function(a){e("Object","assign",!1,i._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),d("sdk.PluginUtils").resize(i._iframeOptions.root,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),i.updateLift(),window.clearTimeout(i._timeoutID)});this.subscribe("xd.resize",function(a){e("Object","assign",!1,i._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),d("sdk.PluginUtils").resize(i._iframeOptions.root,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),d("sdk.PluginUtils").resize(i._iframe,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),i._isIframeResized=!0,i.updateLift(),window.clearTimeout(i._timeoutID)});this.subscribe("xd.resize.iframe",function(a){d("sdk.PluginUtils").resize(i._iframe,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),i._isIframeResized=!0,i.updateLift(),window.clearTimeout(i._timeoutID)});this.subscribe("xd.sdk_event",function(a){var c=e("JSON","parse",!1,a.data);c.pluginID=j;d("sdk.Event").fire(a.event,c,b)});var a=d("UrlMap").resolve("www")+"/plugins/"+g+".php?",k={};d("sdk.PluginUtils").validate(this.getParams(),b,h,k);d("sdk.PluginUtils").validate(d("sdk.PluginUtils").baseParams,b,h,k);e("Object","assign",!1,k,{app_id:c("sdk.Runtime").getClientID(),locale:c("sdk.Runtime").getLocale(),sdk:"joey",kid_directed_site:c("sdk.Runtime").getKidDirectedSite(),channel:d("sdk.XD").handler(function(a){a!=null&&i.inform("xd."+a.type,a)},"parent.parent",!0)});this.shouldIgnoreWidth()&&(k.width=void 0);k.container_width=b.offsetWidth;d("sdk.DOM").addCss(b,"fb_iframe_widget");var l=c("guid")();this.subscribe("xd.verify",function(a){d("sdk.XD").sendToFacebook(l,{method:"xd/verify",params:e("JSON","stringify",!1,a.token)})});this.subscribe("xd.refreshLoginStatus",function(){d("sdk.AuthUtils").removeLogoutState(),c("sdk.Auth.LoginStatus").getLoginStatus(e(i.inform,"bind",!0,i,"login.status"),!0)});h=document.createElement("span");e("Object","assign",!1,h.style,{verticalAlign:"top",width:k.lazy?"1px":"0px",height:k.lazy?"1px":"0px",overflow:"hidden"});this._element=b;this._ns=f;this._tag=g;this._params=k;this._config=this.getConfig();this._iframeOptions={root:h,url:a+c("QueryString").encode(k),name:l,width:this._config.mobile_fullsize&&c("sdk.UA").mobile()?void 0:k.width||1e3,height:k.height||1e3,style:{border:"none",visibility:"hidden"},title:this._ns+":"+this._tag+" Facebook Social Plugin",testid:this._ns+":"+this._tag+" Facebook Social Plugin",onload:function(){return i.inform("render")},onerror:function(){return d("sdk.PluginUtils").collapseIframe(i._iframe)},lazy:k.lazy};this.isFluid()&&k.width!=="auto"&&(d("sdk.DOM").addCss(this._element,"fb_iframe_widget_fluid_desktop"),!k.width&&this._config.full_width&&(this._element.style.width="100%",this._iframeOptions.root.style.width="100%",this._iframeOptions.style.width="100%",this._params.container_width=this._element.offsetWidth,this._iframeOptions.url=a+c("QueryString").encode(this._params)))},shouldIgnoreWidth:function(){return c("sdk.UA").mobile()&&this.getConfig().mobile_fullsize},useInlineHeightForMobile:function(){return!0},process:function(){var a=this;if(c("sdk.Runtime").getIsVersioned()){d("sdk.PlatformVersioning").assertVersionIsSet();var b=new(c("sdk.URI"))(this._iframeOptions.url);this._iframeOptions.url=b.setPath("/"+c("sdk.Runtime").getVersion()+b.getPath()).toString()}b=f["extends"]({},this._params);delete b.channel;var i=c("QueryString").encode(b);if(this._element.getAttribute("fb-iframe-plugin-query")==i){d("Log").info("Skipping render: %s:%s %s",this._ns,this._tag,i);this.inform("render");return}this._element.setAttribute("fb-iframe-plugin-query",i);this.subscribe("render",function(){d("sdk.Event").fire("iframeplugin:onload"),a._iframe.style.visibility="visible",a._isIframeResized||d("sdk.PluginUtils").collapseIframe(a._iframe)});while(this._element.firstChild)this._element.removeChild(this._element.firstChild);this._element.appendChild(this._iframeOptions.root);var j=c("sdk.UA").mobile()?120:45;this._timeoutID=window.setTimeout(function(){d("sdk.PluginUtils").collapseIframe(a._iframe),d("Log").warn("%s:%s failed to resize in %ss",a._ns,a._tag,j)},j*1e3);this._iframe=c("sdk.createIframe")(this._iframeOptions);d("sdk.Event").fire("iframeplugin:create");(c("sdk.UA").mobile()||b.width==="auto")&&(this.useInlineHeightForMobile()&&d("sdk.DOM").addCss(this._element,"fb_iframe_widget_fluid"),this._iframeOptions.width||(e("Object","assign",!1,this._element.style,{display:"block",width:"100%",height:"auto"}),e("Object","assign",!1,this._iframeOptions.root.style,{width:"100%",height:"auto"}),i={height:"auto",position:"static",width:"100%"},(c("sdk.UA").iphone()||c("sdk.UA").ipad())&&e("Object","assign",!1,i,{width:"220px","min-width":"100%"}),e("Object","assign",!1,this._iframe.style,i)))},getConfig:function(){return{}},isFluid:function(){var a=this.getConfig();return a.fluid},updateLift:function(){var a=this._iframe.style.width===this._iframeOptions.root.style.width&&this._iframe.style.height===this._iframeOptions.root.style.height;d("sdk.DOM")[a?"removeCss":"addCss"](this._iframe,"fb_iframe_widget_lift")}},c("ObservableMixin"));j.withParams=function(a,b){return j.extend({getParams:function(){return a},getConfig:function(){return b?b:{}}})};a=j;i["default"]=a},98);c.__d("PluginConfig",["sdk.feature"],function(a,b,c,d,e,f,g){a={mobile_fullsize:!0},b={mobile_fullsize:!0},d={mobile_fullsize:!0},e={mobile_fullsize:!0},f={mobile_fullsize:!0},c={fluid:c("sdk.feature")("fluid_embed",!1),mobile_fullsize:!0},a={comment_embed:a,messengerpreconfirmation:b,messengeraccountconfirmation:d,messengerbusinesslink:e,messengertoggle:f,post:c},b=a,g["default"]=b},98);c.__d("PluginAttrTypes",[],function(a,b,c,d,e,f){"use strict";a="string",b="bool",c="url",f.string=a,f.bool=b,f.url=c},66);c.__d("PluginTags",["PluginAttrTypes"],function(b,c,d,e,f,g,h){var i={ad_library_spend_tracker:{country:e("PluginAttrTypes").string,time_preset:e("PluginAttrTypes").string,custom_start_date:e("PluginAttrTypes").string,custom_end_date:e("PluginAttrTypes").string,race_type:e("PluginAttrTypes").string,state:e("PluginAttrTypes").string,district:e("PluginAttrTypes").string,page_ids:e("PluginAttrTypes").string,include_vps:e("PluginAttrTypes").bool},comment_embed:{href:e("PluginAttrTypes").url,include_parent:e("PluginAttrTypes").bool},composer:{action_type:e("PluginAttrTypes").string,action_properties:e("PluginAttrTypes").string},create_event_button:{},group:{href:e("PluginAttrTypes").url,show_social_context:e("PluginAttrTypes").bool,show_group_info:e("PluginAttrTypes").bool,show_metadata:e("PluginAttrTypes").bool},like:{href:e("PluginAttrTypes").url,layout:e("PluginAttrTypes").string,show_faces:e("PluginAttrTypes").bool,share:e("PluginAttrTypes").bool,action:e("PluginAttrTypes").string,send:e("PluginAttrTypes").bool,size:e("PluginAttrTypes").string},like_box:{href:e("PluginAttrTypes").string,show_faces:e("PluginAttrTypes").bool,header:e("PluginAttrTypes").bool,stream:e("PluginAttrTypes").bool,force_wall:e("PluginAttrTypes").bool,show_border:e("PluginAttrTypes").bool,id:e("PluginAttrTypes").string,connections:e("PluginAttrTypes").string,profile_id:e("PluginAttrTypes").string,name:e("PluginAttrTypes").string},page:{href:e("PluginAttrTypes").string,hide_cta:e("PluginAttrTypes").bool,hide_cover:e("PluginAttrTypes").bool,small_header:e("PluginAttrTypes").bool,adapt_container_width:e("PluginAttrTypes").bool,show_facepile:e("PluginAttrTypes").bool,show_posts:e("PluginAttrTypes").bool,tabs:e("PluginAttrTypes").string},page_events:{href:e("PluginAttrTypes").url},post:{href:e("PluginAttrTypes").url,show_text:e("PluginAttrTypes").bool},profile_pic:{uid:e("PluginAttrTypes").string,linked:e("PluginAttrTypes").bool,href:e("PluginAttrTypes").string,size:e("PluginAttrTypes").string,facebook_logo:e("PluginAttrTypes").bool},send_to_mobile:{max_rows:e("PluginAttrTypes").string,show_faces:e("PluginAttrTypes").bool,size:e("PluginAttrTypes").string}},a={fan:"like_box",likebox:"like_box"};Object.keys(a).forEach(function(b){i[b]=i[a[b]]});b=i;h["default"]=b},98);c.__d("runOnce",[],function(a,b,c,d,e,f){function a(a){var b=!1,c;return function(){b||(b=!0,c=a());return c}}f["default"]=a},66);c.__d("XFBML",["Assert","Log","runOnce","sdk.Observable"],function(b,c,d,f,g,h,i){var j={},a={},k=0,l=new(f("sdk.Observable").Observable)();function m(a,b){return(a[b]+"").trim()}function n(a){return j[m(a,"nodeName").toLowerCase()]}function o(b){var c=m(b,"className").split(/\s+/).filter(function(b){return Object.prototype.hasOwnProperty.call(a,b)});if(c.length===0)return void 0;if(b.getAttribute("fb-xfbml-state")||!b.childNodes||b.childNodes.length===0||b.childNodes.length===1&&b.childNodes[0].nodeType===3||b.children.length===1&&m(b.children[0],"className")==="fb-xfbml-parse-ignore")return a[c[0]]}function p(a){var b={};e("Array","from",!1,a.attributes).forEach(function(a){b[m(a,"name")]=m(a,"value")});return b}function q(b,c,q){d("Assert").isTrue(b&&b.nodeType&&b.nodeType===1&&!!b.getElementsByTagName,"Invalid DOM node passed to FB.XFBML.parse()");d("Assert").isFunction(c,"Invalid callback passed to FB.XFBML.parse()");if(b==null)return;var h=++k;f("Log").info("XFBML Parsing Start %s",h);var i=1,j=0,a=function(){i--,i===0&&(f("Log").info("XFBML Parsing Finish %s, %s tags found",h,j),c!=null&&c(),l.inform("render",[h,j])),d("Assert").isTrue(i>=0,"onrender() has been called too many times")};e("Array","from",!1,b.getElementsByTagName("*")).forEach(function(b){if(q!==!0&&b.getAttribute("fb-xfbml-state"))return;if(b.nodeType!==1)return;var c=n(b)||o(b);if(c==null)return;i++;j++;var e=new c.ctor(b,c.xmlns,c.localName,p(b));e.subscribe("render",d("runOnce")(function(){b.setAttribute("fb-xfbml-state","rendered"),a()}));c=function a(){b.getAttribute("fb-xfbml-state")=="parsed"?l.subscribe("render.queue",a):(b.setAttribute("fb-xfbml-state","parsed"),e.process())};c()});l.inform("parse",[h,j]);var m=3e4;window.setTimeout(function(){i>0&&f("Log").warn("%s tags failed to render in %s ms",i,m)},m);a()}l.subscribe("render",function(){var a=l.getSubscribers("render.queue");l.clearSubscribers("render.queue");a.forEach(function(a){a([])})});b={registerTag:function(b){var c=b.xmlns+":"+b.localName;if(c==="fb:customerchat"&&j[c]!=null)return;d("Assert").isUndefined(j[c],c+" already registered");j[c]=b;a[b.xmlns+"-"+b.localName]=b},parse:function(a,b){q((a=a)!=null?a:document.body,(a=b)!=null?a:function(){},!0)},parseNew:function(){q(document.body,function(){},!1)},subscribe:l.subscribe,unsubscribe:l.unsubscribe};c=b;i["default"]=c},98);c.__d("sdk.XFBML.Comments",["IframePlugin","QueryString","UrlMap","sdk.DOM","sdk.Event","sdk.PluginUtils","sdk.Runtime","sdk.UA","sdk.URI"],function(b,c,d,g,h,i,j){var k=320,a=f["extends"]({numposts:"string",href:"url",permalink:"bool",order_by:"string",mobile:"bool",version:"string",hide_post_profile:"bool",limit:"string",offset:"string",view:"string",fb_comment_id:"string",from_mod_tool:"bool",migrated:"string",xid:"string",title:"string",url:"string",quiet:"string",reverse:"string",simple:"string",css:"string",notify:"string",count:"bool",skin:"string",font:"string",width:"string",height:"px",ref:"string",lazy:"bool",color_scheme:"string"},g("sdk.PluginUtils").baseParams);function l(b,c){Object.keys(a).forEach(function(a){var d=g("sdk.DOM").getAttr(b,a);d!==null&&(c[a]=d)});Object.keys(c).forEach(function(a){e(a,"startsWith",!0,"data-")&&delete c[a]});d("sdk.UA").mobile()&&c.mobile!==!1&&(c.mobile=!0);c.skin||(c.skin=c.colorscheme);if(!c.href){c.title=c.title||document.title;c.url=c.url||document.URL;if(!c.xid){var f=document.URL.indexOf("#");f>0?c.xid=encodeURIComponent(document.URL.substring(0,f)):c.xid=encodeURIComponent(document.URL)}c.migrated&&(c.href=g("UrlMap").resolve("www")+"/plugins/comments_v1.php?app_id="+d("sdk.Runtime").getClientID()+"&xid="+encodeURIComponent(c.xid)+"&url="+encodeURIComponent(c.url))}else f=c.fb_comment_id,f||(f=d("QueryString").decode(document.URL.substring(document.URL.indexOf("?")+1)).fb_comment_id,f&&f.indexOf("#")>0&&(f=f.substring(0,f.indexOf("#")))),f&&(c.fb_comment_id=f);c.version||(c.version=d("sdk.Runtime").getVersion());c.permalink||(c.width=c.mobile||c.width==="auto"||c.width==="100%"?"":c.width?Math.max(c.width,k):550,c.height=100);c.href!=null&&(f=new(d("sdk.URI"))(c.href),f.getProtocol()||(c.href=f.setProtocol("http").toString()));return c}b=d("IframePlugin").extend({constructor:function(a,b,c,d){d=l(a,d),this.parent(a,b,c,d),this.subscribe("xd.sdk_event",function(a){g("sdk.Event").fire(a.event,e("JSON","parse",!1,a.data))})},getConfig:function(){return{fluid:!0,full_width:!0}},getParams:function(){return a}});c=b;j["default"]=c},98);c.__d("sdk.XFBML.CommentsCount",["sdk.DOM","sdk.XFBML.Comments","sprintf"],function(a,b,c,d,f,g,h){a=c("sdk.XFBML.Comments").extend({constructor:function(a,b,f,h){d("sdk.DOM").addCss(a,"fb_comments_count_zero"),h.count=1,this.parent(a,b,"comments",h),this.subscribe("xd.comment_count",function(b){b=e("JSON","parse",!1,b.data),d("sdk.DOM").html(a,c("sprintf")('<span class="fb_comments_count">%s</span>',b.count)),b.count>0&&d("sdk.DOM").removeCss(a,"fb_comments_count_zero"),d("sdk.DOM").removeCss(a,"fb_iframe_widget")})}}),b=a,h["default"]=b},98);c.__d("$InternalEnum",[],function(b,c,d,e,f,g){"use strict";var h=Object.prototype.hasOwnProperty,i=typeof WeakMap==="function"?new WeakMap():new Map();function a(a){var b=i.get(a);if(b!==void 0)return b;var c=new Map();Object.getOwnPropertyNames(a).forEach(function(b){c.set(a[b],b)});try{i.set(a,c)}catch(a){}return c}var j=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(b){return a(this).has(b)}},cast:{value:function(a){return this.isValid(a)?a:void 0}},members:{value:function(){return a(this).keys()}},getName:{value:function(b){return a(this).get(b)}}}));function b(a){var b=Object.create(j);for(var c in a)h.call(a,c)&&Object.defineProperty(b,c,{value:a[c]});return Object.freeze(b)}var k=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(a){return typeof a==="string"?h.call(this,a):!1}},cast:{value:j.cast},members:{value:function(){return Object.getOwnPropertyNames(this).values()}},getName:{value:function(a){return a}}}));b.Mirrored=function(a){var b=Object.create(k);for(var c=0,d=a.length;c<d;++c)Object.defineProperty(b,a[c],{value:a[c]});return Object.freeze(b)};Object.freeze(b.Mirrored);f.exports=Object.freeze(b)},null);c.__d("ChatPluginEntryPointIconEnum",["$InternalEnum"],function(a,b,c,d,e,f){a=b("$InternalEnum")({MESSENGER_ICON:"messenger_icon",CHAT_ROUND_ICON:"chat_round_icon",CHAT_ANGULAR_ICON:"chat_angular_icon",NONE:"none"}),c=a,f["default"]=c},66);c.__d("ChatPluginEntryPointLabelEnum",["$InternalEnum"],function(a,b,c,d,e,f){a=b("$InternalEnum")({NONE:"none",CHAT:"chat",HELP:"help",ASK_US:"ask_us"}),c=a,f["default"]=c},66);c.__d("ChatPluginEntryPointSizeEnum",[],function(a,b,c,d,e,f){a=Object.freeze({STANDARD:"standard",COMPACT:"compact"}),f["default"]=a},66);c.__d("performanceAbsoluteNow",["performance"],function(b,c,d,e,f,g,h){var i=function(){return Date.now()};function b(a){i=a}if(d("performance").now&&d("performance").timing&&d("performance").timing.navigationStart){var a=d("performance").timing.navigationStart;c=function(){return d("performance").now()+a}}else c=function(){return i()};c.setFallback=b;e=c;h["default"]=e},98);c.__d("ChatPluginSDKPreLoggingUtils",["CORSRequest","UrlMap","performanceAbsoluteNow"],function(a,b,c,d,e,g,h){"use strict";function a(b,e,i,g){var h;g===void 0&&(g=!0);var j=c("performanceAbsoluteNow")();b=b?d("UrlMap").resolve("social_plugin")+"/customer_chat/SDK/":d("UrlMap").resolve("www")+"/plugins/customer_chat/SDK/";h=(h=i.request_time)!=null?h:void 0;var a=0;typeof h==="number"&&g&&(a=j-h);i.request_time=j;c("CORSRequest").execute(b,"get",f["extends"]({},i,{event_name:e,loading_time:a}),function(){return null})}h.preLogging=a},98);c.__d("LiveChatPluginConstants",["$InternalEnum"],function(b,c,d,e,f,g){"use strict";b="LiveChatEvent/";d="mqtt";e=c("$InternalEnum")({CONNECTED:"Connected",CONNECTING:"Connecting",DISCONNECTED:"Disconnected"});f=250;c=b+"close_timestamps";var h=b+"reset_badging",i=b+"state",a=b+"switch_account",j=b+"typing",k=b+"unread_count",l=b+"update_message_list",m="platform/plugins/connect/guest",n=b+"guest_upgrade_success",o=b+"guest_upgrade_success_incognito",p=b+"navigate_to_welcome_page",q="platform/plugins/connect/access_token";b=b+"start_re_engagement";var r=124,s=187,t=24,u=424,v=288,w=313,x=219,y=40,z=36,A=24,B=18,C=708,D=540,E=244,F=202,G=509,H=430,I=6,J=0,K=1,L=-1,M="messaging_plugin",N=8634e4,O="#8A8D91",P="entrypoint:customer_chat_plugin",Q=0,R=1,S=2,T=3,U="new_message_update",V="initial_fetch",W=5e3,aa="https://www.facebook.com/business/help/1661027437357021";g.MQTT=d;g.MQTTGatewayConnectionState=e;g.LOGIN_CHECK_INTERVAL=f;g.CLOSE_TIMESTAMPS=c;g.RESET_BADGING=h;g.STATE_UPDATE=i;g.SWITCH_ACCOUNT=a;g.TYPING_UPDATE=j;g.UNREAD_COUNT_UPDATE=k;g.UPDATE_MESSAGE_LIST=l;g.GUEST_MODE_CONNECT=m;g.GUEST_UPGRADE_SUCCESS=n;g.GUEST_UPGRADE_SUCCESS_INCOGNITO=o;g.NAVIGATE_TO_WELCOME_PAGE=p;g.ACCESS_TOKEN_LOGIN=q;g.START_RE_ENGAGEMENT=b;g.PROMPT_FALLBACK_HEIGHT=r;g.PROMPT_REDESIGN_FALLBACK_HEIGHT=s;g.PROMPT_CONTAINER_PADDING_HEIGHT=t;g.WELCOME_PAGE_GUEST_FALLBACK_HEIGHT=u;g.WELCOME_PAGE_NO_GUEST_FALLBACK_HEIGHT=v;g.WELCOME_PAGE_GUEST_FALLBACK_HEIGHT_WITH_COMPACT=w;g.WELCOME_PAGE_NO_GUEST_FALLBACK_HEIGHT_WITH_COMPACT=x;g.WELCOME_PAGE_ATTRIBUTION_OFFEST_HEIGHT=y;g.WELCOME_PAGE_ATTRIBUTION_OFFSET_HEIGHT_WITH_COMPACT=z;g.MAIN_IFRAME_PADDING_HEIGHT=A;g.MAIN_IFRAME_PADDING_HEIGHT_WITH_COMPACT=B;g.THREAD_PAGE_HEIGHT=C;g.THREAD_PAGE_HEIGHT_COMPACT=D;g.RE_ENGAGEMENT_COLLAPSED_DIALOG_HEIGHT=E;g.RE_ENGAGEMENT_COLLAPSED_DIALOG_HEIGHT_COMPACT=F;g.RE_ENGAGEMENT_EXPANDED_DIALOG_HEIGHT=G;g.RE_ENGAGEMENT_EXPANDED_DIALOG_HEIGHT_COMPACT=H;g.GREETING_TEXT_BOTTOM_SPACING_OFFEST=I;g.LOGGED_IN_CHAT_MODE=J;g.GUEST_CHAT_MODE=K;g.INVALID_CHAT_MODE=L;g.MESSENGING_PLUGIN=M;g.GUEST_SESSION_STORAGE_VALIDITY_MS=N;g.GUEST_SEND_BUTTON_COLOR_EMPTY_INPUT=O;g.LIVE_CHAT_ENTRYPOINT_ATTRIBUTION_TAG=P;g.ITP_CONSISTENCY_UNKNOWN_LOGGED_OUT=Q;g.ITP_CONSISTENCY_CONSISTENT_LOGGED_IN=R;g.ITP_CONSISTENCY_INCONSISTENT=S;g.ITP_CONSISTENCY_CONSISTENT_NO_ITP=T;g.NEW_MESSAGE_UPDATE=U;g.INITIAL_FETCH=V;g.PLUGIN_FADE_DELAY=W;g.HELP_DEX_LINK=aa},66);c.__d("ChatPluginStyleUtils",["LiveChatPluginConstants"],function(b,c,d,g,h,i,j){var k=44,a=36,l=17,m=15,n=22,o=20,p=6,q=4,r=16,s=14,t=60,u=44,v=70,w=86,x=63,y=76,z=99,A=114,B=85,C=98,D=12;function b(){var a=screen.width;a="width: "+a+"px;";return"padding: 0; position: fixed; z-index: 2147483646;box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);border-radius: 16px;bottom: 24px; top: auto; right:0;"+a}function c(a){a instanceof HTMLElement&&(a.style.marginTop=window.innerHeight-a.clientHeight+"px")}function E(a,b,c,d,k,l,m){b=T(b,d,k);d=U(l,m);k=V(a,c);l=f["extends"]({},b,d,k);return Object.fromEntries(e("Object","entries",!1,l).sort())}function d(a,b,c,d,f,k,l){a=E(a,b,c,d,f,k,l);return e("JSON","stringify",!1,a)}function h(b,c,d,i,j){d=d+(b=="right"?-2:43);c+t-16;c=c-16;i==="none"?j==="compact"?c+=u:c+=t:j==="compact"?c+=a:c+=k;i={bottom:c.toString()+"px",position:"fixed",width:"20px",height:"24px",zIndex:2147483645,borderRadius:"4pt",background:"none"};j={};switch(b){case"right":j=f["extends"]({},i,{right:d+"px"});break;case"left":j=f["extends"]({},i,{left:d+"px"});break}c=Object.fromEntries(e("Object","entries",!1,j).sort());return e("JSON","stringify",!1,c)}function i(b,c,d,l,m,n,o,p){var a=d;c=c-2.5;b==="left"&&(a=d-15,l==="none"?n==="compact"?a+=u:a+=t:m==="none"?l==="ask_us"?n==="compact"?a+=y:a+=w:n==="compact"?a+=x:a+=v:l==="ask_us"?n==="compact"?a+=C:a+=A:n==="compact"?a+=B:a+=z);d={bottom:c.toString()+"px",position:"fixed",zIndex:2147483646,height:"15px",width:"15px",borderRadius:"50%"};m={};switch(b){case"right":m=f["extends"]({},d,{right:a+"px"});break;case"left":m=f["extends"]({},d,{left:a+"px"});break}o===!1&&(m=f["extends"]({},m,{animation:p===!0?"slideInFromBottomDelay 3.5s ease-out":null,backgroundColor:"#31CC46",border:"2.5px solid white",height:"10px",width:"10px"}));return Object.fromEntries(e("Object","entries",!1,m).sort())}function F(a){var b="padding: 0; position: fixed; z-index: 2147483646;box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);border-radius: 16px;bottom: 24px; top: auto; right:0; margin: 0 12px; width: calc(100% - 24px);";a=a===!0?" height: 60px;":" height: 0px;";b+=a;return b}function G(b,c,d,e,f,n,o){d=d-D;t;f==="none"?n==="compact"?f=u:f=t:n==="compact"?f=a:f=k;n=f+c;f=" bottom: "+n.toString()+"px;";c="padding: 0; position: fixed; z-index: 2147483646; border-radius: 16px; top: auto; background: none; minHeight: 300px;";var p=" width: 399px;",q=" width: 324px;";c=c+(o==="compact"?q:p)+f;e?c+=" max-height: calc(100% - "+n.toString()+"px);":c+=" max-height: 0;";switch(b){case"right":c+=" right: "+(d+4)+"px;";break;case"left":c+=" left: "+(d-4)+"px;";break}return c}function H(a){var b="position: fixed; z-index: 2147483646; box-shadow: none; border-radius: 0; top: 0px; right: 0px; width: 100%;";a=a===!0?" height: 100%; max-height: 100%;":" max-height: 0px;";b+=a;return b}function I(a,b,c,d,e){b=J(b,c,d);a||(c=e?g("LiveChatPluginConstants").RE_ENGAGEMENT_COLLAPSED_DIALOG_HEIGHT_COMPACT:g("LiveChatPluginConstants").RE_ENGAGEMENT_COLLAPSED_DIALOG_HEIGHT,d=e?g("LiveChatPluginConstants").MAIN_IFRAME_PADDING_HEIGHT_WITH_COMPACT:g("LiveChatPluginConstants").MAIN_IFRAME_PADDING_HEIGHT,a=c+d,b+=a-g("LiveChatPluginConstants").GREETING_TEXT_BOTTOM_SPACING_OFFEST);return b}function J(b,c,d){var e=D;c==="none"?d==="compact"?e+=u:e+=t:d==="compact"?e+=a:e+=k;return e+b}function K(a,b,c,d,i){c=c-D;b=J(b,d,i);d={padding:0,position:"fixed",zIndex:2147483646,borderRadius:"16px",top:"auto",width:"247px",maxHeight:"calc(100% - 80px)",background:"none",height:"72px"};({});i=f["extends"]({},d,{bottom:b+"px"});switch(a){case"right":i=f["extends"]({},i,{right:"6px",marginRight:c+"px"});break;case"left":i=f["extends"]({},i,{left:"2px",marginLeft:c+"px"});break}i=f["extends"]({},i,{animation:"slideInFromBottomDelay 3s ease-out"});d=Object.fromEntries(e("Object","entries",!1,i).sort());return e("JSON","stringify",!1,d)}function L(a,b,c,d,e,f){c=c-D;b=J(b,e,f);e=" bottom: "+b.toString()+"px;";f="padding: 0; position: fixed; z-index: 2147483646;border-radius: 16px; top: auto; width: 247px; max-height: calc(100% - 80px); background: none;"+e;b=f;switch(a){case"right":b+=" right: 6px; margin-right: "+c+"px;";break;case"left":b+=" left: 2px; margin-left: "+c+"px;";break}b+=Boolean(d)?" animation: slideInFromBottomDelay 6s ease-out;":" animation: slideInFromBottomDelay 3s ease-out;";return b}function M(b,c,d,e,f,m){e=m==="compact"?u:t;var n="position: fixed; z-index: 2147483646; box-shadow: none; border-radius: 18px 0px 18px 18px; right: 0px; width: calc(80% - 40px); bottom: 24px;";if(b!=null&&typeof d=="number"){n+=" height: "+b+"px;";var o=d;b<e&&(o=d+12);n+=" bottom: "+o+"px;"}else n+=" height: 60px;";n+=c==="left"?" left: calc(84px + 5%);":" left: 5%;";if(f!=="none"&&typeof d==="number"){b=m==="compact"?a:k;e=d+b+12;n+=" bottom: "+e+"px;";switch(c){case"right":n+=" right: 20px; left: auto;";break;case"left":n+=" left: 20px; right: auto;";break}}return n}function N(b,c,d,e,f){d="position: fixed; z-index: 2147483646; box-shadow: none; border-radius: 18px 0px 18px 18px;width: 306px;bottom: 24px; right: 20px;";typeof c==="number"&&(f=f==="compact"?a:k,c=c+f+12,d+=" bottom: "+c+"px;");if(typeof e==="number"){f=e-D;switch(b){case"right":d+=" right: "+(f+4)+"px; left:auto";break;case"left":d+=" left: "+(f-4)+"px; right:auto";break}}return d}function O(a,b){var c={alignItems:"flex-start",background:"#FFFFFF",borderRadius:"18px",bottom:0,boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"row",position:"absolute"},d=f["extends"]({},c,{marginLeft:"12px",padding:"8px 0px 8px 8px",width:"90%"});c=f["extends"]({},c,{padding:"8px 0px 8px 12px",width:"93%"});a=a?d:c;b==="desktop"&&(a=f["extends"]({},a,{cursor:"pointer"}));return Object.fromEntries(e("Object","entries",!1,a).sort())}function P(a,b){var c={display:"inline-block",fontSize:"17px",lineHeight:"22px",textAlign:"left",width:"90%",wordWrap:"break-word"},d=f["extends"]({},c,{paddingRight:"18px"});b==="mobile"&&(d=f["extends"]({},d,{paddingLeft:"12px"}));b=f["extends"]({},c,{paddingRight:"12px",paddingLeft:"12px"});c=a?b:d;return Object.fromEntries(e("Object","entries",!1,c).sort())}function Q(a,b){var c={position:"absolute",top:"-2px",width:"38px"};b==="desktop"&&(c=f["extends"]({},c,{cursor:"pointer"}));b=f["extends"]({},c,{left:"-4px"});c=f["extends"]({},c,{right:"-4px"});a=a?b:c;return Object.fromEntries(e("Object","entries",!1,a).sort())}function R(a){a={visibility:a?"hidden":"visible"};return Object.fromEntries(e("Object","entries",!1,a).sort())}function S(){var a={outline:"none"};return Object.fromEntries(e("Object","entries",!1,a).sort())}function T(a,b,c){return{animation:W(b,c),background:"none",bottom:a.toString()+"px",display:"block",margin:"0 12px 0 12px",overflow:"visible",padding:"0",position:"fixed",top:"auto",zIndex:2147483644}}function U(b,c){if(b!=="none"){b=c==="compact"?a:k;return{borderRadius:"60px",boxShadow:null,height:b+"px",width:"auto"}}else{b=c==="compact"?u:t;return{borderRadius:"60px",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)",height:b+"px",width:b+"px"}}}function V(a,b){b=b-D;switch(a){case"right":return{right:b+"px"};case"left":return{left:b+"px"}}}function W(a,b){if(Boolean(a))return null;if(Boolean(b))return"slideInFromBottomDelay 3s ease-out";else return"slideInFromBottom 0.3s ease-out"}j.LABELED_ENTRY_POINT_STANDARD_HEIGHT=k;j.LABELED_ENTRY_POINT_COMPACT_HEIGHT=a;j.LABELED_ENTRY_POINT_STANDARD_FONT_SIZE=l;j.LABELED_ENTRY_POINT_COMPACT_FONT_SIZE=m;j.LABELED_ENTRY_POINT_STANDARD_LINE_HEIGHT=n;j.LABELED_ENTRY_POINT_COMPACT_LINE_HEIGHT=o;j.LABELED_ENTRY_POINT_STANDARD_ICON_MARGIN_RIGHT=p;j.LABELED_ENTRY_POINT_COMPACT_ICON_MARGIN_RIGHT=q;j.LABELED_ENTRY_POINT_STANDARD_PADDING_HORIZONTAL=r;j.LABELED_ENTRY_POINT_COMPACT_PADDING_HORIZONTAL=s;j.ICON_ENTRY_POINT_STANDARD_HEIGHT=t;j.ICON_ENTRY_POINT_COMPACT_HEIGHT=u;j.LABELED_ONLY_ENTRY_POINT_STANDARD_WIDTH_SHORT=v;j.LABELED_ONLY_ENTRY_POINT_STANDARD_WIDTH_LONG=w;j.LABELED_ONLY_ENTRY_POINT_COMPACT_WIDTH_SHORT=x;j.LABELED_ONLY_ENTRY_POINT_COMPACT_WIDTH_LONG=y;j.LABELED_WITH_ICON_ENTRY_POINT_STANDARD_WIDTH_SHORT=z;j.LABELED_WITH_ICON_ENTRY_POINT_STANDARD_WIDTH_LONG=A;j.LABELED_WITH_ICON_ENTRY_POINT_COMPACT_WIDTH_SHORT=B;j.LABELED_WITH_ICON_ENTRY_POINT_COMPACT_WIDTH_LONG=C;j.getMobileStyleText=b;j.positionElementAtWindowFooter=c;j.getEntryPointStyle=E;j.getIconStyleText=d;j.getUnreadCountStyleText=h;j.getAvailabilityStatusStyleText=i;j.getMobileLandingStyleText=F;j.getDesktopStyleText=G;j.getMobileFullScreenStyleText=H;j.getDesktopGreetingBottomSpacingWithReEngagementDialog=I;j.getDesktopGreetingBottomSpacing=J;j.getDesktopGreetingStyleText=K;j.getDesktopWelcomeMessageStyleText=L;j.getMobileWelcomeMessageStyleText=M;j.getMobileReengagementCollapsedDialogStyleText=N;j.getWelcomeMessageBubbleStyle=O;j.getWelcomeMessageTextStyle=P;j.getMinusButtonStyle=Q;j.getMinusButtonVisibility=R;j.getNoOutlineFocus=S},98);c.__d("DOMPlugin",["JSSDKShadowCssConfig","Log","QueryString","sdk.DOM","sdk.Observable","sdk.PluginUtils","sdk.Runtime","sdk.XD","sdk.feature"],function(a,b,c,d,g,h,i){a=function(a){f.inheritsLoose(g,a);var b=g.prototype;b.render=function(a){};function g(f,g,h,i,j,b){var k;k=a.call(this)||this;k.shadowCss=[];k.element=f;k.tag=h.replace(/-/g,"_");k.ns=g;k.config=(h=b)!=null?h:{};k.params={};d("sdk.PluginUtils").validate(j,f,i,k.params);d("sdk.PluginUtils").validate(d("sdk.PluginUtils").baseParams,f,i,k.params);e("Object","assign",!1,k.params,{app_id:c("sdk.Runtime").getClientID(),locale:c("sdk.Runtime").getLocale(),sdk:"joey",kid_directed_site:c("sdk.Runtime").getKidDirectedSite(),channel:d("sdk.XD").handler(function(a){a!=null&&k.inform("xd."+a.type,a)},"parent.parent",!0)});return k}b.process=function(){var a=f["extends"]({},this.params);delete a.channel;a=c("QueryString").encode(a);if(this.element.getAttribute("fb-iframe-plugin-query")===a){d("Log").info("Skipping render: %s:%s %s",this.ns,this.tag,a);this.inform("render");return}this.element.setAttribute("fb-iframe-plugin-query",a);j(this.element,e(this.render,"bind",!0,this),this.shadowCss);this.inform("render")};return g}(d("sdk.Observable").Observable);function j(a,b,e){e===void 0&&(e=[]);while(a.firstChild)a.removeChild(a.firstChild);if(typeof a.attachShadow==="function"){var f=document.createElement("div");a.appendChild(f);var j=f.attachShadow({mode:c("sdk.feature")("shadow_dom_plugin_mode","closed")});e.forEach(function(a){return d("sdk.DOM").addCssRules(c("JSSDKShadowCssConfig")[a],[a],j)});j.appendChild(b(j))}else e.forEach(function(a){return d("sdk.DOM").addCssRules(c("JSSDKShadowCssConfig")[a],[a])}),a.appendChild(b(document))}i.DOMPlugin=a;i.maybeCreateShadowRootAndRenderInDOM=j},98);c.__d("getJSEnumSafe",[],function(a,b,c,d,e,f){"use strict";function a(a,b){if(b==null)return null;if(!Object.prototype.hasOwnProperty.call(a,b))return null;b=b;return a[b]}f["default"]=a},66);c.__d("nativeRequestAnimationFrame",[],function(a,b,c,d,e,f){b=a.__fbNativeRequestAnimationFrame||a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame,c=b,f["default"]=c},66);c.__d("requestAnimationFramePolyfill",["nativeRequestAnimationFrame","performanceNow"],function(a,b,c,d,e,f,g){var h=0;b=c("nativeRequestAnimationFrame")||function(b){var d=c("performanceNow")(),e=Math.max(0,16-(d-h));h=d+e;return a.setTimeout(function(){b(c("performanceNow")())},e)};d=b;g["default"]=d},98);c.__d("IdleCallbackImplementation",["performanceNow","requestAnimationFramePolyfill"],function(b,c,d,e,f,g,h){var i=[],a=0,j=0,k=-1,l=!1,m=1e3/60,n=2;function o(a){return a}function p(a){return a}function c(a,c){var d=j++;i[d]=a;r();if(c!=null&&c.timeout>0){var e=o(d);b.setTimeout(function(){return x(e)},c.timeout)}return o(d)}function q(a){a=p(a),i[a]=null}function r(){l||(l=!0,d("requestAnimationFramePolyfill")(function(a){l=!1,t(d("performanceNow")()-a)}))}function s(a){var b=m-n;if(a<b)return b-a;a=a%m;if(a>b||a<n)return 0;else return b-a}function t(a){var b=d("performanceNow")();b>k&&(a=s(a),a>0&&(b=b+a,w(b),k=b));u()&&r()}function u(){return a<i.length}function v(){while(u()){var b=i[a];a++;if(b)return b}return null}function w(a){var b;while(d("performanceNow")()<a&&(b=v()))b(new y(a))}function x(a){var b=p(a);b=i[b];b&&(q(a),b(new y(null)))}var y=function(){function a(a){this.didTimeout=a==null,this.$1=a}var b=a.prototype;b.timeRemaining=function(){var a=this.$1;if(a!=null){var b=d("performanceNow")();if(b<a)return a-b}return 0};return a}();h.requestIdleCallback=c;h.cancelIdleCallback=q},98);c.__d("sdk.IdleCallback",["IdleCallbackImplementation","sdk.feature"],function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){d===void 0&&(d=c("sdk.feature")("idle_callback_wait_time_ms",2e3)),this.$1=d,this.$3=b,this.$2=a}var b=a.prototype;b.start=function(){var a=this;if(this.$1===0||isNaN(this.$1)||this.$2===0||isNaN(this.$2)){this.$3();return null}var b=Date.now(),c=this.isBrowserCompatible()?window.requestIdleCallback:d("IdleCallbackImplementation").requestIdleCallback,e=0,f=0,g=function d(g){if(e>a.$1){a.$3();return}var h=Date.now();if(h-b>a.$2){a.$3();return}h=g.timeRemaining();e+=h>=49&&f>=49?h:0;f=h;c(d)};return c(g)};b.isBrowserCompatible=function(){return typeof window==="undefined"?!1:typeof window.requestIdleCallback==="function"};return a}(),g["default"]=a},98);c.__d("uuid",[],function(b,c,d,e,f,g){"use strict";function b(){var b;b=(b=a)==null?void 0:(b=b.crypto)==null?void 0:b.randomUUID;return typeof b==="function"?a.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}g["default"]=b},66);c.__d("sdk.XFBML.ChatDOM",["$InternalEnum","CORSRequest","ChatPluginEntryPointIconEnum","ChatPluginEntryPointLabelEnum","ChatPluginEntryPointSizeEnum","ChatPluginSDKPreLoggingUtils","ChatPluginStyleUtils","DOMPlugin","Log","UrlMap","getJSEnumSafe","performanceAbsoluteNow","sdk.Content","sdk.DOM","sdk.IdleCallback","sdk.XFBML.CustomerChatNew","sdk.fbt","sdk.feature","uuid"],function(a,b,c,d,g,h,i){"use strict";var j=b("$InternalEnum").Mirrored(["WAITING","LOADING","LOADED"]);a=function(a){f.inheritsLoose(b,a);function b(f,g,h,i){var b;b=a.call(this,f,g,h,i,{allow_guests:"bool",attribution:"string",greeting_dialog_display:"string",greeting_dialog_delay:"string",logged_in_greeting:"string",logged_out_greeting:"string",minimized:"bool",page_id:"string",theme_color:"string",override:"string",attribution_version:"string",is_loaded_by_facade:"bool"})||this;g=c("performanceAbsoluteNow")();h=c("uuid")();var k=window.location.href;e("Object","assign",!1,b.params,{current_url:k,log_id:h,request_time:g,is_loaded_by_facade:!0,should_use_new_domain:i.should_use_new_domain});d("ChatPluginSDKPreLoggingUtils").preLogging(Boolean(i.should_use_new_domain),"chat_plugin_sdk_facade_create",b.params,!1);d("sdk.DOM").remove(f);d("sdk.Content").append(f);b.$ChatDOMFacade3=document.createElement("div");b.$ChatDOMFacade1=j.WAITING;b.$ChatDOMFacade2=!1;b.$ChatDOMFacade6=!1;b.$ChatDOMFacade8="standard";b.$ChatDOMFacade9="none";b.$ChatDOMFacade10="none";b.$ChatDOMFacade11="left";b.$ChatDOMFacade12=0;b.$ChatDOMFacade13=0;b.$ChatDOMFacade14=!1;b.$ChatDOMFacade15=Boolean(i.should_use_new_domain);b.shadowCss=["css:fb.shadow.css.chatdom"];b.$ChatDOMFacade4=c("performanceAbsoluteNow")();d("Log").info("facadeperf: Started browser idle loader.");b.$ChatDOMFacade5=new(c("sdk.IdleCallback"))(c("sdk.feature")("chat_plugin_facade_timeout_ms",8e3),function(){var a=c("performanceAbsoluteNow")();d("Log").info("facadeperf: Idle callback starts full load in %sms.",a-b.$ChatDOMFacade4);b.$ChatDOMFacade16(!1,!1)}).start();return b}var g=b.prototype;g.render=function(a){var b=this;this.$ChatDOMFacade3.classList.add("container");a=this.$ChatDOMFacade15?d("UrlMap").resolve("social_plugin")+"/customer_chat/facade/":d("UrlMap").resolve("www")+"/plugins/customer_chat/facade/";c("CORSRequest").execute(a,"get",this.params,function(a){var f,i=c("performanceAbsoluteNow")();d("Log").info("facadeperf: CORS request completed in %sms.",i-b.$ChatDOMFacade4);if(a.error)return;b.$ChatDOMFacade11=a.alignment;b.$ChatDOMFacade12=a.bottom_spacing;b.$ChatDOMFacade13=a.side_spacing;i=a.theme_color;b.$ChatDOMFacade8=(f=c("getJSEnumSafe")(c("ChatPluginEntryPointSizeEnum"),(f=a.entry_point_size)==null?void 0:f.toUpperCase()))!=null?f:"standard";b.$ChatDOMFacade9=(f=c("ChatPluginEntryPointLabelEnum").cast(a.entry_point_label))!=null?f:"none";b.$ChatDOMFacade10=(f=c("ChatPluginEntryPointIconEnum").cast(a.entry_point_icon_enum))!=null?f:"none";b.$ChatDOMFacade14=a.away_hours_enabled&&!a.is_page_away;b.$ChatDOMFacade9==="none"?(f=document.createElement("div"),d("sdk.DOM").html(f,a.entry_point_icon_svg),f=f==null?void 0:f.outerHTML,d("sdk.DOM").html(b.$ChatDOMFacade3,f)):(f=a.entry_point_icon_svg,d("sdk.DOM").html(b.$ChatDOMFacade3,b.$ChatDOMFacade17(f)));f=d("ChatPluginStyleUtils").getEntryPointStyle(a.alignment,a.bottom_spacing,a.side_spacing,!1,!0,a.entry_point_label,b.$ChatDOMFacade8);e("Object","assign",!1,b.$ChatDOMFacade3.style,f);b.$ChatDOMFacade3.style.backgroundColor=i;b.$ChatDOMFacade14&&(f=d("ChatPluginStyleUtils").getAvailabilityStatusStyleText(a.alignment,a.bottom_spacing,a.side_spacing,a.entry_point_label,a.entry_point_icon_enum,b.$ChatDOMFacade8,!1,!0),i=document.createElement("div"),e("Object","assign",!1,i.style,f),b.$ChatDOMFacade3.append(i));d("ChatPluginSDKPreLoggingUtils").preLogging(b.$ChatDOMFacade15,"chat_plugin_sdk_facade_load",b.params)});this.$ChatDOMFacade3.addEventListener("click",function(a){b.$ChatDOMFacade16(!0,!0)});return this.$ChatDOMFacade3};g.$ChatDOMFacade18=function(a){switch(a){case"chat":return c("sdk.fbt")._("Chat");case"help":return c("sdk.fbt")._("Help");case"ask_us":return c("sdk.fbt")._("Ask us");case"none":return""}};g.$ChatDOMFacade19=function(){var a;(a=this.element.parentNode)==null?void 0:a.removeChild(this.element)};g.$ChatDOMFacade20=function(){if(this.$ChatDOMFacade2||this.$ChatDOMFacade1===j.LOADED)return;if(this.$ChatDOMFacade9==="none"){var a=this.$ChatDOMFacade8==="compact"?24:36;a=this.$ChatDOMFacade21(a);d("sdk.DOM").html(this.$ChatDOMFacade3,'\n          <div class="centered-container">\n            '+a+"\n          </div>\n        ")}else{a=this.$ChatDOMFacade8==="compact"?20:24;a=this.$ChatDOMFacade21(a);if(this.$ChatDOMFacade10==="none"){var b=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_ICON_MARGIN_RIGHT:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_ICON_MARGIN_RIGHT;d("sdk.DOM").html(this.$ChatDOMFacade3.children[0],this.$ChatDOMFacade22(b,a)+this.$ChatDOMFacade3.children[0].innerHTML);if(this.$ChatDOMFacade14){b=d("ChatPluginStyleUtils").getAvailabilityStatusStyleText(this.$ChatDOMFacade11,this.$ChatDOMFacade12,this.$ChatDOMFacade13,this.$ChatDOMFacade9,"chat_round_icon",this.$ChatDOMFacade8,!1,!1);var c=document.createElement("div");e("Object","assign",!1,c.style,b);d("sdk.DOM").remove(this.$ChatDOMFacade3.children[1]);this.$ChatDOMFacade3.append(c)}}else d("sdk.DOM").html(this.$ChatDOMFacade3.children[0].children[0],a)}this.$ChatDOMFacade2=!0};g.$ChatDOMFacade17=function(a){var b=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_HEIGHT:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_HEIGHT,c=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_FONT_SIZE:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_FONT_SIZE,e=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_LINE_HEIGHT:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_LINE_HEIGHT,f=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_ICON_MARGIN_RIGHT:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_ICON_MARGIN_RIGHT,j=this.$ChatDOMFacade8==="compact"?d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_COMPACT_PADDING_HORIZONTAL:d("ChatPluginStyleUtils").LABELED_ENTRY_POINT_STANDARD_PADDING_HORIZONTAL;return'\n      <div class="label-container" style="\n        height: '+b+"px;\n        padding: 0 "+j+'px\n      ">\n        '+(a&&'\n            <div class="label-container-icon" style="\n              margin-right: '+f+'px;\n            ">\n              '+a+"\n            </div>\n          ")+'\n        <div\n          class="label-container-label"\n          style="\n            font-size: '+c+"px;\n            line-height: "+e+'px;\n        ">'+this.$ChatDOMFacade18(this.$ChatDOMFacade9).toString()+"</div>\n      </div>\n    "};g.$ChatDOMFacade22=function(a,b){return'\n      <div class="label-container-icon" style="\n        margin-right: '+a+'px;\n      ">\n        '+b+"\n      </div>\n    "};g.$ChatDOMFacade21=function(a){return'\n      <svg class="spinning" x="0" y="0" width="'+a+'" height="'+a+'" viewbox="0 0 60 60">\n        <circle class="path" cx="30" cy="30" r="24" fill="none" stroke-width="6"></circle>\n      </svg>\n    '};g.$ChatDOMFacade23=function(a){if(a&&this.$ChatDOMFacade7&&!this.$ChatDOMFacade6){this.$ChatDOMFacade6=!0;var b=this.$ChatDOMFacade7;b.subscribe("iframes_loaded",function(a){b.showDialog()})}};g.$ChatDOMFacade16=function(a,b){var e=this;b&&this.$ChatDOMFacade20();this.$ChatDOMFacade23(a);if(this.$ChatDOMFacade1!==j.WAITING)return;this.$ChatDOMFacade1=j.LOADING;b=document.createElement("div");d("sdk.Content").append(b,this.element);b=new(c("sdk.XFBML.CustomerChatNew"))(b,"fb","customerchat",this.params);this.$ChatDOMFacade7=b;b.subscribe("xd.mpn.setupIconIframe",function(a){e.$ChatDOMFacade1=j.LOADED,e.$ChatDOMFacade19()});this.$ChatDOMFacade23(a);b.process()};return b}(d("DOMPlugin").DOMPlugin);i["default"]=a},98);c.__d("IframePluginClass",["Log","QueryString","UrlMap","guid","sdk.Auth.LoginStatus","sdk.AuthUtils","sdk.DOM","sdk.Event","sdk.Observable","sdk.PlatformVersioning","sdk.PluginUtils","sdk.Runtime","sdk.UA","sdk.URI","sdk.XD","sdk.createIframe"],function(a,b,c,d,g,h,i){a=function(a){f.inheritsLoose(b,a);function b(j,g,h,i,k){var b;k===void 0&&(k=null);b=a.call(this)||this;h=h.replace(/-/g,"_");b.$IframePluginClass2=!1;b.config=k!=null?k:{fluid:!1,mobile_fullsize:!1,full_width:!1};var l=d("sdk.PluginUtils").getVal(i,"plugin_id");b.subscribe("xd.resize",d("sdk.PluginUtils").resizeBubbler(l));b.subscribe("xd.resize.flow",d("sdk.PluginUtils").resizeBubbler(l));b.subscribe("xd.resize.flow",function(a){e("Object","assign",!1,b.iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),d("sdk.PluginUtils").resize(b.iframeOptions.root,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),b.updateLift(),window.clearTimeout(b.$IframePluginClass1)});b.subscribe("xd.resize",function(a){e("Object","assign",!1,b.iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),d("sdk.PluginUtils").resize(b.iframeOptions.root,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),d("sdk.PluginUtils").resize(b.iframe,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),b.$IframePluginClass2=!0,b.updateLift(),window.clearTimeout(b.$IframePluginClass1)});b.subscribe("xd.resize.iframe",function(a){d("sdk.PluginUtils").resize(b.iframe,d("sdk.PluginUtils").parse(a.width),d("sdk.PluginUtils").parse(a.height)),b.$IframePluginClass2=!0,b.updateLift(),window.clearTimeout(b.$IframePluginClass1)});b.subscribe("xd.sdk_event",function(a){var c=e("JSON","parse",!1,a.data);c.pluginID=l;d("sdk.Event").fire(a.event,c,j)});k=i.should_use_new_domain?d("UrlMap").resolve("social_plugin")+"/"+h+".php?":d("UrlMap").resolve("www")+"/plugins/"+h+".php?";var m={};d("sdk.PluginUtils").validate(b.getParams(),j,i,m);d("sdk.PluginUtils").validate(d("sdk.PluginUtils").baseParams,j,i,m);e("Object","assign",!1,m,{app_id:c("sdk.Runtime").getClientID(),locale:c("sdk.Runtime").getLocale(),sdk:"joey",kid_directed_site:c("sdk.Runtime").getKidDirectedSite(),channel:d("sdk.XD").handler(function(a){a!=null&&b.inform("xd."+a.type,a)},"parent.parent",!0)});b.shouldIgnoreWidth()&&(m.width=void 0);m.container_width=j.offsetWidth;d("sdk.DOM").addCss(j,"fb_iframe_widget");var n=c("guid")();b.subscribe("xd.verify",function(a){d("sdk.XD").sendToFacebook(n,{method:"xd/verify",params:e("JSON","stringify",!1,a.token)})});b.subscribe("xd.refreshLoginStatus",function(){d("sdk.AuthUtils").removeLogoutState(),c("sdk.Auth.LoginStatus").getLoginStatus(e(b.inform,"bind",!0,f.assertThisInitialized(b),"login.status"),!0)});i=document.createElement("span");e("Object","assign",!1,i.style,{verticalAlign:"top",width:m.lazy?"1px":"0px",height:m.lazy?"1px":"0px",overflow:"hidden"});b.element=j;b.ns=g;b.tag=h;b.params=m;b.iframeOptions={root:i,url:k+c("QueryString").encode(m),name:n,width:b.config.mobile_fullsize&&c("sdk.UA").mobile()?void 0:m.width||1e3,height:m.height||1e3,style:{border:"none",visibility:"hidden"},title:b.ns+":"+b.tag+" Facebook Social Plugin",testid:b.ns+":"+b.tag+" Facebook Social Plugin",onload:function(){return b.inform("render")},onerror:function(){return d("sdk.PluginUtils").collapseIframe(b.iframe)},lazy:m.lazy};b.config.fluid&&m.width!=="auto"&&(d("sdk.DOM").addCss(b.element,"fbiframe_widget_fluid_desktop"),!m.width&&b.config.full_width&&(b.element.style.width="100%",b.iframeOptions.root.style.width="100%",b.iframeOptions.style.width="100%",b.params.container_width=b.element.offsetWidth,b.iframeOptions.url=k+c("QueryString").encode(b.params)));return b}var g=b.prototype;g.shouldIgnoreWidth=function(){return c("sdk.UA").mobile()&&this.config.mobile_fullsize};g.useInlineHeightForMobile=function(){return!0};g.process=function(){var a=this;if(c("sdk.Runtime").getIsVersioned()){d("sdk.PlatformVersioning").assertVersionIsSet();var b=new(c("sdk.URI"))(this.iframeOptions.url);this.iframeOptions.url=b.setPath("/"+c("sdk.Runtime").getVersion()+b.getPath()).toString()}b=f["extends"]({},this.params);delete b.channel;var i=c("QueryString").encode(b);if(this.element.getAttribute("fb-iframe-plugin-query")==i){d("Log").info("Skipping render: %s:%s %s",this.ns,this.tag,i);this.inform("render");return}this.element.setAttribute("fb-iframe-plugin-query",i);this.subscribe("render",function(){d("sdk.Event").fire("iframeplugin:onload"),a.iframe.style.visibility="visible",a.$IframePluginClass2||d("sdk.PluginUtils").collapseIframe(a.iframe)});while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.element.appendChild(this.iframeOptions.root);var h=c("sdk.UA").mobile()?120:45;this.$IframePluginClass1=window.setTimeout(function(){d("sdk.PluginUtils").collapseIframe(a.iframe),d("Log").warn("%s:%s failed to resize in %ss",a.ns,a.tag,h)},h*1e3);this.iframe=c("sdk.createIframe")(this.iframeOptions);d("sdk.Event").fire("iframeplugin:create");(c("sdk.UA").mobile()||b.width==="auto")&&(this.useInlineHeightForMobile()&&d("sdk.DOM").addCss(this.element,"fbiframe_widget_fluid"),this.iframeOptions.width||(e("Object","assign",!1,this.element.style,{display:"block",width:"100%",height:"auto"}),e("Object","assign",!1,this.iframeOptions.root.style,{width:"100%",height:"auto"}),i={height:"auto",position:"static",width:"100%"},(c("sdk.UA").iphone()||c("sdk.UA").ipad())&&e("Object","assign",!1,i,{width:"220px",minWidth:"100%"}),e("Object","assign",!1,this.iframe.style,i)))};g.getParams=function(){return this.params};g.updateLift=function(){var a=this.iframe.style.width===this.iframeOptions.root.style.width&&this.iframe.style.height===this.iframeOptions.root.style.height;(a?d("sdk.DOM").removeCss:d("sdk.DOM").addCss)(this.iframe,"fbiframe_widget_lift")};return b}(d("sdk.Observable").Observable),i["default"]=a},98);c.__d("MPNExplicitUserInteractions",[],function(a,b,c,d,e,f){"use strict";var g=36e5;function a(a){return a==null?!1:Date.now()<=a+g}f.hasUserInteraction=a},66);c.__d("MPNLocalState",[],function(a,b,c,d,e,f){"use strict";a={LANDING_BANNER:1,WELCOME_PAGE:2,ITP_CONTINUE:3,THREAD_VIEW:4,BUBBLE:5,REENGAGEMENT_COLLAPSED_VIEW:6,REENGAGEMENT_EXPANDED_VIEW:7},b={CHAT_NOT_STARTED:1,LOGGED_IN_CHAT_STARTED:2,GUEST_CHAT_STARTED:3},c="__fb_chat_plugin",f.MPNLocalStatePath=a,f.MPNChatState=b,f.LOCAL_STATE_KEY=c},66);c.__d("getFacebookOriginForTarget",["Log"],function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b=top);var c=0,e=!1,f=200;window.addEventListener("message",function(c){c.source===b&&c.data.xdArbiterAck&&(/\.facebook\.(com|net)$/.test(c.origin)&&/^https:/.test(c.origin)?e===!1&&(e=!0,d("Log").debug("initXdArbiter got xdArbiterAck from "+c.origin),a(c.origin)):d("Log").error("xdAbiterAck was not from Facebook: ",c.origin))},!1);b.postMessage({xdArbiterSyn:!0},"*");c=window.setInterval(function(){!e&&f>0?(f--,d("Log").debug("resending xdArbiterSyn"),b.postMessage({xdArbiterSyn:!0},"*")):window.clearInterval(c)},200)}g["default"]=a},98);c.__d("MPNSingletonProvider",[],function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=null,this.$2=a}var b=a.prototype;b.get=function(){this.$1==null&&(this.$1=this.$2());return this.$1};b.clear=function(){this.$1=null};return a}(),f["default"]=a},66);c.__d("sdk.DocumentTitle",[],function(b,c,d,e,f,g){var h=document.title,i=null,a=1500,j=null,k=!1;function l(){i!==null?k?n():m(i):(clearInterval(j),j=null,n())}function m(a){document.title=a,k=!0}function n(){o(h),k=!1}function b(){return h}function o(a){document.title=a}function c(b){i=b;j===null&&(j=setInterval(l,a));return{stop:function(){i=null}}}g.get=b;g.set=o;g.blink=c},66);c.__d("sdk.cp.Constants",["MPNLocalState","UrlMap","sdk.Runtime"],function(a,b,c,d,e,f,g){"use strict";a=c("sdk.Runtime").getIsVersioned()?d("UrlMap").resolve("www")+"/"+c("sdk.Runtime").getVersion()+"/plugins/customer_chat/bubble":d("UrlMap").resolve("www")+"/plugins/customer_chat/bubble",b=c("sdk.Runtime").getIsVersioned()?d("UrlMap").resolve("social_plugin")+"/"+c("sdk.Runtime").getVersion()+"/customer_chat/bubble":d("UrlMap").resolve("social_plugin")+"/customer_chat/bubble",e={attribute:{alignment:"alignment",mobilePath:"mobile_path",desktopBottomSpacing:"desktop_bottom_spacing"},path:{landingPage:"/",welcomePage:"/welcome",bubble:"/bubble",itp:"/itpcontinue"},localStateKey:d("MPNLocalState").LOCAL_STATE_KEY,animationEvents:["animationend","mozAnimationEnd","MSAnimationEnd","oAnimationEnd","webkitAnimationEnd"],blankFrameURL:a,blankFrameNewDomainURL:b},g["default"]=e},98);c.__d("sdk.cp.Actions",["DOMEventListener","MPNExplicitUserInteractions","MPNLocalState","MPNSingletonProvider","sdk.DOM","sdk.DocumentTitle","sdk.URI","sdk.WebStorage","sdk.cp.Constants"],function(a,b,c,d,f,g,h){"use strict";var i=function(){function a(){}var b=a.prototype;b.reloadIframe=function(a,b){var e;if(a==null)return;var f=new(c("sdk.URI"))(a.src),i=f.getQueryData();i.local_state=(e=d("sdk.WebStorage").getLocalStorage())==null?void 0:e.getItem(c("sdk.cp.Constants").localStateKey);i.request_time=Date.now();(b==="true"||this.getExplicitUserInteractionFlag())&&(i.has_explicit_interaction="1");i.is_implicit_reload="1";f.setQueryData(i);a.src=f.valueOf()};b.getExplicitUserInteractionFlag=function(){var a=d("sdk.WebStorage").getLocalStorage(),b=null;if(a!=null)try{b=a.getItem(d("MPNLocalState").LOCAL_STATE_KEY)}catch(a){return!1}if(b!=null)try{a=e("JSON","parse",!1,b);return d("MPNExplicitUserInteractions").hasUserInteraction(a==null?void 0:a.euit)}catch(a){return!1}return!1};b.setDialogAppearance=function(a,b){if(a==null)return;var c=b.height,e=b.boxShadow,f=b.margin,i=b.width;b=b.bottom;e!=null&&d("sdk.DOM").setStyle(a,"boxShadow",e);f!=null&&d("sdk.DOM").setStyle(a,"margin",f);c!=null&&d("sdk.DOM").setStyle(a,"height",c);i!=null&&d("sdk.DOM").setStyle(a,"width",i);b!=null&&d("sdk.DOM").setStyle(a,"bottom",b)};b.blinkPageTitle=function(a){var b=this;a!=null?(this.$2(),this.$1=d("sdk.DocumentTitle").blink(a),c("DOMEventListener").add(window,"focus",function(a){b.$2()})):this.$1&&a==null&&this.$2()};b.$2=function(){this.$1!=null&&(this.$1.stop(),this.$1=null)};return a}();a=new(c("MPNSingletonProvider"))(function(){return new i()});b=a.get();h["default"]=b},98);c.__d("sdk.cp.Animation",["sdk.DOM","sdk.UA","sdk.cp.Constants"],function(a,b,c,d,e,f,g){"use strict";function a(a){if(!a)return;var b=d("sdk.DOM").getAttr(a,c("sdk.cp.Constants").attribute.alignment);a=d("sdk.DOM").getAttr(a,c("sdk.cp.Constants").attribute.mobilePath);var e=c("sdk.UA").mobile(),f;if(e)switch(a){case c("sdk.cp.Constants").path.landingPage:return"fb_mpn_mobile_landing_page_slide_up";case c("sdk.cp.Constants").path.welcomePage:case c("sdk.cp.Constants").path.bubble:case c("sdk.cp.Constants").path.itp:return null;default:return"fb_mpn_mobile_bounce_in"}else switch(b){case"left":f="fb_customer_chat_bounce_in_from_left";break;case"right":default:f="fb_customer_chat_bounce_in_v2"}return f}function b(a){if(!a)return;var b=d("sdk.DOM").getAttr(a,c("sdk.cp.Constants").attribute.alignment);a=d("sdk.DOM").getAttr(a,c("sdk.cp.Constants").attribute.mobilePath);var e=c("sdk.UA").mobile(),f;if(e)switch(a){case c("sdk.cp.Constants").path.landingPage:return b==="left"?"fb_mpn_mobile_landing_page_slide_out_from_left":"fb_mpn_mobile_landing_page_slide_out";case c("sdk.cp.Constants").path.bubble:return"fb_mpn_mobile_bounce_out_v2";default:return"fb_mpn_mobile_bounce_out"}else switch(b){case"left":f="fb_customer_chat_bounce_out_from_left";break;case"right":default:f="fb_customer_chat_bounce_out_v2"}return f}g.iframeBounceInAnimation=a;g.iframeBounceOutAnimation=b},98);c.__d("sdk.cp.Storage",["MPNSingletonProvider","sdk.WebStorage","sdk.cp.Constants"],function(a,b,c,d,g,h,i){"use strict";var j=function(){function a(){}var b=a.prototype;b.setState=function(a){var b=d("sdk.WebStorage").getLocalStorageForRead();if(!b)return;try{if(a==null)b.removeItem(c("sdk.cp.Constants").localStateKey);else{var h=b.getItem(c("sdk.cp.Constants").localStateKey);h==null?b.setItem(c("sdk.cp.Constants").localStateKey,e("JSON","stringify",!1,e("JSON","parse",!1,a))):(h=e("JSON","parse",!1,h),a=e("JSON","parse",!1,a),b.setItem(c("sdk.cp.Constants").localStateKey,e("JSON","stringify",!1,f["extends"]({},h,a))))}}catch(a){return}};b.getStateJSON=function(){var a=d("sdk.WebStorage").getLocalStorageForRead();if(!a)return"{}";a=a.getItem(c("sdk.cp.Constants").localStateKey);return a==null?"{}":e("JSON","stringify",!1,e("JSON","parse",!1,a))};return a}();a=new(c("MPNSingletonProvider"))(function(){return new j()});b=a.get();i["default"]=b},98);c.__d("sdk.XFBML.CustomerChatNew",["ChatPluginSDKPreLoggingUtils","DOMEventListener","IframePluginClass","Log","MPNExplicitUserInteractions","MPNLocalState","QueryString","UrlMap","getFacebookOriginForTarget","performanceAbsoluteNow","sdk.Content","sdk.DOM","sdk.DialogUtils","sdk.Event","sdk.UA","sdk.WebStorage","sdk.XD","sdk.XFBML.CustomerChatWrapper","sdk.cp.Actions","sdk.cp.Animation","sdk.cp.Constants","sdk.cp.Storage","sdk.createIframe"],function(a,b,c,d,g,h,i){"use strict";a=function(a){f.inheritsLoose(b,a);function b(b,c,f,h){var i;i=a.call(this,b,c,f,h)||this;i.$CustomerChat1=null;i.$CustomerChat2=null;i.$CustomerChat3=null;i.$CustomerChat4=null;i.$CustomerChat5=null;i.$CustomerChat6=null;i.$CustomerChat7=null;i.$CustomerChat8=null;i.$CustomerChat9=null;i.$CustomerChat10=null;i.$CustomerChat11=null;i.$CustomerChat12=!1;i.$CustomerChat13=null;i.$CustomerChat14=!1;i.$CustomerChat15=!1;i.show=function(a){a===void 0&&(a=!0),i.$CustomerChat15=!1,i.$CustomerChat1!=null&&d("sdk.DOM").setStyle(i.$CustomerChat1,"display","inline"),a&&i.$CustomerChat30(i.$CustomerChat4),d("sdk.Event").fire("customerchat.show"),i.$CustomerChat34("show")};i.hide=function(){i.$CustomerChat15=!0,i.$CustomerChat1!=null&&d("sdk.DOM").setStyle(i.$CustomerChat1,"display","none"),i.$CustomerChat29(i.$CustomerChat4),d("sdk.Event").fire("customerchat.hide"),i.$CustomerChat34("hide")};i.showDialog=function(){i.$CustomerChat1!=null&&d("sdk.DOM").setStyle(i.$CustomerChat1,"display","inline"),i.$CustomerChat30(i.$CustomerChat4),i.$CustomerChat34("showDialog")};i.hideDialog=function(){i.$CustomerChat29(i.$CustomerChat4),i.$CustomerChat34("hideDialog")};i.update=function(a){var b;d("sdk.XD").sendToFacebook((b=i.$CustomerChat5)!=null?b:"",{method:"updateCustomerChat",params:e("JSON","stringify",!1,a||{})});i.$CustomerChat34("update")};d("sdk.DOM").addCss(b,"fb_invisible_flow");d("sdk.DOM").remove(b);d("sdk.Content").append(b);i.$CustomerChat16=Boolean(h.should_use_new_domain);i.$CustomerChat17();d("sdk.Event").fire("customerchat.load");i.$CustomerChat18();d("ChatPluginSDKPreLoggingUtils").preLogging(i.$CustomerChat16,"chat_plugin_sdk_dialog_iframe_create",i.params,!1);return i}var g=b.prototype;g.$CustomerChat17=function(){var a=d("sdk.WebStorage").getLocalStorage(),b=null;if(a!=null)try{b=a.getItem(d("MPNLocalState").LOCAL_STATE_KEY)}catch(a){d("Log").warn("Failed to access localStorage")}b!=null&&e("Object","assign",!1,this.params,{local_state:b});if(b!=null)try{a=e("JSON","parse",!1,b),d("MPNExplicitUserInteractions").hasUserInteraction(a==null?void 0:a.euit)&&e("Object","assign",!1,this.params,{has_explicit_interaction:1})}catch(a){d("Log").warn("Invalid local state")}b=c("performanceAbsoluteNow")();e("Object","assign",!1,this.params,{request_time:b});a=this.$CustomerChat16?d("UrlMap").resolve("social_plugin")+"/"+this.tag+".php?":d("UrlMap").resolve("www")+"/plugins/"+this.tag+".php?";this.iframeOptions.url=a+c("QueryString").encode(this.params);this.iframeOptions.title=""};g.$CustomerChat18=function(){var a=this;this.subscribe("render",function(){d("ChatPluginSDKPreLoggingUtils").preLogging(a.$CustomerChat16,"chat_plugin_sdk_dialog_iframe_load",a.params)});this.subscribe("xd.mpn.storeState",function(a){c("sdk.cp.Storage").setState(a.state)});this.subscribe("xd.mpn.getState",function(b){b=c("sdk.cp.Storage").getStateJSON(),b={name:"mpnDidFetchState",params:b},a.$CustomerChat19(b),a.$CustomerChat20(b)});this.subscribe("xd.mpn.setupIconIframe",function(b){a.$CustomerChat21(b)});this.subscribe("xd.mpn.setupDialogIframe",function(b){a.$CustomerChat22(b)});this.subscribe("xd.mpn.toggleDialogVisibility",function(b){a.$CustomerChat23(b)});this.subscribe("xd.mpn.toggleGreetingDialogVisibility",function(b){a.$CustomerChat24(b)});this.subscribe("xd.mpn.updateGreetingAppearance",function(b){c("sdk.cp.Actions").setDialogAppearance(a.$CustomerChat10,b)});this.subscribe("xd.mpn.updateDialogAppearance",function(b){c("sdk.cp.Actions").setDialogAppearance(a.iframe,b)});this.subscribe("xd.mpn.updateIconAppearance",function(b){c("sdk.cp.Actions").setDialogAppearance(a.$CustomerChat3,b)});this.subscribe("xd.mpn.reload",function(b){c("sdk.cp.Actions").reloadIframe(a.iframe,b.hasExplicitInteraction)});this.subscribe("xd.mpn.updatePageTitle",function(a){c("sdk.cp.Actions").blinkPageTitle(a.title)});this.subscribe("xd.mpn.navigateToWelcomePage",function(b){a.$CustomerChat25(b.isHidden)});d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEvent.subscribe(d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEventType.SHOW,this.show);d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEvent.subscribe(d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEventType.HIDE,this.hide);d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEvent.subscribe(d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEventType.SHOW_DIALOG,this.showDialog);d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEvent.subscribe(d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEventType.HIDE_DIALOG,this.hideDialog);d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEvent.subscribe(d("sdk.XFBML.CustomerChatWrapper").CustomerChatInternalEventType.UPDATE,this.update)};g.$CustomerChat21=function(b){var f=this;this.$CustomerChat1&&d("sdk.DOM").remove(this.$CustomerChat1);var g=b.frameName,h=b.iconSVG,i=d("sdk.DialogUtils").setupNewDialog(),j=e("JSON","parse",!1,b.cssText),a=document.createElement("div");h!=null&&(d("sdk.DOM").html(a,h),e("Object","assign",!1,a.style,j),a.style.boxShadow="none",d("sdk.Content").append(a,i.contentRoot));var k="blank_"+g;this.$CustomerChat1=i.dialogElement;this.$CustomerChat3=c("sdk.createIframe")({url:this.$CustomerChat16?c("sdk.cp.Constants").blankFrameNewDomainURL:c("sdk.cp.Constants").blankFrameURL,name:k,root:i.contentRoot,tabindex:-1,width:60,style:j,"data-testid":"bubble_iframe",onload:function(){d("ChatPluginSDKPreLoggingUtils").preLogging(f.$CustomerChat16,"chat_plugin_sdk_icon_iframe_load",f.params),f.$CustomerChat2=k,f.$CustomerChat26(),f.$CustomerChat27(),window.setTimeout(function(){d("sdk.DOM").remove(a)},100)}});this.$CustomerChat1&&this.$CustomerChat1.setAttribute(c("sdk.cp.Constants").attribute.alignment,b.alignment);this.$CustomerChat1&&d("sdk.Content").append(this.$CustomerChat1);var l="availabilityStatus_"+g;this.$CustomerChat8=c("sdk.createIframe")({url:this.$CustomerChat16?c("sdk.cp.Constants").blankFrameNewDomainURL:c("sdk.cp.Constants").blankFrameURL,name:l,root:i.contentRoot,tabindex:-1,style:e("JSON","parse",!1,b.availabilityStatusCssText),"data-testid":"availabilityStatus_iframe",onload:function(){f.$CustomerChat9=l,f.$CustomerChat26(),f.$CustomerChat27()}});d("sdk.Content").append(this.$CustomerChat8,i.contentRoot);var m="unread_"+g;this.$CustomerChat6=c("sdk.createIframe")({url:this.$CustomerChat16?c("sdk.cp.Constants").blankFrameNewDomainURL:c("sdk.cp.Constants").blankFrameURL,name:m,root:i.contentRoot,tabindex:-1,style:e("JSON","parse",!1,b.unreadCountCssText),"data-testid":"unread_iframe",onload:function(){f.$CustomerChat7=m,f.$CustomerChat26(),f.$CustomerChat27()}});d("sdk.Content").append(this.$CustomerChat6,i.contentRoot);h=c("sdk.UA").mobile();if(!h){var n="greeting_"+g;this.$CustomerChat10=c("sdk.createIframe")({url:this.$CustomerChat16?c("sdk.cp.Constants").blankFrameNewDomainURL:c("sdk.cp.Constants").blankFrameURL,name:n,root:i.contentRoot,tabindex:-1,style:e("JSON","parse",!1,b.greetingCssText),"data-testid":"greeting_iframe",onload:function(){f.$CustomerChat11=n,f.$CustomerChat26(),f.$CustomerChat27()}});d("sdk.Content").append(this.$CustomerChat10,i.contentRoot)}};g.$CustomerChat27=function(){this.$CustomerChat2!==null&&this.$CustomerChat7!==null&&this.$CustomerChat9!==null&&this.$CustomerChat5!==null&&this.$CustomerChat11!==null&&!this.$CustomerChat12&&(this.$CustomerChat12=!0,this.inform("iframes_loaded"))};g.$CustomerChat26=function(){var a;this.$CustomerChat19({name:"bubbleFrameLoaded",frameName:this.$CustomerChat2,unreadCountFrameName:this.$CustomerChat7,availabilityStatusIframeName:this.$CustomerChat9,greetingIframeName:this.$CustomerChat11,iconSrc:(a=this.$CustomerChat3)==null?void 0:a.src,unreadSrc:(a=this.$CustomerChat6)==null?void 0:a.src,request_time:this.params.request_time,log_id:this.params.log_id})};g.$CustomerChat25=function(a){this.$CustomerChat19({name:"navigateToWelcomePage",isHidden:a})};g.$CustomerChat22=function(a){var b=a.cssText,e=a.mobilePath,f=a.isDialogHidden;a=a.desktopBottomSpacing;this.$CustomerChat1&&(e&&this.$CustomerChat1.setAttribute(c("sdk.cp.Constants").attribute.mobilePath,e),a&&this.$CustomerChat1.setAttribute(c("sdk.cp.Constants").attribute.desktopBottomSpacing,a.toString()));this.$CustomerChat14=f==="true";this.iframe&&(this.iframe.setAttribute("data-testid","dialog_iframe"),this.iframe.style.cssText=b);this.$CustomerChat4=this.iframe;this.$CustomerChat5=this.iframe.name;this.$CustomerChat27();a=c("sdk.UA").mobile();a&&!this.$CustomerChat14&&(e==c("sdk.cp.Constants").path.landingPage&&(f=d("sdk.cp.Animation").iframeBounceInAnimation(this.$CustomerChat1),f!=null&&d("sdk.DOM").addCss(this.$CustomerChat4,f)),e!=c("sdk.cp.Constants").path.landingPage&&e!=c("sdk.cp.Constants").path.bubble&&this.$CustomerChat28());this.$CustomerChat15&&this.hide()};g.$CustomerChat23=function(a){a=a.shouldHide,a==="true"?this.$CustomerChat29(this.iframe):this.$CustomerChat30(this.iframe)};g.$CustomerChat24=function(a){a=a.shouldHide,a==="true"?this.$CustomerChat31(this.$CustomerChat10):this.$CustomerChat32(this.$CustomerChat10)};g.getParams=function(){return{allow_guests:"bool",attribution:"string",greeting_dialog_display:"string",greeting_dialog_delay:"string",logged_in_greeting:"string",logged_out_greeting:"string",minimized:"bool",page_id:"string",theme_color:"string",override:"string",attribution_version:"string",is_loaded_by_facade:"bool",current_url:"string",log_id:"string",request_time:"px"}};g.$CustomerChat33=function(a,b){var d=this,e=window.frames[a],i=function(a){e==null?void 0:e.postMessage(f["extends"]({},b),a)};this.$CustomerChat13===null?c("getFacebookOriginForTarget")(function(a){d.$CustomerChat13=a,i(d.$CustomerChat13)},e):i(this.$CustomerChat13)};g.$CustomerChat20=function(a){var b;this.$CustomerChat33((b=this.$CustomerChat2)!=null?b:"",a)};g.$CustomerChat19=function(a){var b;this.$CustomerChat33((b=this.$CustomerChat5)!=null?b:"",a)};g.$CustomerChat34=function(a){this.$CustomerChat19({name:"CustomerChat.SDK.Called",event:a})};g.$CustomerChat28=function(){var a="fb_new_ui_mobile_overlay_active";d("sdk.DOM").addCss(document.body,a)};g.$CustomerChat30=function(a){if(!a)return;if(this.$CustomerChat14){this.$CustomerChat14=!1;var b=d("sdk.cp.Animation").iframeBounceInAnimation(this.$CustomerChat1),e=d("sdk.cp.Animation").iframeBounceOutAnimation(this.$CustomerChat1);e!=null&&d("sdk.DOM").removeCss(a,e);b!=null&&d("sdk.DOM").addCss(a,b);c("sdk.UA").mobile()?(d("sdk.DOM").setStyle(a,"maxHeight","100%"),d("sdk.DOM").setStyle(a,"height","100%"),d("sdk.DOM").setStyle(a,"width","100%")):(e=this.$CustomerChat1&&d("sdk.DOM").getAttr(this.$CustomerChat1,c("sdk.cp.Constants").attribute.desktopBottomSpacing),b=e==null?"80":Number(e)+60,d("sdk.DOM").setStyle(a,"maxHeight","calc(100% - "+b+"px)"),d("sdk.DOM").setStyle(a,"minHeight","300px"));this.$CustomerChat19({name:"CustomerChat.isDialogHidden",params:{is_dialog_hidden:!1}});this.$CustomerChat20({name:"CustomerChat.isDialogHidden",params:{is_dialog_hidden:!1}});d("sdk.Event").fire("customerchat.dialogShow")}};g.$CustomerChat29=function(a){var b=this;if(!a)return;if(!this.$CustomerChat14){this.$CustomerChat14=!0;var e=d("sdk.cp.Animation").iframeBounceInAnimation(this.$CustomerChat1),f=d("sdk.cp.Animation").iframeBounceOutAnimation(this.$CustomerChat1);e!=null&&d("sdk.DOM").removeCss(a,e);f!=null&&d("sdk.DOM").addCss(a,f);var i={};c("sdk.cp.Constants").animationEvents.forEach(function(e){var f=function(e){b.$CustomerChat14&&(d("sdk.DOM").setStyle(a,"maxHeight","0"),d("sdk.DOM").setStyle(a,"minHeight","0"),c("sdk.cp.Constants").animationEvents.forEach(function(b){i[b]&&(d("DOMEventListener").remove(a,b,i[b]),delete i[b])}))};i[e]=f;d("DOMEventListener").add(a,e,f)});this.$CustomerChat19({name:"CustomerChat.isDialogHidden",params:{is_dialog_hidden:!0}});this.$CustomerChat20({name:"CustomerChat.isDialogHidden",params:{is_dialog_hidden:!0}})}d("sdk.Event").fire("customerchat.dialogHide")};g.$CustomerChat31=function(a){if(!a)return;d("sdk.DOM").setStyle(a,"maxHeight","0");d("sdk.DOM").setStyle(a,"minHeight","0")};g.$CustomerChat32=function(a){if(!a)return;d("sdk.DOM").setStyle(a,"maxHeight","calc(100% - 80px)")};return b}(c("IframePluginClass")),i["default"]=a},98);c.__d("sdk.XFBML.CustomerChatWrapper",["$InternalEnum","CORSRequest","UrlMap","sdk.Observable","sdk.XFBML.ChatDOM"],function(a,b,c,d,e,g,h){a=b("$InternalEnum")({SHOW:"SHOW",HIDE:"HIDE",SHOW_DIALOG:"SHOW_DIALOG",HIDE_DIALOG:"HIDE_DIALOG",UPDATE:"UDPATE"});e=new(d("sdk.Observable").Observable)();g=function(a,b,c,d){return new i(a,b,c,d)};var i=function(b){f.inheritsLoose(a,b);function a(a,c,d,e){var f;f=b.call(this)||this;f.$CustomerChatWrapper2=a;f.$CustomerChatWrapper3=c;f.$CustomerChatWrapper4=d;f.$CustomerChatWrapper5=e;return f}var e=a.prototype;e.process=function(){var a=this,b=d("UrlMap").resolve("social_plugin")+"/new_domain_gating/";c("CORSRequest").execute(b,"get",{page_id:this.$CustomerChatWrapper5.page_id,endpoint:this.$CustomerChatWrapper4},function(b){a.$CustomerChatWrapper5.should_use_new_domain=b.should_use_new_domain,a.$CustomerChatWrapper1=new(c("sdk.XFBML.ChatDOM"))(a.$CustomerChatWrapper2,a.$CustomerChatWrapper3,a.$CustomerChatWrapper4,a.$CustomerChatWrapper5),a.$CustomerChatWrapper1.subscribe("render",function(){a.inform("render")}),a.$CustomerChatWrapper1.process()})};return a}(d("sdk.Observable").Observable);h.CustomerChatInternalEventType=a;h.CustomerChatInternalEvent=e;h.CustomerChatWrapperPlugin=g},98);c.__d("sdk.XFBML.LWIAdsCreation",["IframePlugin","sdk.createIframe"],function(a,b,c,d,e,f,g){"use strict";a=c("IframePlugin").extend({constructor:function(a,b,c,d){this.parent(a,b,c,d),this._setUpSubscriptions()},getParams:function(){return{fbe_extras:"string",fbe_redirect_uri:"string",fbe_scopes:"string",fbe_state:"string",hide_manage_button:"bool",hide_explore_more_options:"bool",preferred_ad_options:"string"}},_setUpSubscriptions:function(){var a=this;this.subscribe("xd.lwiadscreation.load",function(b){a._createIframe(b)})},_createIframe:function(a){c("sdk.createIframe")({url:a.iframeURL,name:"LWIAdsCreationRootIframe",root:document.body,height:300,width:950})}}),b=a,g["default"]=b},98);c.__d("sdk.XFBML.LWIAdsInsights",["IframePlugin","sdk.createIframe"],function(a,b,c,d,e,f,g){"use strict";a=c("IframePlugin").extend({constructor:function(a,b,c,d){this.parent(a,b,c,d),this._setUpSubscriptions()},getParams:function(){return{fbe_extras:"string",fbe_redirect_uri:"string",fbe_scopes:"string",fbe_state:"string"}},_setUpSubscriptions:function(){var a=this;this.subscribe("xd.lwiadsinsights.load",function(b){a._createIframe(b)})},_createIframe:function(a){c("sdk.createIframe")({url:a.iframeURL,name:"LWIAdsInsightsRootIframe",root:document.body,height:800,width:1050})}}),b=a,g["default"]=b},98);c.__d("sdk.SVGLogos",["guid"],function(b,c,d,f,g,h,i){"use strict";var j="M90,212v-75h-27v-31h27v-25q0,-40 40,-40q15,0 24,2v26h-14q-16,0 -16,16v21h30l-5,31h-27v75",a="a106 106,0,1,0,-32 0",k="a106 106,1,0,1,-32 0";function l(a,b){Object.getOwnPropertyNames(b).forEach(function(c){return a.setAttribute(c,b[c])});return a}function m(a,b,c){b=l(document.createElementNS("http://www.w3.org/2000/svg",b),c);a==null?void 0:a.appendChild(b);return b}b=function(a){a=m(null,"svg",e("Object","assign",!1,{viewBox:"0 0 100 100",preserveAspectRatio:"xMinYMin"},a));m(a,"line",{x1:"0",y1:"100",x2:"100",y2:"0","stroke-width":"12"});m(a,"line",{x1:"0",y1:"0",x2:"100",y2:"100","stroke-width":"12"});return a};c=function(b){b=m(null,"svg",e("Object","assign",!1,{viewBox:"0 0 213 213",preserveAspectRatio:"xMinYMin"},b));m(b,"path",{d:j+a,"class":"f_logo_circle"});m(b,"path",{d:j+k,"class":"f_logo_f"});return b};f=function(b){b=m(null,"svg",e("Object","assign",!1,{viewBox:"0 0 213 213",preserveAspectRatio:"xMinYMin"},b));m(b,"path",{d:j+a,"class":"f_logo_circle",fill:"white"});m(b,"path",{d:j+k,"class":"f_logo_f",fill:"white"});return b};g=function(a){a=m(null,"svg",e("Object","assign",!1,{viewBox:"-2 -2 104 104",preserveAspectRatio:"xMinYMin"},a));m(a,"rect",{x:"5",y:"5",width:"91",height:"91","stroke-width":"9",rx:"23","class":"ig_logo_body"});m(a,"circle",{cx:"77",cy:"23",r:"6","class":"ig_logo_flash"});m(a,"circle",{cx:"50",cy:"50",r:"21","stroke-width":"9","class":"ig_logo_lens"});return a};h=function(a){var b=d("guid")();a=m(null,"svg",e("Object","assign",!1,{viewBox:"-2 -2 104 104",preserveAspectRatio:"xMinYMin"},a));var c=m(a,"defs",{}),f=m(c,"mask",{id:b});m(f,"circle",{cx:"77",cy:"23",r:"6",fill:"white"});m(f,"circle",{cx:"50",cy:"50",r:"21","stroke-width":"9",stroke:"white"});m(f,"rect",{x:"5",y:"5",width:"91",height:"91","stroke-width":"9",rx:"23",stroke:"white",fill:"none"});f=m(c,"linearGradient",{id:"purplepink",x1:"0",x2:".15",y1:"0",y2:".6"});m(f,"stop",{offset:"12%","stop-color":"rgb(88,85,214)"});m(f,"stop",{offset:"85%","stop-color":"rgb(215,27,122)"});f=m(c,"radialGradient",{id:"yelloworange",cx:".35",cy:"1",r:"2"});m(f,"stop",{offset:"7%","stop-color":"rgb(252,215,114)"});m(f,"stop",{offset:"20%","stop-color":"rgb(244,102,37)"});m(f,"stop",{offset:"38%","stop-color":"rgb(225,37,122)","stop-opacity":"0"});m(a,"rect",{x:"1",y:"1",width:"99",height:"99","stroke-width":"0",rx:"23",fill:"url(#purplepink)",style:"mask: url(#"+b+")"});m(a,"rect",{x:"1",y:"1",width:"99",height:"99","stroke-width":"0",rx:"23",fill:"url(#yelloworange)",style:"mask: url(#"+b+")"});return a};i.close=b;i.facebook=c;i.facebookWhite=f;i.instagram=g;i.instagramColor=h},98);c.__d("sdk.SharedStringConstants",["sdk.fbt"],function(a,b,c,d,e,f,g){"use strict";a={continueWith:c("sdk.fbt")._("Continue with {facebook_app_name} or {instagram_app_name}"),continueWithShort:c("sdk.fbt")._("{facebook_app_name} or {instagram_app_name}"),loginButtonAriaLabel:c("sdk.fbt")._("Continue with Facebook or Instagram"),logout:c("sdk.fbt")._("Logout"),logoutButtonAriaLabel:c("sdk.fbt")._("Logout the current website"),titleText:c("sdk.fbt")._("Choose Account"),promptText:c("sdk.fbt")._("Which account would you like to use to log in?"),facebookText:c("sdk.fbt")._("Log in with Facebook"),facebookTextShort:c("sdk.fbt")._("Log in"),instagramText:c("sdk.fbt")._("Log in with Instagram"),disambiguationDialogAriaLabelText:c("sdk.fbt")._("Log in with Facebook or Instagram"),fbButtonText:c("sdk.fbt")._("Continue with Facebook"),igButtonText:c("sdk.fbt")._("Continue with Instagram")},g.buttonStringsFBT=a},98);c.__d("sdk.XFBML.ShadowDOMLoginButton",["DOMPlugin","UrlMap","sdk.Auth","sdk.Event","sdk.LoggingUtils","sdk.PluginUtils","sdk.Runtime","sdk.SVGLogos","sdk.SharedStringConstants","sdk.createIframe","sdk.ui"],function(b,c,d,g,h,i,j){var k={small:"11px",medium:"13px",large:"16px"},a={small:"20px",medium:"30px",large:"40px"},l="{facebook_app_name}";b=function(b){f.inheritsLoose(c,b);function c(a,c,l,m,n){a=b.call(this,a,c,l,m,n)||this;a.stateObservers=[];a.shadowCss=["css:fb.shadow.css.fb_login_button"];a.container=document.createElement("div");a.container.classList.add("fb_login_button_container");a.container.dir="auto";a.loginButtonText=a.updateLabel();a.fbLoginButton=document.createElement("button");a.borderRadius=a.updateRadius(a.params);a.fbLoginButton=a.createSingleButton(a.loginButtonText);a.createFBButton("fb-button-main-element",g("sdk.SharedStringConstants").buttonStringsFBT.logout,g("sdk.SharedStringConstants").buttonStringsFBT.logoutButtonAriaLabel,t,function(a){this.style.display=a.status==="connected"?"flex":"none"},e(function(a){d("sdk.Auth").logout(),a&&a.detail===0&&this.fbLoginButton&&this.fbLoginButton.style.display!=="none"&&this.fbLoginButton.focus()},"bind",!0,f.assertThisInitialized(a)));return a}var l=c.prototype;l.render=function(a){var b=this;this.updateDisplay({shouldHideDisambiguation:!0,status:d("sdk.Runtime").getLoginStatus()});g("sdk.Event").subscribe("auth.statusChange",function(a){a={shouldHideDisambiguation:!0,status:a.status,fxApp:a.loginSource},b.updateDisplay(a)});return this.container};l.createSingleButton=function(a){return this.createFBButton("fb-button-main-element",a,a,s,function(a){this.style.display=a.status==="connected"?"none":"flex"},e(function(a){a.stopPropagation(),g("sdk.LoggingUtils").logLoginEvent(this.params,g("sdk.LoggingUtils").logEventName.buttonClick+"_single_fb"),this.loginTrigger()},"bind",!0,this))};l.loginTrigger=function(){var a="";d("sdk.ui")({method:"permissions.oauth",display:"popup",scope:a},this.loginCb())};l.createFBButton=function(a,b,c,d,f,k){var l=document.createElement("button");l.classList.add(a);l.setAttribute("aria-label",c);a=document.createElement("span");a.classList.add("fb_button_label_element");a.classList.add("fb_button_label");this.applyStyles(l,this.params);this.use_continue_as===!0?a.append(this.createIframeOverlay(this.container,this.params)):d(this.params,b,a);l.appendChild(a);l.addEventListener("click",function(a){k(a),l.blur()});l.updateDisplay=e(f,"bind",!0,l);this.stateObservers.push(l);this.container.appendChild(l);return l};l.loginCb=function(){var a=this;return function(b){b.authResponse!=null&&b.status==="connected"?g("sdk.LoggingUtils").logLoginEvent(a.params,g("sdk.LoggingUtils").logEventName.loginSuccess+"_single_fb"):g("sdk.LoggingUtils").logLoginEvent(a.params,g("sdk.LoggingUtils").logEventName.loginCancel+"_single_fb")}};l.updateDisplay=function(a){this.stateObservers.forEach(function(b){return b.updateDisplay(a)})};l.updateLabel=function(){var a=this.params["button-type"]==="login_with"?g("sdk.SharedStringConstants").buttonStringsFBT.facebookText:g("sdk.SharedStringConstants").buttonStringsFBT.fbButtonText,b=q(this.params,a);this.params["button-type"]==="login_with"&&(a=b?a:g("sdk.SharedStringConstants").buttonStringsFBT.facebookTextShort);return a};l.updateRadius=function(a){var b;b=(b=g("sdk.PluginUtils").getVal(a,"layout"))!=null?b:"default";a=String(g("sdk.PluginUtils").getVal(a,"size"));a=a!==""?a:"small";a=a==="large"?"4px":"3px";return b==="rounded"?"20px":a};l.applyStyles=function(b,c){var d=String(g("sdk.PluginUtils").getVal(c,"size"));d=d!==""?d:"small";b.style.borderRadius=this.borderRadius;c=(c=g("sdk.PluginUtils").getVal(c,"width"))!=null?c:null;b.style.width=m(d,c).toString();b.style.fontSize=k[d];b.style.height=a[d];b.style.backgroundColor="rgb(26,119,242)";b.style.color="#fff";b.style.border="0";b.style.fontWeight="bold"};l.createIframeOverlay=function(a,b){var c,e=String(g("sdk.PluginUtils").getVal(b,"size"));e=e!==""?e:"small";var f=d("sdk.Runtime").getClientID(),l=String(g("sdk.PluginUtils").getVal(b,"layout"));l=l!==""?l:"default";c=(c=g("sdk.PluginUtils").getVal(b,"width"))!=null?c:null;c=m(e,c).toString();f=g("UrlMap").resolve("www")+("/plugins/login_button_overlay/"+f+"/"+c+"/"+e+"/"+l+"/");l={root:a,url:f,borderRadius:(e=g("sdk.PluginUtils").getVal(b,"layout"))!=null?e:"default",width:c};a=d("sdk.createIframe")(l);a.classList.add("fb-iframe-overlay");return a};return c}(g("DOMPlugin").DOMPlugin);function m(a,b){a=a!=null?a:"small";return b===""||b==null?o(a):n(a,b)}function n(a,b){b=isNaN(b)?0:Number(b);var c=o(a),d=p(a);return b<o(a)?c:b>p(a)?d:b}function o(a){switch(a){case"large":return 240;case"medium":return 200;default:return 200}}function p(a){switch(a){case"large":return 400;case"medium":return 320;default:return 300}}function q(a,b){var c;b=b.replace(/\s?{facebook_app_name}\s?/,"");c=(c=g("sdk.PluginUtils").getVal(a,"width"))!=null?c:null;a=(a=g("sdk.PluginUtils").getVal(a,"size"))!=null?a:"large";a=m(a,c);c=r(b)?r(b):0;return c<a}function r(a){var b=r.canvas||(r.canvas=document.createElement("canvas"));b=b.getContext("2d");b=b==null?void 0:b.measureText(a);return b==null?void 0:b.width}function s(a,b,c){var d=document.createElement("span"),e=u();e.classList.add("single_button_svg_logo");c.append(e);d.textContent=q(a,b)?b:"";c.append(d)}function t(a,b,c){c.textContent="";a=b.search(l);var d=a+l.length,e=Math.min(a),f=Math.min(d);a=Math.max(a);d=Math.max(d);var m=u(),n=document.createElement("span");n.style.whiteSpace="nowrap";n.append(b.substring(0,e));e=document.createElement("span");e.style.whiteSpace="nowrap";e.append(b.substring(f,a));f=document.createElement("span");f.style.whiteSpace="nowrap";f.append(b.substring(d,b.length));c.append(m);c.append(n);c.append(e);c.append(f)}function u(){return g("sdk.SVGLogos").facebookWhite({"class":"fb_button_svg_logo login_fb_logo"})}j["default"]=b},98);c.__d("sdk.XFBML.MessengerCheckbox",["FB","IframePluginClass","Log","PluginAttrTypes","sdk.XD"],function(a,b,c,d,e,g,h){"use strict";function i(a){var b=a.app_id,c=a.page_id;a=a.user_ref;c='[page_id="'+c+'"][messenger_app_id="'+b+'"][user_ref="'+a+'"] iframe';b=document.querySelector(c);return(b==null?void 0:b.getAttribute("name"))||null}c("FB").provide("CheckboxPlugin",{confirm:function(a){var b=a.app_id,c=a.page_id,e=a.user_ref,f=i(a);if(b==null){d("Log").warn("app_id is a required parameter.");return}if(c==null){d("Log").warn("page_id is a required parameter.");return}if(e==null){d("Log").warn("user_ref is a required parameter.");return}if(f==null){d("Log").warn("No matching checkbox for the app_id, page_id, and user_ref given.");return}d("sdk.XD").sendToFacebook(f,{method:"confirmCheckboxSubmission",params:a})}});a=function(a){f.inheritsLoose(b,a);function b(b,c,d,e){return a.call(this,b,c,d,e,{fluid:!0,full_width:!0,mobile_fullsize:!1})||this}var c=b.prototype;c.getParams=function(){return{messenger_app_id:d("PluginAttrTypes").string,page_id:d("PluginAttrTypes").string,pixel_id:d("PluginAttrTypes").string,prechecked:d("PluginAttrTypes").bool,allow_login:d("PluginAttrTypes").bool,size:d("PluginAttrTypes").string,origin:d("PluginAttrTypes").string,user_ref:d("PluginAttrTypes").string,identity_match:d("PluginAttrTypes").string,center_align:d("PluginAttrTypes").bool,opt_in_type:d("PluginAttrTypes").string,promotional_frequency:d("PluginAttrTypes").string,promotional_topic:d("PluginAttrTypes").string}};return b}(c("IframePluginClass"));h["default"]=a},98);c.__d("sdk.XFBML.MessengerCheckboxWrapper",["CORSRequest","UrlMap","sdk.Observable","sdk.XFBML.MessengerCheckbox"],function(a,b,c,d,e,g,h){a=function(d,a,b,c){return new i(d,a,b,c)};var i=function(b){f.inheritsLoose(a,b);function a(a,c,d,e){var f;f=b.call(this)||this;f.$MessengerCheckboxWrapper2=a;f.$MessengerCheckboxWrapper3=c;f.$MessengerCheckboxWrapper4=d;f.$MessengerCheckboxWrapper5=e;return f}var e=a.prototype;e.process=function(){var a=this,b=d("UrlMap").resolve("social_plugin")+"/new_domain_gating/";c("CORSRequest").execute(b,"get",{page_id:this.$MessengerCheckboxWrapper5.page_id,endpoint:this.$MessengerCheckboxWrapper4},function(b){a.$MessengerCheckboxWrapper5.should_use_new_domain=b.should_use_new_domain,a.$MessengerCheckboxWrapper1=new(c("sdk.XFBML.MessengerCheckbox"))(a.$MessengerCheckboxWrapper2,a.$MessengerCheckboxWrapper3,a.$MessengerCheckboxWrapper4,a.$MessengerCheckboxWrapper5),a.$MessengerCheckboxWrapper1.subscribe("render",function(){a.inform("render")}),a.$MessengerCheckboxWrapper1.process()})};return a}(d("sdk.Observable").Observable);b=a;h["default"]=b},98);c.__d("sdk.XFBML.MessengerMessageUs",["IframePluginClass","PluginAttrTypes"],function(a,b,c,d,e,g,h){"use strict";a=function(a){f.inheritsLoose(b,a);function b(b,c,d,e){return a.call(this,b,c,d,e,{fluid:!1,full_width:!1,mobile_fullsize:!0})||this}var c=b.prototype;c.getParams=function(){return{messenger_app_id:d("PluginAttrTypes").string,page_id:d("PluginAttrTypes").string,color:d("PluginAttrTypes").string,size:d("PluginAttrTypes").string}};return b}(c("IframePluginClass")),h["default"]=a},98);c.__d("sdk.XFBML.MessengerMessageUsWrapper",["sdk.Observable","sdk.XFBML.MessengerMessageUs"],function(a,b,c,d,e,g,h){a=function(d,a,b,c){return new i(d,a,b,c)};var i=function(b){f.inheritsLoose(a,b);function a(a,c,d,e){var f;f=b.call(this)||this;f.$MessengerMessageUsWrapper2=a;f.$MessengerMessageUsWrapper3=c;f.$MessengerMessageUsWrapper4=d;f.$MessengerMessageUsWrapper5=e;return f}var d=a.prototype;d.process=function(){var a=this;this.$MessengerMessageUsWrapper5.should_use_new_domain=!0;this.$MessengerMessageUsWrapper1=new(c("sdk.XFBML.MessengerMessageUs"))(this.$MessengerMessageUsWrapper2,this.$MessengerMessageUsWrapper3,this.$MessengerMessageUsWrapper4,this.$MessengerMessageUsWrapper5);this.$MessengerMessageUsWrapper1.subscribe("render",function(){a.inform("render")});this.$MessengerMessageUsWrapper1.process()};return a}(d("sdk.Observable").Observable);b=a;h["default"]=b},98);c.__d("sdk.XFBML.Save",["IframePlugin","UrlMap","sdk.Content","sdk.DOM","sdk.DialogUtils","sdk.Event","sdk.Runtime","sdk.UA","sdk.XD","sdk.createIframe"],function(a,b,c,d,f,g,h){"use strict";var i;a=c("IframePlugin").extend({constructor:function(b,f,j,g){var h=this;this.parent(b,f,j,g);var a=c("sdk.UA").mobile();this.subscribe("xd.savePluginGetBlankIframe",function(b){var c,f=function(a){a&&d("sdk.DOM").removeCss(a,"fb_invisible")},j=function(a){a&&d("sdk.DOM").addCss(a,"fb_invisible")};a&&(c=d("sdk.DialogUtils").setupNewDarkOverlay(),j(c),d("sdk.Content").append(c),d("sdk.DialogUtils").addDoubleClickAction(c,function(){return k.forEach(j)},5e3));var g=h.setupNewIframeDialog(e("JSON","parse",!1,b.data),b.fromIframe);j(g);d("sdk.Content").append(g);var k=[g,c],l=function(){k.forEach(j),d("sdk.DialogUtils").onDialogHideCleanup(a),window.clearInterval(i)},m;h.subscribe("xd.savePluginShowIframe",function(){d("sdk.Event").fire("savePlugin:hideDialog"),k.forEach(f),h.positionOnScreen(g,c),!a&&!m&&(m=d("sdk.DialogUtils").addIdleDesktopAction(g,l,7e3))});h.subscribe("xd.savePluginHideIframe",function(){return l()});d("sdk.Event").subscribe("savePlugin:hideDialog",function(){return l()});var n=window.setInterval(function(){var a=document.getElementsByName(b.fromIframe);a.length===0&&(window.clearInterval(n),l(),k.forEach(function(a){a&&a.parentNode.removeChild(a)}))},500)})},positionOnScreen:function(a,b){var e=c("sdk.UA").mobile();if(e){var f=function(a,b){b!=null&&d("sdk.DialogUtils").setDialogPositionToCenter(b,e),d("sdk.DialogUtils").setDialogPositionToCenter(a,e)};f(a,b);d("sdk.DialogUtils").addMobileOrientationChangeAction(function(c){f(a,b)});i=window.setInterval(function(){return f(a,b)},100)}else d("sdk.DOM").setStyle(a,"position","fixed"),d("sdk.DOM").setStyle(a,"top","20px"),d("sdk.DOM").setStyle(a,"right","20px")},getOverlayIFrameURL:function(){return d("UrlMap").resolve("www")+(c("sdk.Runtime").getIsVersioned()?"/"+c("sdk.Runtime").getVersion():"")+"/plugins/save/overlay?app_id="+c("sdk.Runtime").getClientID()},setupNewIframeDialog:function(a,b){var f=this,i=d("sdk.DialogUtils").setupNewDialog(),h=function(){d("sdk.XD").sendToFacebook(b,{method:"saveOverlayIFrameAck",params:e("JSON","stringify",!1,{name:"overlay_"+f._iframeOptions.name})})};c("sdk.createIframe")({url:this.getOverlayIFrameURL(),name:"overlay_"+this._iframeOptions.name,root:i.contentRoot,tabindex:-1,onload:e(h,"bind",!0,this)});d("sdk.DOM").addCss(i.contentRoot,"fb_dialog_iframe");e("Object","assign",!1,i.dialogElement.style,a.style||{});d("sdk.DOM").setStyle(i.dialogElement,"width",a.width+"px");d("sdk.DOM").setStyle(i.dialogElement,"height",a.height+"px");a.classList.forEach(function(a){return d("sdk.DOM").addCss(i.dialogElement,a)});d("sdk.DOM").removeCss(i.dialogElement,"fb_dialog_advanced");return i.dialogElement},getParams:function(){return{uri:"url",url_category:"string",size:"string"}}});b=a;h["default"]=b},98);c.__d("sdk.XFBML.SendToMessenger",["IframePluginClass","PluginAttrTypes"],function(a,b,c,d,e,g,h){"use strict";a=function(a){f.inheritsLoose(b,a);function b(b,c,d,e){return a.call(this,b,c,d,e,{fluid:!1,full_width:!1,mobile_fullsize:!0})||this}var c=b.prototype;c.getParams=function(){return{messenger_app_id:d("PluginAttrTypes").string,page_id:d("PluginAttrTypes").string,color:d("PluginAttrTypes").string,size:d("PluginAttrTypes").string,enforce_login:d("PluginAttrTypes").bool,identity_match:d("PluginAttrTypes").string,origin:d("PluginAttrTypes").string,cta_text:d("PluginAttrTypes").string,allow_login:d("PluginAttrTypes").bool}};return b}(c("IframePluginClass")),h["default"]=a},98);c.__d("sdk.XFBML.SendToMessengerWrapper",["sdk.Observable","sdk.XFBML.SendToMessenger"],function(a,b,c,d,e,g,h){a=function(d,a,b,c){return new i(d,a,b,c)};var i=function(b){f.inheritsLoose(a,b);function a(a,c,d,e){var f;f=b.call(this)||this;f.$SendToMessengerWrapper2=a;f.$SendToMessengerWrapper3=c;f.$SendToMessengerWrapper4=d;f.$SendToMessengerWrapper5=e;return f}var d=a.prototype;d.process=function(){var a=this;this.$SendToMessengerWrapper5.should_use_new_domain=!0;this.$SendToMessengerWrapper1=new(c("sdk.XFBML.SendToMessenger"))(this.$SendToMessengerWrapper2,this.$SendToMessengerWrapper3,this.$SendToMessengerWrapper4,this.$SendToMessengerWrapper5);this.$SendToMessengerWrapper1.subscribe("render",function(){a.inform("render")});this.$SendToMessengerWrapper1.process()};return a}(d("sdk.Observable").Observable);b=a;h["default"]=b},98);c.__d("sdk.XFBML.ShareButton",["IframePlugin"],function(a,b,c,d,e,f,g){"use strict";a=c("IframePlugin").extend({constructor:function(a,b,c,d){this.parent(a,b,c,d)},getParams:function(){return{href:"url",layout:"string",mobile_iframe:"bool",type:"string",size:"string"}}}),b=a,g["default"]=b},98);c.__d("sdk.XFBML.Video",["Assert","IframePlugin","ObservableMixin","sdk.Event","sdk.XD"],function(b,c,d,f,g,h,i){var j=function(){function a(a){this.$1=a.isMuted,this.$2=a.volume,this.$3=a.timePosition,this.$4=a.duration}var b=a.prototype;b.update=function(a){a.isMuted!==void 0&&(this.$1=a.isMuted),a.volume!==void 0&&(this.$2=a.volume),a.timePosition!==void 0&&(this.$3=a.timePosition),a.duration!==void 0&&(this.$4=a.duration)};b.isMuted=function(){return this.$1};b.getVolume=function(){return this.$1?0:this.$2};b.getCurrentPosition=function(){return this.$3};b.getDuration=function(){return this.$4};return a}(),a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.play=function(){f("sdk.XD").sendToFacebook(this.$1,{method:"play",params:e("JSON","stringify",!1,{})})};b.pause=function(){f("sdk.XD").sendToFacebook(this.$1,{method:"pause",params:e("JSON","stringify",!1,{})})};b.seek=function(a){d("Assert").isNumber(a,"Invalid argument"),f("sdk.XD").sendToFacebook(this.$1,{method:"seek",params:e("JSON","stringify",!1,{target:a})})};b.mute=function(){f("sdk.XD").sendToFacebook(this.$1,{method:"mute",params:e("JSON","stringify",!1,{})})};b.unmute=function(){f("sdk.XD").sendToFacebook(this.$1,{method:"unmute",params:e("JSON","stringify",!1,{})})};b.setVolume=function(a){d("Assert").isNumber(a,"Invalid argument"),f("sdk.XD").sendToFacebook(this.$1,{method:"setVolume",params:e("JSON","stringify",!1,{volume:a})})};b.isMuted=function(){return this.$3.isMuted()};b.getVolume=function(){return this.$3.getVolume()};b.getCurrentPosition=function(){return this.$3.getCurrentPosition()};b.getDuration=function(){return this.$3.getDuration()};b.subscribe=function(a,b){var c=this;d("Assert").isString(a,"Invalid argument");d("Assert").isFunction(b,"Invalid argument");this.$2.subscribe(a,b);return{release:function(){c.$2.unsubscribe(a,b)}}};return a}();b=d("IframePlugin").extend({constructor:function(b,c,i,h){this.parent(b,c,i,h),this._videoController=null,this._sharedObservable=null,this._sharedVideoCache=null,this.subscribe("xd.onVideoAPIReady",function(b){this._sharedObservable=new(d("ObservableMixin"))(),this._sharedVideoCache=new j(e("JSON","parse",!1,b.data)),this._videoController=new a(this._iframeOptions.name,this._sharedObservable,this._sharedVideoCache),f("sdk.Event").fire("xfbml.ready",{type:"video",id:h.id,instance:this._videoController})}),this.subscribe("xd.stateChange",function(a){this._sharedObservable.inform(a.state)}),this.subscribe("xd.cachedStateUpdateRequest",function(a){this._sharedVideoCache.update(e("JSON","parse",!1,a.data))})},getParams:function(){return{allowfullscreen:"bool",autoplay:"bool",controls:"bool",href:"url",show_captions:"bool",show_text:"bool"}},getConfig:function(){return{fluid:!0,full_width:!0}}});c=b;i["default"]=c},98);c.__d("sdk.api-public",["ApiClient","FB","sdk.Runtime","sdk.Scribe","sdk.api","sdk.feature"],function(b,c,d,f,g,h,i){var j=d("sdk.feature")("should_log_response_error",!1),a;function b(){d("sdk.Runtime").subscribe("ClientID.change",function(a){return d("ApiClient").setClientID(a)}),d("sdk.Runtime").subscribe("AccessToken.change",function(b){a=b,d("ApiClient").setAccessToken(b)}),d("ApiClient").setDefaultParams({sdk:"joey"}),d("ApiClient").subscribe("request.complete",function(b,c,e,f){b=!1,f&&typeof f==="object"&&(f.error?(f.error=="invalid_token"||f.error.type=="OAuthException"&&f.error.code==190)&&(b=!0):f.error_code&&f.error_code=="190"&&(b=!0)),b&&a===d("sdk.Runtime").getAccessToken()&&d("sdk.Runtime").setAccessToken(null)}),d("ApiClient").subscribe("request.complete",function(a,b,c,e){(a=="/me/permissions"&&b==="delete"||a=="/restserver.php"&&c.method=="Auth.revokeAuthorization")&&e===!0&&d("sdk.Runtime").setAccessToken(null)}),d("ApiClient").subscribe("request.error",function(a,b,c,i){j&&i.error.type==="http"&&f("sdk.Scribe").log("jssdk_error",{appId:d("sdk.Runtime").getClientID(),error:"transport",extra:{name:"transport",message:e("JSON","stringify",!1,i.error)+" from "+a+" , "+b}})}),d("FB").provide("",{api:d("sdk.api")})}c={init:b};g=c;i["default"]=g},98);c.__d("sdk.MBasicInitializer",["UrlMap","sdk.DOM","sdk.Runtime","sdk.UA","sdk.URI","sdk.fbt"],function(a,b,c,d,f,g,h){var i=function(){function a(a){if(!a)return;var b=a.parentNode;if(!b)return;var e=d("sdk.DOM").getAttr(a,"href")||window.location.href,f=new(c("sdk.URI"))(d("UrlMap").resolve("m"));f.setPath("/dialog/share");f.addQueryData("href",encodeURI(e));f.addQueryData("app_id",c("sdk.Runtime").getClientID());f.addQueryData("mbasic_link",1);e=document.createElement("a");e.style="display:inline-block; zoom:1;";e.textContent=c("sdk.fbt")._("Share to Facebook");e.setAttribute("href",f.toString());e.setAttribute("target","_blank");b.insertBefore(e,a);b.removeChild(a)}e("Array","from",!1,document.getElementsByTagName("fb:share-button")).forEach(function(b){return a(b)});e("Array","from",!1,document.getElementsByClassName("fb-share-button")).forEach(function(b){return a(b)})};function a(){if(!c("sdk.UA").mBasic())return;i()}h.init=a},98);c.__d("sdk.init",["Log","ManagedError","sdk.Cookie","sdk.Event","sdk.MBasicInitializer","sdk.PlatformVersioning","sdk.Runtime","sdk.UA","sdk.URI"],function(a,b,c,d,e,g,h){function i(a){var b=typeof a==="number"&&a>0||typeof a==="string"&&/^[0-9a-f]{21,}$|^[0-9]{1,21}$/.test(a);if(b)return a.toString();d("Log").warn("Invalid App Id: Must be a number or numeric string representing the application id.");return null}function a(a){c("sdk.Runtime").getInitialized()&&d("Log").warn("FB.init has already been called - this could indicate a problem");if(c("sdk.Runtime").getIsVersioned()){if(Object.prototype.toString.call(a)!=="[object Object]")throw new(c("ManagedError"))("Invalid argument");if(a.authResponse)throw new(c("ManagedError"))("Setting authResponse is not supported");a.version||(a.version=new(c("sdk.URI"))(location.href).getQueryData().sdk_version);d("sdk.PlatformVersioning").assertValidVersion(a.version);c("sdk.Runtime").setVersion(a.version)}else/number|string/.test(typeof a)&&(d("Log").warn("FB.init called with invalid parameters"),a={apiKey:a}),a.status==null&&(a.legacyStatusInit=!0),a=f["extends"]({status:!0},a||{});var b=i(a.appId||a.apiKey);b!==null&&c("sdk.Runtime").setClientID(b);"scope"in a&&c("sdk.Runtime").setScope(a.scope);a.cookie&&(c("sdk.Runtime").setUseCookie(!0),typeof a.cookie==="string"&&d("sdk.Cookie").setDomain(a.cookie));(a.localStorage===!1||a.localStorage==="false")&&c("sdk.Runtime").setUseLocalStorage(!1);a.kidDirectedSite&&c("sdk.Runtime").setKidDirectedSite(!0);a.useFamilyLogin&&c("sdk.Runtime").setShouldLoadFamilyLogin(!0);(a.autoLogAppEvents==="1"||a.autoLogAppEvents==="true")&&(a.autoLogAppEvents=!0);a.ab&&c("sdk.Runtime").setSDKAB(a.ab);c("sdk.Runtime").setInitialized(!0);c("sdk.UA").mBasic()&&d("sdk.MBasicInitializer").init();d("sdk.Event").fire("init:post",a)}h["default"]=a},98);c.__d("sdk.init-public",["FB","QueryString","sdk.AppEvents","sdk.ErrorHandling","sdk.Event","sdk.Frictionless","sdk.XD","sdk.init"],function(a,b,c,d,f,g,h){"use strict";function a(){b("sdk.XD"),b("sdk.AppEvents"),b("sdk.Frictionless"),window.setTimeout(function(){var a=/(connect\.facebook\.net|\.facebook\.com\/assets.php|\.facebook\.net\/assets.php).*?#(.*)/;e("Array","from",!1,window.document.getElementsByTagName("script")).forEach(function(b){if(b.src){b=a.exec(b.src);if(b){var d={};b=c("QueryString").decode(b[2]);for(var e in b)if(Object.prototype.hasOwnProperty.call(b,e)){var f=b[e];f==="0"?d[e]=0:d[e]=f}c("sdk.init")(d)}}});window.fbAsyncInit&&!window.fbAsyncInit.hasRun&&(d("sdk.Event").fire("init:asyncstart"),window.fbAsyncInit.hasRun=!0,c("sdk.ErrorHandling").unguard(window.fbAsyncInit)())},0),c("FB").provide("",{init:c("sdk.init")}),d("sdk.Event").subscribe("init:post",function(){window.__buffer!==void 0&&window.__buffer.replay()}),window.setTimeout(function(){window.__buffer&&window.__buffer.opts&&c("sdk.init")(window.__buffer.opts)},0)}f={initialize:a};g=f;h["default"]=g},98);c.__d("sdk.Time",["Log","sdk.Impressions","sdk.Runtime","sdk.URI","sdk.feature"],function(b,c,d,f,g,h,i){"use strict";var j=window.performance,a=j&&"now"in j&&"getEntriesByName"in j,k,l={};function b(){function b(a,b){var c=!1;try{a=new(d("sdk.URI"))(a.name);var i=a.getDomain();a=a.getPath();c=i===b.getDomain()&&e(a,"includes",!0,"/rsrc.php/")}catch(a){f("Log").error("Malformed URL was passed to the URL constructor: Error %s occured",a.message)}return c}function c(a){var c=j.getEntriesByType("resource").filter(function(c){return b(c,new(d("sdk.URI"))(a))}),f=c.length>=1;f||(c=j.getEntriesByType("resource").filter(function(b){return e(b.name,"startsWith",!0,a)}));return c}if(a){var g=d("sdk.Runtime").getSDKUrl(),h=null;c=c(g);if(c.length>1)if(c>2)c=null;else{var i=e(c,"findIndex",!0,function(a){return e(a.name,"startsWith",!0,g+"?hash=")});i?(h=c.splice(i)[0],c=c[0]):c=null}else c.length===1?(i=document.getElementById("facebook-jssdk-iframe"),i&&i instanceof HTMLIFrameElement&&(h=i.contentWindow.performance.getEntriesByType("resource").find(function(a){return e(a.name,"startsWith",!0,g)})),c=c[0]):c=null;c&&(l.fetchTime=Math.round(c.duration),h&&(l.fetchTime+=Math.round(h.duration)),"transferSize"in c&&(l.transferSize=c.transferSize,h&&(l.transferSize+=h.transferSize)),f("Log").debug("sdkperf: it took %s ms and %s bytes to load %s",l.fetchTime,l.transferSize,g),k=c.startTime,l.ns=d("sdk.Runtime").getSDKNS(),k&&window.setTimeout(function(){var a=d("sdk.feature")("log_perf",!1),b=d("sdk.Runtime").getSDKAB();b&&(l.ab=b,a=!0);a&&f("sdk.Impressions").log(116,l)},1e4))}}function c(b){if(!a||!k)return;l[b]=Math.round(j.now()-k);f("Log").debug("sdkperf: %s logged after %s ms",b,l[b])}i.recordBootload=b;i.log=c},98);c.__d("sdk.time-public",["runOnce","sdk.Event","sdk.Time"],function(a,b,c,d,e,f,g){"use strict";function a(){d("sdk.Time").recordBootload(),d("sdk.Event").subscribe("init:post",function(){d("sdk.Time").log("init")}),d("sdk.Event").subscribe("init:asyncstart",function(){d("sdk.Time").log("asyncstart")}),d("sdk.Event").subscribe("iframeplugin:create",c("runOnce")(function(){return d("sdk.Time").log("pluginframe")})),d("sdk.Event").subscribe("iframeplugin:onload",c("runOnce")(function(){return d("sdk.Time").log("ttfp")}))}b={init:a};e=b;g["default"]=e},98);c.__d("legacy:fb.sdk.index",["FB","sdk.AppEvents-public","sdk.Auth-public","sdk.Canvas-public","sdk.Event-public","sdk.Frictionless-public","sdk.GamingServices-public","sdk.Runtime","sdk.api-public","sdk.init-public","sdk.time-public","sdk.ui"],function(a,b,c,d,e,f,g){c("sdk.api-public").init(),c("sdk.AppEvents-public").init(),c("sdk.Auth-public").init(),c("sdk.Canvas-public").init(),c("sdk.Canvas-public").initCanvasPlugin(),c("sdk.Canvas-public").initCanvasPrefetcher(),c("sdk.Canvas-public").initCanvasPresence(),c("sdk.Event-public").init(),c("sdk.Frictionless-public").init(),c("sdk.GamingServices-public").init(),c("sdk.init-public").initialize(),c("sdk.time-public").init(),c("FB").provide("",{ui:c("sdk.ui")}),c("sdk.Runtime").setIsVersioned(!0)},35);window.FB&&window.FB.__buffer&&(window.__buffer=f["extends"]({},window.FB.__buffer))}).call(b)})()}catch(a){}}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||(h=d("I64"))).of_string("63");b=h.of_string("65");c=h.of_string("98");e=h.of_string("504");f=h.of_string("1000");d=h.of_string("1001");var i=h.of_string("1204"),j=h.of_string("1210"),k=h.of_string("1224"),l=h.of_string("1234"),m=h.of_string("1225"),n=h.of_string("2220");g.traceGroupMessage=a;g.armadilloActMessageSend=b;g.traceCreated=c;g.richMediaMediaSendAttachmentType=e;g.traceTextMessage=f;g.traceMediaMessage=d;g.advancedCryptoMEMSendTaskComplete=i;g.deliveryReceiptReceived=j;g.advancedCryptoMEMEncryptionDeviceCount=k;g.advancedCryptoGroupDualSend=l;g.advancedCryptoDualSend=m;g.armadilloTlcControlOpenThread=n}),98);
__d("DedupMiThreadCreationCache",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();a=function(a){var b=c("justknobx")._("4749");b&&h.add(a)};g.DedupMiThreadCreationCache=h;g.addToDedupMiThreadCreationCache=a}),98);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);d("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(a)});return i.apply(this,arguments)}g.initEBListeners=a}),98);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("LSSetIGE2EEEligibility",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(176).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.contactId,a[0])&&c.i64.eq(b.e2eeEligibility,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[1].set("new_eligibility",a[1]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"ig_set_e2ee_eligibility",c.i64.cast([0,60001]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactSetIGE2EEEligibilityStoredProcedure";a.__tables__=["ig_contact_info"];e.exports=a}),null);
__d("LSSetIGE2EEEligibilityStoredProcedure",["LSSetIGE2EEEligibility","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSetIGE2EEEligibility"),e.id,e.e2eeEligibility);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("IGDSetIGE2EEEligibility",["I64","LSDatabaseSingleton","LSFactory","LSInstagramE2EEEligibility","LSIntEnum","LSSetIGE2EEEligibilityStoredProcedure","MAWCurrentUser","asyncToGeneratorRuntime","justknobx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h||d("react")).useEffect;function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return e.runInTransaction(function(e){return c("LSSetIGE2EEEligibilityStoredProcedure")(c("LSFactory")(e),{e2eeEligibility:(j||(j=d("LSIntEnum"))).ofNumber(b),id:(k||(k=d("I64"))).of_string(a)})},"readwrite",void 0,void 0,f.id+":31")});return n.apply(this,arguments)}function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];l(o,b)}function o(){if(c("justknobx")._("2058"))return;var a=d("MAWCurrentUser").getID();c("promiseDone")(m(a,c("LSInstagramE2EEEligibility").ELIGIBLE))}g.useUpsertSetIGE2EEEligibilityOnMount=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){var b;a=a==null||(b=a.viewer)==null?void 0:b.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("MAWAbPropsClient",["WAAbPropsToUI"],(function(a,b,c,d,e,f,g){"use strict";var h={contents:d("WAAbPropsToUI").prepareAbPropsForUI()};function a(a){h.contents=a}function b(){return h.contents}g.rewrite=a;g.getAbProps=b}),98);
__d("WAChatState",[],(function(a,b,c,d,e,f){"use strict";a="typing";b="recording_audio";c="idle";d={TYPING:a,RECORDING_AUDIO:b};e={IDLE:c};f.TYPING=a;f.RECORDING_AUDIO=b;f.IDLE=c;f.ACTIVE_CHAT_STATE_TYPE=d;f.IDLE_CHAT_STATE_TYPE=e}),66);
__d("MAWBridgeReceivedChatStateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ServerTime","WAChatState","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeReceivedChatStateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.senderId),j=i.of_float(3e3+d("ServerTime").getMillis());if(e.state===d("WAChatState").TYPING)return a.typing_indicator.upsert([f,g],{expirationTimestampMs:j,senderId:g,threadKey:f}).then(c("emptyFunction"));else if(e.state===d("WAChatState").IDLE)return a.typing_indicator["delete"](f,g).then(c("emptyFunction"));else return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("LSMessageSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({THREAD:1,MESSAGE:2});f["default"]=a}),66);
__d("MAWFTSRawStringMatcher",["JSResourceForInteraction","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("WAFtsMultiLangTokenizer").__setRef("MAWFTSRawStringMatcher"),i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i=(yield h.load());return l});return j.apply(this,arguments)}function k(a){return new(c("nullthrows")(i))().tokenize(a)}function l(a,b){a=Array.from(k(a)).filter(function(a){return a.length>1});if(a.length===0)return!1;var c=Array.from(k(b));return a.every(function(a){return c.some(function(b){return b.startsWith(a)})})}g.load=a}),98);
__d("LSSearchRequestStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({PENDING:1,COMPLETE:2,FAILED:3});f["default"]=a}),66);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var c,e;c=(i||(i=d("I64"))).add((c=a.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"),(c=b.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"));b=i.max((e=a.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one,(e=b.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one);return babelHelpers["extends"]({},a,{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[h._plural(i.to_int32(c),"number")]).toString(),matchCount:c,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).minus_one)?void 0:b})}g.mergeCutoverSearchResults=a}),226);
__d("MAWMiActOnActThreadReadyDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMiActOnActThreadReady").__setRef("MAWMiActOnActThreadReadyDeferred");function a(a,b,c,d){return h.load().then(function(e){e=e.onActThreadReady;return e(a.tables,b,c,d)})}g["default"]=a}),98);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:5e3},i=c("qpl")._(25301522,"2409");function a(){h.hasStarted&&j();h.instanceKey++;h.hasStarted=!0;c("QPLUserFlow").start(i,{annotations:{bool:{isInThread:!1}},instanceKey:h.instanceKey});return h.instanceKey}function j(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endCancel(i,{instanceKey:h.instanceKey})}function b(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!h.hasStarted||d!=null&&h.instanceKey!==d)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&k({annotations:b,instanceKey:h.instanceKey})}function k(a){var b=a.annotations;a=a.instanceKey;if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function d(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endSuccess(i,{annotations:{"int":{result_count:h.currentResultCount}},instanceKey:h.instanceKey})}e={getCurrentInstanceKey:function(){return h.instanceKey},qplAddAnnotations:k,qplAddPoint:b,qplCancel:j,qplMarkFirstResultShowUp:c("emptyFunction"),qplStart:a,qplSuccess:d,updateCurrentResultCount:c("emptyFunction")};f=e;g["default"]=f}),98);
__d("escapeRegExp",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}f["default"]=a}),66);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=c("gkx")("1798");function l(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(a,b){a=l(a).split(" ");var d=l(b),e=[],f=[];a.forEach(function(a){var b=new RegExp(c("escapeRegExp")(a),"gi");b=d.matchAll(b);b=Array.from(b);b=b.map(function(a){return a.index});var g=b.map(function(b){return a.length});f.push.apply(f,b);e.push.apply(e,g)});return{matchLengths:e.join(","),matchOffsets:f.join(",")}}function a(a,b,e,f){if(e!=null&&(b===1||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)))){f=d("MAWVault").isVaulted(e)?d("MAWVault").unvault(e):e;e=m(a,f);return babelHelpers["extends"]({contextLine:f},e)}else return{contextLine:h._(/*BTDS*/"_j{\"*\":\"{number} matched messages\",\"_1\":\"1 matched message\"}",[h._plural(b,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function b(a,b){return a===1&&b!=null?b:void 0}function e(a,b){return a===1&&b!=null?b:void 0}function f(a){return a!=null?(i||(i=d("I64"))).of_float(a):void 0}function n(a,b){a=(i||(i=d("I64"))).of_float(-a);return b==null?a:i.min(a,b)}function o(a,b){if(!k||a.messageTimestampMs==null||b.messageTimestampMs==null)if((i||(i=d("I64"))).gt(a.globalIndex,b.globalIndex))return 1;else if((i||(i=d("I64"))).lt(a.globalIndex,b.globalIndex))return-1;else return 0;else if((i||(i=d("I64"))).lt(a.messageTimestampMs,b.messageTimestampMs))return 1;else if((i||(i=d("I64"))).gt(a.messageTimestampMs,b.messageTimestampMs))return-1;else return 0}g.getContextLineAndMatches=a;g.getMessageOtid=b;g.getMessageId=e;g.getMessageTimestamp=f;g.getGlobalIndex=n;g.searchResultsCompareFn=o}),226);
__d("MWLSParticipant",["I64","LSContactBlockedByViewerStatus","LSContactGender","LSContactType","LSContactWorkForeignEntityType","LSIntEnum","LSMailboxType","MWLSContactTypeExactUtils","ReQL","getLSMediaContactProfilePictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b={actual_name:"",blocked_by_viewer_status:(h||(h=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contact_id:(i||(i=d("I64"))).zero,contactType:h.ofNumber(c("LSContactType").UNKNOWN),delivered_watermark_timestamp_ms:i.zero,gender:h.ofNumber(c("LSContactGender").UNKNOWN),is_admin:!1,is_messenger_user:!1,mailbox_type:h.ofNumber(c("LSMailboxType").MESSENGER),name:"",nickname:void 0,profile_picture_url:"",rank:0,read_action_timestamp_ms:i.zero,read_watermark_timestamp_ms:i.zero,secondary_name:void 0,thread_key:i.zero,work_company_name:void 0,work_foreign_entity_info:h.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN),work_job_title:void 0};function j(a){var b=a[0];a=a[1];var e=b.nickname,f=a.authorityLevel,g=a.blockedByViewerStatus,i=a.contactTypeExact,j=a.firstName,k=a.name,l=a.secondaryName,m=a.waConnectStatus;return{actual_name:k,authority_level:f,blocked_by_viewer_status:g,contact_id:b.contactId,contactType:a.contactType,delivered_watermark_timestamp_ms:b.deliveredWatermarkTimestampMs,gender:a.gender,is_admin:(f=b.isAdmin)!=null?f:!1,is_messenger_user:a.isMessengerUser,mailbox_type:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),name:(g=e!=null?e:j)!=null?g:k,nickname:e,profile_picture_url:c("getLSMediaContactProfilePictureUrl")(a),rank:a.rank,read_action_timestamp_ms:b.readActionTimestampMs,read_watermark_timestamp_ms:b.readWatermarkTimestampMs,secondary_name:d("MWLSContactTypeExactUtils").isIgContact(i)?l:void 0,thread_key:b.threadKey,wa_connect_status:m,work_company_name:a.workCompanyName,work_foreign_entity_info:a.workForeignEntityType,work_job_title:a.workJobTitle}}function a(a,b,c){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c),b).map(j)}g.empty=b;g.projectOpen=j;g.getAllInOpenThread=a}),98);
__d("MWLSThreadTitle",["fbt","I64","LSMessagingThreadTypeUtil","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){if(a.length>4)return"("+a.length+") "+a.join(", ");else return a.join(", ")}function k(a){switch(a.length){case 0:return c("gkx")("22885")?"":h._(/*BTDS*/"No participants");case 1:return a[0];case 2:return h._(/*BTDS*/"{participant1} and {participant2}",[h._param("participant1",a[0]),h._param("participant2",a[1])]);case 3:return h._(/*BTDS*/"{participant1}, {participant2} and {participant3}",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])]);default:return h._(/*BTDS*/"{participant1}, {participant2} and {others_count} others",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_count",String(a.length-2))])}}function l(a,b,c,e,f,g,h){h===void 0&&(h=!1);if(a!=null)return a;a=d("LSMessagingThreadTypeUtil").isGroup(e);e=c.filter(function(a){return!(i||(i=d("I64"))).equal(a.contact_id,b)});if(a)return h?j(e.map(f)):k(e.map(f));return c.length!==1?k(e.map(g)):g(c[0])}function a(a,b,c,d,e){e===void 0&&(e=!1);return l(a,b,c,d,function(a){var b=a.name;a=a.nickname;return a!=null?a:b},function(a){var b=a.actual_name;a=a.nickname;return a!=null?a:b},e).toString()}function b(a,b,c,d){return l(a,b,c,d,function(a){a=a.actual_name;return a},function(a){a=a.actual_name;return a}).toString()}function e(a,b,c,d){return l(a,b,c,d,function(a){var b=a.actual_name;a=a.secondary_name;return a!=null?a:b},function(a){var b=a.actual_name;a=a.secondary_name;return a!=null?a:b}).toString()}g.getDefaultThreadTitle=a;g.getThreadTitleWithFullName=b;g.getThreadTitleWithSecondaryNames=e}),226);
__d("MWSearchThreadUtils",["I64","LSIntEnum","LSMessageSearchType","MAWChatJid","MWLSParticipant","MWLSThreadTitle","Promise","ReQL","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","getLSMediaThreadPictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){var g=c("getLSMediaThreadPictureUrl")(a);if(g!=null)return(j||(j=b("Promise"))).resolve([g,void 0]);else{a=(g=d("ReQL")).toArrayAsync(g.leftJoin(g.fromTableAscending(f.tables.participants,[]).getKeyRange(a.threadKey),g.fromTableAscending(f.tables.contacts)).map(function(a){a[0];a=a[1];return a}).filter(Boolean));g=a.then(function(a){var b=a.length===1&&(h||(h=d("I64"))).equal(a[0].id,e);return a.sort(function(a,b){return a.rank-b.rank}).filter(function(a){return(h||(h=d("I64"))).equal(a.id,e)?b:!0}).map(function(a){return c("getLSMediaContactProfilePictureUrl")(a)})}).then(function(a){var b=a[0];return b!=null?[b,a[1]]:["",void 0]});return g}}function l(a,b){return d("ReQL").toArrayAsync(d("MWLSParticipant").getAllInOpenThread(b,d("ReQL").fromTableAscending(b.tables.contacts),a.threadKey))}function m(a,b,e,f,g){if((h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&f!=null){g=(g=e.find(function(a){return a.contact_id===f.id}))==null?void 0:g.nickname;return g!=null?g:f.name}return d("MWLSThreadTitle").getThreadTitleWithFullName(b.threadName,a,e,b.threadType)}function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=(yield d("MAWChatJid").toThreadKeyMaybe(a.tables,b));return b==null?null:o(a,b,c,e)});return n.apply(this,arguments)}function o(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b)));return b==null?null:q(a,b,c,e)});return p.apply(this,arguments)}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e){a=(yield (j||(j=b("Promise"))).all([k(c,d,a),l(c,a)]));var f=a[0],g=f[0];f=f[1];a=a[1];d=(yield m(d,c,a,void 0,e));return{profilePicUrl:g,secondaryProfilePicUrl:f,threadDisplayName:d,threadKey:c.threadKey,threadType:c.threadType}});return r.apply(this,arguments)}g.getThreadPics=k;g.getThreadParticipants=l;g.getThreadDisplayName=m;g.getThreadDataForSearchResult=a;g.getThreadDataByThreadKey=o}),98);
__d("groupBy",[],(function(a,b,c,d,e,f){function a(a,b){return a.reduce(function(a,c){(a[b(c)]=a[b(c)]||[]).push(c);return a},{})}f["default"]=a}),66);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJID",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[1]=d[0].get("wa_jid"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,1021]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithGroupJID","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSThreadPointQueryAndRestoreMessagesWithGroupJID"),e.waJid);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("waitForMiActMappingForUniversalSearch",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCurrentUser","MAWJids","Promise","ReQL","WAJids","asyncToGeneratorRuntime","emptyFunction","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=3e4,k=3e4;function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(a));return a.some(function(a){return a==null||(i||(i=d("I64"))).lt(a.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))})===!1});return m.apply(this,arguments)}function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));var h=(i||(i=d("I64"))).of_string(d("MAWCurrentUser").getID()),j=d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e.serverThreadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,h)}),d("ReQL").fromTableAscending(a.tables.contacts)).map(function(a){a[0];a=a[1];return a}),m=null,n={contents:function(){}};function o(){f(e),n.contents()}if(yield l(j))return o();n.contents=j.subscribe(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.operation==="delete")return;m!=null&&window.clearTimeout(m);if(yield l(j))return o()});return function(b,c){return a.apply(this,arguments)}}());m=window.setTimeout(function(){n.contents(),g(c("err")("Contacts timed out"))},k)});return o.apply(this,arguments)}function a(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=d("MAWJids").convertChatJidToIntJid(e),i=d("WAJids").interpretAsGroupJid(e)!=null,k=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(g);e=(yield d("ReQL").firstAsync(k));if(e!=null){yield n(a,e);return(h||(h=b("Promise"))).resolve(e)}var l=null,m=new(h||(h=b("Promise")))(function(d,e){var f={contents:function(){}};function g(a){f.contents(),d(a)}function h(a){f.contents(),e(a)}f.contents=k.subscribe(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){if(c.operation==="delete")return;l!=null&&window.clearTimeout(l);yield n(a,c.value,g,h)});return function(a,b){return c.apply(this,arguments)}}());l=window.setTimeout(function(){h(c("err")("MiActMapping timed out"))},j)});c("promiseDone")(a.runInTransaction(function(a){return i?c("LSThreadPointQueryAndRestoreMessagesWithGroupJIDStoredProcedure")(c("LSFactory")(a),{waJid:g}):c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:g})},"readwrite",void 0,void 0,f.id+":149"));try{e=(yield m)}catch(a){c("FBLogger")("messenger_web").warn("[FTS] Issue waiting for mi_act_mapping to be ready",a)}return e});return p.apply(this,arguments)}g["default"]=a}),98);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h=["matchedTerms","recordType"],i,j,k,l=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),m=new Map(),n=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.message_search_queries.put(babelHelpers["extends"]({hasNextPage:!1,query:b,threadKeyV2:(k||(k=d("I64"))).one,type_:l},c))});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(k||(k=d("I64"))).to_string(b.threadKey);b.matchCount!=null&&m.set(c,(k||(k=d("I64"))).to_float(b.matchCount));c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange(l,b.query,b.threadKey)));if(c==null)yield a.message_search_results.put(babelHelpers["extends"]({},b));else{var e=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(c,b);yield a.message_search_results.upsert([l,c.query,c.threadKey,c.globalIndex],babelHelpers["extends"]({},e,{globalIndex:b.globalIndex}))}});return r.apply(this,arguments)}function a(a,b){var c;c=(c=m.get((k||(k=d("I64"))).to_string(a)))!=null?c:0;c+=b;m.set((k||(k=d("I64"))).to_string(a),c)}function e(){m.clear()}function s(a,b){return!d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?null:(b=m.get((k||(k=d("I64"))).to_string(a)))!=null?b:null}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){m.clear();yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield o(a,g,{resultCount:(k||(k=d("I64"))).zero,status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":142");c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var p=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:g,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));p=p.map(function(a){if(a.recordType==="msg"){a.matchedTerms;a.recordType;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return babelHelpers["extends"]({},a)}}).filter(Boolean);p=c("groupBy")(p,function(a){return a.chatJid});var r=Object.values(p);c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:r.length}},point:"search_local_result_end"});c("promiseDone")((i||(i=b("Promise"))).all(r.map(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h,i){var j=h[0].chatJid;yield c("waitForMiActMappingForUniversalSearch")(a,j);var m=(yield d("MWSearchThreadUtils").getThreadDataForSearchResult(a,j,e,l));if(m==null)return;var o=m.profilePicUrl,p=m.secondaryProfilePicUrl,r=m.threadDisplayName,s=m.threadKey;m=m.threadType;var t=h.sort(function(a,b){return b.sortOrderMs-a.sortOrderMs})[0],u=h.length===1&&t.msg==null?{id:t.externalId,sortOrderMs:t.sortOrderMs}:null,v={displayName:r,globalIndex:d("MWContentSearchUtils").getGlobalIndex(t.sortOrderMs),matchCount:(k||(k=d("I64"))).of_int32(h.length),profilePicUrl:o,query:g,secondaryProfilePicUrl:p,threadKey:s,threadType:m,type_:l};if(u==null)yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c;yield q(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null||(b=t.msg)==null?void 0:b.content,l),{messageId:d("MWContentSearchUtils").getMessageId(h.length,t==null||(c=t.msg)==null?void 0:c.msgId),messageOtid:d("MWContentSearchUtils").getMessageOtid(h.length,t==null?void 0:t.externalId),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(t==null?void 0:t.sortOrderMs)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":243");else{c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_start"});r=(yield n.load().then(function(a){a=a.issueQueryAsPromiseForSearchResult;return a(j,[u])}));if(r!=null&&r.length!==0){var w=r[0];c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_end"});yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield q(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null||(b=t.msg)==null?void 0:b.content,l),{messageOtid:w.externalId,messageTimestampMs:w.sortOrderMs!=null?(k||(k=d("I64"))).of_float(w.sortOrderMs):void 0}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":282")}else c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+i+"_end"})}});return function(a,b){return h.apply(this,arguments)}}())),function(){c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:r.length}},point:"issue_secure_search_query_end"}),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield o(a,g,{hasNextPage:!1,resultCount:(k||(k=d("I64"))).of_int32(r.length),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":322"))},function(a){c("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",a==null?void 0:a.message)})});return u.apply(this,arguments)}g.updateSecureMsgMatchCountForThread=a;g.clearSecureMsgMatchCountForThread=e;g.getSecureMsgsMatchCountForThread=s;g.search=t}),98);
__d("isEBSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4741")}g["default"]=a}),98);
__d("MWInboxSecureContentSearch",["I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=["matchedTerms","recordType"],i,j,k,l=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),m=c("justknobx")._("2605");function a(a,c,e){return(k||(k=b("Promise"))).all([d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(e.tables.contacts)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a))]).then(function(a){var b=a[0];a[1];a=b.filter(function(a){a[0];a=a[1];a=(i||(i=d("I64"))).equal(a.id,c);return!a}).map(function(a){a[0];a=a[1];return a});return d("ReQL").firstAsync(a)})}function n(a,c){return d("MAWChatJid").toThreadKeyMaybe(c,a.chatJid).then(function(e){return e==null?(k||(k=b("Promise"))).resolve([null,a]):(k||(k=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.threads).getKeyRange(e)),k.resolve(a)])})}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((i||(i=d("I64"))).of_string(b))));return a});return p.apply(this,arguments)}function q(a,b){var e=b.query;b=b.threadKey;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,b))}function r(a,e,g,h,l,m,p,r){r===void 0&&(r=c("LSSearchRequestStatusType").COMPLETE);var s=function(f){return n(a,f).then(function(a){var n=a[0];if(n==null)return;var p=a[1],s=p.msg;if(s==null)return;if(p!=null)return(k||(k=b("Promise"))).all([d("MWSearchThreadUtils").getThreadPics(n,l,m),d("MWSearchThreadUtils").getThreadParticipants(n,m),(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))?o(m,s.sender):(k||(k=b("Promise"))).resolve(null),(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))?q(f,{query:g,threadKey:n.threadKey}):(k||(k=b("Promise"))).resolve(null)]).then(function(a){var m=a[0],o=m[0];m=m[1];var q=a[1],t=a[2];a=a[3];(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(n.threadKey,e);q=babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,e,s.content,h),{displayName:d("MWSearchThreadUtils").getThreadDisplayName(l,n,q,t,h),globalIndex:(i||(i=d("I64"))).of_float(-p.sortOrderMs),matchCount:i.of_int32(e),messageId:s.msgId,messageOtid:p.externalId,messageTimestampMs:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&e>1?void 0:(i||(i=d("I64"))).of_string(""+p.sortOrderMs),profilePicUrl:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureUrl:o,query:g,secondaryProfilePicUrl:(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureFallbackUrl:m,threadKey:n.threadKey,threadType:n.threadType,type_:h});if((i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))||a==null)o=f.message_search_results.put(q);else{t=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(a,q);o=f.message_search_results.upsert([h,a.query,a.threadKey,a.globalIndex],babelHelpers["extends"]({},t,{globalIndex:q.globalIndex}))}return(k||(k=b("Promise"))).all([f.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:g,resultCount:i.of_int32(e),status:(j||(j=d("LSIntEnum"))).ofNumber(r),threadKeyV2:n.threadKey,type_:h}),o]).then(c("emptyFunction"))})})};return p!=null?s(p):m.runInTransaction(function(a){return s(a)},"readwrite",void 0,void 0,f.id+":284")}function s(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){f!=null&&f.flow.qplAddPoint({instanceKey:f.instanceKey,point:"search_local_result_start"});c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:c,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));return(k||(k=b("Promise"))).all(c.map(function(b){if(b.recordType==="msg"){b.matchedTerms;b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,h);return d("MAWChatJid").toThreadKeyMaybe(a.tables,c.chatJid).then(function(a){return[c,a]})}}).filter(Boolean)).then(function(a){a=e!=null?a.filter(function(a){a[0];a=a[1];return a!=null&&(i||(i=d("I64"))).equal(a,e)}):a.filter(function(a){a[0];a=a[1];return a!=null});var b=null;e!=null&&(b={"int":{numResult:a.length}});f!=null&&f.flow.qplAddPoint({annotations:babelHelpers["extends"]({},b),instanceKey:f.instanceKey,point:"search_local_result_end"});return a})});return t.apply(this,arguments)}function e(a,e,f,g){d("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread();return s(f,a,void 0,g).then(function(h){h=Object.values(c("groupBy")(h,function(a){a[0];a=a[1];return a==null?"":(i||(i=d("I64"))).to_string(a)}));g!=null&&g.flow.qplAddAnnotations({annotations:{"int":{numResult:h.length}}});return h.map(function(b){var g=b[0];if(g!==null){g=g[0];return r(g,b.length,a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,f)}}).reduce(function(a,d){return(k||(k=b("Promise"))).all([a,d]).then(c("emptyFunction"))},(k||(k=b("Promise"))).resolve())})}function u(a,e,f,g,h,i){return(k||(k=b("Promise"))).all(g.map(function(b){return r(b,h,f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),i,a,e)})).then(c("emptyFunction"))}function v(a,e,f,g,h){return(k||(k=b("Promise"))).all(f.map(function(b){return r(b,g,e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),h,a)})).then(c("emptyFunction"))}function w(a,e,g,h,n){return h.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(i||(i=d("I64"))).of_int32(0),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING),threadKeyV2:e,type_:j.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":467").then(function(b){return s(h,a,e,n)}).then(function(o){var p=o.length,q=o.filter(function(a){var b=a[0];a[1];return b.msg!=null}).length,s=q,t=function(){var d=o.map(function(a){a=a[0];return a}).filter(function(a){return a.msg==null});if(d.length===0)return(k||(k=b("Promise"))).resolve();d=d.slice(0,m);n.flow.qplAddPoint({annotations:{"int":{numRequestedMessages:d.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_start"});return c("MAWMiActOnActThreadReadyDeferred")(h,e,"MWMessageSearchInput.react",function(c,e){var f=d.map(function(a){return{id:a.externalId,sortOrderMs:a.sortOrderMs}});return l.load().then(function(c){var d=c.issueQueryAsPromiseForSearchResult;c=d(e,f);return c==null?(k||(k=b("Promise"))).resolve():c.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b;if(b.length!==f.length){n.flow.qplAddPoint({annotations:{"int":{numRemainingMessages:f.length-b.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_partial"});var i=f.filter(function(a){return!c.some(function(b){return b.externalId===a.id})});if(i.length>0){i=(yield d(e,i));i!=null&&(c=[].concat(b,i))}}s=q+c.length;n.flow.qplAddPoint({annotations:{"int":{numRespondedMessages:c.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_end"});return v(h,a,c,s,g)});return function(a){return c.apply(this,arguments)}}())})})};return(k||(k=b("Promise"))).all([o.map(function(b){b=b[0];return r(b,p,a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),g,h,void 0,c("LSSearchRequestStatusType").PENDING)}).reduce(function(a,d){return(k||(k=b("Promise"))).all([a,d]).then(c("emptyFunction"))},k.resolve()),c("isEBSearchEnabled")()?t():(k||(k=b("Promise"))).resolve()]).then(function(b){return h.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(i||(i=d("I64"))).of_int32(s),status:(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:e,type_:j.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":617")}).then(function(a){return(k||(k=b("Promise"))).resolve()})})}g.getThreadOtherParticipantContact=a;g.searchSecureDatabaseThreads=e;g.addBridgeSearchMsgsToSearchResult=u;g.addMessagesToSearchResult=v;g.searchSecureDatabaseMessages=w}),98);
__d("addMAWBridgeSearchMessagesToUniversalSearch",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("LSIntEnum")).ofNumber(c("LSMessageSearchType").THREAD);function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k){var l;d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(e,h.length);var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(j,g,e))),n=m==null;l=(i||(i=d("I64"))).to_int32((l=m==null?void 0:m.matchCount)!=null?l:(i||(i=d("I64"))).zero);var o=l+h.length;l=(yield d("MWSearchThreadUtils").getThreadDataByThreadKey(a,e,i.of_string(d("MAWCurrentUser").getID()),j));if(l==null)return;var p=l.profilePicUrl,q=l.secondaryProfilePicUrl,r=l.threadDisplayName,s=l.threadType,t=m==null?void 0:m.globalIndex,u=d("MWContentSearchUtils").getGlobalIndex(h[0].sortOrderMs,m==null?void 0:m.globalIndex),v=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;yield a.message_search_results.upsert([j,g,e,t!=null?t:u],babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,o,(b=h[0].msg)==null?void 0:b.content,j),{displayName:r,globalIndex:u,matchCount:(i||(i=d("I64"))).of_int32(o),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(h[0].sortOrderMs),profilePicUrl:p,query:g,secondaryProfilePicUrl:q,threadKey:e,threadType:s,type_:j}));n&&(yield a.message_search_queries.put(babelHelpers["extends"]({},k,{resultCount:(i||(i=d("I64"))).add(k.resultCount,i.one)})))});return function(b){return a.apply(this,arguments)}}();c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield v(a)});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":113"))});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWBridgeAddMessageSearchResultHandler",["I64","LSIntEnum","LSMessageSearchType","MAWCurrentUser","MAWFTSRawStringMatcher","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MWInboxSecureContentSearch","Promise","ReQL","addMAWBridgeSearchMessagesToUniversalSearch","asyncToGeneratorRuntime","emptyFunction","isMAWUniversalSearchWithEBEnabled","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),l=j.ofNumber(c("LSMessageSearchType").THREAD);function a(a,d,e){return e.length===0?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).all([o(a,d,e),q(a,d,e)]).then(c("emptyFunction"))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWFTSRawStringMatcher").load());return b.filter(function(b){b=(b=b.msg)==null?void 0:b.content;return b==null?!1:c(a,b)})});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.message_search_queries).getKeyRange(k)));if(g.length===0)return;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(e,f[0].chatJid,"MAWBridgeAddMessageSearchResultHandler",function(e,h){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=g.filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,h)})[0];if(b==null)return;var c=b.query;if(c==null||c.length<2)return;var j=(i||(i=d("I64"))).to_int32(b.resultCount);c=(yield m(c,f));if(c.length===0)return;yield d("MWInboxSecureContentSearch").addBridgeSearchMsgsToSearchResult(a,e,b.query,c,j+c.length,i.of_string(d("MAWCurrentUser").getID()))})().then(c("emptyFunction"))})});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(!c("isMAWUniversalSearchWithEBEnabled")())return;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.message_search_queries).getKeyRange(l).filter(function(a){return(i||(i=d("I64"))).equal(a.threadKeyV2,i.one)})));if(f==null)return;var g=f.query;if(g==null||g.length<2)return;var h=(yield m(g,e));if(h.length===0)return;c("promiseDone")(c("waitForMiActMappingForUniversalSearch")(a,e[0].chatJid),function(b){if(b!=null)return c("addMAWBridgeSearchMessagesToUniversalSearch")(a,b.serverThreadKey,g,h,f)})});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeCallRestoreNativeOpHandler",["I64","MAWMpsGating","Promise","WAJids","WALogger","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSProtobufRestoreHandler").__setRef("MAWBridgeCallRestoreNativeOpHandler"),l=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("MAWBridgeCallRestoreNativeOpHandler");function a(a,c){var e=c.chatJid,f=c.decryptedMessagesProtobufs,g=c.echoMessages,m=c.hasMoreAfter,n=c.hasMoreBefore,o=c.isPointQuery,p=c.nextMessageTimestampMsAfter,q=c.nextMessageTimestampMsBefore,r=c.referenceTimestamp,s=c.requestId,t=c.taskSource;if(d("MAWMpsGating").isFullMpsEnabled())return(j||(j=b("Promise"))).resolve();if(f!=null)return k.load().then(function(a){return a.handleProtobufRestoreHelper(d("WAJids").threadIdForChatJid(e),{convertedProtobufs:f,type:"convertedProtobufs"},n,q,m,p,o,s,r,void 0,void 0,t,e)});else if(g!=null)return l.load().then(function(c){return c(a,0,(i||(i=d("I64"))).zero,g,n,q,m,p,o,d("WAJids").threadIdForChatJid(e),s,r,t,e).then(function(){return(j||(j=b("Promise"))).resolve()})});else d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to call restore native op - echo and protobuf messages are both null"])));return(j||(j=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["LSThreadBitOffset","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeDeleteGroupInviteHandler",function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.group_invites).getKeyRange(f)));return(h||(h=b("Promise"))).all(g.map(function(a){return e.group_invites["delete"](a.threadKey,a.inviterId,a.inviteeId)})).then(function(){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(f)),function(b){if(b==null)return;var c=d("LSThreadBitOffset").clear([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),e=c[0],f=c[1],g=c[2],h=c[3];c=c[4];return a.threads.put(babelHelpers["extends"]({},b,{capabilities:e,capabilities2:f,capabilities3:g,capabilities4:h,capabilities5:c,snippet:void 0}))})})});return function(a,b){return e.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWReplyBuilder_Forward",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g){"use strict";var h;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return void 0},buildReplyAttachmentType:function(a){return void 0},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return void 0},buildReplySnippet:function(a,b,c){return void 0},buildReplySourceId:function(a){return void 0},buildReplySourceType:function(){return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD)},buildReplySourceTypeV2:function(){return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return void 0},buildReplyType:function(a){return void 0},buildReplyUserId:function(a){return void 0}};g.MAWReplyBuilder_Forward=a}),98);
__d("MAWReplyBuilder_HighlightsTabPostReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return void 0},buildReplyAttachmentType:function(a){return void 0},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return""},buildReplySnippet:function(a,b,c){a=b===c;c="$PARTICIPANT_FIRST_NAME("+b+")";return a?h._(/*BTDS*/"You replied to their post").toString():h._(/*BTDS*/"{name} replied to your post",[h._param("name",c)]).toString()},buildReplySourceId:function(a){return a.replyToMsgId},buildReplySourceType:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplySourceTypeV2:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return a.timestampMs!=null?(j||(j=d("I64"))).of_float(a.timestampMs):void 0},buildReplyType:function(a){return(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return a.replyToUserId!=null?(j||(j=d("I64"))).of_string(a.replyToUserId):void 0}};g.MAWReplyBuilder_HighlightsTabPostReply=a}),226);
__d("MAWReplyBuilder_LightweightStatus",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return void 0},buildReplyAttachmentType:function(a){return void 0},buildReplyMediaExpirationTimestampMs:function(a){return a.replyMediaExpirationTimestampMs!=null?(i||(i=d("I64"))).of_float(a.replyMediaExpirationTimestampMs):void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return a.noteContent},buildReplySnippet:function(a,b,c){a=b===c;c="$PARTICIPANT_FIRST_NAME("+b+")";return a?h._(/*BTDS*/"You replied to their note").toString():h._(/*BTDS*/"{name} replied to your note",[h._param("name",c)]).toString()},buildReplySourceId:function(a){return a.replyToMsgId},buildReplySourceType:function(){return(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplySourceTypeV2:function(){return(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return void 0},buildReplyType:function(a){return(j||(j=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return a.replyToUserId!=null?(i||(i=d("I64"))).of_string(a.replyToUserId):void 0}};g.MAWReplyBuilder_LightweightStatus=a}),226);
__d("MAWBumpMessageMsgReplySnippet",["getMAWLocalizedBumpMsgReplySnippet"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.isAuthorMe,d=a.recipientName,e=a.replySenderIsMe,f=a.replySenderIsRecipient;a=a.senderName;var g="participantBumpedParticipantMessage";b&&e?g="currentUserBumpedOwnMessage":b?g="currentUserBumpedMessage":e?g="participantBumpedCurrentUserMessage":f&&(g="participantBumpedOwnMessage");return c("getMAWLocalizedBumpMsgReplySnippet")(g,a,d)}g.buildBumpMessageReplySnippet=a}),98);
__d("MAWReplyBuilder_Message",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWImageUtils","MAWMpsGating","MessagingAttachmentType","getErrorSafe"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return k(a)},buildReplyAttachmentPlaintextHash:function(a){return m(a)},buildReplyAttachmentType:function(a){return r(a)},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return n(a)},buildReplyMediaPreviewWidth:function(a){return o(a)},buildReplyMessageText:function(a){return(a=a.replyToLSMessage)==null?void 0:a.text},buildReplySnippet:function(a,b,c){return s(a,b,c)},buildReplySourceId:function(a){return a.replyToMsgId},buildReplySourceType:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)},buildReplyStatus:function(a){return t(a)},buildReplyTimestampMs:function(a){return(a=a.replyToLSMessage)==null?void 0:a.timestampMs},buildReplyType:function(a){return a.isBumpMsg?(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP):(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return(a=a.replyToLSMessage)==null?void 0:a.senderId}};function k(a){a=a.replyToLSAttachment;if(a==null)return;if(a.attachmentType===(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)||a.attachmentType===(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)&&a.receiverFetchId!=null){var b=a.attachmentFbid;try{return(j||(j=d("I64"))).of_string(b)}catch(f){var e=c("getErrorSafe")(f);c("FBLogger")("messenger_e2ee_web").mustfix("[MAWMsgReply] getReplyAttachmentIdFromReplyContent: Error converting attachmentFbid, %s, to a big int for msg, %s. Attachment of type, %s, is likely using plaintexthash as id, please review types requiring attachment id: %s",b,a.messageId,(j||(j=d("I64"))).to_string(a.attachmentType),e.message)}}}var l=new Set([(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER),i.ofNumber(c("MessagingAttachmentType").IMAGE),i.ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE),i.ofNumber(c("MessagingAttachmentType").VIDEO),i.ofNumber(c("MessagingAttachmentType").AUDIO),i.ofNumber(c("MessagingAttachmentType").FILE)]);function m(a){a=a.replyToLSAttachment;if(a==null)return;if(l.has(a.attachmentType))return a.attachmentFbid}function n(a){var b=a.replyToLSAttachment;if(b==null)return;return b.attachmentType===(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)?p(a).replyHeight:b.previewHeight}function o(a){var b=a.replyToLSAttachment;if(b==null)return;return b.attachmentType===(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)?p(a).replyWidth:b.previewWidth}function p(a){a=(a=a.replyToLSAttachment)!=null?a:{};var b=a.previewHeight;a=a.previewWidth;if(b==null||a==null)return{replyHeight:void 0,replyWidth:void 0};b=d("MAWImageUtils").boundHeightWidth((j||(j=d("I64"))).to_int32(b),j.to_int32(a),96*.8);a=b.height;b=b.width;return{replyHeight:j.of_int32(a),replyWidth:j.of_int32(b)}}function q(a){a=(a=a.replyToLSMessage)==null?void 0:a.text;return a!=null&&a!==""}function r(a){var b=a.replyToLSAttachment;if(b==null)return;switch(b.attachmentType){case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA):if(q(a))return;return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA);case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function s(a,b,c){var e=a.replyToLSMessage;if(e==null&&!d("MAWMpsGating").isMpsMessageRendering())return;var f=b===c,g="$PARTICIPANT_FIRST_NAME("+b+")";if(e==null||e.isUnsent===!0)if(f)return h._(/*BTDS*/"You replied to a removed message").toString();else return h._(/*BTDS*/"{name} replied to a removed message",[h._param("name",g)]).toString();e=e.senderId;c=(j||(j=d("I64"))).to_string(e)===c;b=b===j.to_string(e);e="$PARTICIPANT_FIRST_NAME("+j.to_string(e)+")";if(a.isBumpMsg){a=d("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:f,recipientName:e,replySenderIsMe:c,replySenderIsRecipient:b,senderName:g});return a==null?void 0:a.toString()}if(f&&c)return h._(/*BTDS*/"You replied to yourself").toString();if(b)return h._(/*BTDS*/"{other} replied to themself",[h._param("other",g)]).toString();if(f)return h._(/*BTDS*/"You replied to {other_name}",[h._param("other_name",e)]).toString();else if(c)return h._(/*BTDS*/"{other_name} replied to you",[h._param("other_name",g)]).toString();else return h._(/*BTDS*/"{other} replied to {other_name}",[h._param("other",g),h._param("other_name",e)]).toString()}function t(a){var b=a.replyToLSMessage;if(b==null){if(d("MAWMpsGating").isMpsMessageRendering())return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED);return}a=a.replyToLSAttachment;if(b.isUnsent===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED);if(b.isExpired===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").EXPIRED);if(b.isAdminMessage===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").VALID);switch(b.displayedContentTypes){case(i||(i=d("LSIntEnum"))).ofNumber(256):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED);case(i||(i=d("LSIntEnum"))).ofNumber(1):case(i||(i=d("LSIntEnum"))).ofNumber(4):case(i||(i=d("LSIntEnum"))).ofNumber(32):case(i||(i=d("LSIntEnum"))).ofNumber(64):case(i||(i=d("LSIntEnum"))).ofNumber(1024):case(i||(i=d("LSIntEnum"))).ofNumber(536870912):case(i||(i=d("LSIntEnum"))).ofNumber(4096):case(i||(i=d("LSIntEnum"))).ofNumber(16384):case(i||(i=d("LSIntEnum"))).ofNumber(134217728):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").VALID);case(i||(i=d("LSIntEnum"))).ofNumber(2):if(a!=null)switch(a.attachmentType){case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE):case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").VALID)}return void 0;case(i||(i=d("LSIntEnum"))).ofNumber(65536):case(i||(i=d("LSIntEnum"))).ofNumber(131072):case(i||(i=d("LSIntEnum"))).ofNumber(262144):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE);case(i||(i=d("LSIntEnum"))).ofNumber(32768):return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").UNKNOWN);default:return void 0}}g.MAWReplyBuilder_Message=a}),226);
__d("MAWReplyBuilder_PostMention",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWPostMentionXMASnippetFbt"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return void 0},buildReplyAttachmentType:function(a){return void 0},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return""},buildReplySnippet:function(a,b,e){a=a.mentionedUserId;if(a==null){c("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}a="$PARTICIPANT_FIRST_NAME("+a+")";b=b===e;e=b?d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(a):d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(a);return e.toString()},buildReplySourceId:function(a){return void 0},buildReplySourceType:function(){return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_POST_MENTION)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return a.timestampMs!=null?(i||(i=d("I64"))).of_float(a.timestampMs):void 0},buildReplyType:function(a){return(h||(h=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return a.mentionedUserId!=null?(i||(i=d("I64"))).of_string(a.mentionedUserId):void 0}};g.MAWReplyBuilder_PostMention=a}),98);
__d("MAWReplyBuilder_ProducerStoryReply",["fbt","EntMessageReplyType","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWMsgType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return a.storyMediaId!=null?(i||(i=d("I64"))).of_float(a.storyMediaId):void 0},buildReplyAttachmentPlaintextHash:function(a){return(a=a.storyMediaPlaintextHash)!=null?a:void 0},buildReplyAttachmentType:function(a){return(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return void 0},buildReplySnippet:function(a,b,c){a=b===c;c="$PARTICIPANT_FIRST_NAME("+b+")";return a?h._(/*BTDS*/"You replied to your story").toString():h._(/*BTDS*/"{name} replied to their story",[h._param("name",c)]).toString()},buildReplySourceId:function(a){return a.storyUrl},buildReplySourceType:function(){return(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY)},buildReplyStatus:function(a){return a.storyMsgType===d("MAWMsgType").MSG_TYPE.IMAGE?(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").VALID):void 0},buildReplyTimestampMs:function(a){return a.timestampMs!=null?(i||(i=d("I64"))).of_float(a.timestampMs):void 0},buildReplyType:function(a){return(j||(j=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return(i||(i=d("I64"))).of_string(a.storyOwnerId)}};g.MAWReplyBuilder_ProducerStoryReply=a}),226);
__d("MAWReplyBuilder_Story",["fbt","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return(a=a.storyMediaPlaintextHash)!=null?a:void 0},buildReplyAttachmentType:function(a){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO)},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return void 0},buildReplySnippet:function(a,b,c){var d=a.storyOwnerId===c;c=b===c;b="$PARTICIPANT_FIRST_NAME("+b+")";a="$PARTICIPANT_FIRST_NAME("+a.storyOwnerId+")";if(d)if(c)return h._(/*BTDS*/"You replied to your story").toString();else return h._(/*BTDS*/"{name} replied to your story",[h._param("name",b)]).toString();else if(c)return h._(/*BTDS*/"You replied to {name}'s story",[h._param("name",a)]).toString();else return void 0},buildReplySourceId:function(a){return a.storyUrl},buildReplySourceType:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY)},buildReplySourceTypeV2:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return a.timestampMs!=null?(j||(j=d("I64"))).of_float(a.timestampMs):void 0},buildReplyType:function(a){return void 0},buildReplyUserId:function(a){return(j||(j=d("I64"))).of_string(a.storyOwnerId)}};g.MAWReplyBuilder_StoryReply=a}),226);
__d("MAWReplyBuilder_StoryMention",["fbt","EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;a={buildReplyAttachmentId:function(a){return void 0},buildReplyAttachmentPlaintextHash:function(a){return void 0},buildReplyAttachmentType:function(a){return void 0},buildReplyMediaExpirationTimestampMs:function(a){return void 0},buildReplyMediaPreviewHeight:function(a){return void 0},buildReplyMediaPreviewWidth:function(a){return void 0},buildReplyMessageText:function(a){return void 0},buildReplySnippet:function(a,b,d){a=a.mentionedUserId;if(a==null){c("FBLogger")("messenger_e2ee_web").mustfix("Error building reply snippet without recipient ID");return}a="$PARTICIPANT_FIRST_NAME("+a+")";b=b===d;return b?h._(/*BTDS*/"You mentioned {name} in your story",[h._param("name",a)]).toString():h._(/*BTDS*/"Mentioned you in their story").toString()},buildReplySourceId:function(a){return void 0},buildReplySourceType:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)},buildReplySourceTypeV2:function(){return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_MENTION)},buildReplyStatus:function(a){return void 0},buildReplyTimestampMs:function(a){return a.timestampMs!=null?(j||(j=d("I64"))).of_float(a.timestampMs):void 0},buildReplyType:function(a){return(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR)},buildReplyUserId:function(a){return a.mentionedUserId!=null?(j||(j=d("I64"))).of_string(a.mentionedUserId):void 0}};g.MAWReplyBuilder_StoryMention=a}),226);
__d("MAWReplyBuilder",["MAWReplyBuilder_Forward","MAWReplyBuilder_HighlightsTabPostReply","MAWReplyBuilder_LightweightStatus","MAWReplyBuilder_Message","MAWReplyBuilder_PostMention","MAWReplyBuilder_ProducerStoryReply","MAWReplyBuilder_Story","MAWReplyBuilder_StoryMention"],(function(a,b,c,d,e,f,g){"use strict";var h={FB_POST_MENTION:d("MAWReplyBuilder_PostMention").MAWReplyBuilder_PostMention,FB_PRODUCER_STORY_REPLY:d("MAWReplyBuilder_ProducerStoryReply").MAWReplyBuilder_ProducerStoryReply,FB_STORY_MENTION:d("MAWReplyBuilder_StoryMention").MAWReplyBuilder_StoryMention,FORWARD:d("MAWReplyBuilder_Forward").MAWReplyBuilder_Forward,HIGHLIGHTS_TAB_POST_REPLY:d("MAWReplyBuilder_HighlightsTabPostReply").MAWReplyBuilder_HighlightsTabPostReply,LIGHTWEIGHT_STATUS:d("MAWReplyBuilder_LightweightStatus").MAWReplyBuilder_LightweightStatus,MESSAGE:d("MAWReplyBuilder_Message").MAWReplyBuilder_Message,STORY:d("MAWReplyBuilder_Story").MAWReplyBuilder_StoryReply};function i(a){return h[a]}function a(a){var b=i(a.replyType);return b.buildReplyUserId(a)}g.getReplyBuilder=i;g.getReplyUserIdNew=a}),98);
__d("MAWBridgeDeleteMessagesHandler",["EntMessageReplyType","FBLogger","I64","LSIntEnum","MAWCurrentUser","MAWDbMsg","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWReplyBuilder","MAWTimeUtils","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,c){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c.threadJid,"MAWBridgeDeleteMessagesHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (j||(j=b("Promise"))).all(c.messages.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(d("MsgrWebGating").isQuotedMessagesInLsEnabled()){var c=(yield a.messages.index("messageId").get(b.msgId));c!=null&&(yield a.messages["delete"](c.threadKey,c.timestampMs,c.messageId),yield k(a,c))}else yield a.messages["delete"](e,d("MAWTimeUtils").toTimestamp(b.ts),b.msgId)});return function(a){return c.apply(this,arguments)}}()))});return function(b,c){return a.apply(this,arguments)}}())}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(e.messageId))),g=d("MAWDbMsg").toMsgId(e.messageId);if(g==null){c("FBLogger")("messenger_e2ee_web").mustfix("[MAWBridgeDeleteMessagesHandler] Error extracting message id from message");return}yield (j||(j=b("Promise"))).all(f.map(function(b){var f={isBumpMsg:b.replyType===(h||(h=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP),replyToLSMessage:babelHelpers["extends"]({},e,{isUnsent:!0}),replyToMsgId:g,replyType:"MESSAGE"};b=babelHelpers["extends"]({},b,{replyAttachmentId:void 0,replyAttachmentPlaintextHash:void 0,replyAttachmentType:void 0,replyMediaExpirationTimestampMs:void 0,replyMediaPreviewHeight:void 0,replyMediaPreviewWidth:void 0,replySnippet:d("MAWReplyBuilder").getReplyBuilder(f.replyType).buildReplySnippet(f,(i||(i=d("I64"))).to_string(b.senderId),d("MAWCurrentUser").getID()),replyStatus:d("MAWReplyBuilder").getReplyBuilder(f.replyType).buildReplyStatus(f)});return a.messages.put(b)}))});return l.apply(this,arguments)}g.call=a}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[15]=new c.Map(),d[15].set("error_msg","Expected a nonempty query result"),d[15].set("code",c.i64.cast([0,3])),d[15].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[16]=c.createArray(),d[17]=(d[16].push(d[15]),d[16]),e=[void 0,d[16]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[15]=new c.Map(),d[15].set("backup_id",b.backupId),d[15].set("device_public_key_blob",b.devicePublicKeyBlob),d[15].set("device_private_key_blob",b.devicePrivateKeyBlob),d[15].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[15].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[15].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[15].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[15].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[15].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[15].set("orf_client_state_v2_blob",void 0),d[15].set("orf_v2_authority_level",void 0),d[15].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[15].set("device_id",b.deviceId),d[15].set("backup_tenancy",b.backupTenancy),d[15].set("encryption_version",b.encryptionVersion),d[15].set("revision_version",b.revisionVersion),d[15].set("initialize_restore_result",void 0),d[15].set("device_creation_timestamp_sec",void 0),d[15].set("authority_level",b.authorityLevel),e=[d[15],void 0],d[2]=e[0],d[3]=e[1])})},function(e){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(e){return d[15]=d[6].get("backup_id"),d[16]=d[6].get("device_public_key_blob"),d[17]=d[6].get("device_private_key_blob"),d[18]=d[6].get("epoch_storage_public_key_blob"),d[19]=d[6].get("epoch_storage_private_key_blob"),d[20]=d[6].get("epoch_auth_public_key_blob"),d[21]=d[6].get("epoch_auth_private_key_blob"),d[22]=d[6].get("mailbox_root_key_blob"),d[23]=d[6].get("ocmf_client_state_blob"),d[24]=d[6].get("orf_client_state_v2_blob"),d[25]=d[6].get("orf_v2_authority_level"),d[26]=d[6].get("oblivious_validation_token_blob"),d[27]=d[6].get("device_id"),d[28]=d[6].get("backup_tenancy"),d[29]=d[6].get("encryption_version"),d[30]=d[6].get("revision_version"),d[31]=d[6].get("initialize_restore_result"),d[32]=d[6].get("device_creation_timestamp_sec"),d[33]=d[6].get("authority_level"),c.i64.neq(d[27],void 0)?c.sequence([function(a){return d[36]=void 0,c.i64.neq(d[36],void 0)?c.resolve(d[37]=d[36]):c.sequence([function(a){return d[43]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[53]=(d[43].push(c.i64.cast([0,0])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[53]=(d[43].push(c.i64.cast([0,2])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]?d[53]=(d[43].push(c.i64.cast([0,3])),d[43]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[47]?d[53]=(d[43].push(c.i64.cast([0,4])),d[43]):0,d[48]=c.createArray(),d[49]=c.i64.of_int32(d[43].length),c.i64.gt(d[49],c.i64.cast([0,0]))?c.loopAsync(d[49],function(a){return d[53]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[53]).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[56]=(d[48].push(d[54]),d[48])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[53]=c.createArray(),d[54]=c.i64.of_int32(d[48].length),c.i64.gt(d[54],c.i64.cast([0,0]))?c.loopAsync(d[54],function(a){return d[56]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[56]).then(function(a){return a=a,d[57]=a[0],d[58]=a[1],a})},function(a){return d[59]=(d[53].push(c.i64.to_string(d[57])),d[53])}])}):c.resolve()},function(a){return d[55]=d[53].join(","),d[50]=d[55]}])},function(a){return d[48].some(function(a){return c.i64.eq(d[29],a)})?d[51]=d[29]:d[51]=void 0,c.i64.neq(d[51],void 0)?d[52]=d[51]:d[52]=void 0,d[37]=d[52]}])},function(e){return c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=c.i64.cast([0,0]),c.i64.neq(d[28],void 0)?d[39]=d[28]:d[39]=c.i64.cast([0,1]),d[40]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),void 0,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[40],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[40],c.i64.cast([0,0])))),c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],a})},function(b){return c.db.table(177).add({pk:void 0,pendingBackupTaskId:d[41],actionType:c.i64.cast([0,2]),contentType:c.i64.cast([0,2]),backupStatus:c.i64.cast([0,1]),listKey:a[0],uniqueKey:a[0],sortKey:a[1],persistentId:"",isInstamadillo:!1,lsTraceId:a[3],error:a[4]})},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message backup task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued message remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[45]=(d[43].push(", otid = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve()):(d[43]=c.createArray(),d[45]=(d[43].push("Successfully issued thread remove task. act thread id = "),d[43]),d[45]=(d[43].push(a[0]),d[43]),d[44]=d[43].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[44]].join("")),c.resolve())},function(a){return d[42]=new c.Map(),d[42].set("task_id",d[41]),a=[d[42],void 0],d[34]=a[0],d[35]=a[1]}]):c.sequence([function(b){return d[36]=c.createArray(),d[39]=(d[36].push("Skipping thread remove since EB is disabled. act thread id = "),d[36]),d[39]=(d[36].push(a[0]),d[36]),d[37]=d[36].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[37]].join("")),c.resolve()},function(a){return d[38]=new c.Map(),d[38].set("error_code",c.i64.cast([0,24])),d[38].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[38].set("error_message",""),a=[void 0,d[38]],d[34]=a[0],d[35]=a[1]}])},function(a){return a=[d[34],d[35]],d[7]=a[0],d[8]=a[1],a}]):c.sequence([function(b){return d[15]=d[5].get("errors"),d[16]=d[5].get("errors"),d[17]=c.createArray(),d[20]=(d[17].push("Skipping thread remove since EB is disabled. act thread id = "),d[17]),d[20]=(d[17].push(a[0]),d[17]),d[18]=d[17].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[18]].join("")),c.resolve()},function(a){return d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,1])),d[19].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[19].set("error_message",""),a=[void 0,d[19]],d[7]=a[0],d[8]=a[1]}])},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[7],d[8]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"];e.exports=a}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueThreadRemove"),e.actThreadId,e.sortKey,e.source,e.traceId,e.error);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["EBIsEbEnabled","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===2){if(!(yield d("EBIsEbEnabled").isEbEnabledLS(a)))return;yield c("LSIssueThreadRemoveStoredProcedure")(c("LSFactory")(a),{actThreadId:b.threadId,sortKey:b.ts.toString(),source:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB)})}});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeDeleteReactionHandler",function(a,c){return a.reactions["delete"](c,b.messageId,(h||(h=d("I64"))).of_string(b.actorId))})}g.call=a}),98);
__d("MAWBridgeEditMsgHistoryAddedHandler",["FBLogger","I64","LSMessageSendStatus","MAWChatJid","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages.index("optimistic")).getKeyRange(b)));return a==null?void 0:a.messageId});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield j(a,b.originalMsgExternalId));if(f==null){c("FBLogger")("messenger_web_e2ee").warn("original message for edit msg history is not present in lsdb");return}f={messageContent:b.msgContent.content,originalMessagePk:f,sendStatus:b.sendStatus!=null?(i||(i=d("I64"))).of_int32(b.sendStatus):(i||(i=d("I64"))).of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(i||(i=d("I64"))).of_int32(b.editTs),threadKey:e};return a.edit_message_history.put(f)});return m.apply(this,arguments)}function n(a,b,e,f,g){g={messageContent:b.msgContent.content,originalMessagePk:g,pk:f,sendStatus:b.sendStatus!=null?(i||(i=d("I64"))).of_int32(b.sendStatus):(i||(i=d("I64"))).of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),serverAdjustedEditTsMs:(i||(i=d("I64"))).of_int32(b.editTs),threadKey:e};return a.edit_message_history.put(g)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("MAWChatJid").toThreadKeyMaybe(a.tables,c.threadJid));if(a==null)return;var e=c.editMsgHistoryId,f=c.originalMsgId;b=f==null||e==null?l(b,c,a):n(b,c,a,e,f);return b});return p.apply(this,arguments)}function a(a,d,e){return(h||(h=b("Promise"))).all(e.map(function(b){return o(a,d,b)})).then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["MAWChatJid","MAWEphemeralSettingsUpdate","Promise","asyncToGeneratorRuntime","cr:17100"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("MAWChatJid").toThreadKeyMaybe(a,c.chatJid));return e!=null?d("MAWEphemeralSettingsUpdate").updateEphemeralSettingsWithTxn(a,c.ephemeralSettingArgs.ephemeralExpirationInSec,yield b("cr:17100").castUnixTimeToMillisTime(c.ephemeralSettingArgs.ephemeralLastUpdatedOrSetTimestamp),c.isEphemeralSettingReset,e,!1,c.author):(h||(h=b("Promise"))).resolve()});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeFulfillRestorePromisePayloadHandler",["MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a.success?(d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryUponReStore(a.value.traceId),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(a.value.traceId)):(d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(a.error.traceId,c("err")(a.error.message)),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a.error.traceId));return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeGroupInfoUpdatedHandler",["I64","MAWMiActMappingTableAPI","MWFBLogger","ODS","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=d("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","Middleware"]);function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c,e=(yield d("MAWMiActMappingTableAPI").getMappingRowForChatJid(a,b.chatJid));if(e==null){m.WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing thread key for chatJid: ",""])),b.chatJid);return}c=(c=b.threadName)!=null?c:void 0;e=e.serverThreadKey;a=a.threads;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e)));if(f==null){(k||(k=d("ODS"))).bumpEntityKey(3185,"armadillo_group_info_update","missing_thread");m.WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Missing thread for updating group with threadKey: ",""])),(l||(l=d("I64"))).to_string(e));return}else c==null&&(c=f.threadName,m.WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(['MAWDB groupInfo is missing "name" field for threadKey: ',""])),(l||(l=d("I64"))).to_string(e)));e=b.memberAddMode!=="all_member_add";yield a.put(babelHelpers["extends"]({},f,{needsAdminApprovalForNewParticipant:e,threadName:c}))});return n.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeGroupInviteUpdateHandler",function(a,f){var g=(i||(i=d("I64"))).of_string(e.inviterId);return(h||(h=b("Promise"))).all([d("MAWUpdateLSThreadCapabilities").setGroupInviteTxn(a,f,g)]).then(c("emptyFunction"))})}g.call=a}),98);
__d("MAWBridgeHandleCOPDigest",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeMediaExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeMediaExpiredHandler.bs",function(a,c){return a.attachments["delete"](c,b.msgId,String(b.plaintextHash))})}g.call=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWAdminMsgTypesGrouped","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWMsgType","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=new Set([(c=d("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,c.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,c.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,c.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION]),l=new Set([c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,c.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME]),m=h._(/*BTDS*/"Change").toString(),n=h._(/*BTDS*/"See All").toString(),o=h._(/*BTDS*/"Learn more").toString(),p=h._(/*BTDS*/"Learn more").toString(),q=h._(/*BTDS*/"actions you can take.").toString(),r=h._(/*BTDS*/"Go to other chat").toString(),s=h._(/*BTDS*/"View archived chat").toString(),t=h._(/*BTDS*/"View poll").toString(),u=h._(/*BTDS*/"Change").toString();function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas.index("ctaId"))));return a!=null?(j||(j=d("I64"))).add(a.ctaId,(j||(j=d("I64"))).one):(j||(j=d("I64"))).zero});return w.apply(this,arguments)}function x(a,b,c){b=[b,c];return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas).bounds({gte:b,lte:b}))}function y(a,b,c){if(a==null)return{showAdChoiceIcon:!1};if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};if(k.has(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:b,targetTitle:c,title:t};if(l.has(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:u};switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:o};case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:r};case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:s};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:n};case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.messenger.com/help/1145318292241859/?helpref=uk_lm",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:q};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return{actionUrl:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function z(a){if(a==null)return;if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";if(k.has(a))return"admin_msg_poll_details";if(l.has(a))return"admin_msg_change_theme";switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return"admin_msg_e2ee_thread";case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_uk_osa";case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:return"admin_msg_dual_thread_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case d("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:return"admin_msg_change_thread_limit_sharing_permission"}}function A(a,b,c,d,e){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){yield a.admin_message_ctas.add({actionContentBlob:f.actionContentBlob,actionUrl:f.actionUrl,adClientToken:f.adClientToken,adHelpUrl:f.adHelpUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,adPreferenceUrl:f.adPreferenceUrl,ctaId:b,messageId:e.msgId,showAdChoiceIcon:f.showAdChoiceIcon,targetId:f.targetId,targetTitle:f.targetTitle,threadKey:c,timestampMs:d("MAWTimeUtils").toTimestamp(e.ts),title:f.title})});return B.apply(this,arguments)}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield (i||(i=b("Promise"))).all([x(a,c,d.msgId),v(a)])),f=e[0];e=e[1];if(f!=null)return{ctaId:f.ctaId,ctaType:z(d.adminType),title:f.title};else{f=E(d.adminType,d);var g=F(d.adminType,d);f=y(d.adminType,f,g);yield A(a,e,c,d,f);return{ctaId:e,ctaType:z(d.adminType),title:f.title}}});return D.apply(this,arguments)}function a(a,c,e){var f=e.adminType;return f!=null&&(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(f)||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED||f!=null&&k.has(f)||f!=null&&l.has(f)||d("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(f))?C(a,c,e):(i||(i=b("Promise"))).resolve()}function E(a,b){if(a==null)return void 0;if(b.type_===d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE)return(j||(j=d("I64"))).of_string(b.externalId);return k.has(a)&&b.pollStanzaId!=null?(j||(j=d("I64"))).of_string(b.pollStanzaId):void 0}function F(a,b){if(a==null)return void 0;return k.has(a)?b.adminContent==null||b.adminContent.length===0?void 0:b.adminContent[b.adminContent.length-1]:void 0}g.getAdminMsgCTAContentByAdminType=y;g.getCtaTypeByAdminType=z;g.getAdminMsgCtaStep=a}),226);
__d("MAWMsgFetchLSReplyMsgAndAttachment",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWCurrentUser","MAWDbMsg","MAWReplyBuilder","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.replyContent;if(e==null||e.replyType!=="MESSAGE")return null;if(e.replyToMsgId==null)return null;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages.index("messageId")).getKeyRange(e.replyToMsgId)));f==null&&b._META_loaded_as_quoted_msg!==!0&&c("FBLogger")("messenger_e2ee_web").mustfix("[fetchReplyLocalViaLS] Reply snippet cannot be generated as original message is not in LSDB");var g;f!=null&&(g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(f.threadKey,f.messageId))));return babelHelpers["extends"]({},b,{replyContent:babelHelpers["extends"]({},e,{replyToLSAttachment:g,replyToLSMessage:f})})});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f,g=(yield (f=d("ReQL")).firstAsync(f.fromTableAscending(a.attachments).getKeyRange(e.threadKey,e.messageId)));f=(yield f.toArrayAsync(f.fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(e.messageId)));yield (j||(j=b("Promise"))).all(f.map(function(b){var f=b.replySourceTypeV2,j=b.replyType;if(f==null||j==null){c("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error getting reply snippet without replySourceTypeV2 and/or replyType");return}j=d("MAWDbMsg").toMsgId(e.messageId);if(j==null){c("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Error extracting message id from replyToLSMessage");return}if(b.messageId===e.messageId){c("FBLogger")("messenger_e2ee_web").mustfix("[updateMessagesReplyingToMsg] Message replying to itself should not be updated");return}if(f!==(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))return;f={isBumpMsg:b.replyType===(h||(h=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP),replyToLSAttachment:g,replyToLSMessage:e,replyToMsgId:j,replyType:"MESSAGE"};j=d("MAWReplyBuilder").getReplyBuilder(f.replyType);b=babelHelpers["extends"]({},b,{replyAttachmentId:j.buildReplyAttachmentId(f),replyAttachmentPlaintextHash:j.buildReplyAttachmentPlaintextHash(f),replyAttachmentType:j.buildReplyAttachmentType(f),replyMediaPreviewHeight:j.buildReplyMediaPreviewHeight(f),replyMediaPreviewWidth:j.buildReplyMediaPreviewHeight(f),replyMessageText:j.buildReplyMessageText(f),replySnippet:j.buildReplySnippet(f,(i||(i=d("I64"))).to_string(b.senderId),d("MAWCurrentUser").getID()),replySourceTimestampMs:j.buildReplyTimestampMs(f),replyStatus:j.buildReplyStatus(f),replyToUserId:j.buildReplyUserId(f)});return a.messages.put(b)}))});return l.apply(this,arguments)}g.fetchReplyLocalViaLS=a;g.updateMessagesReplyingToMsg=e}),98);
__d("LSMessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});f["default"]=a}),66);
__d("MAWBridgeBuildAdminMsg",["MAWAdminMsg","MAWAdminMsgNormalized","MAWSubscribeToContactNames","MAWThreadCustomizationUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null?void 0:a.replace(/\$/g,"$$$$")}function a(a,b,c){c===void 0&&(c=0);a=d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(b,a);var e=a.contactIds;a=a.contents;var f=d("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(b),g=d("MAWThreadCustomizationUtils").skipNicknameCheck(b);if(c===1){var i=d("MAWSubscribeToContactNames").getContactNameModeFromLocalizationType(b);return d("MAWAdminMsg").buildLocalizedString(a.map(h),e.map(function(a,b){return f&&b>0||g?i===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+a+")":"$CONTACT_FULL_NAME("+a+")":i===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+a+")":"$PARTICIPANT_FULL_NAME("+a+")"}),b)}return d("MAWAdminMsg").buildLocalizedString(a,e,b)}g.buildAdminMsgText=a}),98);
__d("LSTransportKey",[],(function(a,b,c,d,e,f){a=Object.freeze({ADVANCED_CRYPTO:"AdvancedCrypto",CARRIER_MESSAGING:"CarrierMessaging",FB_BROKER:"FBBroker",FB_LEGACY_BROKER:"FBLegacyBroker",TAM:"TAM",WHATS_APP:"WhatsApp",INSTAMADILLO:"Instamadillo",ENCRYPTED_BACKUPS:"EncryptedBackups",CLIENT_CONTACTS_PLACEHOLDER:"",ENCRYPTED_BACKUPS_MEDIA:"EncryptedBackupsMedia"});f["default"]=a}),66);
__d("MAWBridgeMsgUtils",["LSTransportKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=Object.keys(c("LSTransportKey")).find(function(b){return c("LSTransportKey")[b]===a});return b?c("LSTransportKey")[b]:"WhatsApp"}g.convertStringToLSTransportKeyType=a}),98);
__d("MAWMsgReply",["EntMessageReplyType","FBLogger","I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","MAWMsg","MAWMsgType","MAWReplyBuilder","MsgrWebGating","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.replySourceId!=null}function k(a,b,e,f,g){if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return;if(e==null)return;e!==(b!=null?b:"")&&c("FBLogger")("messenger_e2ee_web").warn("[MAWMsgReply][%s][%s] LS derived reply field generated does not match the legacy derived version for msg, %s. Expected: %s, Actual: %s",g,a,f,b,e)}function a(a){var b=l(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyUserId(c);k("getReplyUserId",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function l(a){a=a.replyToUserId;return a==null?void 0:(h||(h=d("I64"))).of_string(a)}function b(a){var b=m(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplySourceTypeV2();k("getReplySourceTypeV2",b!=null?(h||(h=d("I64"))).to_string(b):void 0,(h||(h=d("I64"))).to_string(c),a.msgId,a.type_);return c}function m(a){var b=a.isFBPostMention,e=a.isFBStoryMention,f=a.isForwarded,g=a.isMsgHighlightsTabFriendUpdatesReply,h=a.isNoteReply,k=a.isStoryProducerReply,l=a.isStoryReply,m=a.isStoryShare,n=a.replyMediaExpirationTimestampMs;a=j(a);if(b===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_POST_MENTION);if(f)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD);if(m!=null&&m)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(e!=null&&e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_MENTION);if(g!=null&&g)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(n!=null&&n<d("WATimeUtils").unixTime()&&h!==!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").EXPIRED_STORY);if(a)if(l!=null&&l)return k!=null&&k?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_PRODUCER_STORY_REPLY):(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY);else if(h===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)}function e(a){var b=n(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplySourceType();k("getReplySourceType",b!=null?(h||(h=d("I64"))).to_string(b):void 0,(h||(h=d("I64"))).to_string(c),a.msgId,a.type_);return c}function n(a){var b=j(a),e=a.isMsgHighlightsTabFriendUpdatesReply,f=a.isNoteReply,g=a.isStoryReply;a=a.isStoryShare;if(a!=null&&a)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE);if(e!=null&&e)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY);if(b)if(g!=null&&g)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY);else if(f===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)}function f(a){var b=o(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;var e=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplySourceId(c);c.replyType!=="FB_STORY_MENTION"&&c.replyType!=="FB_POST_MENTION"&&k("getReplySourceId",b,e,a.msgId,a.type_);return e}function o(a){if(a.replySourceId!=null)return a.replySourceId}function p(a){var b=q(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyTimestampMs(c);k("getReplyTimestampMs",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function q(a){if(a.replySourceTimestampMs!=null)return(h||(h=d("I64"))).of_float(a.replySourceTimestampMs)}function r(a){var b=s(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyMessageText(c);k("getReplyMessageText",b,c,a.msgId,a.type_);return c}function s(a){if(a.replySourceId!=null)return a.replyMessageText}function t(a){if(a.replySourceId!=null)return a.replyMentionedJids}function u(a){var b=v(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyType(c);k("getReplyType",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function v(a){return a.type_===d("MAWMsg").bumpExistingMessage?(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP):j(a)?(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").REGULAR):void 0}function w(a){return a.replySourceId==null?!1:x(a.replyStatusType)}function x(a){switch(a){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;default:return!1}}function y(a){return a.replyStatusType==="XMA"&&a.replyMessageText!=null}function z(a){var b=A(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyMediaPreviewHeight(c);k("getReplyMediaPreviewHeight",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function A(a){if(w(a))return a.replyMediaPreviewHeight!=null?(h||(h=d("I64"))).of_int32(a.replyMediaPreviewHeight):void 0}function B(a){var b=C(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyMediaPreviewWidth(c);k("getReplyMediaPreviewWidth",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function C(a){if(w(a))return a.replyMediaPreviewWidth!=null?(h||(h=d("I64"))).of_int32(a.replyMediaPreviewWidth):void 0}function D(a){var b=E(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyAttachmentType(c);k("getReplyAttachmentType",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function E(a){var b=a.replyStatusType;if(b==null)return;var e=b==="Raven";e=w(a)||e;if(!e)return;switch(b){case"Gif":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);case"Ptt":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"Sticker":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case"Video":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);case"Image":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);case"XMA":if(a.isIGXMAPostShare===!0||a.isIGXMAStoryShare===!0||a.isStoryHighlightShare===!0||a.isPostPrivateReply===!0||a.isMsgHighlightsTabFriendUpdatesReply===!0)return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").FEED_POST);if(y(a))return;return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA);case"DocumentFile":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER);case"ReceiverFetch":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);case"Raven":return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE);default:}}function F(a){var b=G(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyAttachmentId(c);k("getReplyAttachmentId",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function G(a){var b=a.replyMediaId,c=a.replyXMAId;if(w(a)&&b!=null)return c!=null?void 0:(h||(h=d("I64"))).of_float(b);if(b!=null||c==null)return;if(c!=null&&y(a))return;return(h||(h=d("I64"))).of_int32(c)}function H(a){var b=I(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyAttachmentPlaintextHash(c);k("getReplyAttachmentPlaintextHash",b,c,a.msgId,a.type_);return c}function I(a){var b=a.replyPlaintextHash;if(w(a)&&b!=null)return""+b}function J(a){var b=K(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyMediaExpirationTimestampMs(c);k("getReplyMediaExpirationTimestampMs",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function K(a){var b=a.isNoteReply,c=a.isStoryReply,e=a.replyMediaExpirationTimestampMs,f=a.replyMessageText,g=a.replyStatusType;if(b===!0){if(e!=null)return(h||(h=d("I64"))).of_float(e);return}b=D(a);e=F(a);if(g!=null&&g==="XMA"&&b==null){if(e!=null)return;if(f==null)return(h||(h=d("I64"))).zero}if(e!=null||!(c!=null&&c))return;return(h||(h=d("I64"))).zero}g.assertIfQuotedV2=k;g.getReplyUserId=a;g.getReplySourceTypeV2=b;g.getReplySourceType=e;g.getReplySourceId=f;g.getReplyTimestampMs=p;g.getReplyMessageText=r;g.getReplyMentionedJids=t;g.getReplyType=u;g.getReplyMediaPreviewHeight=z;g.getReplyMediaPreviewWidth=B;g.getReplyAttachmentType=D;g.getReplyAttachmentTypeLegacy=E;g.getReplyAttachmentId=F;g.getReplyAttachmentPlaintextHash=H;g.getReplyMediaExpirationTimestampMs=J}),98);
__d("MAWMsgReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","MAWMsgReply","MAWMsgType","MAWReplyBuilder","MsgrWebGating"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(a){case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.REVOKED:return c("LSReplyMessageStatus").DELETED;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return c("LSReplyMessageStatus").VALID;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return c("LSReplyMessageStatus").UNKNOWN;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return c("LSReplyMessageStatus").EXPIRED;default:return void 0}}function a(a){var b=k(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplyStatus(c);d("MAWMsgReply").assertIfQuotedV2("getLSReplyMessageStatus",b!=null?(h||(h=d("I64"))).to_string(b):void 0,c!=null?(h||(h=d("I64"))).to_string(c):void 0,a.msgId,a.type_);return c}function k(a){a=j(a.replyStatusType);if(a!=null)return(i||(i=d("LSIntEnum"))).ofNumber(a)}g.getReplyMessageStatus=j;g.getLSReplyMessageStatus=a}),98);
__d("MAWMsgReplySnippet",["fbt","FBLogger","I64","LSIntEnum","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBumpMessageMsgReplySnippet","MAWCurrentUser","MAWMpsGating","MAWMsgReply","MAWMsgReplyStatus","MAWMsgType","MAWPostMentionXMASnippetFbt","MAWReplyBuilder","MsgrWebGating","ODS"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function l(a){var b=a.isAuthorMe,e=a.isBumpMsg;e=e===void 0?!1:e;var f=a.isDeletedMsg,g=a.isFBPostMention;g=g===void 0?!1:g;var k=a.isFBStoryMention;k=k===void 0?!1:k;var l=a.isIGStoryMention;l=l===void 0?!1:l;var m=a.isIGXMAStoryShare;m=m===void 0?!1:m;var n=a.isMsgHighlightsTabFriendUpdatesReply;n=n===void 0?!1:n;var o=a.isNoteReply;o=o===void 0?!1:o;var p=a.isPostPrivateReply;p=p===void 0?!1:p;var q=a.isStoryHighlightShare;q=q===void 0?!1:q;var r=a.isStoryProducerReply,s=a.isStoryReaction;s=s===void 0?!1:s;var t=a.isStoryReply;t=t===void 0?!1:t;var u=a.isStoryShare;u=u===void 0?!1:u;var v=a.recipientName,w=a.replyAttachmentType,x=a.replySenderIsMe;x=x===void 0?!1:x;var y=a.replySenderIsRecipient;y=y===void 0?!1:y;a=a.senderName;switch(!0){case g:return b?d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(v):d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(a);case e:return d("MAWBumpMessageMsgReplySnippet").buildBumpMessageReplySnippet({isAuthorMe:b,recipientName:v,replySenderIsMe:x,replySenderIsRecipient:y,senderName:a});case q:return h._(/*BTDS*/"Sent a story highlight");case m&&w!=null&&(i||(i=d("I64"))).equal(w,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").FEED_POST)):return h._(/*BTDS*/"Sent a story");case b&&f:return h._(/*BTDS*/"You replied to a removed message");case b&&u:return h._(/*BTDS*/"You shared a story");case b&&s:return h._(/*BTDS*/"You reacted to their story");case b&&l:return v!=null?h._(/*BTDS*/"You mentioned \u0040{name} in your story",[h._param("name",v)]):h._(/*BTDS*/"You mentioned a participant in your story");case b&&k:return v!=null?h._(/*BTDS*/"You mentioned {name} in your story",[h._param("name",v)]):h._(/*BTDS*/"You mentioned a participant in your story");case l:case k:return h._(/*BTDS*/"Mentioned you in their story");case!b&&n:return h._(/*BTDS*/"{name} replied to your post",[h._param("name",a)]);case b&&n:return h._(/*BTDS*/"You replied to their post");case b&&p:return v!=null?h._(/*BTDS*/"You replied to {name}'s post",[h._param("name",v)]):h._(/*BTDS*/"You replied to a participant's post");case p:return h._(/*BTDS*/"{name} replied to your post",[h._param("name",a)]);case!b&&o:return h._(/*BTDS*/"{name} replied to your note",[h._param("name",a)]);case b&&o:return h._(/*BTDS*/"You replied to their note");case b&&x:return h._(/*BTDS*/"You replied to yourself");case b&&t:return r===!0?h._(/*BTDS*/"You replied to your story"):v!=null?h._(/*BTDS*/"You replied to {name}'s story",[h._param("name",v)]):h._(/*BTDS*/"You replied to a participant's story");case b:return v!=null?h._(/*BTDS*/"You replied to {other_name}",[h._param("other_name",v)]):h._(/*BTDS*/"You replied to a participant");case f:return h._(/*BTDS*/"{name} replied to a removed message",[h._param("name",a)]);case u:return h._(/*BTDS*/"{user} shared a story",[h._param("user",a)]);case s:return h._(/*BTDS*/"Reacted to your story");case y:return h._(/*BTDS*/"{other} replied to themself",[h._param("other",a)]);case x&&t:return r===!0?h._(/*BTDS*/"{name} replied to their story",[h._param("name",a)]):h._(/*BTDS*/"{name} replied to your story",[h._param("name",a)]);case x:return h._(/*BTDS*/"{other_name} replied to you",[h._param("other_name",a)]);default:return v!=null?h._(/*BTDS*/"{other} replied to {other_name}",[h._param("other",a),h._param("other_name",v)]):h._(/*BTDS*/"{other} replied to participant",[h._param("other",a)])}}function m(a,b,c,e,f){e===void 0&&(e=!1);if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(25))){var g=a?d("MAWPostMentionXMASnippetFbt").getCurrentUserSendPostMentionSnippetFbt(c):d("MAWPostMentionXMASnippetFbt").getParticipantSendPostMentionSnippetFbt(f);return g==null?void 0:g.toString()}if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(22)))if(a)return c!=null?h._(/*BTDS*/"You mentioned {name} in your story",[h._param("name",c)]).toString():h._(/*BTDS*/"You mentioned a participant in your story").toString();else return h._(/*BTDS*/"Mentioned you in their story").toString();if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(14)))if(a)return h._(/*BTDS*/"You replied to their post").toString();else return h._(/*BTDS*/"{name} replied to your post",[h._param("name",f)]).toString();if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(13)))if(a)return c!=null?h._(/*BTDS*/"You replied to {name}'s post",[h._param("name",c)]).toString():h._(/*BTDS*/"You replied to a participant's post").toString();else return h._(/*BTDS*/"{name} replied to your post",[h._param("name",f)]).toString();if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(18)))if(a)return h._(/*BTDS*/"You replied to their note").toString();else return h._(/*BTDS*/"{name} replied to your note",[h._param("name",f)]).toString();if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(24))){g=(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(24));if(a)return g?h._(/*BTDS*/"You replied to your story").toString():c!=null?h._(/*BTDS*/"You replied to {name}'s story",[h._param("name",c)]).toString():h._(/*BTDS*/"You replied to a participant's story").toString();else if(e)return g?h._(/*BTDS*/"{name} replied to their story",[h._param("name",f)]).toString():h._(/*BTDS*/"{name} replied to your story",[h._param("name",f)]).toString()}if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(12)))if(a)return h._(/*BTDS*/"You reacted to their story").toString();else return h._(/*BTDS*/"Reacted to your story").toString();if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(4)))if(a)return h._(/*BTDS*/"You shared a story").toString();else return h._(/*BTDS*/"{user} shared a story",[h._param("user",f)]).toString()}function a(a,b,e,f){var g=a.senderId;a=(i||(i=d("I64"))).to_string(a.senderId)===e;e=b===e;if(g==null||b==null)throw c("FBLogger")("messenger_e2ee_web").mustfix("Error getting reply snippet without replyToUserId or / and replying message sender");g="$PARTICIPANT_FIRST_NAME("+i.to_string(g)+")";b="$PARTICIPANT_FIRST_NAME("+b+")";e=m(e,f,g,a,b);return e==null?void 0:e.toString()}function b(a){var b=n(a);if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return b;var c=a.replyContent,e=a.sender;if(c==null)return;c=d("MAWReplyBuilder").getReplyBuilder(c.replyType).buildReplySnippet(c,e,d("MAWCurrentUser").getID());d("MAWMsgReply").assertIfQuotedV2("getReplySnippet",b,c,a.msgId,a.type_);return c}function n(a){if(d("MAWMpsGating").isMpsMessageRendering())return;var b=a.isAuthorMe,e=a.isFBPostMention;e=e===void 0?!1:e;var f=a.isFBStoryMention;f=f===void 0?!1:f;var g=a.isIGStoryMention;g=g===void 0?!1:g;var h=a.isIGXMAStoryShare,i=a.isMsgHighlightsTabFriendUpdatesReply;i=i===void 0?!1:i;var j=a.isNoteReply;j=j===void 0?!1:j;var m=a.isPostPrivateReply;m=m===void 0?!1:m;var n=a.isStoryHighlightShare;n=n===void 0?!1:n;var o=a.isStoryProducerReply,p=a.isStoryReaction,q=a.isStoryReply,r=a.isStoryShare;r=r===void 0?!1:r;var s=a.replySenderIsMe,t=a.replySourceId,u=a.replyStatusType,v=a.replyToUserId,w=a.sender;a=a.type_;a=a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;if(t==null&&!Boolean(q)&&!r&&!g&&!f&&!n&&!j&&!e)return;if(v==null||w==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error getting reply snippet without replyToUserId or sender");(k||(k=d("ODS"))).bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet");return(t=l({isAuthorMe:b,isBumpMsg:a,isDeletedMsg:d("MAWMsgReplyStatus").getReplyMessageStatus(u)===c("LSReplyMessageStatus").DELETED,isFBPostMention:e,isFBStoryMention:f,isIGStoryMention:g,isIGXMAStoryShare:h,isMsgHighlightsTabFriendUpdatesReply:i,isNoteReply:j,isPostPrivateReply:m,isStoryHighlightShare:n,isStoryProducerReply:o,isStoryReaction:p,isStoryReply:q,isStoryShare:r,recipientName:"$PARTICIPANT_FIRST_NAME("+v+")",replySenderIsMe:s,replySenderIsRecipient:w===v,senderName:"$PARTICIPANT_FIRST_NAME("+w+")"}))==null?void 0:t.toString()}g.buildLocalizedReplySnippetLegacy=l;g.getReplySnippetFromLSMessage=a;g.getReplySnippet=b}),226);
__d("MAWBridgeBuildMsg",["fbt","I64","LSAuthorityLevel","LSIntEnum","LSMessageUnsendabilityStatus","MAWAckLevel","MAWBridgeBuildAdminMsg","MAWBridgeBuildMsgMentions","MAWBridgeMsg","MAWBridgeMsgUtils","MAWJids","MAWMsg","MAWMsgReply","MAWMsgReplySnippet","MAWMsgReplyStatus","MAWMsgType","MAWTimeUtils","MAWVault","MWPBumpEntityKey","isMWBumpMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function k(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.filter(Boolean).reduce(function(a,b){return[].concat(a,b)},[])}function l(a){return a!=null?d("MAWVault").unvault(a):void 0}function m(a){return a!=null?d("MAWVault").vault(a):void 0}function n(a){return babelHelpers["extends"]({},a,{replyMessageText:m(a.replyMessageText),text:m(a.text)})}function o(a){var b=d("MAWMsgReply").getReplyMessageText(a),c=a.adminContent,e=a.adminType,f=a.adminVersion,g=a.content,i=a.isAdminMessage;g=g;i&&c!=null&&e!=null&&(g=d("MAWBridgeBuildAdminMsg").buildAdminMsgText(c,e,f));i=d("MAWMsgReplySnippet").getReplySnippet(a);a.type_===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&(g=m(a.replySourceId==null?"":i!=null?i:h._(/*BTDS*/"Bumped a message").toString()));c=k(a.mentionedJids,d("MAWMsgReply").getReplyMentionedJids(a));e=a.commands?a.commands:[];return c.length>0||e.length>0?n(d("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(l(g),c,l(b),e.length>0?e:void 0)):{replyMessageText:b,text:g}}function p(a){a=a.ephemeralDurationInSec;return a!=null?(i||(i=d("I64"))).of_int32(a):void 0}function a(a,b,e,f){var g,h=c("isMWBumpMessage")(b==null?void 0:b.replyType)?b==null?void 0:b.replyMessageText:b==null?void 0:b.text;e=k(e,b==null||(g=b.mentionIds)==null?void 0:g.split(",").map(d("MAWJids").toUserJid));b=f!=null?f:[];return e.length>0||b.length>0?n(d("MAWBridgeBuildMsgMentions").buildMsgTextWithMentions(l(a),e,l(h),b)):{replyMessageText:h,text:a}}function b(a,b){var e,f=o(a),g=a.type_===d("MAWMsg").unsent;e=d("MAWTimeUtils").toTimestamp(g?(e=a.originalTs)!=null?e:a.ts:a.ts);if(d("MAWMsgReply").getReplyAttachmentId(a)!=null&&d("MAWMsgReply").getReplyAttachmentPlaintextHash(a)==null){var h;d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","new_message_handler_for_reply_type_"+(i||(i=d("I64"))).to_float((h=d("MAWMsgReply").getReplyAttachmentType(a))!=null?h:(i||(i=d("I64"))).zero))}h=d("MAWBridgeMsgUtils").convertStringToLSTransportKeyType(a.transportKey);return babelHelpers["extends"]({},f,{adminMsgCtaId:b==null?void 0:b.ctaId,adminMsgCtaTitle:b==null?void 0:b.title,adminMsgCtaType:b==null?void 0:b.ctaType,authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:g||!a.isAuthorMe?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageUnsendabilityStatus").DENY_FOR_NON_SENDER):void 0,displayedContentTypes:d("MAWMsg").getDisplayedContentTypes(a.type_,a.isForwarded,a.isExpiredXmaMsg,a.replySourceId!=null,a.unsupportedType,a.xmaMessageType),editCount:(i||(i=d("I64"))).of_int32((f=a.editCount)!=null?f:0),ephemeralDurationInSec:p(a),groupId:(b=a.groupId)!=null?b:void 0,groupIndex:a.groupIndex!=null?(i||(i=d("I64"))).of_float(a.groupIndex):void 0,groupSize:a.groupSize!=null?(i||(i=d("I64"))).of_float(a.groupSize):void 0,hotEmojiSize:d("MAWBridgeMsg").getSpecialTextSize(a),isCollapsed:(f=a.isCollapsed)!=null?f:!1,isUnsent:g,messageId:a.msgId,primarySortKey:i.of_float(a.sortOrderMs),replyAttachmentId:d("MAWMsgReply").getReplyAttachmentId(a),replyAttachmentPlaintextHash:d("MAWMsgReply").getReplyAttachmentPlaintextHash(a),replyAttachmentType:d("MAWMsgReply").getReplyAttachmentType(a),replyMediaExpirationTimestampMs:d("MAWMsgReply").getReplyMediaExpirationTimestampMs(a),replyMediaPreviewHeight:d("MAWMsgReply").getReplyMediaPreviewHeight(a),replyMediaPreviewWidth:d("MAWMsgReply").getReplyMediaPreviewWidth(a),replySnippet:d("MAWMsgReplySnippet").getReplySnippet(a),replySourceId:d("MAWMsgReply").getReplySourceId(a),replySourceTimestampMs:d("MAWMsgReply").getReplyTimestampMs(a),replySourceType:d("MAWMsgReply").getReplySourceType(a),replySourceTypeV2:d("MAWMsgReply").getReplySourceTypeV2(a),replyStatus:d("MAWMsgReplyStatus").getLSReplyMessageStatus(a),replyToUserId:d("MAWMsgReply").getReplyUserId(a),replyType:d("MAWMsgReply").getReplyType(a),sendStatus:d("MAWAckLevel").levelToMessagingSendStatus(a.ack),sendStatusV2:d("MAWAckLevel").levelToMessagingSendStatusV2(a.ack),timestampMs:e,transportKey:h,unsentTimestampMs:g?d("MAWTimeUtils").toTimestamp(a.ts):void 0})}g.getEphemeralDurationInSec=p;g.buildOptimisticMessage=a;g.buildNewAndUpdatedMessageSharedParams=b}),226);
__d("MAWUpdateMsg",["MAWBridgeBuildMsg","MAWMsgFetchLSReplyMsgAndAttachment","MsgrWebGating","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=d("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(b,e);e=babelHelpers["extends"]({},c,b);yield a.messages.upsert([c.threadKey,c.timestampMs,c.messageId],e);d("MsgrWebGating").isQuotedMessagesInLsEnabled()&&(yield d("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(a,e))});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeMsgUpdatedHandler",["FBLogger","MAWAdminMsgCTA","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsgFetchLSReplyMsgAndAttachment","MAWUpdateMsg","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.chatJid,"MAWBridgeMsgUpdatedHandler",function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){var g,h=(yield (g=d("ReQL")).firstAsync(g.fromTableAscending(b.messages.index("messageId")).getKeyRange(e.msgId)));g=(yield g.firstAsync(g.fromTableAscending(b.attachments).getKeyRange(f,e.msgId)));if(h==null){c("FBLogger")("messenger_web").info("existing message is null for type %s, and attachment is null: %s",e.type_,g==null);return}g=(yield d("MAWAdminMsgCTA").getAdminMsgCtaStep(b,f,e));f=(yield i(a,e));return d("MAWUpdateMsg").call(b,f,h,g)});return function(a,b){return f.apply(this,arguments)}}())}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(d("MsgrWebGating").isQuotedMessagesInLsEnabled()){a=(yield d("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(a,c));return a!=null?a:c}return(h||(h=b("Promise"))).resolve(c)});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWEphemeralMessageExpirationStorage",["LSDatabaseSingleton","MAWBridgeDeleteMessagesHandler","Promise","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){yield (i||(i=b("Promise"))).all(c.map(function(b){var c=b.ts,e=b.msgId;e={msgId:e,ts:c};c=b.threadJid;b=[e];e={messages:b,threadJid:c};return d("MAWBridgeDeleteMessagesHandler").call(a,e)})),j["delete"](e)});return l.apply(this,arguments)}function m(a,e,g){return c("setTimeout")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("promiseDone")(g.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(b,a,e)});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":67"))}),g)}function a(a,b,d,e){a=j.get(d);var f;if(a==null)f=[b];else{c("clearTimeout")(a.timeoutId);var g=a.msgs.map(function(a){return a.msgId}).indexOf(b.msgId)===-1;g&&a.msgs.push(b);f=a.msgs}g=m(f,d,e);j.set(d,{expirationTs:d,msgs:f,timeoutId:g})}function e(a){var b=a.msgId;a=j.get(a.countdownTs);if(a==null)return;b=a.msgs.map(function(a){return a.msgId}).indexOf(b);if(b>-1){a.msgs.splice(b,1);return}}g.setMessageForExpiration=a;g.clearMessageFromExpiration=e}),98);
__d("MAWBridgeMsgsStartCountdownHandler",["I64","MAWEphemeralMessageExpirationStorage","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return c.msgs.reduce(function(c,e){return c.then(function(){d("MAWEphemeralMessageExpirationStorage").setMessageForExpiration(a,e,e.countdownTs,e.millisecondsUntilCountdownTs);(i||(i=d("I64"))).of_int32(e.millisecondsUntilCountdownTs);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeMsgsStartCountdownHandler",function(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(c,d("MAWTimeUtils").toTimestamp(e.ts),e.msgId)).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){if(c==null)return(h||(h=b("Promise"))).resolve();c=babelHelpers["extends"]({},c,{ephemeralExpirationTs:(i||(i=d("I64"))).of_float(e.countdownTs)});yield a.messages.put(c)});return function(a){return c.apply(this,arguments)}}())})})},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("MAWMedia",["LSIntEnum","MAWDbMedia","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===d("MAWDbMedia").MEDIA_TYPE.IMAGE)return b!=null?(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE):(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a===d("MAWDbMedia").MEDIA_TYPE.VIDEO)return b!=null?(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO):(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else if(a===d("MAWDbMedia").MEDIA_TYPE.PTT)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a===d("MAWDbMedia").MEDIA_TYPE.GIF)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(a===d("MAWDbMedia").MEDIA_TYPE.STICKER)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER);else if(a===d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE)return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE);return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE)}g.mediaTypeToMessageAttachmentType=a}),98);
__d("MAWBridgeNewMediaHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSThreadMediaGalleryGroup","MAWDbMedia","MAWMedia","MAWMediaManagerUiIntegrationCheck","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","WAMediaHdType","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,f,g,h){var k=b.messagesSortOrderMs?(i||(i=d("I64"))).of_float(b.messagesSortOrderMs[e]):b.sortOrderMs!=null?(i||(i=d("I64"))).of_float(b.sortOrderMs):(i||(i=d("I64"))).of_float(b.ts*1e3);return{accessibilitySummaryText:b.accessibilitySummaryText,attachmentFbid:f,attachmentIndex:(f=a==null?void 0:a.attachmentIndex)!=null?f:(i||(i=d("I64"))).zero,attachmentType:(f=a==null?void 0:a.attachmentType)!=null?f:d("MAWMedia").mediaTypeToMessageAttachmentType(b.mediaType,b.ephemeralMediaViewMode),authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:b.ephemeralMediaState!=null?(i||(i=d("I64"))).of_int32(b.ephemeralMediaState):a==null?void 0:a.ephemeralMediaState,ephemeralMediaViewMode:b.ephemeralMediaViewMode!=null?(i||(i=d("I64"))).of_int32(b.ephemeralMediaViewMode):a==null?void 0:a.ephemeralMediaViewMode,filename:(f=(f=b.filenames!=null?b.filenames[e]:null)!=null?f:b.defaultFilename)!=null?f:a==null?void 0:a.filename,filesize:b.filesize==null?a==null?void 0:a.filesize:(i||(i=d("I64"))).of_int32(b.filesize),hasMedia:b.hasMedia||c("justknobx")._("4927")&&d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()&&b.hasPreviewMedia===!0,hasXma:!1,isHd:((f=b.hdTypes)==null?void 0:f[e])===d("WAMediaHdType").HD_TYPE_HQ_4K,isSharable:!1,messageId:e,offlineAttachmentId:g,playableDurationMs:b.duration==null?a==null?void 0:a.playableDurationMs:(i||(i=d("I64"))).of_int32(b.duration),previewHeight:b.previewHeight==null?a==null?void 0:a.previewHeight:(i||(i=d("I64"))).of_int32(b.previewHeight),previewHeightLarge:b.previewHeightLarge==null?a==null?void 0:a.previewHeightLarge:(i||(i=d("I64"))).of_int32(b.previewHeightLarge),previewWidth:b.previewWidth==null?a==null?void 0:a.previewWidth:(i||(i=d("I64"))).of_int32(b.previewWidth),previewWidthLarge:b.previewWidthLarge==null?a==null?void 0:a.previewWidthLarge:(i||(i=d("I64"))).of_int32(b.previewWidthLarge),threadKey:h,timestampMs:k,titleText:b.accessibilitySummaryText,transportKey:(f=b.transportKey)!=null?f:"WhatsApp"}}function l(a,b){var c=b.hasPreviewMedia!=null;return{id:a,mainMediaStatus:b.hasMedia?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(4),mainMediaStatusDetails:"initial_media_download",previewMediaStatus:c?b.hasPreviewMedia===!0?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(4):void 0,previewMediaStatusDetails:c?"initial_media_download":void 0}}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=c.mediaId,g=c.msgIds,j=c.offlineAttachmentId,l=c.plaintextHash;yield o(a,c);var m=q(f,l),n=j!=null?j:m;f=!1;var p=r(c),s=null;s=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments_ranges_v2__generated).getKeyRange(e).filter(function(a){return(i||(i=d("I64"))).equal(a.mediaGroup,p)})));yield (h||(h=b("Promise"))).all(g.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=a.attachments,h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g).getKeyRange(e,b)));b=k(h,c,b,m,n,e);c.skipShouldUpdateHasMore!==!0&&s!=null&&(i||(i=d("I64"))).le(b.timestampMs,s.minTimestampMs)&&(f=!0);if(h!=null){return g.upsert([h.threadKey,h.messageId,h.attachmentFbid],babelHelpers["extends"]({},b,{transportKey:(h=h.transportKey)!=null?h:b.transportKey}))}else return g.add(b)});return function(a){return g.apply(this,arguments)}}()));if(s!=null&&s.hasMoreBefore!==!0&&f){l=babelHelpers["extends"]({},s,{hasMoreBefore:!0});yield a.attachments_ranges_v2__generated.upsert([s.threadKey,s.mediaGroup,s.minTimestampMs],l)}});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.mediaId,f=b.plaintextHash;if(f==null){c("FBLogger")("messenger_web_media").mustfix("[NewMedia] No valid media plaintextHash found in reducer %s",e);return}e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.client_media_status).getKeyRange(f)));e=e!=null&&!(i||(i=d("I64"))).equal(e.mainMediaStatus,(j||(j=d("LSIntEnum"))).ofNumber(4));if(e)return;yield a.client_media_status.add(l(f,b))});return p.apply(this,arguments)}function q(a,b){return""+(b!=null?b:a.toString())}function r(a){switch(a.mediaType){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").FILES_ONLY);default:return(j||(j=d("LSIntEnum"))).ofNumber(c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS)}}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeNewMediaHandler",function(a,c){return m(a,b,c)})}g.getAttachmentFromBridgeMedia=k;g.callWithoutWaitingForAnything=m;g.getAttachmentID=q;g.call=a}),98);
__d("LSUpsertAttachmentRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(17).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(c){return b.db.table(17).add({threadKey:a[0],mediaGroup:a[1],minTimestampMs:a[2],maxTimestampMs:b.i64.cast([2328,1316134911]),hasMoreBefore:a[3],hasMoreAfter:!1,isLoadingBefore:!1,isLoadingAfter:!1,lastLoadedMessageId:a[4]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertAttachmentRangeStoredProcedure";a.__tables__=["attachments_ranges_v2__generated"];e.exports=a}),null);
__d("LSUpsertAttachmentRangeStoredProcedure",["LSSynchronousPromise","LSUpsertAttachmentRange","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpsertAttachmentRange"),e.threadKey,e.mediaGroup,e.newMinTs,e.hasMoreBefore,e.newLastLoadedMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeNewMediaRangeHandler",["I64","LSFactory","LSIntEnum","LSUpsertAttachmentRangeStoredProcedure","MAWMediaGalleryEBTaggingUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","cr:20238","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeNewMediaRangeHandler",function(a,f){var g=(h||(h=d("I64"))).of_float(e.earliestLoadedMediaTs),j=e.mediaGalleryGroup,k=b("cr:20238")!=null?b("cr:20238").getMediaRestoreEBRange().getRange(f):null;k=Boolean(k==null?void 0:k.hasMoreBefore)&&d("MAWMediaGalleryEBTaggingUtils").isMediaGalleryGroupSupportedForTaggedRestore(j);k=e.hasMoreBefore||k;return c("LSUpsertAttachmentRangeStoredProcedure")(c("LSFactory")(a),{hasMoreBefore:k,mediaGroup:(i||(i=d("LSIntEnum"))).ofNumber(j),newLastLoadedMessageId:e.lastLoadedMessageId,newMinTs:g,threadKey:f})})}function a(a,b){return j(a,b).then(c("emptyFunction"))}g.call=a}),98);
__d("MAWBridgeNewMsgHandler",["FBLogger","I64","LSIntEnum","LSMessageRenderingType","LSQuickReplyType","MAWAdminMsgCTA","MAWBridgeBuildMsg","MAWBridgeNewMediaHandler","MAWMpsGating","MAWMsgFetchLSReplyMsgAndAttachment","MAWThreadLoadingState","MAWUpdateMsg","MAWXMAUtils","MWPBumpEntityKey","MpsMessageToBridge","MpsOverBridge","MpsToBridgeMessageId","MpsTypes","MsgrWebGating","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e){return babelHelpers["extends"]({},d("MAWBridgeBuildMsg").buildNewAndUpdatedMessageSharedParams(b,e),{forwardScore:(i||(i=d("I64"))).of_float(b.forwardingScore),isAdminMessage:b.isAdminMessage,isForwarded:b.isForwarded,messageRenderingType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageRenderingType").DEFAULT),offlineThreadingId:b.externalId,quickReplyType:j.ofNumber(c("LSQuickReplyType").NONE),senderId:i.of_string(b.sender),threadKey:a,viewFlags:j.ofNumber(0)})}function l(a,b,c){var e=b.mediaId,f=b.offlineAttachmentId,g=b.plaintextHash;e=d("MAWBridgeNewMediaHandler").getAttachmentID(e,g);g=f!=null?f:e;return d("MAWBridgeNewMediaHandler").getAttachmentFromBridgeMedia(null,b,c,e,g,a)}function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){c.unsupportedType==="stickerReceiverFetchMessage"&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_msg_handler","sticker_receiver_fetch_fallback");c=k(b,c,e);e=(yield a.messages.add(c));e[0];c=e[1];e=e[2];d("MsgrWebGating").isQuotedMessagesInLsEnabled()&&(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,c,e)).then(function(b){if(b!=null)return d("MAWMsgFetchLSReplyMsgAndAttachment").updateMessagesReplyingToMsg(a,b)}))});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c,e=b.replyContent;if(e==null||e.replyType!=="MESSAGE")return b;var f=(yield d("MpsOverBridge").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-first"},debug:{purpose:"reply-fetch-local"},messageId:d("MpsToBridgeMessageId").bridgeMsgIdToMps(e.replyToMsgId).messageId,threadId:d("MpsTypes").toThreadId(b.chatJid)}));f=f.value;if(f==null)return b;c=(c=d("MpsMessageToBridge").mpsFullMessagetoBridge(f))==null?void 0:c.topLevel;f=(f=d("MpsMessageToBridge").mpsFullMessagetoBridge(f))==null?void 0:f.supplementals;if(c!=null&&c.kind==="bridgeMsg"){var g;f=f==null?void 0:f.find(function(a){return a.kind==="bridgeMedia"});(f==null?void 0:f.kind)==="bridgeMedia"&&(g=l(a,f.value,e.replyToMsgId));return babelHelpers["extends"]({},b,{replyContent:babelHelpers["extends"]({},e,{replyToLSAttachment:g,replyToLSMessage:k(a,c.value,void 0)})})}return b});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return c;a=(yield d("MAWMsgFetchLSReplyMsgAndAttachment").fetchReplyLocalViaLS(a,c));if(a==null)return c;return d("MAWMpsGating").isMpsMessageRendering()&&((e=a.replyContent)==null?void 0:e.replyToLSAttachment)==null&&((e=a.replyContent)==null?void 0:e.replyToLSMessage)==null?o(b,c):a});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages.index("optimistic")).getKeyRange(c.externalId)));if(e!=null)return(h||(h=b("Promise"))).resolve(e);return d("MsgrWebGating").isQuotedMessagesInLsEnabled()?d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages.index("messageId")).getKeyRange(c.msgId)):(h||(h=b("Promise"))).resolve(null)});return t.apply(this,arguments)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=(yield q(a,e,b));if(d("MAWXMAUtils").isXMAStoryReply(b.xmaMessageType))return;if(b.isExpiredMsg===!0){c("FBLogger")("messenger_web").mustfix("Attempted to insert an expired message");return}var f=(yield d("MAWAdminMsgCTA").getAdminMsgCtaStep(a,e,b)),g=(yield s(a,b));g==null?yield m(a,e,b,f):yield d("MAWUpdateMsg").call(a,b,g,f);d("MAWMpsGating").isMpsMessageRendering()&&((e=b.editCount)!=null?e:0)>0&&(yield w(a,b))});return v.apply(this,arguments)}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(c.msgId)));yield (h||(h=b("Promise"))).all(e.map(function(b){b=babelHelpers["extends"]({},b,{replyMessageText:c.content});return a.messages.put(b)}))});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(a,b.chatJid));if(c==null)return;yield u(a,b,c)});return z.apply(this,arguments)}function a(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){yield (h||(h=b("Promise"))).all(c.map(function(b){return y(a,b)}))});return A.apply(this,arguments)}g.callWithoutWaitingForAnything=u;g.call=y;g.bulkCall=a}),98);
__d("LSGroupPollEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});f["default"]=a}),66);
__d("LSPollQuestionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CHOOSE_MULTIPLE:0,MOST_LIKELY_TO:1,NON_POLL:2});f["default"]=a}),66);
__d("MAWBridgePollUtils",["fbt","FBLogger","I64","MAWUserJidWrapper","WAJids"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){return a.toSorted(function(a,b){if(a.numVotes!==b.numVotes)return b.numVotes-a.numVotes;return!(i||(i=d("I64"))).equal(a.sortKeyVotingTimestamp,b.sortKeyVotingTimestamp)?(i||(i=d("I64"))).compare(b.sortKeyVotingTimestamp,a.sortKeyVotingTimestamp):(i||(i=d("I64"))).compare(a.sortKeyCreationTimestamp,b.sortKeyCreationTimestamp)})}function b(a){if(a===d("WAJids").AUTHOR_SYSTEM)throw c("FBLogger")("messenger_web").mustfixThrow("Not a valid author for poll vote");return a===d("WAJids").AUTHOR_ME?(i||(i=d("I64"))).of_string(d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())):(i||(i=d("I64"))).of_string(d("WAJids").userIdFromJid(a))}function e(a,b){switch(a.length){case 0:return h._(/*BTDS*/"{option_name}, no votes",[h._param("option_name",b)]);case 1:return h._(/*BTDS*/"{option_name}, Voted for by {voter_name}",[h._param("option_name",b),h._param("voter_name",a[0])]);case 2:return h._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name}",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1])]);case 3:return h._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {third_voter_name}",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1]),h._param("third_voter_name",a[2])]);default:return h._(/*BTDS*/"{option_name}, Voted for by {first_voter_name}, {second_voter_name} and {remaining_count} others",[h._param("option_name",b),h._param("first_voter_name",a[0]),h._param("second_voter_name",a[1]),h._param("remaining_count",a.length-2)])}}g.sortPollXMAOptions=a;g.getContactIdForAuthor=b;g.getListItemAccessibilityText=e}),226);
__d("QuestionPollStage",[],(function(a,b,c,d,e,f){a=Object.freeze({NOMINATING:0,VOTING:1,CLOSED:2});f["default"]=a}),66);
__d("MAWBridgeNewPollHandler",["fbt","FBLogger","I64","LSAuthorityLevel","LSGroupPollEventType","LSIntEnum","LSPollQuestionType","MAWBridgePollUtils","MAWDbPoll","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MNLSXMALayoutType","MNLSXMATemplateType","MessagingAttachmentType","Promise","QuestionPollStage","ReQL","WAJids","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=3;function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.contactIdForCurrentUser,f=b.dbPoll,g=b.latestUpdateMsgId,h=b.latestUpdateTimestampMs;b=b.transportKey;var i=f.pollStanzaId;i=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments.index("idx_attachments_collapsible_id")).getKeyRange(c,(k||(k=d("I64"))).of_string(i))));i!=null&&(yield a.attachments["delete"](i.threadKey,i.messageId,i.attachmentFbid));yield o(a,f,c,g,h,e,b)});return n.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.dbPoll.chatJid,"BridgeNewPollHandler",function(a,c){return m(a,b,c)})}function o(a,b,c,d,e,f,g){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,m){var n=e.latestSenderTimestampsMs,o=e.pollParticipantCount,p=e.pollStanzaId,r=(k||(k=d("I64"))).of_string(p),t=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.polls).getKeyRange(r)));t==null&&(yield s(a,r,g,h,f));t=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.poll_options_v2).getKeyRange(r)));var v=new Map(e.pollOptions.entries().map(function(a){var b=a[0];a=a[1];return[d("MAWDbPoll").generateStableIdFromOptionHash(b,p).toString(),a]})),w=new Map();t.forEach(function(a){var b=(k||(k=d("I64"))).to_string(a.optionId);w.set(b,babelHelpers["extends"]({},w.get(b),{lsOption:a}))});v.entries().forEach(function(a){var b=a[0];a=a[1];a.optionText!=null&&w.set(b,babelHelpers["extends"]({},w.get(b),{mawDbOption:a}))});t=w.entries().toArray().sort(function(a,b){a[0];a=a[1];var d=a.lsOption;a=a.mawDbOption;b[0];b=b[1];var e=b.lsOption;b=b.mawDbOption;d=c("nullthrows")((d=d==null?void 0:d.optionText)!=null?d:a==null?void 0:a.optionText);e=c("nullthrows")((a=e==null?void 0:e.optionText)!=null?a:b==null?void 0:b.optionText);return d.localeCompare(e)});v=(yield (i||(i=b("Promise"))).all(t.map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var f=b[0];b=b[1];var g=b.lsOption;b=b.mawDbOption;e=(k||(k=d("I64"))).of_int32(e);if(g==null&&b==null)return null;f=k.of_string(f);if(b==null){var h=c("nullthrows")(g);h=h.optionText;yield a.poll_options_v2.upsert([r,f],babelHelpers["extends"]({},c("nullthrows")(g),{sortKeyCreationTimestamp:e}));var i=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.poll_votes_v2).getKeyRange(r,f,j)));return{contactIds:[j],hasVoteFromCurrentUser:!0,numVotes:1,optionId:f,optionText:h,progressBarFilledPercentage:Math.floor(1/o*100),sortKeyCreationTimestamp:e,sortKeyVotingTimestamp:i!=null?i.timestampMs:(k||(k=d("I64"))).zero}}return q(a,r,f,c("nullthrows")(b.optionText),g,b,e,n,j,o)});return function(a,b){return e.apply(this,arguments)}}())).then(function(a){return a.filter(Boolean)}));t=v.some(function(a){return a.hasVoteFromCurrentUser});v=d("MAWBridgePollUtils").sortPollXMAOptions(v).slice(0,l);yield u(a,e,f,g,h,v,t,m)});return p.apply(this,arguments)}function q(a,b,c,d,e,f,g,h,i,j){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,l,m,n,o){j=j.voteAuthors;j=Array.from(j).map(function(a){var b=m.get(a);if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Missing latest sender timestamp for poll voter from dbPoll");return{contactId:d("MAWBridgePollUtils").getContactIdForAuthor(a),latestSenderTimestampMs:b}});var p=h!=null?yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.poll_votes_v2).getKeyRange(e,f)):[],q=p.find(function(a){return(k||(k=d("I64"))).equal(a.contactId,n)}),r=m.get(d("WAJids").AUTHOR_ME),s=q!=null&&(r==null||r<(k||(k=d("I64"))).to_float(q.timestampMs));yield (i||(i=b("Promise"))).all(p.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if((k||(k=d("I64"))).equal(b.contactId,n)&&s)return;yield a.poll_votes_v2["delete"](e,f,b.contactId)});return function(a){return c.apply(this,arguments)}}()));yield i.all(j.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.contactId;b=b.latestSenderTimestampMs;yield a.poll_votes_v2.put({contactId:c,optionId:f,pollId:e,timestampMs:(k||(k=d("I64"))).of_float(b)})});return function(a){return c.apply(this,arguments)}}()));r=(k||(k=d("I64"))).of_float(Math.max.apply(Math,j.map(function(a){return a.latestSenderTimestampMs}).concat([0])));p=s?(k||(k=d("I64"))).max(c("nullthrows")(q==null?void 0:q.timestampMs),r):r;q=j.length+(s?1:0);r={optionId:f,optionText:g,pollId:e,sortKeyCreationTimestamp:l,sortKeyVotingTimestamp:p,voteCount:k.of_int32(q)};h!=null?yield a.poll_options_v2.upsert([e,f],r):yield a.poll_options_v2.add(r);h=j.map(function(a){return a.contactId});s&&h.push(n);return{contactIds:h,hasVoteFromCurrentUser:s||j.find(function(a){return(k||(k=d("I64"))).equal(a.contactId,n)})!=null,numVotes:q,optionId:f,optionText:g,progressBarFilledPercentage:Math.floor(q/o*100),sortKeyCreationTimestamp:l,sortKeyVotingTimestamp:p}});return r.apply(this,arguments)}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){e={authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),lastUpdateMessageEventType:j.ofNumber(c("LSGroupPollEventType").QUESTION_CREATION),lastUpdateMessageId:e,lastUpdateMessageTimestampMs:(k||(k=d("I64"))).of_float(f),pollId:b,pollStage:j.ofNumber(c("QuestionPollStage").VOTING),pollType:j.ofNumber(c("LSPollQuestionType").CHOOSE_MULTIPLE),threadKey:g};yield a.polls.put(e)});return t.apply(this,arguments)}function u(a,b,c,d,e,f,g,h){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,m,n,o,p){var q=e.pollStanzaId,r=e.title;if(n.length===0){c("FBLogger")("messenger_web").mustfix("Items length for poll XMA should be greater than 0");return}var s=(yield d("ReQL").toArrayAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants,[]).getKeyRange(f),d("ReQL").fromTableAscending(a.contacts,["name","id","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"])).map(function(a){a[0];a=a[1];return a}).filter(Boolean))),t=new Map(s.map(function(a){return[(k||(k=d("I64"))).to_string(a.id),a]}));s=n.map(function(a){var b=a.contactIds,c=a.optionId,e=a.optionText;a=a.progressBarFilledPercentage;var f=b.reduce(function(a,b){var c;b=t.get((k||(k=d("I64"))).to_string(b));a.contactUrlExpirations.push((b==null?void 0:b.profilePictureUrlExpirationTimestampMs)!=null?(k||(k=d("I64"))).to_string(b.profilePictureUrlExpirationTimestampMs):"");a.contactUrlFallbacks.push((c=b==null?void 0:b.profilePictureFallbackUrl)!=null?c:"");a.contactUrls.push((c=b==null?void 0:b.profilePictureUrl)!=null?c:"");(b==null?void 0:b.name)!=null&&a.contactNames.push(b.name);return a},{contactNames:[],contactUrlExpirations:[],contactUrlFallbacks:[],contactUrls:[]}),g=f.contactNames,h=f.contactUrlExpirations,i=f.contactUrlFallbacks;f=f.contactUrls;return{listItemAccessibilityText:d("MAWBridgePollUtils").getListItemAccessibilityText(g,e).toString(),listItemContactUrlExpirationTimestampList:h.length>0?h.join(", "):void 0,listItemContactUrlFallbackList:i.length>0?i.join(", "):void 0,listItemContactUrlList:f.length>0?f.join(", "):void 0,listItemId:c,listItemProgressBarFilledPercentage:(k||(k=d("I64"))).of_int32(a),listItemTitleText:e,listItemTotalCount:k.of_int32(b.length)}});var u=(k||(k=d("I64"))).of_string(q);o=o?h._(/*BTDS*/"Change vote").toString():h._(/*BTDS*/"Vote").toString();var v={actionContentBlob:r,attachmentFbid:q,attachmentIndex:k.zero,ctaId:u,messageId:g,targetId:k.of_string(q),threadKey:f,title:o,type_:"xma_poll_details_card"},w={attachmentCta1Id:u,attachmentFbid:q,attachmentIndex:k.zero,cta1Title:o,cta1Type:"xma_poll_details_card",defaultActionEnableExtensions:!1,defaultCtaId:u,defaultCtaTitle:o,defaultCtaType:"xma_poll_details_card",faviconUrlExpirationTimestampMs:k.zero,messageId:g,threadKey:f};o={attachmentCta1Id:u,attachmentFbid:q,attachmentIndex:k.zero,attachmentType:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:j.ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),collapsibleId:k.of_string(q),cta1Title:o,cta1Type:"xma_poll_details_card",defaultCtaId:u,defaultCtaTitle:o,defaultCtaType:"xma_poll_details_card",hasMedia:!1,hasXma:!0,isSharable:!1,listItemsDescriptionText:r,listItemsId:k.of_string(q),messageId:g,threadKey:f,timestampMs:k.of_float(m),transportKey:p!=null?p:"WhatsApp",xmaLayoutType:j.ofNumber(c("MNLSXMALayoutType").XCENTER),xmasTemplateType:j.ofNumber(c("MNLSXMATemplateType").GENERIC_SHARE)};r=e.pollOptions.values().filter(function(a){return a.optionText!=null}).toArray().length;m=r>l?h._(/*BTDS*/"_j{\"*\":\"{additional_option_count} more options\",\"_1\":\"{additional_option_count} more option\"}",[h._plural(r-l),h._param("additional_option_count",r-l)]).toString():void 0;p=babelHelpers["extends"]({},o,{listItemAccessibilityText1:s[0].listItemAccessibilityText,listItemAccessibilityText2:s.length>1?s[1].listItemAccessibilityText:void 0,listItemAccessibilityText3:s.length>2?s[2].listItemAccessibilityText:void 0,listItemContactUrlExpirationTimestampList1:s[0].listItemContactUrlExpirationTimestampList,listItemContactUrlExpirationTimestampList2:s.length>1?s[1].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlExpirationTimestampList3:s.length>2?s[2].listItemContactUrlExpirationTimestampList:void 0,listItemContactUrlFallbackList1:s[0].listItemContactUrlFallbackList,listItemContactUrlFallbackList2:s.length>1?s[1].listItemContactUrlFallbackList:void 0,listItemContactUrlFallbackList3:s.length>2?s[2].listItemContactUrlFallbackList:void 0,listItemContactUrlList1:s[0].listItemContactUrlList,listItemContactUrlList2:s.length>1?s[1].listItemContactUrlList:void 0,listItemContactUrlList3:s.length>2?s[2].listItemContactUrlList:void 0,listItemId1:s[0].listItemId,listItemId2:s.length>1?s[1].listItemId:void 0,listItemId3:s.length>2?s[2].listItemId:void 0,listItemProgressBarFilledPercentage1:s[0].listItemProgressBarFilledPercentage,listItemProgressBarFilledPercentage2:s.length>1?s[1].listItemProgressBarFilledPercentage:void 0,listItemProgressBarFilledPercentage3:s.length>2?s[2].listItemProgressBarFilledPercentage:void 0,listItemsSecondaryDescriptionText:m,listItemTitleText1:n[0].optionText,listItemTitleText2:n.length>1?n[1].optionText:void 0,listItemTitleText3:n.length>2?n[2].optionText:void 0,listItemTotalCount1:s[0].listItemTotalCount,listItemTotalCount2:s.length>1?s[1].listItemTotalCount:void 0,listItemTotalCount3:s.length>2?s[2].listItemTotalCount:void 0});yield (i||(i=b("Promise"))).all([a.attachments.upsert([f,g,q],p),a.attachment_ctas.upsert([u],v),a.attachment_items.upsert([q,k.zero],w)])});return v.apply(this,arguments)}g.POLL_OPTIONS_THRESHOLD=l;g.call=a}),226);
__d("MAWBridgeNewReceiverFetchInfoHandler",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWBridgeSendAndReceive","MAWImageUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMpsGating","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("MAWMpsGating").isMpsMessageRendering())return a;var b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getReceiverFetchInfo",{receiverFetchId:a.receiverFetchId}));return babelHelpers["extends"]({},a,b)});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield j(b));var e=b.msgId,f=b.receiverFetchId,g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(c,e)));b=n(b,c,g);yield a.attachments.upsert([c,e,f],b)});return m.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"BridgeNewReceiverFetchInfoHandler",function(a,c){return l(a,b,c)})}function n(a,b,e){var f=a.accessibilitySummaryText,g=a.mimetype,j=a.msgId,k=a.previewHeight,l=a.previewUrl,m=a.previewUrlExpirationTimestampMs,n=a.previewWidth,p=a.ravenSettings,q=a.receiverFetchId,r=a.sortOrderMs,s=a.transportKey;a=a.type;a=o(a);k=d("MAWImageUtils").boundHeightWidth(k,n,d("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE);n=k.height;k=k.width;var t=l!=null?l:e==null?void 0:e.previewUrl,u=m!=null?(h||(h=d("I64"))).of_float(m):e==null?void 0:e.previewUrlExpirationTimestampMs;t=d("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(t,u);return{accessibilitySummaryText:f,attachmentFbid:q,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:a,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),ephemeralMediaState:(p==null?void 0:p.ephemeralMediaState)!=null?(h||(h=d("I64"))).of_int32(p.ephemeralMediaState):void 0,ephemeralMediaViewMode:(p==null?void 0:p.ephemeralMediaViewMode)!=null?(h||(h=d("I64"))).of_int32(p.ephemeralMediaViewMode):void 0,hasMedia:t,hasXma:!1,isSharable:!1,messageId:j,previewHeight:h.of_int32(n),previewUrl:l!=null?l:e==null?void 0:e.previewUrl,previewUrlExpirationTimestampMs:m!=null?(h||(h=d("I64"))).of_float(m):e==null?void 0:e.previewUrlExpirationTimestampMs,previewUrlMimeType:g,previewWidth:h.of_int32(k),receiverFetchId:q,threadKey:b,timestampMs:h.of_float(r),transportKey:s!=null?s:"WhatsApp"}}function o(a){switch(a){case"sticker":return(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER);default:throw c("FBLogger")("messenger_web_media").mustfixThrow("Unsupported type for MAWBridgeNewReceiverFetchInfoHandler")}}g.call=a;g.composeAttachment=n}),98);
__d("MAWBridgeHandleReceiverFetchXMA",["FBLogger","I64","LSIntEnum","LSXmaContentType","MAWBridgeXMAUtils","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f,g,j,k=b.contentRef,l=b.defaultPreviewMediaId,m=b.msgId,n=b.subtitleText,o=b.titleText,p=b.xmaId;if(m==null)return;f=(f=b==null||(g=b.defaultCTA)==null?void 0:g.actionUrl)!=null?f:b==null||(j=b.defaultCTA)==null?void 0:j.nativeUrl;var q=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(e,m)));p=String(p);var r=(h||(h=d("I64"))).zero,s;if(k!=null)try{k=JSON.parse(k);k!=null&&(s=JSON.stringify(k))}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Failed to parse msg.contentRef as XmsgMsgrXmaContentRefDataclass")}else c("FBLogger")("messenger_web_sharing").mustfix("contentRef is empty for a MSG_RECEIVER_FETCH XMA");k=(yield d("MAWBridgeXMAUtils").addAttachmentCtas(a,b,e,m,p,{}));b=k.attachmentCta1Id;var t=k.attachmentCta2Id,u=k.attachmentCta3Id;k=k.defaultCtaId;f={actionUrl:f!=null?f:void 0,attachmentCta1Id:b,attachmentCta2Id:t,attachmentCta3Id:u,attachmentFbid:p,attachmentIndex:h.zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:h.zero,defaultCtaId:k,hasMedia:!1,hasXma:!0,hasXmaPreview:l!=null,isSharable:!0,messageId:m,receiverFetchId:s,subtitleText:n,threadKey:e,timestampMs:r,titleText:o,transportKey:"WhatsApp",xmaContentType:i.ofNumber(c("LSXmaContentType").MSG_RECEIVER_FETCH)};q!=null?yield a.attachments.upsert([q.threadKey,q.messageId,q.attachmentFbid],f):yield a.attachments.add(f);return});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeNewXMAHandler",["MAWBridgeHandleReceiverFetchXMA","MAWBridgeXMAUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","WAArmadilloXMA.pb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=String(b.xmaId),f=b.msgId;if(f==null)return;var g=b.targetType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;if(g)return d("MAWBridgeHandleReceiverFetchXMA").call(a,b,c);g=(yield d("MAWBridgeXMAUtils").getExistingAttachmentAndAttachmentCtas(a,c,f));var h=g[0];g=g[1];g=(yield d("MAWBridgeXMAUtils").addAttachmentCtas(a,b,c,f,e,g));var i=g.attachmentCta1Id,j=g.attachmentCta2Id,k=g.attachmentCta3Id;g=g.defaultCtaId;b=d("MAWBridgeXMAUtils").composeAttachmentXMA(b,c,e,f,i,j,k,g,"MAWBridgeNewXMAHandler");h!=null?yield a.attachments.upsert([h.threadKey,h.messageId,h.attachmentFbid],b):yield a.attachments.add(b)});return i.apply(this,arguments)}function j(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeNewXMAHandler",function(a,c){return h(a,b,c)})}function a(a,b){return j(a,b)}g.callWithoutWaitingForAnything=h;g.call=a}),98);
__d("LSCreateE2EEMetadataThread",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][createE2EEMetadataThread] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[19]=new c.Map(),d[19].set("error_msg","Expected a nonempty query result"),d[19].set("code",c.i64.cast([0,3])),d[19].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[20]=c.createArray(),d[21]=(d[20].push(d[19]),d[20]),e=[void 0,d[20]],d[2]=e[0],d[3]=e[1]):(b=a.item,d[19]=new c.Map(),d[19].set("backup_id",b.backupId),d[19].set("device_public_key_blob",b.devicePublicKeyBlob),d[19].set("device_private_key_blob",b.devicePrivateKeyBlob),d[19].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[19].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[19].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[19].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[19].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[19].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[19].set("orf_client_state_v2_blob",void 0),d[19].set("orf_v2_authority_level",void 0),d[19].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[19].set("device_id",b.deviceId),d[19].set("backup_tenancy",b.backupTenancy),d[19].set("encryption_version",b.encryptionVersion),d[19].set("revision_version",b.revisionVersion),d[19].set("initialize_restore_result",void 0),d[19].set("device_creation_timestamp_sec",void 0),d[19].set("authority_level",b.authorityLevel),e=[d[19],void 0],d[2]=e[0],d[3]=e[1])})},function(a){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(a){return d[19]=d[6].get("backup_id"),d[20]=d[6].get("device_public_key_blob"),d[21]=d[6].get("device_private_key_blob"),d[22]=d[6].get("epoch_storage_public_key_blob"),d[23]=d[6].get("epoch_storage_private_key_blob"),d[24]=d[6].get("epoch_auth_public_key_blob"),d[25]=d[6].get("epoch_auth_private_key_blob"),d[26]=d[6].get("mailbox_root_key_blob"),d[27]=d[6].get("ocmf_client_state_blob"),d[28]=d[6].get("orf_client_state_v2_blob"),d[29]=d[6].get("orf_v2_authority_level"),d[30]=d[6].get("oblivious_validation_token_blob"),d[31]=d[6].get("device_id"),d[32]=d[6].get("backup_tenancy"),d[33]=d[6].get("encryption_version"),d[34]=d[6].get("revision_version"),d[35]=d[6].get("initialize_restore_result"),d[36]=d[6].get("device_creation_timestamp_sec"),d[37]=d[6].get("authority_level"),c.i64.neq(d[31],void 0)?c.sequence([function(a){return d[39]=void 0,c.i64.neq(d[39],void 0)?c.resolve(d[40]=d[39]):c.sequence([function(a){return d[52]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]?d[62]=(d[52].push(c.i64.cast([0,0])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[62]=(d[52].push(c.i64.cast([0,2])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[62]=(d[52].push(c.i64.cast([0,3])),d[52]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[56]?d[62]=(d[52].push(c.i64.cast([0,4])),d[52]):0,d[57]=c.createArray(),d[58]=c.i64.of_int32(d[52].length),c.i64.gt(d[58],c.i64.cast([0,0]))?c.loopAsync(d[58],function(a){return d[62]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[52],d[62]).then(function(a){return a=a,d[63]=a[0],d[64]=a[1],a})},function(a){return d[65]=(d[57].push(d[63]),d[57])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[62]=c.createArray(),d[63]=c.i64.of_int32(d[57].length),c.i64.gt(d[63],c.i64.cast([0,0]))?c.loopAsync(d[63],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[57],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=(d[62].push(c.i64.to_string(d[66])),d[62])}])}):c.resolve()},function(a){return d[64]=d[62].join(","),d[59]=d[64]}])},function(a){return d[57].some(function(a){return c.i64.eq(d[33],a)})?d[60]=d[33]:d[60]=void 0,c.i64.neq(d[60],void 0)?d[61]=d[60]:d[61]=void 0,d[40]=d[61]}])},function(a){return c.i64.neq(d[40],void 0)?d[41]=d[40]:d[41]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[42]=d[32]:d[42]=c.i64.cast([0,1]),c.nativeOperation(b("LSBase64Encode.nop"),d[27]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[26]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=new c.Map(),d[45].set("ocmf_client_state_blob",d[43]==null?"":d[43]),d[45].set("mailbox_root_key",d[44]==null?"":d[44]),d[46]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[52]=(d[46].push(a.epochId),d[46])})},function(a){return d[50]="Queried locally available epochs. Count: ",d[47]=c.i64.of_int32(d[46].length),d[51]=c.i64.to_string(d[47]),d[48]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[48],d[50],d[48],d[51]].join("")),c.resolve()},function(a){return d[49]=new c.Map(),d[49].set("device_id",d[31]),d[49].set("raw_tokens",d[45]),d[49].set("locally_available_epochs",d[46]),d[38]=d[49]}]):c.resolve(d[38]=void 0)},function(a){return d[7]=d[38]}]):c.resolve((d[19]=d[5].get("errors"),d[20]=d[5].get("errors"),d[7]=void 0))},function(a){return d[8]=c.i64.random(),d[9]=void 0==null?c.i64.to_string(d[8]):void 0,d[9]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679677570]),d[9],!0,void 0):c.resolve()},function(a){return d[9]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679677570]),d[9],"issue_task"):c.resolve()},function(a){return d[9]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679677570]),d[9],"request_type","THREAD_POINT_QUERY"):c.resolve()},function(e){return d[10]=new c.Map(),d[10].set("wa_jid",a[0]),d[10].set("offline_thread_key",a[1]),d[10].set("thread_type",a[2]),d[10].set("folder_type",a[3]),d[10].set("bump_timestamp_ms",a[4]),d[10].set("tam_thread_subtype",c.i64.cast([0,0])),d[10].set("created_by_local_device",a[5]),d[10].set("device_context",d[7]),d[10].set("qpl_instance_key",d[9]),d[10].set("should_run_privacy_and_folder_checks",!1),d[11]=d[10].get("offline_thread_key"),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[11]),c.i64.cast([0,388]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[13]=c.i64.of_float(Date.now()),d[14]=c.i64.random(),d[16]="Finishing execution. Execution time: ",d[17]=c.i64.to_string(c.i64.sub(d[13],d[0])),d[18]=" ms",d[15]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][createE2EEMetadataThread] ",d[15],d[16],d[15],d[17],d[15],d[18]].join("")),c.i64.eq(c.i64.mod_(d[14],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[19]=",",d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"createE2EEMetadataThread",[d[16],d[19],d[17],d[19],d[18]].join(""),d[20],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCreateE2EEMetadataThreadStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSCreateE2EEMetadataThreadStoredProcedure",["LSCreateE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateE2EEMetadataThread"),e.waJid,e.offlineThreadKey,e.threadType,e.folderType,e.bumpTimestampMs,e.createdByLocalDevice);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCreateOfflineThreadingIDStoredProcedure",["LSCreateOfflineThreadingID","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateOfflineThreadingID"),e.timestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWCreateOptimisticThread",["I64","LSAuthorityLevel","LSCreateOfflineThreadingIDStoredProcedure","LSFactory","LSIntEnum","LSMailboxType","LSRtcCallState","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("LSCreateOfflineThreadingIDStoredProcedure")(c("LSFactory")(a),{timestampMs:(h||(h=d("I64"))).of_float(Date.now())}));a=a[0];return a});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),folderName:"inbox",lastReadWatermarkTimestampMs:(h||(h=d("I64"))).of_float(0),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),ongoingCallState:i.ofNumber(c("LSRtcCallState").NO_ONGOING_CALL),parentThreadKey:h.zero,threadKey:b,threadType:i.ofNumber(15)};yield a.threads.put(e);return b});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));yield l(a,b);return b});return n.apply(this,arguments)}g.createOfflineThreadingId=j;g.createOptimisticThreadWithThreadKey=l;g.createOptimisticThread=a}),98);
__d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2",["DedupMiThreadCreationCache","FBLogger","I64","LSAuthorityLevel","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","MAWCreateOptimisticThread","MAWFolderUtils","MAWJids","MAWThreadLoadingState","MAWThreadUtils","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="[Occamadillo][CreateE2EEMetadataThreadHandlerV2]";function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.bumpTimestampMs,f=b.creationSource,g=b.folderId,h=b.jid;b=b.optimisticThreadKey;p(f,h);b=b!=null?yield a.threads.get((i||(i=d("I64"))).of_string(b)):null;if(b!=null&&d("DedupMiThreadCreationCache").DedupMiThreadCreationCache.has(h)){t(h);return}if(b!=null&&m(b)){q(h,(i||(i=d("I64"))).to_string(b.threadKey));return}e={bumpTimestampMs:e,createdByLocalDevice:f==="outgoing_message",folderType:d("MAWFolderUtils").systemFolderToLSCoreClientFolder(g),offlineThreadKey:yield n(b,h,a),threadType:d("MAWThreadUtils").getLSThreadTypeFromJid(h),waJid:d("MAWJids").convertChatJidToIntJid(h)};s(e);return c("LSCreateE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),e).then(function(){d("DedupMiThreadCreationCache").addToDedupMiThreadCreationCache(h)})});return l.apply(this,arguments)}function m(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a.authorityLevel);switch(a){case c("LSAuthorityLevel").CLIENT_PARTIAL:case c("LSAuthorityLevel").OPTIMISTIC:case c("LSAuthorityLevel").SERVER_PARTIAL:return!1;case c("LSAuthorityLevel").AUTHORITATIVE:case c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT:case c("LSAuthorityLevel").CLIENT_AUTHORITATIVE_DELETE:return!0;default:a;throw c("FBLogger")("messenger_web").mustfixThrow("Unknown authority level")}}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(a!=null)return(h||(h=b("Promise"))).resolve(a.threadKey);a=(yield d("MAWCreateOptimisticThread").createOfflineThreadingId(e));r(c,a);yield (h||(h=b("Promise"))).all([d("MAWCreateOptimisticThread").createOptimisticThreadWithThreadKey(e,a),d("MAWThreadLoadingState").markActThreadLoadingAsCompleted(e,{intJid:d("MAWJids").convertChatJidToIntJid(c),threadKey:a})]);return a});return o.apply(this,arguments)}function p(a,b){c("FBLogger")("messenger_web").info(k+" handler called from %s for jid %s",a,b)}function q(a,b){c("FBLogger")("messenger_web").info(k+" handler returned early for jid %s because thread %s was already authoritative",a,b)}function r(a,b){c("FBLogger")("messenger_web").info(k+" no thread exists for jid %s, creating optimistic thread with key %s",a,(i||(i=d("I64"))).to_string(b))}function s(a){c("FBLogger")("messenger_web").info(k+" Calling LSCreateE2EEMetadataThreadStoredProcedure with params: bumpTimestampMs: %s, createdByLocalDevice: %s, folderType: %s, offlineThreadKey: %s, offlineThreadKeySource: %s, threadType: %s, waJid: %s",(i||(i=d("I64"))).to_string(a.bumpTimestampMs),a.createdByLocalDevice,i.to_string(a.folderType),i.to_string(a.offlineThreadKey),i.to_string(a.threadType),i.to_string(a.waJid))}function t(a){c("FBLogger")("messenger_web").info(k+" LSCreateE2EEMetadataThreadStoredProcedure has already been called for jid %s, early returning",a)}g.call=a}),98);
__d("MAWBridgeParticipantRemovedHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeParticipantRemovedHandler",function(a,c){return a.participants["delete"](c,(h||(h=d("I64"))).of_string(b.userId))})}g.call=a}),98);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWMsg","MAWRavenUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ephemeralMediaState"],i,j;function a(a,c){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c.threadJid,"MAWBridgeRavenActionMsgForUIHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=a.attachments;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e,c.ravenMsgId)));if(e==null)return(j||(j=b("Promise"))).resolve();if(e.ephemeralMediaState==null)return(j||(j=b("Promise"))).resolve();var f=(i||(i=d("I64"))).to_int32(e.ephemeralMediaState);if(e.ephemeralMediaViewMode==null)return(j||(j=b("Promise"))).resolve();var g=i.to_int32(e.ephemeralMediaViewMode);f=d("MAWMsg").MAWRavenMsgEphemeralMediaState.cast(f);g=d("MAWMsg").MAWRavenMsgEphemeralType.cast(g);if(f==null||g==null)return(j||(j=b("Promise"))).resolve();f=d("MAWRavenUtils").getNextRavenMessageEphemeralState(f,g);if(f==null)return(j||(j=b("Promise"))).resolve();e.ephemeralMediaState;g=babelHelpers.objectWithoutPropertiesLoose(e,h);e=babelHelpers["extends"]({ephemeralMediaState:i.of_int32(f)},g,{transportKey:"WhatsApp"});f=[g.threadKey,g.messageId,g.attachmentFbid];return a.upsert(f,e)});return function(b,c){return a.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWBridgeReactionUpsertHandler",["I64","LSAuthorityLevel","LSIntEnum","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e,f,g){return{actorId:(h||(h=d("I64"))).of_string(a),authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),messageId:e,reaction:g,reactionCreationTimestampMs:d("MAWTimeUtils").toTimestamp(f),threadKey:b,timestampMs:d("MAWTimeUtils").toTimestamp(f),transportKey:"WhatsApp"}}function k(a,b,c,e,f,g){return a.reactions.upsert([c,e,(h||(h=d("I64"))).of_string(b)],j(b,c,e,f,g))}function a(a,b,c,d,e,f){return k(a,b,c,d,e,f)}function b(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReactionUpsertHandler",function(a,c){return k(a,b.actorId,c,b.messageId,b.ts,b.reaction)})}g.composeReaction=j;g.attachmentMutationsOptimisticHandler=a;g.call=b}),98);
__d("MAWBridgeReceivedReceiptHandler",["I64","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(h||(h=d("I64"))).of_string(b.fbid);b=d("MAWTimeUtils").toTimestamp(b.deliveredWatermarkTs);c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.participants).getKeyRange(c,e)));c!=null&&(yield a.participants.put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).zero)?c.deliveredWatermarkTimestampMs:b,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:c.readActionTimestampMs,readWatermarkTimestampMs:c.readWatermarkTimestampMs,subscribeSource:c.subscribeSource,threadKey:c.threadKey,threadRoles:(h||(h=d("I64"))).zero}))});return j.apply(this,arguments)}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.chatJid,"MAWBridgeReceivedReceiptHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.i64.le(f.authorityLevel,c.i64.cast([0,80]))?(d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve())})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSRefetchContactRowIfExists"),e.id);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeRefreshContactHandler",["LSFactory","LSRefetchContactRowIfExistsStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:b})}g.call=a}),98);
__d("MAWBridgeRemoveMessageSearchResultHandler",["Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.message_search_results).filter(function(a){return e.includes(a.messageOtid)})));yield (h||(h=b("Promise"))).all(c.map(function(b){return a.message_search_results["delete"](b.type_,b.query,b.threadKey,b.globalIndex)}))})().then(c("emptyFunction"))}g.call=a}),98);
__d("LSIssueAttachmentRestoreTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] Beginning execution."),a[7]!==void 0?c.resolve(d[1]=a[7]):c.sequence([function(a){return d[28]=c.i64.random(),d[29]=c.i64.to_string(d[28]),d[29]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,679684335]),d[29],!0,void 0):c.resolve()},function(a){return d[1]=d[29]}])},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,679684335]),d[1],"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure_start"):c.resolve()},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[33]=e.backupTenancy,d[32]=e.encryptionVersion,d[28]=void 0,c.i64.neq(d[28],void 0)?c.resolve(d[29]=d[28]):c.sequence([function(a){return d[34]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[44]=(d[34].push(c.i64.cast([0,0])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[44]=(d[34].push(c.i64.cast([0,2])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[44]=(d[34].push(c.i64.cast([0,3])),d[34]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[44]=(d[34].push(c.i64.cast([0,4])),d[34]):0,d[39]=c.createArray(),d[40]=c.i64.of_int32(d[34].length),c.i64.gt(d[40],c.i64.cast([0,0]))?c.loopAsync(d[40],function(a){return d[44]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[34],d[44]).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return d[47]=(d[39].push(d[45]),d[39])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[44]=c.createArray(),d[45]=c.i64.of_int32(d[39].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[39],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=(d[44].push(c.i64.to_string(d[48])),d[44])}])}):c.resolve()},function(a){return d[46]=d[44].join(","),d[41]=d[46]}])},function(a){return d[39].some(function(a){return c.i64.eq(d[32],a)})?d[42]=d[32]:d[42]=void 0,c.i64.neq(d[42],void 0)?d[43]=d[42]:d[43]=void 0,d[29]=d[43]}])},function(a){return c.i64.neq(d[29],void 0)?d[30]=d[29]:d[30]=c.i64.cast([0,0]),c.i64.neq(d[33],void 0)?d[31]=d[33]:d[31]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[30],d[31],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17]}]))})},function(a){return c.storedProcedure(b("LSFindBackup")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?d[21]!==void 0?c.blobs.neq(d[4],void 0)?c.sequence([function(e){return d[28]=c.createArray(),d[35]=(d[28].push(d[21]),d[28]),d[35]=(d[28].push(a[1]),d[28]),d[29]=c.toJSON(d[28]),d[30]=c.createArray(),d[35]=(d[30].push(c.i64.cast([0,32])),d[30]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[5]].join("")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[31],void 0,d[4],d[30]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!1:d[33]=!0,d[33]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[36]="Got null keys while deriving message list OPE key. Returning null blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoUtils] ","",d[36]].join("")),d[35]=c.createArray(),void 0!==void 0?d[37]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils",d[36],d[35],c.i64.cast([0,3]))},function(a){return d[34]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[32],c.i64.cast([0,0])).then(function(a){return a=a,d[35]=a[0],d[36]=a[1],a})},function(a){return d[34]=d[35]}])},function(e){return c.blobs.neq(d[34],void 0)?c.sequence([function(e){return c.i64.neq(a[9],void 0)?d[35]=a[9]:d[35]=c.i64.cast([-1,4294967295]),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[6]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[34],d[37],c.i64.cast([0,16])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[38]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[21]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(e){return d[60]=new c.Map(),d[60].set("attachment_index_key",d[43]==null?"":d[43]),d[60].set("backup_ent_fbid",a[0]),d[60].set("delivery_object_id",a[1]),d[60].set("device_id",d[3]),d[60].set("mailbox_partial_id",d[47]==null?"":d[47]),d[60].set("media_type",a[3]),d[60].set("message_partial_id",d[51]==null?"":d[51]),d[60].set("product_type",a[2]),d[60].set("salt_partial_id",d[55]==null?"":d[55]),d[60].set("sort_key",d[39]==null?"":d[39]),d[60].set("thread_partial_id",d[59]==null?"":d[59]),d[60].set("trace_id",d[1]),d[60].set("source",d[35]),d[61]=new c.Map(),d[61].set("otid",a[4]),d[61].set("server_thread_key",a[8]),d[61].set("timestamp",c.i64.to_string(a[6])),c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(e){return d[64]=new c.Map(),d[64].set("ocmf_client_state_blob",d[62]==null?"":d[62]),d[64].set("mailbox_root_key",d[63]==null?"":d[63]),d[65]=c.createArray(),d[76]=(d[65].push(a[4]),d[65]),d[76]=(d[65].push(a[1]),d[65]),d[66]=c.toJSON(d[65]),d[60].set("raw_identifiers",d[61]),d[60].set("backup_id",d[21]),d[60].set("thread_id",a[5]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[66]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[67]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[68]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[69]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[60].set("salt_partial_access_token",d[70]==null?"":d[70]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[71]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[72]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[73]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[60].set("salt_partial_attachment_index_key",d[74]==null?"":d[74]),d[60].set("raw_tokens",d[64]),void 0!==void 0?d[60].set("access_token_secret",void 0):0,void 0!==void 0?d[60].set("primary_key_secret",void 0):0,d[75]=c.toJSON(d[60]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_restore",c.i64.cast([0,50020]),d[75],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(a){return d[37]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","OPE_key_is_null"].join(""),d[1]!==void 0?d[37]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[37]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[36]="OPE key is null for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[36]].join("")),d[35]=c.createArray(),void 0!==void 0?d[38]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[36],d[35],c.i64.cast([0,3]))}])}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_mailbox_root_key"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing mailbox_root_key for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_backup_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing backup_id for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_device_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing device_id for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}]):c.sequence([function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,679684335]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,679684335]),d[1],!1):c.resolve()},function(a){return d[29]="Missing ocmf_client_state_blob for IssueAttachmentRestoreTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))}])},function(a){return d[22]=c.i64.of_float(Date.now()),d[23]=c.i64.random(),d[25]="Finishing execution. Execution time: ",d[26]=c.i64.to_string(c.i64.sub(d[22],d[0])),d[27]=" ms",d[24]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ",d[24],d[25],d[24],d[26],d[24],d[27]].join("")),c.i64.eq(c.i64.mod_(d[23],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[28]=",",d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",[d[25],d[28],d[26],d[28],d[27]].join(""),d[29],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentRestoreTaskStoredProcedure",["LSIssueAttachmentRestoreTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentRestoreTask"),e.backupEntFbid,e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.sortOrder,e.traceId,e.serverThreadKey,e.source);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAsyncEBMediaDownloadPromise",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){var b=a.messageId,c=a.objectId,d=a.plaintextHash;a=a.threadId;var e=g.get(c);g.set(c,e!=null?[].concat(e,[{messageId:b,plaintextHash:d,threadId:a}]):[{messageId:b,plaintextHash:d,threadId:a}])}function b(a){return(a=g.get(a))==null?void 0:a.pop()}f.setMediaDownloadPayload=a;f.retrieveMediaDownloadPayload=b}),66);
__d("MAWBridgeResignAttachmentCDNUrlHandler",["I64","LSFactory","LSIssueAttachmentRestoreTaskStoredProcedure","MAWAsyncEBMediaDownloadPromise","MAWBridgeFireAndForget","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h,i="-8";function a(a,b){var e,f=b.traceId,g=(e=b.skipLegacyMediaDownloadFlow)!=null?e:!1;function j(a,b,c){!g&&f!=null&&d("MAWBridgeFireAndForget").fireAndForget("backend","addMediaDownloadQpl",{annotations:c!=null?c:void 0,pointName:b,qplInstanceKey:f,qplType:a})}j("point","resign_cdn_url_bridge_handler_start");return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeResignAttachmentCDNUrlHandler",function(a,e){e={backupEntFbid:(h||(h=d("I64"))).of_string(i),deliveryObjectId:b.deliveryObjectId,mediaType:b.mediaType,messageId:b.messageId,productType:b.productType,serverThreadKey:h.to_string(e),sortOrder:h.of_float(b.sortOrder),threadId:b.threadId,traceId:f.toString()};b.skipLegacyMediaDownloadFlow!==!0&&d("MAWAsyncEBMediaDownloadPromise").setMediaDownloadPayload({messageId:b.msgId,objectId:b.deliveryObjectId,plaintextHash:b.plaintextHash,threadId:b.threadId});j("point","resign_cdn_url_issue_attachment_task",{string:{taskTraceId:e.traceId}});return c("LSIssueAttachmentRestoreTaskStoredProcedure")(c("LSFactory")(a),e).then(function(){j("point","resign_cdn_url_issue_attachment_task_end")})["catch"](function(a){j("fail","resign_cdn_url_issue_attachment_task_fail",{string:{error:a.toString()}})})})}g.call=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.data_trace_meta.add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){var f;if(b.threadKey==null||!c("gkx")("23995"))return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one,tags:(f=b.threadKey)!=null?f:void 0})})}function a(a,e){var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one}));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:String(b)})});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeStartTraceWithTraceIdHandler",["MAWMainTraceUtils","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMainTraceUtils").startTraceWithTxn(a,d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),b.traceId,b.traceType,void 0,void 0,b.traceContext)}g.call=a}),98);
__d("MAWBridgeSyncContacts",["CurrentMessengerUser","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("CurrentMessengerUser").getID();function a(a,e){return e.reduce(function(b,e){var f=(i||(i=d("I64"))).of_string(e);return b.then(function(){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:f,isBlocked:!1,isMemorialized:!1,isSelf:k===e,workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}).then(c("emptyFunction"))},(h||(h=b("Promise"))).resolve())}g.call=a}),98);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1])})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSMoveThreadToArchivedFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({folderName:"",parentThreadKey:b.i64.cast([-1,4294967286]),capabilities2:b.i64.or_(a.capabilities2,b.i64.cast([0,2]))})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[4]=b.syncGroup,c.i64.neq(d[4],void 0)?d[3]=d[4]:d[3]=c.i64.cast([0,1]),d[0]=d[3])})},function(d){return[c.i64.cast([0,1]),c.i64.cast([0,2])].some(function(b){return c.i64.eq(a[1],b)})?c.storedProcedure(b("LSMoveThreadToArchivedFolder"),a[0]):c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[0]),c.i64.cast([0,146]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[0],void 0,c.i64.cast([0,0]),c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(32).add({taskId:d[2],threadKey:a[0],removeType:a[1],syncGroup:d[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure";a.__tables__=["threads","threads_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticRemoveThread"),e.threadKey,e.removeType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadRemoveType",[],(function(a,b,c,d,e,f){a=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});f["default"]=a}),66);
__d("MAWBridgeThreadHiddenV2Handler",["LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b,"MAWBridgeThreadHiddenV2Handler",function(a,b){a=c("LSFactory")(a);return c("LSOptimisticRemoveThreadStoredProcedure")(a,{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:b})})}g.call=a}),98);
__d("MAWBridgeThreadUpdatedHandler",["MAWBridgeBuildThreadSnippet","MAWBridgeUIEventDataValidation","MAWFolderUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","ReQL","asyncToGeneratorRuntime","getMAWLastMessageCtaType"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=b.folder!=null?d("MAWFolderUtils").getMessagingFolderTag(b.folder):a.folderName;return(b=b.cannotReplyReason)!=null?b:c==="inbox"?void 0:a.cannotReplyReason}function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)));if(e==null)return;var f=d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(b,e.snippet),g=h(e,b),i=c("getMAWLastMessageCtaType")(b.snippetType);g=babelHelpers["extends"]({},e,{cannotReplyReason:g,folderName:e.folderName,lastMessageCtaType:i,parentThreadKey:e.parentThreadKey,snippet:f,snippetSenderContactId:b.snippetSenderContactId==null?e.snippetSenderContactId:d("MAWBridgeUIEventDataValidation").stringToI64Opt(b.snippetSenderContactId)});yield a.threads.put(g)});return j.apply(this,arguments)}function a(a,b){var c=b.threadJid;return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,c,"MAWBridgeThreadUpdatedHandler",function(a,c){return i(a,b,c)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeUIEventQueueQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("QPLUserFlow").start(c("qpl")._(1056849266,"1765"),{annotations:{string_array:{events:b}},instanceKey:a})}function b(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056849266,"1765"),b,{instanceKey:a})}function d(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849266,"1765"),{instanceKey:a})}function e(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056849266,"1765"),"MAWBridgeUIEventHandlerFailure",{annotations:{string:{failedEventTag:b}},instanceKey:a})}g.start=a;g.addAnnotations=b;g.endSuccess=d;g.endFailure=e}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve()}f.call=a}),66);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).filter(function(a){return a.threadId===e})).then(function(d){if(d!=null)return a.encrypted_backups_client_restore_status["delete"](d.threadId).then(c("emptyFunction"));else return(j||(j=b("Promise"))).resolve()})}function l(a,e,f,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).getKeyRange(e)).then(function(g){if(g!=null)return a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:f,threadId:e});else return(j||(j=b("Promise"))).resolve()})}function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return k(a,c.threadId)})},(j||(j=b("Promise"))).resolve())})}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.threadId,g=e.action;g===d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?yield a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:void 0,threadId:f}):yield l(a,e.threadId,void 0,e.ebPrefetch);return(j||(j=b("Promise"))).resolve()});return m.apply(this,arguments)}g.truncateClientRestoreStatusTable=a;g.call=e}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"add_messenger_contact",c.i64.cast([0,308]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactAddMessengerContactStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAddMessengerContact"),e.contactId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(b){return d[1]=f.threadSubtype,c.i64.eq(d[1],c.i64.cast([0,75]))?d[0]="interop":d[0]="inbox",c.i64.eq(d[1],c.i64.cast([0,75]))?d[2]=c.i64.cast([-1,4294967277]):d[2]=c.i64.cast([0,0]),c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var e=b.update;b.item;return e({folderName:d[0],parentThreadKey:d[2],igFolder:a[1],capabilities:c.i64.and_(f.capabilities,c.i64.cast([-1,4292870143]))})})},function(b){return c.db.table(173).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?0:(e=b.item,d[7]=e.clientThreadPk,c.db.table(276).fetch([[[d[7]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?0:(a.item,c.forEach(c.db.table(276).fetch([[[d[7]]]]),function(a){var b=a.update;a.item;return b({folderType:c.i64.cast([0,0])})}))}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[3]=c.i64.cast([0,1]):(e=b.item,d[8]=e.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[3]=d[7])})},function(e){return d[5]=new c.Map(),d[5].set("thread_key",a[0]),d[5].set("sync_group",d[3]),d[5].set("ig_folder",a[1]),d[6]=c.toJSON(d[5]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"message_request",c.i64.cast([0,66]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure";a.__tables__=["threads","mi_act_mapping_table","client_threads"];e.exports=a}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticAcceptMessageRequest"),e.threadKey,e.igFolder);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateContactAsConnectedHandler",["FBLogger","I64","LSAddMessengerContactStoredProcedure","LSContactViewerRelationship","LSFactory","LSIntEnum","LSOptimisticAcceptMessageRequestStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWUpdateLSThreadCapabilities","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.contactUserId;e=e.threadJid;var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts).getKeyRange((i||(i=d("I64"))).of_string(f))));if(g==null){c("FBLogger")("messenger_web").warn("Missing contact in MAWBridgeUpdateContactAsConnectedHandler");return}var k=babelHelpers["extends"]({},g,{contactViewerRelationship:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").CONTACT_OF_VIEWER)});return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e,"MAWBridgeUpdateContactAsConnectedHandler",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (h||(h=b("Promise"))).allSettled([a.contacts.upsert([g.id],k),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:g.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,e),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:e})])});return function(b,c){return a.apply(this,arguments)}}())});return k.apply(this,arguments)}g.call=a}),98);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_self_remove",!1),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,394]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateE2EEMetadataParticipantsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipantsStoredProcedure",["LSSynchronousPromise","LSUpdateE2EEMetadataParticipants","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateE2EEMetadataParticipants"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler",["LSFactory","LSUpdateE2EEMetadataParticipantsStoredProcedure","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeThreadsLoadedHandler",function(a,b){return c("LSUpdateE2EEMetadataParticipantsStoredProcedure")(c("LSFactory")(a),{threadKey:b})})}g.call=a}),98);
__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[0].set("wa_jid",void 0),d[0].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[0].set("message_product_type",void 0),d[0].set("is_message_deletion",!1),d[0].set("is_unbump",a[3]),d[1]=d[0].get("thread_key"),c.storedProcedure(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),c.i64.cast([0,389]))},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[2].set("tam_thread_subtype",c.i64.cast([0,0])),d[2].set("wa_jid",void 0),d[2].set("message_ephemeral_duration_in_sec",c.i64.cast([0,0])),d[2].set("message_product_type",void 0),d[2].set("is_message_deletion",!1),d[2].set("is_unbump",a[3]),d[3]=d[2].get("thread_key"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,389]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxBumpE2EEMetadataThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSBumpE2EEMetadataThreadStoredProcedure",["LSBumpE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpE2EEMetadataThread"),e.threadKey,e.serverAuthoritativeTimestampMs,e.bumpedByLocalDeviceSend,e.isUnbump);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUpdateThreadActivityHandler",["I64","LSBumpE2EEMetadataThreadStoredProcedure","LSFactory","MAWChatJid","MAWJids","MAWMiActGetThreadLifecycleState__DO_NOT_USE","MWFBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MWFBLogger").MWLogger().tags(["bridgeUIEvent","Occam","ActivityUpdate"]);function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWChatJid").toThreadMaybe(a,b.chatJid));if(c==null){yield q(a,b.chatJid);return}switch(b.source){case"outgoing_msg":case"incoming_msg":return k(a,c,b);case"deleted_msg":return m(a,c,b);case"inserted_admin_msg":return p(c,b,"No bump for admin message");case"eb_restore":return i.warn("Attempted bump from EB restore");default:b.source;throw i.mustfixThrow("Unknown source")}});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){if(o(b,d)){p(b,d,"Stale incoming bump");return}yield c("LSBumpE2EEMetadataThreadStoredProcedure")(c("LSFactory")(a),{bumpedByLocalDeviceSend:d.source==="outgoing_msg",isUnbump:!1,serverAuthoritativeTimestampMs:d.bumpTimestampMs,threadKey:b.threadKey});p(b,d,"Thread bumped")});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.threads.put(babelHelpers["extends"]({},b,{lastActivityTimestampMs:(h||(h=d("I64"))).min(b.lastActivityTimestampMs,c.bumpTimestampMs),lastReadWatermarkTimestampMs:h.min(b.lastReadWatermarkTimestampMs,c.bumpTimestampMs)})),p(b,c,"Thread unbumped")});return n.apply(this,arguments)}function o(a,b){return b.source==="incoming_msg"&&(h||(h=d("I64"))).le(b.bumpTimestampMs,a.lastActivityTimestampMs)}function p(a,b,c){b=[(h||(h=d("I64"))).to_string(a.threadKey),b.source,h.to_string(b.bumpTimestampMs),h.to_string(a.lastActivityTimestampMs),h.to_string(a.lastReadWatermarkTimestampMs)];i.debug.apply(i,[c+". threadKey: %s, source: %s, bumpTimestampMs: %s, originalLastActivityTimestampMs: %s, originalLastReadWatermarkTimestampMs: %s"].concat(b))}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("MAWMiActGetThreadLifecycleState__DO_NOT_USE").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),"MAWBridgeUpdateThreadActivityHandler"));i.mustfix("Missing LSDBThread when updating thread activity. jid: %s, thread state: %s",b,a.type)});return r.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,errorMessage:b,syncChannel:(j||(j=d("I64"))).neg_one});else return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,syncChannel:(j||(j=d("I64"))).neg_one})})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,d){return d.reduce(function(b,d){return b.then(function(){return c("updateAndFlushLSDataTrace")(a,d)})},(h||(h=b("Promise"))).resolve())}function a(a,e){var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("LSIssueAttachmentBackupTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] Beginning execution."),a[5]!==void 0?c.resolve(d[1]=a[5]):c.sequence([function(a){return d[27]=c.i64.random(),d[28]=c.i64.to_string(d[27]),d[28]!==void 0?c.nativeOperation(b("LSQplStartTrace.nop"),c.i64.cast([0,637738637]),d[28],!0,void 0):c.resolve()},function(a){return d[1]=d[28]}])},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,637738637]),d[1],"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure_start"):c.resolve()},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0,void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],d[19]=f[17],f):(e=a.item,c.sequence([function(a){return d[32]=e.backupTenancy,d[31]=e.encryptionVersion,d[27]=void 0,c.i64.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[31],a)})?d[41]=d[31]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[28]=d[42]}])},function(a){return c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[30]=d[32]:d[30]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[29],d[30],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],d[19]=a[17]}]))})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?(d[27]=c.i64.to_string(d[2]),d[27]!==void 0?c.sequence([function(e){return d[28]=c.createArray(),d[63]=(d[28].push(d[27]),d[28]),d[63]=(d[28].push(a[0]),d[28]),d[29]=c.toJSON(d[28]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[30]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[27]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[36]).then(function(a){return a=a,d[37]=a[0],a})},function(e){return d[38]=new c.Map(),d[38].set("attachment_index_key",d[33]==null?"":d[33]),d[38].set("delivery_object_id",a[0]),d[38].set("device_id",d[3]),d[38].set("mailbox_partial_id",d[37]==null?"":d[37]),d[38].set("media_type",a[2]),d[38].set("product_type",a[1]),d[38].set("trace_id",d[1]),d[39]=new c.Map(),d[39].set("otid",a[3]),d[39].set("server_thread_key",a[6]),d[39].set("timestamp",void 0),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[42]).then(function(a){return a=a,d[43]=a[0],a})},function(e){return d[38].set("salt_partial_id",d[43]==null?"":d[43]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(e){return d[38].set("thread_partial_id",d[47]==null?"":d[47]),c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(e){return d[38].set("message_partial_id",d[51]==null?"":d[51]),d[52]=c.createArray(),d[63]=(d[52].push(a[3]),d[52]),d[63]=(d[52].push(a[0]),d[52]),d[53]=c.toJSON(d[52]),d[38].set("raw_identifiers",d[39]),d[38].set("backup_id",d[27]),d[38].set("thread_id",a[4]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[38].set("salt_partial_access_token",d[57]==null?"":d[57]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[29]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[59]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[38].set("salt_partial_attachment_index_key",d[61]==null?"":d[61]),d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!0):c.resolve()},function(a){return d[62]=c.toJSON(d[38]),c.storedProcedure(b("LSIssueNewTask"),"encrypted_backups_attachment_upload",c.i64.cast([0,50012]),d[62],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.sequence([function(a){return d[29]="Missing backup_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[29]].join("")),d[28]=c.createArray(),void 0!==void 0?d[31]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[29],d[28],c.i64.cast([0,3]))},function(a){return d[30]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_backup_id"].join(""),d[1]!==void 0?d[30]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[30]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}])):c.sequence([function(a){return d[28]="Missing device_id for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[30]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))},function(a){return d[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_device_id"].join(""),d[1]!==void 0?d[29]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[29]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}]):c.sequence([function(a){return d[28]="Missing ocmf_client_state_blob for IssueAttachmentBackupTask",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ","",d[28]].join("")),d[27]=c.createArray(),void 0!==void 0?d[30]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",d[28],d[27],c.i64.cast([0,3]))},function(a){return d[29]=["LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",".","missing_ocmf_client_state_blob"].join(""),d[1]!==void 0?d[29]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,637738637]),d[1],"error",d[29]):c.resolve():c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSQplMarkEnd.nop"),c.i64.cast([0,637738637]),d[1],!1):c.resolve()}])},function(a){return d[21]=c.i64.of_float(Date.now()),d[22]=c.i64.random(),d[24]="Finishing execution. Execution time: ",d[25]=c.i64.to_string(c.i64.sub(d[21],d[0])),d[26]=" ms",d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure] ",d[23],d[24],d[23],d[25],d[23],d[26]].join("")),c.i64.eq(c.i64.mod_(d[22],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[27]=",",d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure",[d[24],d[27],d[25],d[27],d[26]].join(""),d[28],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentBackupTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentBackupTaskStoredProcedure",["LSIssueAttachmentBackupTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentBackupTask"),e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.traceId,e.serverThreadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeUploadAttachmentHandler",["I64","LSDataTraceCheckPoint","LSFactory","LSIntEnum","LSIssueAttachmentBackupTaskStoredProcedure","LSRequestId","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","MAWTimeUtils","MAWTraceUtils","Promise","isInstamadilloEB"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e){var f;if(c("isInstamadilloEB")())return(j||(j=b("Promise"))).resolve();var g=(f=e.traceId)!=null?f:c("LSRequestId").generate();f=e.mediaType;if(f==="document"){d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);return(j||(j=b("Promise"))).resolve()}return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeUploadAttachmentHandler",function(a,f){var k=(i||(i=d("I64"))).to_string(f),l=d("MAWTimeUtils").isTimestampNewerThanXDays(e.ts,30);return d("MAWEncryptedBackupUtils").getBackupTenancy(a,g).then(function(f){var i=e.productType;if(f!=null&&l)if(g!=null){d("MAWEBFrontendQPLLogger").startFlowUploadAttachmentBackup({deliveryObjectId:e.deliveryObjectId,flow:"old",mediaType:e.mediaType,messageId:e.messageId,threadId:e.threadId,traceId:g});return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId,traceId:g})}else return c("LSIssueAttachmentBackupTaskStoredProcedure")(c("LSFactory")(a),{deliveryObjectId:e.deliveryObjectId,mediaType:e.mediaType,messageId:e.messageId,productType:i,serverThreadKey:k,threadId:e.threadId});else{d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(g,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);d("MAWEBFrontendQPLLogger").endFlowUploadAttachmentBackup(g,!1,"old");return(j||(j=b("Promise"))).resolve()}})})}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","Promise","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){i(e.messages,"upload_tracking_bridge_batch_handler");e.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});e.checkPoint.forEach(function(b){return c("promiseDone")(d("MAWBridgeTraceRecordCheckpointHandler").call(a,b))});for(e of e.messages)yield d("MAWBridgeUploadMessageHandler").call(a,e);return(h||(h=b("Promise"))).resolve()});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeXMAShareExpiredHandler",["MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){var e=String(d.xmaId);return a.attachments.get(c,d.msgId,e).then(function(f){if(f==null)return(h||(h=b("Promise"))).resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(Boolean);f=f.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(f).then(function(){return a.attachments["delete"](c,d.msgId,e)})})}function a(a,b){return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,b.threadJid,"MAWBridgeXMAShareExpiredHandler",function(a,c){return i(a,c,b)})}g.callWithoutWaitingForAnything=i;g.call=a}),98);
__d("MAWBridgeXMAShareTombstonedHandler",["FBLogger","MAWMiActOnMiThreadExistsForJid__DO_NOT_USE","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=String(e.xmaId);return d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE").onMiThreadExistsForJidNoThrow__DO_NOT_USE(a,e.threadJid,"MAWBridgeXMAShareTombstonedHandler",function(a,g){return a.attachments.get(g,e.msgId,f).then(function(i){if(i==null)return(h||(h=b("Promise"))).resolve();i=[i.defaultCtaId,i.attachmentCta1Id,i.attachmentCta2Id,i.attachmentCta3Id].filter(Boolean);i=i.map(function(b){return a.attachment_ctas["delete"](b)});return(h||(h=b("Promise"))).all(i).then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(g,e.msgId,f)).then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){if(d!=null){d=babelHelpers["extends"]({},d,{attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,previewHeight:void 0,previewHeightLarge:void 0,previewWidth:void 0,previewWidthLarge:void 0,subtitleText:void 0,titleText:void 0});yield a.attachments.put(d)}c("FBLogger")("messenger_web_sharing").blameToPreviousFrame().mustfix("Trying to tombstone a secure xma attachment but no existing attachment");return(h||(h=b("Promise"))).resolve()});return function(a){return d.apply(this,arguments)}}())})})})}g.call=a}),98);
__d("isInstamadilloDYI",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("665")===!0}g["default"]=a}),98);
__d("MAWBridgeUIEventHandler",["EBLogger","MAWAbPropsClient","MAWBridgeAddMessageSearchResultHandler","MAWBridgeCallRestoreNativeOpHandler","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteMessagesOfThreadHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEditMsgHistoryAddedHandler","MAWBridgeEphemeralSettingsUpdatedForUIHandler","MAWBridgeFulfillRestorePromisePayloadHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteLoadedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeHandleCOPDigest","MAWBridgeMediaExpiredHandler","MAWBridgeMsgUpdatedHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler","MAWBridgeNewMsgHandler","MAWBridgeNewPollHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2","MAWBridgeOccamadilloVerifyThreadExistsHandler","MAWBridgeOneToOneMessageRequestLoadedHandler","MAWBridgeParticipantRemovedHandler","MAWBridgeParticipantsUpdatedHandler","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler","MAWBridgeReceivedChatStateHandler","MAWBridgeReceivedReceiptHandler","MAWBridgeRefreshContactHandler","MAWBridgeRemoveMessageSearchResultHandler","MAWBridgeResignAttachmentCDNUrlHandler","MAWBridgeStartTraceHandler","MAWBridgeStartTraceWithTraceIdHandler","MAWBridgeSyncContacts","MAWBridgeThreadHiddenV2Handler","MAWBridgeThreadUpdatedHandler","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUIEventQueueQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUpdateClientRestoreStatus","MAWBridgeUpdateContactAsConnectedHandler","MAWBridgeUpdateE2EEMetadataParticipantsHandler","MAWBridgeUpdateThreadActivityHandler","MAWBridgeUpdateTraceHandler","MAWBridgeUploadAttachmentHandler","MAWBridgeUploadMessageByBatchHandler","MAWBridgeUploadMessageHandler","MAWBridgeXMAShareExpiredHandler","MAWBridgeXMAShareTombstonedHandler","MAWEphemeralMessageExpirationStorage","MAWLoggerUtils","MWFBLogger","Promise","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","emptyFunction","getErrorSafe","isArmadillo","isInstamadilloDYI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("MWFBLogger").MWLogger().tags(["MAWBridgeUIEvent"]);function m(a,c,e){switch(e.tag){case"NewMsg":return d("MAWBridgeNewMsgHandler").call(c,e.value);case"MsgsStartCountdown":return d("MAWBridgeMsgsStartCountdownHandler").call(c,e.value);case"MsgClearCountdown":return(k||(k=b("Promise"))).resolve(d("MAWEphemeralMessageExpirationStorage").clearMessageFromExpiration(e.value));case"DropAllSecureThreads":return d("MAWBridgeDropAllSecureThreadsHandler").call(c);case"VerifyThreadExists":var f=e.value;return d("MAWBridgeOccamadilloVerifyThreadExistsHandler").call(c,f);case"CreateE2EEMetadataThreadV2":return d("MAWBridgeOccamadilloCreateE2EEMetadataThreadHandlerV2").call(c,e.value);case"EditMsgHistoryAdded":return d("MAWBridgeEditMsgHistoryAddedHandler").call(a,c,e.value);case"MsgUpdated":return d("MAWBridgeMsgUpdatedHandler").call(c,e.value);case"NewMedia":return d("MAWBridgeNewMediaHandler").call(c,e.value);case"NewMediaRange":return d("MAWBridgeNewMediaRangeHandler").call(c,e.value);case"MediaExpired":return d("MAWBridgeMediaExpiredHandler").call(c,e.value);case"XMAShareExpired":return d("MAWBridgeXMAShareExpiredHandler").call(c,e.value);case"NewXMA":return d("MAWBridgeNewXMAHandler").call(c,e.value);case"XMAShareTombstoned":return d("MAWBridgeXMAShareTombstonedHandler").call(c,e.value);case"ParticipantRemoved":return d("MAWBridgeParticipantRemovedHandler").call(c,e.value);case"UpdateE2EEMetadataParticipants":return d("MAWBridgeUpdateE2EEMetadataParticipantsHandler").call(c,e.value);case"ReceivedReceipt":return d("MAWBridgeReceivedReceiptHandler").call(c,e.value);case"ThreadUpdated":return d("MAWBridgeThreadUpdatedHandler").call(c,e.value);case"GroupInfoUpdated":return d("MAWBridgeGroupInfoUpdatedHandler").call(c,e.value);case"UpdateThreadActivity":return d("MAWBridgeUpdateThreadActivityHandler").call(c,e.value);case"StartTrace":return d("MAWBridgeStartTraceHandler").call(c,e.value);case"UpdateTrace":return d("MAWBridgeUpdateTraceHandler").call(c,e.value);case"ThreadHiddenV2":return d("MAWBridgeThreadHiddenV2Handler").call(c,e.value);case"SyncContacts":return d("MAWBridgeSyncContacts").call(c,e.value);case"ReceivedChatState":return d("MAWBridgeReceivedChatStateHandler").call(c,e.value);case"ClockSkewUpdated":return(k||(k=b("Promise"))).resolve(d("WATimeUtils").setClockSkew(e.value));case"ABPropsUpdated":l.warn("ABPropsUpdated has been deprecated. Please use the bridge with ABPropsUpdated");return(k||(k=b("Promise"))).resolve(d("MAWAbPropsClient").rewrite(e.value));case"COPDigestReceived":return d("MAWBridgeHandleCOPDigest").call(c,e.value);case"UpsertReaction":return d("MAWBridgeReactionUpsertHandler").call(c,e.value);case"DeleteReaction":return d("MAWBridgeDeleteReactionHandler").call(c,e.value);case"UploadMessage":return d("MAWBridgeUploadMessageHandler").call(c,e.value);case"UploadMessageByBatch":return d("MAWBridgeUploadMessageByBatchHandler").call(c,e.value);case"DeleteMessagesOfThread":return d("MAWBridgeDeleteMessagesOfThreadHandler").call(c,e.value);case"UploadAttachment":return d("MAWBridgeUploadAttachmentHandler").call(c,e.value);case"ResignAttachmentCDNUrl":return d("MAWBridgeResignAttachmentCDNUrlHandler").call(c,e.value);case"DeleteMessages":return d("MAWBridgeDeleteMessagesHandler").call(c,e.value);case"RestoreMessageBatch":d("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"])));return(k||(k=b("Promise"))).resolve();case"OneToOneMessageRequestLoaded":return d("MAWBridgeOneToOneMessageRequestLoadedHandler").call(c,e.value);case"GroupInviteUpdate":return d("MAWBridgeGroupInviteUpdateHandler").call(c,e.value);case"UpdateDyiStatus":d("EBLogger").EBLogger().tags(["labyrinth_dyi"]).WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Attempted to call the old DYI V1 flow"])));return(k||(k=b("Promise"))).resolve();case"DeleteGroupInvite":return d("MAWBridgeDeleteGroupInviteHandler").call(c,e.value);case"TraceRecordCheckpoint":return d("MAWBridgeTraceRecordCheckpointHandler").call(c,e.value);case"ParticipantsUpdated":return d("MAWBridgeParticipantsUpdatedHandler").call(c,e.value);case"StartTraceWithTraceId":return d("MAWBridgeStartTraceWithTraceIdHandler").call(c,e.value);case"UpdateClientRestoreStatus":return d("MAWBridgeUpdateClientRestoreStatus").call(c,e.value);case"NewMsgs":return d("MAWBridgeNewMsgHandler").bulkCall(c,e.value.msgs);case"UnArchivedSelfDeviceChangeAlerts":return d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(c,e.value);case"EphemeralSettingsUpdatedForUI":return d("MAWBridgeEphemeralSettingsUpdatedForUIHandler").call(c,e.value);case"RavenActionUpdate":return d("MAWBridgeRavenActionMsgForUIHandler").call(c,e.value);case"GroupInviteLoaded":return d("MAWBridgeGroupInviteLoadedHandler").call(c,e.value);case"RemoveMessageSearchResult":return d("MAWBridgeRemoveMessageSearchResultHandler").call(c,e.value);case"AddMessageSearchResult":return d("MAWBridgeAddMessageSearchResultHandler").call(a,c,e.value);case"FulfillRestorePromise":return d("MAWBridgeFulfillRestorePromisePayloadHandler").call(e.value);case"UpdateContactAsConnected":return d("MAWBridgeUpdateContactAsConnectedHandler").call(c,e.value);case"RefreshContact":return d("MAWBridgeRefreshContactHandler").call(c,e.value);case"NewReceiverFetchInfo":return d("MAWBridgeNewReceiverFetchInfoHandler").call(c,e.value);case"RestoreNativeOp":return d("MAWBridgeCallRestoreNativeOpHandler").call(c,e.value);case"NewPoll":return d("MAWBridgeNewPollHandler").call(c,e.value);default:return(k||(k=b("Promise"))).resolve()}}function a(a,b){if(!c("isArmadillo")()&&!c("isInstamadilloDYI")()){l.mustfix("User is neither part of armadillo QE and dual send QE but somehow loaded this handler");return}if(!(b.length===1&&b[0].tag==="TraceRecordCheckpoint")){var d={};d=b.reduce(function(a,b){a[b.tag]=((b=a[b.tag])!=null?b:0)+1;return a},d);l.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Handle UI Events: ",""])),JSON.stringify(d))}c("promiseDone")(n(a,b),c("emptyFunction"),function(a){l.catching(a).mustfix("[MAWBridgeUIEventHandler] Failed to handle UI events: %s",b.map(function(a){return a.tag}).join(", "))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield a);a=d("MAWLoggerUtils").getInstanceKey();var h=e.map(function(a){return a.tag}),i="";d("MAWBridgeUIEventQueueQPLLogger").start(a,h);d("MAWBridgeUIEventQueueQPLLogger").addAnnotations(a,{"int":{queue_size:e.length}});var j;try{j=(yield g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b=0;b<e.length;b++){var f=e[b];try{yield m(g,a,f)}catch(a){i=f.tag;return d("WAResultOrError").makeError(c("getErrorSafe")(a))}}return d("WAResultOrError").makeResult(!0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",{events:e,type:"maw_ui_bridge"},f.id+":285"))}catch(a){j=d("WAResultOrError").makeError(c("getErrorSafe")(a))}!j.success?(d("MAWBridgeUIEventQueueQPLLogger").endFailure(a,i),l.catching(j.error).mustfix("MAWBridgeUIEventHandler] Did not commit UI events to DB, failed at %s, all events: %s",i,h.toString())):d("MAWBridgeUIEventQueueQPLLogger").endSuccess(a)});return o.apply(this,arguments)}function e(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){try{yield m(a,b,d)}catch(b){a=c("getErrorSafe")(b);l.catching(a).mustfix("[handleShimEvent] Failed to handle UI event: %s",d.tag);throw b}});return p.apply(this,arguments)}g.handleEvents=a;g.handleShimEvent=e}),98);
__d("toMsgrUserJid",["MAWJids"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","asyncToGeneratorRuntime","requireDeferred","toMsgrUserJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j.load());b=(yield b());var e=new Set(a.map(function(a){return d("WAJids").extractUserId(a)}));return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.contacts).filter(function(a){return e.has((h||(h=d("I64"))).to_string(a.id))})).then(function(a){return new Map(a.map(function(a){return[c("toMsgrUserJid")((h||(h=d("I64"))).to_string(a.id)),a]}))})});return l.apply(this,arguments)}function a(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,c){b.set(c,d("MAWContactRelationshipType").getContactRelationshipType(a))});return b})}function e(a){return k(a).then(function(a){var b=new Map();a.forEach(function(a,e){a=a.contactTypeExact!=null&&(h||(h=d("I64"))).equal(a.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));b.set(e,a)});return b})}g.fetchContacts=k;g.fetchContactsRelationships=a;g.fetchContactsIsMsplit=e}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=d("MWFBLogger").MWLogger().tags(["ServerRPC","Offline"]);function m(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}a=function(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.downloaded,e=b.expected,f=b.status;b=b.timestamp;switch(f){case d("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:l.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""])),e.count,e.message);m(e.count);a({tag:"InitOfflineQueueSyncStart",value:e.count});d("MAWMIC").addPoint("download_offline_queue_start",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:l.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""])),c.count,e.count,c.message,e.message);a({tag:"InitOfflineQueueSyncProgress",value:c.count});return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:l.DEBUG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""])),c.count,e.count,c.message,e.message);d("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",c.count);a({tag:"InitOfflineQueueSyncProgress",value:e.count});d("MAWMIC").addPoint("download_offline_queue_end",b);return;case d("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:l.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"])));d("MAWMIC").addPoint("download_offline_queue_failed",b);return}});return function(a){return c.apply(this,arguments)}}()};e=a;g["default"]=e}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;c={accountKey:null,databaseEncryptionKeys:new Map(),dbReady:new(c("Deferred"))(),latestVersion:d("MAWCryptoConsts").VERSION};var i=babelHelpers["extends"]({},c),j="uninitialized",k=d("MWFBLogger").MWLogger().tags(["MWWorkerOwnedDbKeychain"]);function a(){return i}function b(a){k.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]))),j="initialized",i=a}function e(){return j==="initialized"}function f(){return i.latestVersion}g.getEARKey=a;g.handleEARKeyChange=b;g.isInitialised=e;g.getLatestVersion=f}),98);
__d("IGDSetupBridge",["DTSG","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","LSPlatformGraphQLLightspeedRequestForIGD","MAWAbPropsClient","MAWBridgeReceivedChatStateHandler","MAWBridgeUIEventHandler","MAWCommonSetupBridge","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineSnapshot","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Promise","Run","WAExceededStorageQuota","WAResultOrError","asyncToGeneratorRuntime","cr:3411","emptyFunction","gkx","isInstamadillo","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=c("requireDeferred"))("ArmadilloCutoverClientFalcoEvent").__setRef("IGDSetupBridge"),k=e("IGDBridgeResignCdnUrlHandler").__setRef("IGDSetupBridge"),l=e("MAWBridgeUpdateDYIStatusV2").__setRef("IGDSetupBridge"),m=e("MAWSetupBridgeOfflineConsumer").__setRef("IGDSetupBridge"),n=(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(d("LSInitSyncCompleteSubscription").use).then(function(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}),o=function(a){j.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})},p=new Set(["StartTraceWithTraceId","TraceRecordCheckpoint"]),q=new Set(["ABPropsUpdated","ClockSkewUpdated","DropAllSecureThreads","LargeClockSkewValue","ReceivedChatState","UpdateMediaStatus"]);function a(a){var e=a.dispatch,g=a.logout,j=a.reregisterDevice,r=a.rotateCryptoAuthToken,s=a.worker;function t(){s.postMessage({type:"force-flush-data"})}d("Run").onUnload(t);d("Run").onBeforeUnload(t,!1);return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(a){d("MAWAbPropsClient").rewrite(a.abProps)},earKeyChange:function(a){d("MWWorkerOwnedDbKeychain").handleEARKeyChange(a)},executeGraphQLLightSpeedRequest:function(a){a=a.args;return c("gkx")("3889")?c("LSPlatformGraphQLLightspeedRequestForIGD").apply(void 0,a):c("LSPlatformGraphQLLightspeedRequest").apply(void 0,a)},getDTSGToken:function(){return(h||(h=b("Promise"))).resolve(d("DTSG").getToken())},getLSDBEphemeralSetting:function(a){return d("MAWGetEphemeralSettings").getEphemeralSetting(a.chatJid)},getLSDBLatestThreadIds:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return b.runInTransaction(function(b){return c("LSGetLatestThreadIds.nop")(b,0,"",a.numThreads,a.miActMappingFilteredThreads)},"readonly",void 0,void 0,f.id+":141")});function e(b){return a.apply(this,arguments)}return e}(),getLSDBUsersIsMsplit:function(a){return d("MAWFetchContacts").fetchContactsIsMsplit(a.users)},getLSDBUsersRelationships:function(a){return d("MAWFetchContacts").fetchContactsRelationships(a.users)},getMediaStorageResult:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError({errorMessage:"getMediaStorageResult is not supported in IGD",errorName:"igd-unsupported"}))},getMinosEpochDataForUser:a=c("emptyFunction"),isDbMigrating:function(a){e({tag:"IsDbMigrating",value:!1})},logCutoverEvent:o,logout:g,offlineConsumerProgress:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield m.load())(n,e).apply(void 0,arguments)});function c(){return a.apply(this,arguments)}return c}(),offlineSnapshot:c("MAWSetupBridgeOfflineSnapshot")(e),receivedChatState:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield n);yield c.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MAWBridgeReceivedChatStateHandler").call(b,a)});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":182")});function c(b){return a.apply(this,arguments)}return c}(),reregisterDevice:j,resignCdnUrl:function(a){var b=a.deliveryObjectId,c=a.payload;return k.load().then(function(a){return a.call(c,b)})},rotateCryptoAuthToken:r,storageQuota:function(a){a=a.exceededStorageQuota;d("WAExceededStorageQuota").setExceededStorageQuota(a)},trackEbConsistency:function(){},uiUpdate:function(a){a=a.events;var e=[],f=a.filter(function(a){if(p.has(a.tag)){e.push(a);return!1}if(q.has(a.tag))return!1});e.length>0&&(b("cr:3411")==null||b("cr:3411").recordBridgeUIEvent(a),d("MAWBridgeUIEventHandler").handleEvents(n,a));if(f.length===0)return;c("isInstamadillo")()?c("FBLogger")("igd_web").warn("[Instamadillo] Unsupported invocation of UI Event Handler. Please deprecate UI Event Handler: %s",a.map(function(a){return a.tag}).join(", ")):c("FBLogger")("igd_web").warn("[IGD] Deprecating UIEventHandlers, please update LSDB directly for UI changes: %s",a.map(function(a){return a.tag}).join(", "))},unrecoverableDbError:function(a){a=a.error;return d("MAWUnrecoverableDbErrors").setError(a)},updateDYIStatus:function(a){var b=a.qplEvent,d=a.qplInstanceKeyE2E,e=a.status;c("promiseDone")(l.load().then(function(a){return a.call({qplEvent:b,qplInstanceKeyE2E:d,status:e})}))},updateEBLSInWokerStateInMainThread:a,updateMediaStatus:a,updateStateManagerStateInMainThread:a,uploadMessagesToBackupV2:function(){return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeError("gql_cancelled_instamadillo"))},uploadOpenMessages:function(a){var b=a.uploadPayloads;c("promiseDone")(c("JSResourceForInteraction")("IGDMessageUploadMutation").__setRef("IGDSetupBridge").load().then(function(a){return a.uploadOpenMessageOverGQL(b)}))},writeToMediaStorage:a},worker:s})}g.setupBridge=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e,f=d;return new(g||(g=b("Promise")))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a==null||a.addEventListener==null||a.addEventListener(c,e)})["finally"](function(){a==null||a.removeEventListener==null||a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=1e3,k=c("qpl")._(1056847375,"584");a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,i=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?j:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};this.$1=d;this.$2=e;this.$5=h;this.$6=i;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(k);this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(k,{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setMutexError:d.error,setTakeoverError:a.error}});c("QPLUserFlow").endFailure(k,"fail_to_set_takeover_or_mutex");return(h||(h=b("Promise"))).resolve(!1)}c("QPLUserFlow").endSuccess(k);return(h||(h=b("Promise"))).resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(k,{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(k,"local_takeover_init_takeover_failure");return(h||(h=b("Promise"))).resolve(!1)}var g,i=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var l=(a=this.$7)!=null?a:j;return(h||(h=b("Promise"))).race([f,new h(function(a){g=setTimeout(function(){a()},l)}),this.$8?this.$8():new(h||(h=b("Promise")))(c("emptyFunction"))]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:d.error,setTakeoverError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");d=e.$11(a.newValue);if(!d&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");b=e.$10(c("pageID"));if(!b.success){c("QPLUserFlow").addAnnotations(k,{string:{setMutexError:b.error}});c("QPLUserFlow").endFailure(k,"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(k);return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(k,"local_takeover_no_takeover_permission");return!1}}).then(function(a){i();return a})["catch"](function(a){i();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(k,"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a===c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";return!a.includes(c("pageID"))};e.$14=function(){if(!i){var a=this.$5();if(!a)throw c("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");i=a}return i};e.getMutex=function(){i=this.$14();return i.getItem(this.$1)};e.$10=function(a){i=this.$14();return this.$6(i,this.$1,a)};e.$13=function(){i=this.$14(),i.removeItem(this.$1)};e.getTakeover=function(){i=this.$14();return i.getItem(this.$2)};e.$9=function(a){i=this.$14();return this.$6(i,this.$2,a)};e.$12=function(){i=this.$14(),i.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a===c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({getStorage:d("MAWLocalStorage").getStorage,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},mutexKey:h,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWCommonBackendSetup",["EBIsEbEnabled","FBLogger","MAWAppMutex","MAWInitError","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","Promise","asyncToGeneratorRuntime","getErrorSafe","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),j=function(a,c){if(c)return(h||(h=b("Promise"))).resolve(!0);else return a.measurePerformance("acquire_mutex",function(){return d("MAWAppMutex").use().init()})};function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){yield a.measurePerformance("prepare_logger",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=i.load();(yield a).setupMainWaLogger()}));d("MAWLoggerUtils").initMessengerWebLogging();var m=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();m||(yield a.measurePerformance("detection_support",function(){if(!d("MAWLocalStorage").isLocalStorageAvailable())throw new(d("MAWInitError").MAWInitError)("localstorage_not_supported");return(h||(h=b("Promise"))).resolve()}));var n=a.measurePerformance("setup_vault_materials",function(){return d("MAWVaultMaterialsStorage").setupVaultMaterials()});m=(yield j(a,m));if(!m){a.logPoint("maw_appmutex_no_permission");throw new(d("MAWInitError").MAWInitError)("maw_appmutex_no_permission")}var o=(yield n),p;if(c("gkx")("1458"))try{p=(yield d("EBIsEbEnabled").isEBEnabled())}catch(b){m=c("getErrorSafe")(b).message;a.addStringAnnotation("eb_state_fetch_error",m);c("FBLogger")("wmi_eb").mustfix("Failed to get EB state: %s",m);p=void 0}else p=void 0;yield a.measurePerformance("setup_worker",function(){return d("MAWSetupWorker").getOrSetupWorker(o,e,f,g,k,l,p)["catch"](function(b){a.logPoint("reboot_worker_on_backend_setup_failure");a.addStringAnnotation("backend_setup_failure_reason",b.message);return d("MAWWorkerReboot").rebootWorker(o,e,f,g,"backend_setup_failure",l)["catch"](function(a){throw new(d("MAWInitError").MAWInitError)("worker_setup_error",a)})})})});return k.apply(this,arguments)}g.getMutexPermission=j;g.setupArmadilloBackend=a}),98);
__d("LSIssueNewErrorStoredProcedure",["LSIssueNewError","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueNewError"),e.taskId,e.errorCode,e.errorTitleText,e.errorBodyText,e.errorExtraData,e.presentationStyle);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWIssueNewUserVisibleErrors",["fbt","$InternalEnum","LSDatabaseSingleton","LSFactory","LSIssueNewErrorStoredProcedure","LSRemoveErrorStoredProcedure","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,b,e,g){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(d){return d.runInTransaction(function(d){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(d),{errorBodyText:a!=null?a.toString():void 0,errorExtraData:g,errorTitleText:b.toString(),presentationStyle:String(e)})},"readwrite",void 0,void 0,f.id+":37")}))}function k(a,b){return a.runInTransaction(function(a){return c("LSRemoveErrorStoredProcedure")(c("LSFactory")(a),{errorId:b})},"readwrite",void 0,void 0,f.id+":56")}function e(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.user_visible_errors)));yield (i||(i=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield k(a,b.errorId)});return function(a){return c.apply(this,arguments)}}()))})())}function l(a){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.tables.user_visible_errors)));yield (i||(i=b("Promise"))).all(e.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b.errorExtraData===a&&(yield k(c,b.errorId))});return function(a){return d.apply(this,arguments)}}()))})())}var m=b("$InternalEnum")({TOAST:"toast",BANNER:"banner"}),n=h._(/*BTDS*/"Couldn't load all end-to-end encrypted chats"),o=h._(/*BTDS*/"Try refreshing the page to see them."),p=h._(/*BTDS*/"You may need to refresh this page"),q=h._(/*BTDS*/"There may be issues sending or receiving messages on this page. Refresh it to reload your chats."),r=c("gkx")("4424")?h._(/*BTDS*/"This browser is not supported"):h._(/*BTDS*/"You may need to update your browser");h=c("gkx")("4424")?h._(/*BTDS*/"Some messages are missing and certain messaging features are not available. Try using another browser or mobile device."):h._(/*BTDS*/"End-to-end encrypted chats won't appear in this browser. Try updating your browser or use another one.");var s=new Map([[n.toString(),n],[p.toString(),p]]),t=new Map([[o.toString(),o],[q.toString(),q]]);g.issueError=a;g.deleteUserVisibleError=k;g.deleteAllErrors=e;g.deleteUserVisibleErrorByJSErrorMessage=l;g.MAWUserVisibleErrorPresentationType=m;g.MAWGeneralErrorMsgTitle=n;g.MAWGeneralErrorMsgBody=o;g.MAWLegacyUserErrorMsgTitle=p;g.MAWLegacyUserErrorMsgBody=q;g.MAWUnsupportedIndexedDBErrorMsgTitle=r;g.MAWUnsupportedIndexedDBErrorMsg=h;g.errorMsgTitleToFbtMap=s;g.errorMsgBodyToFbtMap=t}),226);
__d("MAWStateContext.react",["$InternalEnum","EncryptedBackupsDYITypes","FBLogger","MAWSharedProtocolQueueConst","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.createContext,k=i.useCallback,l=i.useContext,m=i.useEffect,n=i.useRef,o=i.useState;i=b("$InternalEnum")({NOT_STARTED:"not_started",IN_PROGRESS:"in_progress",READY:"ready"});b={ebDYIState:d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted,ebState:null,ephemeralSettings:{},isMAWDBinUILoaded:!1,mediaDownloadRetryCount:{},mediaDownloadStatus:{},messageLatencies:{},offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{},unArchivedSelfDeviceChangeAlerts:0,workerState:i.NOT_STARTED};function a(){var a=l(r);return k(function(b,c){c===void 0&&(c=Date.now()),a({optimisticMsgId:b,tag:"OptimisticSendMessage",timestamp:c})},[a])}function e(){var a=l(r);return k(function(){a({tag:"ClearEphemeralSettings"})},[a])}var p={state:b,subscriptions:new Set()},q=j(function(){return p});d=j(p);var r=j(function(a){throw c("FBLogger")("messenger_web").mustfixThrow("MAW Dispatch not implemented")});function f(a){var b=l(q)(),c=b.state,d=b.subscriptions;b=o(function(){return a(c)});var e=b[0],f=b[1],g=n(e);m(function(){var b=function(b){b=a(b);b!==g.current&&(g.current=b,f(b))};d.add(b);return function(){d["delete"](b)}},[d,a]);return e}g.WorkerState=i;g.initialState=b;g.useDispatchOptimisticSendMessage=a;g.useDispatchClearEphemeralSettings=e;g.MAWNonRerenderingStateContext=q;g.MAWStateContext=d;g.MAWDispatchContext=r;g.useMAWSelector=f}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=["toLastActiveClient"],l,m;function n(a,b){if(a==null)return;var c=a.toLastActiveClient;a=babelHelpers.objectWithoutPropertiesLoose(a,k);if(c===!0&&b!=null){return babelHelpers["extends"]({},a,{toClientId:(c=a.toClientId)!=null?c:b})}return a}a=function(){function a(){var a=this;this.$2=new Map();this.$4=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Set()});this.$5=null;this.fireAndForget=function(b,c,d,e,f,g){e===void 0&&(e=!1),a.$3==null||a.$3(b,c,d),a.$4.get(b).add({route:c,arg:d,resolver:null,silentLog:e,eventCallbacks:f,opts:n(g,a.$5)}),a.$6(b,c)};this.sendAndReceive=function(c,d,e,f,g,h){f===void 0&&(f=!1);return new(m||(m=b("Promise")))(function(b){a.$3==null||a.$3(c,d,e),a.$4.get(c).add({route:d,arg:e,resolver:function(a){b(a)},silentLog:f,eventCallbacks:g,opts:n(h,a.$5)}),a.$6(c,d)})}}var e=a.prototype;e.setAckPayload=function(a){this.$1=a};e.getAckPayoad=function(){return this.$1};e.hasHandlerForNamespace=function(a){return this.$2.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$2.keys())};e.setOnRouteCalled=function(a){this.$3=a};e.setNamespaceHandler=function(a,b){var c=this.$2,d=c.get(a);if(d===b)return;c.set(a,b);d==null&&this.$6(a)};e.$7=function(a,c){var e=a.route,f=a.arg,g=a.resolver,i=a.silentLog,j=a.eventCallbacks;a=a.opts;try{var k;this.$5=(k=a==null?void 0:a.fromClientId)!=null?k:this.$5;c(e,f,g,i,j,a)}catch(a){g==null||g((m||(m=b("Promise"))).reject(a)),d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""])),a)}};e.$6=function(a,b){var e=this,f=this.$4.get(a),g=this.$2.get(a);if(g==null){var h=(l||(l=c("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""])),a,b,h);return}f.forEach(function(a){f["delete"](a),e.$7(a,g)})};e.setHandlers=function(a,b){function e(e,f,g,h,i,k){if(b[e]==null){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),e,a);throw c("err")(e+" is not defined for "+a)}h=b[e](f,k);g&&g(h)}this.setNamespaceHandler(a,e)};return a}();g.normaliseHandlerOptions=n;g.DynamicRouterSync=a}),98);
__d("isAppsURI",["isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isFacebookURI")(a)&&a.getSubdomain()==="apps"}g["default"]=a}),98);
__d("shouldHideChatOnAppsSubdomain",["ConstUriUtils","isAppsURI","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("ConstUriUtils").getUri(document.location.href);return!a?!1:c("qex")._("2122")===!0&&c("isAppsURI")(a)}g["default"]=a}),98);
__d("shouldDisableWorkerOnAppsSubdomain",["qex","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("2119")===!0&&c("shouldHideChatOnAppsSubdomain")()}g["default"]=a}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function a(a){var b=c("useAsyncReStore")();i(function(){var d,e=!1;j.onReadyImmediately(function(f){c("promiseDone")(b,function(b){e||(d=f.subscribeToEncryptedBackupsRow(b,a))})});return function(){e=!0,d==null||d()}},[b,a])}g["default"]=a}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCommonBackendSetup","MAWEncryptedBackupsStateManager","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","asyncToGeneratorRuntime","cr:13007","cr:7327","cr:8498","getErrorSafe","gkx","justknobx","performance","promiseDone","react","requireDeferred","shouldDisableWorkerOnAppsSubdomain","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");var l=e.useContext,m=e.useEffect,n=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),o=b("cr:7327")||b("cr:8498"),p=b("cr:13007")==null?void 0:b("cr:13007").MAWInitialiseMAWDbInUI;c("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var q=!1,r=function(){return(i||(i=c("performance"))).now()},s=function(a){c("gkx")("12414")||(d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:a}))};function t(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function u(){d("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function v(){t(),u()}function a(a){d("MAWLoggerUtils").initMessengerWebLogging();var b=l(d("MAWStateContext.react").MAWDispatchContext),e=d("MAWIsIDBOperational").useIsIDBOperational();m(function(){e&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(w(b,a))},[a,b,e]);m(function(){e&&c("promiseDone")(d("EBMainThreadListeners").initEBListeners())},[e]);c("useMWEncryptedBackupsProcessBackupIdsDeferred")(s);c("justknobx")._("4966")===!1&&v()}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.logout,f=b.reregisterDevice,g=b.rotateCryptoAuthToken,i=b.setupBridge;if(q){void n.load().then(function(a){a("messenger_web").warn("Armadillo already setup - return")});return}if(c("shouldDisableWorkerOnAppsSubdomain")()){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"])));return}q=!0;d("MAWMIC").startMAWMICFlow();d("MAWInit").MAWInit.start();(j||(j=c("ExecutionEnvironment"))).isInBrowser&&(yield d("MAWCacheServiceDB").getOrSetupMAWCacheDB());p!=null&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&c("promiseDone")(p(a),function(){},function(a){return n.load().then(function(b){return b("messenger_web").catching(a).mustfix("UI Dexie initialisation failed: %s",a.message)})});d("WABridge").makeWABridge(new(d("WADynamicRouterSync").DynamicRouterSync)());try{d("MAWIssueNewUserVisibleErrors").deleteAllErrors(),yield d("MAWCommonBackendSetup").setupArmadilloBackend(d("MAWInit").MAWInit,function(b){return i({dispatch:a,logout:e,reregisterDevice:f,rotateCryptoAuthToken:g,worker:b})},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1}),c("justknobx")._("4966")===!0&&v(),d("MAWMIC").onConnectToExistingWorker()},function(){a({tag:"InitOfflineQueueSyncComplete",value:void 0}),a({tag:"IsDbMigrating",value:!1})},"mawInit",function(a){}),d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",r()),d("MAWInit").MAWInit.endSuccess()}catch(a){var k,l=c("getErrorSafe")(a);b=l instanceof d("MAWInitError").MAWInitError?l.message:"maw_init_failure";l.message=(k=l.message)!=null?k:"Unknown";k=l.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";k?d("MAWInit").MAWInit.cancel(b,l):(d("MAWWaitForBackendSetup").rejectBackendSetup(l),d("MAWInit").MAWInit.fail(b,l));d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,l.message);l&&void n.load().then(function(a){a("messenger_web").catching(l).mustfix("MAW backend setup failed -- %s",l.message)});throw l}void d("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations();o!=null&&void o.initializeMinosDb()});return x.apply(this,arguments)}g.useArmadillo=a}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(c!=null)return a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(k||(k=d("LSIntEnum"))).ofNumber(c.groupId)}));else return(i||(i=b("Promise"))).resolve()}function m(a){return a.network_requests.put({epochId:void 0,failureCount:(j||(j=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:j.zero,lastSyncRequestTimestampMs:j.zero,networkTaskIdentifier:void 0,syncDatabaseId:(k||(k=d("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function a(a){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]))),c("promiseDone")(a.runInTransaction(function(a){return(i||(i=b("Promise"))).all([l(a),m(a)])},"readwrite",void 0,void 0,f.id+":53"))}g.onOccamadilloMutexChange=a}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25310984,"169");function a(a){var e=a!=null?{instanceKey:a}:void 0,f=!1,g=!1;function k(){if(g)return;g=!0;c("QPLUserFlow").start(j,babelHelpers["extends"]({cancelOnUnload:!0,onFlowTimeout:function(){f=!0},timeoutInMs:(h||(h=c("ExecutionEnvironment"))).canUseDOM?6e4:0},e));void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(j,a)});t()}function l(a){if(!g||f)return;t();c("QPLUserFlow").addPoint(j,a,e)}function m(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{bool:(d={},d[a]=b,d)})}function n(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string:(d={},d[a]=b,d)})}function o(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{string_array:(d={},d[a]=b,d)})}function p(a,b){var d;if(!g||f)return;c("QPLUserFlow").addAnnotations(j,{"int":(d={},d[a]=b,d)})}function q(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{failReason:a}},e),c("QPLUserFlow").endFailure(j,"maw_init_fail",e),s=!1}function r(a){t(),f=!0,s=!1,c("QPLUserFlow").addAnnotations(j,{string:{dropReason:a}},e),(i||(i=c("QuickPerformanceLogger"))).markerDrop(j)}var s=!1;function t(){if(s)return;s=!0;c("QPLUserFlow").addAnnotations(j,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}function u(a){t(),f=!0,c("QPLUserFlow").addAnnotations(j,{string:{cancelReason:a}},e),c("QPLUserFlow").endCancel(j,e),s=!1}function v(){t(),f=!0,c("QPLUserFlow").endSuccess(j,e),s=!1}function w(a,b){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a+"_start";a=a+"_end";l(c);c=(yield b());l(a);return c});return x.apply(this,arguments)}return{addBoolAnnotation:m,addIntAnnotation:p,addStringAnnotation:n,addStringArrayAnnotation:o,cancel:u,drop:r,endSuccess:v,fail:q,logPoint:l,measurePerformance:w,start:k}}g.getMAWReinit=a}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.allTablesPersisted,c=a.db,e=a.dispatch,f=a.dispatchClearEphemeralSettings,g=a.instanceKey,h=a.logout,i=a.reregisterDevice,j=a.rotateCryptoAuthToken,k=a.setupBridge;a=a.workerCreateReason;g=d("MAWReinit").getMAWReinit(g);g.start();var l=function(){e({tag:"InitOfflineQueueSyncComplete",value:void 0})};yield d("MAWCommonBackendSetup").setupArmadilloBackend(g,function(a){a=k({dispatch:e,logout:h,reregisterDevice:i,rotateCryptoAuthToken:j,worker:a});b||d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(c);return a},l,l,a,function(a){});g.endSuccess();f()});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","asyncToGeneratorRuntime","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=e.useMemo,m=d("MWFBLogger").MWLogger().tags(["MAWInit"]),n=!1,o=0;function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(document.visibilityState!=="visible")return!1;var b=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(a){m.debug("AppMutex - Shouldn't reinitialize, worker already exists");return!1}return!b||!c?!1:!0});return q.apply(this,arguments)}function a(a,e){var f=a.logout,g=a.reregisterDevice,i=a.rotateCryptoAuthToken,q=a.setupBridge,r=l(function(){return d("MAWAppMutex").use()},[]),s=(h||(h=c("useReStore")))(),t=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),u=s.persistenceTypes.includes("indexeddb"),v=j(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=r.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;!u&&!c("isInstamadillo")()&&d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});yield d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange");d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWMIC").cancel("workerMutexLost");d("MAWInit").MAWInit.cancel("workerMutexLost");r.onMutexDeath()});return function(b){return a.apply(this,arguments)}}(),[r,u]),w=j(function(){r.onMutexDeath(),c("promiseDone")(d("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[r]),x=j(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("MAWWebWorkerSingleton").doesWorkerExist());a=(yield p(a));if(!a||n)return;n=!0;o++;try{yield c("MAWReinitWorker")({allTablesPersisted:u,db:s,dispatch:e,dispatchClearEphemeralSettings:t,instanceKey:o,logout:f,reregisterDevice:g,rotateCryptoAuthToken:i,setupBridge:q,workerCreateReason:"mawReinitSetupMutex"}),d("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(a){m.catching(a).mustfix("AppMutex - failed to reinitialize worker"),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:a.message.concat(": ",a.error)}},error:a,instanceKey:o})}finally{n=!1}}),[u,s,e,t,f,g,i,q]);k(function(){window.addEventListener("storage",v);var a=d("Run").onBeforeUnload(w,!1),b=d("Run").onUnload(w);window.addEventListener("visibilitychange",x);return function(){window.removeEventListener("storage",v),a.remove(),b.remove(),window.removeEventListener("visibilitychange",x)}},[v,w,x])}g.useMutex=a}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.dispatch;a.environment;a.fbId;a=a.platformSetupUtils;d("MAWSetupMutex").useMutex(a,b);return null}g["default"]=a}),98);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.threads).filter(function(a){a=a.threadType;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}).take((h||(h=d("I64"))).to_int32(e))));a=b.map(function(a,b){var c=a.lastActivityTimestampMs,e=a.lastReadWatermarkTimestampMs,f=a.threadKey;a=a.threadType;return d("LSShape").ofRecord({client_thread_pk:f,display_timestamp_ms:c,is_group_thread:d("LSMessagingThreadTypeUtil").isGroup(a),last_activity_timestamp_ms:c,last_read_watermark_timestamp_ms:e,server_thread_key:f,sort_order:(h||(h=d("I64"))).of_int32(b)})});return c("LSResult")(c("LSVec").ofArray(a))});function e(b,c,d){return a.apply(this,arguments)}return e}();a.__nop_name__="LSGetThreadDataFromTam";g["default"]=a}),98);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,95])).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[1]=c.createArray(),d[2]=c.createArray(),c.i64.neq(a[1],void 0)?d[3]=a[1]:d[3]=c.i64.cast([0,20]),c.forEach(c.db.table(220).fetch([[[c.i64.cast([0,95]),c.i64.cast([0,0])]]]),function(a){a=a.item;return d[10]=a.minLastActivityTimestampMs,d[9]=new c.Map(),d[9].set("has_more_before",a.hasMoreBefore),d[9].set("is_loading_before",a.isLoadingBefore),d[9].set("min_last_activity_timestamp_ms",d[10]),d[9].set("min_thread_key",a.minThreadKey),d[9].set("parent_thread_key",c.i64.cast([0,0])),d[11]=(d[2].push(d[9]),d[2]),c.forEach(c.islc(c.filter(c.db.table(9).fetch([[[{gte:d[10]}]],"lastActivityTimestampMs"]),function(a){return c.i64.ge(a.lastActivityTimestampMs,d[10])&&c.i64.eq(a.syncGroup,c.i64.cast([0,95]))&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(d[3])),function(a){a=a.item;return d[11]=new c.Map(),d[11].set("authority_level",a.authorityLevel),d[11].set("folder_name",a.folderName),d[11].set("last_activity_timestamp_ms",a.lastActivityTimestampMs),d[11].set("last_read_watermark_timestamp_ms",a.lastReadWatermarkTimestampMs),d[11].set("thread_key",a.threadKey),d[12]=(d[1].push(d[11]),d[1])})})},function(a){return d[4]=c.createArray(),c.nativeOperation(b("LSGetThreadDataFromTam.nop"),d[3]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return d[6]=c.createArray(),d[7]=new c.Map(),d[7].set("cursor",d[0]),d[7].set("mi_act_mapping_columns_for_integrity_check",d[6]),d[7].set("occam_threads_columns_for_integrity_check",d[1]),d[7].set("threads_ranges_columns_for_integrity_check",d[2]),d[7].set("tam_threads_columns_for_integrity_check",d[5]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"occam-threads-integrity-check",c.i64.cast([0,701]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure";a.__tables__=["sync_group_threads_ranges","threads"];e.exports=a}),null);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSScheduleOccamThreadsIntegrityChecker"),e.delayMs,e.maxThreadCount);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWChatFetchThreadMessageCounts",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return{}});return g.apply(this,arguments)}function c(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return 0});return h.apply(this,arguments)}f.fetchArmadilloThreadMessageCounts=a;f.fetchArmadilloThreadMessageCount=c}),66);
__d("globalCryptoSubtle",[],(function(a,b,c,d,e,f){"use strict";b=a.crypto.subtle;c=b;f["default"]=c}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useEffect,l="armadillo_msgr_data_loss_stats";function a(){k(function(){var a;window.setTimeout(function(){a=c("Visibility").addListener(c("Visibility").HIDDEN,function(){c("promiseDone")((j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),l,JSON.stringify(a))})}))})},3e4);return function(){var b;(b=a)==null||b.remove()}},[])}g.DATA_LOSS_STATISTICS_STORAGE_KEY=l;g.useDataLossStatisticsStorageListener=a}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=new TextEncoder();b=b.encode(a).buffer;a=(yield c("globalCryptoSubtle").digest("SHA-256",b));return l(a)}catch(a){return a}});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentIDBCnt,d=a.currentMsgCnt,e=a.logThreadId,f=a.prevMsgCnt,g=a.qplEvent;a=a.threadId;if(e!=null&&e){e=(yield m(a));b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),j.markerEnd(g,2))}else b!=null?((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2)):((j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(g),j.markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f}}),j.markerEnd(g,2))});return p.apply(this,arguments)}function q(a){var b=a.currentMsgCnt,c=a.logThreadId,d=a.prevMsgCnt,e=a.qplEvent;a=a.threadId;return o({currentMsgCnt:b,logThreadId:c,prevMsgCnt:d,qplEvent:e,threadId:a})}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(a,b));var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return{isThreadMissingMessages:!1};e=JSON.parse(e);b=(e=e[(i||(i=d("I64"))).to_string(b)])!=null?e:null;if(b==null)return{isThreadMissingMessages:!1};return b>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:b}:{isThreadMissingMessages:!1}}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss");return{isThreadMissingMessages:!1}}});return r.apply(this,arguments)}function e(a){a=d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a);a.then(function(a){var e=(k||(k=c("WebStorage"))).getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return(h||(h=b("Promise"))).resolve(null);e=JSON.parse(e);return(h||(h=b("Promise"))).resolve({current:a,previous:e})}).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var c=a.current;a=a.previous;return s(a,c)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")});return a.then(function(){})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=[];for(var f in a)Object.prototype.hasOwnProperty.call(d,f)&&e.push(f);f=[];for(var g=0;g<e.length;g++){var i=e[g],j={currentMsgCnt:d[i],prevMsgCnt:a[i],threadId:i};a[i]>0&&d[i]===0?(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553665,"1183")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717562243,"1358")})))):(f.push(q(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553666,"1184")}))),f.push(q(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717556541,"1361")}))))}yield (h||(h=b("Promise"))).all(f)});return t.apply(this,arguments)}function f(a){var b=function(b){c("promiseDone")(m(b).then(function(d){(j||(j=c("QuickPerformanceLogger"))).markerStartFromNavStart(c("qpl")._(717567419,"1383")),j.markerAnnotate(c("qpl")._(717567419,"1383"),{string:{encryptedThreadId:d,msg_count:a[b].toString()}}),j.markerEnd(c("qpl")._(717567419,"1383"),2)}))};for(var d in a)b(d)}g.qplLog=q;g.checkIsThreadMissingMessages=a;g.fetchCountsAndLogDataLoss=e;g.logThreadCompleteDataLoss=s;g.logLocalStatistics=f}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,e){b===void 0&&(b=c("emptyFunction")),i(function(){var e=!1;c("promiseDone")(d("waitForMAWMIC").promise.then(function(){if(e)return;a()})["catch"](function(){if(e)return;b()}));return function(){e=!0}},e)}g.useOnMawSetupComplete=a}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","asyncToGeneratorRuntime","gkx","justknobx","promiseDone","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){d("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener(),d("useOnMawSetupComplete.react").useOnMawSetupComplete(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a)})()),j()},j(),[])}function j(){try{var a=c("gkx")("24061"),e=c("justknobx")._("1683");a&&e&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return a.runInTransaction(function(a){return c("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(c("LSFactory")(a),{delayMs:(i||(i=d("I64"))).of_int32(6e4),maxThreadCount:i.of_int32(20)})},"readonly",void 0,void 0,f.id+":61")})())}catch(a){c("FBLogger")("wmi_eb").warn("Error running thread integrity checker",a)}}g["default"]=a}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;b=24*60*60*1e3;var j=5*b;function a(){i(function(){var a=c("setTimeout")(function(){var a;(a=d("MAWIssueNewUserVisibleErrors")).issueError(a.MAWLegacyUserErrorMsgBody,a.MAWLegacyUserErrorMsgTitle,a.MAWUserVisibleErrorPresentationType.BANNER)},j);return function(){return c("clearTimeout")(a)}},void 0)}g["default"]=a}),98);
__d("useMAWReregisterDeviceOnError",["FBLogger","LSPersistedDbGating","MAWEBSwitch","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MWEncryptedBackupsInitializeRestoreDeferred","ODS","WAOdsEnums","WMIWABridgeApi","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=i||d("react");var k=e.useCallback,l=e.useContext,m=!1,n=typeof window!=="undefined"?window:self;function o(){m=!0,c("promiseDone")(d("MAWSetupWorker").terminateWorkerPermanently(),function(){(j||(j=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",n.location.hostname),j.bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_fail_logout"),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function a(a){var e=a.rotateCryptoAuthToken,f=a.setupBridge,g=c("useAsyncReStore")(),i=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),p=l(d("MAWStateContext.react").MAWDispatchContext);return k(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(m)return;(j||(j=d("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",n.location.hostname);yield c("WMIWABridgeApi").removeCurrentDevice();yield d("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError");d("MAWWaitForBackendSetup").resetBackendSetup();try{var a=(yield g);(j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker");yield c("MAWReinitWorker")({allTablesPersisted:d("LSPersistedDbGating").allTablesPersisted,db:a,dispatch:p,dispatchClearEphemeralSettings:i,logout:o,reregisterDevice:o,rotateCryptoAuthToken:e,setupBridge:f,workerCreateReason:"mawReinitReregDevice"});c("MAWEBSwitch").isEnabled()&&((j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"eb_initial_restore"),yield d("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:a,onFailure:c("emptyFunction"),onSuccess:c("emptyFunction")}))}catch(b){d("MAWWaitForBackendSetup").rejectBackendSetup(b);a=b.description||b.message||b;c("FBLogger")("wmi_wa").tags([d("MAWLoggerUtils").Tag.DeviceRegistration,d("MAWLoggerUtils").Tag.LogoutHandler,d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWWorker,d("MAWLoggerUtils").Tag.MAWInit]).catching(b).MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker: ",""])),a);(j||(j=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker_fail.${message}");d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}),[g,p,i,e,f])}g["default"]=a}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(){i(function(){void (b("cr:20551")==null?void 0:b("cr:20551").logMAWDBUsageMetrics())},[])}g["default"]=a}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useCallback,k=e.useContext,l=e.useMemo;window.XPlatTesting=b("cr:6159");window.XPlatTestingGroups=b("cr:6160");window.XPlatMockServer=b("cr:8800");function a(a){var b=a.children,e=a.fbid,f=a.logout,g=a.setupBridge;a=k(d("MAWStateContext.react").MAWDispatchContext);var h=d("CometRelay").useRelayEnvironment(),m=j(function(){return d("MAWCryptoAuthToken").fetchFreshCAT(h)},[h]),n=c("useMAWReregisterDeviceOnError")({rotateCryptoAuthToken:m,setupBridge:g}),o=l(function(){return{logout:f!=null?f:function(){return c("promiseDone")(n())},reregisterDevice:function(){return c("promiseDone")(n())},rotateCryptoAuthToken:m,setupBridge:g}},[m,f,n,g]);d("MAWCommonSetup").useArmadillo(o);c("useLegacyUserWatchdog")();c("useDataLossChecker")();c("useStorageUsageMetricsLogger")();var p=k(c("BaseHeadingContext")),q=!d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();return i.jsxs(c("BaseHeadingContext").Provider,{value:p+1,children:[b,q?i.jsx(c("MAWSetupMutex.react"),{dispatch:a,environment:h,fbId:e,platformSetupUtils:o}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWBridgeInitOfflineQueueSyncStartHandler",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncStartHandler");function a(){h.onReady(function(a){a=a.getInstance("maw_setup");a.debug("Init Offline Queue Sync Start")})}g.call=a}),98);
__d("MAWDeviceChangeState-resolver",[],(function(a,b,c,d,e,f){"use strict";var g=0,h=[],i={getDeviceAlertCount:function(){return g},subscribe:function(a){h.push(a);return function(){h=h.filter(function(b){return b!==a})}}};function a(a){g!==a&&(g=a,h.forEach(function(a){return a()}))}function b(){return{read:function(){return i.getDeviceAlertCount()},subscribe:function(a){return i.subscribe(a)}}}f.updateDeviceCount=a;f.deviceAlertCount=b}),66);
__d("MAWMediaDownloadStatusReducersUtils",["MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatus","isEmpty","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(!d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusForXMAsEnabled())return a;b=b.reduce(function(b,d){if(d.faviconPlaintextHash!=null){var e;b[d.faviconPlaintextHash]=babelHelpers["extends"]({},a.mediaDownloadStatus[d.faviconPlaintextHash],{mainMediaStatus:d.hasXmaFaviconMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:(e=(e=a.mediaDownloadStatus[d.faviconPlaintextHash])==null?void 0:e.mainMediaStatus)!=null?e:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_xma_favicon_status"})}if(d.headerMediaPlaintextHash!=null){b[d.headerMediaPlaintextHash]=babelHelpers["extends"]({},a.mediaDownloadStatus[d.headerMediaPlaintextHash],{mainMediaStatus:d.hasXmaHeaderMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:(e=(e=a.mediaDownloadStatus[d.headerMediaPlaintextHash])==null?void 0:e.mainMediaStatus)!=null?e:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_xma_header_status"})}if(d.defaultPreviewMediaPlaintextHash==null)return b;e=c("nullthrows")(d.defaultPreviewMediaPlaintextHash).toString();if(a.mediaDownloadStatus[e]!=null&&a.mediaDownloadStatus[e].mainMediaStatus!==c("MAWMediaDownloadStatus").MISSING_FILE)return b;b[e]=babelHelpers["extends"]({},a.mediaDownloadStatus[e],{mainMediaStatus:d.hasMedia===!0?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MISSING_FILE,mainMediaStatusDetails:"initial_media_download"});return b},{});return(h||(h=c("isEmpty")))(b)?a:babelHelpers["extends"]({},a,{mediaDownloadStatus:babelHelpers["extends"]({},a.mediaDownloadStatus,b)})}g.handleNewXMAs=a}),98);
__d("MAWOfflineQueueThreadStatus",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return Object.entries(a).filter(function(a){var c,d=a[0];a=a[1];return((c=b[d])==null?void 0:c.chatStatus)!==a.chatStatus||((c=b[d])==null?void 0:c.snippetStatus)!==a.snippetStatus})},h=function(a,b){return a.reduce(function(a,b){var c=b[0];b=b[1];a[c]={chatStatus:b.chatStatus,snippetStatus:b.snippetStatus};return a},b)};function a(a,b){a=a!=null?g(a,b):null;a=a==null||a.length===0?b:h(a,babelHelpers["extends"]({},b));return a}f.calculateOfflineQueueThreadStatus=a}),66);
__d("MAWStateContextProvider.react",["MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWBridgeInitOfflineQueueSyncStartHandler","MAWDeviceChangeState-resolver","MAWMediaDownloadStatusReducersUtils","MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst","MAWStateContext.react","cr:19624","gkx","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useMemo,n=e.useReducer,o=e.useTransition,p=(e=c("gkx")("12254"))!=null?e:!1,q=(e=c("gkx")("12254"))!=null?e:!1,r=(e=c("gkx")("12254"))!=null?e:!1,s=(e=c("gkx")("12254"))!=null?e:!1,t=function(a,b){switch(b.tag){case"OptimisticSendMessage":var c;return p?a:babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(c={},c[b.optimisticMsgId]={sent:b.timestamp},c))});case"NewMsg":case"MsgUpdated":var e,f;if(p)return a;c=b.value.ack;var g=b.value.msgId;e=(e=b.value.offlineMsg)==null?void 0:e.msgId;e!=null&&a.messageLatencies[e]!=null&&(a.messageLatencies[g]=a.messageLatencies[e],delete a.messageLatencies[e]);e=a.messageLatencies[g];if((e==null?void 0:e.sent)!=null&&(e==null?void 0:e.acked)!=null)return a;e=(e==null?void 0:e.sent)||Date.now();c=c!==0?Date.now():void 0;return babelHelpers["extends"]({},a,{messageLatencies:babelHelpers["extends"]({},a.messageLatencies,(f={},f[g]={acked:c,sent:e},f))});case"InitOfflineQueueSyncProgress":g=b.value;return babelHelpers["extends"]({},a,{offlineQueueProgressDownloaded:g});case"InitOfflineQueueConsumerSyncProgress":c=b.value;e=c.chatJidStatus;f=c.processed;g=a.offlineQueueThreadStatus||{};c=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(e,g);return babelHelpers["extends"]({},a,{offlineQueueProgressProcessed:f,offlineQueueThreadStatus:c});case"InitOfflineQueueSyncStart":d("MAWBridgeInitOfflineQueueSyncStartHandler").call();e=b.value;return babelHelpers["extends"]({},a,{offlineQueueCount:e});case"InitOfflineQueueSyncComplete":d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();g=b.value;f=a.offlineQueueThreadStatus||{};c=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(g,f);return babelHelpers["extends"]({},a,{offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:c});case"UnArchivedSelfDeviceChangeAlerts":e=b.value;return babelHelpers["extends"]({},a,{unArchivedSelfDeviceChangeAlerts:e});case"EphemeralSettingsUpdatedForUI":if(r)return a;g=b.value;f=g.chatJid;c=g.ephemeralSettingArgs;e=c.ephemeralExpirationInSec;g=c.ephemeralLastUpdatedOrSetTimestamp;c=f;return babelHelpers["extends"]({},a,{ephemeralSettings:babelHelpers["extends"]({},a.ephemeralSettings,(f={},f[c]={ephemeralExpirationInSec:e,ephemeralLastUpdatedOrSetTimestamp:g},f))});case"ClearEphemeralSettings":return r?a:babelHelpers["extends"]({},a,{ephemeralSettings:{}});case"NewXMA":return d("MAWMediaDownloadStatusReducersUtils").handleNewXMAs(a,[b.value]);case"NewXMAs":return d("MAWMediaDownloadStatusReducersUtils").handleNewXMAs(a,b.value);case"SetIsMAWDBinUILoaded":return q?a:babelHelpers["extends"]({},a,{isMAWDBinUILoaded:!0});case"UpdateEBState":return babelHelpers["extends"]({},a,{ebState:b.value.newState});case"UpdateWorkerState":return babelHelpers["extends"]({},a,{workerState:b.value.newState})}return a},u=function(a){if(b("cr:19624")==null)return!1;if(a.tag==="InitOfflineQueueSyncProgress"){var c=a.value;b("cr:19624").initOfflineQueueSyncProgress(c);return!0}if(a.tag==="InitOfflineQueueConsumerSyncProgress"){c=a.value;var e=c.chatJidStatus;c=c.processed;b("cr:19624").initOfflineQueueConsumerSyncProgress(c,e);return!0}if(a.tag==="InitOfflineQueueSyncStart"){d("MAWBridgeInitOfflineQueueSyncStartHandler").call();c=a.value;b("cr:19624").initOfflineQueueSyncStart(c);return!0}if(a.tag==="InitOfflineQueueSyncComplete"){d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call();e=a.value;b("cr:19624").initOfflineQueueSyncComplete(e);return!0}return!1},v=function(a){if(!s)return!1;if(a.tag==="UnArchivedSelfDeviceChangeAlerts"){a=a.value;d("MAWDeviceChangeState-resolver").updateDeviceCount(a);return!0}return!1};function a(a){var b;a=a.children;var c=n(t,(b=d("MAWStateContext.react")).initialState),e=c[0],f=c[1];c=o();c[0];var g=c[1];c=k(function(a){var b=u(a);if(!b){b=v(a);b||g(function(){return f(a)})}},[]);var h=m(function(){return new Set()},[]),i=m(function(){return{state:e,subscriptions:h}},[e,h]),p=w(i),q=k(function(){return p.current},[p]);l(function(){h==null||h.forEach(function(a){return a(e)})},[e,h]);return j.jsx(b.MAWDispatchContext.Provider,{value:c,children:j.jsx(b.MAWStateContext.Provider,{value:i,children:j.jsx(b.MAWNonRerenderingStateContext.Provider,{value:q,children:a})})})}a.displayName=a.name+" [from "+f.id+"]";function w(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a);b.current=a;return b}g.MAWStateContextProvider=a}),98);
__d("IGDAWSetup.react",["FBLogger","IGDSetIGE2EEEligibility","IGDSetupBridge","MAWCurrentUser","MAWSetupImpl.react","MAWStateContextProvider.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(4);a=a.children;var e=j;d("IGDSetIGE2EEEligibility").useUpsertSetIGE2EEEligibilityOnMount();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"xjp7ctv"},b[0]=f):f=b[0];var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("MAWCurrentUser").getID(),b[1]=g):g=b[1];b[2]!==a?(f=i.jsx("div",babelHelpers["extends"]({},f,{"data-testid":void 0,children:i.jsx(d("MAWStateContextProvider.react").MAWStateContextProvider,{children:i.jsx(c("MAWSetupImpl.react"),{fbid:g,logout:e,setupBridge:d("IGDSetupBridge").setupBridge,children:a})})})),b[2]=a,b[3]=f):f=b[3];return f}function j(){}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("InstagramAdHideResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3449");b=d("FalcoLoggerInternal").create("instagram_ad_hide_response",a);e=b;g["default"]=e}),98);
__d("PolarisAPILikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:a}})}g.likePost=a}),98);
__d("PolarisAPIPostNotifyGuardianCall",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e="/api/v1/users/notify_guardian_call/";a={guardian_igid:a,reported_category:c,reported_igid:b};return d("PolarisInstapi").apiPost(e,{body:a}).then(function(a){return a.data})}g.postNotifyGuardianCall=a}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:a}})}g.savePost=a}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:a}})}g.unlikePost=a}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:a}})}g.unsavePost=a}),98);
__d("PolarisFRXBlockUserFollowupModal.react",["CometPlaceholder.react","CometRelay","I64","IGDBlockUserDialogOffMsys.entrypoint","IGDSConfirmDialog.react","IGDSGlimmer.react","JSResourceForInteraction","PolarisBlockDialogContainer.react","PolarisFRXWebReportStrings","PolarisGenericStrings","PolarisLinkBuilder","PolarisNavigationUtils","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","lazyLoadComponent","polarisRelationshipSelectors.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;var k=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDBlockUserDialog.react").__setRef("PolarisFRXBlockUserFollowupModal.react"));function l(a,b){a=a.userToBlock.id;return d("polarisRelationshipSelectors.react").getRelationship(b.relationships,a)}function m(a){a.onClose&&a.onClose()}function a(a){var b=d("react-compiler-runtime").c(24),e;b[0]!==a?(e=function(b){return l(a,b)},b[0]=a,b[1]=e):e=b[1];e=d("PolarisReactRedux.react").useSelector(e);var g=a.frxObjectType,h=a.isGroupThread,p=a.onClose,q=a.threadKey,r=a.userToBlock,s=a.useSimpleBlockModalWithoutRefresh,t=r.fbidV2,u=r.id;r=r.username;g=n(g);var v=c("useCometRelayEntrypointContextualEnvironmentProvider")();v=d("CometRelay").useEntryPointLoader(v,c("IGDBlockUserDialogOffMsys.entrypoint"));var w=v[0];v=v[1];var x;b[2]!==p?(x=function(){p()},b[2]=p,b[3]=x):x=b[3];x=x;if(g&&r!=null){w==null&&t!=null&&v({userFbId:t});b[4]!==w||b[5]!==h||b[6]!==x||b[7]!==q||b[8]!==u||b[9]!==r?(g=w?j.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:w,props:{blockUserIgId:u,isBlocked:!1,onClose:x}}):j.jsx(k,{clickPoint:"report",contactID:(i||(i=d("I64"))).of_string(u),isAfterReport:!0,isBlocked:!1,isGroup:h!=null?h:!1,onClose:x,shouldReportAsInstamadillo:!1,threadKey:q,userName:r}),b[4]=w,b[5]=h,b[6]=x,b[7]=q,b[8]=u,b[9]=r,b[10]=g):g=b[10];v=g;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(c("IGDSGlimmer.react"),{index:0}),b[11]=w):w=b[11];b[12]!==v?(h=j.jsx(c("CometPlaceholder.react"),{fallback:w,name:f.id,children:v}),b[12]=v,b[13]=h):h=b[13];return h}if(!u)return null;if(s===!0){b[14]!==a?(x=j.jsx(o,babelHelpers["extends"]({},a)),b[14]=a,b[15]=x):x=b[15];return x}b[16]!==a?(q=function(){return m(a)},b[16]=a,b[17]=q):q=b[17];b[18]!==t||b[19]!==e||b[20]!==q||b[21]!==u||b[22]!==r?(g=j.jsx(c("PolarisBlockDialogContainer.react"),{fbidV2:t,onClose:q,relationship:e,userId:u,username:r}),b[18]=t,b[19]=e,b[20]=q,b[21]=u,b[22]=r,b[23]=g):g=b[23];return g}function n(a){switch(a){case d("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE:case d("PolarisReportConstants").FRXObjectType.DIRECT_MESSAGE_THREAD:case d("PolarisReportConstants").FRXObjectType.ENCRYPTED_DIRECT_MESSAGE:return!0;default:return!1}}function o(a){var b=d("react-compiler-runtime").c(18),e=a.userToBlock;e=e.username;var f,g,h,i;b[0]!==e?(i=c("isStringNullOrEmpty")(e)?null:d("PolarisLinkBuilder").buildUserLink(e),h=c("isStringNullOrEmpty")(i),b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=i):(f=b[1],g=b[2],h=b[3],i=b[4]);if(!h){f=d("PolarisGenericStrings").CANCEL_TEXT;b[5]!==a||b[6]!==i?(h={confirmLabel:d("PolarisFRXWebReportStrings").VIEW_PROFILE_BUTTON_TEXT,onConfirm:function(){d("PolarisNavigationUtils").openURLWithFullPageReload(i),m(a)}},b[5]=a,b[6]=i,b[7]=h):h=b[7];g=h}else{f=d("PolarisGenericStrings").CLOSE_TEXT;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(h={},b[8]=h):h=b[8];g=h}h=g;var k=f,l;b[9]!==a?(l=function(){return m(a)},b[9]=a,b[10]=l):l=b[10];var n;b[11]!==e?(n=d("PolarisFRXWebReportStrings").getBlockUserModalTitle(e),b[11]=e,b[12]=n):n=b[12];b[13]!==f||b[14]!==g||b[15]!==l||b[16]!==n?(e=j.jsx(c("IGDSConfirmDialog.react"),babelHelpers["extends"]({},h,{body:d("PolarisFRXWebReportStrings").BLOCK_USER_THROUGH_PROFILE_MODAL_CONTENT,cancelLabel:k,onClose:l,title:n})),b[13]=f,b[14]=g,b[15]=l,b[16]=n,b[17]=e):e=b[17];return e}g["default"]=a}),98);
__d("PolarisFRXNotifyGuardianFollowupModal.react",["IGDSConfirmDialog.react","PolarisFRXWebReportStrings","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a.onClose&&a.onClose()}function k(a,b,c){a.onNotify&&a.onNotify(b,c)}function a(a){var b=d("react-compiler-runtime").c(14),e=c("usePolarisViewer")(),f=e==null?void 0:e.guardianId;b[0]!==f||b[1]!==a?(e={confirmLabel:d("PolarisFRXWebReportStrings").SEND_BUTTON_TEXT,onConfirm:function(){k(a,!0,f)}},b[0]=f,b[1]=a,b[2]=e):e=b[2];e=e;var g;b[3]!==a.guardianUsername||b[4]!==a.reportedTagTitle||b[5]!==a.reportedUsername?(g=d("PolarisFRXWebReportStrings").getNotifyGuardianModalText(a.guardianUsername,a.reportedTagTitle,a.reportedUsername),b[3]=a.guardianUsername,b[4]=a.reportedTagTitle,b[5]=a.reportedUsername,b[6]=g):g=b[6];var h;b[7]!==f||b[8]!==a?(h=function(){k(a,!1,f),j(a)},b[7]=f,b[8]=a,b[9]=h):h=b[9];var l;b[10]!==e||b[11]!==g||b[12]!==h?(l=i.jsx(c("IGDSConfirmDialog.react"),babelHelpers["extends"]({},e,{body:g,cancelLabel:d("PolarisFRXWebReportStrings").DONT_SEND_BUTTON_TEXT,onClose:h,title:d("PolarisFRXWebReportStrings").NOTIFY_GUARDIAN_MODAL_TITLE_NO_QUESTION})),b[10]=e,b[11]=g,b[12]=h,b[13]=l):l=b[13];return l}g["default"]=a}),98);
__d("PolarisFRXReportBaseScreenModal.react",["cx","IGDSBox.react","IGDSDialogHeader.react","IGDSDialogLegacy.react","PolarisFRXWebReportConstants","PolarisFRXWebReportStrings","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=4,l=4,m=4,n=!1;function a(a,b,c){a=a||{};var e=a.response;a=a.type;if(a===d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION)return{headerEnabled:!1};a=e||{};e=a.title;e=(a=e==null?void 0:e.text)!=null?a:d("PolarisFRXWebReportStrings").DEFAULT_MODAL_HEADER_TEXT;return{headerEnabled:!0,onBackButton:c,titleText:e,withBackButton:b}}function o(a){a.onClose&&a.onClose()}function b(a){var b,e=d("react-compiler-runtime").c(8),f=d("PolarisUA").isMobile()?"large":"default";b=(b=a.headerParams.titleText)!=null?b:void 0;var g;e[0]!==a?(g=function(){return o(a)},e[0]=a,e[1]=g):g=e[1];var h;e[2]!==a?(h=j.jsxs("div",{className:"_acgx"+(f==="large"?" _acqj":""),children:[j.jsx(p,babelHelpers["extends"]({},a)),j.jsx(q,babelHelpers["extends"]({},a))]}),e[2]=a,e[3]=h):h=e[3];e[4]!==b||e[5]!==g||e[6]!==h?(f=j.jsx(c("IGDSDialogLegacy.react"),{label:b,onClose:g,size:f,testid:void 0,children:h}),e[4]=b,e[5]=g,e[6]=h,e[7]=f):f=e[7];return f}function p(a){var b=d("react-compiler-runtime").c(11),e=a.headerParams,f=e.headerEnabled,g=e.titleText,h=e.onBackButton;e=e.withBackButton;e=e===void 0?n:e;if(!f)return null;b[0]!==h||b[1]!==e?(f=e&&h?{onBack:function(){return h()}}:void 0,b[0]=h,b[1]=e,b[2]=f):f=b[2];e=f;b[3]!==a?(f=function(){return o(a)},b[3]=a,b[4]=f):f=b[4];var i;b[5]!==g?(i=j.jsx(j.Fragment,{children:g}),b[5]=g,b[6]=i):i=b[6];b[7]!==e||b[8]!==f||b[9]!==i?(g=j.jsx(c("IGDSDialogHeader.react"),babelHelpers["extends"]({onClose:f},e,{children:i})),b[7]=e,b[8]=f,b[9]=i,b[10]=g):g=b[10];return g}function q(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.disableDefaultBodyPaddingMargin;a=a===void 0?!1:a;var f,g;a?f=g=a=0:(f=k,a=m,g=l);var h;b[0]!==g||b[1]!==a||b[2]!==f||b[3]!==e?(h=j.jsx("div",{className:"_acgy",children:j.jsx("div",{className:"_acgz",children:j.jsx(c("IGDSBox.react"),{marginBottom:g,marginTop:a,paddingX:f,position:"relative",children:e})})}),b[0]=g,b[1]=a,b[2]=f,b[3]=e,b[4]=h):h=b[4];return h}g.DEFAULT_BODY_PADDING_X=k;g.DEFAULT_BODY_MARGIN_BOTTOM=l;g.DEFAULT_BODY_MARGIN_TOP=m;g.getDefaultScreenModalHeaderParamsFromScreenPayload=a;g.FRXReportBaseScreenModal=b}),98);
__d("PolarisFRXReportModalLinkUtils",["URI","polarisIsInternalURIString"],(function(a,b,c,d,e,f,g){"use strict";var h,i="help.instagram.com";function j(a){return c("polarisIsInternalURIString")(a)&&new(h||(h=c("URI")))(a).getDomain()===i}function a(a){return j(a)||!c("polarisIsInternalURIString")(a)}g.shouldLinkUseBlankTarget=a}),98);
__d("PolarisFRXReportMainButton.react",["PolarisFRXReportModalLinkUtils","PolarisIGCoreButton.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a["data-testid"],f=a.disabled,g=a.href,h=a.onClick,j=a.primaryButton,k=a.spinner;a=a.text;var l;if(!c("isStringNullOrEmpty")(g)&&f!==!0){var m=d("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(g)?"_blank":void 0,n;b[0]!==g||b[1]!==m?(n={href:g,target:m},b[0]=g,b[1]=m,b[2]=n):n=b[2];l=n}g=(j!=null?j:!0)?"ig-primary-button":"ig-secondary-button";m=!!f;n=!!k;b[3]!==h?(j=function(){return h&&h()},b[3]=h,b[4]=j):j=b[4];b[5]!==l||b[6]!==g||b[7]!==m||b[8]!==n||b[9]!==j||b[10]!==e||b[11]!==a?(f=i.jsx(c("PolarisIGCoreButton.react"),babelHelpers["extends"]({},l,{color:g,"data-testid":void 0,disabled:m,loading:n,onClick:j,children:a})),b[5]=l,b[6]=g,b[7]=m,b[8]=n,b[9]=j,b[10]=e,b[11]=a,b[12]=f):f=b[12];return f}g["default"]=a}),98);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9617087628339557"}),null);
__d("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql",["PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:a,action:"THROW"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisFRXReportModalOptionList.react",["cx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(4),c=a.asRadio;a=a.children;c=c===void 0?!1:c;var e="_ac7r";if(c){b[0]!==a?(c=j.jsx("fieldset",{className:e,children:a}),b[0]=a,b[1]=c):c=b[1];return c}b[2]!==a?(c=j.jsx("div",{className:e,role:"list",children:a}),b[2]=a,b[3]=c):c=b[3];return c}g["default"]=a}),98);
__d("PolarisFRXReportModalRichTextRenderer.react",["IGDSTextVariants.react","PolarisFRXReportModalLinkUtils","PolarisFastLink.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={BOLD:1,CODE:8,ITALIC:2,NONE:0,QUOTE:128,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64,UNDERLINE:4},k={"#000000":"web-always-black","#00376B":"ig-link","#0095F6":"ig-primary-button","#262626":"ig-primary-text","#58C322":"DEPRECATED_green","#8E8E8E":"ig-secondary-text","#c7c7c7":"ig-tertiary-text","#ed4956":"ig-error-or-destructive","#ffffff":"web-always-white"};function a(a){var b=d("react-compiler-runtime").c(20),e=a.children,f=a.className,g=a.color,h=a["data-testid"],l=a.href,m=a.onClick;a=a.style;var n=e,o=l!==""&&l!=null,p;!o&&g!=null&&(p=g in k?k[g]:void 0);if(a!=null&&(g!=null||o))bb0:switch(a){case j.BOLD:c("vulture")("fV5MFre13m-D0MYt9_FFNrQ9KyI=");b[0]!==e||b[1]!==p?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:p,children:e}),b[0]=e,b[1]=p,b[2]=g):g=b[2];n=g;break bb0;case j.SUBSCRIPT:c("vulture")("eCJHHqBBPnzjawdhq0xYVvc7yAg=");b[3]!==e||b[4]!==p?(o=i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:p,children:e}),b[3]=e,b[4]=p,b[5]=o):o=b[5];n=o;break bb0;default:c("vulture")("UU50nd_eFDgMsEYXYA5weYdg8jo=");b[6]!==e||b[7]!==p?(a=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:p,children:e}),b[6]=e,b[7]=p,b[8]=a):a=b[8];n=a}if(l!==""&&l!=null){b[9]!==m?(g=function(){return m&&m()},b[9]=m,b[10]=g):g=b[10];o=d("PolarisFRXReportModalLinkUtils").shouldLinkUseBlankTarget(l)?"_blank":void 0;b[11]!==f||b[12]!==l||b[13]!==n||b[14]!==g||b[15]!==o||b[16]!==h?(e=i.jsx(c("PolarisFastLink.react"),{className:f,"data-testid":void 0,href:l,onClick:g,target:o,children:n}),b[11]=f,b[12]=l,b[13]=n,b[14]=g,b[15]=o,b[16]=h,b[17]=e):e=b[17];return e}b[18]!==n?(a=i.jsx(i.Fragment,{children:n}),b[18]=n,b[19]=a):a=b[19];return a}g["default"]=a}),98);
__d("PolarisFRXReportModalOptionListItem.react",["cx","fbt","IGDSBox.react","IGDSChevronIcon.react","IGDSRadioButton.react","IGDSSpinner.react","PolarisFRXReportModalRichTextRenderer.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={BUTTON:"button",LINK:"link",RADIO:"radio"},m={DEFAULT:"default",GREY:"grey",RED:"red"},n=4;function o(a){a.onSelect&&a.onSelect()}function p(a){a=a.href;return c("isStringNullOrEmpty")(a)?l.BUTTON:l.LINK}function a(a){var b=d("react-compiler-runtime").c(37),e=a.children,f=a["data-testid"],g=a.href,h=a.variant,i=a.textColor,j=a.disabled;h=h===void 0?p(a):h;i=i===void 0?m.DEFAULT:i;var r=h===l.RADIO;e=e;if(!r){var s;b[0]!==e?(s=k.jsx(c("IGDSBox.react"),{flex:"grow",position:"relative",children:e}),b[0]=e,b[1]=s):s=b[1];var t;b[2]!==j||b[3]!==a?(t=j!==!0&&k.jsx(q,babelHelpers["extends"]({},a)),b[2]=j,b[3]=a,b[4]=t):t=b[4];var u;b[5]!==s||b[6]!==t?(u=k.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",padding:n,position:"relative",children:[s,t]}),b[5]=s,b[6]=t,b[7]=u):u=b[7];e=u}s="_abn2"+(i===m.RED?" _abn3":"")+(i===m.GREY?" _abn4":"");if(r){t=a.selected;u=a.value;i=u===void 0?"":u;b[8]!==e||b[9]!==s?(r=k.jsx("div",{className:s,children:e}),b[8]=e,b[9]=s,b[10]=r):r=b[10];b[11]!==a?(u=function(){return o(a)},b[11]=a,b[12]=u):u=b[12];var v;b[13]!==t||b[14]!==r||b[15]!==u||b[16]!==i?(v=k.jsx(c("IGDSRadioButton.react"),{isChecked:t,label:r,onChange:u,value:i}),b[13]=t,b[14]=r,b[15]=u,b[16]=i,b[17]=v):v=b[17];b[18]!==v||b[19]!==f?(t=k.jsx(c("IGDSBox.react"),{"data-testid":void 0,padding:n,children:v}),b[18]=v,b[19]=f,b[20]=t):t=b[20];return t}else if(h===l.LINK&&g!=null&&g!==""){b[21]!==a?(r=function(){return o(a)},b[21]=a,b[22]=r):r=b[22];b[23]!==e||b[24]!==g||b[25]!==s||b[26]!==r||b[27]!==f?(u=k.jsx(c("PolarisFRXReportModalRichTextRenderer.react"),{className:s,"data-testid":void 0,href:g,onClick:r,children:e}),b[23]=e,b[24]=g,b[25]=s,b[26]=r,b[27]=f,b[28]=u):u=b[28];return u}b[29]!==a?(i=function(){return o(a)},b[29]=a,b[30]=i):i=b[30];b[31]!==e||b[32]!==j||b[33]!==s||b[34]!==i||b[35]!==f?(v=k.jsx("button",{className:s,"data-testid":void 0,disabled:j,onClick:i,children:e}),b[31]=e,b[32]=j,b[33]=s,b[34]=i,b[35]=f,b[36]=v):v=b[36];return v}function q(a){var b=d("react-compiler-runtime").c(4);a=a.loading;if(a===!0){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx(c("IGDSSpinner.react"),{size:"small"}),b[0]=a):a=b[0];a=a}else{var e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(c("IGDSChevronIcon.react"),{alt:i._(/*BTDS*/"chevron"),color:"ig-tertiary-text",direction:"next",size:17}),b[1]=e):e=b[1];a=e}b[2]!==a?(e=k.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",direction:"row",marginStart:2,position:"relative",children:a}),b[2]=a,b[3]=e):e=b[3];return e}g.OPTION_LIST_ITEM_VARIANTS=l;g.OPTION_LIST_ITEM_TEXT_COLORS=m;g.FRXReportModalOptionListItem=a}),226);
__d("polarisGetGuardianInfo",["normalizr"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("normalizr").schema.Entity)("userInfo",{},{idAttribute:function(a){return String(a.pk)},processStrategy:function(a){return{username:a.username}}});function a(a){return d("normalizr").normalize(a,h).entities.userInfo}g["default"]=a}),98);
__d("PolarisFRXWebReportActions",["JSResourceForInteraction","PolarisAPIPostNotifyGuardianCall","PolarisDirectLogger","PolarisFRXWebReportConstants","PolarisInstapi","PolarisReportConstants","polarisGetGuardianInfo","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=c("JSResourceForInteraction")("PolarisFRXWebSendSecureReportAction").__setRef("PolarisFRXWebReportActions");function a(a){a=babelHelpers["extends"]({},a,{frx_prompt_request_type:d("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.START});return k(a,!0)}function b(a){var b=a.frxPromptRequestType,c=a.metadata,d=j(a);c=babelHelpers["extends"]({},c,d,{frx_prompt_request_type:b});return k(c,!1,(d=a.optionalParams)==null?void 0:d.thread_id,(b=a.optionalParams)==null?void 0:b.responsible_id)}function j(a){var b=a.context;a=a.optionalParams;var c=a.attachments,d=a.evidenceText,e=a.reportSubtype,f=a.selectedPromptButtonActionType,g=a.selectedTagTypes,h=a.selectedVictimID;a=a.tipNumber;var i={};b!=null&&(i.context=b);g!=null&&(i.selected_tag_types=JSON.stringify(g));f!=null&&(i.action_type=f);h!=null&&(i.victim_user_id=h);a!=null&&(i.tip_number=a);c!=null&&(i.attachments=c);d!=null&&(i.evidence_text=d);e!=null&&(i.report_subtype=e);return babelHelpers["extends"]({},i)}function k(a,b,e,f){return function(g,j){var k=h++;g({frxScreenRequestID:k,isInitScreen:b,type:"FRX_WEB_REPORT_SCREEN_API_REQUESTED"});j=d("PolarisInstapi").apiPost("/api/v1/web/reports/get_frx_prompt/",{body:a}).then(function(a){return a.data});j.then(function(b){var h=b.response;b=b.type;if(h==null||b==null)g({frxScreenRequestID:k,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"});else{var j=h.frx_context;[d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE,d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_THREAD].includes(a.location)&&a.frx_prompt_request_type===d("PolarisFRXWebReportConstants").FRX_SCREEN_INPUT_REQUEST_TYPE_INTS.POLICY_EDUCATION&&f!==void 0&&e!==void 0&&j!==void 0&&c("promiseDone")(i.load().then(function(b){g(b(j,f,e,a.victim_user_id,a.location===d("PolarisReportConstants").FRXLocation.ENCRYPTED_DIRECT_MESSAGE?a.object_id:void 0))}));g({frxScreenRequestID:k,screenPayload:{frxScreenRequestID:k,response:h,type:b},type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_SUCCESS"})}})["catch"](function(){g({frxScreenRequestID:k,type:"FRX_WEB_REPORT_SCREEN_API_REQUEST_FAILED"})})}}function e(a,b,c,e){return function(f,g){f({type:"FRX_WEB_NOTIFY_GUARDIAN_FOLLOWUP_MODAL_TO_CONFIMATION_MODAL"}),a&&d("PolarisAPIPostNotifyGuardianCall").postNotifyGuardianCall(b,c,e)["catch"](function(a){var b=new(d("PolarisDirectLogger").DirectLogger)("DirectActions");b.logError("Notify Guardian From Web",a)})}}function f(a){return babelHelpers["extends"]({type:"FRX_WEB_REPORT_REPORTING_MODAL_CLOSED"},a)}function l(){return{type:"FRX_WEB_REPORT_GO_BACK_ONE_SCREEN"}}function m(){return{type:"FRX_WEB_REPORT_START_UNFOLLOW_FOLLOWUP"}}function n(){return{type:"FRX_WEB_REPORT_START_BLOCK_FOLLOWUP"}}function o(){return{type:"FRX_WEB_REPORT_START_NOTIFY_GUARDIAN_FOLLOWUP"}}function p(){return function(a,b){a({type:"FRX_WEB_REPORT_DISABLE_NOTIFY_GUARDIAN_OPTION"})}}function q(a){return function(b,e){d("PolarisInstapi").apiGet("/api/v1/users/{user_id}/info/",{path:{user_id:a}}).then(function(d){d=d.data.user;d&&b({guardian:c("polarisGetGuardianInfo")(d)[a],type:"FRX_WEB_REPORT_STORE_GUARDIAN_INFORMATION"})})}}function r(a){return function(b,c){b({reportedTagTitle:a,type:"FRX_WEB_REPORT_STORE_REPORTED_TAG_TITLE"})}}g.doRequestInitFRXScreenAction=a;g.doRequestNextFRXScreenAction=b;g.doOpenNotifyGuardianFollowupModalToPreviousScreenAction=e;g.doReportingModalClosedAction=f;g.doGoBackOneFRXScreenAction=l;g.doStartUnfollowFollowupAction=m;g.doStartBlockFollowupAction=n;g.doStartNotifyGuardianFollowupAction=o;g.doDisableNotifyGuardianOption=p;g.doStoreGuardianInformation=q;g.doStoreReportedTagTitle=r}),98);
__d("PolarisFRXWebReportStateSelectors",["PolarisFRXWebReportConstants","PolarisFRXWebReportUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.webFRXReport.pendingFRXScreenRequestID!==null}function h(a){return a.webFRXReport.screenHistoryStack}function b(a){return d("PolarisFRXWebReportUtils").getCurrentScreenFromHistoryStack(h(a))}function c(a){return h(a).length}function e(a){a=h(a);return a.findIndex(function(a){return a.type===d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION})>=0}function f(a){return a.webFRXReport.currRenderStep}function i(a){return a.webFRXReport.disableNotifyGuardianOption}function j(a){return a.webFRXReport.guardianUsername}function k(a){return a.webFRXReport.reportedTagTitle}g.getIsFRXScreenRequestProcessing=a;g.getCurrScreenPayload=b;g.getScreenHistorySize=c;g.getIsConfirmationScreenInHistoryStack=e;g.getCurrRenderStep=f;g.getDisableNotifyGuardianOption=i;g.getGuardianUsername=j;g.getReportedTagTitle=k}),98);
__d("PolarisFRXReportModalFollowUpActionSection.react",["IGDSBox.react","PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXWebReportActions","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","isStringNullOrEmpty","polarisRelationshipSelectors.react","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a,b){a=a.reportedOwner.id;return d("polarisRelationshipSelectors.react").getRelationship(b.relationships,a)}function l(a,b){a=a.onSelectFollowupAction;a&&a(b)}function a(a){var e=d("react-compiler-runtime").c(22),f,g;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h!==void 0?h:h=b("PolarisFRXReportModalFollowUpActionSectionFetaSupervisionQuery.graphql"),g={},e[0]=f,e[1]=g):(f=e[0],g=e[1]);f=c("react-relay/relay-hooks/useLazyLoadQuery")(f,g);var i=(g=f.xfb_youth_platform)==null||(g=g.viewer)==null?void 0:g.is_f3_supervised_user;f=a.followUpActions;e[2]!==a?(g=function(b){return d("polarisRelationshipSelectors.react").followedByViewer(k(a,b))},e[2]=a,e[3]=g):g=e[3];var q=d("PolarisReactRedux.react").useSelector(g);e[4]!==a?(g=function(b){return d("polarisRelationshipSelectors.react").isBlockedByViewer(k(a,b))},e[4]=a,e[5]=g):g=e[5];var r=d("PolarisReactRedux.react").useSelector(g),s=c("usePolarisViewer")();if(e[6]!==f||e[7]!==i||e[8]!==a||e[9]!==r||e[10]!==q||e[11]!==(s==null?void 0:s.isSupervisedUser)){e[13]!==i||e[14]!==a||e[15]!==r||e[16]!==q||e[17]!==(s==null?void 0:s.isSupervisedUser)?(g=function(b,c){var e=b.action_type,f=b.beta_redirect_uri,g=b.name;if(e==null)return null;g=g==null?void 0:g.text;var h=function(){return l(a,b)};c="followup-"+c;switch(e){case d("PolarisReportConstants").FRXActionType.LEARN_MORE_ADS:case d("PolarisReportConstants").FRXActionType.LEARN_MORE_EDUCATION:case d("PolarisReportConstants").FRXActionType.SELF_INJURY_EDUCATION_ACTION:case d("PolarisReportConstants").FRXActionType.EATING_DISORDER_EDUCATION_ACTION:return g==null||g===""||f==null||f===""?null:j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{href:f,onSelect:h,children:g},c);case d("PolarisReportConstants").FRXActionType.UNFOLLOW:return!q?null:j.jsx(n,{labelText:g,onSelect:h},c);case d("PolarisReportConstants").FRXActionType.BLOCK_ACTOR:return r?null:j.jsx(o,{labelText:g,onSelect:h},c);case d("PolarisReportConstants").FRXActionType.NOTIFY_GUARDIAN:return(s==null?void 0:s.isSupervisedUser)!==!0&&i!==!0?null:j.jsx(p,{labelText:g,onSelect:h},c);default:return null}},e[13]=i,e[14]=a,e[15]=r,e[16]=q,e[17]=s==null?void 0:s.isSupervisedUser,e[18]=g):g=e[18];g=f.map(g).filter(m);e[6]=f;e[7]=i;e[8]=a;e[9]=r;e[10]=q;e[11]=s==null?void 0:s.isSupervisedUser;e[12]=g}else g=e[12];f=g;if(f.length===0)return null;e[19]===Symbol["for"]("react.memo_cache_sentinel")?(g=j.jsx(c("IGDSBox.react"),{marginTop:11,position:"relative"}),e[19]=g):g=e[19];e[20]!==f?(g=j.jsxs(j.Fragment,{children:[g,j.jsx(c("PolarisFRXReportModalOptionList.react"),{children:f})]}),e[20]=f,e[21]=g):g=e[21];return g}function m(a){return a!=null}function n(a){var b=d("react-compiler-runtime").c(6),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_UNFOLLOW_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();b[0]!==g||b[1]!==f?(e=function(){f(),g(d("PolarisFRXWebReportActions").doStartUnfollowFollowupAction())},b[0]=g,b[1]=f,b[2]=e):e=b[2];var h;b[3]!==e||b[4]!==a?(h=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:e,children:a}),b[3]=e,b[4]=a,b[5]=h):h=b[5];return h}function o(a){var b=d("react-compiler-runtime").c(6),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_BLOCK_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();b[0]!==g||b[1]!==f?(e=function(){f(),g(d("PolarisFRXWebReportActions").doStartBlockFollowupAction())},b[0]=g,b[1]=f,b[2]=e):e=b[2];var h;b[3]!==a||b[4]!==e?(h=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{onSelect:e,textColor:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.RED,children:a}),b[3]=a,b[4]=e,b[5]=h):h=b[5];return h}function p(a){var b=d("react-compiler-runtime").c(8),e=a.labelText,f=a.onSelect;a=c("isStringNullOrEmpty")(e)?d("PolarisFRXWebReportStrings").DEFAULT_NOTIFY_GUARDIAN_BUTTON_TEXT:e;var g=d("PolarisReactRedux.react").useDispatch();e=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getDisableNotifyGuardianOption);var h=e===!0?d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.GREY:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_TEXT_COLORS.DEFAULT,i;b[0]!==g||b[1]!==f?(i=function(){f(),g(d("PolarisFRXWebReportActions").doStartNotifyGuardianFollowupAction())},b[0]=g,b[1]=f,b[2]=i):i=b[2];var k;b[3]!==e||b[4]!==a||b[5]!==i||b[6]!==h?(k=j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{disabled:e,onSelect:i,textColor:h,children:a}),b[3]=e,b[4]=a,b[5]=i,b[6]=h,b[7]=k):k=b[7];return k}g["default"]=a}),98);
__d("PolarisFRXReportModalRichText.react",["PolarisFRXReportModalRichTextRenderer.react","PolarisTextWithEntities.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a.token;if(!a)return null;var b=a.color,c=a.style,d=a.uri;b==null&&(b=a["3"]);c==null&&(c=a["1"]);(d===""||d==null)&&(d=a["2"]);c!=null&&(c=parseInt(c,10));return{color:b,style:c,uri:d}}function k(a){if(!a)return[];var b=[];a.forEach(function(a){var c=a.length,d=a.offset;a=j(a)||{};var e=a.color,f=a.style;a=a.uri;c!=null&&d!=null&&(a!=null||e!=null||f!=null)&&b.push({color:e,length:c,offset:d,override_uri:a,style:f})});return b}function l(a,b){var d=b.color,e=b.override_uri;b=b.style;return i.jsx(c("PolarisFRXReportModalRichTextRenderer.react"),{color:d,href:e,style:b,children:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(5);a=a.richText;if(a==null)return null;var e=a.markup;a=a.text;if(a==null)return null;var f;b[0]!==e?(f=k(e),b[0]=e,b[1]=f):f=b[1];b[2]!==f||b[3]!==a?(e=i.jsx(c("PolarisTextWithEntities.react"),{rangeRenderer:l,ranges:f,text:a,textRenderer:m}),b[2]=f,b[3]=a,b[4]=e):e=b[4];return e}function m(a){return i.jsx(i.Fragment,{children:a})}g["default"]=a}),98);
__d("PolarisFRXWebReportAPIUtils",["PolarisInstapi","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("PolarisInstapi").apiPost("/api/v1/web/reports/log_tag_selected/",{body:a})["catch"](c("emptyFunction"))}function b(a){d("PolarisInstapi").apiPost("/api/v1/web/reports/handle_guided_action/",{body:a})["catch"](c("emptyFunction"))}g.logFRXTagSelected=a;g.handleFRXGuidedAction=b}),98);
__d("PolarisFRXReportConfirmationScreenModalForSupervision.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){b=b.action_type;if(b==null)return;a=a.screenPayload.response;d("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:b,context:a==null?void 0:a.context})}function a(a){var b=d("react-compiler-runtime").c(13),e=a.headerParams,f=a.onClose,g;b[0]!==f?(g=function(){return f&&f()},b[0]=f,b[1]=g):g=b[1];g=g;var h,j;b[2]!==a?(h=i.jsx(k,babelHelpers["extends"]({},a)),j=i.jsx(l,babelHelpers["extends"]({},a)),b[2]=a,b[3]=h,b[4]=j):(h=b[3],j=b[4]);b[5]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsx(c("PolarisFRXReportMainButton.react"),{onClick:g,text:d("PolarisGenericStrings").CLOSE_TEXT})}),b[5]=g,b[6]=a):a=b[6];var m;b[7]!==e||b[8]!==g||b[9]!==h||b[10]!==j||b[11]!==a?(m=i.jsxs(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:g,children:[h,j,a]}),b[7]=e,b[8]=g,b[9]=h,b[10]=j,b[11]=a,b[12]=m):m=b[12];return m}function k(a){var b=d("react-compiler-runtime").c(14);a=a.screenPayload;var e;b[0]!==a?(e=a||{},b[0]=a,b[1]=e):e=b[1];a=e;e=a.response;b[2]!==e?(a=e||{},b[2]=e,b[3]=a):a=b[3];e=a;a=e.follow_up_actions_title;e=e.subtitle;var f;b[4]!==e?(f=e?i.jsx(c("IGDSBox.react"),{marginTop:6,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})})}):null,b[4]=e,b[5]=f):f=b[5];e=f;f=null;if(a){var g;b[6]!==a?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}),b[6]=a,b[7]=g):g=b[7];f=g;if(e){b[8]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),b[8]=f,b[9]=a):a=b[9];f=a}}b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),{alt:d("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),b[10]=g):g=b[10];b[11]!==f||b[12]!==e?(a=i.jsx(c("IGDSBox.react"),{marginTop:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[g,e,f]})}),b[11]=f,b[12]=e,b[13]=a):a=b[13];return a}function l(a){var b=d("react-compiler-runtime").c(6),e=a.reportedOwner,f=a.screenPayload;f=f.response;f=f==null?void 0:f.follow_up_actions;if(!f||f.length===0)return null;var g;b[0]!==a?(g=function(b){j(a,b)},b[0]=a,b[1]=g):g=b[1];var h;b[2]!==f||b[3]!==e||b[4]!==g?(h=i.jsx(c("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:f,onSelectFollowupAction:g,reportedOwner:e}),b[2]=f,b[3]=e,b[4]=g,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29609414422005335"}),null);
__d("PolarisFRXReportModalFetaSupervisionQuery.graphql",["PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"is_f3_supervised_user",storageKey:null},c={alias:null,args:null,concreteType:"XFBXMFCGuardianPreferredProfile",kind:"LinkedField",name:"f3_guardian_preferred_profile",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:a,action:"THROW"},c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PolarisFRXReportModalFetaSupervisionQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformViewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("PolarisFRXReportModalFetaSupervisionQuery_instagramRelayOperation"),metadata:{},name:"PolarisFRXReportModalFetaSupervisionQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisFRXReportConfirmationScreenModal.react",["IGDSBox.react","IGDSCircleCheckPanoOutlineIcon.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportMainButton.react","PolarisFRXReportModalFollowUpActionSection.react","PolarisFRXReportModalRichText.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportStrings","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){b=b.action_type;if(b==null)return;a=a.screenPayload.response;d("PolarisFRXWebReportAPIUtils").handleFRXGuidedAction({action_type:b,context:a==null?void 0:a.context})}function a(a){var b=d("react-compiler-runtime").c(13),e=a.headerParams,f=a.onClose,g;b[0]!==f?(g=function(){return f&&f()},b[0]=f,b[1]=g):g=b[1];g=g;var h,j;b[2]!==a?(h=i.jsx(k,babelHelpers["extends"]({},a)),j=i.jsx(l,babelHelpers["extends"]({},a)),b[2]=a,b[3]=h,b[4]=j):(h=b[3],j=b[4]);b[5]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM,marginTop:4,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsx(c("PolarisFRXReportMainButton.react"),{"data-testid":void 0,onClick:g,text:d("PolarisGenericStrings").CLOSE_TEXT})}),b[5]=g,b[6]=a):a=b[6];var m;b[7]!==e||b[8]!==g||b[9]!==h||b[10]!==j||b[11]!==a?(m=i.jsxs(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:g,children:[h,j,a]}),b[7]=e,b[8]=g,b[9]=h,b[10]=j,b[11]=a,b[12]=m):m=b[12];return m}function k(a){var b=d("react-compiler-runtime").c(14);a=a.screenPayload;var e;b[0]!==a?(e=a||{},b[0]=a,b[1]=e):e=b[1];a=e;e=a.response;b[2]!==e?(a=e||{},b[2]=e,b[3]=a):a=b[3];e=a;a=e.follow_up_actions_title;e=e.subtitle;var f;b[4]!==e?(f=e?i.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:6,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})})}):null,b[4]=e,b[5]=f):f=b[5];e=f;f=null;if(a){var g;b[6]!==a?(g=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}),b[6]=a,b[7]=g):g=b[7];f=g;if(e){b[8]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:f}),b[8]=f,b[9]=a):a=b[9];f=a}}b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),{alt:d("PolarisFRXWebReportStrings").CHECKMARK_ICON_ALT_TEXT,color:"ig-success",size:48}),b[10]=g):g=b[10];b[11]!==f||b[12]!==e?(a=i.jsx(c("IGDSBox.react"),{marginTop:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:i.jsxs(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",marginTop:6,position:"relative",children:[g,e,f]})}),b[11]=f,b[12]=e,b[13]=a):a=b[13];return a}function l(a){var b=d("react-compiler-runtime").c(6),e=a.reportedOwner,f=a.screenPayload;f=f.response;f=f==null?void 0:f.follow_up_actions;if(!f||f.length===0)return null;var g;b[0]!==a?(g=function(b){j(a,b)},b[0]=a,b[1]=g):g=b[1];var h;b[2]!==f||b[3]!==e||b[4]!==g?(h=i.jsx(c("PolarisFRXReportModalFollowUpActionSection.react"),{followUpActions:f,onSelectFollowupAction:g,reportedOwner:e}),b[2]=f,b[3]=e,b[4]=g,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("PolarisFRXReportModalScreenContentSectionList.react",["IGDSBox.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=4;function a(a){var b=d("react-compiler-runtime").c(7),e=a.sections;a=a.marginBetween;var f=a===void 0?j:a;if(b[0]!==f||b[1]!==e){b[3]!==f?(a=function(a,b){var d=b>0&&f!==0?i.jsx(c("IGDSBox.react"),{marginTop:f,position:"relative"}):null;return i.jsxs(i.Fragment,{children:[d,a]},"section-"+b)},b[3]=f,b[4]=a):a=b[4];a=e.filter(k).map(a);b[0]=f;b[1]=e;b[2]=a}else a=b[2];e=a;b[5]!==e?(a=i.jsx(i.Fragment,{children:e}),b[5]=e,b[6]=a):a=b[6];return a}function k(a){return!!a}g["default"]=a}),98);
__d("PolarisFRXReportModalPolicyEducationSection.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=2,k=1,l="\u2022";function m(a,b){a=a.first_paragraph;var d=[];[a].forEach(function(a){if(!a||(a==null?void 0:a.text)==null||(a==null?void 0:a.text)==="")return;d.push(i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:b?"semibold":"normal",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})}))});return d}function n(a){a=a.policies;a=a===void 0?[]:a;if(!a||a.length===0)return[];var b=[];a.forEach(function(a){a=a.title;if(!a)return;b.push(i.jsx("div",{role:"listitem",children:i.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[i.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:i.jsx("div",{"aria-hidden":"true",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:l})})}),i.jsx(c("IGDSBox.react"),{flex:"grow",position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})})]})}))});return b}function a(a){var b=d("react-compiler-runtime").c(23);a=a.policyEducation;var e=a.second_paragraph,f=a.title,g;b[0]!==f?(g=f?i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:f})}):null,b[0]=f,b[1]=g):g=b[1];f=g;b[2]!==a?(g=n(a),b[2]=a,b[3]=g):g=b[3];g=g;var h=g.length>0,l;b[4]!==a||b[5]!==h?(l=m(a,h),b[4]=a,b[5]=h,b[6]=l):l=b[6];a=l;b[7]!==a||b[8]!==f?(h=a.length>0?i.jsx(c("IGDSBox.react"),{marginTop:f?j:0,position:"relative",children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:j,sections:a})}):null,b[7]=a,b[8]=f,b[9]=h):h=b[9];l=h;b[10]!==l||b[11]!==g||b[12]!==f?(a=g.length>0?i.jsx(c("IGDSBox.react"),{marginTop:f||l?k:0,position:"relative",children:i.jsx("div",{role:"list",children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{marginBetween:k,sections:g})})}):null,b[10]=l,b[11]=g,b[12]=f,b[13]=a):a=b[13];h=a;b[14]!==h||b[15]!==e||b[16]!==f?(g=e?i.jsxs(c("IGDSBox.react"),{marginTop:h?1:0,position:"relative",children:[i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:e})}),i.jsx(c("IGDSBox.react"),{height:f?2:10,position:"relative"})]}):null,b[14]=h,b[15]=e,b[16]=f,b[17]=g):g=b[17];a=g;b[18]!==l||b[19]!==h||b[20]!==a||b[21]!==f?(e=i.jsxs(c("IGDSBox.react"),{position:"relative",children:[f,a,l,h]}),b[18]=l,b[19]=h,b[20]=a,b[21]=f,b[22]=e):e=b[22];return e}g["default"]=a}),98);
__d("PolarisFRXReportModalPromptButton.react",["fbt","PolarisFRXReportMainButton.react","PolarisFRXWebReportStateSelectors","PolarisReactRedux.react","react","react-compiler-runtime","useCometAccessibilityAlerts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing),f=c("useCometAccessibilityAlerts")(),g=f.accessibilityAlerts,i=f.triggerAccessibilityAlert,k=a.actionType,l=a.canSubmitOnClick;f=a.disabled;var m=a.href,n=a.label,o=a.onSubmit;a=a.primaryButton;f=f===void 0?!1:f;a=a===void 0?!0:a;f=f||l&&e;var p;b[0]!==k||b[1]!==l||b[2]!==o||b[3]!==i?(p=function(){i(h._(/*BTDS*/"Loading")),l&&o&&o(k)},b[0]=k,b[1]=l,b[2]=o,b[3]=i,b[4]=p):p=b[4];e=l&&e;var q;b[5]!==m||b[6]!==n||b[7]!==a||b[8]!==f||b[9]!==p||b[10]!==e?(q=j.jsx(c("PolarisFRXReportMainButton.react"),{disabled:f,href:m,onClick:p,primaryButton:a,spinner:e,text:n}),b[5]=m,b[6]=n,b[7]=a,b[8]=f,b[9]=p,b[10]=e,b[11]=q):q=b[11];b[12]!==g||b[13]!==q?(m=j.jsxs(j.Fragment,{children:[q,g]}),b[12]=g,b[13]=q,b[14]=m):m=b[14];return m}g["default"]=a}),226);
__d("PolarisFRXReportPolicyEducationScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportUtils","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(26),e=a.headerParams,f=a.onClose,g=a.screenPayload,h=g.response,l;b[0]!==h?(l=h||{},b[0]=h,b[1]=l):l=b[1];h=l;l=h.policy_education;h=h.subtitle;var m;b[2]!==h?(m=h?i.jsx(j,{subtitle:h}):null,b[2]=h,b[3]=m):m=b[3];h=m;b[4]!==l?(m=l?i.jsx(c("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:l}):null,b[4]=l,b[5]=m):m=b[5];m=m;var n;b[6]!==g?(n=d("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(g),b[6]=g,b[7]=n):n=b[7];g=n;b[8]!==g||b[9]!==a?(n=g?i.jsx(k,{parentProps:a,promptButtonProps:g}):null,b[8]=g,b[9]=a,b[10]=n):n=b[10];g=n;a=null;if(l){n=l.education_button;if(n){l=(l=(l=n.title)==null?void 0:l.text)!=null?l:"";var o;b[11]!==n.action_type||b[12]!==n.url||b[13]!==l?(o={actionType:n.action_type,canSubmitOnClick:!1,href:n.url,label:l,primaryButton:!1},b[11]=n.action_type,b[12]=n.url,b[13]=l,b[14]=o):o=b[14];n=o;b[15]!==n?(l=i.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},n)),b[15]=n,b[16]=l):l=b[16];a=l}}b[17]!==a||b[18]!==m||b[19]!==g||b[20]!==h?(o=i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[h,m,g,a]}),b[17]=a,b[18]=m,b[19]=g,b[20]=h,b[21]=o):o=b[21];b[22]!==e||b[23]!==f||b[24]!==o?(n=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:e,onClose:f,children:o}),b[22]=e,b[23]=f,b[24]=o,b[25]=n):n=b[25];return n}function j(a){var b=d("react-compiler-runtime").c(2);a=a.subtitle;var e;b[0]!==a?(e=i.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:2,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function k(a){var b=d("react-compiler-runtime").c(5),e=a.parentProps;a=a.promptButtonProps;var f=e.onSubmitScreen;b[0]!==f?(e=function(a){return f(a)},b[0]=f,b[1]=e):e=b[1];var g;b[2]!==a||b[3]!==e?(g=i.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},a,{onSubmit:e})),b[2]=a,b[3]=e,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("PolarisReportSearchBoxContainer.react",["PolarisMobileSearchBox.react","PolarisReactRedux.react","PolarisSearchActions","polarisSearchSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var b=a.search;a=d("polarisSearchSelectors").getCurrentSearchContent(a);return{currentTab:b.currentSearchTab,discoverToken:"",loading:a.loading,rankToken:a.rankToken,results:a.results,searchedForQuery:a.searchedForQuery,selectedIndex:a.selectedIndex,suggested:b.suggested}}function b(a){return{onClearSearch:function(){a(d("PolarisSearchActions").clearSearch())},onNavigateToResult:function(b,c,e){a(d("PolarisSearchActions").navigateToResult(b,c,e))},onSearch:function(b,c,e,f,g){a(d("PolarisSearchActions").search(b,c,e))},onSelectResult:function(b,c){a(d("PolarisSearchActions").selectResult(b,c))}}}e=d("PolarisReactRedux.react").connect(a,b)(c("PolarisMobileSearchBox.react"));g["default"]=e}),98);
__d("PolarisReportButton.react",["PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.color,g=a.disabled;a=a.onClick;f=f===void 0?"ig-primary-button":f;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(c("PolarisIGCoreButton.react"),{color:f,disabled:g,fullWidth:!0,large:!0,onClick:a,children:e}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("PolarisReportUserImpersonationListItem.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","PolarisAssetManagerGlyphMapping","PolarisGenericStrings","PolarisIGCoreIcon.react","PolarisReportButton.react","PolarisReportStrings","PolarisUserAvatar.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$1=function(){b.props.onReport()},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.render=function(){var a=this.props.result;return i.jsx(c("IGDSListItem.react"),{addOnEnd:i.jsx(c("PolarisReportButton.react"),{onClick:this.$1,children:d("PolarisReportStrings").nextText}),addOnStart:i.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:a.profilePictureUrl,size:44,username:a.username}),subtitle:a.fullName,title:i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"block",children:[i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{breakWord:!0,children:a.username}),a.isVerified?i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginStart:1,children:i.jsx(c("PolarisIGCoreIcon.react"),{alt:d("PolarisGenericStrings").VERIFIED_TEXT,icon:d("PolarisAssetManagerGlyphMapping").ICONS.VERIFIED_SMALL})}):null]})})};return b}(i.Component);g.ReportUserImpersonationListItem=a}),98);
__d("PolarisReportUserImpersonationSearchBox.react",["cx","IGDSBox.react","PolarisReportSearchBoxContainer.react","PolarisReportUserImpersonationListItem.react","PolarisSearchConstants","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(21),e=a.fromWebview,f=a.onSelectVictim,g=a.reportedUserID,h=a.searchBoxPlaceHolder,i=a.userSearchResults,k=a.verifiedOnly;a=e===void 0?!1:e;b[0]!==h?(e=j.jsx(c("PolarisReportSearchBoxContainer.react"),{analyticsContext:void 0,disableResultKeyboardNav:!0,hideCancelButton:!0,isActive:!0,placeholder:h,searchContext:d("PolarisSearchConstants").SEARCH_CONTEXT.USER,useHistory:!0}),b[0]=h,b[1]=e):e=b[1];h=a?0:2;a=a?"_ac68":"";if(b[2]!==f||b[3]!==g||b[4]!==i||b[5]!==k){var l;b[7]!==g||b[8]!==k?(l=function(a){return k?a.isVerified&&a.pk!==g.toString():a.pk!==g.toString()},b[7]=g,b[8]=k,b[9]=l):l=b[9];var m;b[10]!==f?(m=function(a,b){return j.jsx(d("PolarisReportUserImpersonationListItem.react").ReportUserImpersonationListItem,{onReport:function(){return f(a)},result:a},b)},b[10]=f,b[11]=m):m=b[11];l=i.filter(l).map(m);b[2]=f;b[3]=g;b[4]=i;b[5]=k;b[6]=l}else l=b[6];b[12]!==a||b[13]!==l?(m=j.jsx("div",{className:a,children:l}),b[12]=a,b[13]=l,b[14]=m):m=b[14];b[15]!==h||b[16]!==m?(i=j.jsx(c("IGDSBox.react"),{color:"primaryBackground",marginTop:h,position:"relative",children:m}),b[15]=h,b[16]=m,b[17]=i):i=b[17];b[18]!==e||b[19]!==i?(a=j.jsxs("div",{children:[e,i]}),b[18]=e,b[19]=i,b[20]=a):a=b[20];return a}g["default"]=a}),98);
__d("PolarisFRXReportSelectVictimScreenModal.react",["IGDSBox.react","IGDSTextVariants.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisReactRedux.react","PolarisReportConstants","PolarisReportUserImpersonationSearchBox.react","PolarisSearchActions","PolarisSearchConstants","polarisSearchSelectors","react","react-compiler-runtime","useJSON"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){a=a.allSearchResults;var b=[];for(var c=0;c<a.length;c++){var d=a[c];d.type==="USER_RESULT"&&b.push(d)}return b}function l(a){var b=d("react-compiler-runtime").c(3),c=a.onClearSearch,e;b[0]!==c?(a=function(){return function(){c()}},e=[c],b[0]=c,b[1]=a,b[2]=e):(a=b[1],e=b[2]);j(a,e)}function a(a){l(a);var b=a.headerParams,e=a.onClose,f=a.onSelectVictim,g=a.reportedOwner,h=a.screenPayload;h=h.response;var j=h||{};j=j.subtitle;h=h.context;g=g.id;j=j?i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{children:i.jsx(c("PolarisFRXReportModalRichText.react"),{richText:j})})}):null;try{h=c("useJSON")(h!=null?h:null);h=h==null?void 0:h.tags;h=(h==null?void 0:h.includes(d("PolarisReportConstants").IGUserImpersonationSomeoneIFollowTag.tag_type))===!0}catch(a){h=!1}h=!h;g=i.jsx(c("PolarisReportUserImpersonationSearchBox.react"),{onSelectVictim:function(a){return f(a)},reportedUserID:g,searchBoxPlaceHolder:d("PolarisSearchConstants").IMPERSONATION_SEARCH_TEXT,userSearchResults:k(a),verifiedOnly:h});return i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:b,onClose:function(){return e&&e()},children:i.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[j,g]})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=d("polarisSearchSelectors").getCurrentSearchContent(a);a=a.results;return{allSearchResults:a}}e={onClearSearch:d("PolarisSearchActions").clearSearch};f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),98);
__d("PolarisFRXReportTagSelectionScreenModal.react",["IGDSBox.react","IGDSText.react","IGDSTextVariants.react","InstagramAdHideResponseFalcoEvent","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportModalOptionList.react","PolarisFRXReportModalOptionListItem.react","PolarisFRXReportModalPolicyEducationSection.react","PolarisFRXReportModalPromptButton.react","PolarisFRXReportModalRichText.react","PolarisFRXReportModalScreenContentSectionList.react","PolarisFRXWebReportAPIUtils","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportUtils","PolarisReactRedux.react","PolarisReportConstants","goUriOnNewWindow","isEmpty","isStringNullOrEmpty","polarisAdsSelectors.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useRef,m=e.useState,n=null,o="";function p(a,b,e,f){var g=a.isFRXScreenRequestProcessing,h=a.onSubmitScreen;a=a.screenPayload.response;var i=b.setStateSelectedTagTitle;b=b.setStateSelectedTagType;var j=e.tag_type,k=e.title;k=(k=k==null?void 0:k.text)!=null?k:"";if(e.tag_click_override_url!=null){c("goUriOnNewWindow")(e.tag_click_override_url);return}if(g||j==null||j==="")return;b(j);i(k);d("PolarisFRXWebReportAPIUtils").logFRXTagSelected({context:a==null?void 0:a.context,selected_tag_type:j});h&&!f&&h({selectedPromptButtonActionType:null,selectedTagTitles:[k],selectedTagTypes:[j]})}function q(a,b,d){a=a.onSubmitScreen;var e=b.selectedTagTitle;b=b.selectedTagType;a&&!c("isStringNullOrEmpty")(b)&&a({selectedPromptButtonActionType:d,selectedTagTitles:[e],selectedTagTypes:[b]})}function r(){var a=d("react-compiler-runtime").c(3),b=m(n),c=b[0];b=b[1];var e=m(o),f=e[0];e=e[1];a[0]!==f||a[1]!==c?(e={selectedTagTitle:f,selectedTagType:c,setStateSelectedTagTitle:e,setStateSelectedTagType:b},a[0]=f,a[1]=c,a[2]=e):e=a[2];return e}function s(a,b){var c=b.setStateSelectedTagTitle,d=b.setStateSelectedTagType,e=a.screenPayload.frxScreenRequestID,f=l(),g=f.current;k(function(){f.current=e,e!==g&&(d(n),c(o))},[e,g,d,c])}function a(a){var b=d("react-compiler-runtime").c(7),c=r();s(a,c);var e=a.headerParams,f=a.onClose,g;b[0]!==a||b[1]!==c?(g=j.jsx(t,{parentProps:a,parentState:c}),b[0]=a,b[1]=c,b[2]=g):g=b[2];b[3]!==e||b[4]!==f||b[5]!==g?(a=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{disableDefaultBodyPaddingMargin:!0,headerParams:e,onClose:f,children:g}),b[3]=e,b[4]=f,b[5]=g,b[6]=a):a=b[6];return a}function t(a){var b=d("react-compiler-runtime").c(27),e=a.parentProps;a=a.parentState;var f=e.screenPayload,g=f.response;if(b[0]!==g){var i,k=g||{},l=k.policy_education,m=k.report_tags,n=k.second_subtitle;k=k.subtitle;l=l;m=m;i=k&&!(h||(h=c("isEmpty")))((i=k.text)==null?void 0:i.trim())?j.jsx(u,{subtitle:k}):null;k=n&&!(h||(h=c("isEmpty")))((k=n.text)==null?void 0:k.trim())?j.jsx(v,{secondSubtitle:n}):null;b[0]=g;b[1]=l;b[2]=m;b[3]=i;b[4]=k}else l=b[1],m=b[2],i=b[3],k=b[4];n=k;b[5]!==e||b[6]!==a||b[7]!==m?(g=m&&m.length>0?j.jsx(w,{parentProps:e,parentState:a,reportTags:m}):null,b[5]=e,b[6]=a,b[7]=m,b[8]=g):g=b[8];k=g;b[9]!==l?(m=l?j.jsx(x,{policyEducation:l}):null,b[9]=l,b[10]=m):m=b[10];g=m;b[11]!==f?(l=d("PolarisFRXWebReportUtils").getPromptButtonRenderPropsFromScreenPayload(f),b[11]=f,b[12]=l):l=b[12];m=l;b[13]!==e||b[14]!==a||b[15]!==m?(f=m?j.jsx(y,{parentProps:e,parentState:a,promptButtonProps:m}):null,b[13]=e,b[14]=a,b[15]=m,b[16]=f):f=b[16];l=f;e=i!=null?d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_TOP:0;a=g||l?d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_MARGIN_BOTTOM:0;b[17]!==g||b[18]!==l||b[19]!==k||b[20]!==n||b[21]!==i?(m=j.jsx(c("PolarisFRXReportModalScreenContentSectionList.react"),{sections:[i,n,k,g,l]}),b[17]=g,b[18]=l,b[19]=k,b[20]=n,b[21]=i,b[22]=m):m=b[22];b[23]!==a||b[24]!==e||b[25]!==m?(f=j.jsx(c("IGDSBox.react"),{marginBottom:a,marginTop:e,position:"relative",children:m}),b[23]=a,b[24]=e,b[25]=m,b[26]=f):f=b[26];return f}function u(a){var b=d("react-compiler-runtime").c(2);a=a.subtitle;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:2,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextSection,{elementType:"h2",children:j.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function v(a){var b=d("react-compiler-runtime").c(2);a=a.secondSubtitle;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{marginTop:0,paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",zeroMargin:!0,children:j.jsx(c("PolarisFRXReportModalRichText.react"),{richText:a})})}),b[0]=a,b[1]=e):e=b[1];return e}function w(a){var b=d("react-compiler-runtime").c(24),e=a.parentProps,f=a.parentState;a=a.reportTags;var g=e.frxMetadata,h=e.isFRXScreenRequestProcessing,i=e.onSelectReportAd,k=e.screenPayload;k=k.response;k=k||{};k=k.style;var l=f.selectedTagType,m=k===d("PolarisFRXWebReportConstants").FRX_TAG_SELECTION_STYLE_INTS.RADIO_BUTTONS,n=d("polarisAdsSelectors.react").useFRXReportAdLoggingParams(g.object_id,g.location);if(b[0]!==g.object_id||b[1]!==g.object_type||b[2]!==n||b[3]!==h||b[4]!==i||b[5]!==e||b[6]!==f||b[7]!==a||b[8]!==l||b[9]!==m){b[11]!==g.object_id||b[12]!==g.object_type||b[13]!==n||b[14]!==h||b[15]!==i||b[16]!==e||b[17]!==f||b[18]!==l||b[19]!==m?(k=function(a,b){var k=a.tag_type,o=a.title,q=l===k,r=h&&q&&!m,s=m?d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.RADIO:d("PolarisFRXReportModalOptionListItem.react").OPTION_LIST_ITEM_VARIANTS.BUTTON;b="tag-"+b;return j.jsx(d("PolarisFRXReportModalOptionListItem.react").FRXReportModalOptionListItem,{"data-testid":void 0,loading:r,onSelect:function(){g.object_type===d("PolarisReportConstants").FRXObjectType.AD&&(i!=null?i(k):c("InstagramAdHideResponseFalcoEvent").log(function(){return babelHelpers["extends"]({ad_id:g.object_id,response:k},n)})),p(e,f,a,m)},selected:q,value:b,variant:s,children:o==null?void 0:o.text},b)},b[11]=g.object_id,b[12]=g.object_type,b[13]=n,b[14]=h,b[15]=i,b[16]=e,b[17]=f,b[18]=l,b[19]=m,b[20]=k):k=b[20];k=a.map(k);b[0]=g.object_id;b[1]=g.object_type;b[2]=n;b[3]=h;b[4]=i;b[5]=e;b[6]=f;b[7]=a;b[8]=l;b[9]=m;b[10]=k}else k=b[10];a=k;b[21]!==a||b[22]!==m?(k=j.jsx(c("PolarisFRXReportModalOptionList.react"),{asRadio:m,children:a}),b[21]=a,b[22]=m,b[23]=k):k=b[23];return k}function x(a){var b=d("react-compiler-runtime").c(2);a=a.policyEducation;var e;b[0]!==a?(e=j.jsx(c("IGDSBox.react"),{paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("PolarisFRXReportModalPolicyEducationSection.react"),{policyEducation:a})}),b[0]=a,b[1]=e):e=b[1];return e}function y(a){var b=d("react-compiler-runtime").c(7),e=a.parentProps,f=a.parentState;a=a.promptButtonProps;var g=f.selectedTagType;g=!g;var h;b[0]!==e||b[1]!==f?(h=function(a){return q(e,f,a)},b[0]=e,b[1]=f,b[2]=h):h=b[2];var i;b[3]!==a||b[4]!==g||b[5]!==h?(i=j.jsx(c("IGDSBox.react"),{paddingX:d("PolarisFRXReportBaseScreenModal.react").DEFAULT_BODY_PADDING_X,position:"relative",children:j.jsx(c("PolarisFRXReportModalPromptButton.react"),babelHelpers["extends"]({},a,{disabled:g,onSubmit:h}))}),b[3]=a,b[4]=g,b[5]=h,b[6]=i):i=b[6];return i}function b(a){return{isFRXScreenRequestProcessing:d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(a)}}f=d("PolarisReactRedux.react").connect(b,null)(a);g["default"]=f}),98);
__d("PolarisFRXReportUtils",[],(function(a,b,c,d,e,f){"use strict";var g=["ig_ad_ip_violation","ig_ad_ip_violation","ig_intellectual_property_v1","ig_ar_effect_ip_violation","ig_intellectual_property_direct_message","ig_hashtag_intellectual_property","ig_ad_spam","ig_spam_v3","ig_spam_direct_message","ig_bullying_or_harassment_comment_v3","ig_bullying_or_harassment_direct_message","ig_hashtag_bullying_or_harassment","ig_ar_effect_harassment_or_bullying","ig_harassment_or_bullying","ig_nudity_v2","ig_nudity_direct_message","ig_clips_audio_page_nudity","ig_clips_effect_page_nudity","ig_clips_prompt_page_nudity","ig_hashtag_nudity","ig_ar_effect_nudity_or_pornography","ig_ad_sexually_inappropriate","ig_iab_sexually_inappropriate","product_sexualized_content_or_adult_products","bi_commerce_sexualized_or_adult_content","inappropriate_content","ig_commerce_ugc_graphic_content","bi_commerce_abusive_or_harmful","ig_violence_parent","ig_ad_violent_prohibited","ig_ar_effect_violence","ig_violence_direct_message","ig_hashtag_violence","ig_violence_v3","ig_violence","ig_dangerous_org_or_individual","ig_hate_speech_v3","ig_ar_effect_hate_speech","ig_hate_speech_direct_message","ig_hashtag_hate_speech","ig_i_dont_like_it_v3","ig_ar_effect_i_dont_like_it","ig_i_dont_like_it_direct_message","ig_ad_offensive","ig_self_injury_v3","ig_ar_effect_self_injury","ig_hashtag_self_injury","ig_self_injury_direct_message","ig_ad_scam_misleading","ig_product_scam_fraud_v2","ig_product_scam_fraud_reportable","ig_iab_scam_misleading","bi_commerce_misleading_or_possible_scam","ig_sale_of_illegal_or_regulated_goods_v3","ig_sale_of_illegal_or_regulated_goods_direct_message","ig_sale_of_illegal_or_regulated_goods_v2","ig_ar_effect_drugs","ig_ar_effect_firearms","bi_commerce_alcohol_tobacco_and_weapons","bi_commerce_animal_products_or_sales","ig_false_news","ig_ar_effect_false_information","ig_report_report_as_unlawful","bi_commerce_discriminatory_listing","discrimination","ig_something_else","something_else","ig_ad_political","ig_eating_disorder","bi_commerce_buying_or_selling","ig_commerce_ugc_manipulation","ig_commerce_ugc_irrelevance","ig_commerce_review_irrelevant","ig_commerce_fake_review","ig_commerce_product_answer_irrelevant","ig_commerce_product_question_irrelevant","ig_user_impersonation","ig_unwanted_joiner","ig_iab_excessive_ads","ig_iab_other","page_place_inaccurate_info","bi_commerce_service_or_job","product_no_intent_to_sale","bi_commerce_appears_to_be_counterfeit","bi_commerce_health_or_wellness","bi_commerce_other_prohibited","bi_commerce_no_service_offered","bi_commerce_health_or_medical","information_misuse","dont_recognize_activity"];function a(a){return g.includes(a)}f.shouldUseTagType=a}),66);
__d("PolarisFRXReportScreenModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModal.react","PolarisFRXReportPolicyEducationScreenModal.react","PolarisFRXReportSelectVictimScreenModal.react","PolarisFRXReportTagSelectionScreenModal.react","PolarisFRXReportUtils","PolarisFRXWebReportActions","PolarisFRXWebReportConstants","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisFRXWebReportUtils","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function k(a){a.onClose&&a.onClose()}function l(a){var b=a.isFRXScreenRequestProcessing;a=a.onGoBackOneFRXScreen;a&&!b&&a()}function m(a,b){var c=a.frxMetadata,e=a.isFRXScreenRequestProcessing,f=a.onRequestNextFRXScreen,g=a.onStoreReportedTagTitle,h=a.reportedTagTitle;a=a.screenPayload;if(e)return;e=a||{};a=e.response;e=e.type;a=a||{};a=a.context;var i=b==null?void 0:b.selectedTagTypes;i=i!=null&&i.length>0?i[0]:null;var j=b==null?void 0:b.selectedTagTitles;j=j!=null&&j.length>0?j[0]:"";h===""&&i!=null&&d("PolarisFRXReportUtils").shouldUseTagType(i)&&j!==""&&g(j);h=d("PolarisFRXWebReportUtils").getNextFRXScreenInputRequestTypeFromScreenPayloadType(e);if(!h)return;f({context:a,frxPromptRequestType:h,metadata:c,optionalParams:b})}function a(a){var b=d("react-compiler-runtime").c(54),e=a.frxMetadata,f=a.hasMountedScreenFlow,g=a.hasPreviousScreens,h=a.isFRXScreenRequestProcessing,p=a.onSelectReportAd,q=a.reportedOwner,r=a.screenPayload,s=a.showFRXDropOffSurveyModal,t=a.threadId,u;b[0]!==a?(u=function(){return l(a)},b[0]=a,b[1]=u):u=b[1];var v;b[2]!==g||b[3]!==r||b[4]!==u?(v=d("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(r,g,u),b[2]=g,b[3]=r,b[4]=u,b[5]=v):v=b[5];g=v;u=j(!1);v=u[0];var w=u[1];b[6]!==a?(u=function(){w(!0),k(a)},b[6]=a,b[7]=u):u=b[7];var x=u;b[8]!==g||b[9]!==x?(u=i.jsx(o,{headerParams:g,onClose:x}),b[8]=g,b[9]=x,b[10]=u):u=b[10];u=u;if(!r){if(h||!f||v){b[11]!==g||b[12]!==x?(h=i.jsx(n,{headerParams:g,onClose:x}),b[11]=g,b[12]=x,b[13]=h):h=b[13];return h}return u}f=r.type;switch(f){case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.TAG_SELECTION:b[14]!==x||b[15]!==s?(v=function(){x(),s!=null&&s()},b[14]=x,b[15]=s,b[16]=v):v=b[16];b[17]!==a?(h=function(b){m(a,babelHelpers["extends"]({},b))},b[17]=a,b[18]=h):h=b[18];b[19]!==e||b[20]!==g||b[21]!==p||b[22]!==r||b[23]!==v||b[24]!==h?(f=i.jsx(c("PolarisFRXReportTagSelectionScreenModal.react"),{frxMetadata:e,headerParams:g,onClose:v,onSelectReportAd:p,onSubmitScreen:h,screenPayload:r}),b[19]=e,b[20]=g,b[21]=p,b[22]=r,b[23]=v,b[24]=h,b[25]=f):f=b[25];return f;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.POLICY_EDUCATION:b[26]!==x||b[27]!==s?(e=function(){x(),s!=null&&s()},b[26]=x,b[27]=s,b[28]=e):e=b[28];b[29]!==a||b[30]!==q.id||b[31]!==t?(p=function(b){m(a,{responsible_id:q.id,selectedPromptButtonActionType:b,thread_id:t})},b[29]=a,b[30]=q.id,b[31]=t,b[32]=p):p=b[32];b[33]!==g||b[34]!==r||b[35]!==e||b[36]!==p?(v=i.jsx(c("PolarisFRXReportPolicyEducationScreenModal.react"),{headerParams:g,onClose:e,onSubmitScreen:p,screenPayload:r}),b[33]=g,b[34]=r,b[35]=e,b[36]=p,b[37]=v):v=b[37];return v;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.CONFIRMATION:b[38]!==g||b[39]!==x||b[40]!==q||b[41]!==r?(h=i.jsx(c("PolarisFRXReportConfirmationScreenModal.react"),{headerParams:g,onClose:x,reportedOwner:q,screenPayload:r}),b[38]=g,b[39]=x,b[40]=q,b[41]=r,b[42]=h):h=b[42];return h;case d("PolarisFRXWebReportConstants").FRX_SCREEN_PAYLOAD_TYPE_INTS.SELECT_VICTIM:b[43]!==x||b[44]!==s?(f=function(){x(),s!=null&&s()},b[43]=x,b[44]=s,b[45]=f):f=b[45];b[46]!==a?(e=function(b){m(a,{selectedVictimID:b.pk})},b[46]=a,b[47]=e):e=b[47];b[48]!==g||b[49]!==q||b[50]!==r||b[51]!==f||b[52]!==e?(p=i.jsx(c("PolarisFRXReportSelectVictimScreenModal.react"),{headerParams:g,onClose:f,onSelectVictim:e,reportedOwner:q,screenPayload:r}),b[48]=g,b[49]=q,b[50]=r,b[51]=f,b[52]=e,b[53]=p):p=b[53];return p;default:return u}}function n(a){var b=d("react-compiler-runtime").c(4),e=a.headerParams;a=a.onClose;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:i.jsx(c("IGDSSpinner.react"),{})}),b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:e,onClose:a,children:f}),b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}function o(a){var b=d("react-compiler-runtime").c(3),c=a.headerParams;a=a.onClose;var e;b[0]!==c||b[1]!==a?(e=i.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:c,onClose:a,children:d("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}function b(a){return{isFRXScreenRequestProcessing:d("PolarisFRXWebReportStateSelectors").getIsFRXScreenRequestProcessing(a),reportedTagTitle:d("PolarisFRXWebReportStateSelectors").getReportedTagTitle(a)}}e={onRequestNextFRXScreen:d("PolarisFRXWebReportActions").doRequestNextFRXScreenAction,onStoreReportedTagTitle:d("PolarisFRXWebReportActions").doStoreReportedTagTitle};f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),98);
__d("PolarisFRXUnfollowUserFollowupModal.react",["PolarisConnectionsLogger","PolarisUnfollowDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.onClose;a=a.userToUnfollow;a=a.id;if(!a)return null;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];var g;b[1]!==e?(g=function(){return e&&e()},b[1]=e,b[2]=g):g=b[2];b[3]!==g||b[4]!==a?(f=i.jsx(c("PolarisUnfollowDialog.react"),{analyticsContext:d("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.frx_web_reporting,analyticsExtra:f,onClose:g,userId:a}),b[3]=g,b[4]=a,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("PolarisFRXReportModal.react",["IGDSBox.react","IGDSSpinner.react","PolarisFRXBlockUserFollowupModal.react","PolarisFRXNotifyGuardianFollowupModal.react","PolarisFRXReportBaseScreenModal.react","PolarisFRXReportConfirmationScreenModalForSupervision.react","PolarisFRXReportModalFetaSupervisionQuery.graphql","PolarisFRXReportScreenModal.react","PolarisFRXUnfollowUserFollowupModal.react","PolarisFRXWebReportActions","PolarisFRXWebReportState","PolarisFRXWebReportStateSelectors","PolarisFRXWebReportStrings","PolarisReactRedux.react","PolarisReportConstants","nullthrows","react","react-compiler-runtime","react-relay/relay-hooks/useLazyLoadQuery","usePolarisAnalyticsContext","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));f=i;var k=f.useEffect;f.useMemo;var l=f.useState;function m(a){var b=a.frxObjectType,c=a.isAfterConfirmationScreen,d=a.onClose,e=a.onConfirm,f=a.onDoReportingModalClosedAction;a=a.reportedObjectID;c&&e!=null&&e();f({isAfterConfirmationScreen:c,reportedObjectID:a,reportedObjectType:b});d&&d()}function n(a){a=a.onGoBackOneFRXScreen;a()}function o(a,b,c){if(b===!0){var d=a.onDoDisableNotifyGuardianOption;d()}d=a.onDoOpenNotifyGuardianFollowupModalToPreviousScreen;var e=a.reportedOwner.id;d(b,c,e,a.reportedTagTitle)}function p(a,b,c,e){var f=d("react-compiler-runtime").c(6),g=a.onRequestInitFRXScreen,h;f[0]!==e||f[1]!==b||f[2]!==g||f[3]!==c?(a=function(){b||(g(e),c(!0))},h=[c,b,e,g],f[0]=e,f[1]=b,f[2]=g,f[3]=c,f[4]=a,f[5]=h):(a=f[4],h=f[5]);k(a,h)}function a(a){var e=d("react-compiler-runtime").c(60),f=l(!1),g=f[0];f=f[1];var i=a.containerModule,k=a.currScreenPayload,q=a.currRenderStep,r=a.screenHistorySize,s=a.reportedObjectID,t=a.frxEntryPoint,u=a.frxLocation,v=a.frxObjectType,w=a.reportedOwner,x=a.showFRXDropOffSurveyModal,y=a.useSimpleBlockModalWithoutRefresh,z=a.threadId,A=a.threadKey,B=a.onSelectReportAd,C=a.isGroupThread,D=a.shouldReportAsInstamadillo;t=t===void 0?d("PolarisReportConstants").FRXEntryPoint.CHEVRON_BUTTON:t;var E=c("usePolarisAnalyticsContext")(),F=d("PolarisReactRedux.react").useDispatch();i=i!=null?i:E;e[0]!==t||e[1]!==u||e[2]!==v||e[3]!==s||e[4]!==i?(E={container_module:i,entry_point:t,location:u,object_id:s,object_type:v},e[0]=t,e[1]=u,e[2]=v,e[3]=s,e[4]=i,e[5]=E):E=e[5];t=E;u=t;p(a,g,f,u);e[6]!==a?(s=function(){return m(a)},e[6]=a,e[7]=s):s=e[7];i=s;E=r>1;e[8]!==a?(t=function(){return n(a)},e[8]=a,e[9]=t):t=e[9];e[10]!==k||e[11]!==E||e[12]!==t?(f=d("PolarisFRXReportBaseScreenModal.react").getDefaultScreenModalHeaderParamsFromScreenPayload(k,E,t),e[10]=k,e[11]=E,e[12]=t,e[13]=f):f=e[13];s=f;e[14]!==s||e[15]!==i?(E=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:s,onClose:i,children:d("PolarisFRXWebReportStrings").DEFAULT_ERROR_MESSAGE_TEXT}),e[14]=s,e[15]=i,e[16]=E):E=e[16];t=E;e[17]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",justifyContent:"center",minHeight:122,position:"relative",children:j.jsx(c("IGDSSpinner.react"),{})}),e[17]=f):f=e[17];e[18]!==s||e[19]!==i?(E=j.jsx(d("PolarisFRXReportBaseScreenModal.react").FRXReportBaseScreenModal,{headerParams:s,onClose:i,children:f}),e[18]=s,e[19]=i,e[20]=E):E=e[20];f=E;E=c("usePolarisViewer")();E!==null&&(E==null?void 0:E.guardianId)!==null&&(E==null?void 0:E.guardianId)!==""&&F(d("PolarisFRXWebReportActions").doStoreGuardianInformation(c("nullthrows")(E==null?void 0:E.guardianId)));e[21]===Symbol["for"]("react.memo_cache_sentinel")?(F=h!==void 0?h:h=b("PolarisFRXReportModalFetaSupervisionQuery.graphql"),E={},e[21]=F,e[22]=E):(F=e[21],E=e[22]);F=c("react-relay/relay-hooks/useLazyLoadQuery")(F,E);E=(E=F.xfb_youth_platform)==null||(E=E.viewer)==null?void 0:E.is_f3_supervised_user;F=(F=(F=F.xfb_youth_platform)==null||(F=F.viewer)==null||(F=F.f3_guardian_preferred_profile)==null?void 0:F.full_name)!=null?F:null;var G=d("PolarisReactRedux.react").useSelector(d("PolarisFRXWebReportStateSelectors").getGuardianUsername);E===!0&&G===""&&F!==null&&(G=F);switch(q){case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.UNFOLLOW:e[23]!==i||e[24]!==w?(E=j.jsx(c("PolarisFRXUnfollowUserFollowupModal.react"),{onClose:i,userToUnfollow:w}),e[23]=i,e[24]=w,e[25]=E):E=e[25];return E;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.BLOCK:e[26]!==v||e[27]!==C||e[28]!==i||e[29]!==w||e[30]!==D||e[31]!==A||e[32]!==y?(F=j.jsx(c("PolarisFRXBlockUserFollowupModal.react"),{frxObjectType:v,isGroupThread:C,onClose:i,shouldReportAsInstamadillo:D,threadKey:A,userToBlock:w,useSimpleBlockModalWithoutRefresh:y}),e[26]=v,e[27]=C,e[28]=i,e[29]=w,e[30]=D,e[31]=A,e[32]=y,e[33]=F):F=e[33];return F;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN:e[34]!==a?(q=function(b,c){return o(a,b,c)},e[34]=a,e[35]=q):q=e[35];E=w==null?void 0:w.username;e[36]!==G||e[37]!==i||e[38]!==a.reportedTagTitle||e[39]!==q||e[40]!==E?(v=j.jsx(c("PolarisFRXNotifyGuardianFollowupModal.react"),{guardianUsername:G,onClose:i,onNotify:q,reportedTagTitle:a.reportedTagTitle,reportedUsername:E}),e[36]=G,e[37]=i,e[38]=a.reportedTagTitle,e[39]=q,e[40]=E,e[41]=v):v=e[41];return v;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.NOTIFY_GUARDIAN_FOLLOWUP:if(!k)return!g?f:t;e[42]!==k||e[43]!==s||e[44]!==i||e[45]!==w?(C=j.jsx(c("PolarisFRXReportConfirmationScreenModalForSupervision.react"),{headerParams:s,onClose:i,reportedOwner:w,screenPayload:k}),e[42]=k,e[43]=s,e[44]=i,e[45]=w,e[46]=C):C=e[46];return C;case d("PolarisFRXWebReportState").FRX_WEB_REPORT_RENDER_STEP_STRS.DEFAULT:default:D=r>1;e[47]!==a?(A=function(){return n(a)},e[47]=a,e[48]=A):A=e[48];e[49]!==k||e[50]!==u||e[51]!==g||e[52]!==i||e[53]!==B||e[54]!==w||e[55]!==x||e[56]!==D||e[57]!==A||e[58]!==z?(y=j.jsx(c("PolarisFRXReportScreenModal.react"),{frxMetadata:u,hasMountedScreenFlow:g,hasPreviousScreens:D,onClose:i,onGoBackOneFRXScreen:A,onSelectReportAd:B,reportedOwner:w,screenPayload:k,showFRXDropOffSurveyModal:x,threadId:z}),e[49]=k,e[50]=u,e[51]=g,e[52]=i,e[53]=B,e[54]=w,e[55]=x,e[56]=D,e[57]=A,e[58]=z,e[59]=y):y=e[59];return y}}function e(a){var b;return{currRenderStep:(b=d("PolarisFRXWebReportStateSelectors")).getCurrRenderStep(a),currScreenPayload:b.getCurrScreenPayload(a),isAfterConfirmationScreen:b.getIsConfirmationScreenInHistoryStack(a),reportedTagTitle:b.getReportedTagTitle(a),screenHistorySize:b.getScreenHistorySize(a)}}f={onDoDisableNotifyGuardianOption:d("PolarisFRXWebReportActions").doDisableNotifyGuardianOption,onDoOpenNotifyGuardianFollowupModalToPreviousScreen:d("PolarisFRXWebReportActions").doOpenNotifyGuardianFollowupModalToPreviousScreenAction,onDoReportingModalClosedAction:d("PolarisFRXWebReportActions").doReportingModalClosedAction,onGoBackOneFRXScreen:d("PolarisFRXWebReportActions").doGoBackOneFRXScreenAction,onRequestInitFRXScreen:d("PolarisFRXWebReportActions").doRequestInitFRXScreenAction};e=d("PolarisReactRedux.react").connect(e,f)(a);g["default"]=e}),98);
__d("polarisCommentSelectors.react",["PolarisPaginationUtils","PolarisReactRedux.react","nullthrows","polarisCreateSelectorWithArg","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";e=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.comments.byPostId},function(a,b){return function(e){e=b.get(e);if(e==null)return null;var f=e.commentIds;return f.toSeq().map(function(b){return c("nullthrows")(a.get(b))}).slice(f.count()-d("PolarisPaginationUtils").getVisibleCount(e.pagination),f.count()).filter(function(a){return!a.deleted&&!a.didReportAsSpam})}});f=c("polarisCreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a,b){return function(d){d=c("nullthrows")(a.get(d));d=d.previewCommentIds;return d==null?[]:d.map(function(a){return b.get(a)}).filter(Boolean)}});function a(a,b){return c("nullthrows")(a.comments.byId.get(b))}function b(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){return a==null?null:b.comments.translationById.get(a)},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.selectVisibleCommentsForPostId=e;g.getPreviewCommentsForPostId=f;g.getCommentById=a;g.useCommentTranslation=b}),98);
__d("usePolarisComment",["PolarisReactRedux.react","polarisCommentSelectors.react","polarisUserSelectors","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==a||c[1]!==b?(e=function(c){c=d("polarisCommentSelectors.react").getCommentById(c,a);return b(c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function b(a,b){var c=d("react-compiler-runtime").c(3),e;c[0]!==a||c[1]!==b?(e=function(c){var e=d("polarisCommentSelectors.react").getCommentById(c,a);c=d("polarisUserSelectors").getUserByIdOrThrows(c,e.userId);return b(e,c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function c(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=function(b){return a==null?null:(b=b.comments.byId.get(a))!=null?b:null},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.useComment=a;g.useCommentAndOwner=b;g.useCommentOrNull=c}),98);
__d("PolarisCommentTranslationPrompt.react",["fbt","CometPressable.react","IGDSTextVariants.react","PolarisCommentActions","PolarisReactRedux.react","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisComment"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(a){var b,e=d("react-compiler-runtime").c(22),f=a.commentId,g=a.inFeed,i=a.isCaptionWithTranslation;a=a.isOverMedia;a=a===void 0?!1:a;var k=d("PolarisReactRedux.react").useDispatch();b=((b=d("usePolarisComment").useCommentOrNull(f))==null?void 0:b.hasTranslation)===!0;i=i===!0||b;b=d("polarisCommentSelectors.react").useCommentTranslation(f);var l=b==null?void 0:b.translatedText,m;e[0]!==f||e[1]!==k||e[2]!==l?(m=function(){if(f==null)return;l!=null?k(d("PolarisCommentActions").showCommentTranslatedText(f)):k(d("PolarisCommentActions").translateComment(f))},e[0]=f,e[1]=k,e[2]=l,e[3]=m):m=e[3];m=m;if(i!==!0)return null;i=g===!0?"primaryText":"secondaryText";if((b==null?void 0:b.loading)===!0){g=a?"webAlwaysWhite":i;var n;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Loading..."),e[4]=n):n=e[4];e[5]!==g?(n=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:g,children:n}),e[5]=g,e[6]=n):n=e[6];return n}if((b==null?void 0:b.showTranslatedText)===!0){e[7]!==f||e[8]!==k?(g=function(){f!=null&&k(d("PolarisCommentActions").showCommentOriginalText(f))},e[7]=f,e[8]=k,e[9]=g):g=e[9];n=a?"webAlwaysWhite":i;e[10]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"See original"),e[10]=b):b=e[10];e[11]!==n?(b=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:n,children:b}),e[11]=n,e[12]=b):b=e[12];e[13]!==g||e[14]!==b?(n=j.jsx(c("CometPressable.react"),{onPress:g,overlayDisabled:!0,children:b}),e[13]=g,e[14]=b,e[15]=n):n=e[15];return n}g=a?"webAlwaysWhite":i;e[16]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"See translation"),e[16]=b):b=e[16];e[17]!==g?(n=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2Emphasized,{color:g,children:b}),e[17]=g,e[18]=n):n=e[18];e[19]!==m||e[20]!==n?(a=j.jsx(c("CometPressable.react"),{onPress:m,overlayDisabled:!0,children:n}),e[19]=m,e[20]=n,e[21]=a):a=e[21];return a}g["default"]=a}),226);
__d("PolarisPostCaptionTranslationPrompt.react",["IGDSBox.react","PolarisCommentTranslationPrompt.react","react","react-compiler-runtime","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.inFeed,f=a.marginBottom;a=a.postId;f=f===void 0?0:f;var g=d("usePolarisPost").usePost(a,k);a=d("usePolarisPost").usePost(a,j);if(g!==!0||a==null)return null;b[0]!==a||b[1]!==e?(g=i.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:a,inFeed:e,isCaptionWithTranslation:!0}),b[0]=a,b[1]=e,b[2]=g):g=b[2];b[3]!==f||b[4]!==g?(a=i.jsx(c("IGDSBox.react"),{marginBottom:f,children:g}),b[3]=f,b[4]=g,b[5]=a):a=b[5];return a}function j(a){return a.captionCommentId}function k(a){return a.captionHasTranslation}g["default"]=a}),98);
__d("PolarisPostComment.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSText.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","Locale","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentLikedByListDialogRoot.entrypoint","PolarisCommentOptionsDialog.react","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLikedByListDialogPlaceholder.react","PolarisLinkBuilder","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostGifComment.react","PolarisPostStrings","PolarisPostVariants","PolarisReactRedux.react","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","QE2Logger","joinClasses","nullthrows","polarisPostSelectors","polarisUserSelectors","qex","react","react-compiler-runtime","stylex","useIGDSEntryPointDialog","usePolarisDynamicIpadUpsell","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentAction","usePolarisLoggedOutIntentEntryPointDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react")),m=k;m.useCallback;var n=m.useEffect,o=m.useState,aa=750,p={avatar:{alignSelf:"xqcrz7y",marginTop:"xdj266r",marginInlineEnd:"x14iifvp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},reducedAvatarMargin:{marginTop:"xr9ek0c",marginInlineEnd:"x1sa5p1d",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},restrictedContent:{opacity:"xbyyjgo",$$css:!0},userLinkHeader:{alignItems:"x6s0dn4",display:"x3nfvp2",$$css:!0}};function ba(a){var b=d("react-compiler-runtime").c(22),e=a.parentProps,f=e.commentOwnerId,g=e.commentOwnerUsername,h=e.isAuthorVerified,i=e.isCaption,k=e.isRestrictedPending,m=e.postOwnerIsUnpublished;e=e.showRichComment;h=h===void 0?!1:h;i=i===void 0?!1:i;m=m===void 0?!1:m;e=e===void 0?!1:e;a=k&&!a.showRestrictedContent;var n=i?"h2":"h3";if(a){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx(c("IGDSBox.react"),{marginBottom:1,position:"relative",children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"body",weight:"semibold",children:d("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})}),b[0]=a):a=b[0];return a}else if(!i||m!==!0){a=k===!0&&p.restrictedContent;b[1]!==a?(i=(j||(j=c("stylex")))(p.userLinkHeader,a),b[1]=a,b[2]=i):i=b[2];b[3]!==g?(m=d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(g)),b[3]=g,b[4]=m):m=b[4];b[5]!==g?(k=c("nullthrows")(g),b[5]=g,b[6]=k):k=b[6];b[7]!==m||b[8]!==k?(a=l.jsx(c("IGDSButton.react"),{display:"block",href:m,label:k,variant:"secondary_link"}),b[7]=m,b[8]=k,b[9]=a):a=b[9];b[10]!==f||b[11]!==g||b[12]!==a?(m=l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",userId:f,username:g,children:a})}),b[10]=f,b[11]=g,b[12]=a,b[13]=m):m=b[13];b[14]!==h||b[15]!==e?(k=e&&h&&l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),b[14]=h,b[15]=e,b[16]=k):k=b[16];b[17]!==n||b[18]!==k||b[19]!==i||b[20]!==m?(f=l.jsxs(n,{className:i,children:[m,k]}),b[17]=n,b[18]=k,b[19]=i,b[20]=m,b[21]=f):f=b[21];return f}return null}function ca(a){var b=d("react-compiler-runtime").c(10);a=a.parentProps;var e=a.captionCreatedAt,f=a.commentThreadId,g=a.disableTimestampNav,h=a.id,i=a.isCaption,j=a.isEdited,k=a.postedAt;a=a.postShortcode;i=i===void 0?!1:i;j=j===void 0?!1:j;i=i&&j&&e!=null?e:k;b[0]!==i?(j=l.jsx(c("PolarisTimestamp.react"),{className:"_a9ze _a9zf",value:i}),b[0]=i,b[1]=j):j=b[1];e=j;if(a!=null&&h!=null){b[2]!==h||b[3]!==f||b[4]!==a?(k=f!=null&&f!==h?d("PolarisLinkBuilder").buildReplyPermalink(a,f,h,d("PolarisUA").isMobile()):d("PolarisLinkBuilder").buildCommentPermalink(a,h,d("PolarisUA").isMobile()),b[2]=h,b[3]=f,b[4]=a,b[5]=k):k=b[5];i=k;j=g===!0?q:void 0;b[6]!==j||b[7]!==i||b[8]!==e?(h=l.jsx(c("PolarisFastLink.react"),{className:"_a9zg",href:i,onClick:j,children:e}),b[6]=j,b[7]=i,b[8]=e,b[9]=h):h=b[9];e=h}return e}function q(a){return a.preventDefault()}function da(a){var b=d("react-compiler-runtime").c(142),e=o(null),f=e[0],g=e[1];e=o(!1);var h=e[0],j=e[1];e=o(!1);var k=e[0],m=e[1];e=o(!1);var q=e[0],da=e[1];b[0]!==f?(e=function(){window.clearTimeout(f)},b[0]=f,b[1]=e):e=b[1];var r=e,s=d("usePolarisDynamicIpadUpsell").usePolarisDesktopExcludingIpad(),t;b[2]!==r?(e=function(){return function(){r()}},t=[r],b[2]=r,b[3]=e,b[4]=t):(e=b[3],t=b[4]);n(e,t);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){m(!0)},b[5]=e):e=b[5];var fa=e;b[6]!==a.isCaption||b[7]!==a.showRichComment?(t=function(){if(!d("PolarisUA").isMobile()||a.showRichComment!==!0||a.isCaption===!0)return;g(window.setTimeout(fa,aa))},b[6]=a.isCaption,b[7]=a.showRichComment,b[8]=t):t=b[8];var u=t;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){m(!1)},b[9]=e):e=b[9];var ga=e;b[10]!==a?(t=function(){m(!1),a.onDeleteComment()},b[10]=a,b[11]=t):t=b[11];var ha=t;b[12]!==a?(e=function(){var b=a.id,d=a.onDeleteCommentClick;d&&d(c("nullthrows")(b))},b[12]=a,b[13]=e):e=b[13];var v=e;b[14]!==a?(t=function(b){var c=a.onLikeComment,d=a.onUnlikeComment;b?c():d()},b[14]=a,b[15]=t):t=b[15];var ia=t;b[16]!==a?(e=function(){var b=a.isRestrictedPending,c=a.likedByViewer,d=a.loggedIn,e=a.onLikeComment;b=b===void 0?!1:b;c=c===void 0?!1:c;!c&&!b&&d&&e()},b[16]=a,b[17]=e):e=b[17];var ja=e;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(t={},b[18]=t):t=b[18];e=(e=a.id)!=null?e:"";b[19]!==e?(t={routeParams:t,routeProps:{commentId:e}},b[19]=e,b[20]=t):t=b[20];e=c("useIGDSEntryPointDialog")(c("PolarisCommentLikedByListDialogRoot.entrypoint"),t,"button",ea);var ka=e[0];b[21]!==s||b[22]!==a||b[23]!==ka?(t=function(){var b=a.code,e=a.commentOwnerId,f=a.commentOwnerUsername,g=a.fetchCommentLikes,h=a.id,i=a.likeCount,j=a.loggedIn,k=a.onLikeCountClick,l=a.onLoggedOutDialogClick,m=a.onLoggedOutIntentClick,n=a.viewerId;if(j){if(k){d("QE2Logger").logExposureForIGWebCookieCritical("ig_web_h1_2023_desktop_reels_comment_likes_graphql","is_enabled");if(c("qex")._("1656")){j=n===e;ka({isOwnerTheViewer:j,likeAndViewCountsDisabled:!1,likeCount:i,ownerUsername:f,productType:void 0,viewCount:0})}else g(),k(c("nullthrows")(h))}}else s?l(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),"post_comment_like_count"):m("post_comment_like_count")},b[21]=s,b[22]=a,b[23]=ka,b[24]=t):t=b[24];var la=t;b[25]!==a?(e=function(){var b=a.loggedIn,c=a.onLoggedOutDialogPreload;!b&&d("PolarisUA").isDesktop()&&c()},b[25]=a,b[26]=e):e=b[26];var ma=e;b[27]!==a?(t=function(b){var e=a.analyticsContext,f=a.commentOwnerId,g=a.commentThreadId,h=a.id,i=a.isRestrictedPending,j=a.mediaType,k=a.postId,l=a.postOwnerId,m=a.viewerId;switch(b.state){case"entered":if(h!=null&&m!=null){d("PolarisEngagementLogger").logCommentImpression({commentAuthorId:f,commentId:h,commentThreadId:g,containerModule:e,mediaAuthorId:l,mediaId:k,mediaType:j});i&&c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:f,commentId:h,commentThreadId:g,parentMediaId:k,step:"pending_comment"});return}}},b[27]=a,b[28]=t):t=b[28];e=t;b[29]!==s||b[30]!==a?(t=function(){var b=a.code,e=a.loggedIn,f=a.onLoggedOutDialogClick,g=a.onLoggedOutIntentClick,h=a.onReplyClick;e?h():s?f(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),"post_comment_reply"):g("post_comment_reply")},b[29]=s,b[30]=a,b[31]=t):t=b[31];var na=t;b[32]!==a?(t=function(){var b=a.loggedIn,c=a.onLoggedOutDialogPreload;!b&&d("PolarisUA").isDesktop()&&c()},b[32]=a,b[33]=t):t=b[33];var oa=t;b[34]!==a?(t=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:"pending_comment_see_hidden"});da(!0)},b[34]=a,b[35]=t):t=b[35];var pa=t;b[36]!==a?(t=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:"pending_comment_approve"});j(!0)},b[36]=a,b[37]=t):t=b[37];var qa=t;b[38]===Symbol["for"]("react.memo_cache_sentinel")?(t=function(){j(!1)},b[38]=t):t=b[38];var ra=t;b[39]!==v||b[40]!==a||b[41]!==q?(t=function(){var b=a.commentOwnerId,d=a.commentThreadId,e=a.id,f=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:e,commentThreadId:d,parentMediaId:f,step:q?"pending_comment_delete":"pending_comment_delete_hidden"});v()},b[39]=v,b[40]=a,b[41]=q,b[42]=t):t=b[42];var sa=t;b[43]!==la||b[44]!==ma||b[45]!==a?(t=function(){var b=a.code,e=a.id,f=a.likeCount,g=a.loggedIn;if(f==null||f===0)return null;var h=f.toLocaleString(),j=i._(/*BTDS*/"{like count} like",[i._param("like count",h)]);h=i._(/*BTDS*/"{like count} likes",[i._param("like count",h)]);j=f===1?j:h;return f>0&&(d("PolarisUA").isDesktop()||!g?l.jsx("button",{className:"_a9ze",onClick:la,onMouseEnter:ma,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:j})}):l.jsx(c("PolarisFastLink.react"),{className:"_a9ze _amp7",href:"/p/"+c("nullthrows")(b)+"/c/"+c("nullthrows")(e)+"/liked_by/",children:j}))},b[43]=la,b[44]=ma,b[45]=a,b[46]=t):t=b[46];var ta=t,ua=a.className,va=a.commentingDisabledForViewer,w=a.commentOwnerAvatar,x=a.commentOwnerId,y=a.commentOwnerUsername,wa=a.commentThreadId,z=a.communityNoteComponent,xa=a.customPaddingStyle;t=a.giphyMediaInfo;var A=a.hideUserAvatar,B=a.id,C=a.isCaption,D=a.isEdited,E=a.isPermalinkedComment,F=a.isRestrictedPending,ya=a.likedByViewer,G=a.postId,H=a.postOwnerId,za=a.postOwnerIsUnpublished,Aa=a.reducedAvatarMargin,I=a.showCommentOptionsInline,Ba=a.showRemoveIcon,J=a.showRichComment,K=a.translation,Ca=a.variant,L=a.viewerId,Da=A===void 0?!1:A,M=C===void 0?!1:C,Ea=D===void 0?!1:D;A=E===void 0?!1:E;var N=I===void 0?!1:I,O=J===void 0?!1:J,P,Q,R,S,T,U,V,W,X,Y,Z;if(b[47]!==x||b[48]!==t||b[49]!==e||b[50]!==M||b[51]!==A||b[52]!==F||b[53]!==H||b[54]!==a.text||b[55]!==N||b[56]!==Ba||b[57]!==q||b[58]!==O||b[59]!==K||b[60]!==Ca||b[61]!==L){var $,Fa;Z=a.text.toString();(K==null?void 0:K.showTranslatedText)===!0&&K.translatedText!=null&&(Z=K.translatedText);Q=!M&&L!=null&&(L===x||H===L);X=Q&&Ba&&!O;R=!M&&L!=null&&!X&&!F;b[76]!==A?(C=d("PolarisConfig").isLoggedOutFRXEligible()&&A,b[76]=A,b[77]=C):C=b[77];D=C;b[78]!==D||b[79]!==M||b[80]!==O||b[81]!==L?(E=D||O&&!d("PolarisUA").isMobile()&&!M&&L!=null,b[78]=D,b[79]=M,b[80]=O,b[81]=L,b[82]=E):E=b[82];S=E;P=Ca===d("PolarisPostVariants").VARIANTS.feed?c("PolarisTruncatedText.react"):c("PolarisUserText.react");V=!!M||!R&&!Q;Y=F&&!q;W=F&&q;I=t!=null;U=I?(J=t==null||($=t.first_party_cdn_proxied_images)==null||($=$.fixed_height)==null?void 0:$.url)!=null?J:t==null||(Fa=t.images)==null||(Fa=Fa.fixed_height)==null?void 0:Fa.url:void 0;C=N===!0?"_a9ze":"";D=(N!==!0?"_a9zh":"")+(N===!0?" _a9zi":"");b[83]===Symbol["for"]("react.memo_cache_sentinel")?(E=l.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,onClick:fa,children:l.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:l.jsx(c("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:d("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})}),b[83]=E):E=b[83];b[84]!==D?(I=l.jsx("div",{className:D,children:E}),b[84]=D,b[85]=I):I=b[85];b[86]!==C||b[87]!==I?(J=l.jsx("div",{className:C,children:I}),b[86]=C,b[87]=I,b[88]=J):J=b[88];T=J;E=d("PolarisViewpointReact.react").Viewpoint;D=e;C=Z.replace(" ","-");b[47]=x;b[48]=t;b[49]=e;b[50]=M;b[51]=A;b[52]=F;b[53]=H;b[54]=a.text;b[55]=N;b[56]=Ba;b[57]=q;b[58]=O;b[59]=K;b[60]=Ca;b[61]=L;b[62]=E;b[63]=P;b[64]=Q;b[65]=R;b[66]=S;b[67]=T;b[68]=U;b[69]=V;b[70]=W;b[71]=X;b[72]=Y;b[73]=D;b[74]=C;b[75]=Z}else E=b[62],P=b[63],Q=b[64],R=b[65],S=b[66],T=b[67],U=b[68],V=b[69],W=b[70],X=b[71],Y=b[72],D=b[73],C=b[74],Z=b[75];b[89]!==P||b[90]!==Q||b[91]!==R||b[92]!==S||b[93]!==ua||b[94]!==T||b[95]!==w||b[96]!==x||b[97]!==y||b[98]!==wa||b[99]!==va||b[100]!==z||b[101]!==xa||b[102]!==U||b[103]!==qa||b[104]!==ha||b[105]!==u||b[106]!==r||b[107]!==v||b[108]!==ja||b[109]!==ia||b[110]!==na||b[111]!==oa||b[112]!==sa||b[113]!==pa||b[114]!==Da||b[115]!==B||b[116]!==M||b[117]!==Ea||b[118]!==V||b[119]!==F||b[120]!==ya||b[121]!==G||b[122]!==H||b[123]!==za||b[124]!==a||b[125]!==Aa||b[126]!==ta||b[127]!==h||b[128]!==W||b[129]!==k||b[130]!==N||b[131]!==X||b[132]!==q||b[133]!==O||b[134]!==Y||b[135]!==Z?(I=function(b){return l.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:ja,role:"button",children:[l.jsx("li",{className:c("joinClasses")((O?"_a9zj":"")+(xa==="compact"?" _a9zk":"")+" _a9zl",ua),onMouseDown:u,onMouseUp:r,onTouchEnd:r,onTouchMove:r,onTouchStart:u,ref:b,children:l.jsxs("div",{className:"_a9zm","data-testid":void 0,children:[l.jsxs("div",{className:(V?"_a9zn":"")+" _a9zo",children:[O&&!Da&&l.jsx(c("PolarisUserHoverCard.react"),{display:"block",userId:x,username:y,children:l.jsx(c("PolarisUserAvatarWithStories.react"),{isLink:!za,profilePictureUrl:w!=null?w:"",size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:y,xstyle:[p.avatar,Aa===!0&&p.reducedAvatarMargin,F===!0&&p.restrictedContent]})}),l.jsxs("div",{className:"_a9zr",children:[l.jsx(ba,{parentProps:a,showRestrictedContent:q}),!Y&&(U!=null?l.jsx(c("PolarisPostGifComment.react"),{gifSrc:U}):l.jsx("div",babelHelpers["extends"]({},{0:{className:"xt0psk2"},1:{className:"xt0psk2 xbyyjgo"}}[!!(F===!0)<<0],{"data-testid":void 0,children:l.jsx(P,{display:"inline",headlineTag:M===!0?"h1":void 0,size:"body",value:Z})}))),O&&l.jsx(c("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:l.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",dir:c("Locale").isRTL()?"rtl":"ltr",children:[M&&Ea&&l.jsxs(l.Fragment,{children:[d("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xa0\xb7\xa0"]}),l.jsx(ca,{parentProps:a}),M&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",position:"relative",children:l.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{postId:G})}),!M&&!F&&l.jsxs(l.Fragment,{children:[ta(),va!==!0&&l.jsx("button",{className:"_a9ze",onClick:na,onMouseEnter:oa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").REPLY_TEXT})}),B!=null&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:2,position:"relative",children:l.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:B})}),S&&N===!0&&T]}),Y&&l.jsx("button",{className:"_a9ze",onClick:pa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),W&&l.jsx("button",{className:"_a9ze",onClick:qa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),F&&l.jsx("button",{className:"_a9ze",onClick:sa,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})}),z!=null&&z]})]}),X&&l.jsx("button",{className:"_a9zt",onClick:v,title:d("PolarisPostStrings").DELETE_COMMENT_TEXT,children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").DELETE_COMMENT_TEXT})}),S&&!N&&T,R&&l.jsx(c("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!ya,onChange:ia,padding:0,size:12})]})}),k&&B!=null&&l.jsx(c("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!Q,commentId:B,commentOwnerAvatar:w!=null?w:"",commentOwnerId:x,commentOwnerUsername:y,mediaOwnerId:H,onClose:ga,onDelete:ha}),h&&B!=null&&l.jsx(d("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:B,commentOwnerId:x,commentOwnerUsername:y,commentThreadId:wa,onClose:ra,postId:G})]})},b[89]=P,b[90]=Q,b[91]=R,b[92]=S,b[93]=ua,b[94]=T,b[95]=w,b[96]=x,b[97]=y,b[98]=wa,b[99]=va,b[100]=z,b[101]=xa,b[102]=U,b[103]=qa,b[104]=ha,b[105]=u,b[106]=r,b[107]=v,b[108]=ja,b[109]=ia,b[110]=na,b[111]=oa,b[112]=sa,b[113]=pa,b[114]=Da,b[115]=B,b[116]=M,b[117]=Ea,b[118]=V,b[119]=F,b[120]=ya,b[121]=G,b[122]=H,b[123]=za,b[124]=a,b[125]=Aa,b[126]=ta,b[127]=h,b[128]=W,b[129]=k,b[130]=N,b[131]=X,b[132]=q,b[133]=O,b[134]=Y,b[135]=Z,b[136]=I):I=b[136];b[137]!==E||b[138]!==D||b[139]!==C||b[140]!==I?(J=l.jsx(E,{action:D,id:C,children:I}),b[137]=E,b[138]=D,b[139]=C,b[140]=I,b[141]=J):J=b[141];return J}function ea(a){return l.jsx(c("PolarisLikedByListDialogPlaceholder.react"),{onClose:a})}ea.displayName=ea.name+" [from "+f.id+"]";function a(a,b){var e=b.commentOwnerId,f=b.postId,g=b.postOwnerId;e=d("polarisUserSelectors").getUserByIdOrThrows(a,e);f=d("polarisPostSelectors").getPostOrNullById(a,f);b=b.id;b==null&&(b=f==null?void 0:f.captionCommentId);return{commentOwnerAvatar:e.profilePictureUrl,commentOwnerId:c("nullthrows")(e.id),commentOwnerUsername:c("nullthrows")(e.username),postOwnerIsUnpublished:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isUnpublished,postShortcode:f&&f.code,translation:b!=null?a.comments.translationById.get(b):null,viewerId:a.users.viewerId}}function b(a,b){var e={commentAuthorId:b.commentOwnerId,commentId:b.id||"",containerModule:b.analyticsContext,mediaAuthorId:b.postOwnerId,mediaId:b.id||"",mediaType:b.mediaType||0};return{fetchCommentLikes:function(){return a(d("PolarisCommentLikeListsActions").requestCommentLikes(c("nullthrows")(b.id)))},onDeleteComment:function(){return a(d("PolarisCommentActions").deleteComment(b.postId,b.id||"",b.analyticsContext))},onLikeComment:function(b){return a(d("PolarisCommentActions").likeComment(babelHelpers["extends"]({},e,{userId:b||""})))},onReplyClick:function(e){return a(d("PolarisPendingCommentActions").changePendingComment(b.postId,"@"+(e||"")+" ",c("nullthrows")(b.commentThreadId),b.commentOwnerId,e))},onUnlikeComment:function(b){return a(d("PolarisCommentActions").unlikeComment(babelHelpers["extends"]({},e,{userId:b||""})))}}}function e(a,b,c){return babelHelpers["extends"]({},a,b,c,{onLikeComment:function(){return b.onLikeComment(a.viewerId)},onReplyClick:function(){return b.onReplyClick(a.commentOwnerUsername)},onUnlikeComment:function(){return b.onUnlikeComment(a.viewerId)}})}function h(a){var b=d("react-compiler-runtime").c(13),e=c("usePolarisLoggedOutIntentAction")(),f=c("usePolarisLoggedOutBlockingEntryPointDialog")(),g=f[0],h=f[1];f=c("usePolarisLoggedOutIntentEntryPointDialog")();var i=f[0],j=f[1];b[0]!==g||b[1]!==i?(f=function(a,b){a={contentReportingLink:a,nextUrl:a,source:b};d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?i==null||i(a):g==null||g(a)},b[0]=g,b[1]=i,b[2]=f):f=b[2];f=f;var k;b[3]!==h||b[4]!==j?(k=function(){d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?j==null||j(!0):h==null||h(!0)},b[3]=h,b[4]=j,b[5]=k):k=b[5];k=k;var m;b[6]!==e?(m=function(a){return e({source:a})},b[6]=e,b[7]=m):m=b[7];var n;b[8]!==k||b[9]!==f||b[10]!==a||b[11]!==m?(n=l.jsx(da,babelHelpers["extends"]({},a,{onLoggedOutDialogClick:f,onLoggedOutDialogPreload:k,onLoggedOutIntentClick:m})),b[8]=k,b[9]=f,b[10]=a,b[11]=m,b[12]=n):n=b[12];return n}m=d("PolarisReactRedux.react").connect(a,b,e)(h);g["default"]=m}),226);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","immutable-4.0.0-rc.9","nullthrows","polarisCreateSelectorWithArg"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return!a.deleted&&!a.didReportAsSpam}e=(b=c("polarisCreateSelectorWithArg"))(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a){return a.threadedComments.parentByPostId},function(a,b,e){return function(f){var g=e[f];f=a.get(f);if(!g||!f)return d("immutable-4.0.0-rc.9").List();var i=g.commentIds;g=d("PolarisPaginationUtils").getVisibleCount(g.pagination);f=f.hasRankedComments===!0?0:i.count()-g;return i.map(function(a){return c("nullthrows")(b.get(a))}).slice(f,f+g).filter(function(a){return h(a)})}});f=b(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(e){e=c("nullthrows")(b[e]);var f=e.commentIds;e=e.pagination;f=f.map(function(b){return c("nullthrows")(a.get(b))});e=f.count()-d("PolarisPaginationUtils").getVisibleCount(e);var g=f.slice(e,f.count()).filter(function(a){return h(a)});f=f.slice(0,e).filter(function(a){return h(a)});e=f.map(function(a){return a.id});return{remainingCachedShowableChildCommentIds:e,visibleChildComments:g}}});var i=b(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(e){e=c("nullthrows")(b[e]);var f=e.commentIds;e=e.pagination;f=f.map(function(b){return c("nullthrows")(a.get(b))});e=d("PolarisPaginationUtils").getVisibleCount(e);var g=f.slice(0,e).filter(function(a){return h(a)});e=f.slice(e,f.count()).filter(function(a){return h(a)});f=e.map(function(a){return a.id});return{remainingCachedShowableChildCommentIds:f,visibleChildComments:g}}});b=b(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(a){a=c("nullthrows")(b[a]);return a.count||0}});function a(a,b){return!!a.threadedComments.initialCommentsLoading[b]}g.selectVisibleParentCommentsForPostId=e;g.selectChildCommentsForParentIdSplitByVisibility=f;g.selectChildCommentsForParentIdSplitByVisibilityV2=i;g.getTotalChildCommentCountForParentId=b;g.getThreadedCommentsLoading=a}),98);
__d("PolarisCommentThread.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","isStringNullOrEmpty","nullthrows","polarisCommentReducer","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function l(a){var b=d("react-compiler-runtime").c(24),e=a.childComment,f=a.disableTimestampNav;a=a.parentProps;var g=a.analyticsContext,h=a.code,i=a.commentingDisabledForViewer,j=a.hideUserAvatar,l=a.loggedIn,m=a.onDeleteCommentClick,n=a.onLikeCountClick,o=a.parentComment,p=a.postId,q=a.postOwnerId,r=a.reducedAvatarMargin,s=a.showCommentOptionsInline;a=a.showRemoveIcon;j=!!j;var t;b[0]!==g||b[1]!==e.giphyMediaInfo||b[2]!==e.id||b[3]!==e.isAuthorVerified||b[4]!==e.isRestrictedPending||b[5]!==e.likeCount||b[6]!==e.likedByViewer||b[7]!==e.postedAt||b[8]!==e.text||b[9]!==e.userId||b[10]!==h||b[11]!==i||b[12]!==f||b[13]!==l||b[14]!==m||b[15]!==n||b[16]!==o.id||b[17]!==p||b[18]!==q||b[19]!==r||b[20]!==s||b[21]!==a||b[22]!==j?(t=k.jsx(c("PolarisPostComment.react"),{analyticsContext:g,className:"_a9ye",code:h,commentingDisabledForViewer:i,commentOwnerId:e.userId,commentThreadId:o.id,disableTimestampNav:f,giphyMediaInfo:e.giphyMediaInfo,hideUserAvatar:j,id:e.id,isAuthorVerified:e.isAuthorVerified,isRestrictedPending:e.isRestrictedPending,likeCount:e.likeCount,likedByViewer:e.likedByViewer,loggedIn:l,onDeleteCommentClick:m,onLikeCountClick:n,postedAt:e.postedAt,postId:p,postOwnerId:q,reducedAvatarMargin:r,showCommentOptionsInline:s,showRemoveIcon:a,showRichComment:!0,text:e.text,variant:d("PolarisPostVariants").VARIANTS.flexible},e.id),b[0]=g,b[1]=e.giphyMediaInfo,b[2]=e.id,b[3]=e.isAuthorVerified,b[4]=e.isRestrictedPending,b[5]=e.likeCount,b[6]=e.likedByViewer,b[7]=e.postedAt,b[8]=e.text,b[9]=e.userId,b[10]=h,b[11]=i,b[12]=f,b[13]=l,b[14]=m,b[15]=n,b[16]=o.id,b[17]=p,b[18]=q,b[19]=r,b[20]=s,b[21]=a,b[22]=j,b[23]=t):t=b[23];return t}b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={hasPermalinkedReplyBeenHidden:!1},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidUpdate=function(a,b){(a.parentComment.id!==this.props.parentComment.id||a.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})};e.$1=function(){var a=this.props,b=a.childCommentsCacheCanShowMoreWithoutFetch,c=a.childCommentsCanFetchMorePagination,d=a.childCommentsHasNextPage,e=a.permalinkedReply;a=a.remainingCachedShowableChildCommentIds;return e!=null&&d===!0&&b===!0&&c!==!0&&a.count()===1&&a.get(0)===e.id};e.$2=function(a){var b=this.props.childCommentsHasNextPage;return b!==!0||a&&this.$1()};e.$3=function(a){var b=this.props,c=b.analyticsContext,e=b.childCommentsCacheCanShowMoreWithoutFetch,f=b.childCommentsIsFetching,g=b.hideReplies,h=b.loadChildComments,i=b.loadChildCommentsV2,j=b.onHidePermalinkReply,k=b.parentComment,l=k.id;k=k.userId;var m=b.permalinkedReply,n=b.postId,o=b.postOwnerId;b=b.showReplies;if(f)return;else a?(g(l),d("PolarisInteractionsLogger").logInteractionAction({commentAuthorId:k,commentId:l,containerModule:c,eventName:"instagram_child_comments_collapse",mediaAuthorId:o,mediaId:n}),m!=null&&(j!=null&&j(),this.setState({hasPermalinkedReplyBeenHidden:!0}))):e?b(l):d("PolarisIsLoggedIn").isLoggedIn()?i(n,l):h(l)};e.$4=function(a,b){var d=this,e=this.props,f=e.childCommentsIsFetching,g=e.replyPagerNodeRef;e=e.totalChildCommentCount;var h=this.$2(b),j=b?1:0;j=a+j;e=e-j;h&&!f?j=i._(/*BTDS*/"Hide replies"):e<=0?j=i._(/*BTDS*/"View replies"):j=i._(/*BTDS*/"View replies ({hidden replies})",[i._param("hidden replies",e)]);return k.jsx("li",{className:"_a9yg",ref:g,children:k.jsxs(c("IGDSBox.react"),{direction:"row",marginBottom:a>0?4:0,marginTop:b?2:0,position:"relative",children:[k.jsxs(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return d.$3(h)},children:[k.jsx("div",{className:"_a9yh"}),k.jsx("span",{className:"_a9yi",children:j})]}),f&&k.jsx("div",{className:"_a9yj",children:k.jsx(c("IGDSSpinner.react"),{size:"small"})})]})})};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.code,g=b.commentingDisabledForViewer,h=b.customIndentationPadding,i=b.hideUserAvatar,j=b.innerRef,m=b.isPermalinkedComment,n=b.loggedIn,o=b.onDeleteCommentClick,p=b.onLikeCountClick,q=b.parentComment,r=b.permalinkedReply,s=b.permalinkedReplyAnimating,t=b.permalinkedReplyId,u=b.permalinkedReplyNodeRef,v=b.postId,w=b.postOwnerId,x=b.reducedAvatarMargin,y=b.showCommentOptionsInline,z=b.showRemoveIcon,A=b.totalChildCommentCount;b=b.visibleChildComments;var B=this.state.hasPermalinkedReplyBeenHidden,C=c("qex")._("2138"),D=null;r&&!(B&&b.count()===0)&&(D=k.jsx("div",{className:"_a9yk"+(s===!0&&!B?" _a9yl":""),ref:u,children:k.jsx(l,{childComment:r,disableTimestampNav:!0,parentProps:this.props})}));s=b.map(function(b,d){return D&&c("nullthrows")(r).id===b.id?null:k.jsx(l,{childComment:b,parentProps:a.props},d)}).filter(function(a){return a!=null});B=this.$4(s.count(),D!=null);u=h!=null?{margin:"12px 0 0 "+h+"px",width:"calc(100% - "+h+"px)"}:void 0;return k.jsxs("ul",{className:"_a9ym",ref:j,children:[k.jsx(c("PolarisPostComment.react"),{analyticsContext:e,code:f,commentingDisabledForViewer:g,commentOwnerId:q.userId,commentThreadId:q.id,disableTimestampNav:m===!0&&t==null,giphyMediaInfo:q.giphyMediaInfo,hideUserAvatar:!!i,id:q.id,isAuthorVerified:q.isAuthorVerified,isPermalinkedComment:m,isRestrictedPending:q.isRestrictedPending,likeCount:q.likeCount,likedByViewer:q.likedByViewer,loggedIn:n,onDeleteCommentClick:o,onLikeCountClick:p,postedAt:q.postedAt,postId:v,postOwnerId:w,reducedAvatarMargin:x,showCommentOptionsInline:y,showRemoveIcon:z,showRichComment:!0,text:q.text,variant:d("PolarisPostVariants").VARIANTS.flexible}),A!==0&&k.jsx("li",{children:k.jsxs("ul",{className:"_a9yo",style:u,children:[D,!C===!0?k.jsxs(k.Fragment,{children:[B," ",s]}):k.jsxs(k.Fragment,{children:[s," ",B]})]})})]})};return b}(k.Component);function a(a,b){var e=b.parentComment;b=b.permalinkedReplyId;var f=c("qex")._("2138")?d("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibilityV2(a,e.id):d("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(a,e.id),g=f.remainingCachedShowableChildCommentIds;f=f.visibleChildComments;var h=d("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(a,e.id);e=(e=a.threadedComments.childByParentId[e.id])!=null?e:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;e=e.pagination;var i=null;c("isStringNullOrEmpty")(b)||(i=a.comments.byId.get(b));return{childCommentsCacheCanShowMoreWithoutFetch:d("PolarisPaginationUtils").getVisibleCount(e)<d("PolarisPaginationUtils").getLoadedCount(e),childCommentsCanFetchMorePagination:d("PolarisPaginationUtils").canFetchMorePagination(e),childCommentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(e),childCommentsIsFetching:d("PolarisPaginationUtils").isFetching(e),permalinkedReply:i,remainingCachedShowableChildCommentIds:g,totalChildCommentCount:h||0,visibleChildComments:f}}e={hideReplies:d("PolarisThreadedCommentActions").hideChildComments,loadChildComments:d("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:d("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:d("PolarisThreadedCommentActions").showChildComments};f=d("PolarisReactRedux.react").connect(a,e)(b);g["default"]=f}),226);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog.react","PolarisCommentActions","PolarisGenericStrings","PolarisReactRedux.react","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.analyticsContext,f=a.commentId,g=a.onClose,i=a.postId,k=d("PolarisReactRedux.react").useDispatch();b[0]!==e||b[1]!==f||b[2]!==k||b[3]!==g||b[4]!==i?(a=function(a){c("polarisLogAction")("commentDelete",{source:e}),k(d("PolarisCommentActions").deleteComment(i,f,e)),g(a)},b[0]=e,b[1]=f,b[2]=k,b[3]=g,b[4]=i,b[5]=a):a=b[5];a=a;var l;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._(/*BTDS*/"Delete Comment"),b[6]=l):l=b[6];b[7]!==a?(l=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:l}),b[7]=a,b[8]=l):l=b[8];b[9]!==g?(a=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:g,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[9]=g,b[10]=a):a=b[10];var m;b[11]!==g||b[12]!==l||b[13]!==a?(m=j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:g,children:[l,a]}),b[11]=g,b[12]=l,b[13]=a,b[14]=m):m=b[14];return m}g["default"]=a}),226);
__d("PolarisEmbedHashHelpers",["memoize"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoize")(function(){var a=window.location.hash;a=decodeURIComponent(a.substring(a.indexOf("#")+1));try{a=JSON.parse(a)}catch(b){a={}}return{clientId:a.ci,offset:a.os,sdkLoadEnd:a.le,sdkLoadStart:a.ls}});g.getHashPayload=a}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("nullthrows")(document.querySelector(".Embed"));return a.getAttribute("data-request-id")}g["default"]=a}),98);
__d("PolarisEmbedLogger",["InstagramQueryParamsHelper","PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","gkx","polarisGetEmbedRequestID"],(function(a,b,c,d,e,f,g){"use strict";var h=["url"],i=["url"],j=["url"];function k(a){a=d("PolarisLoggerUtils").trimAndSanitizeUrl(a||window.location.href);var b=c("polarisGetEmbedRequestID")();return b!=null?d("InstagramQueryParamsHelper").appendQueryParams(a,{ig_rid:b}):a}function a(a,b,e){if(!c("gkx")("25394"))return;var f=d("PolarisLogger").getExtra(),g=f.url;f=babelHelpers.objectWithoutPropertiesLoose(f,h);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},f);f=babelHelpers["extends"]({obj_id:k(g),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds",a,f),b)}function l(a,b,c){var e=d("PolarisLogger").getAnonymousExtra(),f=e.url;e=babelHelpers.objectWithoutPropertiesLoose(e,i);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},e);e=babelHelpers["extends"]({obj_id:k(f),obj_type:"url"},c);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",a,e),b)}function b(a){var b=a.isCopyrightBlocked,c=a.mediaId,d=a.mediaType;a=a.ownerId;l({actionName:"view",isCopyrightBlocked:b,mediaId:c,mediaType:d,ownerId:a})}function e(a,b,e){if(!c("gkx")("25394"))return;a=d("PolarisLogger").getExtra(a);var f=a.url;a=babelHelpers.objectWithoutPropertiesLoose(a,j);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},a);f=babelHelpers["extends"]({obj_id:k(f),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",a,f),b)}g.logEmbedAction=a;g.logEmbedPageView=b;g.logEmbedTimings=e}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i._(/*BTDS*/"Control"),m=i._(/*BTDS*/"Watch again on Instagram"),n="https://www.instagram.com";function o(a){var b=d("react-compiler-runtime").c(4),e=a.className,f=a.href;a=a.onClick;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=k.jsx(c("PolarisFastLink.react"),{"aria-label":l,className:e,href:f,onClick:a,target:"_blank"}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}function a(a){var b,e=d("react-compiler-runtime").c(18),f=a.post;a=f.code;a=a!=null&&a.length>0?d("PolarisLinkBuilder").buildMediaLink(a):"";a=""+n+a+"?utm_source=ig_embed&utm_campaign=embed_video_watch_again";if(e[0]!==f.id||e[1]!==((b=f.owner)==null?void 0:b.id)){var g;b=function(){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:f.id,mediaType:"video",ownerId:((a=f.owner)==null?void 0:a.id)||""})};e[0]=f.id;e[1]=(g=f.owner)==null?void 0:g.id;e[2]=b}else b=e[2];g=b;e[3]!==g||e[4]!==a?(b=k.jsx(c("PolarisFastLink.react"),{"aria-label":m,className:"_aarb _9zwu",href:a,onClick:g,target:"_blank"}),e[3]=g,e[4]=a,e[5]=b):b=e[5];var h;e[6]!==g||e[7]!==a?(h=k.jsx(c("PolarisFastLink.react"),{"aria-label":m,className:"_aarc",href:a,onClick:g,target:"_blank",children:m}),e[6]=g,e[7]=a,e[8]=h):h=e[8];var i;e[9]!==b||e[10]!==h?(i=k.jsx("div",{className:"_aar9",children:k.jsxs("div",{className:"_aara",children:[b,h]})}),e[9]=b,e[10]=h,e[11]=i):i=e[11];e[12]!==g||e[13]!==a?(b=k.jsx(o,{className:"_aard",href:a,onClick:g}),e[12]=g,e[13]=a,e[14]=b):b=e[14];e[15]!==i||e[16]!==b?(h=k.jsxs(k.Fragment,{children:[i,b]}),e[15]=i,e[16]=b,e[17]=h):h=e[17];return h}g["default"]=a}),226);
__d("PolarisVideoHeight",["PolarisSizing"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){Object.assign(e,{height:"100%",position:"absolute",width:"100%"});var f=null;a.dimensions!=null&&(f=d("PolarisSizing").getHeightPercent(a.dimensions));f!=null&&f!==100&&(b&&(f=Math.min(f,d("PolarisSizing").CAPPED_HEIGHT_PERCENT)),Object.assign(c,{paddingBottom:"calc("+f+"% - 1px)"}),Object.assign(e,{height:"calc(100% + 1px)"}))}g.setVideoHeightCompensation=a}),98);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("keyMirror")({finished:null,paused:null,playing:null});a=function(a){function b(b){var c;c=a.call(this,b)||this;c.$1=j.createRef();c.$2=!1;c.$3=null;c.handleVisiblityChange=function(){c.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&c.stop()};c.handleBeforeUnload=function(){c.state.playerState===k.playing&&c.stop()};c.handlePlayerPlayEvent=function(){c.setState({playerState:k.playing})};c.handlePlayerPauseEvent=function(){c.pause()};c.handlePlayerEndedEvent=function(){c.stop()};c.handleContainerClick=function(a){c.state.playerState!==k.playing?c.play():c.pause()};b={playerState:null};c.state=b;return c}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange);this.$3=d("Run").onBeforeUnload(this.handleBeforeUnload);var a=c("nullthrows")(this.$1.current);a.addEventListener("play",this.handlePlayerPlayEvent);a.addEventListener("pause",this.handlePlayerPauseEvent);a.addEventListener("ended",this.handlePlayerEndedEvent)};e.componentDidUpdate=function(a){this.props.isVisible===!1&&a.isVisible===!0&&this.pause()};e.componentWillUnmount=function(){this.handleBeforeUnload();document.removeEventListener("visibilitychange",this.handleVisiblityChange);this.$3!=null&&(this.$3.remove(),this.$3=null);var a=c("nullthrows")(this.$1.current);a.removeEventListener("play",this.handlePlayerPlayEvent);a.removeEventListener("pause",this.handlePlayerPauseEvent);a.removeEventListener("ended",this.handlePlayerEndedEvent)};e.play=function(){if(this.state.playerState===k.playing)return;if(this.$2===!1){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((a=this.props.post.owner)==null?void 0:a.id)||""});this.$2=!0}c("nullthrows")(this.$1.current).play()};e.pause=function(){if(this.state.playerState!==k.playing)return;c("nullthrows")(this.$1.current).pause();this.setState({playerState:k.paused})};e.stop=function(){if(this.state.playerState===k.finished)return;var a=c("nullthrows")(this.$1.current);a.pause();a.currentTime=0;this.setState({playerState:k.finished})};e.render=function(){var a=this.props,b=a.className;a=a.post;var e=this.state.playerState,f={},g={};d("PolarisVideoHeight").setVideoHeightCompensation(a,!0,f,g);var h=e===k.finished;e=!e||e===k.paused;return j.jsxs("div",{className:c("joinClasses")(b,"_aand"),style:f,children:[j.jsx("div",{style:g,children:!a.mediaOverlayInfo&&j.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,"data-testid":void 0,loop:!1,playsInline:!0,poster:a.src,preload:"none",ref:this.$1,src:a.videoUrl,children:j.jsx("track",{kind:"captions"})})}),h?j.jsx(c("PolarisEmbedVideoWatchAgain.react"),{post:a}):j.jsx(c("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:e}),a.usertags&&a.usertags.length>=1&&j.jsx(c("PolarisUserTagIndicatorWithSheet.react"),{mediaId:a.id,usertags:a.usertags})]})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisHotKeys.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;b={keyMap:{}};var k=i.createContext(b);function a(a){var b=d("react-compiler-runtime").c(13),c=a.children,e=a.className,f=a.isButton,g=a.keyMap;a=f===void 0?!1:f;f=j(k).keyMap;var h=m,n=l;b[0]!==g?(f=function(a){if(g[a.key]!=null&&n()&&h(a)){var b=g[a.key];b();a.stopPropagation()}},b[0]=g,b[1]=f):f=b[1];f=f;var o=a?"button":"presentation";a=a?"0":"-1";var p;b[2]!==g?(p={keyMap:g},b[2]=g,b[3]=p):p=b[3];var q;b[4]!==c||b[5]!==e||b[6]!==f||b[7]!==o||b[8]!==a?(q=typeof c==="function"?c(f,o,a):i.jsx("div",{className:e,onKeyUp:f,role:o,tabIndex:a,children:c}),b[4]=c,b[5]=e,b[6]=f,b[7]=o,b[8]=a,b[9]=q):q=b[9];b[10]!==p||b[11]!==q?(c=i.jsx(k.Provider,{value:p,children:q}),b[10]=p,b[11]=q,b[12]=c):c=b[12];return c}function l(){var a;return((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="textarea"&&((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="input"}function m(a){return!(a.ctrlKey||a.altKey||a.metaKey)}g["default"]=a}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(c("emptyFunction"));g.InFeedPostModalContext=b}),98);
__d("PolarisIsLoggedInDesktop",["PolarisIsLoggedIn","PolarisUA"],(function(a,b,c,d,e,f,g){"use strict";function a(){return!d("PolarisUA").isMobile()&&d("PolarisIsLoggedIn").isLoggedIn()}g.isLoggedInDesktop=a}),98);
__d("PolarisLikedByListContainerLazy.react",["CometPlaceholder.react","JSResourceForInteraction","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisLikedByListContainer.react").__setRef("PolarisLikedByListContainerLazy.react"));function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:f.id,children:i.jsx(j,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("PolarisPhotoWrapper.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function k(a){var b=d("react-compiler-runtime").c(7),e=a.children,f=a.externalURL;a=a.wrappedRef;var g=l,h=c("usePolarisOffsiteTrackingDataURLParams")(f),j;b[0]!==e||b[1]!==f||b[2]!==h?(j=function(a){return i.jsx("div",{ref:a,children:i.jsx(c("PolarisExternalLink.react"),{className:"x4gyw5p",href:f,ignoreDoubleClick:!0,onClick:g,queryParams:h,children:e})})},b[0]=e,b[1]=f,b[2]=h,b[3]=j):j=b[3];var k;b[4]!==j||b[5]!==a?(k=i.jsx(c("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:a,trackingNode:86,children:j})}),b[4]=j,b[5]=a,b[6]=k):k=b[6];return k}function l(){c("InstagramODS").incr("web.ads.feed.link_click")}function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.postId,g=a.ref;a=d("polarisAdsSelectors.react").useFeedAdInfo(f,m);var h=j(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);h=h.singleImageAdAsCta;var l;if(b[0]!==(a==null?void 0:a.ctaItems)||b[1]!==f){var n;l=a==null||(n=a.ctaItems)==null||(n=n.get(f))==null?void 0:n.ctaLinkUrl;b[0]=a==null?void 0:a.ctaItems;b[1]=f;b[2]=l}else l=b[2];var o=l;if(o!=null&&h&&d("PolarisUA").isDesktop()){b[3]!==e||b[4]!==o||b[5]!==g?(a=i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:12,children:function(a){return i.jsx("div",{ref:a,children:i.jsx(k,{externalURL:o,wrappedRef:g,children:e})})}}),b[3]=e,b[4]=o,b[5]=g,b[6]=a):a=b[6];return a}b[7]!==e||b[8]!==g?(f=i.jsx("div",{ref:g,children:e}),b[7]=e,b[8]=g,b[9]=f):f=b[9];return f}function m(a){return a}g["default"]=a}),98);
__d("PolarisMedia_DEPRECATED.react",["JSResourceForInteraction","PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenStateManagerSingleton","PolarisIGCoreToast.react","PolarisIsLoggedInDesktop","PolarisLikeAnimation.react","PolarisMediaVideo.react","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisUA","PolarisViewpointReact.react","lazyLoadComponent","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","react-compiler-runtime","usePolarisMediaSensitivityOverlay"],(function(a,b,c,d,e,aa,ba){"use strict";var ca=["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"],da=["mediaFooter"],f,g=f||(f=d("react")),ea=f.useState;function a(a){var b=d("react-compiler-runtime").c(154),e=ea(!1),aa=e[0],ba=e[1];e=ea(!1);var f=e[0],fa=e[1];e=ea(0);var h=e[0],ga=e[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("PolarisFeedSeenStateManagerSingleton").get(),b[0]=e):e=b[0];var ha=e;b[1]!==h||b[2]!==a?(e=function(){a.onLike&&(a.onLike(),ga(h+1))},b[1]=h,b[2]=a,b[3]=e):e=b[3];e=e;var i;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(){ba(!0)},b[4]=i):i=b[4];i=i;var j;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(){ba(!1)},b[5]=j):j=b[5];j=j;var k;b[6]!==a?(k=function(b,c){var d=a.onMediaRendered,e=a.post;if(e.isVideo===!0)return;d&&d({mediaType:"Photo",resourceName:b,timeTaken:c})},b[6]=a,b[7]=k):k=b[7];k=k;var l;b[8]!==f?(l=function(a){bb13:switch(a.state){case"entered":case"updated":a=a.percentVisible>.2;f!==a&&fa(a);break bb13;case"exited":fa(!1)}},b[8]=f,b[9]=l):l=b[9];l=l;var m;b[10]!==a.analyticsContext||b[11]!==a.autoplay?(m=function(b,c){if(b===!0&&a.autoplay===!0){if(d("polarisVideoUtils").isFeed(a.analyticsContext))return!1;if(c===0&&d("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},b[10]=a.analyticsContext,b[11]=a.autoplay,b[12]=m):m=b[12];var ia=m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;if(b[13]!==a){m=a.adInfo;var C=a.analyticsContext,D=a.asSidecarChild,E=a.autoplay;a.checkIsSensitivityOverlayDisabledCallback;var F=a.commentsAreStacked,G=a.firstSidecarChildSrc;a.hasViewInsights;var H=a.id;a.initialCarouselIndex;var I=a.isEmbed,J=a.isVisible,K=a.mediaFooter;a.onLike;a.onMediaRendered;var L=a.onSensitivityOverlayCleared;a.onSetModal;var ja=a.onSidecarChildIndexChange,ka=a.onToastClose,M=a.onVideoFinished,N=a.onVideoLoop,O=a.post,P=a.relationship,Q=a.sensitivityOverlayMediaOverlayInfoLoggingProps,R=a.showToast,S=a.toastString,T=a.viewer,U=a.visiblePosition,V=babelHelpers.objectWithoutPropertiesLoose(a,ca);n=m;o=C;p=D;q=E;m=F;r=G;s=H;t=I;C=J;D=K;E=L;F=ja;u=ka;v=M;w=N;x=O;y=P;G=Q;z=R;A=S;H=T;B=U;I=V;b[13]=a;b[14]=E;b[15]=n;b[16]=o;b[17]=p;b[18]=q;b[19]=m;b[20]=r;b[21]=s;b[22]=t;b[23]=C;b[24]=D;b[25]=F;b[26]=u;b[27]=v;b[28]=w;b[29]=I;b[30]=x;b[31]=y;b[32]=G;b[33]=z;b[34]=A;b[35]=H;b[36]=B}else E=b[14],n=b[15],o=b[16],p=b[17],q=b[18],m=b[19],r=b[20],s=b[21],t=b[22],C=b[23],D=b[24],F=b[25],u=b[26],v=b[27],w=b[28],I=b[29],x=b[30],y=b[31],G=b[32],z=b[33],A=b[34],H=b[35],B=b[36];b[37]!==x?(J=x||{},b[37]=x,b[38]=J):J=b[38];K=J;L=K.dimensions;ja=K.displayResources;ka=K.upcomingEvent;M=K.id;N=K.isVideo;O=K.mediaPreview;P=K.owner;Q=K.sidecarChildren;R=K.src;S=K.usertags;T=N===void 0?!1:N;b[39]!==Q?(U=Q===void 0?[]:Q,b[39]=Q,b[40]=U):U=b[40];V=U;J=V&&V.length>0;if(b[41]!==o||b[42]!==J||b[43]!==x){K=[];if(!J&&d("polarisVideoUtils").isFeed(o)){b[45]!==x?(N=function(a){ha.addImpressionFromPost(x,a)},b[45]=x,b[46]=N):N=b[46];K.push(N)}b[41]=o;b[42]=J;b[43]=x;b[44]=K}else K=b[44];Q=!1;U=c("usePolarisMediaSensitivityOverlay")(x,o,E,a.checkIsSensitivityOverlayDisabledCallback);N=U.mediaOverlayCoverInfo;var la=U.handleHideSensitivityOverlay;E=U.shouldShowSensitivityOverlay;if(P&&E){var W;b[47]!==G?(U=G||{},b[47]=G,b[48]=U):U=b[48];G=U;U=G.checkIfMediaOverlayInfoImpressionLoggingDisabled;G=G.onLoggedMediaOverlayInfoImpression;var X=x.code;if(!d("PolarisUA").isMobile()&&X!=null&&((W=N)==null?void 0:W.overlayType)==="SECRET_LINK"){b[49]===Symbol["for"]("react.memo_cache_sentinel")?(W=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostSecretReelQRCode.react").__setRef("PolarisMedia_DEPRECATED.react")),b[49]=W):W=b[49];W=W;var Y=x.isVideo===!0?"reel":"p",Z;b[50]!==X||b[51]!==Y?(Z={permalink_key:Y,shortcode:X},b[50]=X,b[51]=Y,b[52]=Z):Z=b[52];b[53]!==W||b[54]!==Z?(X=g.jsx(W,{params:Z}),b[53]=W,b[54]=Z,b[55]=X):X=b[55];b[56]!==N||b[57]!==X?(Y=babelHelpers["extends"]({},N,{extra:X}),b[56]=N,b[57]=X,b[58]=Y):Y=b[58];N=Y}b[59]!==U||b[60]!==M?(W=U!=null?U(M):!1,b[59]=U,b[60]=M,b[61]=W):W=b[61];Z=!T&&!J;b[62]!==la||b[63]!==x?(X=function(){return la(x)},b[62]=la,b[63]=x,b[64]=X):X=b[64];b[65]!==o||b[66]!==p||b[67]!==L||b[68]!==C||b[69]!==N||b[70]!==O||b[71]!==G||b[72]!==P.id||b[73]!==M||b[74]!==W||b[75]!==Z||b[76]!==X?(Y=g.jsx(c("PolarisSensitivityOverlay.react"),{analyticsContext:o,asSidecarChild:p,dimensions:L,disableMediaOverlayInfoImpressionLogging:W,isPhoto:Z,isVisible:C,mediaId:M,mediaOverlayCoverInfo:N,onLoggedMediaOverlayInfoImpression:G,onShowPostClicked:X,ownerId:P.id,previewData:O}),b[65]=o,b[66]=p,b[67]=L,b[68]=C,b[69]=N,b[70]=O,b[71]=G,b[72]=P.id,b[73]=M,b[74]=W,b[75]=Z,b[76]=X,b[77]=Y):Y=b[77];U=Y}else if(J){if(m===!0)Q=!0,N=a;else{if(b[78]!==a){a.mediaFooter;O=babelHelpers.objectWithoutPropertiesLoose(a,da);G=O;b[78]=a;b[79]=G}else G=b[79];N=G}b[80]!==F||b[81]!==V||b[82]!==N?(P=g.jsx(c("PolarisSidecarMedia.react"),babelHelpers["extends"]({},N,{onChildIndexChange:F,sidecarChildren:V})),b[80]=F,b[81]=V,b[82]=N,b[83]=P):P=b[83];U=P}else if(T){var ma=f;b[84]!==l?(W=[l],b[84]=l,b[85]=W):W=b[85];Z=W;b[86]!==K||b[87]!==Z?(X=[].concat(Z,K),b[86]=K,b[87]=Z,b[88]=X):X=b[88];b[89]!==n||b[90]!==o||b[91]!==p||b[92]!==q||b[93]!==r||b[94]!==s||b[95]!==t||b[96]!==ma||b[97]!==u||b[98]!==v||b[99]!==w||b[100]!==x||b[101]!==a.className||b[102]!==y||b[103]!==ia||b[104]!==z||b[105]!==A||b[106]!==B?(Y=function(b){return g.jsxs("div",{ref:b,children:[t===!0?g.jsx(c("PolarisEmbedVideo.react"),{className:a.className,isVisible:ma,post:x}):g.jsx(c("PolarisMediaVideo.react"),{adInfo:n,analyticsContext:o,asSidecarChild:p,autoplay:q,className:a.className,firstSidecarChildSrc:r,isVisible:ma,onFinished:v,onLoop:w,post:x,relationship:y,shouldAutoPlay:ia(ma,B),upcomingEventMediaId:s}),z===!0&&A!=null&&g.jsx(c("PolarisIGCoreToast.react"),{absolutePosition:!0,duration:3e3,onClose:u,wide:!0,children:A})]})},b[89]=n,b[90]=o,b[91]=p,b[92]=q,b[93]=r,b[94]=s,b[95]=t,b[96]=ma,b[97]=u,b[98]=v,b[99]=w,b[100]=x,b[101]=a.className,b[102]=y,b[103]=ia,b[104]=z,b[105]=A,b[106]=B,b[107]=Y):Y=b[107];b[108]!==x.id||b[109]!==X||b[110]!==Y?(J=g.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:X,id:x.id,children:Y}),b[108]=x.id,b[109]=X,b[110]=Y,b[111]=J):J=b[111];U=J}else{b[112]!==R?(m=c("nullthrows")(R),b[112]=R,b[113]=m):m=b[113];b[114]!==L||b[115]!==ja||b[116]!==k||b[117]!==h||b[118]!==M||b[119]!==m?(O={dimensions:L,likeEventCount:h,onPhotoRendered:k,postId:M,src:m,srcSet:ja},b[114]=L,b[115]=ja,b[116]=k,b[117]=h,b[118]=M,b[119]=m,b[120]=O):O=b[120];G=O;var $;if(b[121]!==o||b[122]!==p||b[123]!==r||b[124]!==s||b[125]!==aa||b[126]!==C||b[127]!==G||b[128]!==I||b[129]!==R||b[130]!==ka||b[131]!==S||b[132]!==H){if(S&&S.length>0||ka){F=p===!0?r:R;b[134]!==F?(V=c("nullthrows")(F),b[134]=F,b[135]=V):V=b[135];$=g.jsx(d("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers["extends"]({},I,G,{analyticsContext:o,isFocused:aa,isVisible:C,upcomingEvent:ka,upcomingEventMediaId:s,upcomingEventThumbnailSrc:V,usertags:S,viewer:H}))}else $=g.jsx(c("PolarisPhoto.react"),babelHelpers["extends"]({},I,G,{analyticsContext:o,asSidecarChild:p}));b[121]=o;b[122]=p;b[123]=r;b[124]=s;b[125]=aa;b[126]=C;b[127]=G;b[128]=I;b[129]=R;b[130]=ka;b[131]=S;b[132]=H;b[133]=$}else $=b[133];b[136]!==K?(N=[].concat(K),b[136]=K,b[137]=N):N=b[137];P=N;b[138]!==$||b[139]!==x.id?(T=function(a){return g.jsx(c("PolarisPhotoWrapper.react"),{postId:x.id,ref:a,children:$})},b[138]=$,b[139]=x.id,b[140]=T):T=b[140];b[141]!==P||b[142]!==x.id||b[143]!==T?(l=g.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:P,id:x.id,children:T}),b[141]=P,b[142]=x.id,b[143]=T,b[144]=l):l=b[144];W=l;b[145]!==h?(Z=g.jsx(c("PolarisLikeAnimation.react"),{likeEventCount:h},h),b[145]=h,b[146]=Z):Z=b[146];b[147]!==e||b[148]!==Z||b[149]!==W?(X=g.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onBlur:j,onDoubleClick:e,onFocus:i,role:"button",children:[W,Z]}),b[147]=e,b[148]=Z,b[149]=W,b[150]=X):X=b[150];U=X}if(D!=null&&!Q&&!E){b[151]!==U||b[152]!==D?(Y=g.jsxs(g.Fragment,{children:[U,D]}),b[151]=U,b[152]=D,b[153]=Y):Y=b[153];U=Y}return U}function b(a,b){return a.id!==b.id}e=c("polarisWithRemountOnChange")(b)(a);ba["default"]=e}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisMedia_DEPRECATED.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","cr:5000","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["index","media","mediaWidth","onChildIndexChange","sidecarChildIndex","sidecarChildren","analyticsContext","isVisible","mediaFooter","onMediaRendered","post"],i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(43),f;if(e[0]!==a){var g=a.index,i=a.media,k=a.mediaWidth;a.onChildIndexChange;var l=a.sidecarChildIndex,m=a.sidecarChildren,n=a.analyticsContext,o=a.isVisible;a.mediaFooter;var p=a.onMediaRendered,q=a.post,r=babelHelpers.objectWithoutPropertiesLoose(a,h);g=g;i=i;f=k;k=l;l=m;m=n;n=o;o=p;p=q;q=r;e[0]=a;e[1]=m;e[2]=g;e[3]=n;e[4]=i;e[5]=f;e[6]=o;e[7]=q;e[8]=p;e[9]=k;e[10]=l}else m=e[1],g=e[2],n=e[3],i=e[4],f=e[5],o=e[6],q=e[7],p=e[8],k=e[9],l=e[10];e[11]!==m||e[12]!==g||e[13]!==n||e[14]!==i||e[15]!==o||e[16]!==q||e[17]!==k||e[18]!==l?(r=i.isUpsell===!0&&b("cr:5000")!=null?j.jsx(b("cr:5000"),{upsellSidecarChild:i}):j.jsx(c("PolarisMedia_DEPRECATED.react"),babelHelpers["extends"]({},q,{accessibilityCaption:i.accessibilityCaption,analyticsContext:m,asSidecarChild:!0,firstSidecarChildSrc:l[0].src,isVisible:k===g?n:!1,onMediaRendered:o,post:i})),e[11]=m,e[12]=g,e[13]=n,e[14]=i,e[15]=o,e[16]=q,e[17]=k,e[18]=l,e[19]=r):r=e[19];var s=r;if(g===0){e[20]!==i.id||e[21]!==f||e[22]!==s?(a=j.jsx(c("IGDSBox.react"),{position:"relative",width:f,children:s},i.id),e[20]=i.id,e[21]=f,e[22]=s,e[23]=a):a=e[23];return a}e[24]!==m||e[25]!==i?(n=d("PolarisOrganicImpressionAction").makeCarouselImpressionAction(i,m),e[24]=m,e[25]=i,e[26]=n):n=e[26];e[27]!==m||e[28]!==g||e[29]!==i||e[30]!==p.id||e[31]!==l[0]?(o=d("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(i,l[0],g,p.id,m),e[27]=m,e[28]=g,e[29]=i,e[30]=p.id,e[31]=l[0],e[32]=o):o=e[32];e[33]!==n||e[34]!==o?(q=[n,o],e[33]=n,e[34]=o,e[35]=q):q=e[35];e[36]!==f||e[37]!==s?(k=function(a){return j.jsx(c("IGDSBox.react"),{containerRef:a,position:"relative",width:f,children:s})},e[36]=f,e[37]=s,e[38]=k):k=e[38];e[39]!==i.id||e[40]!==q||e[41]!==k?(r=j.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:q,id:i.id,children:k},i.id),e[39]=i.id,e[40]=q,e[41]=k,e[42]=r):r=e[42];return r}g["default"]=a}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisIsLoggedIn","PolarisUA","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=4,i=2;function a(a){var b=d("react-compiler-runtime").c(3),c=a.post;a=a.sidecarChildren;if(d("PolarisIsLoggedIn").isLoggedIn()||d("PolarisUA").isDesktop()||a.some(j)||c.dimensions===null||c.owner===null)return a;var e;if(b[0]!==c||b[1]!==a){e=[].concat(a);var f=e.length>=h?i:null;if(f!=null&&e[f-1].mediaPreview!=null){var g={dimensions:c.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:e[f-1].mediaPreview,owner:c.owner,src:""};e.splice(f,0,g)}b[0]=c;b[1]=a;b[2]=e}else e=b[2];return e}function j(a){return a.mediaOverlayInfo!=null}g["default"]=a}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecarChild.react","PolarisSidecar_DEPRECATED.react","react","react-compiler-runtime","usePolarisSidecarMediaOrUpsell"],(function(a,b,c,d,e,f,g){"use strict";var h=["sidecarChildren","initialCarouselIndex","post"],i,j=i||(i=d("react"));i.useCallback;function a(a){var b=d("react-compiler-runtime").c(23),e,f,g,i;b[0]!==a?(i=a.sidecarChildren,e=a.initialCarouselIndex,g=a.post,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i):(e=b[1],f=b[2],g=b[3],i=b[4]);b[5]!==f.onChildIndexChange?(a=function(a,b,c){return[f.onChildIndexChange].filter(Boolean).forEach(function(d){return d(a,b,c)})},b[5]=f.onChildIndexChange,b[6]=a):a=b[6];a=a;var l;b[7]!==g||b[8]!==i?(l={post:g,sidecarChildren:i},b[7]=g,b[8]=i,b[9]=l):l=b[9];var m=c("usePolarisSidecarMediaOrUpsell")(l);b[10]!==f||b[11]!==g||b[12]!==m?(i=function(a,b){return m.map(function(d,e){return j.jsx(c("PolarisSidecarChild.react"),babelHelpers["extends"]({index:e,media:d,mediaWidth:a,post:g,sidecarChildIndex:b,sidecarChildren:m},f),e)})},b[10]=f,b[11]=g,b[12]=m,b[13]=i):i=b[13];l=i;b[14]!==m?(i=m.map(k).filter(Boolean),b[14]=m,b[15]=i):i=b[15];i=i;var n;b[16]!==i||b[17]!==e||b[18]!==a||b[19]!==f.mediaFooter||b[20]!==l||b[21]!==m.length?(n=j.jsx(d("PolarisSidecar_DEPRECATED.react").Sidecar,{dimensions:i,initialCarouselIndex:e,mediaFooter:f.mediaFooter,numSidecarChildren:m.length,onChildIndexChange:a,renderSidecarChildren:l}),b[16]=i,b[17]=e,b[18]=a,b[19]=f.mediaFooter,b[20]=l,b[21]=m.length,b[22]=n):n=b[22];i=n;return i}function k(a){a=a.dimensions;return a}g["default"]=a}),98);
__d("PolarisMediaContainer.react",["PolarisMedia_DEPRECATED.react","PolarisReactRedux.react","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h=["onPostMediaRendered","onPostSidecarChildIndexChange"],i;i||d("react");function a(a,b){return{onMediaRendered:d("polarisPostSelectors").getOnMediaRendered(a,b.onPostMediaRendered)}}function b(a,b){return{onSidecarChildIndexChange:function(a,c,d){a=b.onPostSidecarChildIndexChange;a&&a(c)}}}function e(a,b,c){c.onPostMediaRendered;c.onPostSidecarChildIndexChange;c=babelHelpers.objectWithoutPropertiesLoose(c,h);return babelHelpers["extends"]({},c,a,b)}f=d("PolarisReactRedux.react").connect(a,b,e)(c("PolarisMedia_DEPRECATED.react"));g["default"]=f}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){c("polarisLogAction")("likeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379204822,"720"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"LIKE_POST_REQUESTED"});return d("PolarisAPILikePost").likePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdLike(b,e):d("PolarisEngagementLogger").logOrganicLike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379204822,"720")),f({postId:a,type:"LIKE_POST_SUCCEEDED"})},function(e){var g;c("polarisLogAction")("likeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379204822,"720"),"request_failed");g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l,m;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;m=(m=e.responseObject)==null?void 0:m.restriction_enrollment_data;e=(e=e.responseObject)==null?void 0:e.enforcement_transparency_instance_identifier;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,enforcement_transparency_instance_identifier:e,feedback_appeal_label:l,message:i,restriction_enrollment_data:m,source:b.source,sourceOfAction:"like_post",title:g,url:j}))}f({postId:a,type:"LIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.likePost=h}),98);
__d("PolarisPostActionRemovePostFromCollection",["InstagramODS","PolarisAPIEditCollection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.collectionId,e=a.postId;return function(a){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_REQUESTED"});c("InstagramODS").incr("web.unsaveFromCollection.attempt");return d("PolarisAPIEditCollection").editCollection({collectionId:b,postIdsToRemove:[e]}).then(function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_SUCCEEDED"}),c("InstagramODS").incr("web.unsaveFromCollection.success")})["catch"](function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_FAILED"}),c("InstagramODS").incr("web.unsaveFromCollection.failure")})}}g.removePostFromCollection=a}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){return function(f){c("polarisLogAction")("saveAttempt",b);f({postId:a,type:"SAVE_POST_REQUESTED"});return d("PolarisAPISavePost").savePost(a).then(function(){c("polarisLogAction")("saveSuccess",b),f({postId:a,type:"SAVE_POST_SUCCEEDED"}),e!=null&&d("PolarisAdsEngagementLogger").logAdSave(e)},function(){c("polarisLogAction")("saveFailure",b),f({postId:a,type:"SAVE_POST_FAILED"})})}}g.savePost=a}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","polarisLogAction","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){c("polarisLogAction")("unlikeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379198902,"749"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"UNLIKE_POST_REQUESTED"});return d("PolarisAPIUnlikePost").unlikePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdUnlike(b,e):d("PolarisEngagementLogger").logOrganicUnlike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379198902,"749")),f({postId:a,type:"UNLIKE_POST_SUCCEEDED"})},function(e){var g;g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l,m;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;m=(m=e.responseObject)==null?void 0:m.restriction_enrollment_data;e=(e=e.responseObject)==null?void 0:e.enforcement_transparency_instance_identifier;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,enforcement_transparency_instance_identifier:e,feedback_appeal_label:l,message:i,restriction_enrollment_data:m,source:b.source,sourceOfAction:"unlike_post",title:g,url:j}))}c("polarisLogAction")("unlikeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379198902,"749"),"request_failed");f({postId:a,type:"UNLIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.unlikePost=h}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","polarisLogAction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){return function(f){c("polarisLogAction")("unsaveAttempt",b);f({postId:a,type:"UNSAVE_POST_REQUESTED"});return d("PolarisAPIUnsavePost").unsavePost(a).then(function(){c("polarisLogAction")("unsaveSuccess",b),f({postId:a,type:"UNSAVE_POST_SUCCEEDED"}),e!=null&&d("PolarisAdsEngagementLogger").logAdUnsave(e)},function(){c("polarisLogAction")("unsaveFailure",b),f({postId:a,type:"UNSAVE_POST_FAILED"})})}}g.unsavePost=a}),98);
__d("PolarisPostCoauthorReviewOverlayFooterCTA.react",["fbt","FBLogger","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","JSResourceForInteraction","PolarisConfig","PolarisUserHoverCard.react","PolarisUserLink.react","err","gkx","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;var k=c("JSResourceForInteraction")("PolarisCoauthorReviewDialog.react").__setRef("PolarisPostCoauthorReviewOverlayFooterCTA.react");function a(a){var b,e=d("react-compiler-runtime").c(22),f=a.invitedCoauthorProducers,g=a.mediaId,i=a.mediaShortcode,l=a.productType,m=a.user;a=c("useIGDSLazyDialog")(k);var n=a[0];e[0]!==g||e[1]!==i||e[2]!==l||e[3]!==n||e[4]!==(m==null?void 0:m.username)?(a=function(){var a;n({mediaId:g!=null?g:"",mediaShortcode:i!=null?i:"",productType:l,username:(a=m==null?void 0:m.username)!=null?a:""})},e[0]=g,e[1]=i,e[2]=l,e[3]=n,e[4]=m==null?void 0:m.username,e[5]=a):a=e[5];a=a;if(m==null||m.username==null||g==null){var o=c("err")("PolarisPostCoauthorReviewOverlayFooterCTA requires a post user");c("FBLogger")("ig_web").catching(o);return null}var p=d("PolarisConfig").getViewerIdOrZero();o=f!=null&&f.some(function(a){return(a==null?void 0:a.id)===p});if(!o)return null;f=!m.isUnpublished;o=(o=m==null?void 0:m.username)!=null?o:"";b=(b=m==null?void 0:m.username)!=null?b:"";var q;e[6]!==b?(q=j.jsx(c("PolarisUserLink.react"),{username:b}),e[6]=b,e[7]=q):q=e[7];e[8]!==f||e[9]!==o||e[10]!==q||e[11]!==m.id?(b=j.jsx(c("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:f,userId:m.id,username:o,children:q}),e[8]=f,e[9]=o,e[10]=q,e[11]=m.id,e[12]=b):b=e[12];f=b;e[13]!==f?(o=h._(/*BTDS*/"{media_owner_username} invited you to be a collaborator on their post.",[h._param("media_owner_username",f)]),e[13]=f,e[14]=o):o=e[14];q=o;e[15]!==f?(b=h._(/*BTDS*/"{media_owner_username} invited you to be a collaborator on their reel.",[h._param("media_owner_username",f)]),e[15]=f,e[16]=b):b=e[16];o=b;e[17]!==a||e[18]!==q||e[19]!==l||e[20]!==o?(f=c("gkx")("4757")?j.jsxs(c("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:[j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:l===d("polarisGetPostFromGraphMediaInterface").PRODUCT_TYPE_CLIPS?o:q})}),j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:1,children:j.jsx(c("IGDSButton.react"),{display:"inline",label:h._(/*BTDS*/"Review"),onClick:a,variant:"tertiary"})})]}):null,e[17]=a,e[18]=q,e[19]=l,e[20]=o,e[21]=f):f=e[21];return f}g["default"]=a}),226);
__d("PolarisPostCommentInputPicker.react",["CometPlaceholder.react","PolarisUA","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react"),k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker.react"));function a(a){var b=d("react-compiler-runtime").c(17),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);a=c("usePolarisIsOnFeedPage")();var g=c("usePolarisIsOnAdsActivityPage")(),i;b[3]!==g||b[4]!==a||b[5]!==e?(i=(a||g)&&e.inModal!==!0&&d("PolarisUA").isDesktop(),b[3]=g,b[4]=a,b[5]=e,b[6]=i):i=b[6];g=i;b[7]!==g?(a={0:{className:"x1qjc9v5 x5ur3kl x13fuv20 x178xt8z x9f619 x78zum5 xdt5ytf x2lah0s xnnlda6 x1gslohp x1n2onr6"},1:{className:"x1qjc9v5 x9f619 x78zum5 xdt5ytf x2lah0s x1d6elog"}}[!!g<<0],b[7]=g,b[8]=a):a=b[8];b[9]!==a?(i=j.jsx("div",babelHelpers["extends"]({},a)),b[9]=a,b[10]=i):i=b[10];b[11]!==e||b[12]!==f?(g=j.jsx(k,babelHelpers["extends"]({},e,{ref:f})),b[11]=e,b[12]=f,b[13]=g):g=b[13];b[14]!==i||b[15]!==g?(a=j.jsx(c("CometPlaceholder.react"),{fallback:i,name:"PostCommentInputPicker",children:g}),b[14]=i,b[15]=g,b[16]=a):a=b[16];return a}g["default"]=a}),98);
__d("PolarisPostFeatures.react",["FBLogger","PolarisPostConstants","PolarisPostModalRenderingContext.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors.react","react-compiler-runtime","usePolarisDisplayProperties","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=[{overrides:{threeLineHeaderEnabled:!0},predicate:"isThreeLineHeaderEnabled"},{overrides:{avatarSize:(b=d("PolarisPostConstants")).AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isFeed"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isWidePhotoOnMediumScreen"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,hasThreadedSidebarComments:!0,showPostButton:!0},predicate:"isRichCommentsEnabled"},{overrides:{avatarSize:b.AVATAR_SIZE_SMALL,commentsAreStacked:!0,hasThreadedSidebarComments:!1,showPostButton:!0},predicate:"isStackedScreenSize"},{overrides:{hasPhotosOfYouOption:!0},predicate:"isViewerInUserTags"},{overrides:{showFollowButton:!1},predicate:"isFeedAndOwnerFollowedByViewer"},{overrides:{showFollowButton:!1},predicate:"isModalAndOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!1},predicate:"isOwnerPrivate"},{overrides:{canViewerProvideFeedback:!0},predicate:"isOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!0,showFollowButton:!1},predicate:"isOwnerTheViewer"},{overrides:{showFollowButton:!1},predicate:"isOwnerUnpublished"},{overrides:{showFollowButton:!1},predicate:"isBlocked"},{overrides:{showFollowButton:!1},predicate:"hasFollowHashtagInfo"},{overrides:{canViewerProvideFeedback:!1},predicate:"isLoggedOut"}],i={avatarSize:b.AVATAR_SIZE_LARGE,canViewerProvideFeedback:!0,commentsAreStacked:!1,hasPhotosOfYouOption:!1,hasThreadedSidebarComments:!1,showFollowButton:!0,showPostButton:!1,threeLineHeaderEnabled:!1};function j(a){var b=a.isInModal,c=a.owner,e=a.post,f=a.relationship,g=a.variant,h=a.viewer;a=a.viewportWidth;g=g===d("PolarisPostVariants").VARIANTS.feed;var i=Boolean(h),j=!h,k=(h==null?void 0:h.id)===c.id,l=f.followedByViewer.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,m=Boolean(e.followHashtagInfo),n=Boolean(e.location)&&(e.sponsors||[]).length>0;return{hasFollowHashtagInfo:m,isBlocked:f.hasBlockedViewer.state===d("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isFavorited:((m=f.favoritedByViewer)==null?void 0:m.state)===d("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeed:g,isFeedAndOwnerFollowedByViewer:g&&l,isLoggedIn:i,isLoggedOut:j,isModalAndOwnerFollowedByViewer:b&&l,isOwnerFollowedByViewer:l,isOwnerPrivate:Boolean(c.isPrivate),isOwnerTheViewer:k,isOwnerUnpublished:Boolean(c.isUnpublished),isRichCommentsEnabled:!0,isSidecar:(e.sidecarChildren||[]).length>0,isStackedScreenSize:a<d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isThreeLineHeaderEnabled:n,isViewerInUserTags:i&&(e.usertags||[]).some(function(a){return a.user.id===(h==null?void 0:h.id)}),isWidePhotoOnMediumScreen:Boolean(e.dimensions&&e.dimensions.width/e.dimensions.height>1.5&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&a<=d("PolarisPostConstants").MEDIUM_SCREEN_MAX)}}function k(a){var b=j(a);a=b.isBlocked;var d=b.isFavorited,e=b.isLoggedIn,f=b.isSidecar,g=b.isStackedScreenSize;return babelHelpers["extends"]({isBlocked:a,isFavorited:d,isLoggedIn:e,isSidecar:f,isStackedScreenSize:g},h.filter(function(a){a=a.predicate;var d=b[a];if(typeof d!=="boolean")throw c("FBLogger")("instagram_web").mustfixThrow("Could not find predicate %s",a);return d}).reduce(function(a,b){b=b.overrides;return babelHelpers["extends"]({},a,b)},i))}function a(a){var b=d("react-compiler-runtime").c(12),e=a.owner,f=a.path,g=a.post;a=a.variant;var h;b[0]!==e.id?(h=function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,e.id)},b[0]=e.id,b[1]=h):h=b[1];h=d("PolarisReactRedux.react").useSelector(h);var i=c("usePolarisViewer")(),j=c("usePolarisDisplayProperties")(),l=j.viewportHeight;j=j.viewportWidth;var m=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();m=m.isInModal;if(b[2]!==m||b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==h||b[7]!==a||b[8]!==i||b[9]!==l||b[10]!==j){var n={isInModal:m,isMobile:d("PolarisUA").isMobile(),owner:e,path:f,post:g,relationship:h,variant:a,viewer:i,viewportHeight:l,viewportWidth:j};n=k(n);b[2]=m;b[3]=e;b[4]=f;b[5]=g;b[6]=h;b[7]=a;b[8]=i;b[9]=l;b[10]=j;b[11]=n}else n=b[11];return n}g.getPostFeatures=k;g.usePolarisPostFeatures=a}),98);
__d("PolarisPostFastShareButton.react",["CometPlaceholder.react","IGDContactSearchDialogType.flow","IGDSMessagesOutlineIcon.react","IGDSecureShareSheetDialogPlaceholder.react","JSResourceForInteraction","PolarisIGCoreSVGIconButton.react","PolarisIsLoggedIn","PolarisPostModalContext.react","PolarisPostStrings","PolarisPostTypeUtils","PolarisShareSheetV3.entrypoint","QPLUserFlow","lazyLoadComponent","polarisLogAction","qex","qpl","react","react-compiler-runtime","useIGDSEntryPointDialog","useIGDSLazyDialog","useIGDSecureShareSheetInteractionLogger","useIGDShareSheetOnSubmitPost","usePolarisPost","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useState,k=c("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisPostFastShareButton.react"),l=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostFastShareButton.react"));function a(a){var b=d("react-compiler-runtime").c(45),e=a.analyticsContext,g=a["data-testid"],h=a.mediaId,o=a.mediaOverlayInfo,p=a.postId,q=a.sharingFrictionInfo,r=d("usePolarisPost").usePost(p,n),s=d("PolarisPostModalContext.react").useSetPostModal();a=c("useIGDSLazyDialog")(k,m);var t=a[0];p=a[1];a=j(!1);var u=a[0],v=a[1],w=(q==null?void 0:q.bloksAppUrl)!=null&&(q==null?void 0:q.shouldHaveSharingFriction)===!0;a=o!=null?o:r.mediaOverlayInfo;b[0]!==r||b[1]!==a?(o=babelHelpers["extends"]({},r,{mediaOverlayInfo:a}),b[0]=r,b[1]=a,b[2]=o):o=b[2];a=o;var x=a,y=c("useIGDShareSheetOnSubmitPost")(x);b[3]!==h?(o={routeProps:{mediaId:h}},b[3]=h,b[4]=o):o=b[4];a=c("useIGDSEntryPointDialog")(c("PolarisShareSheetV3.entrypoint"),o);var z=a[0],A=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();b[5]!==e||b[6]!==A||b[7]!==y||b[8]!==t||b[9]!==r||b[10]!==s||b[11]!==w||b[12]!==z||b[13]!==x?(o=function(){c("polarisLogAction")("shareClick",{source:e,type:d("PolarisPostTypeUtils").getPostType(r)});var a=c("qex")._("948")===!0;c("QPLUserFlow").start(c("qpl")._(379205139,"1723"),{annotations:{bool:{is_graphql:a},string:{source:e}}});if(!w){if(!d("PolarisIsLoggedIn").isLoggedIn())s("share");else{var b=c("uuidv4")();A("igd_sharesheet_open",{flowInstanceId:b,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:e});a?z({flowInstanceId:b}):t({flowInstanceId:b,onSubmit:y,post:x})}v(!0)}},b[5]=e,b[6]=A,b[7]=y,b[8]=t,b[9]=r,b[10]=s,b[11]=w,b[12]=z,b[13]=x,b[14]=o):o=b[14];a=o;b[15]!==e||b[16]!==A||b[17]!==y||b[18]!==t||b[19]!==x?(o=function(a){v(!1);a=c("uuidv4")();A("igd_sharesheet_open",{flowInstanceId:a,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:e});t({flowInstanceId:a,onSubmit:y,post:x})},b[15]=e,b[16]=A,b[17]=y,b[18]=t,b[19]=x,b[20]=o):o=b[20];o=o;var B;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(B=function(a){v(!1)},b[21]=B):B=b[21];B=B;var C;b[22]!==e||b[23]!==h?(C={media_id:h,module:e},b[22]=e,b[23]=h,b[24]=C):C=b[24];C=C;var D=C;b[25]!==o?(C={"ig.action.navigation.OpenShareSheet":o,"ig.action.navigation.ResumeStoryPlayback":B},b[25]=o,b[26]=C):C=b[26];B=C;var E=B;b[27]!==E||b[28]!==D||b[29]!==h||b[30]!==w||b[31]!==(q==null?void 0:q.bloksAppUrl)||b[32]!==u?(o=function(){return!w?null:u&&(q==null?void 0:q.bloksAppUrl)!=null&&i.jsx(c("CometPlaceholder.react"),{fallback:null,name:f.id,children:i.jsx(l,{actionOverrides:E,appId:q==null?void 0:q.bloksAppUrl,params:D},h)})},b[27]=E,b[28]=D,b[29]=h,b[30]=w,b[31]=q==null?void 0:q.bloksAppUrl,b[32]=u,b[33]=o):o=b[33];C=o;b[34]===Symbol["for"]("react.memo_cache_sentinel")?(B=i.jsx(c("IGDSMessagesOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-secondary-text",size:24}),b[34]=B):B=b[34];b[35]===Symbol["for"]("react.memo_cache_sentinel")?(o=i.jsx(c("IGDSMessagesOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-primary-text",size:24}),b[35]=o):o=b[35];b[36]!==g||b[37]!==a||b[38]!==p?(B=i.jsx(c("PolarisIGCoreSVGIconButton.react"),{"data-testid":void 0,hover:B,onClick:a,ref:p,children:o}),b[36]=g,b[37]=a,b[38]=p,b[39]=B):B=b[39];b[40]!==C?(o=C(),b[40]=C,b[41]=o):o=b[41];b[42]!==B||b[43]!==o?(g=i.jsxs(i.Fragment,{children:[B,o]}),b[42]=B,b[43]=o,b[44]=g):g=b[44];return g}function m(a){return i.jsx(c("IGDSecureShareSheetDialogPlaceholder.react"),{onClose:a})}m.displayName=m.name+" [from "+f.id+"]";function n(a){return a}g["default"]=a}),98);
__d("PolarisSaveButton.react",["IGDSIconButton.react","IGDSSavePanoFilledIcon.react","IGDSSavePanoOutlineIcon.react","JSResourceForInteraction","PolarisIGCoreAnchoredPopover.react","PolarisIGCorePressable.react","PolarisPostStrings","PolarisReactRedux.react","PolarisSavedCollectionPicker.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisUA","nullthrows","polarisSavedPostsSelectors","react","react-compiler-runtime","useIGDSLazyDialog","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k=24,l=-16,m=5;function a(a){var b=d("react-compiler-runtime").c(40),e=a.analyticsContext,f=a.collectionsPostSavedTo,g=a["data-testid"],h=a.isSaved,o=a.onMouseEnter,p=a.onSaveMedia,q=a.onSaveMediaToCollection,r=a.onShowToast,s=a.postId,t=a.thumbnailSrcSet,u=d("PolarisReactRedux.react").useDispatch(),v=c("usePolarisViewer")(),w=!v;b[0]!==w||b[1]!==v?(a=function(a){if(w)return null;var b=c("nullthrows")(v);return d("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(a,c("nullthrows")(b.id))},b[0]=w,b[1]=v,b[2]=a):a=b[2];var x=d("PolarisReactRedux.react").useSelector(a);b[3]!==w||b[4]!==v?(a=function(a){if(w)return null;var b=c("nullthrows")(v);return d("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(a,c("nullthrows")(b.id))},b[3]=w,b[4]=v,b[5]=a):a=b[5];var y=d("PolarisReactRedux.react").useSelector(a);b[6]!==x||b[7]!==y?(a=function(){if(x==null||y==null)return!1;return x.length>=m?!0:!y.moreAvailable&&x.length>1},b[6]=x,b[7]=y,b[8]=a):a=b[8];var z=a;b[9]!==w?(a=!w&&d("PolarisUA").isDesktop(),b[9]=w,b[10]=a):a=b[10];a=a;var A=z()&&a,B=function(a){a.preventDefault(),p(!h),!h===!0&&A&&(r!=null&&r(),F(!0))},C=function(){o==null||o();if(!w&&!z()&&!c("nullthrows")(y).isFetching){var a=c("nullthrows")(v);u(d("PolarisSavedPostsActionRequestNextSavedCollections").requestInitialSavedCollections(c("nullthrows")(a.id)))}F(!1)},D=j(!1),E=D[0];D=D[1];var F=D;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(D=c("JSResourceForInteraction")("PolarisCreateCollectionWithPostModal.react").__setRef("PolarisSaveButton.react"),b[11]=D):D=b[11];D=c("useIGDSLazyDialog")(D);var G=D[0];b[12]!==e||b[13]!==f||b[14]!==E||b[15]!==h||b[16]!==p||b[17]!==q||b[18]!==s||b[19]!==F||b[20]!==A||b[21]!==t||b[22]!==G?(D=A?i.jsx(c("PolarisSavedCollectionPicker.react"),{collectionsPostSavedTo:f,hidePopover:E,onSaveMedia:p,onSaveMediaToCollection:q,postId:s,postIsSaved:h,setHidePopover:F,setShowCreateCollectionModal:function(){return G({onSaveChange:p,postId:s,source:e,srcSet:t})}}):null,b[12]=e,b[13]=f,b[14]=E,b[15]=h,b[16]=p,b[17]=q,b[18]=s,b[19]=F,b[20]=A,b[21]=t,b[22]=G,b[23]=D):D=b[23];b[24]!==a||b[25]!==h?(f=h||!a?null:i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-secondary-text",size:k}),b[24]=a,b[25]=h,b[26]=f):f=b[26];b[27]!==h?(E=h?i.jsx(c("IGDSSavePanoFilledIcon.react"),{alt:d("PolarisPostStrings").UNSAVE_TEXT,color:"ig-primary-text",size:k}):i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-primary-text",size:k}),b[27]=h,b[28]=E):E=b[28];b[29]!==g||b[30]!==B||b[31]!==f||b[32]!==E?(q=i.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:f,onClick:B,padding:8,children:E}),b[29]=g,b[30]=B,b[31]=f,b[32]=E,b[33]=q):q=b[33];b[34]!==C||b[35]!==q?(a=i.jsx(c("PolarisIGCorePressable.react"),{onMouseEnter:C,onPress:n,children:q}),b[34]=C,b[35]=q,b[36]=a):a=b[36];b[37]!==a||b[38]!==D?(g=i.jsx(c("PolarisIGCoreAnchoredPopover.react"),{content:D,offsetTop:l,preferredPositionX:"center",preferredPositionY:"top",showOnHover:!0,children:a}),b[37]=a,b[38]=D,b[39]=g):g=b[39];return g}function n(){}g["default"]=a}),98);
__d("usePolarisMediaSaveToCollectionReduxHandler",["PolarisPostActionAddPostToCollection","PolarisPostActionRemovePostFromCollection","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(3),c=d("PolarisReactRedux.react").useDispatch(),e;b[0]!==c||b[1]!==a?(e=function(b,e){b?c(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:e,postId:a})):c(d("PolarisPostActionAddPostToCollection").addPostToCollection({collectionId:e,postIds:[a]}))},b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisPostFeedbackControls_DEPRECATED.react",["IGRouter_DO_NOT_USE.react","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLikeButton.react","PolarisPostFastShareButton.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSaveButton.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","polarisLogAction","polarisPostSelectors","react","react-compiler-runtime","stylex","usePolarisMediaSaveToCollectionReduxHandler","usePolarisNavigateToLogin","usePolarisPostShowSavedToastHandler","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l={likeButton:{display:"x1rg5ohu",marginInlineStart:"x1qfufaz",$$css:!0},likeButtonLeftAligned:{marginInlineEnd:"x1xegmmw",order:"x9ek82g",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"x1gslohp",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(75),e=a.analyticsContext,f=a.canViewerProvideFeedback,g=a.canViewerReshare,i=a.code,m=a.commentsDisabled,n=a.containerRef,o=a.customAlignment,p=a.hideShareButton,q=a.isBlocked,r=a.isSidecar,s=a.isVideo,t=a.likedByViewer,u=a.mediaId,v=a.onCommentClick,w=a.onLikeChange,x=a.onSaveChange,y=a.ownerIsPrivate,z=a.ownerUsername,A=a.postId,B=a.savedByViewer,C=a.sharingFrictionInfo,D=a.variant,E=a.xstyle,F=a.history,G=d("PolarisReactRedux.react").useDispatch();b[0]!==A?(a=function(a){return d("polarisPostSelectors").getPostById(a,A)},b[0]=A,b[1]=a):a=b[1];a=c("usePolarisSelector")(a);var H;b[2]!==A?(H=function(a){return d("polarisPostSelectors").getSavedCollectionsForPost(a,A)},b[2]=A,b[3]=H):H=b[3];H=c("usePolarisSelector")(H);var I=c("usePolarisPostShowSavedToastHandler")(),J=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),K=J.canUserSeePersistentCta,L=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);J=c("usePolarisNavigateToLogin")(i,z);var M=J[0],N=J[1];b[4]!==e||b[5]!==M||b[6]!==w?(z=function(a){d("PolarisIsLoggedIn").isLoggedIn()?w(a,"button"):(c("polarisLogAction")("likeAttempt",{source:e}),M("like"))},b[4]=e,b[5]=M,b[6]=w,b[7]=z):z=b[7];J=z;b[8]!==e||b[9]!==M||b[10]!==x?(z=function(a){d("PolarisIsLoggedIn").isLoggedIn()?x(a):(c("polarisLogAction")("saveAttempt",{source:e}),M("save"))},b[8]=e,b[9]=M,b[10]=x,b[11]=z):z=b[11];z=z;var O;b[12]!==N?(O=function(){d("PolarisIsLoggedIn").isLoggedIn()||N()},b[12]=N,b[13]=O):O=b[13];O=O;var P=c("usePolarisMediaSaveToCollectionReduxHandler")(A),Q;b[14]!==e||b[15]!==K||b[16]!==i||b[17]!==G||b[18]!==F||b[19]!==r||b[20]!==s||b[21]!==M||b[22]!==v||b[23]!==L||b[24]!==A||b[25]!==D?(Q=function(){var a=d("PolarisUA").isMobile();c("polarisLogAction")("commentButtonClicked",{isLoggedIn:d("PolarisIsLoggedIn").isLoggedIn(),source:e,type:s?"video":"photo"});if(d("PolarisIsLoggedIn").isLoggedIn())if(d("PolarisUA").isDesktop()&&D===d("PolarisPostVariants").VARIANTS.feed)G(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(A)),L(A),c("logPolarisPostModalOpen")(e,d("PolarisInteractionsLogger").getMediaTypeFromPost({isSidecar:r,isVideo:s}),"feed_comment");else if(D===d("PolarisPostVariants").VARIANTS.feed||a){a=c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((a={},a[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=K||void 0,a.shortcode=i,a));F.push(a)}else v();else M("comment")},b[14]=e,b[15]=K,b[16]=i,b[17]=G,b[18]=F,b[19]=r,b[20]=s,b[21]=M,b[22]=v,b[23]=L,b[24]=A,b[25]=D,b[26]=Q):Q=b[26];Q=Q;f=!d("PolarisIsLoggedIn").isLoggedIn()||f;if(q||!f)return null;q=y!==!0&&Boolean(g);f=o==="left";y=f&&l.likeButtonLeftAligned;b[27]!==y?(g=(h||(h=c("stylex")))(l.likeButton,y),b[27]=y,b[28]=g):g=b[28];b[29]!==J||b[30]!==O||b[31]!==t||b[32]!==g?(o=j.jsx(c("PolarisLikeButton.react"),{className:g,"data-testid":void 0,isLiked:t,onChange:J,onMouseEnter:O}),b[29]=J,b[30]=O,b[31]=t,b[32]=g,b[33]=o):o=b[33];b[34]!==m||b[35]!==Q||b[36]!==O||b[37]!==f?(y=!m&&j.jsx(c("PolarisCommentButton.react"),{className:{0:"x1rg5ohu",1:"x1rg5ohu x1xegmmw x182iqb8"}[!!f<<0],"data-testid":void 0,onClick:Q,onHoverStart:O}),b[34]=m,b[35]=Q,b[36]=O,b[37]=f,b[38]=y):y=b[38];b[39]!==e||b[40]!==p||b[41]!==f||b[42]!==u||b[43]!==A||b[44]!==q||b[45]!==C?(J=q&&p!==!0&&j.jsx("span",babelHelpers["extends"]({},{0:{className:"x1rg5ohu"},1:{className:"x1rg5ohu x1xegmmw x14yy4lh"}}[!!f<<0],{children:j.jsx(c("PolarisPostFastShareButton.react"),{analyticsContext:e,"data-testid":void 0,mediaId:u,mediaOverlayInfo:null,postId:A,sharingFrictionInfo:C})})),b[39]=e,b[40]=p,b[41]=f,b[42]=u,b[43]=A,b[44]=q,b[45]=C,b[46]=J):J=b[46];b[47]!==y||b[48]!==J||b[49]!==o?(t=j.jsxs(j.Fragment,{children:[o,y,J]}),b[47]=y,b[48]=J,b[49]=o,b[50]=t):t=b[50];g=t;b[51]!==E?(m=(h||(h=c("stylex"))).props(l.root,E),b[51]=E,b[52]=m):m=b[52];b[53]!==f?(Q={0:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr x1ows92d xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},1:{className:"x972fbf x10w94by x1qhh985 x14e42zd x1rg5ohu xln7xf2 xk390pu xdj266r xat24cr xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1xegmmw x1lziwak xo1ph6p"}}[!!f<<0],b[53]=f,b[54]=Q):Q=b[54];b[55]!==H?(p=H!=null?H:[],b[55]=H,b[56]=p):p=b[56];b[57]!==e||b[58]!==z||b[59]!==O||b[60]!==P||b[61]!==I||b[62]!==a.displayResources||b[63]!==A||b[64]!==B||b[65]!==p?(u=j.jsx(c("PolarisSaveButton.react"),{analyticsContext:e,collectionsPostSavedTo:p,"data-testid":void 0,isSaved:B,onMouseEnter:O,onSaveMedia:z,onSaveMediaToCollection:P,onShowToast:I,postId:A,thumbnailSrcSet:a.displayResources}),b[57]=e,b[58]=z,b[59]=O,b[60]=P,b[61]=I,b[62]=a.displayResources,b[63]=A,b[64]=B,b[65]=p,b[66]=u):u=b[66];b[67]!==Q||b[68]!==u?(q=j.jsx("span",babelHelpers["extends"]({},Q,{children:u})),b[67]=Q,b[68]=u,b[69]=q):q=b[69];b[70]!==g||b[71]!==n||b[72]!==m||b[73]!==q?(C=j.jsxs("section",babelHelpers["extends"]({},m,{ref:n,children:[g,q]})),b[70]=g,b[71]=n,b[72]=m,b[73]=q,b[74]=C):C=b[74];return C}e=d("IGRouter_DO_NOT_USE.react").withIGRouter(a);g["default"]=e}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","IGDSDivider.react","PolarisBoostMultiBoostUtils.react","PolarisBoostUtils.react","PolarisPostAboveFooterSection.react","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={marginTop0:{marginTop:"xdj266r",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(28),e=a.analyticsContext,f=a.bloksAppId,g=a.boostedStatus,h=a.boostUnavailableIdentifier,k=a.boostUnavailableReason,l=a.className,m=a.hasViewInsights,n=a.mediaId,o=a.productType;a=a.viewerId;a=d("PolarisBoostUtils.react").useIsEligibleForBoost(g!=null&&a!=null);var p;b[0]!==h||b[1]!==g?(p=d("PolarisBoostMultiBoostUtils.react").isEligibleForMultiBoostWebWithinBoostFlow(g,h),b[0]=h,b[1]=g,b[2]=p):p=b[2];p=p;if(!m&&!a)return null;var q=m?"between":"end",r=m?j.marginTop0:j.marginTop16,s;b[3]!==f||b[4]!==m||b[5]!==n?(s=m&&i.jsx(c("PolarisPostViewInsights.react"),{bloksAppId:f,mediaId:n}),b[3]=f,b[4]=m,b[5]=n,b[6]=s):s=b[6];b[7]!==e||b[8]!==h||b[9]!==k||b[10]!==g||b[11]!==n||b[12]!==o||b[13]!==a?(f=a&&g!=null&&o!=="ad"&&i.jsx(c("PolarisPostBoostButton.react"),{analyticsContext:e,boostedStatus:g,boostUnavailableIdentifier:h,boostUnavailableReason:k,mediaId:n,productType:c("nullthrows")(o)}),b[7]=e,b[8]=h,b[9]=k,b[10]=g,b[11]=n,b[12]=o,b[13]=a,b[14]=f):f=b[14];b[15]!==q||b[16]!==r||b[17]!==s||b[18]!==f?(m=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:q,paddingX:4,paddingY:3,position:"relative",xstyle:r,children:[s,f]}),b[15]=q,b[16]=r,b[17]=s,b[18]=f,b[19]=m):m=b[19];h=m;b[20]!==e||b[21]!==g||b[22]!==p||b[23]!==h?(k=p?i.jsxs(c("IGDSBox.react"),{children:[i.jsx(c("PolarisPostAboveFooterSection.react"),{analyticsContext:e,boostedStatus:g}),i.jsx(c("IGDSBox.react"),{marginStart:4,width:"90%",children:i.jsx(c("IGDSDivider.react"),{})}),h]}):h,b[20]=e,b[21]=g,b[22]=p,b[23]=h,b[24]=k):k=b[24];b[25]!==l||b[26]!==k?(n=i.jsx("section",{className:l,children:k}),b[25]=l,b[26]=k,b[27]=n):n=b[27];return n}g["default"]=a}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.postRemoveComments}b=d("reselect").createSelector(a,function(a){a=a.isVisible;return a});g.getPostRemoveCommentsIsVisible=b}),98);
__d("PolarisThreadedComments.react",["cx","IGDSBox.react","IGDSDivider.react","PolarisBatchDOM","PolarisCommentCover.react","PolarisCommentThread.react","PolarisCommentsSectionText.react","PolarisCommentsSortContext.react","PolarisCommentsStrings","PolarisConfig","PolarisFacebookCommentCountSheet.react","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisLinkBuilder","PolarisNoCommentsPlaceholder.react","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostCommentsContainerPlaceholder.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSortCommentsUtil","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","cr:1342","isStringNullOrEmpty","nullthrows","polarisCommentReducer","polarisUserSelectors","react","react-compiler-runtime","requestIdleCallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={commentsCover:{marginInlineStart:"x1diwwjn",$$css:!0}};function l(a,b){var c=b.getBoundingClientRect().top;c=c-b.scrollTop;b=a.getBoundingClientRect().top;return b-c}function m(a){var b=d("react-compiler-runtime").c(22),e=a.innerRef,f=a.isPermalinkedComment,g=a.onHidePermalinkReply,h=a.parentComment,i=a.parentProps,k=a.parentState,l=a.permalinkedReplyId,m=a.permalinkedReplyNodeRef;a=a.replyPagerNodeRef;var n=i.analyticsContext,o=i.code,p=i.commentingDisabledForViewer,q=i.customIndentationPadding,r=i.handleDeleteCommentClick,s=i.hideUserAvatar,t=i.id,u=i.isDeletingComments,v=i.loggedIn,w=i.onLikeCountClick,x=i.ownerId,y=i.reducedAvatarMargin;i=i.showCommentOptionsInline;k=k.commentPermalinkAnimEnabled;var z;b[0]!==n||b[1]!==o||b[2]!==k||b[3]!==p||b[4]!==q||b[5]!==r||b[6]!==s||b[7]!==t||b[8]!==e||b[9]!==u||b[10]!==f||b[11]!==v||b[12]!==g||b[13]!==w||b[14]!==x||b[15]!==h||b[16]!==l||b[17]!==m||b[18]!==y||b[19]!==a||b[20]!==i?(z=j.jsx(c("PolarisCommentThread.react"),{analyticsContext:n,code:o,commentingDisabledForViewer:p,customIndentationPadding:q,hideUserAvatar:s,innerRef:e,isPermalinkedComment:f,loggedIn:v,onDeleteCommentClick:r,onHidePermalinkReply:g,onLikeCountClick:w,parentComment:h,permalinkedReplyAnimating:k,permalinkedReplyId:l,permalinkedReplyNodeRef:m,postId:t,postOwnerId:x,reducedAvatarMargin:y,replyPagerNodeRef:a,showCommentOptionsInline:i,showRemoveIcon:u}),b[0]=n,b[1]=o,b[2]=k,b[3]=p,b[4]=q,b[5]=r,b[6]=s,b[7]=t,b[8]=e,b[9]=u,b[10]=f,b[11]=v,b[12]=g,b[13]=w,b[14]=x,b[15]=h,b[16]=l,b[17]=m,b[18]=y,b[19]=a,b[20]=i,b[21]=z):z=b[21];return z}f=function(a){function e(){var b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(b=a.call.apply(a,[this].concat(e))||this,b.$2=j.createRef(),b.$3=j.createRef(),b.$4=j.createRef(),b.$5=[],b.state={commentPermalinkAnimEnabled:!1,commentsSortOrder:b.props.sortOrder,isAutoscrollingCommentPermalink:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},b.$13=function(a){a=b.props;var c=a.analyticsContext,e=a.code,f=a.hasRankedComments,g=a.id,h=a.loadMore,i=a.mediaType;a=a.ownerId;h(g,f,e);d("PolarisInteractionsLogger").logInteractionAction({containerModule:c,eventName:"instagram_child_comments_load_more",mediaAuthorId:a,mediaId:g,mediaType:i})},b.$14=function(){b.setState({showHiddenComments:!0})},b.$15=function(a){b.setState({commentsSortOrder:a})},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.$6=function(){return this.$2.current||null};f.$7=function(){return this.$3.current||null};f.$8=function(){return this.$4.current||null};f.$9=function(a,b,e,f){var g=this;this.setState({commentPermalinkAnimEnabled:!1,isAutoscrollingCommentPermalink:!0});d("PolarisBatchDOM").measure(function(){var h,i=l(b,a);if(e){var j=l(e,a),k=e.getBoundingClientRect().height,m=a.getBoundingClientRect().height;m=Math.max(m-k,0);h=Math.max(i,j-m)}else h=i;d("PolarisBatchDOM").mutate(function(){a.scrollTop=h;var b=function(){g.setState({commentPermalinkAnimEnabled:!0,isAutoscrollingCommentPermalink:!1})};f?c("requestIdleCallback")(function(){b()}):b()})})};f.componentDidMount=function(){var a=this.$1;if(!a)return;var b=this.$6();if(b)this.$9(a,b,this.$7(),!0);else if(!this.props.hasRankedComments){if(d("PolarisUA").isDesktop())return;a.scrollTop=a.scrollHeight}};f.componentDidUpdate=function(a,b,c){var d=this.$1;if(!d)return;var e=this.$6();if(e)if(this.state.isAutoscrollingCommentPermalink)return;else if(this.props.permalinkedCommentId!==a.permalinkedCommentId||this.props.permalinkedReplyId!==a.permalinkedReplyId||this.props.permalinkedComment!==a.permalinkedComment){this.$9(d,e,this.$7(),!1);return}this.$10(a,b,c,d,e)};f.$10=function(a,b,c,e,f){var g=this,h=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight;c=c||{};var i=c.newCommentCachedOffset,j=a.id===this.props.id&&a.permalinkedCommentId===this.props.permalinkedCommentId&&a.permalinkedReplyId===this.props.permalinkedReplyId&&b.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,k=this.$8();h&&!a.commentWasReply&&(this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}));d("PolarisBatchDOM").measure(function(){var b=null;h&&!a.commentWasReply&&!g.props.hasRankedComments?b=e.scrollHeight:i!=null?b=e.scrollHeight-i:j&&f&&k&&(b=g.$11(e,f,k));d("PolarisBatchDOM").mutate(function(){b!=null&&(e.scrollTop=b)})})};f.$11=function(a,b,c){c=l(c,a);b=l(b,a);var d=6;c=Math.max(c-d,b);return a.scrollTop>c?c:null};f.getSnapshotBeforeUpdate=function(a,b){b=a.comments;var c=this.props.comments,d=this.$1;return d&&a.id===this.props.id&&c.count()>b.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:d.scrollHeight-d.scrollTop}:null};f.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})};f.render=function(){var a=this,e=this.props,f=e.analyticsContext,g=e.captionAndTitle,h=e.captionCreatedAt,i=e.captionIsEdited,l=e.className,n=e.comments,o=e.commentsDisabled,p=e.commentsHasNextPage,q=e.communityNoteComponent,r=e.disableScroll,s=e.fbCommentCount,t=e.hasCoveredComments,u=e.hasRankedComments,v=e.hideUserAvatar,w=e.id,x=e.initialCommentsLoading,y=e.isOwnerVerified,z=e.loggedIn,A=e.mediaType,B=e.ownerId,C=e.permalinkedComment,D=e.permalinkedReplyId,E=e.postedAt,F=e.reducedAvatarMargin,G=e.requestComments,H=e.showCommentOptionsInline;e=e.showPagerBelowComments;p=o!==!0&&Boolean(p);var I=x&&n.size===0,J=s!=null&&s!==0&&A===2;if((g==null||g==="")&&n.count()===0&&!p&&!I&&!J)return d("PolarisUA").isDesktop()?j.jsxs("div",{className:l,children:[q,j.jsx(c("PolarisNoCommentsPlaceholder.react"),{})]}):j.jsx("div",{className:l});var K=null,L=null,M=null;if(!I&&o!==!0){K=C?j.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!D?" _a9yl":""),ref:this.$2,children:j.jsx(m,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return a.$12()},parentComment:C,parentProps:this.props,parentState:this.state,permalinkedReplyId:D,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null;var N=function(){var b;return(b=a.props.comments.findIndex(function(a){return a.isAuthorVerified===!1}))!=null?b:-1};L=n.map(function(b,e){if(C&&b.id===C.id)return null;return b.isCovered===!0?null:j.jsxs(c("IGDSBox.react"),{marginBottom:4,children:[j.jsx(m,{innerRef:function(b){return a.$5[e]=b},parentComment:b,parentProps:a.props,parentState:a.state},e),a.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&N()===e+1&&j.jsx(c("IGDSDivider.react"),{})]},e)}).filter(function(a){return!!a});M=n.filter(function(a){return a.isCovered===!0}).map(function(b,c){return j.jsx(m,{innerRef:function(b){return a.$5[c]=b},parentComment:b,parentProps:a.props,parentState:a.state},c)})}o=null;!c("isStringNullOrEmpty")(g)?o=j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisPostComment.react"),{analyticsContext:f,captionCreatedAt:h,className:(d("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:B,communityNoteComponent:q,hideUserAvatar:!!v,isAuthorVerified:!!y,isCaption:!0,isEdited:!!i,isRestrictedPending:!1,loggedIn:z,mediaType:A,postedAt:c("nullthrows")(E),postId:w,postOwnerId:B,reducedAvatarMargin:F,showCommentOptionsInline:H,showRemoveIcon:!1,showRichComment:!0,text:g,variant:d("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"),q!=null&&j.jsx(c("IGDSDivider.react"),{})]}):q!=null&&(o=j.jsxs(j.Fragment,{children:[q,j.jsx(c("IGDSDivider.react"),{})]}));D=p&&this.renderLoadMoreCommentsLink(K!=null);f=u||e===!0;h=function(a){return G(w,void 0,a)};v=d("PolarisSortCommentsUtil").showCommentsSortOptions(this.props.sortOrder,n.size);y=function(){return n.some(function(a){return a.isAuthorVerified===!0})};i=this.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&!y();z=j.jsx(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?4:0,marginStart:d("PolarisUA").isMobile()?4:0,children:j.jsx(c("IGDSDivider.react"),{})});return j.jsx(d("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:this.state.commentsSortOrder,setCommentsSortOrder:this.$15,children:j.jsx("div",{className:l,children:j.jsxs("ul",{className:"_a9z6"+(r?" _a9z7":"")+(K!==null?" _a9z8":"")+(o===null?" _a9z9":"")+(!D||f?" _a9za":""),ref:function(b){return a.$1=b},children:[o,j.jsxs(c("IGDSBox.react"),{direction:"column",display:"flex",children:[v&&b("cr:1342")!=null&&j.jsx(c("IGDSBox.react"),{marginStart:12,marginTop:2,children:j.jsx(b("cr:1342"),{commentsCount:n.size,fetchComments:h})}),K]}),I?j.jsx(c("PolarisPostCommentsContainerPlaceholder.react"),{}):null,!f&&D,j.jsxs(c("IGDSBox.react"),{children:[x?j.jsx(c("PolarisPostCommentsContainerPlaceholder.react"),{}):j.jsxs(c("IGDSBox.react"),{children:[i&&j.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:z,marginStart:12,text:d("PolarisSortCommentsUtil").NO_META_VERIFIED_COMMENTS}),j.jsxs(c("IGDSBox.react"),{children:[!d("PolarisConfig").isLoggedOutFRXEligible()&&L,f&&D,!D&&t&&!this.state.showHiddenComments&&j.jsx(c("PolarisCommentCover.react"),{onClick:this.$14,postId:w,postOwnerId:B,xstyle:k.commentsCover}),this.state.showHiddenComments&&j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:z,marginStart:12,text:d("PolarisCommentsStrings").COVERED_COMMENTS}),M]})]})]}),J&&j.jsx(c("PolarisFacebookCommentCountSheet.react"),{fbCommentCount:s,marginStart:4})]})]})})})};f.renderLoadMoreCommentsLink=function(a){var b=this.props,e=b.code,f=b.commentsIsFetching;b=b.hasRankedComments;e=d("PolarisLinkBuilder").buildMediaCommentsLink(c("nullthrows")(e),d("PolarisUA").isMobile());var g;b?(b=0,g=0):a?(b=2,g=2):(b=0,g=4);return j.jsx("li",{children:j.jsx(c("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:f,handleLoadMoreCommentsClick:this.$13,marginBottom:g,marginTop:b,url:e})})};return e}(j.PureComponent);function a(a,b){var c,e,f=b.id,g=b.ownerId;b=b.permalinkedCommentId;var h=d("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(a,f),i=d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,f);c=(c=a.threadedComments.parentByPostId[f])!=null?c:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;var j=c.count;c=c.pagination;e=(e=a.pendingComments[f])!=null?e:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT;var k=null;!h&&b!=null&&b!==""&&(k=a.comments.byId.get(b));b=(f=(b=a.threadedComments.parentByPostId[f])==null?void 0:b.sortOrder)!=null?f:d("PolarisSortCommentsUtil").CommentsOptionValues.TOP;return{comments:i,commentSaveIsInFlight:e.committing,commentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(c),commentsIsFetching:d("PolarisPaginationUtils").isFetching(c),commentsTotalCount:j!=null?j:0,commentWasReply:e.repliedToCommentId!=null,hasCoveredComments:i.some(function(a){return a.isCovered===!0}),initialCommentsLoading:h,isOwnerVerified:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isVerified,permalinkedComment:k,sortOrder:b}}function e(a){return{loadMore:function(b,c,e){d("PolarisIsLoggedIn").isLoggedIn()&&a(d("PolarisThreadedCommentActions").requestNextParentCommentPageV2(b,c))},requestComments:function(b,c,e){a(d("PolarisThreadedCommentActions").requestInitialComments(b,c,e))}}}h=d("PolarisReactRedux.react").connect(a,e)(f);g["default"]=h}),98);
__d("PolarisThreadedCommentsLoader.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","IGDSBox.react","IGDSSpinner.react","PolarisReactRedux.react","PolarisThreadedCommentActions","react","react-compiler-runtime","usePolarisGetQuerySetup"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(2),e=a.children,f=a.initialCommentsQuery;a=a.postId;var g;b[0]!==a?(g=d("PolarisThreadedCommentActions").setupPostComments(a),b[0]=a,b[1]=g):g=b[1];c("usePolarisGetQuerySetup")(f,g);return e}function a(a){var b=d("react-compiler-runtime").c(11),e=a.children,g=a.initialCommentsQuery,h=a.postId,l=d("PolarisReactRedux.react").useDispatch();b[0]!==l||b[1]!==h?(a=function(a){l(d("PolarisThreadedCommentActions").initialCommentsError(h)),c("FBLogger")("ig_web").catching(a)},b[0]=l,b[1]=h,b[2]=a):a=b[2];a=a;var m;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(m=i.jsx(c("IGDSBox.react"),{direction:"row",justifyContent:"center",position:"relative",children:i.jsx(c("IGDSSpinner.react"),{})}),b[3]=m):m=b[3];b[4]!==e||b[5]!==g||b[6]!==h?(m=i.jsx(c("CometPlaceholder.react"),{fallback:m,name:f.id,children:i.jsx(j,{initialCommentsQuery:g,postId:h,children:e})}),b[4]=e,b[5]=g,b[6]=h,b[7]=m):m=b[7];b[8]!==a||b[9]!==m?(e=i.jsx(c("CometErrorBoundary.react"),{fallback:k,onError:a,children:m}),b[8]=a,b[9]=m,b[10]=e):e=b[10];return e}function k(){return null}g["default"]=a}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedComments.react","PolarisThreadedCommentsLoader.react","PolarisUA","nullthrows","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={commentToDeleteId:null,showDeleteCommentModal:!1},b.$1=function(a){b.setState({commentToDeleteId:a,showDeleteCommentModal:!0})},b.$2=function(){b.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.$3=function(){return this.props.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile()};e.render=function(){var a=this.props,b=a.analyticsContext,d=a.caption,e=a.captionCreatedAt,f=a.captionIsEdited,g=a.className,h=a.code,j=a.commentingDisabledForViewer,k=a.commentsDisabled,l=a.communityNoteComponent,m=a.customIndentationPadding,n=a.fbCommentCount,o=a.hasRankedComments,p=a.hideUserAvatar,q=a.id,r=a.initialCommentsQuery,s=a.mediaType,t=a.onLikeCountClick,u=a.ownerId,v=a.permalinkedCommentId,w=a.permalinkedReplyId,x=a.postedAt,y=a.reducedAvatarMargin,z=a.showCommentOptionsInline,A=a.showRemoveCommentIcons;a=a.viewerId;a=a!=null;d=i.jsx(c("PolarisThreadedComments.react"),{analyticsContext:b,captionAndTitle:d,captionCreatedAt:e,captionIsEdited:f,className:g,code:h,commentingDisabledForViewer:j,commentsDisabled:k,communityNoteComponent:l,customIndentationPadding:m,fbCommentCount:n,handleDeleteCommentClick:this.$1,hasRankedComments:o,hideUserAvatar:!!p,id:q,isDeletingComments:A,loggedIn:a,mediaType:s,onLikeCountClick:t,ownerId:u,permalinkedCommentId:v,permalinkedReplyId:w,postedAt:x,reducedAvatarMargin:y,showCommentOptionsInline:z});r!=null&&(d=i.jsx(c("PolarisThreadedCommentsLoader.react"),{initialCommentsQuery:r,postId:q,children:d}));return i.jsxs(i.Fragment,{children:[d,this.state.showDeleteCommentModal&&i.jsx(c("PolarisDeleteCommentModal.react"),{analyticsContext:b,commentId:c("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:q})]})};return b}(i.PureComponent);b.defaultProps={variant:d("PolarisPostVariants").VARIANTS.flexible};function a(a){return{showRemoveCommentIcons:d("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(a),viewerId:(a=d("polarisUserSelectors").getViewer__DEPRECATED(a))==null?void 0:a.id}}e=d("PolarisReactRedux.react").connect(a)(b);g["default"]=e}),98);
__d("PolarisPostFastPreviewCaption.react",["IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisPostFastCrawlerComment.react","PolarisUA","nullthrows","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.enableTruncation,f=a.inModal;a=a.postId;var g=c("usePolarisIsOnFeedPage")();g=g&&f!==!0&&d("PolarisUA").isDesktop();f=d("usePolarisPost").usePostAndOwner(a,o);var h=d("usePolarisPost").usePostAndOwner(a,n),p=d("usePolarisPost").usePostAndOwner(a,m),q=d("usePolarisPost").usePostAndOwner(a,l),r=d("usePolarisPost").usePost(a,k);a=d("usePolarisPost").usePost(a,j);a=d("polarisCommentSelectors.react").useCommentTranslation(a);if(r==null||r==="")return null;(a==null?void 0:a.showTranslatedText)===!0&&a.translatedText!=null&&(r=a.translatedText);a=g?2:1;b[0]!==e||b[1]!==q||b[2]!==p||b[3]!==r||b[4]!==f||b[5]!==h?(g=e===!0?i.jsx(c("PolarisPostFastCrawlerComment.react"),{isAuthorUnpublished:q,isAuthorVerified:p,text:r,userId:f,username:h}):i.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorUnpublished:q,isAuthorVerified:p,isCaption:!0,text:r,userId:f,username:h}),b[0]=e,b[1]=q,b[2]=p,b[3]=r,b[4]=f,b[5]=h,b[6]=g):g=b[6];b[7]!==a||b[8]!==g?(e=i.jsx(c("IGDSBox.react"),{marginBottom:a,position:"relative",children:g}),b[7]=a,b[8]=g,b[9]=e):e=b[9];return e}function j(a){return a.captionCommentId}function k(a){return a.caption}function l(a,b){return b.isUnpublished}function m(a,b){return b.isVerified}function n(a,b){return c("nullthrows")(b.username)}function o(a,b){return c("nullthrows")(b.id)}g["default"]=a}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux.react","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){var e=d("react-compiler-runtime").c(8),f=d("usePolarisComment").useComment(a,l),g=d("usePolarisPost").usePost(b,d("PolarisInteractionsLogger").getMediaTypeFromPost),h=d("usePolarisPost").usePostAndOwner(b,k),i=c("usePolarisAnalyticsContext")();if(e[0]===Symbol["for"]("react.memo_cache_sentinel")){var j;j=(j=d("PolarisConfig").getViewerId())!=null?j:"";e[0]=j}else j=e[0];e[1]!==i||e[2]!==f||e[3]!==a||e[4]!==b||e[5]!==h||e[6]!==g?(j={commentAuthorId:f,commentId:a,containerModule:i,mediaAuthorId:h,mediaId:b,mediaType:g,userId:j},e[1]=i,e[2]=f,e[3]=a,e[4]=b,e[5]=h,e[6]=g,e[7]=j):j=e[7];return j}function k(a,b){return b.id}function l(a){return a.id}function a(a){var b=d("react-compiler-runtime").c(7),e=a.color,f=a.commentId;a=a.postId;var g=d("PolarisReactRedux.react").useDispatch(),h=j(f,a);a=d("usePolarisComment").useComment(f,m);b[0]!==g||b[1]!==h?(f=function(a){a?g(d("PolarisCommentActions").likeComment(h)):g(d("PolarisCommentActions").unlikeComment(h))},b[0]=g,b[1]=h,b[2]=f):f=b[2];f=f;var k;b[3]!==e||b[4]!==a||b[5]!==f?(k=i.jsx(c("PolarisLikeButton.react"),{color:e,isLiked:a,onChange:f,padding:0,size:12}),b[3]=e,b[4]=a,b[5]=f,b[6]=k):k=b[6];return k}function m(a){return a.likedByViewer}b=i.memo(a);g["default"]=b}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","react-compiler-runtime","usePolarisComment"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=d("react-compiler-runtime").c(5);a=a.commentId;var f=(b=d("usePolarisComment")).useCommentAndOwner(a,m),g=b.useCommentAndOwner(a,l),h=b.useComment(a,k);b=b.useComment(a,j);e[0]!==b||e[1]!==h||e[2]!==f||e[3]!==g?(a=i.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:b,text:h,userId:f,username:g}),e[0]=b,e[1]=h,e[2]=f,e[3]=g,e[4]=a):a=e[4];return a}function j(a){return a.isAuthorVerified}function k(a){return a.text}function l(a,b){return c("nullthrows")(b.username)}function m(a,b){return c("nullthrows")(b.id)}g["default"]=a}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisIsLoggedIn","PolarisReactRedux.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","nullthrows","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisPost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext;function a(a){var b=d("react-compiler-runtime").c(26),e=a.postId;a=d("usePolarisPost").usePost(e,m);var f=d("usePolarisPost").usePost(e,l),g=d("usePolarisPost").usePost(e,d("PolarisInteractionsLogger").getMediaTypeFromPost),i=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),n=i.canUserSeePersistentCta;b[0]!==n?(i=function(a){var b;return c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((b={},b[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=n||void 0,b.shortcode=c("nullthrows")(a.code),b))},b[0]=n,b[1]=i):i=b[1];var o=d("usePolarisPost").usePost(e,i),p=d("PolarisReactRedux.react").useDispatch(),q=c("usePolarisAnalyticsContext")(),r=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=!d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isMobile(),b[2]=i):i=b[2];var s=i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=s||d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isDesktop(),b[3]=i):i=b[3];i=i;var t=c("usePolarisLoggedOutBlockingEntryPointDialog")(),u=t[0],v=t[1];t=c("usePolarisLoggedOutIntentEntryPointDialog")();var w=t[0],x=t[1];b[4]!==v||b[5]!==x?(t=function(){d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?x==null||x(!0):v==null||v(!0)},b[4]=v,b[5]=x,b[6]=t):t=b[6];t=t;var y;b[7]!==q||b[8]!==p||b[9]!==r||b[10]!==u||b[11]!==w||b[12]!==f||b[13]!==e||b[14]!==g?(y=function(a,b){if(d("PolarisIsLoggedIn").isLoggedIn())d("PolarisInteractionsLogger").logInteractionAction({containerModule:q,eventName:"instagram_organic_comment_view_all",mediaAuthorId:f,mediaId:e,mediaType:g}),d("PolarisUA").isDesktop()&&(a.preventDefault(),p(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(e)),c("logPolarisPostModalOpen")(q,g,"feed_view_all_comments"),r(e));else if(s){a.preventDefault();a={contentReportingLink:e,nextUrl:b,source:"post_comment_view_all"};d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?w==null||w(a):u==null||u(a)}},b[7]=q,b[8]=p,b[9]=r,b[10]=u,b[11]=w,b[12]=f,b[13]=e,b[14]=g,b[15]=y):y=b[15];var z=y;b[16]!==z||b[17]!==o?(y=function(a){return z(a,o)},b[16]=z,b[17]=o,b[18]=y):y=b[18];var A;b[19]!==a?(A=j.jsx(c("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:a===1?h._(/*BTDS*/"View 1 comment"):h._(/*BTDS*/"View all {count} comments",[h._param("count",j.jsx(c("PolarisBigNumber.react"),{value:a}))])}),b[19]=a,b[20]=A):A=b[20];b[21]!==t||b[22]!==y||b[23]!==A||b[24]!==o?(a=j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:o,onClick:y,onMouseEnter:t,shouldOpenModal:i,children:A}),b[21]=t,b[22]=y,b[23]=A,b[24]=o,b[25]=a):a=b[25];return a}function l(a){return c("nullthrows")((a=a.owner)==null?void 0:a.id)}function m(a){return a.numComments||0}g["default"]=a}),226);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisIsLoggedIn","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux.react","PolarisThreadedCommentSelectors","PolarisUA","isTruthy","polarisCommentSelectors.react","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function k(a){var b=d("react-compiler-runtime").c(13),e=a.postId;a=a.previewCommentIds;var f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")(),h;b[0]!==g||b[1]!==f?(h=(f||g)&&d("PolarisUA").isDesktop(),b[0]=g,b[1]=f,b[2]=h):h=b[2];g=h;var j=g;if(d("PolarisConfig").isLoggedOutFRXEligible())return null;if(a.length>0){f=g?1:0;if(b[3]!==j||b[4]!==e||b[5]!==a){b[7]!==j||b[8]!==e?(h=function(a){return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[i.jsx(c("PolarisPostFastPreviewComment.react"),{commentId:a}),d("PolarisIsLoggedIn").isLoggedIn()&&i.jsx(c("IGDSBox.react"),{marginStart:j?2:0,position:"relative",children:i.jsx(c("PolarisPostFastCommentLikeButton.react"),{color:j?"ig-secondary-icon":void 0,commentId:a,postId:e})})]},a)},b[7]=j,b[8]=e,b[9]=h):h=b[9];g=a.map(h);b[3]=j;b[4]=e;b[5]=a;b[6]=g}else g=b[6];b[10]!==f||b[11]!==g?(h=i.jsx(c("IGDSBox.react"),{marginBottom:f,position:"relative",children:g}),b[10]=f,b[11]=g,b[12]=h):h=b[12];return h}return null}function a(a){var b=a.inModal,e=a.postId;a=a.shouldIncreaseCommentPreviews;a=a===void 0?!1:a;var f=c("usePolarisIsOnFeedPage")();f=f&&b!==!0&&d("PolarisUA").isDesktop();var g=c("isTruthy")(a);b=d("usePolarisPost").usePost(e,function(a){return!a.commentsDisabled});var h=d("PolarisReactRedux.react").useSelector(function(a){return g?d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,e).toArray():d("polarisCommentSelectors.react").getPreviewCommentsForPostId(a,e)});a=j(function(){return h.map(function(a){return a.id})},[h]);var l=d("usePolarisPost").usePost(e,function(a){return(a=a.numComments)!=null?a:0}),m=l>a.length;if(!b||l<=0)return null;b=!d("PolarisIsLoggedIn").isLoggedIn()&&a.length>0&&!g;return i.jsxs(i.Fragment,{children:[m&&i.jsx(c("IGDSBox.react"),{alignItems:"start",marginBottom:f?2:1,position:"relative",children:i.jsx(c("PolarisPostFastViewAllComments.react"),{postId:e})}),i.jsx(k,{postId:e,previewCommentIds:b?a.slice(-1):a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostComments.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(34),g=c("usePolarisIsOnFeedPage")(),h=c("usePolarisIsOnAdsActivityPage")(),j;e[0]!==h||e[1]!==g?(j=(g||h)&&d("PolarisUA").isDesktop(),e[0]=h,e[1]=g,e[2]=j):j=e[2];h=j;g=a.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile();j=a.communityNoteComponent;if(g){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(c("IGDSSpinner.react"),{position:"absolute"}),e[3]=g):g=e[3];e[4]!==a.className?(g=i.jsx("div",{className:a.className,children:g}),e[4]=a.className,e[5]=g):g=e[5];var k;e[6]!==a?(k=i.jsx(c("PolarisPostComments.react"),babelHelpers["extends"]({},a)),e[6]=a,e[7]=k):k=e[7];var l;e[8]!==g||e[9]!==k?(l=i.jsx(c("CometPlaceholder.react"),{fallback:g,name:f.id,children:k}),e[8]=g,e[9]=k,e[10]=l):l=e[10];return l}e[11]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("xigRequireInterop")(b("PolarisPostFastPreviewCommentsList.react")),e[11]=g):g=e[11];k=g["default"];e[12]===Symbol["for"]("react.memo_cache_sentinel")?(l=c("xigRequireInterop")(b("PolarisPostFastPreviewCaption.react")),e[12]=l):l=e[12];g=l["default"];e[13]!==g||e[14]!==a.enableTruncation||e[15]!==a.id||e[16]!==a.inModal?(l=i.jsx(g,{enableTruncation:a.enableTruncation,inModal:a.inModal,postId:a.id}),e[13]=g,e[14]=a.enableTruncation,e[15]=a.id,e[16]=a.inModal,e[17]=l):l=e[17];e[18]!==h||e[19]!==a.id?(g=h&&i.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:a.id}),e[18]=h,e[19]=a.id,e[20]=g):g=e[20];e[21]!==k||e[22]!==a.id||e[23]!==a.inModal||e[24]!==a.shouldIncreaseCommentPreviews?(h=i.jsx(k,{inModal:a.inModal,postId:a.id,shouldIncreaseCommentPreviews:a.shouldIncreaseCommentPreviews}),e[21]=k,e[22]=a.id,e[23]=a.inModal,e[24]=a.shouldIncreaseCommentPreviews,e[25]=h):h=e[25];e[26]!==j||e[27]!==l||e[28]!==g||e[29]!==h?(k=i.jsxs(c("IGDSBox.react"),{position:"relative",children:[l,g,j,h]}),e[26]=j,e[27]=l,e[28]=g,e[29]=h,e[30]=k):k=e[30];e[31]!==a.className||e[32]!==k?(j=i.jsx("div",{className:a.className,children:k}),e[31]=a.className,e[32]=k,e[33]=j):j=e[33];return j}g["default"]=a}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter_DO_NOT_USE.react","PolarisFacepile.next.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisPostUtils","PolarisReactRedux.react","PolarisUA","polarisLogAction","react","react-compiler-runtime","usePolarisLoggedOutBlockingEntryPointDialog","usePolarisLoggedOutIntentEntryPointDialog","usePolarisLoggedOutShowIncreasedFeatureWalls"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j=function(a){function b(b){var c;c=a.call(this,b)||this;c.$2=function(){c.props.onLike()};c.$3=function(a){c.$1(),!c.props.viewer&&c.props.inModal!==!0?(a.preventDefault(),c.props.onGoToLoginModal(c.props.code)):d("PolarisUA").isDesktop()&&(a.preventDefault(),c.props.onViewLikedByList(c.props.mediaId),c.props.onLikeCountClick(a))};c.$4=function(){!c.props.viewer&&c.props.inModal!==!0&&c.props.onPreloadDialog()};return c}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.$1=function(){c("polarisLogAction")("likeCountClick")};e.render=function(){var a=d("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(a){return a.profilePictureUrl}).filter(Boolean),b=i.jsx(c("PolarisFacepile.next.react"),{avatarSize:this.props.avatarSize,border:"transparent",userProfilePicUrls:a}),e=!!this.props.viewer;return i.jsxs(c("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[a.length>0&&e===!0&&i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:i.jsx(c("PolarisLikedByListButton.react"),{code:this.props.code,fbLikeCount:this.props.fbLikeCount,inModal:this.props.inModal,isFeedbackAggregated:this.props.isFeedbackAggregated,isSharedToFb:this.props.isSharedToFb,onClick:this.$3,onMouseEnter:this.$4,children:b})}),i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:i.jsx(c("IGDSText.react"),{zeroMargin:!0,children:i.jsx(c("PolarisLikedByText.react"),{code:this.props.code,fbLikeCount:this.props.fbLikeCount,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,isFeedbackAggregated:this.props.isFeedbackAggregated,isSharedToFb:this.props.isSharedToFb,mediaId:this.props.mediaId,onClick:this.$3,onLike:this.$2,onMouseEnter:this.$4,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})};return b}(i.Component);function a(a){return{onViewLikedByList:function(b){return a(d("PolarisLikedByListActions").requestNativeLikedByList(b))}}}function b(a){var b=d("react-compiler-runtime").c(12),e=c("usePolarisLoggedOutBlockingEntryPointDialog")(),f=e[0],g=e[1];e=c("usePolarisLoggedOutIntentEntryPointDialog")();var h=e[0],k=e[1],l=c("usePolarisLoggedOutShowIncreasedFeatureWalls")();b[0]!==g||b[1]!==k||b[2]!==l?(e=function(){l()?k==null||k(!0):g==null||g(!0)},b[0]=g,b[1]=k,b[2]=l,b[3]=e):e=b[3];e=e;var m;b[4]!==f||b[5]!==h||b[6]!==l?(m=function(a){a=d("PolarisLinkBuilder").buildMediaLink(a);a={contentReportingLink:a,nextUrl:a,source:"post_likers"};l()?h==null||h(a):f==null||f(a)},b[4]=f,b[5]=h,b[6]=l,b[7]=m):m=b[7];m=m;var n;b[8]!==m||b[9]!==e||b[10]!==a?(n=i.jsx(j,babelHelpers["extends"]({},a,{onGoToLoginModal:m,onPreloadDialog:e})),b[8]=m,b[9]=e,b[10]=a,b[11]=n):n=b[11];return n}e=d("IGRouter_DO_NOT_USE.react").withIGRouter(d("PolarisReactRedux.react").connect(null,a)(b));g["default"]=e}),98);
__d("PolarisPostSocialProof.react",["PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","react-compiler-runtime","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(31),e=a.analyticsContext,f=a.canLike,g=a.className,h=a.code,j=a.containerRef,k=a.fbLikeCount,l=a.inModal,m=a.isFeedbackAggregated,n=a.isSharedToFb,o=a.likeAndViewCountsDisabled,p=a.likedByViewer,q=a.likers,r=a.mediaId,s=a.numPreviewLikes,t=a.onLikeChange,u=a.onLikeCountClick,v=a.productType,w=a.topLikers,x=a.variant,y=a.videoViews,z=a.viewer;a=a.viewerIsOwner;var A=y!=null&&y>0,B=s!==0,C=c("usePolarisIsOnFeedPage")(),D=c("usePolarisIsOnAdsActivityPage")();x===d("PolarisPostVariants").VARIANTS.feed?x=B||A:x=B||A||f;B=z==null?void 0:z.hideLikeAndViewCounts;b[0]!==o||b[1]!==B||b[2]!==a?(f=d("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(B,o,a),b[0]=o,b[1]=B,b[2]=a,b[3]=f):f=b[3];o=f;B=A&&!o&&!d("polarisGetPostFromGraphMediaInterface").isClipsProductType(v);if(!x)return null;b[4]!==l||b[5]!==D||b[6]!==C?(a=(C||D)&&l!==!0&&d("PolarisUA").isDesktop(),b[4]=l,b[5]=D,b[6]=C,b[7]=a):a=b[7];f=a;b[8]!==e||b[9]!==h||b[10]!==f||b[11]!==k||b[12]!==o||b[13]!==l||b[14]!==m||b[15]!==n||b[16]!==p||b[17]!==q||b[18]!==r||b[19]!==s||b[20]!==t||b[21]!==u||b[22]!==B||b[23]!==w||b[24]!==y||b[25]!==z?(A=B?i.jsx(c("PolarisPostViews.react"),{analyticsContext:e,likeCount:s,viewCount:c("nullthrows")(y)}):i.jsx(c("PolarisPostLikers.react"),{avatarSize:f?"micro":void 0,code:h,fbLikeCount:k,hideCounts:o,inModal:!!l,isFeedbackAggregated:m,isSharedToFb:n,likedByViewer:p,mediaId:r,onLike:function(){t(!0,"beTheFirstPrompt")},onLikeCountClick:u,topLikers:w,totalCount:s,users:q,viewer:z}),b[8]=e,b[9]=h,b[10]=f,b[11]=k,b[12]=o,b[13]=l,b[14]=m,b[15]=n,b[16]=p,b[17]=q,b[18]=r,b[19]=s,b[20]=t,b[21]=u,b[22]=B,b[23]=w,b[24]=y,b[25]=z,b[26]=A):A=b[26];b[27]!==g||b[28]!==j||b[29]!==A?(v=i.jsx("section",{className:g,ref:j,children:A}),b[27]=g,b[28]=j,b[29]=A,b[30]=v):v=b[30];return v}g["default"]=a}),98);
__d("PolarisPostDetailsSection.react",["IGDSBox.react","IGDSText.react","PolarisCommentLikedByListContainerLazy.react","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHotKeys.react","PolarisIGTheme.react","PolarisInteractionsLogger","PolarisLikedByListContainerLazy.react","PolarisLikedByListVariant","PolarisMediaOverlayCommunityNote","PolarisMediaOverlayInfoTypes","PolarisPendingCommentState","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker.react","PolarisPostConstants","PolarisPostFeatures.react","PolarisPostFeedbackControls_DEPRECATED.react","PolarisPostFooter.react","PolarisPostModalRenderingContext.react","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","isStringNullOrEmpty","nullthrows","polarisAdsSelectors.react","polarisGetAppPlatform","react","stylex","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState,o={commentInput:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},commentInputAsSidebar:{order:"x1hrcb2b",$$css:!0},commentInputHidden:{display:"x1s85apg",minHeight:"x1wxaq2x",$$css:!0},commentInputStatic:{paddingInlineEnd:"xv54qhq",$$css:!0},commentInputV2:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},commentInputV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},comments:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},commentsAsSidebar:{marginTop:"xdj266r",marginInlineEnd:"xule2z1",marginBottom:"xat24cr",marginInlineStart:"xwqyzqf",order:"x9ek82g",overflowX:"x6ikm8r",$$css:!0},commentsMarginBottom:{marginBottom:"x12nagc",$$css:!0},commentsMarginBottomDense:{marginBottom:"xat24cr",$$css:!0},commentsV2:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xpdmqnj",paddingBottom:"x18d9i69",paddingInlineStart:"x1g0dm76",$$css:!0},commentsWithRichComments:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"x4ii5y1",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xv54qhq",paddingBottom:"x18d9i69",paddingInlineStart:"xf7dkkf",$$css:!0},expandedSidebarContainerResponsive:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1t39747",borderEndEndRadius:"x1wcsgtt",borderEndStartRadius:"xbiv7yw",$$css:!0},feedback:{marginTop:"x1gslohp",paddingBottom:"xwib8y2",paddingTop:"x1yrsyyn",$$css:!0},feedbackAsSidebar:{borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",order:"xo1ph6p",$$css:!0},feedbackV2:{paddingBottom:"x10b6aqq",paddingTop:"xexx8yu",$$css:!0},feedbackV2WithRichComments:{paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",$$css:!0},feedbackWithRichComments:{paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0},msite:{borderBottomColor:"xh05dso",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},responsiveViewInsights:{marginInlineStart:"x162z183",width:"x1j7kr1c",$$css:!0},roundedSidebarContainer:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},sectionWithNoPadding:{overflowX:"x1plvlek",overflowY:"xryxfnj",paddingInlineEnd:"xyri2b",paddingInlineStart:"x1c1uobl",$$css:!0},sidebarContainer:{display:"x78zum5",flexDirection:"xdt5ytf",pointerEvents:"x67bb7w",position:"x1n2onr6",$$css:!0},sidebarContainerAsSidebar:{backgroundColor:"xvbhtw8",height:"x5yr21d",width:"x4h1yfo",$$css:!0},sidebarContainerFeedRoot:{backgroundColor:"xvbhtw8",$$css:!0},sidebarContainerInModal:{backgroundColor:"xvbhtw8",height:"x5yr21d",$$css:!0},sidebarContainerV2:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},timestamp:{marginBottom:"x1yztbdb",$$css:!0},timestampAsSidebar:{order:"x1h3rv7z",$$css:!0},timestampDense:{marginBottom:"x1e56ztr",$$css:!0},timestampV2:{paddingInlineStart:"x1g0dm76",$$css:!0},timestampWithRichComments:{paddingInlineStart:"xf7dkkf",$$css:!0},viewInsights:{borderBottomStyle:"x1sy0etr",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",order:"x14yy4lh",$$css:!0}};function a(a){var b,e=a.analyticsContext,f=a.bloksAppId,g=a.communityNoteComponent,i=a.currSidecarIndex,p=a.currSidecarItem,q=a.enableTruncation,r=a.handleLikeChange,s=a.handleSaveChange,t=a.hasDenserFeedRedesign,u=a.hasSidebarInRedesign,v=a.hasViewInsights,w=a.initialCommentsQuery,x=a.owner,y=a.permalinkedCommentId,aa=a.permalinkedReplyId,z=a.post,A=a.postAuthorId,ba=a.postAuthorUsername,ca=a.postFeedbackControlsRef,da=a.postHeader,ea=a.redesignWithoutSidebar,B=a.redesignWithSidebar,fa=a.shouldIncreaseCommentPreviews,C=a.showDetailsAsSidebar,D=a.variant,E=a.viewer,F=z.commentsDisabled===!0||((a=z.mediaOverlayInfo)==null||(a=a.overlay_type)==null?void 0:a.toUpperCase())==="SECRET_LINK",G=!d("PolarisUA").isDesktop();a=n(null);var H=a[0],I=a[1];a=n(!1);var ga=a[0],J=a[1];a=n(!1);var ha=a[0],K=a[1];a=c("usePolarisDisplayProperties")();var ia=a.viewportWidth,L=m(null),M=function(){return!F&&z.commentingDisabledForViewer!==!0&&(ha||ia>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)};a=d("PolarisReactRedux.react").useSelector(function(a){return(a=a.pendingComments[z.id])!=null?a:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT});var N=a.committing,O=c("usePrevious")(N);a=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();var P=a.isInModal,Q=function(){K(!0),L.current&&L.current.focusAndScroll()},ja=function(){J(!1)},ka=function(a){J(!0)},la=function(){I(null)},ma=function(a){I(a)};a=E?{c:function(){z.commentsDisabled!==!0&&Q()}}:{};var R=c("usePrevious")(z);k(function(){R!=null&&z!=null&&R!==z&&(I(null),J(!1))},[z,R]);k(function(){O===!0&&N===!1&&K(!1)},[N,O]);var S=d("PolarisPostFeatures.react").usePolarisPostFeatures({owner:x,post:z,variant:D}),T=S.canViewerProvideFeedback,U=S.commentsAreStacked,V=S.hasThreadedSidebarComments,W=S.isBlocked,X=S.isSidecar,na=S.isStackedScreenSize,oa=S.showPostButton,pa=d("polarisAdsSelectors.react").useFeedAdInfo(z==null?void 0:z.id,function(a){return a});S=c("usePolarisIsOnFeedPage")();var Y=c("usePolarisIsOnAdsActivityPage")();S=(S||Y)&&P!==!0&&d("PolarisUA").isDesktop();var Z=S,qa=d("PolarisIGTheme.react").useTheme().getTheme()===d("PolarisIGTheme.react").IGTheme.Dark,$=g,ra=l(function(){var a;if($!=null)return $;var b=z==null||(a=z.mediaOverlayInfo)==null||(a=a.buttons)==null?void 0:a.find(function(a){return(a==null?void 0:a.button_type)===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_TYPES.COMMUNITY_NOTE});return b!=null?j.jsx(c("PolarisMediaOverlayCommunityNote"),{communityNoteButtonsProp:b,entityID:z.id}):null},[$,z==null||(b=z.mediaOverlayInfo)==null?void 0:b.buttons,z.id]);Y=j.jsx(c("IGDSBox.react"),{flex:B?"grow":"none",position:"relative",children:j.jsx(c("PolarisHotKeys.react"),{keyMap:a,children:function(a,b,g){return j.jsxs("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(o.sidebarContainer,D===d("PolarisPostVariants").VARIANTS.feed&&o.sidebarContainerFeedRoot,C&&!P===!0&&o.sidebarContainerAsSidebar,P&&o.sidebarContainerInModal,!P===!0&&t&&o.sidebarContainerV2,ea&&o.roundedSidebarContainer,B&&o.expandedSidebarContainerResponsive),{onKeyUp:a,role:b,tabIndex:g,children:[(P===!0?u:!U)?da:null,j.jsxs("div",babelHelpers["extends"]({},{0:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3"},8:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j"},4:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},12:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl"},2:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},10:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},6:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},14:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl"},1:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1b5io7h"},9:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1b5io7h"},5:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},13:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 x1t7ytsu xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1b5io7h"},3:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw xexx8yu xv54qhq x18d9i69 xf7dkkf x1n2onr6 xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},11:{className:"x78zum5 xdt5ytf x1q2y9iw xexx8yu x18d9i69 x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x64bnmy x13jy36j x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},7:{className:"x9f619 x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"},15:{className:"x78zum5 xdt5ytf x1q2y9iw x1n2onr6 xh8yej3 x9f619 x1iyjqo2 x13lttk3 xpilrb4 xexx8yu xyri2b x18d9i69 x1c1uobl x1ejq31n x18oe1m7 x1sy0etr xstzfhl x1b5io7h"}}[!!C<<3|!!V<<2|!!Z<<1|!!qa<<0],{children:[j.jsx(c("PolarisPostFooter.react"),{analyticsContext:e,bloksAppId:f,boostedStatus:z.boostedStatus,boostUnavailableIdentifier:z.boostUnavailableIdentifier,boostUnavailableReason:z.boostUnavailableReason,className:h(d("PolarisUA").isMobile()?o.msite:o.viewInsights,!u&&o.responsiveViewInsights,U&&X),hasViewInsights:v,mediaId:z.id,productType:z.productType,viewerId:E==null?void 0:E.id}),j.jsx(c("PolarisPostFeedbackControls_DEPRECATED.react"),{analyticsContext:e,canViewerProvideFeedback:T,canViewerReshare:z.viewerCanReshare,code:c("nullthrows")(z.code),commentsDisabled:F,containerRef:ca,currSidecarIndex:i,hideShareButton:z.igMediaSharingDisabled===!0,isBlocked:W,isSidecar:X,isVideo:!!z.isVideo,likedByViewer:!!z.likedByViewer,mediaId:p!=null?p.id:z.id,numSteps:(a=z.sidecarChildren)==null?void 0:a.length,onCommentClick:Q,onLikeChange:r,onSaveChange:s,ownerIsPrivate:x.isPrivate,ownerUsername:x.username,postId:z.id,savedByViewer:!!z.savedByViewer,sharingFrictionInfo:p!=null?p.sharingFrictionInfo:z.sharingFrictionInfo,variant:D,xstyle:[o.feedback,t&&o.feedbackV2,t&&V&&o.feedbackV2WithRichComments,C&&o.feedbackAsSidebar,V&&o.feedbackWithRichComments,Z&&o.sectionWithNoPadding]}),z.code!=null&&j.jsx(c("PolarisPostSocialProof.react"),{analyticsContext:e,canLike:!W&&T,className:{0:"x1e56ztr",8:"x12nagc x182iqb8",4:"x1e56ztr xv54qhq xf7dkkf",12:"x12nagc x182iqb8 xv54qhq xf7dkkf",2:"x1e56ztr xpdmqnj x1g0dm76",10:"x12nagc x182iqb8 xpdmqnj x1g0dm76",6:"x1e56ztr xpdmqnj x1g0dm76",14:"x12nagc x182iqb8 xpdmqnj x1g0dm76",1:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",9:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",5:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",13:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",3:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",11:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl",7:"x1e56ztr x1plvlek xryxfnj xyri2b x1c1uobl",15:"x12nagc x182iqb8 x1plvlek xryxfnj xyri2b x1c1uobl"}[!!C<<3|!!V<<2|!!(t&&V)<<1|!!Z<<0],code:c("nullthrows")(z.code),fbLikeCount:z.fbLikeCount,inModal:P,isFeedbackAggregated:z.isFeedbackAggregated,isSharedToFb:z.isSharedToFb,likeAndViewCountsDisabled:z.likeAndViewCountsDisabled,likedByViewer:!!z.likedByViewer,likers:z.likers||[],mediaId:z.id,numPreviewLikes:z.numPreviewLikes||0,onLikeChange:r,onLikeCountClick:ka,productType:z.productType,topLikers:z.topLikers,variant:D,videoViews:z.videoViews,viewer:E,viewerIsOwner:A===(E==null?void 0:E.id)}),j.jsx(c("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:e,caption:z.caption,captionCreatedAt:z.captionCreatedAt,captionHasTranslation:z.captionHasTranslation,captionId:z.captionCommentId,captionIsEdited:z.captionIsEdited,className:h(o.comments,!G&&o.commentsMarginBottom,G&&o.commentsMarginBottomDense,C&&o.commentsAsSidebar,V&&o.commentsWithRichComments,t&&V&&o.commentsV2,Z&&o.sectionWithNoPadding),code:z.code,commentingDisabledForViewer:(b=z.commentingDisabledForViewer)!=null?b:!1,commentsDisabled:F,commentsQuery:null,communityNoteComponent:ra,enableTruncation:q,fbCommentCount:z.fbCommentCount,hasRankedComments:z.hasRankedComments===!0,id:z.id,initialCommentsQuery:w,inModal:P,mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(z),onLikeCountClick:ma,owner:x,ownerId:A,permalinkedCommentId:y,permalinkedReplyId:aa,postedAt:c("nullthrows")(z.postedAt),postId:z.id,shouldIncreaseCommentPreviews:fa,showCommentOptionsInline:!0,title:z.title,variant:D}),!Z&&j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(!G&&o.timestamp,G&&o.timestampDense,C&&o.timestampAsSidebar,V&&o.timestampWithRichComments,t&&V&&o.timestampV2),{children:z.isSponsored===!0?null:j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[j.jsx(c("PolarisPostTimestamp.react"),{code:c("nullthrows")(z.code),isVideo:z.isVideo,postedAt:c("nullthrows")(z.postedAt),productType:(g=z.productType)!=null?g:"",username:x.username}),e===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&j.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:j.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:z.id})})]})})),(d("polarisGetAppPlatform").isIOS()||M())&&j.jsx(c("PolarisPostCommentInputPicker.react"),{adInfo:pa,analyticsContext:e,canViewerProvideFeedback:T,hasPostButton:oa,id:z.id,inModal:P,isRevampVersion:!1,isVideo:z.isVideo,ownerId:x.id,ref:L,xstyle:[o.commentInput,C&&o.commentInputAsSidebar,t&&o.commentInputV2,t&&V&&o.commentInputV2WithRichComments,!M()&&o.commentInputHidden,!na&&o.commentInputStatic]},z.id),!M()&&d("PolarisUA").isDesktop()&&z.commentsDisabled!==!0&&z.commentingDisabledForViewer===!0&&j.jsx("div",babelHelpers["extends"]({},{0:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1gslohp x1hrcb2b"},2:{className:"x6s0dn4 x1xp8e9x x13fuv20 x178xt8z x78zum5 x1dnml7z xl56j7k x1hrcb2b xdj266r"},1:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1gslohp x1hrcb2b x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"},3:{className:"x6s0dn4 x1xp8e9x x178xt8z x78zum5 xl56j7k x1hrcb2b xdj266r x1ejq31n x18oe1m7 x1sy0etr xstzfhl xxeg0ib"}}[!!t<<1|!!Z<<0],{children:j.jsx(c("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:d("PolarisGenericStrings").COMMENTING_LIMITED})}))]})),ga&&j.jsx(c("PolarisLikedByListContainerLazy.react"),{display:c("PolarisLikedByListVariant").Modal,fbLikeCount:z.fbLikeCount,isFeedbackAggregated:z.isFeedbackAggregated,isOwnerTheViewer:(E==null?void 0:E.id)===A,isSharedToFb:z.isSharedToFb,likeAndViewCountsDisabled:z.likeAndViewCountsDisabled,likeCount:z.numLikes||0,mediaId:z.id,onClose:ja,ownerUsername:ba,productType:(a=z.productType)!=null?a:"",shortcode:c("nullthrows")(z.code),viewCount:z.videoViews}),!c("isStringNullOrEmpty")(H)&&j.jsx(c("PolarisCommentLikedByListContainerLazy.react"),{commentId:H,display:c("PolarisLikedByListVariant").Modal,onClose:la})]}))}})});return B?j.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x1iyjqo2 x5wqa0o xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak x65f84u x1vq45kp xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x11njtxf",children:Y}):Y}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","IGDSIconButton.react","IGDSStarPanoFilledGradientIcon.react","PolarisFavoritesStrings","PolarisPostModalContext.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isFavorited;var e=d("PolarisPostModalContext.react").useSetPostModal(),f=c("usePolarisAnalyticsContext")();if(a&&(f==="feedPage"||f==="postPage")){b[0]!==e?(a=function(){c("polarisLogAction")("favoriteIconInPostHeaderClick"),e("favorites")},b[0]=e,b[1]=a):a=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:i.jsx(c("IGDSStarPanoFilledGradientIcon.react"),{alt:d("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})}),b[2]=f):f=b[2];b[3]!==a?(f=i.jsx(c("IGDSIconButton.react"),{onClick:a,children:f}),b[3]=a,b[4]=f):f=b[4];return f}return null}g["default"]=a}),98);
__d("PolarisPostInvitedCoauthorsOverlayFooterCTA.react",["fbt","IGDSBox.react","IGDSTextVariants.react","PolarisConfig","PolarisInvitedCoauthorsCountWithSheet.react","PolarisUserHoverCard.react","PolarisUserLink.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(19),e=a.invitedCoauthorProducers,f=a.mediaId;a=a.user;var g=d("PolarisConfig").getViewerIdOrZero(),i=e!=null;if(!i||(a==null?void 0:a.id)!==g||a==null||(a==null?void 0:a.username)==null)return null;b[0]!==e?(i=e==null?void 0:e.map(l),b[0]=e,b[1]=i):i=b[1];g=i;b[2]!==e?(a=e!=null?e:[],b[2]=e,b[3]=a):a=b[3];b[4]!==a?(i=a.map(k),b[4]=a,b[5]=i):i=b[5];a=i;b[6]!==g?(i=h._(/*BTDS*/"{invited_coauthor_username} was invited to be a collaborator but hasn't accepted yet.",[h._param("invited_coauthor_username",g!=null&&g[0])]),b[6]=g,b[7]=i):i=b[7];i=i;var m;b[8]!==g?(m=h._(/*BTDS*/"{invited_coauthor_username_1} and {invited_coauthor_username_2} were invited to be collaborators but haven't accepted yet.",[h._param("invited_coauthor_username_1",g!=null&&g[0]),h._param("invited_coauthor_username_2",g!=null&&g[1])]),b[8]=g,b[9]=m):m=b[9];m=m;var n;b[10]!==a||b[11]!==g||b[12]!==f?(n=h._(/*BTDS*/"{invited_coauthor_username_1} and {=m2} were invited to be collaborators but haven't accepted yet.",[h._param("invited_coauthor_username_1",g!=null&&g[0]),h._implicitParam("=m2",j.jsx(c("PolarisInvitedCoauthorsCountWithSheet.react"),{analyticsContext:"post_invited_coauthors_overlay_footer_cta",coauthors:a,mediaId:f,children:h._(/*BTDS*/"")}))]),b[10]=a,b[11]=g,b[12]=f,b[13]=n):n=b[13];a=n;b[14]!==e||b[15]!==i||b[16]!==a||b[17]!==m?(g=e!=null&&e.length>0&&c("gkx")("4757")?j.jsx(c("IGDSBox.react"),{alignItems:"center",color:"primaryBackground",direction:"row",justifyContent:"between",paddingX:3,paddingY:2,position:"relative",children:j.jsx(c("IGDSBox.react"),{flex:"shrink",marginEnd:5,marginStart:1,maxWidth:350,overflow:"auto",wrap:!0,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryText",maxLines:3,zeroMargin:!0,children:e.length===1?i:e.length===2?m:e.length>2?a:null})})}):null,b[14]=e,b[15]=i,b[16]=a,b[17]=m,b[18]=g):g=b[18];return g}function k(a){var b;return{user:{fullName:(b=a.fullName)!=null?b:"",id:a.id,isVerified:(b=a.isVerified)!=null?b:!1,profilePictureUrl:(b=a.profilePictureUrl)!=null?b:"",username:(b=a.username)!=null?b:""}}}function l(a,b){var d;return j.jsx(c("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:!(a!=null&&a.isUnpublished),userId:(d=a==null?void 0:a.id)!=null?d:"",username:(d=a==null?void 0:a.username)!=null?d:"",children:j.jsx(c("PolarisUserLink.react"),{username:(d=a==null?void 0:a.username)!=null?d:""})},b)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisPostFastOptionsButton.react",["fbt","IGDSBox.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSMoreVerticalPanoOutline24Icon.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisPostModalContext.react","PolarisViewpointActionUtils","identityFunction","polarisAdsSelectors.react","polarisLogAction","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"More options");function l(a){var b=d("react-compiler-runtime").c(3),e=a.color;a=a.orientation;a=a==="horizontal"?c("IGDSMoreHorizontalPanoOutlineIcon.react"):c("IGDSMoreVerticalPanoOutline24Icon.react");var f;b[0]!==a||b[1]!==e?(f=j.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:j.jsx(a,{alt:k,color:e})}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}function a(a){var b=d("react-compiler-runtime").c(27),e=a.className,f=a.orientation,g=a.padding,h=a.postId;a=f===void 0?"horizontal":f;var i=d("PolarisPostModalContext.react").useSetPostModal(),k=c("usePolarisAnalyticsContext")();b[0]!==k?(f=d("PolarisContainerModuleUtils").getContainerModule(k),b[0]=k,b[1]=f):f=b[1];var o=f,p=d("usePolarisPost").usePost(h,c("identityFunction")),q=!!p.isVideo;f=c("usePolarisViewer")();var r=f==null?void 0:f.id,s=d("polarisAdsSelectors.react").useFeedAdInfo(h,n),t=d("polarisAdsSelectors.react").useFeedAdInfo(h,m);b[2]!==p?(f=d("PolarisViewpointActionUtils").getMPKForFeedMedia(p),b[2]=p,b[3]=f):f=b[3];var u=f;b[4]!==s||b[5]!==k||b[6]!==o||b[7]!==q||b[8]!==u||b[9]!==p.isSponsored||b[10]!==h||b[11]!==i||b[12]!==t||b[13]!==r?(f=function(){c("polarisLogAction")("postOptionsClick",{mediaId:h,source:k,type:q?"video":"photo"}),p.isSponsored===!0&&r!=null&&c("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:s,m_pk:u,pigeon_reserved_keyword_module:o,pk:r,source_of_action:o,tracking_token:t}}),i("options")},b[4]=s,b[5]=k,b[6]=o,b[7]=q,b[8]=u,b[9]=p.isSponsored,b[10]=h,b[11]=i,b[12]=t,b[13]=r,b[14]=f):f=b[14];f=f;var v;b[15]!==a?(v=j.jsx(l,{color:"ig-secondary-text",orientation:a}),b[15]=a,b[16]=v):v=b[16];var w;b[17]!==a?(w=j.jsx(l,{color:"ig-primary-text",orientation:a}),b[17]=a,b[18]=w):w=b[18];b[19]!==f||b[20]!==g||b[21]!==v||b[22]!==w?(a=j.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:v,onClick:f,padding:g,children:w}),b[19]=f,b[20]=g,b[21]=v,b[22]=w,b[23]=a):a=b[23];b[24]!==e||b[25]!==a?(f=j.jsx("div",{className:e,children:a}),b[24]=e,b[25]=a,b[26]=f):f=b[26];return f}function m(a){return a==null?void 0:a.tracking_token}function n(a){return a==null?void 0:a.ad_id}b=j.memo(a);g["default"]=b}),226);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.buttonClassName;a=a.mediaPK;var f;b[0]!==a?(f=i.jsx(c("PolarisPostFastOptionsButton.react"),{postId:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e||b[3]!==f?(a=i.jsx("div",{className:e,children:f}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("PolarisPostPageRouteReferrerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({referrerTracePolicy:null});g["default"]=b}),98);
__d("PolarisSponsoredPostCTAFooter.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors.react","react","react-compiler-runtime","usePolarisSponsoredPostCTAFooterDominantColor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(17),e=a.isMediaRendered,f=a.post;a=a.sidecarIndex;var g=d("polarisAdsSelectors.react").useFeedAdInfo(f.id,k),h=f.isSidecar;a=h===!0?(h=d("PolarisPostUtils").getCurrentSidecarItemFromPost(f,a))==null?void 0:h.id:f.id;b[0]!==e||b[1]!==a||b[2]!==f?(h={isMediaRendered:e,mediaId:a,post:f},b[0]=e,b[1]=a,b[2]=f,b[3]=h):h=b[3];e=c("usePolarisSponsoredPostCTAFooterDominantColor")(h);var l=e.ctaDominantColor;f=e.ctaFooterViewpointRef;if(a==null)return null;if(b[4]!==(g==null?void 0:g.ctaItems)||b[5]!==a){var m;h=g==null||(m=g.ctaItems)==null||(m=m.get(a))==null?void 0:m.ctaLinkUrl;b[4]=g==null?void 0:g.ctaItems;b[5]=a;b[6]=h}else h=b[6];var n=h;if(b[7]!==(g==null?void 0:g.ctaItems)||b[8]!==a){var o;e=g==null||(o=g.ctaItems)==null||(o=o.get(a))==null?void 0:o.ctaLinkText;b[7]=g==null?void 0:g.ctaItems;b[8]=a;b[9]=e}else e=b[9];var p=e,q=j;if(n!=null&&p!=null){b[10]!==l||b[11]!==p||b[12]!==n?(h=function(a){return i.jsx("div",{ref:a,children:i.jsx(c("PolarisPostFooterCTA.react"),{ctaDominantColor:l,"data-testid":void 0,disableAnimation:!1,externalURL:n,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:q,showChevron:!0,text:p})})},b[10]=l,b[11]=p,b[12]=n,b[13]=h):h=b[13];b[14]!==f||b[15]!==h?(g=i.jsx(c("PolarisClickEventLoggerProvider.react"),{children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:f,trackingNode:86,children:h})}),b[14]=f,b[15]=h,b[16]=g):g=b[16];return g}return null}function j(){c("InstagramODS").incr("web.ads.feed.link_click")}function k(a){return a}g["default"]=a}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog.react","PolarisGenericStrings","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(16),c=a.onClose,e=a.onUnsaveFromAll;a=a.onUnsaveFromCollection;var f;b[0]!==a?(f=a?h._(/*BTDS*/"You can remove from this collection or remove it from everything you've saved."):h._(/*BTDS*/"Removing this from saved will also remove it from collections."),b[0]=a,b[1]=f):f=b[1];var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Remove From Saved and Collections?"),b[2]=g):g=b[2];var i;b[3]!==a?(i=a&&j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:h._(/*BTDS*/"Remove from collection")}),b[3]=a,b[4]=i):i=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Remove"),b[5]=a):a=b[5];b[6]!==e?(a=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:d("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:e,children:a}),b[6]=e,b[7]=a):a=b[7];b[8]!==c?(e=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:c,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[8]=c,b[9]=e):e=b[9];b[10]!==c||b[11]!==f||b[12]!==i||b[13]!==a||b[14]!==e?(g=j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:f,onModalClose:c,title:g,children:[i,a,e]}),b[10]=c,b[11]=f,b[12]=i,b[13]=a,b[14]=e,b[15]=g):g=b[15];return g}g["default"]=a}),226);
__d("polarisPostModalHelpers",["fbt","FBLogger","justknobx","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i=1032,j=55,k=500,l=250,m=h._(/*BTDS*/"Previous");h=h._(/*BTDS*/"Next");var n=-1,o=1;function a(a){var b="";switch(a){case"profilePage":case"selfProfilePage":b="profilePageModal";break;case"locationPage":b="locationPageModal";break;case"exploreLandingPage":b="discoverMediaPageModal";break;case"DirectThreadPage":b="directThreadPageModal";break;case"ClipsAudioPage":b="clipsAudioPageModal";break;case"feedPage":case"pastPostsFeedPage":case"followingFeedPage":case"favoritesFeedPage":b="feedPageModal";break;case"KeywordSearchExplorePage":b="keywordSearchExplorePageModal";break;case"adsActivityFeed":c("vulture")("ffZkBqw2cGlao5s8XEe1u1x7yM8=");b="adActivityFeedModal";break;case"ExploreSERPPage":c("vulture")("ozn07wewnSY-kWidXVdFNfubl7g=");b="ExploreSERPPageModal";break;default:c("FBLogger")("ig_web").mustfix("Unexpected analytics context: "+a)}return b}function b(a){a=a.match(new RegExp("^(.+/)(saved)/(.+)/(.+)/"));return a!=null?a[4]:null}function d(a){return!!a.match(new RegExp("/p/"))}function e(a){a=a.match(new RegExp("/([^/]+)/[^/]*$"));return a?a[1]:null}function p(a,b,c,d){if(a.height>a.width){var e=c/a.height;d.style.maxHeight=c;d.style.maxWidth=a.width*e;d.style.aspectRatio=a.width+" / "+a.height}else b&&(d.style.aspectRatio="1"),d.style.maxHeight=c,d.style.maxWidth=c;return d}function q(a,b,c,d){c.style.maxWidth=b;b=b/a.width;c.style.maxHeight=a.height*b+d;c.style.aspectRatio=a.width*b+" / "+(a.height*b+d);return c}function f(a){var b=a.dimensions,d=a.footerHeight;d=d===void 0?j:d;var e=a.viewportHeight,f=a.viewportWidth,g=a.hasSidebarInRedesign;a=a.hasFooter;a=a===void 0?!1:a;if(b==null||e===0||f===0)return null;var h={style:{maxHeight:0,maxWidth:0}},m=f-64*2-(g?k:0);if(b){var n=e>f&&a===!0?m:g?e-24*2:e-24*2-l;n>i&&c("justknobx")._("64")&&(n=i);if(a===!1)h=p(b,g,n,h);else{a=b.height;a=(n-d)/a;h.style.maxHeight=n;!g?h=q(b,n,h,d):b.height>=b.width?e>f?h=q(b,n,h,d):b.width*a>m?h=q(b,m,h,d):(h.style.maxHeight=n,h.style.aspectRatio=b.width*a+" / "+(b.height*a+d),h.style.maxWidth=b.width*a):(h.style.aspectRatio=b.width*a>b.height*a+d?"1":b.width*a+" / "+(b.height*a+d),h.style.maxWidth=e>f?n:b.width*a>b.height*a+d?n:b.width*a)}g&&(h.style.flexBasis=h.style.maxWidth)}return h}g.PREVIOUS_ARROW_TITLE=m;g.NEXT_ARROW_TITLE=h;g.LEFT_DELTA=n;g.RIGHT_DELTA=o;g.getModalPageIdFromAnalyticsContext=a;g.getCollectionIdFromPath=b;g.isPostUrl=d;g.getPostCodeFromPath=e;g.getMediaContainerProps=f}),226);
__d("PolarisPost.react",["cx","fbt","CometErrorBoundary.react","IGDSBox.react","PolarisContainerModuleUtils","PolarisHeroPageletLogger","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisIGTheme.react","PolarisInsightsUtils","PolarisInteractionsLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostCoauthorReviewOverlayFooterCTA.react","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures.react","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostInvitedCoauthorsOverlayFooterCTA.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext.react","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux.react","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","browserHistory_DO_NOT_USE","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors.react","polarisDeveloperSettings","polarisLogAction","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors.react","polarisUserSelectors","polarisWithPPRLogging","qex","react","react-compiler-runtime","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisPostSetURLSidecarIndex","usePolarisShowFooterCTA","usePolarisViewer","usePrevious"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));e=j;var l=e.useContext,m=e.useEffect,aa=e.useRef,n=e.useState;function a(a){var b=a.adImpressionRefs,e=a.analyticsContext,f=a.autoplay,g=a.className,h=a.communityNoteComponent,j=h===void 0?null:h,o=a.enableTruncation,p=a.id;a.imageMediaActsAsCta;h=a.initialCarouselIndex;var q=a.initialCommentsQuery,r=a.isSponsored;r=r===void 0?!1:r;var ba=a.isVisible,ca=a.lightLetterbox,da=a.onMediaRendered,ea=a.permalinkedCommentId,fa=a.permalinkedReplyId,s=a.position,ga=a.shortcode,ha=a.shouldIncreaseCommentPreviews,t=a.testid;t=t===void 0?"post":t;t=a.variant;var u=t===void 0?d("PolarisPostVariants").VARIANTS.flexible:t;t=a.viewpointActionsForSponsoredPost;var ia=a.visiblePosition,ja=a.willScrollTo,v=d("PolarisReactRedux.react").useDispatch(),w=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,p)}),x=c("nullthrows")(w.owner).id;a=(a=w.group)==null?void 0:a.id;var ka=a!=null?a:x;a=l(c("PolarisPostPageRouteReferrerContext.react"));a=a.referrerTracePolicy;var y=w.invitedCoauthorProducers,la=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,x)}),z=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,ka)}),ma=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,ka)}),A=c("usePolarisViewer")(),na=!!(A!=null&&A.canSeeOrganicInsights),B=!!w.canSeeInsightsAsBrand,C=d("polarisAdsSelectors.react").useFeedAdInfo(w==null?void 0:w.id,function(a){return a}),D=c("usePolarisDisplayProperties")(),oa=D.viewportHeight;D=D.viewportWidth;var E=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),F=E.isInModal,G=(E=h!=null?h:d("PolarisPostUtils").getInitialSidecarIndexFromPost(w))!=null?E:0;w.isSidecar===!0&&(G<0||w.sidecarChildren!=null&&G>=w.sidecarChildren.length)&&(G=0);h=n(G);var H=h[0],pa=h[1];E=n({});var I=E[0],qa=E[1];h=n(!1);E=h[0];var ra=h[1];h=n({});var J=h[0],sa=h[1];h=n(!1);var ta=h[0],K=h[1];h=n(!1);var ua=h[0],va=h[1];h=n(null);var wa=h[0],xa=h[1];h=aa(null);var ya=c("usePolarisPostSetURLSidecarIndex")();m(function(){ja==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[ja]);var L=c("usePrevious")(w);m(function(){L!=null&&w.id!==L.id&&(qa({}),sa({}))},[w,L]);m(function(){ga!=null&&w.isSidecar===!0&&ya(H+1)},[H,w.isSidecar,ya,ga]);var za=function(a){ra(!0),da!=null&&da(w.id,a)},Aa=function(a){pa(a)},M=function(a,b){var c;c={containerModule:d("PolarisContainerModuleUtils").getContainerModule(e),inventorySource:w.inventorySource,mediaAuthorId:(c=w.owner)==null?void 0:c.id,mediaId:w.id,rankingInfoToken:w.loggingInfoToken,source:e,sourceOfLike:b,trackingToken:w.trackingToken};b=null;(C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null&&(b={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,viewerId:Y});a?w.likedByViewer!==!0&&v(d("PolarisPostActionLikePost").likePost(w.id,c,b)):v(d("PolarisPostActionUnlikePost").unlikePost(w.id,c,b))},Ba=function(){M(!0,"double_tap_media")},Ca=function(a){var b={source:e},f=null;if((C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null){var g;f={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,analyticsContext:e,followStatus:d("PolarisViewpointActionUtils").getFollowStatus(ma),mediaPk:d("PolarisViewpointActionUtils").getMPKForFeedMedia(w),mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(w),ownerId:(g=w.owner)==null?void 0:g.id,viewerId:Y}}a?w.savedByViewer!==!0&&v(d("PolarisPostActionSavePost").savePost(w.id,b,f)):w.savedByViewer===!0&&(w.savedByViewerToCollection===!0?(c("polarisLogAction")("removeSavedItemFromCollectionDialogShown"),K(!0)):v(d("PolarisPostActionUnsavePost").unsavePost(w.id,b,f)))},Da=function(){c("polarisLogAction")("removeSavedItemFromCollectionDialogCancelled"),K(!1)},Ea=function(){K(!1),v(d("PolarisPostActionUnsavePost").unsavePost(w.id,{source:e})),c("polarisLogAction")("removeSavedItemFromCollectionDialogAccepted")},Fa=function(){var b={source:e};K(!1);var a=d("browserHistory_DO_NOT_USE").browserHistory.location.pathname;a=d("polarisPostModalHelpers").getCollectionIdFromPath(a);a!=null&&A!=null&&(v(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:a,postId:w.id})),v(d("PolarisSavedPostsActionEditCollection").editCollection({collectionId:a,postIdsToRemove:[w.id],source:b.source,userId:c("nullthrows")(A==null?void 0:A.id)})))},Ga=function(a){Ia(a)&&Ka(a.id)},Ha=function(a){La(a)},Ia=function(a){return I[a.id]===!0},Ja=function(a){return J[a]===!0},Ka=function(a){var b=babelHelpers["extends"]({},I);b[a]=!0;qa(b)},La=function(a){var b=babelHelpers["extends"]({},J);b[a]=!0;sa(b)},N=function(a){va(!0),xa(a)},Ma=function(){va(!1)},O=d("browserHistory_DO_NOT_USE").browserHistory.location.pathname,P=d("PolarisPostFeatures.react").usePolarisPostFeatures({owner:z,path:O,post:w,variant:u}),Q=P.commentsAreStacked,Na=P.hasPhotosOfYouOption,Oa=P.hasThreadedSidebarComments,R=P.isFavorited,Pa=P.isSidecar,Qa=P.isStackedScreenSize;P=P.showFollowButton;O=d("polarisPostModalHelpers").getCollectionIdFromPath(O);var Ra=O!=null&&O!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION;O=!!P&&(!w.coauthorProducers||w.coauthorProducers.length===0)&&!r;var S=D>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,Sa=S&&F===!0,T=!S&&F===!0,Ta=F===!0?S:!Q;P=c("usePolarisIsOnFeedPage")();var U=e==="adsActivityFeed",V=c("qex")._("34")===!0,W=(P||U)&&F!==!0&&d("PolarisUA").isDesktop(),X=(P||U)&&F!==!0&&d("PolarisUA").isDesktop(),Ua=d("PolarisPostUtils").getCurrentSidecarItemFromPost(w,H);U=d("PolarisIGTheme.react").useTheme().getTheme()===d("PolarisIGTheme.react").IGTheme.Dark;var Va=k.jsxs("div",{className:"_aasi"+(W?" _aasj":"")+(T?" _aask":"")+(X?" _ai9a":"")+(U?" _at8n":""),children:[w.inventorySource==="mixed_unconnected"&&P&&!F&&!V&&k.jsx(c("PolarisPostSuggestedHeader.react"),{postId:w.id,rankingInfoToken:w.loggingInfoToken,title:(U=w.explore)==null?void 0:U.title}),k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[k.jsx(c("PolarisPostHeader.react"),{adTitle:C==null?void 0:C.ad_title,analyticsContext:e,clipsAttributionInfo:w.clipsAttributionInfo,clipsAudioAttributionInfo:w.clipsMusicAttributionInfo,coauthorProducers:w.coauthorProducers,displayFBPageName:C==null?void 0:C.display_fb_page_name,followHashtagInfo:w.followHashtagInfo,headerAvatarSize:c("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:F,isAffiliate:w.isAffiliate===!0,isPaidPartnership:w.isPaidPartnership===!0,isSharedFromEdits:w.isSharedFromBasel===!0,isSharedToCloseFriends:w.audience==="MediaAudience.BESTIES",isSponsored:w.isSponsored===!0,location:w.location,mediaAttributionsData:w.mediaAttributionData,mediaId:w.id,mediaProductType:w.productType,onDisabledClipsAudioAttributionClick:N,owner:z,postedAt:w.postedAt,shouldEllipsisText:!0,shouldShowFollowButton:O,showVerifiedBadge:!0,sidebarVariantOptionsButton:Oa,sponsoredLabel:C==null?void 0:C.label,sponsors:w.sponsors,suggestionText:w.inventorySource==="mixed_unconnected"&&P&&!F&&V?(N=(U=w.explore)==null?void 0:U.title)!=null?N:i._(/*BTDS*/"Suggested for you"):null,transparencyLabelOwner:w.owner,wearablesAttributionInfo:w.wearableAttributionInfo},w.id),k.jsx(c("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:R}),k.jsx(c("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(W||d("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _aasn":"")+(X?" _agh1":""),mediaPK:w.id})]})]});O=d("PolarisInsightsUtils").getViewInsightsInfo(A,x,w,B,na);var Wa=O.bloksAppId,Xa=O.hasViewInsights,Y=A==null?void 0:A.id;P=r&&t!=null?t:[d("PolarisOrganicImpressionAction").makePostImpressionAction(w,e,a,s),d("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(w,e)];V=d("PolarisViewpointReact.react").useViewpoint({action:P,id:"viewpoint"+w.id});U=[V].concat(b!=null?b:[]);var Ya=c("useMergeRefs").apply(void 0,U),Za=A?{l:function(){M(!w.likedByViewer,"button")},s:function(){Ca(!w.savedByViewer)}}:{};N=c("usePolarisShowFooterCTA")(w,H,I,r);var Z=null;r?Z=k.jsx(c("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:E,post:w,sidecarIndex:H}):N||!F?Z=k.jsx(d("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:e,currentSidecarIndex:H,dynamicFooterRef:h,idsWithClearedBlurOverlays:I,idsWithDisabledMediaOverlayInfoImpressionLogging:J,onLogOverlayImpression:function(a){return Ha(a)},rootPost:w}):y!=null&&y.length>0&&(Z=k.jsxs("div",{children:[k.jsx(c("PolarisPostCoauthorReviewOverlayFooterCTA.react"),{invitedCoauthorProducers:y,mediaId:w.id,mediaShortcode:w.code,productType:w.productType,user:w.owner}),k.jsx(c("PolarisPostInvitedCoauthorsOverlayFooterCTA.react"),{invitedCoauthorProducers:y,mediaId:w.id,user:w.owner})]}));R=Z!=null;var $=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:w.dimensions,footerHeight:R?(B=h.current)==null?void 0:B.offsetHeight:void 0,hasFooter:R,hasSidebarInRedesign:S,viewportHeight:oa,viewportWidth:D}),$a=!1,ab={border:w.isSeen===!0?"2px solid green":"2px solid red"};return k.jsx(d("PolarisPostToastProvider.react").PostToastProvider,{children:function(a){return k.jsx(d("PolarisPostModalContext.react").PostModalContext,{post:w,children:k.jsx(d("hero-tracing").HeroPagelet,{name:d("PolarisHeroPageletLogger").getHeroPageletLogName(d("PolarisHeroPageletLogger").PageletLogName.POST,s),ref:Ya,children:function(b,h){return k.jsx(c("PolarisHotKeys.react"),{keyMap:Za,children:function(i,l,m){return k.jsx(c("PolarisTrackingNodeProvider.react"),{ref:b,trackingNode:301,children:function(b){return k.jsxs("article",{className:c("joinClasses")(g,"_aatb"+(u===d("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(Qa?" _aatd":"")+(Qa?"":" _aate")+(Q?" _aatf":"")+(Ta?" _aatg":"")+(Pa?" _aath":"")+(Oa?" _aati":"")+(Xa?" _aatj":"")),"data-testid":void 0,onKeyUp:i,ref:b,role:l,style:$a?ab:{},tabIndex:m,children:[k.jsxs(c("IGDSBox.react"),{alignSelf:T?"center":void 0,direction:(F===!0?S:!Q)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:T&&($==null?void 0:$.style)!=null?$.style.maxWidth:"inherit",position:"relative",children:[(F===!0?!S:Q)?Va:null,k.jsx("div",babelHelpers["extends"]({},F===!0?$:{},{className:"_aatk"+(F===!0?" _aatl":"")+(Sa&&w.dimensions!=null&&w.dimensions.width>=w.dimensions.height?" _aatm":"")+(ca===!0?" _aatn":"")+(X?" _aiao":""),children:k.jsx(c("PolarisMediaContainer.react"),{accessibilityCaption:w.accessibilityCaption,adInfo:C,analyticsContext:e,autoplay:f,checkIsSensitivityOverlayDisabledCallback:function(a){return Ia(a)},className:"_aato",commentsAreStacked:Q,hasPhotosOfYouOption:Na,hasViewInsights:Xa,id:w.id,initialCarouselIndex:G,inModal:F,isVisible:ba,mediaFooter:Z,onLike:A?Ba:null,onPostMediaRendered:za,onPostSidecarChildIndexChange:Aa,onSensitivityOverlayCleared:Ga,onToastClose:Ma,position:s,post:w,relationship:ma,sensitivityOverlayMediaOverlayInfoLoggingProps:{checkIfMediaOverlayInfoImpressionLoggingDisabled:function(a){return Ja(a)},onLoggedMediaOverlayInfoImpression:function(a){return Ha(a)}},showToast:ua,toastString:wa,viewer:A,visiblePosition:ia})})),k.jsx(c("PolarisPostDetailsSection.react"),{analyticsContext:e,bloksAppId:Wa,communityNoteComponent:j,currSidecarIndex:H,currSidecarItem:Ua,enableTruncation:o,handleLikeChange:M,handleSaveChange:Ca,hasDenserFeedRedesign:W,hasSidebarInRedesign:S,hasViewInsights:Xa,initialCommentsQuery:q,owner:z,permalinkedCommentId:ea,permalinkedReplyId:fa,post:w,postAuthorId:x,postAuthorUsername:la==null?void 0:la.username,postFeedbackControlsRef:a,postHeader:Va,redesignWithoutSidebar:T,redesignWithSidebar:Sa,shouldIncreaseCommentPreviews:ha,showDetailsAsSidebar:Ta,variant:u,viewer:A}),ta&&k.jsx(c("PolarisUnsaveFromCollectionDialog.react"),{onClose:Da,onUnsaveFromAll:Ea,onUnsaveFromCollection:Ra&&d("PolarisUA").isDesktop()?Fa:null}),k.jsx(c("PolarisPostToast.react"),{isFeedVariant:u===d("PolarisPostVariants").VARIANTS.feed,isModal:F!=null?F:!1})]}),k.jsx(h,{})]})}})}})}})},w.id)}})}a.displayName=a.name+" [from "+f.id+"]";var o=c("polarisWithPPRLogging")(a);function p(){c("polarisLogAction")("feedUnitFailure",{source:"PolarisPost"})}function b(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=k.jsx(c("CometErrorBoundary.react"),{fallback:q,onError:p,children:k.jsx(o,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}function q(a){return null}g["default"]=b}),226);/*FB_PKG_DELIM*/
__d("AutoplayRulesEngine",[],(function(a,b,c,d,e,f){"use strict";var g=-2,h=-1;a=function(){function a(a){this.$1=g,this.$2=a}var b=a.prototype;b.evaluateAutoplay=function(a,b){b=b();var c=h;if(a)for(var d=0;d<this.$2.length;d++){var e=this.$2[d](a);if(e!=="SKIP"){b=e;c=d;break}}this.$1=c;return b};b.getIndexOfLastWinningRule=function(){return this.$1};b.getRules=function(){return this.$2};return a}();f["default"]=a}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});f["default"]=a}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});f["default"]=a}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1856513");b=d("FalcoLoggerInternal").create("cvc_v3_http_event",a);e=b;g["default"]=e}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a,this.$2=c("guid")(),this.$3=(b!=null?b:"null")+"::"+(d!=null?d:"null"),this.$4=null,this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return babelHelpers["extends"]({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpRequestFailure=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logHttpRequestTimeout=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpResponseBad=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logDebugInfo=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:a,countable_id:b.$1}})};return a}();g["default"]=a}),98);
__d("CappedListItemContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("CometAudioManagerContexts").AudioApiContext);return a}g.useAudioApi=a}),98);
__d("CometVideoPlayerLoggingConfigForPolaris",["IGVideoMetadataProvider","PolarisIsLoggedIn","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{disableCVCSubscription:!d("PolarisIsLoggedIn").isLoggedIn(),disableLogging:!1,enablePauseAndFlushOnBeforeUnload:a===!0&&c("gkx")("11122"),loggingToSNAPLCreateMetadataProvider:d("IGVideoMetadataProvider").createIGVideoMetadataProvider,loggingToSNAPLEnabled:c("gkx")("3179"),loggingToVPLEnabled:!1}}g.createCometVideoPlayerLoggingConfigForPolaris=a}),98);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","gkx","makeAudioSymbol","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useContext,k=b.useEffect,l=b.useId,m=b.useMemo,n=b.useRef,o=b.useState;e=d("createVideoStateHook").createVideoStateHook();var p=e.stateHook,q=200;function r(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=o(function(){return a.getCurrentState().volume}),e=b[0],f=b[1],g=m(function(){return c("CometThrottle")(function(a){f(a)},q,{trailing:!0})},[]);k(function(){var b=a.subscribe(function(){var b=a.getCurrentState().volume;g(b)});g(a.getCurrentState().volume);return function(){b.remove(),g.cancel()}},[a,g]);return e}function a(){var a=p(!1),b=a[0],e=a[1],f=l(),g=(i||(i=d("VideoPlayerHooks"))).useInstanceKey(),h=m(function(){return c("makeAudioSymbol")(f,g)},[f,g]),q=d("CometAudioManagerHooks").useAudioApi(),s=n(q);k(function(){s.current=q},[q]);var t=i.useController(),u=i.useLastPlayReason(),v=i.useLastMuteReason(),w=i.useMuted(),x=r(),y=c("usePrevious")(x),z=i.usePaused(),A=j(d("CometAudioManagerContexts").CometAudioLocalScopeContext),B=j(d("CometAudioManagerContexts").CometAudioGroupContext),C=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),D=i.useVolumeSetting(),E=m(function(){return(B==null?void 0:B.groupID)||d("CometAudioManagerContexts").makeAudioGroupID()},[B==null?void 0:B.groupID]);a=o(!0);var F=a[0],G=a[1],H=m(function(){return{audioLocalScope:A,controller:t,groupID:E,instanceKey:g,lastMuteReason:v,lastPlayReason:u,muted:w,paused:z,previousVolume:y,symbol:h,videoPlayerPortalingPlaceInfo:C,volume:x}},[A,t,E,g,v,u,w,z,y,h,C,x]),I=n(!1),J=n(null);k(function(){if(D!=null&&b!==!0){if(c("gkx")("5322")){var a=J.current!==D;if(!I.current&&a){I.current=!0;try{t.setVolume(D),e(!0),J.current=D}finally{I.current=!1}}}else t.setVolume(D),e(!0);return}},[t,b,e,D]);a=m(function(){return B||{allowSound:F,groupID:E,setAllowSound:G}},[B,F,E,G]);var K=n(a),L=n(!1);k(function(){if(q)if(c("gkx")("5322")){if(!L.current){L.current=!0;try{q.register(H,K.current)}finally{L.current=!1}}}else q.register(H,K.current);return function(){q&&q.unregister(h,E)}},[q,H,E,h]);var M=n(!1);k(function(){if(q)if(c("gkx")("5322")){if(!M.current){M.current=!0;try{q.update(H)}finally{M.current=!1}}}else q.update(H)},[q,H]);var N=n(!1),O=n(null);k(function(){if(c("gkx")("5322")){var a=O.current!==F;if(!F&&s.current&&!N.current&&a){N.current=!0;try{t.setMuted(!0,"audio_manager_initiated"),O.current=F}finally{N.current=!1}}}else!F&&s.current&&t.setMuted(!0,"audio_manager_initiated")},[F,s,t]);return null}g["default"]=a}),98);
__d("VideoPlayerAutoplayHooks",["VideoPlayerAutoplayContexts","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("VideoPlayerAutoplayContexts").AutoplayApiContext);if(a==null)throw c("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return a}function b(){return i(d("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}g.useAutoplayApi=a;g.useVideoAutoplayLocalScope=b}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(a,b,c,d,e,f){"use strict";function a(){return"ALLOW"}a.displayName="evaluateVideoAutoplayDefaultRule";f["default"]=a}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b+"::"+a}f["default"]=a}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=j(a),d=k(function(){return new(c("AutoplayRulesEngine"))(a)}),e=d[0],f=d[1];i(function(){b.current!==a&&f(function(){return new(c("AutoplayRulesEngine"))(a)})},[a]);i(function(){b.current=e.getRules()},[e]);return e}g["default"]=a}),98);
__d("useConcurrentAutoplayManagementAPI",["react","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useId,j=e.useState;function a(){return i()}function k(){var a=[];return{isControllingComponent:function(b){var c=a.length;return a[c-1]===b},registerControllingComponent:function(b){c("removeFromArray")(a,b),a.push(b)},unregisterControllingComponent:function(b){var d=a.length;d>1&&c("removeFromArray")(a,b);return d>1}}}function b(){var a=j(function(){return k()});a=a[0];return a}g.useAutoplayControlID=a;g.createConcurrentAutoplayManagementAPI=k;g.useConcurrentAutoplayManagementAPI=b}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;g.useVideoPlayerExtendedPassiveViewabilityInfo=(h||(h=d("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo;g.useVideoPlayerPassiveViewabilityInfo=h.useVideoPlayerPassiveViewabilityInfo;g.useVideoPlayerViewabilityInfo=h.useVideoPlayerViewabilityInfo}),98);
__d("useEventCallbackOn",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b,c){i(function(){a.addEventListener(b,c);return function(){a.removeEventListener(b,c)}},[a,b,c])}g["default"]=a}),98);
__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useCallback,j=f.useState;function b(){var b=a.document;if(typeof b.hidden!=="undefined")return"visibilitychange";else if(typeof b.mozHidden!=="undefined")return"mozvisibilitychange";else if(typeof b.msHidden!=="undefined")return"msvisibilitychange";else if(typeof b.webkitHidden!=="undefined")return"webkitvisibilitychange";return"visibilitychange"}function k(){var b=a.document;if(typeof b.hidden!=="undefined")return b.hidden;else if(typeof b.mozHidden!=="undefined")return b.mozHidden;else if(typeof b.msHidden!=="undefined")return b.msHidden;else if(typeof b.webkitHidden!=="undefined")return b.webkitHidden;return!1}var l=b();function m(b){var c=a.document.hasFocus?a.document.hasFocus():!0,d=k();return d||(b?!1:!c)}function n(){return k()}function e(b){var d=(b==null?void 0:b.noPauseOnBlurOrFocus)===!0,e=j(function(){return m(d)}),f=e[0],g=e[1];e=j(function(){return n()});var h=e[0],k=e[1],o=!!b&&b.scrollTerminatesHiddenOrBlurred===!0;e=i(function(){g(m(d)),k(n())},[g,d]);b=e;var p=i(function(){var a=m(d);a&&o&&f&&g(!1)},[f,d,o]);d&&(b=c("emptyFunction"));c("useEventCallbackOn")(a.window,"blur",b);c("useEventCallbackOn")(a.window,"focus",b);c("useEventCallbackOn")(a.document,l,e);c("useEventCallbackOn")(a.window,"scroll",p);return{isDocumentHidden:h,isDocumentHiddenOrBlurred:f}}g["default"]=e}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","useInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=5e3;function a(){var a=function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))},b=i(a()),d=b[0],e=b[1];c("useInterval")(function(){return e(a())},j);return d}g["default"]=a}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.startTransition,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState;function a(a){var b=(i||(i=d("VideoPlayerHooks"))).useAdClientToken(),e=i.useAutoplayGatingResult(),f=i.useBroadcastStatus(),g=i.useEnded(),h=i.useIsFrozenPassive(),p=i.useLastPauseReason(),q=i.useLastPlayReason(),r=i.useMuted(),s=i.usePaused(),t=k(c("HiddenSubtreePassiveContext")),u=!b;a=(a==null?void 0:a.noPauseOnBlurOrFocus)===!0||d("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);a=c("useIsBackgrounded")({noPauseOnBlurOrFocus:a,scrollTerminatesHiddenOrBlurred:u});var v=a.isDocumentHidden,w=a.isDocumentHiddenOrBlurred,x=c("useVideoPlayerBandwidthEstimate")(),y=d("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),z=d("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo();u=o(t.getCurrentState().backgrounded);var A=u[0],B=u[1];a=o(t.getCurrentState().hidden);var C=a[0],D=a[1];l(function(){var a=function(){j(function(){var a=t.getCurrentState();D(a.hidden);B(a.backgrounded)})},b=t.subscribeToChanges(a);a();return function(){b.remove()}},[t,B,D]);u=o(function(){return h.getCurrentState()});var E=u[0],F=u[1];l(function(){var a=h.subscribeToChanges(function(a){F(a)}),b=h.getCurrentState();F(b);return function(){a.remove()}},[h,F]);var G=m(function(){return{adClientToken:b,autoplayGatingResult:e,bandwidthEstimate:x,broadcastStatus:f,controllerIsFrozen:E,currentSubtreeIsBackgrounded:A,currentSubtreeIsHidden:C,ended:g,hiddenSubtreePassive:t,isDocumentHidden:v,isDocumentHiddenOrBlurred:w,isFrozenPassive:h,lastPauseReason:p,lastPlayReason:q,muted:r,paused:s,videoPlayerExtendedPassiveViewabilityInfo:z,videoPlayerPassiveViewabilityInfo:y}},[b,e,x,f,E,A,C,g,t,v,w,h,p,q,r,s,z,y]);a=o(G);var H=a[0],I=a[1],J=n(H);l(function(){J.current=H},[H]);l(function(){var a=!1;for(var b in G)if(Object.prototype.hasOwnProperty.call(G,b)&&G[b]!==J.current[b]){a=!0;break}a&&I(G)},[G,I]);return H}g["default"]=a}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useId,n=b.useMemo,o=b.useRef,p=b.useState;function a(){var a=m(),b=(i||(i=d("VideoPlayerHooks"))).useCanAutoplay(),e=i.useInstanceKey(),f=n(function(){return c("makeSelectedAutoplayVideoSymbol")(a,e)},[a,e]),g=o(f);l(function(){g.current=f},[f]);var h=k(c("HiddenSubtreePassiveContext")),q=i.useController(),r=o(!1),s=d("useConcurrentAutoplayManagementAPI").useAutoplayControlID();l(function(){d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[ASSUME CONTROL] "+s),q.registerControllingComponent(s)},[q,s]);var t=i.useVideoPlayerPassiveViewabilityInfo(),u=q.getCurrentState();u=u.paused;var v=o(u),w=d("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),x=o(w);l(function(){x.current=w},[w]);var y=j(function(){var a=q.getCurrentState(),b=a.lastPlayReason;a=a.paused;var d=v.current;v.current=a;var e=t==null?void 0:t.getCurrent();if(e){e=e.visiblePercentage;a=!a&&a!==d;d=e<c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&e>0;x.current.disableScrollBeforePlayWhenOffscreen!==!0&&a&&b==="user_initiated"&&d&&(r.current=!0)}},[q,t]),z=o(y);l(function(){z.current=y},[y]);l(function(){var a=q.subscribe(function(){y()});return function(){a.remove()}},[q,y]);var A=c("useVideoAutoplayState")({noPauseOnBlurOrFocus:w.noPauseOnBlurOrFocus}),B=c("useAutoplayRulesEngine")(w.autoplayLocalRules),C=b==="allow"?c("evaluateVideoAutoplayDefaultAllowRule"):c("evaluateVideoAutoplayDefaultIgnoreRule");u=p(function(){return C});var D=u[0],E=u[1];u=p(null);var F=u[0],G=u[1];u=p(function(){return B.evaluateAutoplay(A,C)});var H=u[0],I=u[1];u=p(null);var J=u[0],K=u[1],L=o(H),M=d("VideoPlayerAutoplayHooks").useAutoplayApi(),N=o(M);l(function(){N.current=M},[M]);var O=b!=="dangerously_disable_autoplay_management";l(function(){M.register(f,e,w,q,h,O);c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:x.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:M.getAutoplayManagerDebugInfo(x.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:L.current}});return function(){M.unregister(f),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:x.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:M.getAutoplayManagerDebugInfo(x.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:L.current}})}},[M,w,q,h,e,O,f]);l(function(){var a=function(){var b=B.evaluateAutoplay(A,C);L.current=b;var e=B.getRules(),h=B.getIndexOfLastWinningRule(),a=h>=0?e[h]:C;e=t&&t.getCurrent();h=q.getCurrentState();h=h.paused;(J===null||J!==b)&&(I(b),K(b));if(b==="PAUSE"&&!h&&q.isControllingComponent(s)){h=!0;z.current();if(r.current){r.current=!1;var i=e==null?void 0:e.positionToViewport;i&&q.scrollIntoView(i.top<0);h=!1}if(h){i="[PAUSE] via short-circuit on "+(a.displayName||a.name)+".";d("CoreVideoPlayerAutoplayClientUtils").log(g.current,i);q.pause("autoplay_initiated");c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:x.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:M.getAutoplayManagerDebugInfo(x.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:b}})}}(F===null||F!==a)&&(E(function(){return a}),G(function(){return a}),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:x.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:M.getAutoplayManagerDebugInfo(x.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:b}}));d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[DECISION: "+b+"] from "+(a.displayName||a.name));e&&M.update(f,b,e)},b=h.subscribeToChanges(function(a){h.getCurrentState().hidden||h.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s)}),e=t?t.subscribe(function(){h.getCurrentState().hidden||h.getCurrentState().backgrounded?q.isControllingComponent(s)||q.unregisterControllingComponent(s):q.registerControllingComponent(s),a()}):null;a();return function(){b.remove(),e&&e.remove()}},[M,s,B,q,C,h,F,J,E,I,G,K,f,A,t]);l(function(){var a=q.isControllingComponent(s),b=q.getCurrentState();b=b.paused;d("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(H,L.current,b,a)&&(d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[PAUSE] the video for "+H),q.pause("autoplay_initiated"),c("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:x.current.autoplayScopeID,event_creation_time:Date.now(),initiator:g.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:N.current.getAutoplayManagerDebugInfo(x.current).selectedAutoplayVideoSymbol,target:g.current,target_current_autoplay_decision:H}}))},[H,q,s]);l(function(){return function(){d("CoreVideoPlayerAutoplayClientUtils").log(g.current,"[RELEASE CONTROL] "+s),q.unregisterControllingComponent(s)}},[q,s]);c("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition({applicableRule:D,autoplayApiRef:N,autoplayDecision:H,autoplayLocalScope:w,symbol:f});return null}g["default"]=a}),98);
__d("normalizeVideoPlayerLoopCount",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b===void 0&&(b=null);d===void 0&&(d=null);var e;if(a==null){d=(b!=null?b:!1)?d!=null?d:0:0;d===-1?e=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?e=0:d===0&&b===!0?e=-1:e=d}else if(a===-1||a===Number.POSITIVE_INFINITY)e=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw c("unrecoverableViolation")("Invalid loopingCount: "+a,"comet_video_player");else e=a;return e}g["default"]=a}),98);
__d("CoreVideoPlayerMetaData",["VideoPlayerAudioAvailabilityInfo","normalizeVideoPlayerLoopCount"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!=null&&isFinite(a)&&a>0?a:0}var i=[];function a(a){var b,e=a.sideLoadCaptionsExpected===!0||a.sideLoadCaptionsUrl!=null,f=a.isLiveStreaming===!0;return babelHelpers["extends"]({},a,{audioAvailabilityInfo:(b=a.audioAvailabilityInfo)!=null?b:d("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:a.autoplayGatingResult!=null?a.autoplayGatingResult:"unknown",canAutoplay:a.canAutoplay!=null?a.canAutoplay:"allow",desiredLatencyMs:(b=a.desiredLatencyMs)!=null?b:0,inbandCaptionsExpected:f,initialRepresentationIds:(b=a.initialRepresentationIds)!=null?b:i,isNCSR:Boolean(a.isNCSR),isPremiumMusicVideo:Boolean(a.isPremiumMusicVideo),latencyToleranceMs:(f=a.latencyToleranceMs)!=null?f:0,loopCount:c("normalizeVideoPlayerLoopCount")(a.loopCount),sideLoadCaptionsExpected:e,startTimestamp:h(a.startTimestamp)})}g.applyDefaultsToCoreVideoPlayerMetaData=a}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,c=a.isDesktopPictureInPicture,e=a.isFullscreen;a=a.videoPlayerPassiveViewabilityInfo;return i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:a,children:i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:c,children:i.jsx(d("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:e,children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var d=(b=i(c("CappedListItemContext")))==null?void 0:b.registerBlocker;j(function(){if(!d)return;var b=null,c=null,e=function(){var e=a.getCurrentState().playing;if(e!==b){b=e;c&&(c(),c=null);if(e){e="playing_video";var f;c=d({reason:e,source:f})}}};e();var f=a.subscribe(e);return function(){f.remove(),c&&(c(),c=null)}},[a,d])}g["default"]=a}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a,b){var d=i(c("VirtualizationContext"));j(function(){if(d==null)return;var c=d.createFlag,e=d.createPin,f=null,g=null,h=function(){g==null&&(g=c("HAS_PLAYER","playerInstanceKey: "+b));var d=a.getCurrentState();d.playing||d.stalling?f||(f=e("player "+b+" is playing")):d.isFullscreen?f||(f=e("player "+b+" is fullscreen")):(f==null||f(),f=null)};h();var i=a.subscribe(h);return function(){i.remove(),g==null||g(),g=null,f==null||f(),f=null}},[a,b,d])}g["default"]=a}),98);
__d("wrapWithContextProviders",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return function(c){return i.jsx(a.Provider,{value:b,children:c})}}g.wrapWithContextProviders=a;g.makeRenderProviderFn=b}),98);
__d("VideoPlayerComponentContainer.react",["CometSSRRenderingStateHooks","CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","setTimeout","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(a,b,c,d,e,f,g){"use strict";var h=["children"],i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useEffect,o=e.useRef,p=e.useState;function q(a){var b=o(a);n(function(){b.current=a},[a]);var d=p(!1),e=d[0],f=d[1];d=p(function(){var a=null;return{cleanup:function(){a&&a()},pingNotIdle:function(){a&&a();f(!1);var d=c("setTimeout")(function(){f(!0)},b.current);a=function(){c("clearTimeout")(d),a=null}}}});d=d[0];var g=d.cleanup;d=d.pingNotIdle;n(function(){return g},[g]);return{isIdle:e,pingNotIdle:d}}function r(){var a=p(!1),b=a[0],c=a[1];a=3e3;a=q(a);var d=a.isIdle,e=a.pingNotIdle;a=m(function(){c(!0),e()},[e]);var f=m(function(){c(!1),e()},[e]),g=m(function(){c(!0),e()},[e]),h=m(function(){e()},[e]),i=m(function(){e()},[e]);return{isHovering:b,isIdle:d,onMouseDown:h,onMouseEnter:a,onMouseLeave:f,onMouseMove:g,onMouseUp:i}}function s(a){a=a.children;var b=r(),e=b.isHovering,f=b.isIdle,g=b.onMouseDown,h=b.onMouseEnter,i=b.onMouseLeave,m=b.onMouseMove;b=b.onMouseUp;var n=(j||(j=d("VideoPlayerHooks"))).useIsFullscreen();return l.jsx("div",babelHelpers["extends"]({className:{0:"x5yr21d x10l6tqk x13vifvy xh8yej3",1:"x5yr21d x10l6tqk x13vifvy xh8yej3 xjfk50j"}[!!(n&&f)<<0]},c("CometVisualCompletionAttributes").IGNORE,{onMouseDown:g,onMouseEnter:h,onMouseLeave:i,onMouseMove:m,onMouseUp:b,children:l.jsx((k||(k=d("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:e,children:l.jsx(k.VideoPlayerMouseIdleContext.Provider,{value:f,children:a})})}))}s.displayName=s.name+" [from "+f.id+"]";function a(a){var e=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var f=a.implementationController,g=a.implementationExposedState,i=a.videoPlayerPassiveViewabilityInfo,j=g.activeCaptions,m=g.activeEmsgBoxes,n=g.availableAudioTracks,o=g.availableVideoQualities,p=g.availableVideoTracks,q=g.bufferEnd,r=g.captionDisplayStyle,t=g.captionsLoaded,u=g.captionsVisible,v=g.currentAudioTrackID,w=g.currentVideoQuality,x=g.currentVideoTrackID,y=g.duration,z=g.ended,A=g.error,B=g.inbandCaptionsAutogenerated,C=g.inPlayStalling,D=g.internal_coreVideoPlayerMetaData,E=g.isAbrEnabled,F=g.isDesktopPictureInPicture,G=g.isFullscreen,H=g.isLiveRewindActive,I=g.isLiveRewindAvailable,J=g.lastMuteReason,K=g.lastPauseReason,L=g.lastPlayedTimeMs,M=g.lastPlayReason,N=g.latencyLevel,O=g.loopCount,P=g.loopCurrent,Q=g.muted,R=g.paused,S=g.playerInstanceKey,T=g.playerVersion,U=g.playerViewportDimensions,V=g.playing,W=g.seekableRanges,X=g.seeking,Y=g.selectedVideoQuality,Z=g.stalling,aa=g.streamInterrupted,ba=g.targetAudioTrack,ca=g.targetPlaybackRate,da=g.targetVideoQuality,ea=g.videoFBID,$=g.videoPixelsAspectRatio,fa=g.volume;g=g.watchTimeMs;var ga=D.adClientToken,ha=D.audioAvailabilityInfo,ia=D.autoplayGatingResult,ja=D.broadcastStatus,ka=D.canAutoplay,la=D.initialTracePolicy,ma=D.isNCSR,na=D.isPremiumMusicVideo;D=D.volumeSetting;e=l.jsx(s,{children:e});b("cr:6094")(S,{controller:f,coreVideoStates:a,videoPlayerPassiveViewabilityInfo:i});e=(a=d("wrapWithContextProviders")).wrapWithContextProviders(e,[a.makeRenderProviderFn((k||(k=d("VideoPlayerContexts"))).VideoFBIDContext,ea),d("wrapWithContextProviders").makeRenderProviderFn(k.StallingContext,Z),d("wrapWithContextProviders").makeRenderProviderFn(k.PlayingContext,V),d("wrapWithContextProviders").makeRenderProviderFn(k.InPlayStallingContext,C),d("wrapWithContextProviders").makeRenderProviderFn(k.BufferEndContext,q),d("wrapWithContextProviders").makeRenderProviderFn(k.LastMuteReasonContext,J),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPlayReasonContext,M),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPauseReasonContext,K),d("wrapWithContextProviders").makeRenderProviderFn(k.PausedContext,R),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentAudioTrackIDContext,v),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentVideoTrackIDContext,x),d("wrapWithContextProviders").makeRenderProviderFn(k.CurrentVideoQualityContext,w),d("wrapWithContextProviders").makeRenderProviderFn(k.MutedContext,Q),d("wrapWithContextProviders").makeRenderProviderFn(k.TargetAudioTrackContext,ba),d("wrapWithContextProviders").makeRenderProviderFn(k.VolumeContext,fa),d("wrapWithContextProviders").makeRenderProviderFn(k.SelectedVideoQualityContext,Y),d("wrapWithContextProviders").makeRenderProviderFn(k.SeekingContext,X),d("wrapWithContextProviders").makeRenderProviderFn(k.DurationContext,y),d("wrapWithContextProviders").makeRenderProviderFn(k.EndedContext,z),d("wrapWithContextProviders").makeRenderProviderFn(k.ErrorContext,A),d("wrapWithContextProviders").makeRenderProviderFn(k.DimensionsContext,U||null),d("wrapWithContextProviders").makeRenderProviderFn(k.InstanceKeyContext,S),d("wrapWithContextProviders").makeRenderProviderFn(k.ControllerContext,f),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableAudioTracksContext,n),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableVideoQualitiesContext,o),d("wrapWithContextProviders").makeRenderProviderFn(k.AvailableVideoTracksContext,p),d("wrapWithContextProviders").makeRenderProviderFn(k.PlayerVersionContext,T),d("wrapWithContextProviders").makeRenderProviderFn(k.IsAbrEnabledContext,E),d("wrapWithContextProviders").makeRenderProviderFn(k.TargetVideoQualityContext,da),d("wrapWithContextProviders").makeRenderProviderFn(k.PlaybackRateContext,ca),d("wrapWithContextProviders").makeRenderProviderFn(k.CanAutoplayContext,ka),d("wrapWithContextProviders").makeRenderProviderFn(k.VolumeSettingContext,D),d("wrapWithContextProviders").makeRenderProviderFn(k.AutoplayGatingResultContext,ia),d("wrapWithContextProviders").makeRenderProviderFn(k.BroadcastStatusContext,ja),d("wrapWithContextProviders").makeRenderProviderFn(k.LoopCountContext,O),d("wrapWithContextProviders").makeRenderProviderFn(k.LoopCurrentContext,P),d("wrapWithContextProviders").makeRenderProviderFn(k.AdClientTokenContext,ga),d("wrapWithContextProviders").makeRenderProviderFn(k.ActiveCaptionsContext,j),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionsVisibleContext,u),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionDisplayStyleContext,r),d("wrapWithContextProviders").makeRenderProviderFn(k.CaptionsLoadedContext,t),d("wrapWithContextProviders").makeRenderProviderFn(k.InbandCaptionsAutogeneratedContext,B),d("wrapWithContextProviders").makeRenderProviderFn(k.StreamInterruptedContext,aa),d("wrapWithContextProviders").makeRenderProviderFn(k.WatchTimeContext,g),d("wrapWithContextProviders").makeRenderProviderFn(k.LastPlayedTimeContext,L),d("wrapWithContextProviders").makeRenderProviderFn(k.SeekableRangesContext,W),d("wrapWithContextProviders").makeRenderProviderFn(k.LatencyLevelContext,N),d("wrapWithContextProviders").makeRenderProviderFn(k.IsLiveRewindActiveContext,H),d("wrapWithContextProviders").makeRenderProviderFn(k.IsLiveRewindAvailableContext,I),d("wrapWithContextProviders").makeRenderProviderFn(k.AudioAvailabilityInfoContext,ha),d("wrapWithContextProviders").makeRenderProviderFn(k.IsNCSRContext,ma),d("wrapWithContextProviders").makeRenderProviderFn(k.IsPremiumMusicVideoContext,na),d("wrapWithContextProviders").makeRenderProviderFn(k.InitialTracePolicyContext,la),d("wrapWithContextProviders").makeRenderProviderFn(k.ActiveEmsgBoxesContext,m),d("wrapWithContextProviders").makeRenderProviderFn(k.VideoPixelsAspectRatioContext,$!=null?$:null),function(a){return l.jsx(c("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:F,isFullscreen:G,videoPlayerPassiveViewabilityInfo:i,children:a})}]);c("useBlockCappedListItemWhenPlayingVideo")(f,S);c("useDisableVirtualizationWhenPlayingVideo")(f,S);a=d("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating();return l.jsx("div",{"data-instancekey":a?void 0:S,"data-testid":void 0,children:e})}a.displayName=a.name+" [from "+f.id+"]";e=l.memo(a);g["default"]=e}),98);
__d("GlobalVideoPortsID",["cometUniqueID","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(){return"id-pv-"+c("cometUniqueID")()}function b(a){if(typeof a==="string"){var b="id-pv-";if(a.indexOf(b)===0&&a.length>b.length)return a;else throw c("unrecoverableViolation")('Expected a GlobalVideoPortsVideoID, got a string that does not look like it: "'+a+'"',"comet_video_player")}else return null}function d(){return"id-pp-"+c("cometUniqueID")()}g.makeVideoID=a;g.ensureVideoID=b;g.makePlaceID=d}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.current!=null&&d("CometFullScreen").getFullScreenElement()===a.current}function a(a){var b=[];function e(){b.forEach(function(a){a()})}var f=null;return{getIsFullscreen:function(){return h(a)},requestSetIsFullscreen:function(b,e){var f=a.current;if(f==null)throw c("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");d("CometFullScreen").isSupported()?b!==h(a)&&(b===!0?d("CometFullScreen").requestFullScreen(f):b===!1&&d("CometFullScreen").exitFullScreen()):b&&e!=null&&typeof e.webkitEnterFullScreen==="function"?e.webkitEnterFullScreen():!b&&e!=null&&typeof e.webkitExitFullScreen==="function"&&e.webkitExitFullscreen()},subscribe:function(a){b.length===0&&f==null&&(f=d("CometFullScreen").subscribeToFullScreenChangeEvent(e));b.push(a);return{remove:function(){c("removeFromArray")(b,a),b.length===0&&f!=null&&(f(),f=null)}}}}}g.createFullscreenController=a}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useEffect,j=f.useState;function a(a,b){var e=c("usePrevious")(a);i(function(){a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()))},[a,e,b])}function b(a,b){var c=j(null),e=c[0];c=c[1];a!==e&&(e!==null&&e&&!a&&b(d("GlobalVideoPortsID").makeVideoID()),c(a))}var k=c("gkx")("24382")?b:a;function e(a){var b=a.portalingEnabled;a=a.portalingFromVideoID;var c=d("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),e=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),f=d("GlobalVideoPortsContexts").useGlobalVideoPortsState(),g=e!=null&&f!=null,h=(g||c!=null)&&(b||a!=null),l=j(function(){return d("GlobalVideoPortsID").makePlaceID()});l=l[0];var m=j(function(){return d("GlobalVideoPortsID").makeVideoID()}),n=m[0];m=m[1];b=h&&b&&a!=null;a=b&&a!=null?a:n;k(b,m);i(function(){h&&!g&&c&&c()},[g,h,c]);return{canBecomePortableLater:h,currentVideoID:a,globalVideoPortsManager:e,globalVideoPortsState:f,thisPlaceID:l}}g.useRegenerateUniqueVideoID_exportedForTest=k;g.useVideoPlayerPortalingPlaceState=e}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","deepEquals","getOwnObjectValues","gkx","react","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.useContext,l=j.useEffect,m=j.useRef,n=j.useState;function a(a){var b=a.coreVideoPlayerMetaData,d=a.currentVideoID,e=a.fullscreenController,f=a.globalVideoPortsManager,g=a.implementations,h=a.injectCoreVideoStatesRef,i=a.isFullscreen,j=a.portablePlaceContainer,k=a.portablePlaceMetaData,m=a.renderComponents,n=a.renderPlaceholder,o=a.thisPlaceID,p=a.trackingDataEncrypted,q=a.trackingNodes,r=a.viewportMarginsForViewability;l(function(){f.addOrUpdatePlace({coreVideoPlayerMetaData:b,fullscreenController:e,implementations:g,injectCoreVideoStatesRef:h,isFullscreen:i,portablePlaceContainer:j,portablePlaceID:o,portablePlaceMetaData:k,portableVideoID:d,renderComponents:m,renderPlaceholder:n,trackingDataEncrypted:p,trackingNodes:q,viewportMarginsForViewability:r})},[].concat(c("getOwnObjectValues")(b),[d,e,i,f,j],c("getOwnObjectValues")(k||{}),[m,n,o,p,q,r]));l(function(){return function(){f.removePlace({portablePlaceID:o})}},[f,o])}function b(a){var b=a.coreVideoPlayerMetaData,d=a.currentVideoID,e=a.fullscreenController,f=a.globalVideoPortsManager,g=a.implementations,h=a.injectCoreVideoStatesRef,i=a.isFullscreen,j=a.portablePlaceContainer,k=a.portablePlaceMetaData,n=a.renderComponents,o=a.renderPlaceholder,p=a.thisPlaceID,q=a.trackingDataEncrypted,r=a.trackingNodes,s=a.viewportMarginsForViewability,t=m(null),u=m(null);l(function(){var a={coreVideoPlayerMetaData:b,implementations:g,isFullscreen:i,portablePlaceID:p,portablePlaceMetaData:k,portableVideoID:d,trackingDataEncrypted:q,trackingNodes:r,viewportMarginsForViewability:s},l={fullscreenController:e,injectCoreVideoStatesRef:h,portablePlaceContainer:j,renderComponents:n,renderPlaceholder:o};if(c("deepEquals")(a,t.current)&&c("shallowEqual")(l,u.current))return;t.current=a;u.current=l;f.addOrUpdatePlace(babelHelpers["extends"]({},a,l))});l(function(){return function(){t.current=null,u.current=null,f.removePlace({portablePlaceID:p})}},[f,p])}var o=c("gkx")("17097")?b:a;function e(a){var b=a.currentPlaceID,e=a.currentVideoID,f=a.globalVideoPortsManager,g=a.globalVideoPortsState_DEPRECATED,h=a.isFullscreen,j=a.previousPlaceMetaData,l=a.renderComponents,p=a.thisPlaceID,q=n(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});q=q[0];var r=m(null);o(babelHelpers["extends"]({},a,{injectCoreVideoStatesRef:r,portablePlaceContainer:q}));a=k(c("BaseContextualLayerAnchorRootContext"));var s=m(null);return i.jsxs(c("BaseContextualLayerAnchorRootContext").Provider,{value:h?s:a,children:[i.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:q},p),i.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:g!=null?(a=(h=f.getCurrentPlaceStateForVideo(g,e))==null?void 0:h.portablePlaceID)!=null?a:null:b,currentVideoID:e,injectCoreVideoStatesRef:r,previousPlaceMetaData:g!=null?(h=(q=f.getPortableVideoState(g,e))==null?void 0:q.previousPlaceMetaData)!=null?h:null:j,renderComponents:l,thisPlaceID:p}),i.jsx("div",{ref:s})]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","recoverableViolation","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=b.useState,n={bottom:0,left:0,right:0,top:0};function o(a){var b=a.ref,c=a.children,e=a.debugRole;a=a.testid;return j.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:e,ref:b,testid:void 0,children:c})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.coreVideoPlayerMetaData,e=a.implementations,f=a.portalingEnabled,g=a.portalingFromVideoID,i=a.portalingPlaceMetaData,p=a.renderComponents;a=a.renderPlaceholder;l(function(){return function(){}},[]);var q=g!=null?d("GlobalVideoPortsID").ensureVideoID(g):null;g!=null&&q==null&&c("recoverableViolation")("The provided portalingFromVideoID ("+String(g)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player");g=d("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState({portalingEnabled:f,portalingFromVideoID:q});f=g.canBecomePortableLater;q=g.currentVideoID;var r=g.globalVideoPortsManager,s=g.globalVideoPortsState;g=g.thisPlaceID;var t=k(c("BaseViewportMarginsContext")),u=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),v=c("useStable")(function(){return d("VideoPlayerFullscreenController").createFullscreenController(u)}),w=m(v.getIsFullscreen()),x=w[0],y=w[1];l(function(){var a=v.subscribe(function(){var a=v.getIsFullscreen();y(a)});y(v.getIsFullscreen());return function(){a.remove()}},[v,y]);w=k(c("CometTrackingNodesContext"));w=w.join("");var z=k(c("CometTrackingCodeContext"));z=(z=z.encrypted_tracking[0])!=null?z:"";t=x?n:t;var A="comet-video-player-place"+(b.videoFBID!=null?"-vid-"+b.videoFBID:"");if(!f)return j.jsx(o,{debugRole:null,ref:u,testid:void 0,children:j.jsx(d("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:g,currentVideoID:q,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:g,children:j.jsx(c("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:b,fullscreenController:v,implementations:e,isFullscreen:x,renderWithCoreVideoStates:p,trackingDataEncrypted:z,trackingNodes:w,viewportMarginsForViewability:t})})});if(r&&s){return j.jsx(o,{debugRole:null,ref:u,testid:void 0,children:j.jsx(c("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:b,currentPlaceID:(f=(A=r.getCurrentPlaceStateForVideo(s,q))==null?void 0:A.portablePlaceID)!=null?f:null,currentVideoID:q,fullscreenController:v,globalVideoPortsManager:r,globalVideoPortsState_DEPRECATED:null,implementations:e,isFullscreen:x,portablePlaceMetaData:i,previousPlaceMetaData:(f=(A=r.getPortableVideoState(s,q))==null?void 0:A.previousPlaceMetaData)!=null?f:null,renderComponents:p,renderPlaceholder:a,thisPlaceID:g,trackingDataEncrypted:z,trackingNodes:w,viewportMarginsForViewability:t})})}else{return j.jsx(o,{debugRole:null,ref:u,testid:void 0,children:j.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:q,previousPlaceMetaData:null,renderPlaceholder:a,thisPlaceID:g,videoPixelsAspectRatio:(e=b.videoPixelsAspectRatio)!=null?e:null})})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext;c={initialTracePolicy:null,routeTracePolicy:null};var j=b.createContext(c);function a(){return i(j)}g.VideoPlayerTracePolicyContext=j;g.useVideoPlayerTracePolicy=a}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.children,c=a.initialTracePolicy,e=a.routeTracePolicy;a=k(c);var f=a[0],g=a[1];a=k(e);var h=a[0],l=a[1];j(function(){f!==c&&g(c),h!==e&&l(e)},[c,e,f,h]);return i.jsx(d("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:{initialTracePolicy:f,routeTracePolicy:h},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.children,d=a.coreVideoPlayerMetaData,e=a.implementations,f=a.portalingEnabled,g=a.portalingFromVideoID,h=a.portalingPlaceMetaData;a=a.portalingRenderPlaceholder;var k=j(function(a){return i.jsx(c("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},a,{children:b}))},[b]);return i.jsx(c("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:d.initialTracePolicy,routeTracePolicy:d.routeTracePolicy,children:i.jsx(c("VideoPlayerPortalingPlace.react"),{coreVideoPlayerMetaData:d,implementations:e,portalingEnabled:f,portalingFromVideoID:g,portalingPlaceMetaData:h,renderComponents:k,renderPlaceholder:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LiveTraceWwwVideoPlayerFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743810");b=d("FalcoLoggerInternal").create("live_trace_www_video_player",a);e=b;g["default"]=e}),98);
__d("MediaPlaybackCompoundFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2074");b=d("FalcoLoggerInternal").create("media_playback_compound",a);e=b;g["default"]=e}),98);
__d("MediaPlaybackCompoundEventLogger",["MediaPlaybackCompoundFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a={logComet:function(a){c("MediaPlaybackCompoundFalcoEvent").log(function(){return a})},logCometImmediately:function(a){c("MediaPlaybackCompoundFalcoEvent").logImmediately(function(){return a})}};b=a;g["default"]=b}),98);
__d("MediaPlaybackTagMetadataHighFrequencyCategory",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_BANDWIDTH:"fb_bandwidth",VIDEO_BANDWIDTH:"video_bandwidth",TOTAL_FRAME_COUNT:"total_frame_count",DROPPED_FRAME_COUNT:"dropped_frame_count",LARGE_DROPPED_FRAME_COUNT:"large_dropped_frame_count",VERY_LARGE_DROPPED_FRAME_COUNT:"very_large_dropped_frame_count",TASOS_VIDEO_TRANSPORT_BWE_BITS_PER_SEC:"tasos_video_transport_bwe_bits_per_sec",LIVE_LATENCY_FRAMES:"live_latency_frames"});f["default"]=a}),66);
__d("MediaPlaybackCompoundEventStateMachineLogger",["MediaPlaybackTagMetadataHighFrequencyCategory","NetworkStatus","SiteData","emptyFunction","gkx","hashString","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4,i=1e3,j=Object.freeze(["paused","completed","cancelled","error","heartbeat"]),k=b=c("emptyFunction"),l=b,m=b,n=b,o=!1;c("gkx")("494")&&(o=!0,k=function(a,b){try{var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];(c=window.console).info.apply(c,["["+a+"][SNAPL]"+b].concat(e))}catch(a){}},l=function(a,b,c,d){k(a,"[handleMetaData]",{loggingMetaData:c,loggingMetaDataPrevious:b,trackedChanges:d})},m=function(a,b,c,d){k(a,"[handleStateMachine]",{prevState:b,state:c,action:d})},n=function(a,b){k(a,"[setAdditionalLogData(SNAPL)]",{values:b})});function p(){return{bufferingSequenceStartClockTimestamp:null,canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,errorRecoveryAttemptState:{eventsLogged:0},hasPendingRequestedPlaying:!1,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedTagMetadata:{},nextHeartbeatTime:null,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,warningState:{eventsLoggedPerKey:new Map(),eventsLoggedTotal:0,eventsMaxLoggedPerKey:function(){try{return Math.max(0,c("justknobx")._("1831")||0)}catch(a){return 0}}(),eventsMaxLoggedTotal:function(){try{return Math.max(0,c("justknobx")._("1832")||0)}catch(a){return 0}}()}}}function a(a){var b={},d=a.initialLoggingMetaData,e=a.initialCoreVideoPlayerMetaData;d;var f=[],g=p(),q=[],r={};function s(b){var c,h=b.events;b=b.state;var i=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);i=(c=(c=a.metadataProvider)==null?void 0:c.getRequiredMetadata({coreVideoPlayerMetaData:e,logDataAdditions:i,loggingMetaData:d,state:b}))!=null?c:{current_watching_module:"",media_id:"",tracking_type:"none"};b={events:h,required_metadata:i};f.push(b);o&&k(a.debugLogId,"[_push] "+b.events.map(function(a){return a.event_name}).join(","),{loggedEvent:b,loggerEventsLength:f.length,loggingState:JSON.stringify(g)})}function t(c){var d=c.event;c=c.state;q.push(d);o&&k(a.debugLogId,"[_addEvent] "+d.event_name,{event:d,eventsListLength:q.length,loggingState:JSON.stringify(g)});if(j.includes(d.event_name)){d=[].concat(q);q=[];s({events:d,state:c})}return b}function u(a,b){var e=a.uncontrolledState.videoElementDuration;return{client_time_ms:c("gkx")("18028")?Math.floor(a.uncontrolledState.clockTimestamp).toString():Math.round(a.uncontrolledState.clockTimestamp).toString(),event_name:b,media_time_ms:a.uncontrolledState.videoElementPlayheadPosition!=null?Math.round(a.uncontrolledState.videoElementPlayheadPosition*1e3).toString():"0",player_instance_id:Math.abs(c("hashString")(d.instanceKey)).toString(),player_instance_key:d.instanceKey,video_client_duration:e!=null?Math.trunc(e*1e3).toString():void 0}}function v(b){d;if(b.type==="notify_logging_metadata_change"){b=b.payload;var c=b.coreVideoPlayerMetaData;b=b.loggingMetaData;if(o){var f=c.initialTracePolicy!==e.initialTracePolicy;l(a.debugLogId,d,b,{initialTracePolicyChanged:f})}d=b;e=c}}function w(a,c,d){if(a.controlledState.playbackState!==c.controlledState.playbackState&&c.controlledState.playbackState==="ended"&&g.canLogPausedOrFinishedPlaying){y(c);d=u(c,"completed");t({event:d,state:c});g.canLogPausedOrFinishedPlaying=!1;return b}else return b}function x(a,c){var d=u(a,"requested_playing");c=c!=null?babelHelpers["extends"]({},d,{media_time_ms:Math.round(c*1e3).toString()}):d;t({event:c,state:a});g.hasPendingRequestedPlaying=!0;g.canLogPausedOrFinishedPlaying=!0;return b}function y(c,f){var g,h=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);g=(g=a.metadataProvider)==null?void 0:g.getTagMetadata({coreVideoPlayerMetaData:e,logDataAdditions:h,loggingMetaData:d,state:c});if(Object.keys(g!=null?g:{}).length>0){f&&(g=babelHelpers["extends"]({},g,f));h=babelHelpers["extends"]({},u(c,"tags_changed"),{tag_metadata:g});t({event:h,state:c})}return b}function z(a){if(!g.canLogPausedOrFinishedPlaying)return b;else if(g.hasPendingRequestedPlaying){y(a);A(a);g.canLogPausedOrFinishedPlaying=!1;g.hasPendingRequestedPlaying=!1;return b}else{y(a);var c=u(a,"paused");t({event:c,state:a});g.canLogPausedOrFinishedPlaying=!1;g.hasPendingRequestedPlaying=!1;return b}}function A(a){var c=u(a,"cancelled");t({event:c,state:a});return b}function B(a,c,d){if(d.type==="dom_event_play_promise_rejected"&&g.hasPendingRequestedPlaying){a=d.payload.playPromiseRejectionReason;if(a!=null&&a.name==="NotAllowedError"){A(c);return b}else return b}else return b}function C(a,c,d){if((d.type==="controller_play_requested"||d.type==="dom_event_play"&&!g.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==c.controlledState.playbackState){x(c);return b}else return b}function D(a){var c=u(a,"requested_seek");t({event:c,state:a});return b}function E(a,c,d){var e=c.controlledState.playbackState,f=a.controlledState.playbackState;if(d.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){z(c);D(c);g.isLoggingScrubbingSequence=!0;return b}else if(!a.controlledState.seeking&&c.controlledState.seeking&&!g.isLoggingScrubbingSequence&&e!=="paused"&&e!=="ended"&&!g.hasPendingRequestedPlaying){z(c);D(c);g.shouldLogRequestedPlayingForScrub=!0;return b}else if(d.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){x(c,d.payload.seekTargetPosition);return b}else if(a.controlledState.seeking&&!c.controlledState.seeking){g.shouldLogRequestedPlayingForScrub&&e!=="paused"&&e!=="ended"&&x(c);g.isLoggingScrubbingSequence=!1;g.shouldLogRequestedPlayingForScrub=!1;f!=="paused"&&f!=="ended"&&(g.canLogPlayingEvent=!0);return b}else return b}function F(a,d,e){if(a.controlledState.playbackState==="stalling"&&d.controlledState.playbackState==="playing"&&g.canLogPlayingEvent){e=u(d,"started_playing");t({event:e,state:d});g.canLogPlayingEvent=!1;g.hasPendingRequestedPlaying=!1;y(d,{web_client_revision:String(c("SiteData").client_revision)});return b}else return b}function G(a,c,d){if((d.type==="controller_pause_requested"||d.type==="dom_event_pause"&&!g.shouldIgnoreDomPause)&&a.controlledState.playbackState!==c.controlledState.playbackState){z(c);return b}else return b}function H(a,c,d){var e=c.controlledState.playbackState;if(e!=="paused"&&e!=="ended"){d.type==="implementation_video_node_unmounted"?z(a):(d.type==="implementation_unmounted"||d.type==="implementation_engine_destroy_requested")&&z(c);return b}else return b}function I(c,f,h){c=f.controlledState.error;if(c!=null&&c!==g.lastLoggedError&&c.errorCode!=="410"){var i;y(f);i=babelHelpers["extends"]({},(i=a.metadataProvider)==null?void 0:i.getErrorMetadata({action:h,coreVideoPlayerMetaData:e,loggingMetaData:d,state:f,videoPlayerError:c}),{name:"failed_playing"});h=babelHelpers["extends"]({},u(f,"error"),{error_metadata:i});t({event:h,state:f});g.lastLoggedError=c}return b}function J(f,h,j){if(j.type==="error_recovery_attempt"&&g.errorRecoveryAttemptState.eventsLogged<i){var k;f=j.payload.recoverableError;if(f!=null&&f.errorName==="OZ_NETWORK"&&!c("NetworkStatus").isOnline())return b;k=babelHelpers["extends"]({},(k=a.metadataProvider)==null?void 0:k.getErrorMetadata({action:j,coreVideoPlayerMetaData:e,loggingMetaData:d,state:h,videoPlayerError:f}),{name:"error_recovery_attempt"});j=babelHelpers["extends"]({},u(h,"error"),{error_metadata:k});t({event:j,state:h});g.errorRecoveryAttemptState.eventsLogged++}return b}function K(a,c,d){d=a.controlledState.playbackState;a=c.controlledState.playbackState;if(g.hasPendingRequestedPlaying||g.shouldLogRequestedPlayingForScrub||g.bufferingSequenceStartClockTimestamp!=null)return b;if(d!=="stalling"&&a==="stalling"){d=u(c,"started_buffering");t({event:d,state:c});g.bufferingSequenceStartClockTimestamp=c.uncontrolledState.clockTimestamp;g.shouldIgnoreDomPause=!0;g.shouldIgnoreDomPlay=!0}return b}function L(a,d,e){a=a.controlledState.playbackState;var f=d.controlledState.playbackState,h=g.bufferingSequenceStartClockTimestamp;if(h==null)return b;if((e.type==="dom_event_playing"||e.type==="buffering_end_requested")&&a==="stalling"&&f!=="stalling"){a=0;e.payload.domEventPerfTimestamp!=null&&(a=Math.max(d.uncontrolledState.perfTimestamp-e.payload.domEventPerfTimestamp,0));f=Math.round(c("gkx")("18028")?Math.max(h,d.uncontrolledState.clockTimestamp-a):d.uncontrolledState.clockTimestamp-a);e=babelHelpers["extends"]({},u(d,"stopped_buffering"),{client_time_ms:f.toString()});t({event:e,state:d});g.bufferingSequenceStartClockTimestamp=null;g.shouldIgnoreDomPause=!1;g.shouldIgnoreDomPlay=!1}return b}function M(a,c,d){a=c.controlledState.playbackState;a==="paused"||a==="ended"?g.nextHeartbeatTime=null:a!=="stalling"&&g.nextHeartbeatTime==null&&(g.nextHeartbeatTime=c.uncontrolledState.clockTimestamp+h);d=g.nextHeartbeatTime;if(d!=null){var e=c.uncontrolledState.clockTimestamp;if(e>=d){if(a!=="stalling"){d=u(c,"heartbeat");t({event:d,state:c})}g.nextHeartbeatTime=e+h}}return b}function N(a){var b=a.errorMessageFormat,c=a.errorName;a=a.errorCode==null||a.errorCode===""?c:a.errorCode;c=c+"#"+a+": "+O(b);return c}function O(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})}function P(f,h,i){if(!c("gkx")("24360"))return b;if(i.type==="implementation_warning"){var j;f=i.payload.warningError;var k=N(f),l=g.warningState.eventsLoggedTotal;j=(j=g.warningState.eventsLoggedPerKey.get(k))!=null?j:0;if(l<g.warningState.eventsMaxLoggedTotal&&j<g.warningState.eventsMaxLoggedPerKey){g.warningState.eventsLoggedTotal++;g.warningState.eventsLoggedPerKey.set(k,j+1);k=babelHelpers["extends"]({},(l=a.metadataProvider)==null?void 0:l.getErrorMetadata({action:i,coreVideoPlayerMetaData:e,loggingMetaData:d,state:h,videoPlayerError:f}),{name:"player_warning"});j=babelHelpers["extends"]({},u(h,"error"),{error_metadata:k});t({event:j,state:h})}}return b}function Q(f,h,i){f=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);var j=g.lastLoggedTagMetadata,k=(i=a.metadataProvider)==null?void 0:i.getTagMetadata({coreVideoPlayerMetaData:e,logDataAdditions:f,loggingMetaData:d,state:h});if(k&&JSON.stringify(k)!==JSON.stringify(j)){var l={};Object.keys(k).forEach(function(a){if(k[a]!==j[a]){var b;l=babelHelpers["extends"]({},l,(b={},b[a]=k[a],b))}});var m=Object.values(c("MediaPlaybackTagMetadataHighFrequencyCategory"));i=Object.keys(l).every(function(a){return m.includes(a)});if(i)return b;f=babelHelpers["extends"]({},u(h,"tags_changed"),{tag_metadata:l});t({event:f,state:h});g.lastLoggedTagMetadata=babelHelpers["extends"]({},j,k)}return b}return{consumeLoggerEvents:function(){return f.length>0?f.splice(0):[]},handleStateMachine:function(b,c,d){v(d);var e=c.controlledState.playbackState,f=[Q,B,C,E,K,L,F,w,G,H,I,J,P,M];f.forEach(function(a){a(b,c,d)});o&&m(a.debugLogId,b,c,d);(e==="paused"||e==="ended")&&(g.canLogPlayingEvent=!0);d.type==="controller_pause_requested"&&(g.shouldIgnoreDomPause=!0);d.type==="controller_play_requested"&&(g.shouldIgnoreDomPlay=!0);d.type==="dom_event_pause"&&(g.shouldIgnoreDomPause=!1);d.type==="dom_event_play"&&(g.shouldIgnoreDomPlay=!1)},logPausedOnBeforeUnload:function(a){z(a)},setLoggingToSNAPLAdditionalData:function(b){Object.assign(r,b),o&&n(a.debugLogId,b)}}}g.HEARTBEAT_INTERVAL=h;g.createMediaPlaybackCompoundEventStateMachineLogger=a}),98);
__d("MediaPlaybackLogFlusher",["MediaPlaybackCompoundEventLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("emptyFunction"),i=!1;c("gkx")("494")&&(i=!0,h=function(a,b){try{var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];(c=window.console).info.apply(c,["["+a+"][SNAPL]"+b].concat(e))}catch(a){}});a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.flushLogs=function(a){a===void 0&&(a=!1);var b=this.$2.consumeLoggerEvents();i&&h(this.$1,"[flushLogs] "+b.map(function(a){return(a=(a=a.events)==null?void 0:a.map(function(a){return a.event_name}))!=null?a:[]}).flat(1).join(","),{loggerEvents:b});b.forEach(function(b){a||b.required_metadata.tracking_type==="paid"?c("MediaPlaybackCompoundEventLogger").logCometImmediately(b):c("MediaPlaybackCompoundEventLogger").logComet(b)})};b.discardLogsWithoutFlushing=function(){var a=this.$2.consumeLoggerEvents();i&&h(this.$1,"[discardLogsWithoutFlushing] "+a.map(function(a){return(a=(a=a.events)==null?void 0:a.map(function(a){return a.event_name}))!=null?a:[]}).flat(1).join(","),{loggerEvents:a})};return a}();g["default"]=a}),98);
__d("Mp4Box",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$4=a.getCursor(),this.$1=a.readUint32(),this.$2=a.readChars(4),this.$1===1?this.$1=a.readUint64():this.$1===0&&(this.$1=a.getDataView().byteLength-this.$4),this.$2==="uuid"&&(this.$3=a.readChars(16)),this.$5=a.getCursor()}var b=a.prototype;b.getBodyStart=function(){return this.$5};b.getBodySize=function(){var a=this.$5-this.$4;return this.getSize()-a};b.getSize=function(){return this.$1};b.getType=function(){return this.$2};b.getUuid=function(){return this.$3};b.getStart=function(){return this.$4};b.inspect=function(){return"{ size: "+this.$1+", type: "+this.$2+" }"};return a}();f["default"]=a}),66);
__d("Mp4DASHEventMessageBox",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=b,this.$2=null,b.getVersion()==0?this.$2={version:0,schemeIdUri:a.readZeroTerminatedString(this.$4(a,b)),value:a.readZeroTerminatedString(this.$4(a,b)),timescale:a.readUint32(),presentationTimeDelta:a.readUint32(),eventDuration:a.readUint32(),id:a.readUint32()}:b.getVersion()==1&&(this.$2={version:1,timescale:a.readUint32(),presentationTime:a.readUint64(),eventDuration:a.readUint32(),id:a.readUint32(),schemeIdUri:a.readZeroTerminatedString(this.$4(a,b)),value:a.readZeroTerminatedString(this.$4(a,b))}),this.$3=new DataView(a.getDataView().buffer,a.getCursor())}var b=a.prototype;b.getFullBox=function(){return this.$1};b.getEmsgFields=function(){return this.$2};b.getMessageData=function(){return this.$3};b.getStartTime=function(){var a=this.$2;if(a==null)return null;switch(a.version){case 0:return null;case 1:return this.$5(a)}};b.getDuration=function(){var a=this.$2;if(a==null)return null;var b=a.eventDuration;a=a.timescale;return a!==0?b/a:b};b.$5=function(a){var b=a.timescale;a=a.presentationTime;return b!==0?a/b:a};b.$4=function(a,b){return b.getBox().getSize()-(a.getCursor()-b.getBox().getStart())};return a}();a.canonicalType="emsg";f["default"]=a}),66);
__d("Mp4FullBox",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$2=a.readUint8(),this.$1=a.readUint8(),this.$1=a.readUint8()+(this.$1<<8),this.$1=a.readUint8()+(this.$1<<8),this.$3=b}var b=a.prototype;b.getVersion=function(){return this.$2};b.getFlags=function(){return this.$1};b.getBox=function(){return this.$3};return a}();f["default"]=a}),66);
__d("Mp4Demuxer",["DataViewReader","Mp4Box","Mp4FullBox"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=new(c("DataViewReader"))(a)}var b=a.prototype;b.parseBox=function(){return new(c("Mp4Box"))(this.$1)};b.parseFullBox=function(a){return new(c("Mp4FullBox"))(this.$1,a)};b.parseCanonicalBox=function(a,b){return new a(this.$1,b)};b.skipBox=function(a){this.$1.seek(a.getStart()+a.getSize())};b.withinBox=function(a){var b=this.$1.getCursor();return b>=a.getStart()&&b<a.getStart()+a.getSize()};b.atEnd=function(){return this.$1.getCursor()>=this.$1.getDataView().byteLength};b.reset=function(){this.$1.seek(0)};b.readBoxBodyText=function(a){this.$1.seek(a.getBodyStart());var b=new TextDecoder();a=new Uint8Array(this.$1.readBytes(a.getBodySize()));return b.decode(a)};return a}();g["default"]=a}),98);
__d("PolarisCountryCallingCodes",[],(function(a,b,c,d,e,f){"use strict";a=new Map([["AC","247"],["AD","376"],["AE","971"],["AF","93"],["AG","1"],["AI","1"],["AL","355"],["AM","374"],["AO","244"],["AR","54"],["AS","1"],["AT","43"],["AU","61"],["AW","297"],["AX","358"],["AZ","994"],["BA","387"],["BB","1"],["BD","880"],["BE","32"],["BF","226"],["BG","359"],["BH","973"],["BI","257"],["BJ","229"],["BL","590"],["BM","1"],["BN","673"],["BO","591"],["BQ","599"],["BR","55"],["BS","1"],["BT","975"],["BW","267"],["BY","375"],["BZ","501"],["CA","1"],["CC","61"],["CD","243"],["CF","236"],["CG","242"],["CH","41"],["CI","225"],["CK","682"],["CL","56"],["CM","237"],["CN","86"],["CO","57"],["CR","506"],["CU","53"],["CV","238"],["CW","599"],["CX","61"],["CY","357"],["CZ","420"],["DE","49"],["DJ","253"],["DK","45"],["DM","1"],["DO","1"],["DZ","213"],["EC","593"],["EE","372"],["EG","20"],["EH","212"],["ER","291"],["ES","34"],["ET","251"],["FI","358"],["FJ","679"],["FK","500"],["FM","691"],["FO","298"],["FR","33"],["GA","241"],["GB","44"],["GD","1"],["GE","995"],["GF","594"],["GG","44"],["GH","233"],["GI","350"],["GL","299"],["GM","220"],["GN","224"],["GP","590"],["GQ","240"],["GR","30"],["GT","502"],["GU","1"],["GW","245"],["GY","592"],["HK","852"],["HN","504"],["HR","385"],["HT","509"],["HU","36"],["ID","62"],["IE","353"],["IL","972"],["IM","44"],["IN","91"],["IO","246"],["IQ","964"],["IR","98"],["IS","354"],["IT","39"],["JE","44"],["JM","1"],["JO","962"],["JP","81"],["KE","254"],["KG","996"],["KH","855"],["KI","686"],["KM","269"],["KN","1"],["KP","850"],["KR","82"],["KW","965"],["KY","1"],["KZ","7"],["LA","856"],["LB","961"],["LC","1"],["LI","423"],["LK","94"],["LR","231"],["LS","266"],["LT","370"],["LU","352"],["LV","371"],["LY","218"],["MA","212"],["MC","377"],["MD","373"],["ME","382"],["MF","590"],["MG","261"],["MH","692"],["MK","389"],["ML","223"],["MM","95"],["MN","976"],["MO","853"],["MP","1"],["MQ","596"],["MR","222"],["MS","1"],["MT","356"],["MU","230"],["MV","960"],["MW","265"],["MX","52"],["MY","60"],["MZ","258"],["NA","264"],["NC","687"],["NE","227"],["NF","672"],["NG","234"],["NI","505"],["NL","31"],["NO","47"],["NP","977"],["NR","674"],["NU","683"],["NZ","64"],["OM","968"],["PA","507"],["PE","51"],["PF","689"],["PG","675"],["PH","63"],["PK","92"],["PL","48"],["PM","508"],["PR","1"],["PS","970"],["PT","351"],["PW","680"],["PY","595"],["QA","974"],["RE","262"],["RO","40"],["RS","381"],["RU","7"],["RW","250"],["SA","966"],["SB","677"],["SC","248"],["SD","249"],["SE","46"],["SG","65"],["SH","290"],["SI","386"],["SJ","47"],["SK","421"],["SL","232"],["SM","378"],["SN","221"],["SO","252"],["SR","597"],["SS","211"],["ST","239"],["SV","503"],["SX","1"],["SY","963"],["SZ","268"],["TA","290"],["TC","1"],["TD","235"],["TG","228"],["TH","66"],["TJ","992"],["TK","690"],["TL","670"],["TM","993"],["TN","216"],["TO","676"],["TR","90"],["TT","1"],["TV","688"],["TW","886"],["TZ","255"],["UA","380"],["UG","256"],["US","1"],["UY","598"],["UZ","998"],["VA","379"],["VC","1"],["VE","58"],["VG","1"],["VI","1"],["VN","84"],["VU","678"],["WF","681"],["WS","685"],["YE","967"],["YT","262"],["ZA","27"],["ZM","260"],["ZW","263"]]);b=a;f["default"]=b}),66);
__d("PolarisCountryCodeUtils",["PolarisConfig","PolarisCountryCallingCodes","memoize"],(function(a,b,c,d,e,f,g){"use strict";e=c("memoize")(function(){var a=d("PolarisConfig").getCountryCode()==="internal"?"US":d("PolarisConfig").getCountryCode(),b=c("PolarisCountryCallingCodes").get(a!=null?a:"");return a!=null&&b!=null?{code:a,phoneCode:b}:null});function a(a){var b=c("PolarisCountryCallingCodes").get(a||"");return a!=null&&b!=null?{code:a,phoneCode:b}:{code:"US",phoneCode:"1"}}function b(a){return a.code+" +"+a.phoneCode}g.getInitialCountryCode=e;g.countryCodeFromCode=a;g.stringFromCountryCode=b}),98);
__d("PolarisIGCoreBox",["cx","FBLogger","IGDSBox.react","err","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["__filesource","color","dangerouslySetClassName","shape"],j,k=j||d("react");a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);b.toMargin=function(a){var b;switch(a){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=4;break;case 5:b=5;break;case 6:b=6;break;case 7:b=7;break;case 8:b=8;break;case 9:b=9;break;case 10:b=10;break;case 11:b=11;break;case 12:b=12;break;case 13:b=13;break;case 14:b=14;break;case 15:b=15;break;case 16:b=16;break;case 17:b=17;break;default:b="auto";break}return b};var d=b.prototype;d.$1=function(a){var b=a.border;a=a.shape;return(b?"_ab8j":"")+(a==="circle"?" _ab8k":"")+(a==="rounded"?" _ab8l":"")+(a==="extra-rounded"?" _ab8m":"")};d.$2=function(a){a=a.color;return(a==="ig-primary-button"?"_ab8n":"")+(a==="ig-highlight-background"?" _ab8o":"")+(a==="web-secondary-action"?" _ab8p":"")+(a==="ig-secondary-background"?" _ab8q":"")+(a==="docpen-red"?" _ab8r":"")+(a==="ig-primary-background"?" _ab8s":"")+(a==="ig-primary-text"?" _ab8t":"")+(a==="web-always-white"?" _ab8u":"")+(a==="web-overlay-on-media"?" _ab8v":"")};d.$3=function(a){a=a.display;return(a==="flex"?"_ab8w":"")+(a==="block"?" _ab8x":"")+(a==="inlineBlock"?" _ab8y":"")+(a==="none"?" _ab8z":"")+(a==="visuallyHidden"?" _ab8-":"")};d.$4=function(a){var b=a.alignContent,c=a.alignItems,d=a.alignSelf,e=a.direction,f=a.flex,g=a.justifyContent;a=a.wrap;return(b==="start"?"_ab8_":"")+(b==="end"?" _ab90":"")+(b==="center"?" _ab91":"")+(b==="between"?" _ab92":"")+(b==="around"?" _ab93":"")+(b==="stretch"?" _ab94":"")+(c==="start"?" _ab95":"")+(c==="end"?" _ab96":"")+(c==="center"?" _ab97":"")+(c==="baseline"?" _ab98":"")+(c==="stretch"?" _ab99":"")+(d==="start"?" _ab9a":"")+(d==="end"?" _ab9b":"")+(d==="center"?" _ab9c":"")+(d==="baseline"?" _ab9d":"")+(d==="stretch"?" _ab9e":"")+(g==="start"?" _ab9f":"")+(g==="end"?" _ab9g":"")+(g==="center"?" _ab9h":"")+(g==="between"?" _ab9i":"")+(g==="around"?" _ab9j":"")+(e==="row"?" _ab9k":"")+(e==="rowReverse"?" _ab9l":"")+(e==="column"?" _ab9m":"")+(e==="columnReverse"?" _ab9n":"")+(f==="grow"?" _ab9o":"")+(f==="none"?" _ab9p":"")+(f==="shrink"?" _ab9q":"")+(a?" _ab9r":"")};d.$5=function(a){a.height;a.maxHeight;a.maxWidth;a.minHeight;a.minWidth;a.width;var b={};for(var c in arguments[0])arguments[0][c]!==void 0&&(b[c]=arguments[0][c]);return b};d.$6=function(a){a=a.overflow;return(a==="hidden"?"_ab9s":"")+(a==="scroll"?" _ab9t":"")+(a==="scrollX"?" _ab9u":"")+(a==="scrollY"?" _ab9v":"")+(a==="auto"?" _ab9w":"")};d.$7=function(a){var b=a.padding,c=a.paddingX;a=a.paddingY;c=c!==void 0?c:b;a=a!==void 0?a:b;return(c===1?"_ab9x":"")+(c===2?" _ab9y":"")+(c===3?" _ab9z":"")+(c===4?" _ab9-":"")+(c===5?" _ab9_":"")+(c===6?" _aba0":"")+(c===7?" _aba1":"")+(c===8?" _aba2":"")+(c===9?" _aba3":"")+(c===10?" _aba4":"")+(c===11?" _aba5":"")+(c===12?" _aba6":"")+(a===1?" _aba7":"")+(a===2?" _aba8":"")+(a===3?" _aba9":"")+(a===4?" _abaa":"")+(a===5?" _abab":"")+(a===6?" _abac":"")+(a===7?" _abad":"")+(a===8?" _abae":"")+(a===9?" _abaf":"")+(a===10?" _abag":"")+(a===11?" _abah":"")+(a===12?" _abai":"")};d.$8=function(a){var b=a.margin,c=a.marginBottom,d=a.marginEnd,e=a.marginStart;a=a.marginTop;c=c!==void 0?c:b;a=a!==void 0?a:b;e=e!==void 0?e:b;d=d!==void 0?d:b;return(c===1?"_abaj":"")+(c===2?" _abak":"")+(c===3?" _abal":"")+(c===4?" _abam":"")+(c===5?" _aban":"")+(c===6?" _abao":"")+(c===7?" _abap":"")+(c===8?" _abaq":"")+(c===9?" _abar":"")+(c===10?" _abas":"")+(c===11?" _abat":"")+(c===12?" _abau":"")+(c===13?" _abav":"")+(c===14?" _abaw":"")+(c===15?" _abax":"")+(c===16?" _abay":"")+(c===17?" _abaz":"")+(c==="auto"?" _aba-":"")+(e===1?" _aba_":"")+(e===2?" _abb0":"")+(e===3?" _abb1":"")+(e===4?" _abb2":"")+(e===5?" _abb3":"")+(e===6?" _abb4":"")+(e===7?" _abb5":"")+(e===8?" _abb6":"")+(e===9?" _abb7":"")+(e===10?" _abb8":"")+(e===11?" _abb9":"")+(e===12?" _abba":"")+(e===13?" _abbb":"")+(e===14?" _abbc":"")+(e===15?" _abbd":"")+(e===16?" _abbe":"")+(e===17?" _abbf":"")+(e==="auto"?" _abbg":"")+(d===1?" _abbh":"")+(d===2?" _abbi":"")+(d===3?" _abbj":"")+(d===4?" _abbk":"")+(d===5?" _abbl":"")+(d===6?" _abbm":"")+(d===7?" _abbn":"")+(d===8?" _abbo":"")+(d===9?" _abbp":"")+(d===10?" _abbq":"")+(d===11?" _abbr":"")+(d===12?" _abbs":"")+(d===13?" _abbt":"")+(d===14?" _abbu":"")+(d===15?" _abbv":"")+(d===16?" _abbw":"")+(d===17?" _abbx":"")+(d==="auto"?" _abby":"")+(a===1?" _abbz":"")+(a===2?" _abb-":"")+(a===3?" _abb_":"")+(a===4?" _abc0":"")+(a===5?" _abc1":"")+(a===6?" _abc2":"")+(a===7?" _abc3":"")+(a===8?" _abc4":"")+(a===9?" _abc5":"")+(a===10?" _abc6":"")+(a===11?" _abc7":"")+(a===12?" _abc8":"")+(a===13?" _abc9":"")+(a===14?" _abca":"")+(a===15?" _abcb":"")+(a===16?" _abcc":"")+(a===17?" _abcd":"")+(a==="auto"?" _abce":"")};d.$9=function(a){var b=a.bottom,c=a.left,d=a.position,e=a.right;a=a.top;return(b?"_abcf":"")+(c?" _abcg":"")+(d==="absolute"?" _abch":"")+(d==="fixed"?" _abci":"")+(d==="relative"?" _abcj":"")+(e?" _abck":"")+(a?" _abcl":"")};d.render=function(){if(l(this.props)){var a=this.props;a.__filesource;var b=a.color;a.dangerouslySetClassName;var d=a.shape;a=babelHelpers.objectWithoutPropertiesLoose(a,i);return k.jsx(c("IGDSBox.react"),babelHelpers["extends"]({},a,{color:m(b),shape:n(d)}))}a=this.props;b=a.accessibilityLabel;d=a.accessibilityLabelledBy;var e=a.alignContent,f=a.alignItems,g=a.alignSelf,h=a.border,j=a.bottom,o=a.children,p=a.color,q=a.containerRef,r=a.dangerouslySetClassName,s=a["data-testid"];s=a["data-visualcompletion"];var t=a.direction,u=a.display,v=a.flex,w=a.height,x=a.id,y=a.justifyContent,z=a.left,A=a.margin,B=a.marginBottom,C=a.marginEnd,D=a.marginStart,E=a.marginTop,F=a.maxHeight,G=a.maxWidth,H=a.minHeight,I=a.minWidth,J=a.overflow,K=a.padding,L=a.paddingX,M=a.paddingY,N=a.position,O=a.right,P=a.shape,Q=a.top,R=a.width;a=a.wrap;h=this.$1({border:h,shape:P});P=this.$2({color:p});p=this.$3({display:u});u=this.$4({alignContent:e,alignItems:f,alignSelf:g,direction:t,flex:v,justifyContent:y,wrap:a});e=this.$8({margin:A,marginBottom:B,marginEnd:C,marginStart:D,marginTop:E});f=this.$6({overflow:J});g=this.$7({padding:K,paddingX:L,paddingY:M});t=this.$9({bottom:j,left:z,position:N,right:O,top:Q});v=c("joinClasses")(h,P,p,u,e,f,g,t);y=c("joinClasses")(v,r==null?void 0:r.__className,"_abcm");return k.jsx("div",babelHelpers["extends"]({},{},{"aria-label":b,"aria-labelledby":d,className:y,"data-testid":void 0,"data-visualcompletion":s,id:x,ref:q,style:this.$5({height:w,maxHeight:F,maxWidth:G,minHeight:H,minWidth:I,width:R}),children:o}))};return b}(k.PureComponent);a.defaultProps={alignContent:"stretch",alignItems:"stretch",alignSelf:"auto",border:!1,bottom:!1,color:"transparent",direction:"column",display:"flex",flex:"none",justifyContent:"start",left:!1,margin:0,overflow:"visible",padding:0,position:"static",right:!1,shape:"square",top:!1,wrap:!1};function l(a){return a.dangerouslySetClassName!=null?!1:!0}function m(a){switch(a){case"ig-primary-background":return"primaryBackground";case"ig-secondary-background":return"secondaryBackground";case"ig-highlight-background":return"highlightBackground";case"ig-primary-button":return"primaryButton";case"web-secondary-action":return"secondaryAction";case"transparent":return"transparent";case"ig-primary-text":return"primaryText";case"web-always-white":return"alwaysWhite";default:c("FBLogger")("ig_web").catching(c("err")('Attempted to map PolarisIGCoreBox color "%s" which has no IGDS equivalent',a));return"transparent"}}function n(a){switch(a){case"square":case"rounded":case"circle":return a;case"extra-rounded":return"extraRounded";default:c("FBLogger")("ig_web").catching(c("err")('Attempted to map PolarisIGCoreBox shape "%s" which has no IGDS equivalent',a));return"square"}}g["default"]=a}),98);
__d("PolarisIGCorePhoneNumberInput.react",["cx","fbt","IGCoreModal.react","IGDSBox.react","IGDSDivider.react","IGDSText.react","ISOCountryCode","PolarisAssetManagerGlyphMapping","PolarisGenericStrings","PolarisIGCoreBox","PolarisIGCoreButton.react","PolarisIGCoreIconButton.react","PolarisIGCoreModalHeader.react","PolarisIGCoreTextInput.react","PolarisIGVirtualList.react","memoizeWithArgs","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("memoizeWithArgs")(function(a,b,d){return Array.from(b.entries()).filter(function(b){var e=b[0];b[1];b=d[c("ISOCountryCode")[e]];if(!b)return!1;if(a==="")return!0;if(e.toUpperCase().includes(a))return!0;return b.toUpperCase().includes(a)?!0:!1})},function(a){return a}),m=k.memo(function(a){return k.jsx(c("PolarisIGCoreBox"),{dangerouslySetClassName:a.isFirst?void 0:{__className:"_aa89"},height:n,marginEnd:4,marginStart:4,children:k.jsx("button",{className:"_aa8a",onClick:a.onChangeCountryCode,type:"button",children:k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"between",position:"relative",children:[k.jsx(c("IGDSText.react"),{children:a.countryName}),k.jsx(c("IGDSText.react"),{color:"secondaryText",children:"+"+a.phoneCode})]})})})}),n=54;a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={filterText:"",showCountryCodeSelector:!1},b.$1=function(a){var c=b.props.onBlur;c&&c(a)},b.$2=function(a){var c=b.props.onFocus;c&&c(a)},b.$3=function(a){var c=b.props.onFocusCountryCode;c&&c(a)},b.onCloseModal=function(){b.setState({showCountryCodeSelector:!1})},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.displayPhoneCode=function(a){return a==null?"":a.code+" +"+a.phoneCode};e.getListOption=function(a){var b=this;return function(d){d=d.index;var e=a[d],f=e[0],g=e[1];return k.jsx(m,{countryCodeValue:f,countryName:b.props.countryNamesMap[c("ISOCountryCode")[f]],isFirst:d===0,onChangeCountryCode:function(){b.props.onChangeCountryCode({code:f,phoneCode:g}),b.onCloseModal()},phoneCode:g},f)}};e.render=function(){var a=this,b=this.props,e=b["aria-describedby"],f=b["aria-label"],g=b["aria-labelledby"],h=b.backgroundColor,j=b.disabled,m=b.endAdornment,o=b.hasError,p=b.maxLength,q=b.onChange,r=b.onKeyDown,s=b.placeholder,t=b.readOnly,u=b.required,v=b.style;b=b.value;var w=k.jsx("div",{className:"_aa8b",children:k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,color:"ig-secondary-button",onClick:function(){return a.setState({showCountryCodeSelector:!0})},children:k.jsx(c("IGDSText.react"),{color:"primaryButton",weight:"semibold",zeroMargin:!0,children:this.displayPhoneCode(this.props.countryCode)})})}),x=l(this.state.filterText.toUpperCase(),this.props.countryCodesMap,this.props.countryNamesMap),y=i._(/*BTDS*/"Select Country");return k.jsxs(k.Fragment,{children:[this.state.showCountryCodeSelector&&k.jsxs(c("IGCoreModal.react"),{"aria-label":y,dangerouslySetClassName:{__className:"_aa8c"},onClose:this.onCloseModal,size:"large",children:[" ",k.jsx(c("PolarisIGCoreModalHeader.react"),{onClose:this.onCloseModal,children:y}),k.jsxs(c("IGDSBox.react"),{position:"relative",children:[k.jsx(c("IGDSBox.react"),{marginEnd:2,marginStart:2,position:"relative",children:k.jsx(c("PolarisIGCoreTextInput.react"),{backgroundColor:"transparent",name:"filter",onChange:function(b){return a.setState({filterText:b.target.value})},onFocus:this.$3,placeholder:i._(/*BTDS*/"Country name or code"),startAdornment:k.jsx(c("PolarisIGCoreIconButton.react"),{alt:d("PolarisGenericStrings").SEARCH_TEXT,icon:d("PolarisAssetManagerGlyphMapping").ICONS.SEARCH_OUTLINE_24_GREY9}),style:"borderless",type:"search",value:this.state.filterText})}),k.jsx(c("IGDSDivider.react"),{}),k.jsx(c("PolarisIGVirtualList.react"),{className:"_aa8d",containerSize:"auto",estimatedItemSize:n,itemCount:x.length,renderer:this.getListOption(x)})]})]}),k.jsx(c("PolarisIGCoreTextInput.react"),{"aria-describedby":e,"aria-label":f,"aria-labelledby":g,autoComplete:"tel",backgroundColor:h,dangerouslySetClassName:{__className:"_aa8e"},disabled:j,endAdornment:m,hasError:o,maxLength:p,name:"phone",onBlur:this.$1,onChange:q,onFocus:this.$2,onKeyDown:r,placeholder:s,readOnly:t,required:u,startAdornment:w,style:v,type:"tel",value:b})]})};return b}(k.Component);g["default"]=a}),226);
__d("PolarisVideoHelpers",["PolarisMediaTypes","PolarisSizing"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.dashInfo==null)return null;a=a.dashInfo;var b=a.is_dash_eligible,c=a.number_of_qualities;a=a.video_dash_manifest;return!b||a==null?null:{isDashEligible:b,numberOfQualities:c,videoDashManifest:a}}function h(a,b){return(a=a.videoResources)==null?void 0:a.find(function(a){return a.type===b})}function b(a){var b;return(b=(b=h(a,d("PolarisMediaTypes").MediaVersionType.VIDEO_480_HIGH))==null?void 0:b.src)!=null?b:(b=h(a,d("PolarisMediaTypes").MediaVersionType.VIDEO_480_LOW))==null?void 0:b.src}function c(a){return(a=h(a,d("PolarisMediaTypes").MediaVersionType.VIDEO_640_HIGH))==null?void 0:a.src}function e(a,b){return{autoplayGatingResult:"unknown",autoplaySetting:a===!0?"default_autoplay":"off",canAutoplay:a===!0||b===!0?"allow":"deny"}}function f(a,b){if(a==null)return 100;a=d("PolarisSizing").getHeightPercent(a);return b?Math.min(a,d("PolarisSizing").CAPPED_HEIGHT_PERCENT):a}g.getDashInfoFromPost=a;g.getSDVideoSrcFromPost=b;g.getHDVideoSrcFromPost=c;g.getVideoPlayerAutoplayProps=e;g.getVideoPaddingPercentFromDimensions=f}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.state={error:null},b.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);b.getDerivedStateFromError=function(a){return{error:c("getErrorSafe")(a)}};var e=b.prototype;e.componentDidCatch=function(a,b){b=b.componentStack;var e=c("getErrorSafe")(a);e.componentStack=b;b=this.props;var f=b.description,g=b.onError;b=b.project;a=d("oz-player/utils/OzErrorUtils").isOzError(a)?a.getType():a!=null&&typeof a.name==="string"?a.name:e.name;try{e.name=a}catch(a){}a="VideoPlayerErrorBoundary caught an "+a;f!=null&&(a=a+" ("+f+")");f=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"];var h=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"];f=f.every(function(a){return e.name!==a})&&h.every(function(a){return!e.message.startsWith(a)});h=c("FBLogger")(b==null?"comet_video_player":b).catching(e);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(e.name)&&(h=h.addToCategoryKey(e.message));f?h.fatal(a):h.warn(a);g!=null&&g(e)};e.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.error;return c?typeof a==="function"?a(c):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("VideoPlayerSurface.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");function a(a){a=a.children;return a!=null?a:null}a.displayName=a.name+" [from "+f.id+"]";c=b.memo(a);g["default"]=c}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));g["default"]=a}),98);
__d("VideoPlayerIMFMetadataContext",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j={imfExpectedFromEmsg:!1,specInlineJson:null},k=b.createContext(j);k.displayName="VideoPlayerIMFMetadataContext";e=k.Provider;function a(){var a=i(k);if(a===j)throw c("unrecoverableViolation")("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.","comet_video_player");return a}g.VideoPlayerIMFMetadataContextProvider=e;g.useVideoPlayerIMFMetadataFromContext=a}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:13141")==null||b("cr:13141").extend(),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useId;function a(){var a=(i||(i=d("VideoPlayerHooks"))).usePlaying(),b=k();j(function(){if(a){d("WebSessionExtender").subscribe(b,"video");return function(){d("WebSessionExtender").unsubscribe(b)}}},[a,b]);return null}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=(h||(h=d("VideoPlayerHooks"))).useStalling(),b=h.useStreamInterrupted(),c=h.useIsLiveRewindActive();b=b&&!c;c=a;a=b?"live_video_interrupted_overlay":c?"spinner":"none";return{liveVideoInterruptedOverlayVisible:b,loadingIndicatorType:a,spinnerVisible:c}}g["default"]=a}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),k=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),l=c("once")(function(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,name:f.id,children:i.jsx(k,{})})});function a(){var a=c("useVideoPlayerDefaultLoadingIndicatorsLogic")(),b=a.loadingIndicatorType;a=a.spinnerVisible;a=i.jsx(j,{isVisible:a});var d=null;switch(b){case"spinner":d=a;break;case"live_video_interrupted_overlay":d=l();break;case"none":default:d=a}return{loadingIndicatorElement:d,loadingIndicatorType:b}}g["default"]=a}),98);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.values(c("CVCv3DisabledPlayerOrigins")),i=Object.values(c("CVCv3DisabledPlayerSubOrigins")),j=10;a=function(){function a(a,b,d,e,f,g){var j=this;this.$1=new(c("CVCv3SubscriptionHelper"))(a,b,d);this.$5=f;this.$6=null;this.$9=null;this.$10=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=b!=null?h.includes(b):!1;f=d!=null?i.includes(d):!1;!a&&!f&&(this.$3=e,this.$11=g,this.$4=e.subscribe(function(){if(j.$3==null){j.$1.logDebugInfo("empty_video_controller");return}var a=j.$3.getCurrentState();a.playing?j.$12(a):j.$13()}))}var b=a.prototype;b.$12=function(a){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(a.playing){if(this.$2==null){a=this.$3.getPlayheadPosition();a>=0&&(this.$2=a)}}else this.$2=null;this.$14(0)};b.stopUnifiedCVC=function(){this.$13()};b.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};b.$13=function(){c("clearTimeout")(this.$8),c("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.$15=function(){c("clearTimeout")(this.$7),this.$7=null};b.$16=function(){this.$9=null,this.$15(),this.$14(0)};b.$14=function(a){var b=this;if(this.$3==null||this.$8!=null||this.$9!=null||this.$10)return;this.$8=c("setTimeout")(function(){b.$8=null;var a=b.$17();if(a==null){b.$1.logDebugInfo("empty_request");return}b.$9=a;var e=Date.now(),f=!1;c("promiseDone")(a,function(c){if(a!==b.$9)return;b.$9=null;if(c!=null){c=b.$1.processUnifiedResponse(c);b.$18(c,e)}else b.$1.logHttpResponseBad("null payload",Date.now()-e)},function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?JSON.stringify(a):null,Date.now()-e)});b.$7=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$16()},j*d("DateConsts").MS_PER_SEC)},a)};b.$18=function(a,b){this.$15();b=Date.now()-b;a.d!=null?(this.$1.logHttpRequestSuccess(b),this.$11!=null&&this.$11(a.d)):this.$1.logHttpResponseBad("no data field",b);if(a.a!=null){b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=j);this.$14(b*d("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}};b.$17=function(){var a=this.$19();if(a==null)return null;a={d:JSON.stringify(a)};return c("cometAsyncFetch")(c("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};b.$19=function(){if(this.$3==null)return null;var a={};this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$20(d),d.muted,a);return b};b.$20=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};b.testing_setLastStartPosition=function(a){this.$2=a};b.testing_makeUnifiedStateUpdate=function(){return this.$19()};b.testing_handleUnifiedResponse=function(a){return this.$18(a,Date.now())};return a}();g["default"]=a}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.setterHook;e=d("createVideoStateHook").createVideoStateHook(null);var l=e.setterHook;f=e.valueHook;function a(a){var b=a.disableSubscription,e=a.playerFormat,f=a.subOrigin,g=a.videoFBID,h=(i||(i=d("VideoPlayerHooks"))).useIsLive(),m=i.useIsFullscreen(),n=i.useIsDesktopPictureInPicture(),o=i.useController(),p=k(),q=l();j(function(){if(b===!0){c("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:g,name:"disable_subscription"}});return}var a=new(c("UnifiedVideoCVCSubscription"))(g,c("getPlayerFormatForLogData")({isDesktopPictureInPicture:n,isFullscreen:m},e),f,o,h,function(a){q(a)});p(a);return function(){a.destroy()}},[n,m,h,b,e,q,p,f,o,g])}b=f;g.useVideoPlayerUnifiedCVCProvider=a;g.useVideoPlayerUnifiedCVCData=b}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerHooks","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useImperativeHandle,l=(e=b("cr:99"))==null?void 0:e.VideoPlayerWithDebugOverlay;function a(a){var e=a.apiRef,f=a.children,g=a.disableCVCSubscription,h=a.disableLoadingIndicator;h=h===void 0?!1:h;var m=a.disableLogging,n=a.instreamVideoAdBreaksPlayer,o=a.playerFormat,p=a.subOrigin,q=a.videoFBID,r=a.videoPlayerIMFFromVideoMetadata;a=a.videoPlayerSpherical;var s=(i||(i=d("VideoPlayerHooks"))).useController(),t=d("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo();k(typeof e==="function"?e:null,function(){return{controller:s,portalingPlaceInfo:t}},[s,t]);d("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider({disableSubscription:m===!0||g===!0,playerFormat:o,subOrigin:p,videoFBID:q});e=c("useVideoPlayerDefaultLoadingIndicators")();m=e.loadingIndicatorElement;return j.jsxs(d("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:r!=null?r:null,children:[a,h?null:m,c("gkx")("24328")?j.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,j.jsxs(c("VideoPlayerCaptionsAreaDeferred.react"),{children:[f,n]}),j.jsx(c("CoreVideoPlayerAutoplayClient.react"),{}),j.jsx(c("CoreVideoPlayerAudioClient.react"),{}),b("cr:1954434")?j.jsx(b("cr:1954434"),{}):null,l?j.jsx(l,{subOrigin:p}):null,j.jsx(c("VideoPlayerWebSessionExtender.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerMetaData","CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","react","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";var h=["apiRef","children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"],i,j=i||d("react");function a(a){var b=a.apiRef,e=a.children,f=a.disableLoadingIndicator,g=a.implementations,i=a.instreamVideoAdBreaksPlayer,k=a.portalingEnabled,l=a.portalingFromVideoID,m=a.portalingPlaceMetaData,n=a.portalingRenderPlaceholder,o=a.videoPlayerIMFFromVideoMetadata,p=a.videoPlayerSpherical;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var q=c("usePlayerOriginRouteTracePolicy")(),r=c("useRouteProductAttribution")();r||(r=a.productAttribution);a=d("CoreVideoPlayerMetaData").applyDefaultsToCoreVideoPlayerMetaData(babelHelpers["extends"]({},a,{productAttribution:r,routeTracePolicy:q}));return j.jsx(c("CoreVideoPlayerWithComponents.react"),{coreVideoPlayerMetaData:a,implementations:g,portalingEnabled:k,portalingFromVideoID:l,portalingPlaceMetaData:m,portalingRenderPlaceholder:n,children:j.jsx(c("VideoPlayerXImplSurface.react"),{apiRef:b,children:e,disableCVCSubscription:a.loggingConfig.disableCVCSubscription,disableLoadingIndicator:f,disableLogging:a.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:i,playerFormat:a.playerFormat,subOrigin:a.subOrigin,videoFBID:a.videoFBID,videoPlayerIMFFromVideoMetadata:o,videoPlayerSpherical:p})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometLink.react","FDSText.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=c("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list";return j.jsx(c("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:j.jsx(c("CometLink.react"),{href:a,target:"_blank",children:h._(/*BTDS*/"Learn more")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:2324","cr:4149","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var d=a.background,e=a.debugError,f=a.message,g=a.showDebugWithoutError;g=g===void 0?!0:g;a=a.showLearnMoreLink;a=a===void 0?!0:a;return i.jsxs("div",{className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3",children:[i.jsxs("div",babelHelpers["extends"]({},{0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[!!(d!=null)<<0],{children:[i.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w",children:i.jsx(c("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:f})}),a&&i.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:i.jsx(c("VideoPlayerFallbackLearnMoreLink.react"),{})}),(e!=null||g)&&i.jsxs(i.Fragment,{children:[b("cr:4149")?i.jsx(b("cr:4149"),{error:e}):null,b("cr:2324")?i.jsx(b("cr:2324"),{error:e}):null]})]})),d!=null&&i.jsx("div",{className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.background,d=a.debugError,e=a.message,f=a.showDebugWithoutError;a=a.showLearnMoreLink;e=e!=null?e:h._(/*BTDS*/"Sorry, we're having trouble playing this video.");return j.jsx(c("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:b,debugError:d,message:e,showDebugWithoutError:f,showLearnMoreLink:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return c("gkx")("24345")&&a.message.toLowerCase().indexOf("audio_renderer_error")>=0}function j(a){return a.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function k(a){return a.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||a.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function l(a){return a.name==="OZ_NETWORK"&&a.message.includes("CDN URL expired")}function a(a){var b=null;i(a)?b=h._(/*BTDS*/"Audio renderer error: Please restart your computer."):j(a)?b=h._(/*BTDS*/"This video is DRM-protected, but your device certificate appears to be revoked. Please make sure your browser is up to date, and try again."):k(a)?b=h._(/*BTDS*/"This video cannot be played in the browser, operating system, or hardware you're using."):l(a)&&(b=h._(/*BTDS*/"This video content isn't available right now."));return b}g["default"]=a}),226);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=c("getVideoPlayerUserFacingErrorMessageFromError")(a);return i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerX.react",["VideoPlayerErrorBoundary.react","VideoPlayerXImpl.react","defaultErrorBoundaryFallback","react"],(function(a,b,c,d,e,f,g){"use strict";var h=["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"],i,j=i||d("react");function a(a){var b=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;b=b===void 0?!1:b;var d=a.errorBoundaryFallback;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=j.jsx(c("VideoPlayerXImpl.react"),babelHelpers["extends"]({VideoPlayerShakaPerformanceLoggerClass:null,isSpherical:a.videoPlayerSpherical!=null},a));return b?a:j.jsx(c("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerX",fallback:d!=null?d:c("defaultErrorBoundaryFallback"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("computeAspectRatio",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a!=null&&b!=null&&a!==0&&b!==0?a/b:null}f["default"]=a}),66);
__d("usePolarisLOXLogExposureViaGraphQL",["CometRelay","fetchPolarisLoggedOutExperiment","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a,b){var e=d("react-compiler-runtime").c(4),f=d("CometRelay").useRelayEnvironment(),g=j(!1),h;e[0]!==b||e[1]!==f||e[2]!==a?(h=function(){!g.current&&a&&c("promiseDone")(c("fetchPolarisLoggedOutExperiment")(f,b)["finally"](function(){g.current=!0}))},e[0]=b,e[1]=f,e[2]=a,e[3]=h):h=e[3];i(h,void 0)}g["default"]=a}),98);
__d("usePolarisGetDashInfo",["PolarisConfig","PolarisRoutePropUtils","PolarisVideoUA","qex","react","react-compiler-runtime","usePolarisLOXLogExposureViaGraphQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function j(a){return a==null?!1:d("PolarisVideoUA").doesPlatformSupportDash()}function a(a){var b=d("react-compiler-runtime").c(5),e;b[0]!==a?(e=j(a),b[0]=a,b[1]=e):e=b[1];e=e;var f=i(d("PolarisRoutePropUtils").PolarisRoutePropContext);f=f==null?void 0:f.routePropQE.getBool("is_ios_video_dash_enabled");var g;b[2]!==e?(g=d("PolarisConfig").isLoggedOutUserMobile()&&e,b[2]=e,b[3]=g):g=b[3];var h;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h={name:"ig_mweb_dash_video_playback_universe",param:"is_dash_disabled"},b[4]=h):h=b[4];c("usePolarisLOXLogExposureViaGraphQL")(g,h);if(!e)return null;if(d("PolarisConfig").isLoggedOutUserMobile()&&d("PolarisVideoUA").isIOSMMSESupportedBrowser()&&!f)return null;return d("PolarisConfig").isLoggedOutUserMobile()&&((b=c("qex")._("4664"))!=null?b:!1)?null:a}g["default"]=a}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return/\.mpd(\?|$)/.test(a)}function a(a){var b=a.hdSrc,d=a.hdSrcPreferred;a=a.sdSrc;if(b==null&&a==null){var e=c("err")("Both HD and SD browser-native URLs are not available");e.name="GotNoBrowserNativeURLs";return e}if(a==null){e=c("err")("Browser-native SD URL is not available");e.name="GotNoBrowserNativeSDURL";return e}e=h(a);var f=b!=null&&h(b);if(e||f){e=c("err")("HD or SD browser-native URL points to a DASH manifest");e.name="GotBrowserNativeURLsPointToDASH";return e}return{hdSrc:b,hdSrcPreferred:d,sdSrc:a}}g.makeProgressiveImplementationData=a}),98);
__d("VideoLiveTrace",["DataViewReader","LiveTraceWwwVideoPlayerFalcoEvent","Mp4DASHEventMessageBox","Mp4Demuxer","throttle"],(function(a,b,c,d,e,f,g){var h="x-fb-video-livetrace-ids",i="x-fb-video-livetrace-parentsource",j="x-fb-video-livetrace-streamtype",k="x-fb-origin-hit",l="x-fb-edge-hit",m="PLY:WWW:",n=m+"DL:",o=m+"DIS:",p=1e3,q=/[\r\n]+/;a=function(){function a(a,b,d){var e=this;this.$6=[];this.$1=a;this.$2=null;a=d+":"+b.substring(0,5);this.$3=m+a;this.$4=n+a;this.$5=o+a;this.$7=c("throttle")(function(a){return e.$8(a)},p)}var b=a.prototype;b.setStreamType=function(a){this.$2=a};b.$9=function(a,b,d,e,f,g){var h,i=this,j=Date.now(),k=(h=this.$2)!=null?h:0;c("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:i.$1,stream_type:k,event_name:b,event_severity:f,event_creation_time:j,source:a,trace_id:d,parent_source:e,metadata:g}})};b.onUpdateStatus=function(a){this.$7(a)};b.$8=function(a){a=a.position*1e3;for(var b=this.$6.length-1;b>=0;b--){var c=this.$6[b];if(c.presentationTimestamp>a)continue;if(c.displayTimestamp==null)c.displayTimestamp=Date.now();else continue;this.$9(this.$5,"FRAME",c.traceId,this.$4,"SUCCESS",null)}};b.getAndFlushTracedFrames=function(){var a,b={currentTimeMs:Date.now(),streamId:this.$1},c={dl:[],dis:[]},d=[];this.$6.forEach(function(a){a.hasBeenFlushedAsDownloaded||(c.dl.push({id:a.traceId,timeMs:a.downloadTimestamp}),a.hasBeenFlushedAsDownloaded=!0),a.displayTimestamp!=null?c.dis.push({id:a.traceId,timeMs:a.displayTimestamp}):d.push(a)});this.$6=d;b[(a=this.$2)!=null?a:0]=c;return c.dl.length>0||c.dis.length>0?b:null};b.handleHeadersString=function(a,b){a=a.trim().split(q);this.$10(a.map(function(a){a=a.split(": ");return[a.shift().toLowerCase(),a.shift()]}),b)};b.handleHeaders=function(a,b){this.$10(this.$11(a),b)};b.handleHeadersAndBody=function(a,b,c){this.$12(this.$11(a),b,c)};b.$11=function(a){var b=[];for(a of a.entries())b.push(a);return b};b.$13=function(a){var b=Date.now(),d=new Map(),e=a.reduce(function(a,b){return a+b.byteLength},0),f=new Uint8Array(e),g=0;a.forEach(function(a){f.set(a,g),g+=a.byteLength});e=new(c("Mp4Demuxer"))(new DataView(f.buffer,f.byteOffset,f.byteLength));while(!e.atEnd()){a=e.parseBox();if(a.getType()===c("Mp4DASHEventMessageBox").canonicalType){var h=e.parseCanonicalBox(c("Mp4DASHEventMessageBox"),e.parseFullBox(a));if(h instanceof c("Mp4DASHEventMessageBox")){var i;i=(i=h.getEmsgFields())==null?void 0:i.schemeIdUri;if(i!=null&&i.startsWith("livedash:trace:")){i=h.getMessageData();h=new(c("DataViewReader"))(i).readZeroTerminatedString(i.byteLength);try{i=JSON.parse(h);Array.isArray(i)&&i.filter(function(a){return Array.isArray(a)&&a.length===2}).forEach(function(a){var c=a[0];a=a[1];d.set(c,{displayTimestamp:null,downloadTimestamp:b,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:a,traceId:c})})}catch(a){}}}}e.skipBox(a)}return d};b.$14=function(a,b){var c=this,d="null",e=Date.now(),f=new Map(),g="";a.forEach(function(a){var b=a[0].toLowerCase();a=a[1];if(b===h&&a){var m=a.split(",");m.forEach(function(a){a=a.split(":");var b=+a[0];a=+a[1];f.set(b,{displayTimestamp:null,downloadTimestamp:e,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:a,traceId:b})})}b===i&&(g=a);c.$2===null&&b===j&&(c.$2=parseInt(a,10));(b===k||b===l)&&parseInt(a,10)&&(d=b===k?"origin":"edge")});a=b||{};a.hit=d;return g!==""?{tracedFrames:f,eventMetaData:a,parentSource:g,streamType:this.$2}:null};b.$12=function(a,b,c){var d=this.$14(a,c);if(d==null||d.parentSource==="")return;if(b!=null&&b.length){a=this.$13(b);a.forEach(function(a,b){d.tracedFrames.set(b,a)})}this.$6=this.$6.concat(Array.from(d.tracedFrames.values()));c=d.tracedFrames.keys();for(b of c)this.$9(this.$4,"SEGMENT",b,d.parentSource,"SUCCESS",d.eventMetaData)};b.$10=function(a,b){this.$12(a,null,b)};b.handleXHR=function(a,b){this.handleHeadersString(a.getAllResponseHeaders(),b)};b.getLiveTraceContext=function(){return this.$2!=null?{streamId:this.$1,streamType:this.$2,sourceId:this.$3}:null};return a}();g["default"]=a}),98);
__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1914651");b=d("FalcoLoggerInternal").create("video_player_www",a);e=b;g["default"]=e}),98);
__d("VideoPlayerWwwLogger",["VideoPlayerWwwFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b,c=a.logData.live_trace_stream_id!==null&&a.logData.live_trace_stream_type!==null;return{access_token:a.logData.access_token,ad_client_token:a.logData.ad_client_token,attribution_id:a.logData.attribution_id,attribution_id_v2:a.logData.attribution_id_v2,attribution_id_v2_root:a.logData.attribution_id_v2_root,audio_only:a.logData.audio_only,audio_representation_id:a.logData.audio_representation_id,autoplay_eligible:a.logData.autoplay_eligible,autoplay_failure_reasons:a.logData.autoplay_failure_reasons,autoplay_setting:a.logData.autoplay_setting,available_qualities:a.logData.available_qualities,broadcaster_origin:a.logData.broadcaster_origin,browser_tab_id:a.logData.browser_tab_id,caption_state:a.logData.caption_state,cast_client_app_id:a.logData.cast_client_app_id,client_latency_setting:a.logData.client_latency_setting,current_playback_speed:a.logData.current_playback_speed,current_viewability_percentage:Number(a.logData.current_viewability_percentage),current_volume:a.logData.current_volume,dash_perf_logging_enabled:a.logData.dash_perf_logging_enabled,data_connection_quality:a.logData.data_connection_quality,debug_reason:a.logData.debug_reason,device_id:a.logData.device_id,device_type:a.logData.device_type,downstream_share_origin_uri:a.logData.downstream_share_origin_uri,downstream_share_start_time:a.logData.downstream_share_start_time,downstream_share_visit_uuid:a.logData.downstream_share_visit_uuid,dropped_frame_count:Number(a.logData.dropped_frame_count),error:a.logData.error,error_code:a.logData.error_code,error_description:a.logData.error_description,error_domain:a.logData.error_domain,error_type:a.logData.error_type,error_user_info:a.logData.error_user_info,event_name:a.eventType,event_seq_num:a.logData.event_seq_num,external_log_id:a.logData.external_log_id,external_log_type:a.logData.external_log_id,fb_manifest_identifier:a.logData.fb_manifest_identifier,feed_aggregation_type:a.logData.feed_aggregation_type,feed_position:a.logData.feed_position,frame_events:a.logData.frame_events,ft:a.logData.ft,imf_emsg_id:a.logData.imf_emsg_id,imf_event_type:a.logData.imf_event_type,imf_topic:a.logData.imf_topic,interrupt_count:a.logData.interrupt_count!==null?Number(a.logData.interrupt_count):null,interrupt_time:Number(a.logData.interrupt_time),is_abr_enabled:a.logData.is_abr_enabled,is_fbms:a.logData.is_fbms,is_live_preview:(b=a.logData.is_live_preview)!=null?b:!1,is_live_video_rewound:a.logData.is_live_video_rewound,is_mixed_codec_manifest:a.logData.is_mixed_codec_manifest,is_p2p_playback:a.logData.is_p2p_playback,is_pip:a.logData.is_pip,is_predictive_playback:a.logData.is_predictive_playback,is_sound_on:a.logData.is_sound_on,is_stalling:a.logData.is_stalling,is_templated_manifest:a.logData.is_templated_manifest,last_viewability_percentage:Number(a.logData.last_viewability_percentage),live_trace_source_id:a.logData.live_trace_source_id,live_trace_stream_id:c?a.logData.live_trace_stream_id:null,live_trace_stream_type:c?a.logData.live_trace_stream_type:null,mpd_validation_errors:a.logData.mpd_validation_errors,network_connected:a.logData.network_connected,next_quality_label:a.logData.next_quality_label,next_representation_id:a.logData.next_representation_id,next_video_codecs:a.logData.next_video_codecs,notification_id:a.logData.notification_id,notification_medium:a.logData.notification_medium,offset_ms:a.logData.offset_ms!=null?String(a.logData.offset_ms):null,permalink_share_id:a.logData.permalink_share_id,playback_caption_format:a.logData.playback_caption_format,playback_caption_locale:a.logData.playback_caption_locale,playback_duration:a.logData.playback_duration,playback_is_broadcast:a.logData.playback_is_broadcast,playback_is_drm:a.logData.playback_is_drm,playback_is_live_streaming:a.logData.playback_is_live_streaming,player_format:a.logData.player_format,player_instance_key:a.logData.player_instance_key,player_mode:a.logData.player_mode,player_origin:a.logData.player_origin,player_state:a.logData.player_state,player_suborigin:a.logData.player_suborigin,player_version:a.logData.player_version,projection:a.logData.projection,quality_label:a.logData.quality_label,reaction_video_channel_type:a.logData.reaction_video_channel_type,representation_id:a.logData.representation_id,resource_url:a.logData.resource_url,routeTracePolicy:a.routeTracePolicy,seq_num:a.logData.seq_num,source:a.source_VPL_LOGGING_HACK,source_VPL_LOGGING_HACK:a.logData.source_VPL_LOGGING_HACK,srt_job_id:a.logData.srt_job_id,srt_job_tracking_id:a.logData.srt_job_tracking_id,stall_count:Number(a.logData.stall_count),stall_count_200_ms:Number(a.logData.stall_count_200_ms),stall_time:Number(a.logData.stall_time),state:a.logData.state,streaming_format:a.logData.streaming_format,time_ms:a.logData.time_ms,total_frame_count:Number(a.logData.total_frame_count),tracking_data_encrypted:a.logData.tracking_data_encrypted,tracking_nodes:a.logData.tracking_nodes,tv_session_id:a.logData.tv_session_id,v2_heart_beat:a.logData.v2_heart_beat,video_bandwidth:a.logData.video_bandwidth,video_buffer_end_position:a.logData.video_buffer_end_position,video_chaining_depth_level:a.logData.video_chaining_depth_level,video_chaining_parent_video_id:a.logData.video_chaining_parent_video_id,video_chaining_session_id:a.logData.video_chaining_session_id,video_channel_id:a.logData.video_channel_id,video_codecs:a.logData.video_codecs,video_id:a.logData.video_id,video_last_start_time_position:a.logData.video_last_start_time_position,video_play_reason:a.logData.video_play_reason,video_player_height:Number(a.logData.video_player_height),video_player_width:Number(a.logData.video_player_width),video_time_position:a.logData.video_time_position,vpts:a.logData.vpts,web_client_revision:a.logData.web_client_revision}}a={logComet:function(a){c("VideoPlayerWwwFalcoEvent").log(function(){return h(a)})},logCometImmediately:function(a){c("VideoPlayerWwwFalcoEvent").logImmediately(function(){return h(a)})}};b=a;g["default"]=b}),98);
__d("VideoPlayerBanzaiLogFlusher",["VideoPlayerWwwLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("emptyFunction"),i=!1;c("gkx")("5551")&&(i=!0,h=function(a,b){try{var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];(c=window.console).info.apply(c,["["+a+"][VideoPlayerBanzaiLogFlusher]"+b].concat(e))}catch(a){}});a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.flushLogs=function(){var a=this,b=this.$2.consumeLoggerEvents();b.forEach(function(b){var d,e={event:b.eventType,logData:b.logData,routeTracePolicy:b.routeTracePolicy,source:b.source_VPL_LOGGING_HACK};if(b.source_VPL_LOGGING_HACK==="animated_image_share"){i&&h(a.$1,"[flushLogs] "+b.eventType+" SKIP ANIMATED_IMAGE_SHARE",{videoPlayerLogData:e});return}d=(d=b.logData)==null?void 0:d.ad_client_token;i&&h(a.$1,"[flushLogs] "+b.eventType,{videoPlayerLogData:e});d!=null?c("VideoPlayerWwwLogger").logCometImmediately(b):c("VideoPlayerWwwLogger").logComet(b)})};b.discardLogsWithoutFlushing=function(){var a=this.$2.consumeLoggerEvents();i&&h(this.$1,"[discardLogsWithoutFlushing] "+a.map(function(a){return a.eventType}).join(","),a)};return a}();g["default"]=a}),98);
__d("VideoPlayerCaptionsController",["FBLogger","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),i=c("JSResourceForInteraction")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");function a(a){var b=a.captionsUrl,d=a.inbandCaptionsExpected,e=a.onCaptionsLoaded,f=null,g=null,j=null,k=null;function l(a){var b=i.load().then(function(c){if(b!==j)return;f=new c({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(b){b.loadFromUrl(a)}})})["catch"](function(a){if(b!==j)return;c("FBLogger")("comet_video_player").catching(a).mustfix("Failed to load the VideoPlayerHTML5ApiWebVttState module")});return b}function m(){var a=h.load().then(function(b){if(a!==k)return;g=new b({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(a){a.processQueue()}})})["catch"](function(b){if(a!==k)return;c("FBLogger")("comet_video_player").catching(b).mustfix("Failed to load the VideoPlayerHTML5ApiCea608State module")});return a}b!=null?j=l(b):d===!0&&(k=m());return{destroy:function(){f&&(f.destroy(),f=null),g&&(g.destroy(),g=null),j&&(j=null),k&&(k=null)},getCaptionFormat:function(){return f?"webvtt":g?"cea608":null},handleCea608BytesReceived:function(a){g&&g.enqueueBytes(a)},handleTimeUpdate:function(a){if(f){var b;f.source&&f.source.handleTimeUpdate(a);return(b=(b=f)==null?void 0:b.getCurrentScreenRepresentation())!=null?b:null}else if(g){g.source&&g.source.handleTimeUpdate(a);return(a=(b=g)==null?void 0:b.getCurrentScreenRepresentation())!=null?a:null}return null},updateCaptionsUrl:function(a){f&&(f.destroy(),f=null),a!=null&&(j=l(a))},updateInbandCaptionsExpected:function(a){g&&(g.destroy(),g=null),a&&(k=m())}}}g.createCaptionsController=a}),98);
__d("VideoPlaybackQuality",[],(function(a,b,c,d,e,f){function a(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().droppedVideoFrames;a=a.webkitDroppedFrameCount;return typeof a==="number"?a:0}function b(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().totalVideoFrames;a=a.webkitDecodedFrameCount;return typeof a==="number"?a:0}f.getDroppedFrames=a;f.getTotalFrames=b}),66);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return isNaN(a)?0:a}function j(a){return i(a.duration)}function k(a){var b=[];try{a=a.buffered;for(var c=0;c<a.length;++c)b.push({endTime:a.end(c),startTime:a.start(c)})}catch(a){}return b}function l(a){try{a=a.buffered;if(a.length>0)return a.end(a.length-1)}catch(a){}return 0}function m(a){return i(a.currentTime)}function n(a){try{a=a.buffered;if(a.length>0)return a.start(0)}catch(a){}return 0}function a(a){return{exitPictureInPicture:function(){window.document.exitPictureInPicture()},getBufferedRanges:function(){return k(a)},getCanPlayPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.readyState===4?b():a.addEventListener("canplay",function(){return b()})})},getDOMLoadedMetadataPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.addEventListener("loadedmetadata",function(){return b()})})},getDroppedFrameCount:function(){return d("VideoPlaybackQuality").getDroppedFrames(a)},getDuration:function(){return j(a)},getEnded:function(){return a.ended},getError:function(){return a.error},getLastBufferEndPosition:function(){return l(a)},getMuted:function(){return a.muted},getNetworkState:function(){return a.networkState},getPaused:function(){return a.paused},getPlaybackRate:function(){return a.playbackRate},getPlayheadPosition:function(){return m(a)},getReadyState:function(){return a.readyState},getTotalFrameCount:function(){return d("VideoPlaybackQuality").getTotalFrames(a)},getUnderlyingVideoElement:function(){return a},getVideoPixelsDecodedDimensions:function(){var b=a.videoWidth,c=a.videoHeight;return b<=0||c<=0?null:{height:c,width:b}},getVideoPixelsPaintedDimensions:function(){if(a.readyState<a.HAVE_CURRENT_DATA)return null;var b=a.videoWidth,c=a.videoHeight;if(b<=0||c<=0)return null;var d=a.offsetWidth,e=a.offsetHeight;if(d<=0||e<=0)return null;b=b/c;c=d/e;c>b?d=e*b:e=d/b;return{height:e,width:d}},getVolume:function(){return a.volume},pause:function(){a.pause()},play:function(){var c=a.play();c=c&&typeof c.then==="function"?(h||(h=b("Promise"))).resolve(c):null;return c},requestPictureInPicture:function(){typeof a.requestPictureInPicture==="function"&&a.requestPictureInPicture()},setDuration:function(b){a.duration=b},setMuted:function(b){a.muted=b},setPlaybackRate:function(b){a.playbackRate=b},setPlayheadPosition:function(b){var d=b;if(b===0){b=c("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0);if(b>0){var e=n(a);e>0&&e<=b&&(d=e)}}a.currentTime=d},setVolume:function(b){a.volume=b}}}g.getDurationFromVideoElement=j;g.getBufferedRangesFromVideoElement=k;g.getLastBufferEndPositionFromVideoElement=l;g.getPlayheadPositionFromVideoElement=m;g.createVideoPlayerImplementationEngineVideoElementAPI=a}),98);
__d("VideoPlayerImplementationReactVideoElement.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a!=null?a:[];var b=a[0];a=a[1];if(b==null&&a==null)return null;var c="";if(typeof b==="string")c=b;else if(Array.isArray(b)){var d=b[0];b=b[1];c=d+" "+b}d="";if(typeof a==="string")d=a;else if(Array.isArray(a)){b=a[0];a=a[1];d=b+" "+a}return c+" "+d}function a(a){var b=a.alt,c=a.audioOnly,d=a.isSpatial;d=d===void 0?!1:d;var e=a.poster,f=a.seoSrc,g=a.seoWebCrawlerVideoTracks,h=a.videoElementCallbacks,k=a.videoElementHDRPatchEnabled_EXPERIMENTAL,l=a.videoElementPreloadDisabled,m=a.videoElementRefCallback;a=a.videoPixelsFit;f=f!=null?babelHelpers["extends"]({},h,{src:f}):h;h=j(a==null?void 0:a.objectPosition);return i.jsx("video",babelHelpers["extends"]({"aria-label":b!=null?b:void 0,className:{0:"x1lliihq x5yr21d xh8yej3",2:"x1lliihq x5yr21d xh8yej3 x1ihime0",1:"x5yr21d xh8yej3 x1s85apg",3:"x5yr21d xh8yej3 x1ihime0 x1s85apg"}[!!(k===!0)<<1|!!(c===!0)<<0],controls:!1,"data-testid":void 0,muted:!0,playsInline:!0,preload:l===!0?"none":void 0},f,{poster:e,ref:m,style:d?{width:"200%"}:a?{objectFit:a.objectFit,objectPosition:h}:void 0,children:g}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerEmsgForStateMachine",["deepEquals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;return[a.type,a.emsgScheme,(c=a.emsgId)!=null?c:""].concat(b?[(c=a.emsgStartTimeInSec)!=null?c:"",(b=a.emsgDurationInSec)!=null?b:""]:[]).join(":")}function i(a,b){a.set(h(b,!0),b);return a}function a(a,b){return b.reduce(i,new Map(a))}function b(a,b,d){a=b==null?[]:Array.from(a.values()).filter(function(a){var c=a.emsgStartTimeInSec;a=a.emsgDurationInSec||0;return c!=null&&b>=c&&b<c+a}).sort(function(a,b){return(a.emsgStartTimeInSec||0)-(b.emsgStartTimeInSec||0)});a=Array.from(a.reduce(function(a,b){a.set(h(b,!1),b);return a},new Map()).values());return c("deepEquals")(d,a)?d:a}g.makeEmsgBoxDedupKey=h;g.makeUpdatedAllEmsgBoxes=a;g.makeUpdatedActiveEmsgBoxes=b}),98);
__d("getErrorMessageFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}f["default"]=a}),66);
__d("VideoPlayerImplementationErrors",["VideoPlayerImplementationErrorNormalization","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode","getErrorSafe","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b;a=/^([A-Z_]+:)|([A-Z_]+\s+\(0x[0-9A-Fa-f]+\))/.exec(a);a=((b=(b=a==null?void 0:a[1])!=null?b:a==null?void 0:a[2])!=null?b:"").replace(/\s+/,"_").replace(/[^A-Za-z0-9_]/g,"");return a!==""?a:null}function a(a){var b=a.errorLocation,d=a.hostCallError,e=a.videoElementError,f=a.videoElementNetworkState;a=a.videoElementReadyState;var g=e==null?void 0:e.code,h=d!=null&&typeof d.message==="string"?d.message:null;h==null&&(h=e==null?void 0:e.message);h==null&&g!=null&&(h=c("getErrorMessageFromMediaErrorCode")(g));e=c("getErrorNameFromMediaErrorCode")(g);return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:(h!=null?h:"Empty error")+("; code: "+(g!=null?g:"undefined"))+("; readyState: "+a)+("; networkState: "+f),errorMessageParams:[],errorName:e,originalError:d}}function b(a,b){var d=c("getErrorSafe")(a);return{createdTimestamp:Date.now(),errorCode:typeof a==="object"&&a!=null?typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0:void 0,errorLocation:b,errorMessageFormat:(a=d.messageFormat)!=null?a:d.message,errorMessageParams:d.messageFormat!=null?(b=d.messageParams)!=null?b:[]:[],errorName:"VideoElementPlayPromiseRejectionReason_"+(d.name||"UnknownError")}}function i(a,b,d,e){e===void 0&&(e=null);b=c("getErrorSafe")(b);return{createdTimestamp:Date.now(),errorCode:null,errorLocation:d,errorMessageFormat:(b.name||"UnknownError")+" "+((d=b.messageFormat)!=null?d:b.message),errorMessageParams:b.messageFormat!=null?(d=b.messageParams)!=null?d:[]:[],errorName:a,stack:b.stack,url:e!=null?e:null}}function e(a,b){if(d("oz-player/utils/OzErrorUtils").isOzError(a)){var c=a,e=c.getExtra();return{createdTimestamp:Date.now(),errorCode:e.code,errorLocation:b,errorMessageFormat:c.getDescription(),errorMessageParams:[],errorName:c.getType(),errorType:d("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(c),stack:c.stack,url:e.url}}else return i("OZ_JAVASCRIPT_NATIVE",a,b)}function f(a,b){var c=h(a.message);c=c!=null?a.name+"_"+c:a.name;a=a.message;var d=[];return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:a,errorMessageParams:d,errorName:c,errorType:"GenericDecodeError"}}g.getMoreGranularErrorNameFromHTMLVideoElementErrorMessage=h;g.createVideoPlayerErrorFromHTMLVideoElementError=a;g.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=b;g.createVideoPlayerErrorFromGenericError=i;g.createVideoPlayerErrorFromOzImplementationError=e;g.createVideoPlayerErrorFromOzImplementationVideoNodeError=f}),98);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerEmsgForStateMachine","VideoPlayerImplementationErrors","VideoPlayerODS","gkx","recoverableViolation","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function i(a){var b=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;b=h({bufferingDetected:b,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=b?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;c("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player");break}return e}function j(a){return a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1}function k(a,b,e,f){switch(e.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([e])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers["extends"]({},a,{latencyLevel:e.payload.latencyLevel,ullIneligibilityReason:e.payload.ullIneligibilityReason});case"dom_event_loadedmetadata":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{clockMs:b.clockTimestamp,loadedmetadata:e.payload.domEventPerfTimestamp,perfMs:b.perfTimestamp})});case"dom_event_loadeddata":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{clockMs:b.clockTimestamp,loadeddata:e.payload.domEventPerfTimestamp,perfMs:b.perfTimestamp})});case"dom_event_canplay":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{canplay:e.payload.domEventPerfTimestamp,clockMs:b.clockTimestamp,perfMs:b.perfTimestamp})});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(b.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var g=a.playbackState,h=g;switch(g){case"playing":case"stalling":case"ended":case"paused":h="stalling";break;default:g;c("recoverableViolation")("unexpected playbackState: "+g,"comet_video_player");break}g=!0;return babelHelpers["extends"]({},a,{playbackState:h,waitingForDomPlaying:g});case"dom_event_playing":h=a.bufferingDetected;g=a.seeking;var k=!1,l=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:h,prevPlaybackState:l,seeking:g,waitingForDomPlaying:k}),waitingForDomPlaying:k});case"dom_event_timeupdate":h=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(a.allEmsgBoxes,b.videoElementPlayheadPosition,a.activeEmsgBoxes);if(a.waitingForDomTimeUpdateAfterSeeked){l=a.bufferingDetected;g=a.seeking;k=!1;var m=a.playbackState;return babelHelpers["extends"]({},a,{activeEmsgBoxes:h,playbackState:i({bufferingDetected:l,prevPlaybackState:m,seeking:g,waitingForDomPlaying:k}),waitingForDomPlaying:k,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers["extends"]({},a,{activeEmsgBoxes:h});case"dom_event_seeking":l=a.playbackState;m=l;switch(l){case"paused":case"ended":break;case"stalling":case"playing":m="stalling";break;default:l,c("recoverableViolation")("unexpected playbackState: "+l,"comet_video_player")}return babelHelpers["extends"]({},a,{playbackState:m,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":g=a.bufferingDetected;k=a.waitingForDomPlaying;h=!1;l=a.playbackState;return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:null,playbackState:i({bufferingDetected:g,prevPlaybackState:l,seeking:h,waitingForDomPlaying:k}),seeking:h,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":e.payload.videoElementError==null&&d("VideoPlayerODS").bumpEntityKey("comet_video_player","dom_event_error.error_is_nullish",14);return babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:e.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":if(a.hostCallPlayIDLast!==e.payload.hostCallPlayID)return a;if(f==="comet_nextgendash"){m=e.payload.playPromiseRejectionReason;return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null},!(m!=null&&m.name==="AbortError")&&a.playbackState==="stalling"?{playbackState:"paused",waitingForDomPlaying:!1}:{})}return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"dom_event_durationchange":if(f==="comet_nextgendash"){g=b.videoElementEnded===!0?"ended":b.videoElementPaused===!0?"paused":a.playbackState;if((a.playbackState==="stalling"||a.playbackState==="playing")&&g!==a.playbackState)return babelHelpers["extends"]({},a,{playbackState:g,waitingForDomPlaying:!1})}return a;case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":l=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:e.payload.errorLocation,hostCallError:e.payload.hostCallError,videoElementError:e.payload.videoElementError,videoElementNetworkState:e.payload.videoElementNetworkState,videoElementReadyState:e.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:l,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_mounted":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_unmounted":return babelHelpers["extends"]({},a,{mountState:"unmounted"});case"implementation_onscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_offscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_offscreen"});case"implementation_video_node_unmounted":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_engine_initialized":h=(k=e.payload.streamingFormat)!=null?k:a.streamingFormat;return babelHelpers["extends"]({},a,{hostCallCanApply:!0,selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:h});case"implementation_engine_qualities_changed":f=(m=e.payload.streamingFormat)!=null?m:a.streamingFormat;return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:f});case"implementation_engine_destroyed":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"controller_inject_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:e.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},a);case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPausedTimeMs:Date.now(),lastPauseReason:e.payload.reason,lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:a.lastPlayedTimeMs>0?a.watchTimeMs+(Date.now()-a.lastPlayedTimeMs):a.watchTimeMs});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{hasPlayEverBeenRequested:!0,lastPlayedTimeMs:a.lastPlayedTimeMs===0?Date.now():a.lastPlayedTimeMs,lastPlayReason:e.payload.reason,loopCurrent:j(a)?e.payload.reason==="loop_initiated"?a.loopCurrent+1:a.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(g=b.videoElementPlayheadPosition)!=null?g:a.implementationSeekSourcePosition,seeking:!0,seekTargetPosition:e.payload.seekTargetPosition});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality});case"controller_video_variant_requested":return babelHelpers["extends"]({},a,{selectedVideoVariant:e.payload.selectedVideoVariant});case"controller_set_caption_display_style_requested":return babelHelpers["extends"]({},a,{captionDisplayStyle:e.payload.captionDisplayStyle});case"controller_set_picture_in_picture_state_requested":return babelHelpers["extends"]({},a,{isDesktopPictureInPicture:e.payload.isInPictureInPictureMode});case"controller_set_caption_format_requested":return babelHelpers["extends"]({},a,{captionFormat:e.payload.captionFormat});case"controller_set_playback_rate":return babelHelpers["extends"]({},a,{targetPlaybackRate:e.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:e.payload.reason,muted:e.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:e.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(l=b.videoElementPlayheadPosition)!=null?l:a.implementationSeekSourcePosition,scrubbing:!1,seeking:e.payload.seekTargetPosition!=null,seekTargetPosition:e.payload.seekTargetPosition});case"buffering_begin_requested":k=a.playbackState;h=k;switch(k){case"paused":case"ended":break;case"playing":case"stalling":h="stalling";break;default:k;c("recoverableViolation")("unexpected playbackState: "+k,"comet_video_player");break}m=e.payload.bufferingType;return babelHelpers["extends"]({},a,{bufferingDetected:!0,lastBufferingType:m,playbackState:h});case"buffering_end_requested":f=a.seeking;g=a.waitingForDomPlaying;l=!1;k=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:l,playbackState:i({bufferingDetected:l,prevPlaybackState:k,seeking:f,waitingForDomPlaying:g})});case"controller_set_captions_visible_requested":m=e.payload.captionsVisible;return a.captionsVisible===m?a:babelHelpers["extends"]({},a,{activeCaptions:m?a.activeCaptions:null,captionsLocale:m?a.captionsLocale:null,captionsVisible:m});case"controller_set_active_captions_requested":h=e.payload.activeCaptions;k=(l=h==null?void 0:h.rows)!=null?l:[];f=e.payload.captionsLocale;g=a.activeCaptions;var n=(m=g==null?void 0:g.rows)!=null?m:[];return n.length===k.length&&k.every(function(a,b){return n[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:h,captionsLocale:f});case"captions_loaded":return babelHelpers["extends"]({},a,{activeCaptions:a.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},a,{activeCaptions:null,captionsLoaded:!1,captionsLocale:null});case"inband_captions_autogenerated_changed":l=e.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===l?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:l});case"stream_ended":return babelHelpers["extends"]({},a,{streamEnded:!0});case"stream_gone_before_start":return babelHelpers["extends"]({},a,{playbackState:"ended",streamEnded:!0,waitingForDomPlaying:!1});case"stream_interrupted":return babelHelpers["extends"]({},a,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},a,{streamInterrupted:!1});case"seekable_ranges_changed":g=e.payload.seekableRanges;return babelHelpers["extends"]({},a,{seekableRanges:g});case"controller_set_is_live_rewind_active_requested":m=e.payload.isLiveRewindActive;return babelHelpers["extends"]({},a,{isLiveRewindActive:m});case"loop_count_change_requested":k=e.payload.loopCount;return k===a.loopCount?a:babelHelpers["extends"]({},a,{loopCount:k,loopCurrent:0});case"player_dimensions_changed":h=e.payload.dimensions;f=h.height;l=h.width;return l===a.dimensions.width&&f===a.dimensions.height?a:babelHelpers["extends"]({},a,{dimensions:{height:f,width:l}});case"emsg_boxes_parsed":g=d("VideoPlayerEmsgForStateMachine").makeUpdatedAllEmsgBoxes(a.allEmsgBoxes,e.payload.emsgBoxes);m=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(g,b.videoElementPlayheadPosition,a.activeEmsgBoxes);return babelHelpers["extends"]({},a,{activeEmsgBoxes:m,allEmsgBoxes:g});case"register_emsg_observer":k=new Set(a.emsgObserverTokens);k.add(e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:k});case"unregister_emsg_observer":h=new Set(a.emsgObserverTokens);h["delete"](e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:h});default:return a}}function l(a,b,d){var e=b.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!c("shallowEqual")(e,a.uncontrolledState);b=k(a.controlledState,e,b,a.playerVersion);var f=!c("shallowEqual")(b,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?b:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var m,n;function o(a){var b=a.collectUncontrolledState,d=a.debugLogId;d=a.initialState;var e=a.onDispatched,f=a.onFatalError,g=d,h=g,i=0,j=!1,k=!1,m=!0,n=!0;return{dispatch:function(a){if(!n)return;var d=null,g=null;try{++i;if(i>=10)if(!j){j=!0;throw c("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;var o=h.uncontrolledState;if(m)try{o=b()}catch(a){m=!1,g=a}var p=h;o=l(p,a,o);h=o;e(p,o,a)}catch(a){n=!1,d=a}finally{if(!k&&(d!=null||g!=null)){k=!0;try{f(d!=null?d:g)}catch(a){}}--i}},getCurrentState:function(){return h},getInitialState:function(){return g}}}var p,q;function a(a){var b=a.collectUncontrolledState,c=a.debugLogId,d=a.initialState,e=a.onFatalError,f=a.stateTransitionHandlers;function g(a,b,c){try{var d=!0,e=0;while(d&&e<f.length){var g=f[e];d=g(a,b,c);++e}}finally{}}return o({collectUncontrolledState:b,debugLogId:c,initialState:d,onDispatched:g,onFatalError:e})}function b(a,b){function c(){}function d(a){return a}function e(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c)}}function f(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c(e,f))}}return{onAbort:c,onCanPlay:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_canplay"}}),onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:f(function(a,b){return{payload:{videoElementError:b.error,videoElementNetworkState:b.networkState,videoElementReadyState:b.readyState},type:"dom_event_error"}}),onLoadedData:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_loadeddata"}}),onLoadedMetadata:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_loadedmetadata"}}),onLoadStart:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_playing"}}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}g.createVideoPlayerImplementationStateMachine=o;g.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=a;g.createReactVideoElementCallbacksForStateMachine=b}),98);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(){return"id-vpdom-"+c("cometUniqueID")()}function i(a){var b=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;switch(d.type){case"host_call_play":var f=a.play();f&&(e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_created"}),c("promiseDone")(f.then(function(){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(a){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID,playPromiseRejectionReason:a},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(d.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(d.payload.muted);break;case"host_call_set_volume":a.setVolume(d.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(d.payload.currentTime);break;case"host_call_set_video_quality":b.setUserSelectedVideoQuality(d.payload.selectedVideoQuality);break;case"host_call_set_video_variant":b.setUserSelectedVideoVariant(d.payload.selectedVideoVariant);break;case"host_call_set_latency_level":b.setLatencyLevel(d.payload.latencyLevel);break;case"host_call_picture_in_picture":a.requestPictureInPicture();break;case"host_call_exit_picture_in_picture":a.exitPictureInPicture();break;default:d.type;return!1}return!0}function j(a){var b=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;if(!a||!b||c("gkx")("18183")&&!e.getCurrentState().controlledState.hostCallCanApply)e.dispatch(d);else{var f=!1;try{f=i({engineExtrasAPI:b,hostCall:d,machine:e,videoElementAPI:a})}catch(b){e.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:d,hostCallError:b,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}f&&e.dispatch({payload:{hostCall:d},type:"implementation_host_call_applied"})}}function k(a){var b=[];function c(){b=b.filter(function(a){return a.type!=="host_call_play"&&a.type!=="host_call_pause"})}function d(a){b=b.filter(function(b){return b.type!==a})}a.forEach(function(a){switch(a.type){case"host_call_play":c();break;case"host_call_pause":c();break;case"host_call_set_playback_rate":d(a.type);break;case"host_call_set_muted":d(a.type);break;case"host_call_set_volume":d(a.type);break;case"host_call_set_current_time":d(a.type);break;case"host_call_set_video_quality":d(a.type);break;case"host_call_set_video_variant":d(a.type);break;case"host_call_set_latency_level":d(a.type);break;case"host_call_picture_in_picture":d(a.type);break;case"host_call_exit_picture_in_picture":d(a.type);break;default:a.type}b=b.concat([a])});return b}function a(a){var b=a.engineExtrasAPI,c=a.machine,d=a.reason,e=a.state,f=a.videoElementAPI;a=[{payload:{hostCallID:h(),reason:d,volume:e.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:h(),muted:e.controlledState.muted,reason:d},type:"host_call_set_muted"},{payload:{hostCallID:h(),reason:d,selectedVideoQuality:e.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"},{payload:{hostCallID:h(),reason:d,selectedVideoVariant:e.controlledState.selectedVideoVariant},type:"host_call_set_video_variant"}];d=k(e.controlledState.hostCallQueue.concat(a));d.forEach(function(a){j({engineExtrasAPI:b,hostCall:a,machine:c,videoElementAPI:f})});c.dispatch({payload:{hostCallsFlushed:d},type:"implementation_host_call_queue_flushed"})}g.makeHostCallID=h;g.applyOrQueueHostCall=j;g.flushHostCallQueue=a}),98);
__d("VideoMimeTypes",[],(function(a,b,c,d,e,f){function a(a,b,c){return a+'; codecs="'+b+", "+c+'"'}e="mp4a.40.2";function b(a){return"avc1.42E0"+a.toString(16).toUpperCase()}function c(a){return"avc1.4D40"+a.toString(16).toUpperCase()}function d(a){return"avc1.6400"+a.toString(16).toUpperCase()}var g="video/mp4";b=a(g,b(30),e);var h=a(g,c(30),e);c=a(g,c(31),e);var i=a(g,d(50),e);a=a(g,d(51),e);g={h264baseline:b,h264main30avc:h,h264main31avc:c,h264high50avc:i,h264high51avc:a};f["default"]=g}),66);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){a="started";b="unpaused";c={STARTED:a,UNPAUSED:b};f["default"]=c}),66);
__d("VideoPlayerMutedStateChange",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.currMuted,c=a.currVolume,d=a.prevMuted;a=a.prevVolume;b=b||c===0;c=d||a===0;if(c===b)return null;return b?"muted":"unmuted"}f.getVideoPlayerMutedStateChange=a}),66);
__d("VideoPlayerImplementationStateMachineLogger",["CometProductAttribution","FBLogger","NetworkStatus","PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","emptyFunction","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","justknobx","mapObject","performanceAbsoluteNow","qex","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=6e4,k=(b=c("qex")._("1675"))!=null?b:0,l=1e3,m=null,n=function(a){m=m!=null?m:document.createElement("video");return!("canPlayType"in m)?"":m.canPlayType(a)},o=c("emptyFunction"),p=c("emptyFunction"),q=c("emptyFunction"),r=c("emptyFunction"),s=!1;c("gkx")("5551")&&(s=!0,o=function(a,b){try{var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];(c=window.console).info.apply(c,["["+a+"][VideoPlayerImplementationStateMachineLogger]"+b].concat(e))}catch(a){}},p=function(a,b,c,d){o(a,"[handleMetaData]",{loggingMetaData:c,loggingMetaDataPrevious:b,trackedChanges:d})},q=function(a,b,c,d){o(a,"[handleStateMachine]",{prevState:b,state:c,action:d})},r=function(a,b,c){o(a,"[setAdditionalLogData]",{key:b,value:c})});var t=(e=d("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())!=null?e:!1;function u(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,errorRecoveryAttemptState:{currentRecoverableError:null,eventsLogged:0,repeatCount:0},hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,inPlayStallCount200ms:0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedAudioRepresentation:null,lastTrackedVideoRepresentation:null,nextHeartbeatTime:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallCountTotal:0,stallDuration:0,stallDurationTotal:0,stallStartTimestamp:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0,warningState:{eventsLoggedPerKey:new Map(),eventsLoggedTotal:0,eventsMaxLoggedPerKey:function(){try{return Math.max(0,c("justknobx")._("1831")||0)}catch(a){return 0}}(),eventsMaxLoggedTotal:function(){try{return Math.max(0,c("justknobx")._("1832")||0)}catch(a){return 0}}()}}}function v(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){var b=new Map(),e=a.initialLoggingMetaData,f=a.initialCoreVideoPlayerMetaData;e;var g=f,m=[],w=u(),x=new Set(c("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);function y(a){w.debugSubscribers.push(a);return function(){c("removeFromArray")(w.debugSubscribers,a)}}function z(a){w.debugSubscribers.forEach(function(b){return b(a)})}function A(a){var b=w.stallStartTimestamp;if(b>0){w.stallCount+=1;w.stallCountTotal+=1;w.hasPendingRequestedPlaying&&(w.startStallCountTotal+=1);a=a-b;b=a>200;w.stallDurationTotal+=a;w.stallDuration+=a;w.stallCount200ms+=b?1:0;w.inPlayStallCount200ms+=b&&!w.hasPendingRequestedPlaying?1:0;w.hasPendingRequestedPlaying&&(w.startStallDurationTotal+=a)}}function B(a,b){a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":c=w.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":w.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":w.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function C(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.streamInterrupted;b=b.controlledState.streamInterrupted;!a&&b?w.interruptStartTimestamp=c:a&&!b&&w.interruptStartTimestamp>0&&(w.interruptEndTimestamp=c,w.interruptCount+=1,w.interruptDuration+=w.interruptEndTimestamp-w.interruptStartTimestamp)}function D(a,b,c){var d=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var e=b.controlledState.playbackState;a!=="stalling"&&e==="stalling"&&(z("stall_start"),w.stallStartTimestamp=d);if(a==="stalling"&&e!=="stalling"){d=0;(c.type==="dom_event_playing"||c.type==="buffering_end_requested")&&c.payload.domEventPerfTimestamp!=null&&(d=Math.max(b.uncontrolledState.perfTimestamp-c.payload.domEventPerfTimestamp,0));A(b.uncontrolledState.clockTimestamp-d);w.stallStartTimestamp=0;z("stall_end")}}function E(a,b,c){if(w.interruptCount>0&&w.interruptDuration>0){a={interrupt_count:w.interruptCount,interrupt_time:w.interruptDuration};w.interruptCount=0;w.interruptDuration=0;w.interruptStartTimestamp=0;w.interruptEndTimestamp=0;return a}return{interrupt_count:null,interrupt_time:null}}function F(a,b,c){var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,f=function(){var a={stall_count:w.stallCount,stall_count_200_ms:w.stallCount200ms,stall_time:w.stallDuration};w.stallCount=0;w.stallCount200ms=0;w.stallDuration=0;w.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var g=b.controlledState.playbackState;a!=="stalling"&&g==="stalling"&&(w.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"representation_ended":A(b.uncontrolledState.clockTimestamp);d=f();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(A(b.uncontrolledState.clockTimestamp),d=f());break;default:break}return d}function G(a,b,c){a=b.controlledState.playbackState==="paused"&&a.controlledState.playbackState==="stalling";return c>0&&(b.controlledState.playbackState==="stalling"||a)}function H(a,b){a=a.current;var c=null;switch(b){case"finished_playing":case"paused":case"heart_beat":a&&(c=a.getAndFlushTracedFrames());return c!=null?JSON.stringify(c):null;default:return null}}function I(a){a=a.controlledState.playbackState;switch(a){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:a;return"unknown"}}function J(a){switch(a){case"normal":return"normal";case"low":return"low";case"ultra-low":return"ultra_low";default:return null}}function K(){return{state:w.hasLoggedStartedPlaying?c("VideoPlayerLoggerPlayerStates").UNPAUSED:c("VideoPlayerLoggerPlayerStates").STARTED}}function L(a){var b;if(a!=null&&a.v2&&(a==null?void 0:a.v2.length)>0){var c=a==null?void 0:a.v2;c=c[c.length-1];return[c["class"],c.module].map(d("CometProductAttribution").filterEntryValue).join(":")}return(c=a==null||(b=a.v2)==null?void 0:b.map(function(a){return[a["class"],a.module].map(d("CometProductAttribution").filterEntryValue).join(":")}).join(";"))!=null?c:""}function M(g){var i,j=g.eventType,k=g.logDataOverrides,l=g.prevState,n=g.state;g=B(n,j);g=g.video_last_start_time_position;var p=F(l,n,j),q=p.stall_count,r=p.stall_count_200_ms;p=p.stall_time;var u=E(l,n,j),y=u.interrupt_count;u=u.interrupt_time;var z=H(a.videoLiveTraceRef,j),A=[],C=a.initialCoreVideoPlayerMetaData.autoplayGatingResult;C&&A.push(C);C=j==="entered_fs"?!0:j==="exited_fs"?!1:w.lastLoggedFullscreenState;i=c("getPlayerFormatForLogData")({isDesktopPictureInPicture:(i=n.controlledState.isDesktopPictureInPicture)!=null?i:!1,isFullscreen:C},f.playerFormat);var D=n.uncontrolledState.viewabilityPercentage,K=Boolean(n.uncontrolledState.isFBIsLiveTemplated),M=Boolean(n.uncontrolledState.isFBWasLive),N=n.uncontrolledState.videoElementPlaybackRate;N=N==null||N===0?w.lastLoggedPlaybackSpeed:N;var O=a.initialLoggingMetaData.productAttribution;if(i==="watch_scroll"&&O&&O.v2){var P,Q={0:babelHelpers["extends"]({},O["0"]),v2:[babelHelpers["extends"]({},O.v2[0])]};P=(P=e.productAttribution)==null||(P=P.v2)==null?void 0:P[0];if(P){var R=Q.v2[0];R["class"]=P["class"];R.scope_id=P.scope_id;R.ts=P.ts}O=Q}R=null;P=null;R=O!=null?d("CometProductAttribution").minifyProductAttributionV2(O):null;P=O!=null?L(O):null;Q=G(l,n,p!=null?p:0);l={access_token:a.initialLoggingMetaData.accessToken,ad_client_token:f.adClientToken,attribution_id:O!=null&&Object.prototype.hasOwnProperty.call(O,"0")?JSON.stringify({0:O["0"]}):null,attribution_id_v2:R,attribution_id_v2_root:P,audio_only:f.audioOnly,audio_representation_id:n.uncontrolledState.audioRepresentationID,autoplay_eligible:a.initialCoreVideoPlayerMetaData.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(A),autoplay_setting:a.initialCoreVideoPlayerMetaData.autoplaySetting,available_qualities:n.uncontrolledState.availableQualities.length,broadcaster_origin:a.initialCoreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:c("getVideoBrowserTabId")(),caption_state:v(n,j),client_latency_setting:J(n.controlledState.latencyLevel),current_playback_speed:t?N:null,current_viewability_percentage:D,dash_perf_logging_enabled:f.VideoPlayerShakaPerformanceLoggerClass!=null&&f.VideoPlayerShakaPerformanceLoggerClass.isEnabled(),data_connection_quality:d("VideoPlayerConnectionQuality").evaluate(function(){return n.uncontrolledState.estimatedBandwidth}),downstream_share_origin_uri:(l=e.downstreamShareSignalTracking)==null?void 0:l.downstream_share_session_origin_uri,downstream_share_start_time:(O=e.downstreamShareSignalTracking)==null?void 0:O.downstream_share_session_start_time,downstream_share_visit_uuid:(R=e.downstreamShareSignalTracking)==null?void 0:R.downstream_share_session_id,dropped_frame_count:n.uncontrolledState.videoElementDroppedFrameCount,external_log_id:f.externalLogID,external_log_type:f.externalLogType,fb_manifest_identifier:n.uncontrolledState.manifestIdentifier,frame_events:z,interrupt_count:y,interrupt_time:u,is_abr_enabled:n.isAbrEnabled,is_fbms:n.uncontrolledState.isFBMS,is_live_video_rewound:n.controlledState.isLiveRewindActive,is_mixed_codec_manifest:n.uncontrolledState.isMixedCodecManifest,is_pip:n.controlledState.isDesktopPictureInPicture,is_predictive_playback:n.uncontrolledState.isPredictiveDash,is_sound_on:!n.controlledState.muted,is_stalling:Q,is_templated_manifest:K||M,last_viewability_percentage:w.lastLoggedViewabilityPercentage,mpd_validation_errors:n.uncontrolledState.mpdValidationErrors,network_connected:n.uncontrolledState.networkConnected,playback_caption_format:n.controlledState.captionFormat,playback_caption_locale:n.controlledState.captionsLocale,playback_duration:n.uncontrolledState.videoElementDuration,playback_is_broadcast:a.initialCoreVideoPlayerMetaData.isVideoBroadcast,playback_is_drm:Boolean(a.initialCoreVideoPlayerMetaData.graphQLVideoDRMInfo),playback_is_live_streaming:a.initialCoreVideoPlayerMetaData.isLiveStreaming,player_format:i,player_instance_key:e.instanceKey,player_origin:f.playerOriginOverride,player_state:I(n),player_suborigin:f.subOrigin,player_version:n.playerVersion,projection:n.uncontrolledState.videoProjection,representation_id:n.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:f.source_VPL_LOGGING_HACK,stall_count:q,stall_count_200_ms:r,stall_time:p,streaming_format:n.controlledState.streamingFormat,total_frame_count:n.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:a.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:a.initialLoggingMetaData.trackingNodes,v2_heart_beat:c("gkx")("24377")&&j==="heart_beat"?!0:null,video_bandwidth:n.uncontrolledState.estimatedBandwidth,video_buffer_end_position:n.uncontrolledState.videoElementLastBufferEndPosition,video_id:f.videoFBID,video_last_start_time_position:g,video_play_reason:n.controlledState.lastPlayReason,video_player_height:(P=e.dimensions)==null?void 0:P.height,video_player_width:(A=e.dimensions)==null?void 0:A.width,video_time_position:n.uncontrolledState.videoElementPlayheadPosition,web_client_revision:c("SiteData").client_revision};O=x.has(j)?++w.sequenceNumber:null;R={event_seq_num:++w.vplEventSequenceNumber,seq_num:O,time_ms:Date.now(),vpts:(h||(h=c("performanceAbsoluteNow")))()};var S={};b.forEach(function(a,b){S[b]=a});z=f.loggingToVPLAdditionalData;y=babelHelpers["extends"]({},z,S);u=babelHelpers["extends"]({},y,l,k,R);K=(Q=w.initialSuborigin)!=null?Q:f.subOrigin;i=(M=u.source_VPL_LOGGING_HACK)!=null?M:K;r=(q=f.initialTracePolicy)!=null?q:f.routeTracePolicy;p={eventType:j,logData:u,routeTracePolicy:r,source_VPL_LOGGING_HACK:i};m.push(p);w.initialSuborigin==null&&K!=null&&(w.initialSuborigin=K);w.lastLoggedFullscreenState=C;w.lastLoggedPlaybackSpeed=N;j==="viewability_changed"&&(w.lastLoggedViewabilityPercentage=D);s&&o(a.debugLogId,"[_push] "+j,{loggedEvent:p,loggerEventsLength:m.length,loggingState:JSON.stringify(w)})}var N={};function O(a,b,c){M({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},c,K()),prevState:a,state:b});w.hasPendingRequestedPlaying=!0;w.canLogPausedOrFinishedPlaying=!0;return N}function P(a,b,c){if(!w.canLogPausedOrFinishedPlaying)return N;else if(w.hasPendingRequestedPlaying){Q(a,b,c);w.canLogPausedOrFinishedPlaying=!1;w.hasPendingRequestedPlaying=!1;return N}else{M({eventType:"paused",logDataOverrides:babelHelpers["extends"]({},c,{error_user_info:JSON.stringify({is_document_hidden:b.uncontrolledState.isDocumentHidden})}),prevState:a,state:b});w.canLogPausedOrFinishedPlaying=!1;w.hasPendingRequestedPlaying=!1;return N}}function Q(a,b,c){var d=b.uncontrolledState.liveTraceContext;c=babelHelpers["extends"]({},c,K(),{live_trace_source_id:d?d.sourceId:void 0,live_trace_stream_id:d?d.streamId:void 0,live_trace_stream_type:d?d.streamType:void 0});M({eventType:"cancelled_requested_playing",logDataOverrides:c,prevState:a,state:b});return N}function R(a,b,c){if(c.type==="dom_event_play_promise_rejected"&&c.payload.hostCallPlayID===a.controlledState.hostCallPlayIDLast&&b.controlledState.hostCallPlayIDLast==null&&w.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;if(c!=null&&c.name==="NotAllowedError"){Q(a,b,{debug_reason:"not_allowed"});return N}else if(b.playerVersion!=="comet_nextgendash"&&c!=null&&c.name==="AbortError"){Q(a,b,{debug_reason:"aborted"});return N}else return N}else return N}function S(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_event_play"&&!w.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;O(a,b,c);return N}else return N}function T(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&w.canLogPlayingEvent){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;M({eventType:w.hasLoggedStartedPlaying?"unpaused":"started_playing",logDataOverrides:c,prevState:a,state:b});w.hasLoggedStartedPlaying=!0;w.canLogPlayingEvent=!1;w.hasPendingRequestedPlaying=!1;return N}else return N}function U(a,b,c){var d=b.controlledState.playbackState,e=a.controlledState.playbackState;if(c.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){P(a,b);w.isLoggingScrubbingSequence=!0;return N}else if(!a.controlledState.seeking&&b.controlledState.seeking&&!w.isLoggingScrubbingSequence&&d!=="paused"&&d!=="ended"&&!w.hasPendingRequestedPlaying){P(a,b);w.shouldLogRequestedPlayingForScrub=!0;return N}else if(c.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){O(a,b,{video_time_position:c.payload.seekTargetPosition});return N}else if(a.controlledState.seeking&&!b.controlledState.seeking){w.shouldLogRequestedPlayingForScrub&&d!=="paused"&&d!=="ended"&&O(a,b);M({eventType:"scrubbed",prevState:a,state:b});w.isLoggingScrubbingSequence=!1;w.shouldLogRequestedPlayingForScrub=!1;e!=="paused"&&e!=="ended"&&(w.canLogPlayingEvent=!0);return N}else return N}function V(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"&&w.canLogPausedOrFinishedPlaying){M({eventType:"finished_playing",prevState:a,state:b});w.canLogPausedOrFinishedPlaying=!1;return N}else return N}function W(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_event_pause"&&!w.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){P(a,b,{debug_reason:"paused"});return N}else return N}function X(a,b,c){var d=b.controlledState.playbackState;if(d!=="paused"&&d!=="ended"){c.type==="implementation_video_node_unmounted"?P(a,a,{debug_reason:"unloaded"}):(c.type==="implementation_unmounted"||c.type==="implementation_engine_destroy_requested")&&P(a,b,{debug_reason:"unloaded"});return N}else return N}function aa(a,b,c){if(c.type==="implementation_engine_representation_blocked"){c=c.payload.blockedRepresentationID;M({eventType:"video_playback_fallback",logDataOverrides:{representation_id:c},prevState:a,state:b})}return N}function ba(a,b,e){e=b.controlledState.muted;var f=b.controlledState.volume,g=a.controlledState.muted,h=a.controlledState.volume;e=d("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:e,currVolume:f,prevMuted:g,prevVolume:h});g={current_volume:Math.round(f*100)};switch(e){case"muted":M({eventType:"muted",logDataOverrides:g,prevState:a,state:b});return N;case"unmuted":M({eventType:"unmuted",logDataOverrides:g,prevState:a,state:b});return N;case null:if(h<f){M({eventType:"volume_increase",logDataOverrides:g,prevState:a,state:b});return N}else if(h>f){M({eventType:"volume_decrease",logDataOverrides:g,prevState:a,state:b});return N}else return N;default:e;c("FBLogger")("comet_video_player").mustfix("Unexpected mutedStateChange %s",e);return N}}function ca(a,b,c){c=b.uncontrolledState.videoRepresentationID;var d=w.lastTrackedVideoRepresentation,e=b.uncontrolledState.audioRepresentationID,f=w.lastTrackedAudioRepresentation,g=b.controlledState.playbackState,h=b.controlledState.seeking;if(!h&&g!=="paused"&&g!=="ended"&&d!=null&&d!==c){var i=b.uncontrolledState.availableVideoTracks.find(function(a){return a.id===b.uncontrolledState.videoRepresentationID}),j=b.uncontrolledState.availableVideoTracks.find(function(a){return a.id===w.lastTrackedVideoRepresentation});M({eventType:"representation_ended",logDataOverrides:{next_quality_label:i==null?void 0:i.qualityLabel,next_representation_id:i==null?void 0:i.id,next_video_codecs:i==null?void 0:i.codec,quality_label:j==null?void 0:j.qualityLabel,representation_id:j==null?void 0:j.id,video_codecs:j==null?void 0:j.codec},prevState:a,state:b});w.lastTrackedVideoRepresentation=c;z("quality_change")}else d==null&&d!==c&&(w.lastTrackedVideoRepresentation=c);!h&&g!=="paused"&&g!=="ended"&&f!=null&&f!==e?(M({eventType:"representation_ended",logDataOverrides:{audio_representation_id:f,next_representation_id:e},prevState:a,state:b}),w.lastTrackedAudioRepresentation=e,z("audio_change")):f==null&&f!==e&&(w.lastTrackedAudioRepresentation=e);return N}function da(a,b,d){var g=a.controlledState.error===d?babelHelpers["extends"]({},a,{controlledState:babelHelpers["extends"]({},a.controlledState,{error:{$ref:"$.player.lastError"}})}):a;a.uncontrolledState.videoElementError!=null&&(g=babelHelpers["extends"]({},g,{uncontrolledState:babelHelpers["extends"]({},g.uncontrolledState,{videoElementError:{code:a.uncontrolledState.videoElementError.code,message:a.uncontrolledState.videoElementError.message}})}));var h=b,j=typeof b.payload==="object"&&b.payload!=null?b.payload:null;if(j!=null){var k={};Object.keys(j).forEach(function(a){var b=j[a];b===d?k[a]={$ref:"$.player.lastError"}:k[a]=b});h=babelHelpers["extends"]({},b,{payload:k})}return{currentVideo:{audioStreamId:a.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:a.controlledState.captionsLoaded,isDrm:Boolean(f.graphQLVideoDRMInfo),isHD:void 0,isLiveStream:f.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:a.uncontrolledState.videoProjection,resourceUrl:void 0,streamId:a.uncontrolledState.videoRepresentationID,streamType:a.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:f.videoFBID},player:{canPlayType:(i||(i=c("mapObject")))(c("VideoMimeTypes"),n),dimensions:e.dimensions?{height:e.dimensions.height,width:e.dimensions.width}:null,droppedFrames:a.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:d,loggedError:w.lastLoggedError===d?{$ref:"$.player.lastError"}:w.lastLoggedError,stallCount:w.stallCount,stallTime:w.stallDuration,state:I(a),totalFrames:a.uncontrolledState.videoElementTotalFrameCount,version:a.playerVersion,videoSource:void 0,viewabilityPercentage:a.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:h,state:g}}}function ea(a){var b=a.errorMessageFormat,c=a.errorName;a=a.errorCode==null||a.errorCode===""?c:a.errorCode;c=c+"#"+a+": "+fa(b);return c}function Y(a,b,c,e){a=da(a,b,c);b=c.errorMessageFormat;var f=c.errorName,g=c.errorType,h=c.url;c=c.errorCode==null||c.errorCode===""?f:c.errorCode;return{error:f,error_code:c,error_description:b,error_domain:f,error_type:g!=null?g:d("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(f,b),error_user_info:JSON.stringify(babelHelpers["extends"]({},a,e)),resource_url:h}}var fa=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};function ga(a,b,d){if(!c("gkx")("24360"))return N;if(d.type==="implementation_warning"){var e,f=d.payload.warningError,g=ea(f),h=w.warningState.eventsLoggedTotal;e=(e=w.warningState.eventsLoggedPerKey.get(g))!=null?e:0;if(h<w.warningState.eventsMaxLoggedTotal&&e<w.warningState.eventsMaxLoggedPerKey){w.warningState.eventsLoggedTotal++;w.warningState.eventsLoggedPerKey.set(g,e+1);g=Y(b,d,f,{warning:{loggedPerKey:e+1,loggedTotal:h+1}});M({eventType:"player_warning",logDataOverrides:babelHelpers["extends"]({},K(),g),prevState:a,state:b})}}return N}function ha(a,b,c){var d=b.controlledState.error;if(d!=null&&d!==w.lastLoggedError&&d.errorCode!=="410"){c=Y(b,c,d);M({eventType:"error",logDataOverrides:babelHelpers["extends"]({},K(),c),prevState:a,state:b});w.lastLoggedError=d}return N}function Z(a,b,c){var d=w.errorRecoveryAttemptState.currentRecoverableError;if(d!=null){c=Y(b,c,d);w.errorRecoveryAttemptState.eventsLogged++;w.errorRecoveryAttemptState.repeatCount=0;M({eventType:"error_recovery_attempt",logDataOverrides:babelHelpers["extends"]({},c),prevState:a,state:b})}return N}function ia(a,b,d){if(d.type==="error_recovery_attempt"&&w.errorRecoveryAttemptState.eventsLogged<l){var e=w.errorRecoveryAttemptState.currentRecoverableError,f=d.payload.recoverableError;if(f!=null&&f.errorName==="OZ_NETWORK"&&!c("NetworkStatus").isOnline())return N;w.errorRecoveryAttemptState.currentRecoverableError=f;e==null||e.errorName!==f.errorName||e.errorCode!==f.errorCode?Z(a,b,d):(w.errorRecoveryAttemptState.repeatCount++,w.errorRecoveryAttemptState.repeatCount>k&&Z(a,b,d))}return N}function ja(a,b,c){if(!t)return N;var d=b.uncontrolledState.videoElementPlaybackRate;c.type==="dom_event_ratechange"&&w.lastLoggedPlaybackSpeed!=null&&d!==0&&d!==w.lastLoggedPlaybackSpeed&&M({eventType:"playback_speed_changed",prevState:a,state:b});return N}function ka(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?w.nextHeartbeatTime=null:c!=="stalling"&&w.nextHeartbeatTime==null&&(w.nextHeartbeatTime=Date.now()+j);var d=w.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&M({eventType:"heart_beat",prevState:a,state:b}),w.nextHeartbeatTime=e+j)}return N}function la(a,b,c){if(c.type==="implementation_mounted"){M({eventType:"player_loaded",prevState:a,state:b});return N}else return N}function $(a,b,c){M({eventType:c?"entered_fs":"exited_fs",prevState:a,state:b})}function ma(a,b,c){f.playerFormat!==g.playerFormat&&M({eventType:"player_format_changed",prevState:a,state:b});return N}function na(a,b,c){if(c.type!=="notify_fullscreen_changed")return N;c=w.lastLoggedFullscreenState;var d=b.uncontrolledState.isFullscreen;if(c!==!0&&d===!0){$(a,b,d);return N}else if(c===!0&&d===!1){$(a,b,d);return N}else return N}function oa(a,b,d){d=f;d=d.adClientToken;if((d==null||d==="")&&c("gkx")("24380"))return N;d=b.controlledState.playbackState;var e=w.lastLoggedViewabilityPercentage,g=b.uncontrolledState.viewabilityPercentage;if(d!=="paused"&&d!=="ended"&&e!=null&&e!==g){M({eventType:"viewability_changed",prevState:a,state:b});return N}else return N}function pa(a,b,c){if(c.type==="controller_set_captions_visible_requested"){M({eventType:"caption_change",prevState:a,state:b});return N}else return N}function qa(b){e;g=f;if(b.type==="notify_logging_metadata_change"){b=b.payload;var c=b.coreVideoPlayerMetaData;b=b.loggingMetaData;if(s){var d=c.initialTracePolicy!==f.initialTracePolicy;p(a.debugLogId,e,b,{initialTracePolicyChanged:d})}e=b;f=c}}return{addDebugSubscriber:function(a){return y(a)},consumeLoggerEvents:function(){var b=m.splice(0);s&&(b.length>0&&o(a.debugLogId,"[consumeLoggerEvents] ("+b.length+" events)",b));return b},getLoggerState:function(){return w},handleStateMachine:function(b,c,d){qa(d);var e=c.controlledState.playbackState;D(b,c,d);C(b,c);var f=[ma,na,oa,R,S,U,T,V,W,aa,ba,X,la,pa,ca,ga,ha,ia,ka,ja];f.forEach(function(a){a(b,c,d)});s&&q(a.debugLogId,b,c,d);(e==="paused"||e==="ended")&&(w.canLogPlayingEvent=!0);d.type==="controller_pause_requested"&&(w.hasPausedOnce=!0,w.shouldIgnoreDomPause=!0);d.type==="controller_play_requested"&&(w.hasPausedOnce=!0,w.shouldIgnoreDomPlay=!0);d.type==="dom_event_pause"&&(w.shouldIgnoreDomPause=!1);d.type==="dom_event_play"&&(w.shouldIgnoreDomPlay=!1,w.lastLoggedViewabilityPercentage=c.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(a){var b=a.eventType,c=a.logDataOverrides;a=a.state;M({eventType:b,logDataOverrides:c,prevState:a,state:a})},setLoggingToVPLAdditionalData:function(a,c){b.set(a,c),s&&r(a,c)}}}g.HEARTBEAT_INTERVAL=j;g.createVideoPlayerImplementationStateMachineLogger=a}),98);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}f["default"]=a}),66);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["NetworkStatus","convertToViewabilityPercentage","gkx","performance"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,d=a.engineExtrasAPI,e=a.fullscreenControllerRef,f=a.videoElementAPI,g=a.videoLiveTraceRef;a=a.videoPlayerPassiveViewabilityInfo;g=g.current;var i=Date.now(),j=typeof (h||(h=c("performance"))).now==="function"?(h||(h=c("performance"))).now():0;if(f==null){var k;return{audioRepresentationID:void 0,availableAudioTracks:[],availableQualities:[],availableVideoTracks:[],clockTimestamp:i,currentPlayingAudioTrackID:void 0,currentPlayingVideoQuality:void 0,currentPlayingVideoTrackID:void 0,estimatedBandwidth:void 0,isDocumentHidden:document.hidden,isDRM:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:e.current?e.current.getIsFullscreen():void 0,isLiveRewindAvailable:void 0,isMixedCodecManifest:null,isPredictiveDash:void 0,liveTraceContext:g?(k=g.getLiveTraceContext())!=null?k:void 0:void 0,manifestIdentifier:void 0,mpdValidationErrors:void 0,networkConnected:void 0,perfTimestamp:j,targetAudioTrack:null,targetVideoQuality:"",videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoProjection:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0}}k=f.getPlayheadPosition();a=a.getCurrent();return{audioRepresentationID:d?d.getCurrentPlayingAudioRepresentationID():void 0,availableAudioTracks:(b=d==null?void 0:d.getAvailableAudioTracks())!=null?b:[],availableQualities:(b=d==null?void 0:d.getAvailableVideoQualities())!=null?b:[],availableVideoTracks:(b=d==null?void 0:d.getAvailableVideoTracks())!=null?b:[],clockTimestamp:i,currentPlayingAudioTrackID:d?d.getCurrentPlayingAudioRepresentationID():void 0,currentPlayingVideoQuality:d?d.getCurrentPlayingVideoQuality():void 0,currentPlayingVideoTrackID:d?d.getCurrentPlayingVideoRepresentationID():void 0,estimatedBandwidth:d?d.getEstimatedBandwidth():void 0,isDocumentHidden:document.hidden,isDRM:d?d.isDrm():void 0,isFBIsLiveTemplated:d?d.isFBIsLiveTemplated():void 0,isFBMS:d?d.isFBMS():void 0,isFBWasLive:d?d.isFBWasLive():void 0,isFullscreen:e.current?e.current.getIsFullscreen():void 0,isLiveRewindAvailable:d?d.isLiveRewindAvailable():void 0,isMixedCodecManifest:d?d.isMixedCodecManifest():null,isPredictiveDash:d?d.isPredictiveDash():void 0,liveTraceContext:g?(b=g.getLiveTraceContext())!=null?b:void 0:void 0,manifestIdentifier:d?d.getManifestIdentifier():void 0,mpdValidationErrors:d?d.getMpdValidationErrors():void 0,networkConnected:c("NetworkStatus").isOnline(),perfTimestamp:j,targetAudioTrack:(i=d==null?void 0:d.getTargetAudioTrack())!=null?i:null,targetVideoQuality:(e=d==null?void 0:d.getCurrentTargetVideoQuality())!=null?e:"",videoElementDebugCurrentSrc:c("gkx")("24351")?(g=f.getUnderlyingVideoElement())==null?void 0:g.currentSrc:void 0,videoElementDebugSrc:c("gkx")("24351")?(b=f.getUnderlyingVideoElement())==null?void 0:b.src:void 0,videoElementDroppedFrameCount:f.getDroppedFrameCount(),videoElementDuration:f.getDuration(),videoElementEnded:f.getEnded(),videoElementError:f.getError(),videoElementLastBufferEndPosition:f.getLastBufferEndPosition(),videoElementMuted:f.getMuted(),videoElementNetworkState:f.getNetworkState(),videoElementPaused:f.getPaused(),videoElementPlaybackRate:f.getPlaybackRate(),videoElementPlayheadPosition:k,videoElementReadyState:f.getReadyState(),videoElementTotalFrameCount:f.getTotalFrameCount(),videoElementVolume:f.getVolume(),videoProjection:d==null?void 0:d.getVideoProjectionType(),videoRepresentationID:d?d.getCurrentPlayingVideoRepresentationID():void 0,viewabilityPercentage:a?c("convertToViewabilityPercentage")(a.visiblePercentage):void 0}}g.createVideoPlayerImplementationStateMachineStateUncontrolledState=a}),98);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.alwaysShowCaptions,c=a.areCaptionsAutogenerated,e=a.captionDisplayStyle,f=a.dimensions,g=a.isAbrEnabled,h=a.playerVersion,i=a.streamingFormat;a=a.videoPlayerPassiveViewabilityInfo;var j=!0,k=1;a=d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfo:a});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],allEmsgBoxes:new Map(),bufferingDetected:!1,captionDisplayStyle:e,captionFormat:null,captionsLoaded:!1,captionsLocale:null,captionsVisible:b,dimensions:f,domEventsLatestPerfMs:{},emsgObserverTokens:new Set(),error:null,hasPlayEverBeenRequested:!1,hostCallCanApply:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:c,isDesktopPictureInPicture:!1,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPausedTimeMs:0,lastPauseReason:null,lastPlayedTimeMs:0,lastPlayReason:null,latencyLevel:"normal",loopCount:0,loopCurrent:0,mountState:"before_mounted",muted:j,playbackState:"paused",scrubbing:!1,seekableRanges:null,seeking:!1,seekTargetPosition:null,selectedVideoQuality:"notselected",selectedVideoVariant:null,streamEnded:!1,streamingFormat:i,streamInterrupted:!1,targetPlaybackRate:1,ullIneligibilityReason:null,volume:k,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:g,playerVersion:h,uncontrolledState:a}}g.createVideoPlayerImplementationStateMachineInitialState=a}),98);
__d("useSEOLoggedOutWebCrawler",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("23157")}g["default"]=a}),98);
__d("VideoPlayerImplementationEngineAPI",["CometEventListener","CometVideoPictureInPictureManagerContext","CometVisualCompletion","CurrentUser","ErrorMetadata","FBLogger","MediaPlaybackCompoundEventStateMachineLogger","MediaPlaybackLogFlusher","PlaybackSpeedExperiments","RunComet","SubscriptionsHandler","VideoLiveTrace","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerVideoPixelsFitContext","clearTimeout","cr:2336","cr:355","cr:4596","cr:506","deepEquals","emptyFunction","err","gkx","performanceNow","react","recoverableViolation","removeFromArray","setTimeout","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useSEOLoggedOutWebCrawler","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));f=i;var k=f.useEffect,l=f.useRef,m=f.useState,n=function(){function a(a){var b=a.pauseRequestCallbacks,c=a.playRequestCallbacks,d=a.scrubBeginRequestCallbacks;a=a.scrubEndRequestCallbacks;this.$1=c;this.$2=b;this.$3=d;this.$4=a}var b=a.prototype;b.playRequest=function(a){var b=this;this.$1.push(a);return function(){c("removeFromArray")(b.$1,a)}};b.pauseRequest=function(a){var b=this;this.$2.push(a);return function(){c("removeFromArray")(b.$2,a)}};b.scrubBeginRequest=function(a){var b=this;this.$3.push(a);return function(){c("removeFromArray")(b.$3,a)}};b.scrubEndRequest=function(a){var b=this;this.$4.push(a);return function(){c("removeFromArray")(b.$4,a)}};return a}();function o(a){var b=a.concurrentAutoplayManagementAPI,d=a.debugAPI,e=a.exitPictureInPictureImpl,f=a.fullscreenControllerRef,g=a.getCurrentExposedState,h=a.getCurrentIsDesktopPictureInPicture,i=a.getCurrentIsFullscreen,j=a.getCurrentLiveRewindPlayheadPosition,k=a.getCurrentPlayheadPosition,l=a.internal_getCurrentStateMachineState,m=a.internal_injectFatalError,o=a.loggerAPI,p=a.pauseImpl,q=a.playImpl,r=a.registerEmsgObserverImpl,s=a.requestPictureInPictureImpl,t=a.scrubBeginImpl,u=a.scrubEndImpl,v=a.seekImpl,w=a.selectVideoQualityImpl,x=a.selectVideoVariantImpl,y=a.setCaptionsDisplayStyleImpl,z=a.setCaptionsUrlImpl,A=a.setCaptionsVisibleImpl,B=a.setIsLiveRewindActiveImpl,C=a.setLatencyLevelImpl,D=a.setMutedImpl,E=a.setPictureInPictureStateImpl,F=a.setPlaybackRateImpl,G=a.setVolumeImpl,H=a.subscribers,I=a.unregisterEmsgObserverImpl,J=a.videoElementAPIRef,K=a.videoPlayerPassiveViewabilityInfo,L=new Set(),M=!1,N=null,O=[],P=[],Q=[],R=[],S=new n({pauseRequestCallbacks:P,playRequestCallbacks:O,scrubBeginRequestCallbacks:Q,scrubEndRequestCallbacks:R}),T={freeze:function(){if(!g().paused)throw c("unrecoverableViolation")("Video player must be paused before the controller freeze","comet_video_player");var a={};try{var b=!1;L.size===0&&(b=!0,N={exposedState:g(),isFullscreen:i(),liveRewindPlayheadPosition:j(),playheadPosition:k(),stateMachineState:l()});L.add(a);b&&(M=!0,H.forEach(function(a){a()}))}finally{M=!1}return a},isFrozen:function(){return N!=null},unfreeze:function(a){if(!L.has(a))throw c("unrecoverableViolation")("Video player controller unfreeze token not found","comet_video_player");L["delete"](a);L.size===0&&(N=null,H.forEach(function(a){a()}))}},U=function(){return N!=null?N.exposedState:g()},V=babelHelpers["extends"]({},b,T,o,{debugAPI:d,exitPictureInPicture:function(){if(T.isFrozen())return;e()},getCurrentState:U,getIsDesktopPictureInPicture:function(){return N!=null?N.isFullscreen:h()},getIsFullscreen:function(){return N!=null?N.isFullscreen:i()},getLiveRewindPlayheadPosition:function(){return N!=null?N.liveRewindPlayheadPosition:j()},getPlayheadPosition:function(){return N!=null?N.playheadPosition:k()},internal_getCoreVideoStates:function(){return{implementationController:V,implementationExposedState:U(),videoPlayerPassiveViewabilityInfo:K}},internal_getStateMachineState:function(){return N!=null?N.stateMachineState:l()},internal_getVideoElement:function(){var a=J.current;if(a!=null){a=a.getUnderlyingVideoElement();return a}return null},internal_getVideoPixelsDecodedDimensions:function(){var a=J.current;return(a=a==null?void 0:a.getVideoPixelsDecodedDimensions())!=null?a:null},internal_getVideoPixelsPaintedDimensions:function(){var a=J.current;return(a=a==null?void 0:a.getVideoPixelsPaintedDimensions())!=null?a:null},internal_injectFatalError:m,observeOn:function(){return S},pause:function(a){if(T.isFrozen())return;P.forEach(function(b){return b(a)});p(a)},play:function(a){if(T.isFrozen())return;O.forEach(function(b){return b(a)});q(a)},registerEmsgObserver:function(){var a={};r(a);return a},requestPictureInPicture:function(){if(T.isFrozen())return;s()},requestSetIsFullscreen:function(a){if(T.isFrozen())return;var b=f.current;if(b){var c=V.internal_getVideoElement();b.requestSetIsFullscreen(a,c)}},scrollIntoView:function(a){var b=V.internal_getVideoElement();b&&b.scrollIntoView(a)},scrubBegin:function(){if(T.isFrozen())return;Q.forEach(function(a){return a()});t()},scrubEnd:function(a){if(T.isFrozen())return;R.forEach(function(b){return b(a)});u(a)},seek:function(a){if(T.isFrozen())return;v(a)},selectVideoQuality:function(a){if(T.isFrozen())return;w(a)},selectVideoVariant:function(a){if(T.isFrozen())return;x(a)},setCaptionsDisplayStyle:function(a){if(T.isFrozen())return;y(a)},setCaptionsUrl:function(a){if(T.isFrozen())return;z(a)},setCaptionsVisible:function(a){if(T.isFrozen())return;A(a)},setIsLiveRewindActive:function(a){if(T.isFrozen())return;B(a)},setLatencyLevel:function(a){if(T.isFrozen())return;C(a)},setMuted:function(a,b){if(T.isFrozen())return;D(a,b)},setPictureInPictureState:function(a){if(T.isFrozen())return;E(a)},setPlaybackRate:function(a){if(T.isFrozen())return;F(a)},setVolume:function(a){if(T.isFrozen())return;G(a)},subscribe:function(a){var b=function(){if(T.isFrozen()&&!M)return;a()},d=f.current,e=d?d.subscribe(b):null;H.push(b);return{remove:function(){e&&e.remove(),c("removeFromArray")(H,b)}}},unregisterEmsgObserver:function(a){I(a)},videoElementAPIRef:J});return V}function p(a){var b=a.concurrentAutoplayManagementAPI,c=a.createExposedState,d=a.debugAPI,e=a.fullscreenControllerRef,f=a.loggerToSNAPL,g=a.loggerToVPL,h=a.machine,i=a.subscribers,j=a.videoElementAPIRef;a=a.videoPlayerPassiveViewabilityInfo;var k={logVPLEvent_DO_NOT_USE:function(a,b){g.logVPLEvent({eventType:a,logDataOverrides:b,state:h.getCurrentState()})},setLoggingToSNAPLAdditionalData:function(a){f==null||f.setLoggingToSNAPLAdditionalData(a)},setLoggingToVPLAdditionalData:function(a,b){g.setLoggingToVPLAdditionalData(a,b)}};return o({concurrentAutoplayManagementAPI:b,debugAPI:d,exitPictureInPictureImpl:function(){h.dispatch({type:"controller_picture_in_picture_exit_requested"})},fullscreenControllerRef:e,getCurrentExposedState:function(){return c(h.getCurrentState())},getCurrentIsDesktopPictureInPicture:function(){var a;return(a=h.getCurrentState().controlledState.isDesktopPictureInPicture)!=null?a:!1},getCurrentIsFullscreen:function(){var a=e.current;return a?a.getIsFullscreen():!1},getCurrentLiveRewindPlayheadPosition:function(){var a=h.getCurrentState();a=a.controlledState;var b=a.isLiveRewindActive,c=a.seekableRanges;a=a.seekTargetPosition;if(!b||a==null)return null;c=(b=c==null?void 0:c.end(0))!=null?b:0;return a-c},getCurrentPlayheadPosition:function(){var a,b=0;return(a=(a=(a=j.current)==null?void 0:a.getPlayheadPosition())!=null?a:h.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},internal_getCurrentStateMachineState:function(){return h.getCurrentState()},internal_injectFatalError:function(a){h.dispatch({payload:{fatalError:a},type:"controller_inject_fatal_error"})},loggerAPI:k,pauseImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_pause_requested"})},playImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_play_requested"})},registerEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"register_emsg_observer"})},requestPictureInPictureImpl:function(){h.dispatch({type:"controller_picture_in_picture_requested"})},scrubBeginImpl:function(){h.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seekImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectVideoQualityImpl:function(a){h.dispatch({payload:{selectedVideoQuality:a},type:"controller_quality_requested"})},selectVideoVariantImpl:function(a){h.dispatch({payload:{selectedVideoVariant:a},type:"controller_video_variant_requested"})},setCaptionsDisplayStyleImpl:function(a){h.dispatch({payload:{captionDisplayStyle:a},type:"controller_set_caption_display_style_requested"})},setCaptionsUrlImpl:function(a){h.dispatch({payload:{captionsUrl:a},type:"controller_set_captions_url_requested"})},setCaptionsVisibleImpl:function(a){h.dispatch({payload:{captionsVisible:a},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(a){h.dispatch({payload:{isLiveRewindActive:a},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(a){h.dispatch({payload:{latencyLevel:a},type:"controller_set_latency_level_requested"})},setMutedImpl:function(a,b){h.dispatch({payload:{muted:a,reason:b},type:"controller_muted_requested"})},setPictureInPictureStateImpl:function(a){h.dispatch({payload:{isInPictureInPictureMode:a},type:"controller_set_picture_in_picture_state_requested"})},setPlaybackRateImpl:function(a){h.dispatch({payload:{playbackRate:a},type:"controller_set_playback_rate"})},setVolumeImpl:function(a){h.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribers:i,unregisterEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"unregister_emsg_observer"})},videoElementAPIRef:j,videoPlayerPassiveViewabilityInfo:a})}function q(a){a=a.current;if(a==null)throw c("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return a}function r(a){var b=a.alwaysShowCaptions,e=a.areCaptionsAutogenerated,f=a.captionDisplayStyle,g=a.captionsControllerRef,h=a.debugLogId,i=a.dimensions,j=a.engineExtrasAPI,k=a.engineMetadata,l=a.fullscreenControllerRef,m=a.handleFatalError,n=a.handleStateMachine,o=a.videoElementAPIRef,p=a.videoLiveTraceRef,r=a.videoPlayerPassiveViewabilityInfo;function t(a){d("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:j,hostCall:a,machine:v,videoElementAPI:o.current})}var u=null;a=[function(a,b,d){d.type==="implementation_host_call_applied"&&d.payload.hostCall.type==="host_call_play"&&b.controlledState.lastPlayReason==="autoplay_initiated"?c("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayStalling"):b.controlledState.playbackState!==a.controlledState.playbackState&&b.controlledState.playbackState==="playing"&&b.controlledState.lastPlayReason==="autoplay_initiated"&&c("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayPlaying");return!0},function(a,b,c){n(a,b,c);return!0},function(a,b,c){return!0},function(a,b,c){if(a.controlledState.bufferingDetected===!1&&b.controlledState.bufferingDetected===!0||a.controlledState.bufferingDetected===!0&&b.controlledState.bufferingDetected===!1)if(b.controlledState.bufferingDetected){a=(c=b.controlledState.lastBufferingType)!=null?c:"in_play";c=j.getPerfLoggerProvider();u=c?c.getOperationLogger("buffering").setState("buffering").setType(a).start():null}else!b.controlledState.bufferingDetected&&u!=null&&(u.log(),u=null);return!0},function(a,b,c){return c.type!=="implementation_engine_destroy_requested"?!0:!1},function(a,b,c){if(c.type!=="implementation_engine_initialized")return!0;a=q(o);c=c.type;d("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:j,machine:v,reason:c,state:b,videoElementAPI:a});return!1},function(a,b,c){if(c.type!=="dom_event_ended")return!0;a=b.controlledState;(a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1)&&v.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"});return!1},function(a,b,c){if(c.type!=="controller_pause_requested")return!0;a=b.controlledState.playbackState;if(a!=="paused")return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_pause"});return!1},function(a,b,c){if(c.type!=="controller_play_requested")return!0;a=b.controlledState.playbackState;if(a!=="stalling")return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_play"});return!1},function(a,b,c){if(c.type!=="controller_seek_requested")return!0;a=b.controlledState;b=a.seeking;a=a.seekTargetPosition;b&&a!=null&&t({payload:{currentTime:a,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_set_current_time"});return!1},function(a,b,c){if(c.type!=="controller_muted_requested")return!0;a=b.controlledState.muted;if(a!==c.payload.muted)return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:a,reason:c.type},type:"host_call_set_muted"});return!1},function(a,b,c){if(c.type!=="controller_scrub_begin_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_scrub_end_requested")return!0;a=b.controlledState;b=a.seeking;var e=a.seekTargetPosition;a=a.targetPlaybackRate;b&&e!=null?(t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":seek"},type:"host_call_set_playback_rate"}),t({payload:{currentTime:e,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type+":seek"},type:"host_call_set_current_time"})):t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":cancel"},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="buffering_begin_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_set_playback_rate")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:c.payload.playbackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="buffering_end_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:b.controlledState.targetPlaybackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_volume_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,volume:b.controlledState.volume},type:"host_call_set_volume"});return!1},function(a,b,c){if(c.type!=="controller_video_variant_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,selectedVideoVariant:b.controlledState.selectedVideoVariant},type:"host_call_set_video_variant"});return!1},function(a,b,c){if(c.type!=="controller_quality_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,selectedVideoQuality:b.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"});return!1},function(a,b,c){if(!(c.type==="controller_set_latency_level_requested"||c.type==="implementation_set_latency_level_requested"))return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:c.payload.latencyLevel,reason:c.type},type:"host_call_set_latency_level"});return!1},function(a,b,c){if(!(c.type==="dom_event_timeupdate"||c.type==="captions_loaded"))return!0;c=g.current;var e=b.controlledState.captionsVisible,f=o.current;f=f?f.getPlayheadPosition():0;if(d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&b.controlledState.isLiveRewindActive){var h=b.controlledState.seekableRanges;h=h!=null?(h=h.end(h.length()-1))!=null?h:0:0;f>=h&&v.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}if(!j.getRepresentationCaptionsExpectedFromManifest()&&c&&e&&b.controlledState.captionsLoaded){h=c.handleTimeUpdate(f);e=c.getCaptionFormat();b=a.controlledState.activeCaptions;c=a.controlledState.captionFormat;e!==c&&v.dispatch({payload:{captionFormat:e},type:"controller_set_caption_format_requested"});s(b,h)&&v.dispatch({payload:{activeCaptions:h,captionsLocale:null},type:"controller_set_active_captions_requested"})}a=p.current;a!=null&&a.onUpdateStatus({position:f});return!1},function(a,b,c){if(c.type!=="cea608_bytes_received")return!0;a=g.current;if(a){b=c.payload;c=b.timescale;b=b.videoBytes;a.handleCea608BytesReceived({timescale:c,videoBytes:b})}return!1},function(a,b,c){if(c.type!=="controller_set_captions_url_requested")return!0;a=g.current;if(a){b=c.payload.captionsUrl;a.updateCaptionsUrl(b)}return!1},function(a,b,c){if(c.type!=="controller_set_is_live_rewind_active_requested")return!0;j.setEnableLiveheadCatchup(!c.payload.isLiveRewindActive);!!d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!c.payload.isLiveRewindActive&&v.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_picture_in_picture_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_picture_in_picture"});return!1},function(a,b,c){if(c.type!=="controller_picture_in_picture_exit_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_exit_picture_in_picture"});return!1}];var v=d("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var a=o.current;return d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:j,fullscreenControllerRef:l,videoElementAPI:a,videoLiveTraceRef:p,videoPlayerPassiveViewabilityInfo:r})},debugLogId:h,initialState:d("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:b,areCaptionsAutogenerated:e,captionDisplayStyle:f,dimensions:i,isAbrEnabled:k.isAbrEnabled,playerVersion:k.playerVersion,streamingFormat:k.streamingFormat,videoPlayerPassiveViewabilityInfo:r}),onFatalError:m,stateTransitionHandlers:a});return v}function s(a,b){if(a===null&&b===null)return!1;if(a===null||b===null)return!0;var c=(b=b.rows)!=null?b:[];a=(b=a.rows)!=null?b:[];return a.length!==c.length||a.some(function(a,b){return a!==c[b]})}function t(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_fullscreen_changed"})}))}function u(a,b,c){b.current&&(b.current.remove(),b.current=null),a!=null&&(b.current=a.subscribe(function(){c.dispatch({type:"notify_viewability_changed"})}))}function v(a){var b=a.coreVideoPlayerMetaData,c=a.engineMetadata;a=a.state;var d=a.controlledState,e=d.activeCaptions,f=d.activeEmsgBoxes,g=d.captionDisplayStyle,h=d.captionsLoaded,i=d.captionsVisible,j=d.dimensions,k=d.domEventsLatestPerfMs,l=d.error,m=d.hasPlayEverBeenRequested,n=d.implementationSeekSourcePosition,o=d.inbandCaptionsAutogenerated,p=d.isDesktopPictureInPicture,q=d.isLiveRewindActive,r=d.lastMuteReason,s=d.lastPauseReason,t=d.lastPlayedTimeMs,u=d.lastPlayReason,v=d.latencyLevel,w=d.loopCount,x=d.loopCurrent,y=d.muted,z=d.playbackState,A=d.scrubbing,B=d.seekableRanges,C=d.seeking,D=d.seekTargetPosition,E=d.selectedVideoQuality,F=d.streamingFormat,G=d.streamInterrupted,H=d.targetPlaybackRate,I=d.ullIneligibilityReason,J=d.volume;d=d.watchTimeMs;var K=a.uncontrolledState,L=K.availableAudioTracks,M=K.availableQualities,N=K.availableVideoTracks,O=K.currentPlayingAudioTrackID,P=K.currentPlayingVideoQuality,Q=K.currentPlayingVideoTrackID,R=K.isDRM,S=K.isFullscreen,T=K.isLiveRewindAvailable,U=K.targetAudioTrack,V=K.targetVideoQuality,W=K.videoElementDuration,X=K.videoElementLastBufferEndPosition,aa=K.videoProjection;K=K.videoRepresentationID;var Y=z==="ended",Z=z==="paused"||Y,ba=z==="playing",ca=z==="inPlayStalling";z=z==="stalling"||ca;e={activeCaptions:e,activeEmsgBoxes:f,availableAudioTracks:L,availableVideoQualities:M,availableVideoTracks:N,bufferEnd:X!=null?X:0,captionDisplayStyle:g,captionsLoaded:h,captionsVisible:i,currentAudioTrackID:O!=null?O:null,currentVideoQuality:P!=null?P:"",currentVideoTrackID:Q!=null?Q:null,domEventsLatestPerfMs:k,duration:W!=null?W:0,ended:Y,error:l,hasPlayEverBeenRequested:m,inbandCaptionsAutogenerated:o,inPlayStalling:ca,internal_coreVideoPlayerMetaData:b,isAbrEnabled:c.isAbrEnabled,isDesktopPictureInPicture:p!=null?p:!1,isDRM:R!=null?R:null,isFullscreen:S!=null?S:!1,isLiveRewindActive:q,isLiveRewindAvailable:T!=null?T:!1,lastMuteReason:r,lastPauseReason:s,lastPlayedTimeMs:t,lastPlayReason:u,latencyLevel:v,loopCount:w,loopCurrent:x,muted:y,paused:Z,playerInstanceKey:c.playerInstanceKey,playerVersion:a.playerVersion,playerViewportDimensions:j,playing:ba,scrubbing:A,seekableRanges:B,seeking:C,seekSourcePosition:n,seekTargetPosition:D,selectedVideoQuality:E,stalling:z,streamingFormat:F,streamInterrupted:G,targetAudioTrack:U,targetPlaybackRate:H,targetVideoQuality:V,ullIneligibilityReason:I,videoFBID:b.videoFBID,videoPixelsAspectRatio:b.videoPixelsAspectRatio,videoProjection:aa,videoRepresentationID:K,volume:J,watchTimeMs:d};return e}var w=c("emptyFunction"),x=!1;c("gkx")("13250")&&(x=!0,w=function(a,b){var c=a.debugLogId,d=a.engineMetadata;try{var e;for(var f=arguments.length,g=new Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];(e=window.console).info.apply(e,["["+c+"][VideoPlayerEngine:"+d.playerVersion+"]"+b].concat(g))}catch(a){}});function a(a){var e=a.createDebugAPI,f=a.createVideoPlayerError,g=a.destroyEngineParts,i=a.engineCreateArgs,j=a.engineExtrasAPI,k=a.engineMetadata,l=a.handleVideoElementChanged,m=a.handleVideoInfoChange,n=i.checkInDOM,o=i.handleFatalError,q=i.initialProps,s=i.setExposedStateInReact,y=q.loggingMetaData.instanceKey;a="#"+((h||(h=c("performanceNow")))()*1e3).toFixed(0);var z=y+";vid="+q.coreVideoPlayerMetaData.videoFBID+";"+a,A=c("emptyFunction");if(x){var B={debugLogId:z,engineMetadata:k};A=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return w.apply(void 0,[B,a].concat(c))};A("[creating]",q)}i=q.coreVideoPlayerMetaData;a=i.broadcastId;var C=i.isLiveStreaming;i=i.isLiveTraceEnabled;var D={current:Boolean(C)&&Boolean(i)&&a!=null?new(c("VideoLiveTrace"))(a,y,c("CurrentUser").getAccountID()):null},E=q.coreVideoPlayerMetaData.loggingConfig,F=E.loggingToVPLEnabled==null?!0:E.loggingToVPLEnabled,G=d("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:z,initialCoreVideoPlayerMetaData:q.coreVideoPlayerMetaData,initialLoggingMetaData:q.loggingMetaData,videoLiveTraceRef:D}),H=new(c("VideoPlayerBanzaiLogFlusher"))(z,G),I=E.loggingToSNAPLEnabled==null?c("gkx")("8610"):E.loggingToSNAPLEnabled;C=E.loggingToSNAPLCreateMetadataProvider;var J=I?d("MediaPlaybackCompoundEventStateMachineLogger").createMediaPlaybackCompoundEventStateMachineLogger({debugLogId:z,initialCoreVideoPlayerMetaData:q.coreVideoPlayerMetaData,initialLoggingMetaData:q.loggingMetaData,metadataProvider:C==null?void 0:C()}):null,K=J!=null?new(c("MediaPlaybackLogFlusher"))(z,J):null,L={current:q.coreVideoPlayerMetaData},M={current:(i=q.fullscreenController)!=null?i:null},N={current:null};a=d("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI();var O=[],P=function(){O.forEach(function(a){a()}),!F||E.disableLogging===!0?H.discardLogsWithoutFlushing():H.flushLogs(),!I||E.disableLogging===!0?K==null||K.discardLogsWithoutFlushing():K==null||K.flushLogs()},Q={current:q.onExposedStateChanged},R={current:null},S=null,T={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:q.coreVideoPlayerMetaData.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:!1,sideLoadCaptionsExpectedFromProps:q.coreVideoPlayerMetaData.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(C=q.coreVideoPlayerMetaData.sideLoadCaptionsUrl)!=null?C:null}},U={current:null},V={current:null},W=new(c("SubscriptionsHandler"))(),X=new(c("SubscriptionsHandler"))(),aa="before_mounted";function Y(a){if(c("gkx")("24349"))return a.controlledState.mountState==="mounted_onscreen"||a.controlledState.mountState==="mounted_offscreen";else return aa==="mounted"}var Z={current:null},ba=function(a){a=v({coreVideoPlayerMetaData:L.current,engineMetadata:k,state:a});return a},ca={current:null},da={current:null},ea=function(a){if(Y(a)){if(a===ca.current)return;var b=ba(a);if(da.current!=null&&c("deepEquals")(da.current,b))return;ca.current=a;da.current=b;s(b);a=Q.current;a&&a({implementationController:va,implementationExposedState:b})}};i=function(a,b,c){G.handleStateMachine(a,b,c),J==null||J.handleStateMachine(a,b,c),ea(b),P()};var fa=function(a,b){};C=function(a){fa(a,"state_machine_fatal_error")};var $=r({alwaysShowCaptions:Boolean(q.coreVideoPlayerMetaData.alwaysShowCaptions),areCaptionsAutogenerated:Boolean(q.coreVideoPlayerMetaData.areCaptionsAutogenerated),captionDisplayStyle:q.coreVideoPlayerMetaData.captionDisplayStyle,captionsControllerRef:N,debugLogId:z,dimensions:q.dimensions,engineExtrasAPI:j,engineMetadata:k,fullscreenControllerRef:M,handleFatalError:C,handleStateMachine:i,videoElementAPIRef:Z,videoLiveTraceRef:D,videoPlayerPassiveViewabilityInfo:q.videoPlayerPassiveViewabilityInfo}),ga=!1,ha=function(a){var b=R.current!=null,d=Z.current!=null;W.release();c("gkx")("18183")&&W.engage();$.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroy_requested"});var e=["destroyEngine("+a+")"];try{if(!ga){ga=!0;x&&A("[destroyEngineParts] begin callChain:"+e.join(":"));try{g(e)}finally{x&&A("[destroyEngineParts] end callChain:"+e.join(":"))}}else x&&A("[destroyEngineParts] skip callChain:"+e.join(":"))}catch(g){try{e=c("FBLogger")("comet_video_player").catching(g);var f=q.coreVideoPlayerMetaData.videoFBID;f!=null&&(e=e.addMetadata("COMET_VIDEO","VIDEO_ID",f));e=e.addMetadata("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({destroy_reason:a,player_instance_key:y,player_version:k.playerVersion,video_element_api_existed:d,video_element_existed:b}));e.warn("Error thrown by destroyEngineParts: %s",g.message)}catch(a){}}f=N.current;f!=null&&($.getCurrentState().controlledState.captionsLoaded&&$.dispatch({type:"captions_unloaded"}),N.current=null,f.destroy());t(null,M,U,$);u(null,V,$);$.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroyed"});b&&(c("gkx")("17338")||c("gkx")("18183"))&&pa(null,["destroy",a])};fa=function(a,b){a=f(a,b);$.dispatch({payload:{fatalError:a},type:"implementation_fatal_error"});ha("implementation_fatal_error");o(a)};function ia(a){return a.sideLoadCaptionsExpectedFromProps||a.sideLoadCaptionsUrlFromProps!=null}function ja(a){return a.inbandCaptionsExpectedFromProps&&((a=a.inbandCaptionsExpectedFromManifest)!=null?a:!1)}function ka(a){return(a=a.inbandCaptionsAutogeneratedFromManifest)!=null?a:!1}var la=function(a){var b=ia(a),c=ja(a),e=ka(a),f=N.current;e!==ka(T.current)&&$.dispatch({payload:{inbandCaptionsAutogenerated:e},type:"inband_captions_autogenerated_changed"});f!=null?c!==ja(T.current)&&(f.updateInbandCaptionsExpected(c),!c&&$.getCurrentState().controlledState.captionsLoaded&&$.dispatch({type:"captions_unloaded"})):(b||c)&&f==null&&(N.current=d("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:b?a.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:c,onCaptionsLoaded:function(){$.dispatch({type:"captions_loaded"})}}));T.current=a},ma=function(a){j!=null&&a&&a.width>0&&a.height>0&&(j.setDimensions(a),$.dispatch({payload:{dimensions:{height:a.height,width:a.width}},type:"player_dimensions_changed"}))},na=function(a){a!==$.getCurrentState().controlledState.loopCount&&$.dispatch({payload:{loopCount:a},type:"loop_count_change_requested"})},oa=function(a){x&&A("[cleanupVideoElement]"),"srcObject"in a&&(a.srcObject=null),a.removeAttribute("src"),X.release(),X.engage()},pa=function(a,e){if(R.current===a)return;x&&A("[handleVideoElement] callChain:"+e.join(":"),{videoElementMaybe:a});a!=null&&R.current!=null&&R.current!==a&&c("recoverableViolation")("The video element was recreated","comet_video_player");S!=null&&S();var f=R.current;f&&oa(f);R.current=a;c("gkx")("18183")&&(a?(Z.current==null||a!==Z.current.getUnderlyingVideoElement())&&(Z.current=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a)):Z.current=null);b("cr:506")!=null&&a!=null&&(S=b("cr:506")(a,z));if(a!=null){X.addSubscriptions(c("CometEventListener").listen(a,"enterpictureinpicture",function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();a&&$.dispatch({payload:{isInPictureInPictureMode:!0},type:"controller_set_picture_in_picture_state_requested"})}),c("CometEventListener").listen(a,"leavepictureinpicture",function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();a&&$.dispatch({payload:{isInPictureInPictureMode:!1},type:"controller_set_picture_in_picture_state_requested"})}));$.dispatch({type:"implementation_video_node_mounted"});f=[].concat(e,["handleVideoElement(non-null)"]);try{x&&A("[handleVideoElementChanged(non-null)] begin callChain:"+f.join(":"),{videoElementMaybe:a}),l(a,f)}finally{x&&A("[handleVideoElementChanged(non-null)] end callChain:"+f.join(":"),{videoElementMaybe:a})}}else{$.dispatch({type:"implementation_video_node_unmounted"});f=[].concat(e,["handleVideoElement(null)"]);try{x&&A("[handleVideoElementChanged(null)] begin callChain:"+f.join(":"),{videoElementMaybe:a}),l(null,f)}finally{x&&A("[handleVideoElementChanged(null)] end callChain:"+f.join(":"),{videoElementMaybe:a})}}},qa=q.loggingMetaData.instanceKey;C=function(a){var b;Q.current=a.onExposedStateChanged;L.current=a.coreVideoPlayerMetaData;if(!Y($.getCurrentState()))return;x&&(a.loggingMetaData.instanceKey!==qa&&(A("[handleReactPropsChanged][WARNING] instanceKey changed from "+qa+" to "+a.loggingMetaData.instanceKey),qa=a.loggingMetaData.instanceKey),A("[handleReactPropsChanged]",a));t((b=a.fullscreenController)!=null?b:null,M,U,$);u((b=a.videoPlayerPassiveViewabilityInfo)!=null?b:null,V,$);if(!m(a)){b={inbandCaptionsAutogeneratedFromManifest:T.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:T.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:a.coreVideoPlayerMetaData.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:T.current.representationCaptionsExpectedFromManifest,sideLoadCaptionsExpectedFromProps:a.coreVideoPlayerMetaData.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(b=a.coreVideoPlayerMetaData.sideLoadCaptionsUrl)!=null?b:null};la(b);ma(a.dimensions);na((b=a.coreVideoPlayerMetaData.loopCount)!=null?b:0)}$.dispatch({payload:{coreVideoPlayerMetaData:a.coreVideoPlayerMetaData,loggingMetaData:a.loggingMetaData},type:"notify_logging_metadata_change"})};var ra=null;i=function(){var a=$.getCurrentState().controlledState.mountState;switch(a){case"before_mounted":W.addSubscriptions(d("RunComet").onUnload(function(){ha("page_unload")}));$.dispatch({type:"implementation_mounted"});l(R.current,["handleReactEffectInit(before_mounted)"]);break;case"mounted_onscreen":break;case"mounted_offscreen":c("clearTimeout")(ra);ra=null;$.dispatch({type:"implementation_onscreen"});break;case"unmounted":break;default:a}};var sa=function(){var a=function(){c("clearTimeout")(ra);ra=null;if($.getCurrentState().controlledState.mountState==="unmounted")return;var b=n();!b?($.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),ha("implementation_unmounted:react_effect_cleanup")):ra=c("setTimeout")(a,1e3)},b=$.getCurrentState().controlledState.mountState;switch(b){case"before_mounted":break;case"mounted_onscreen":$.dispatch({type:"implementation_offscreen"});a();break;case"mounted_offscreen":a();break;case"unmounted":break}},ta=function(){Y($.getCurrentState())||(aa="mounted",W.addSubscriptions(d("RunComet").onUnload(function(){ha("page_unload")})),$.dispatch({type:"implementation_mounted"}),l(R.current,["handleReactMount"]))},ua=function(){Y($.getCurrentState())&&(aa="unmounted",$.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),ha("implementation_unmounted:react_effect_cleanup"))},va=p({concurrentAutoplayManagementAPI:a,createExposedState:ba,debugAPI:e({getVideoElementAPI:function(){return Z.current},loggerToVPL:G}),fullscreenControllerRef:M,loggerToSNAPL:J,loggerToVPL:G,machine:$,subscribers:O,videoElementAPIRef:Z,videoPlayerPassiveViewabilityInfo:q.videoPlayerPassiveViewabilityInfo});a=d("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine($,pa);e=ba($.getInitialState());var wa=x?function(a,b){return function(){A("["+b+"] begin");try{a()}finally{A("["+b+"] end")}}}:function(a,b){return a};sa={handleOnBeforeUnload:function(){if(q.coreVideoPlayerMetaData.loggingConfig.enablePauseAndFlushOnBeforeUnload!==!0)return;J==null||J.logPausedOnBeforeUnload($.getCurrentState());K==null||K.flushLogs(!0)},handleReactEffectCleanup:c("gkx")("24349")?wa(sa,"handleReactEffectCleanup"):wa(ua,"handleReactEffectCleanup->handleReactUnmount"),handleReactEffectInit:c("gkx")("24349")?wa(i,"handleReactEffectInit"):wa(ta,"handleReactEffectInit->handleReactMount"),handleReactPropsChanged:C,implementationController:va,initialExposedState:e,logFlusherToVPL:H,machine:$,notifySubscribers:P,videoElementCallbacks:a,videoElementRefCallback:function(a){if(a==null&&c("gkx")("17338"))return;pa(a,["videoElementRefCallback"])}};x&&A("[created]",{engine:sa,machine:$,videoElementRef:R});return{debugLog:A,engine:sa,getCaptionsInfo:function(){return T.current},getVideoElement:function(){return R.current},getVideoLiveTrace:function(){return D.current},handleCaptionsInfoChange:la,handleFatalImplementationError:fa,loggerToVPL:G,machine:$,videoElementAPIRef:Z}}function y(a,b){var d,e=c("err").apply(void 0,[a.errorName+": "+a.errorMessageFormat].concat(a.errorMessageParams));e.name=a.errorName;e.errorName=a.errorName;e.type="error";a.stack!=null&&a.stack!==""&&(e.stack=a.stack);var f=new(c("ErrorMetadata"))();f.addEntries(["COMET_VIDEO","ERROR_LOCATION",a.errorLocation],["COMET_VIDEO","ERROR_CODE",(d=a.errorCode)!=null?d:""],["COMET_VIDEO","ERROR_URL",(d=a.url)!=null?d:""]);b!=null&&f.addEntry("COMET_VIDEO","VIDEO_ID",b);d=a.originalError;d!=null&&(typeof d==="string"?f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d):d instanceof Error&&d.message!=null&&f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d.message));e.metadata=f;return e}function e(a,e){var f=m(null),g=f[0],h=f[1];f=m(null);var i=f[0],n=f[1];f=a.coreVideoPlayerMetaData.wrapVideoPixels_EXPERIMENTAL;var o=l(a),p=l(e),q=l(null),r=c("useStable")(function(){return p.current({checkInDOM:function(){var a=document.body,b=q.current;return a!=null&&b!=null&&a.contains(b)},handleFatalError:function(a){n(a)},initialProps:o.current,setExposedStateInReact:h})});e=g!=null?g:r.initialExposedState;g=(g=e.error)!=null?g:i;if(g!=null){i=a.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass;i&&i.flushQueuedLogs();throw y(g,o.current.coreVideoPlayerMetaData.videoFBID)}k(function(){r.handleReactEffectInit();return function(){r.handleReactEffectCleanup()}},[r]);k(function(){var a=d("RunComet").onBeforeUnload(function(){r.handleOnBeforeUnload()});return function(){a.remove()}},[r]);var s=l(null);k(function(){a!==s.current&&r.handleReactPropsChanged(a),s.current=a},void 0);i=c("useSEOLoggedOutWebCrawler")();g=a.coreVideoPlayerMetaData.renderVideoPixelsFit;g=g?g(e):null;i=i?j.jsx(c("VideoPlayerImplementationReactVideoElement.react"),{alt:a.coreVideoPlayerMetaData.alt,audioOnly:a.coreVideoPlayerMetaData.audioOnly,poster:a.coreVideoPlayerMetaData.poster,seoSrc:a.coreVideoPlayerMetaData.seoWebCrawlerLookasideUrl,seoWebCrawlerVideoTracks:a.coreVideoPlayerMetaData.seoWebCrawlerVideoTracks,videoElementCallbacks:null,videoElementHDRPatchEnabled_EXPERIMENTAL:a.coreVideoPlayerMetaData.videoElementHDRPatchEnabled_EXPERIMENTAL,videoElementPreloadDisabled:a.coreVideoPlayerMetaData.preloadForProgressiveDisabled,videoElementRefCallback:null,videoPixelsFit:g}):j.jsx(c("VideoPlayerImplementationReactVideoElement.react"),{alt:a.coreVideoPlayerMetaData.alt,audioOnly:a.coreVideoPlayerMetaData.audioOnly,isSpatial:a.coreVideoPlayerMetaData.isSpatial,poster:a.coreVideoPlayerMetaData.poster,videoElementCallbacks:r.videoElementCallbacks,videoElementHDRPatchEnabled_EXPERIMENTAL:a.coreVideoPlayerMetaData.videoElementHDRPatchEnabled_EXPERIMENTAL,videoElementPreloadDisabled:a.coreVideoPlayerMetaData.preloadForProgressiveDisabled,videoElementRefCallback:r.videoElementRefCallback,videoPixelsFit:g});var t=a.renderWithExposedState({implementationController:r.implementationController,implementationExposedState:e});f=j.jsxs(j.Fragment,{children:[c("gkx")("24349")?j.jsx("div",{ref:q,style:{display:"none"}}):null,e.isDRM===!0?b("cr:2336")?j.jsx(b("cr:2336"),{controller:r.implementationController}):b("cr:4596")?j.jsx(b("cr:4596"),{controller:r.implementationController}):null:null,f?f(i):i,b("cr:355")!=null&&e.playerVersion==="comet_nextgendash"?j.jsx(b("cr:355"),{}):null,j.jsx(c("VideoPlayerVideoPixelsFitContext").Provider,{value:g,children:t})]});return{engine:r,exposedState:e,reactVideoComponents:t,reactVideoFrame:i,reactVideoFrameAndComponents:f}}g.internal_createVideoPlayerImplementationControllerImpl=o;g.ensureVideoElementAPI=q;g.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=r;g.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=v;g.createVideoPlayerImplementationEngine=a;g.internal_makeExpandedErrorFromVideoPlayerError=y;g.useVideoPlayerImplementationEngine=e}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!==null&&a.indexOf(".m3u8")!==-1}function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;function d(){var a=b(),c="progressive_SD",d="progressive_HD";return a==null?null:h(a.hdSrc)||h(a.sdSrc)?null:a.hdSrc!=null&&a.playingSrc===a.hdSrc?d:a.sdSrc!=null&&a.playingSrc===a.sdSrc?c:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableAudioTracks)!=null?a:[]},getAvailableVideoQualities:function(){var a;return(a=(a=b())==null?void 0:a.availableQualities)!=null?a:[]},getAvailableVideoTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableVideoTracks)!=null?a:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){if(c("gkx")("440"))return d();else return null},getCurrentPlayingAudioTrackID:function(){var a;return(a=(a=b())==null?void 0:a.playingAudioTrackID)!=null?a:null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentPlayingVideoRepresentationID:function(){if(c("gkx")("440"))return d();else return"oep_hd"},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var a=b();return a==null?"progressive":h(a.hdSrc)||h(a.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:a,setUserSelectedVideoVariant:function(a){}}}g.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(a,b,c,d,e,f){"use strict";var g="hd",h="sd";function a(a){var b=[];a.sdSrc!=null&&b.push(h);a.hdSrc!=null&&b.push(g);var c=[],d=[],e=a.hdSrcPreferred&&a.hdSrc!=null?g:h;return babelHelpers["extends"]({},a,{availableAudioTracks:c,availableQualities:b,availableVideoTracks:d,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:e,targetQuality:e,targetSrc:null})}function b(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function c(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=b;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=c}),66);
__d("videoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";b=1<<31;var g=~b,h=b+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=b;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isCdnUrlExpired=a}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1607","cr:1680308","err","getErrorNameFromMediaErrorCode","getErrorSafe","gkx","promiseDone","unrecoverableViolation","videoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){var e=typeof a==="object"&&a!=null&&typeof a.name==="string"?a.name:null;return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",e].filter(Boolean).join("/"),a,b,c)}function a(a){var e=a.initialProps,f={current:null},g={current:null},l={current:null},m={current:null},n=e.loggingMetaData.instanceKey,o=function(){var a=u(),f=g.current;if(a==null||f==null)return;a.addEventListener("error",function(){var e=a.error,f=e==null?void 0:e.code,g=c("getErrorNameFromMediaErrorCode")(f);f=e==null?void 0:e.message;var i=f==null||f===""?"Unknown media error":f,j=[],k=f!=null?d("VideoPlayerImplementationErrors").getMoreGranularErrorNameFromHTMLVideoElementErrorMessage(f):null,l=a.src;!e&&a.poster!=null&&a.poster!==""&&(i+="(possible_poster_load_failure)");if(l!==""){var m=null;(h||(h=b("Promise"))).resolve().then(function(){return window.fetch(l)}).then(function(a){var b,c=a.status;b=(b=a.headers.get("Content-Type"))!=null?b:"unknown";i=i+". Fetched video content with Status:"+c+" Content-Type:"+b;m="URL_RESPONSE_HTTP_"+c;if(c<200||c>=300)return a.text().then(function(a){j.push(a.length.toString()),i+=" Body:%s:"+a.substr(0,200)+(a.length>200?"...":"")},function(){})})["catch"](function(a){typeof a==="object"&&a!=null&&typeof a.name==="string"&&typeof a.message==="string"?(m=m!=null?m:"URL_RESPONSE_FETCH_FAILED/"+a.name,i=i+". Failed fetching video content with error: "+a.name+" "+a.message):(m=m!=null?m:"URL_RESPONSE_FETCH_FAILED",i=i+". Failed fetching video content with unknown error")})["finally"](function(){var a=c("err").apply(void 0,[i].concat(j));a.name=[g,k,m].filter(Boolean).join("/");w(a,"progressive_implementation_error_with_more_info")})}else{f=c("err").apply(void 0,[i].concat(j));f.name=[g,k,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/");w(f,"progressive_implementation_error_with_empty_src")}});try{var i,j=f.graphQLVideoDRMInfo,k=f.videoFBID;i=j?(i=j.fairplayCert)!=null?i:null:null;if(b("cr:1680308")&&j&&i!=null&&k!=null){m.current=b("cr:1680308").newIfSupported(i,a,k,j.videoLicenseUriMap);if(m.current==null){i=c("err")("Fairplay not supported");w(i,"progressive_player_fairplay_handler_missing")}else m.current.addListener("error",function(a){a=c("err")(a.error);w(a,"progressive_player_fairplay_handler_error")})}var n=c("gkx")("18183")?d("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(y):y.current=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);l.current=f;k=t();v({inbandCaptionsAutogeneratedFromManifest:r.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:r.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:k==null?void 0:k.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:r.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:k==null?void 0:k.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:k==null?void 0:k.sideLoadCaptionsUrlFromProps});x.dispatch({payload:{selectedVideoQuality:r.getUserSelectedVideoQuality(),streamingFormat:r.getStreamType()},type:"implementation_engine_initialized"});j=function(){n.setPlayheadPosition(e.coreVideoPlayerMetaData.startTimestamp)};c("UserAgent").isBrowser("IE11")?c("promiseDone")(n.getDOMLoadedMetadataPromise().then(j)):j()}catch(a){w(a,"progressive_player_create_exception")}},p=function(a,b){if(b==null)return!0;else if(a.videoFBID!==b.videoFBID){var c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",c);return!1}else if(a.hdSrc!==b.hdSrc||a.sdSrc!==b.sdSrc){c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",c);return!1}else return!1},q=function(a){var b;b={audioOnly:a.coreVideoPlayerMetaData.audioOnly,graphQLVideoDRMInfo:(b=a.coreVideoPlayerMetaData.graphQLVideoDRMInfo)!=null?b:null,hdSrc:a.hdSrc===""?null:(b=a.hdSrc)!=null?b:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(b=a.sdSrc)!=null?b:null,videoFBID:a.coreVideoPlayerMetaData.videoFBID};if(!p(b,f.current))return!1;if(b.hdSrc==null&&b.sdSrc==null)throw c("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");f.current=b;g.current=d("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(b);o();return!0},r=d("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(c("gkx")("440")){var a,b=l.current;if(!b)return null;a=(a=y.current)==null?void 0:a.getUnderlyingVideoElement().currentSrc;return babelHelpers["extends"]({},b,{playingSrc:a!=null&&a!==""?a:null})}else return l.current},setUserSelectedVideoQuality:function(a){var b=l.current;if(!b)throw c("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var f=d("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(y);l.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(b,a);var g=l.current.targetSrc;if(g===null){c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",e.coreVideoPlayerMetaData.videoFBID).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(a));return}j(g,e.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler).then(function(a){var b;if(((b=l.current)==null?void 0:b.targetSrc)!==g)return;k(f.getUnderlyingVideoElement(),{crossOrigin:(b=e.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING)!=null?b:e.coreVideoPlayerMetaData.isSpherical===!0?"anonymous":null},a);a=(b=x.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?b:0;a>0&&f.setPlayheadPosition(a);x.getCurrentState().controlledState.playbackState==="playing"&&f.play();x.dispatch({payload:{},type:"representation_changed"})})["catch"](function(a){var b;if(((b=l.current)==null?void 0:b.targetSrc)!==g)return;b=c("getErrorSafe")(a);c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",e.coreVideoPlayerMetaData.videoFBID).catching(b).warn("Failed refreshing video URL with original error: %s",String(b))})}}),s=function(){m.current&&(m.current.destroy(),m.current=null)};a=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.loggerToVPL;return b("cr:1607")?b("cr:1607").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:r,getVideoElementAPI:c,loggerToVPL:a}):null},createVideoPlayerError:function(a,b){return i(a,b,(a=l.current)==null?void 0:a.targetSrc)},destroyEngineParts:function(){s()},engineCreateArgs:a,engineExtrasAPI:r,engineMetadata:{isAbrEnabled:!1,playerInstanceKey:n,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleVideoElementChanged:function(a){a!=null&&o()},handleVideoInfoChange:q});n=a.debugLog;q=a.engine;var t=a.getCaptionsInfo,u=a.getVideoElement,v=a.handleCaptionsInfoChange,w=a.handleFatalImplementationError,x=a.machine,y=a.videoElementAPIRef;return q}function j(a,e){if(e&&d("videoUrlUtils").isCdnUrlExpired(a))return e(a).then(function(a){var d;return(d=a.refreshedUrl)!=null?d:(h||(h=b("Promise"))).reject(c("err")("Failed refreshing URL"+(a.reason!==null?" with reason: "+a.reason:"")))});else return(h||(h=b("Promise"))).resolve(a)}function k(a,b,c){b=b.crossOrigin;if(c==null||c==="")a.removeAttribute("src");else{var d=a.playbackRate;a.setAttribute("src",c);var e=null;if(b!=null){try{e=new URL(c).origin}catch(a){}if(e!=null&&location.origin!==e)switch(b){case"anonymous":case"use-credentials":a.setAttribute("crossOrigin",b);break;default:a.removeAttribute("crossOrigin");break}}a.playbackRate=d}}g.createVideoPlayerProgressiveImplementationEngine=a;g.internal_setHTMLVideoElementSrc=k}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("usePolarisLOXDashPrefetch",["CometRelay","fetchPolarisLoggedOutExperiment","gkx","polarisGetAppPlatform","promiseDone","react","react-compiler-runtime","shouldUseOzAddonFeatures"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=d("CometRelay").useRelayEnvironment(),e;a[0]!==b?(e=function(){!d("polarisGetAppPlatform").isIOS()&&c("gkx")("15065")&&c("promiseDone")(c("fetchPolarisLoggedOutExperiment")(b,{name:"ig_mweb_lox_dash_prefetch_launch"}));return d("shouldUseOzAddonFeatures").shouldIGWebLOXPrefetchDash()},a[0]=b,a[1]=e):e=a[1];return e}g.usePolarisLOXDashPrefetch=a}),98);
__d("usePolarisVideoImplementations",["PolarisIsLoggedIn","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","cr:21166","cr:21289","cr:21369","cr:9446","cr:9447","err","gkx","usePolarisLOXDashPrefetch"],(function(a,b,c,d,e,f,g){"use strict";var h=(f=(e=b("cr:21166"))!=null?e:b("cr:21289"))!=null?f:b("cr:21369");function a(a){var e=a.dashInfo,f=a.hdSrc,g=a.isAd,j=a.isLive;a=a.sdSrc;var k=[],l=d("usePolarisLOXDashPrefetch").usePolarisLOXDashPrefetch();g=(e=h==null?void 0:h({dashInfo:e,isAd:g,isLive:j}))!=null?e:[];e=g[0];g=g[1];if(e!=null){l();if(b("cr:9446")!=null&&b("cr:9447")!=null&&j!==!0&&e.typename==="VideoPlayerOzImplementation"){l=b("cr:9446").makeNextgendashEngineData({canUseOz:!0,dashManifestUrl:e.data.manifestUrl,dashManifestUrlOverride_DO_NOT_USE:null,dashManifestXmlString:e.data.manifest,experimentationConfig:e.data.experimentationConfig,initialAudioUserPreferredLanguage:e.data.initialAudioUserPreferredLanguage,minQualityPreference:null,nextgendashAvailability:"AVAILABLE"});!(l instanceof Error)?k.push({Component:b("cr:9447"),data:l,typename:"VideoPlayerNextgendashImplementation"}):k.push(e)}else k.push(e)}j=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:f,hdSrcPreferred:d("PolarisIsLoggedIn").isLoggedIn()?c("gkx")("5688"):!0,sdSrc:a});j instanceof Error||k.push({Component:c("VideoPlayerProgressiveImplementationV2.react"),data:j,typename:"VideoPlayerProgressiveImplementation"});k.length===0&&i(g);return k}function i(a){var b;a!=null?(b=c("err")("Cannot play video: "+a.message+" and no progressive URL is available"),a.name&&(b.name=a.name)):(b=c("err")("Cannot play video: No progressive URL is available"),b.name="VideoImplementationsNoProgressiveURL");b.project="comet_video_player";throw b}g["default"]=a}),98);
__d("PolarisVideo.react",["CometVideoPlayerLoggingConfigForPolaris","IGNavChain","PolarisContainerModuleUtils","PolarisRoutePropUtils","PolarisVideoHelpers","VideoPlayerErrorBoundary.react","VideoPlayerSurface.react","VideoPlayerX.react","computeAspectRatio","defaultErrorBoundaryFallback","react","react-compiler-runtime","usePolarisAnalyticsContext","usePolarisGetDashInfo","usePolarisVideoImplementations","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function k(a){var b=d("react-compiler-runtime").c(42),e=a.adInfo,f=a.alt,g=a.autoplay,h=a.canAutoplay,k=a.children,m=a.dashInfo,n=a.hdSrc,o=a.isAd,p=a.isLive,q=a.loopCount,r=a.mediaId,s=a.originalHeight,t=a.originalWidth,u=a.ownerId,v=a.poster,w=a.renderVideoPixelsFit,x=a.sdSrc,y=a.seoWebCrawlerLookasideUrl;a=a.trackingToken;m=c("usePolarisGetDashInfo")(m);var z;b[0]!==m||b[1]!==n||b[2]!==o||b[3]!==p||b[4]!==x?(z={dashInfo:m,hdSrc:n,isAd:o,isLive:p,sdSrc:x},b[0]=m,b[1]=n,b[2]=o,b[3]=p,b[4]=x,b[5]=z):z=b[5];m=c("usePolarisVideoImplementations")(z);b[6]!==g||b[7]!==h?(n=d("PolarisVideoHelpers").getVideoPlayerAutoplayProps(g,h),b[6]=g,b[7]=h,b[8]=n):n=b[8];o=n;b[9]!==s||b[10]!==t?(x=c("computeAspectRatio")(t,s),b[9]=s,b[10]=t,b[11]=x):x=b[11];z=x;g=c("usePolarisAnalyticsContext")();h=c("useStable")(l);n=j(d("PolarisRoutePropUtils").PolarisRoutePropContext);b[12]!==(n==null?void 0:n.routePropQE)?(s=n==null?void 0:n.routePropQE.getBool("is_ssr_enabled"),b[12]=n==null?void 0:n.routePropQE,b[13]=s):s=b[13];t=s;x=n==null?void 0:n.routeProp.getString("general_uuid");b[14]!==p?(s=d("CometVideoPlayerLoggingConfigForPolaris").createCometVideoPlayerLoggingConfigForPolaris(p),b[14]=p,b[15]=s):s=b[15];b[16]!==g?(n=d("PolarisContainerModuleUtils").getContainerModule(g),b[16]=g,b[17]=n):n=b[17];g=(g=e==null?void 0:e.tracking_token)!=null?g:a;a=e?"paid":"organic";b[18]!==h||b[19]!==u||b[20]!==n||b[21]!==g||b[22]!==a?(e={author_id:u,current_watching_module:n,nav_chain:h,tracking_token:g,tracking_type:a},b[18]=h,b[19]=u,b[20]=n,b[21]=g,b[22]=a,b[23]=e):e=b[23];h=t&&x!=null?r+x:void 0;b[24]!==k?(u=k!=null?k:i.jsx(c("VideoPlayerSurface.react"),{}),b[24]=k,b[25]=u):u=b[25];b[26]!==f||b[27]!==o||b[28]!==m||b[29]!==p||b[30]!==t||b[31]!==q||b[32]!==r||b[33]!==v||b[34]!==w||b[35]!==y||b[36]!==h||b[37]!==u||b[38]!==s||b[39]!==e||b[40]!==z?(n=i.jsx(c("VideoPlayerX.react"),babelHelpers["extends"]({alt:f,bypassUseCometSizeError:t,disableLoadingIndicator:!0,doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn:!0,implementations:m,isLiveStreaming:p,loggingConfig:s,loggingToSNAPLAdditionalData:e,loopCount:q,portalingEnabled:!1,poster:v,preloadForProgressiveDisabled:!0,renderVideoPixelsFit:w,seoWebCrawlerLookasideUrl:y,subOrigin:"inline",videoFBID:r,videoPixelsAspectRatio:z,videoPlayerUniqueIDOverride:h},o,{children:u})),b[26]=f,b[27]=o,b[28]=m,b[29]=p,b[30]=t,b[31]=q,b[32]=r,b[33]=v,b[34]=w,b[35]=y,b[36]=h,b[37]=u,b[38]=s,b[39]=e,b[40]=z,b[41]=n):n=b[41];return n}function l(){var a;return(a=c("IGNavChain").getInstance())==null?void 0:a.getNavChainForSend()}function a(a){return i.jsx(c("VideoPlayerErrorBoundary.react"),{description:"PolarisVideoX",fallback:c("defaultErrorBoundaryFallback"),children:i.jsx(k,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoHomeTypedLiteLogger",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:VideoHomeLoggerConfig")}),null);
__d("VideoPlayerLiveRewindControlContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({cachedLiveRewindTimestamp:null,onLiveRewindControlEvent:function(){}});g["default"]=b}),98);
__d("VideoPlayerPlaybackControlBase.react",["fbt","ix","VideoPlayerControlIcon.react","fbicon","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=a.onPress,e=a.playbackIcon,f=a.showTooltip;f=f===void 0?!0:f;a=a.useOutlineIcons;var g,j;switch(e){case"pause":g=h._(/*BTDS*/"Pause");j=a===!0?d("fbicon")._(i("497677"),20):d("fbicon")._(i("497675"),20);break;case"replay":g=h._(/*BTDS*/"Replay");j=a===!0?d("fbicon")._(i("534222"),20):d("fbicon")._(i("534219"),20);break;case"play":g=h._(/*BTDS*/"Play");j=a===!0?d("fbicon")._(i("484866"),20):d("fbicon")._(i("484863"),20);break;default:e;throw c("unrecoverableViolation")("The playback icon is unsupported "+e,"comet_video_player")}return k.jsx(c("VideoPlayerControlIcon.react"),{icon:j,label:g,onPress:b,tooltip:f?g:null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useFeedClickEventHandler",["react","useStoryClickEventLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a,b){var d=c("useStoryClickEventLogger")();return i(function(c){a&&a(c);var e=c.type;if(e==="click"||e==="contextmenu"||e==="mousedown"&&typeof c.button==="number"&&(c.button===1||c.button===2)||e==="keydown"&&(c.key==="Enter"||c.key===" ")){e=typeof c.button==="number"?c.button:0;d(c.timeStamp,e,b)}},[a,d,b])}g["default"]=a}),98);
__d("useMinifiedProductAttribution",["CometProductAttribution","useRouteProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useRouteProductAttribution")();return a!=null?d("CometProductAttribution").minifyProductAttributionV2(a):null}g["default"]=a}),98);
__d("VideoPlayerPlaybackControl.react",["CometTrackingNodeProvider.react","VideoHomeTypedLiteLogger","VideoPlayerHooks","VideoPlayerPlaybackControlBase.react","react","useFeedClickEventHandler","useMinifiedProductAttribution","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useEffect;function a(a){var b=a.isNPC,e=b===void 0?!1:b;b=a.showTooltip;b=b===void 0?!0:b;var f=a.unmuteOnPlay,g=f===void 0?!1:f;f=a.useOutlineIcons;k(function(){e&&c("VideoHomeTypedLiteLogger").log({event:"npc_control_playback_button_impression"})},[e]);a=c("useVideoPlayerControllerSubscription")(function(a,b){var c=a.getCurrentState(),d=c.ended,e=c.paused,f=c.playing,g=c.stalling;a=a.getPlayheadPosition();c=c.duration;e=!e&&(f||g);g=!f&&d&&a>=c;return b!=null&&b.showPauseButton===e&&b.showReplayButton===g?b:{showPauseButton:e,showReplayButton:g}});var h=a.showPauseButton;a=a.showReplayButton;var l=(i||(i=d("VideoPlayerHooks"))).useController(),m=c("useMinifiedProductAttribution")(),n=c("useFeedClickEventHandler")(function(){e&&c("VideoHomeTypedLiteLogger").log({attribution_id_v2:m,click_point:"npc_control_playback_button",event:"click",event_target:"video"}),h?l.pause("user_initiated"):(g&&l.setMuted(!1,"user_initiated"),l.play("user_initiated"))});a=h?"pause":a?"replay":"play";return j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:592,children:j.jsx(c("VideoPlayerPlaybackControlBase.react"),{onPress:n,playbackIcon:a,showTooltip:b,useOutlineIcons:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getFormattedTimestamp",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b="";a=a;isNaN(a)?a=0:a<0&&(a*=-1,b="-");var c=Math.floor(a/d("DateConsts").SEC_PER_HOUR),e=Math.floor((a-c*d("DateConsts").SEC_PER_HOUR)/d("DateConsts").SEC_PER_MIN);a=Math.round(a-c*d("DateConsts").SEC_PER_HOUR-e*d("DateConsts").SEC_PER_MIN);a===d("DateConsts").SEC_PER_MIN&&(a=0,e++);e===d("DateConsts").MIN_PER_HOUR&&(e=0,c++);a=("0"+a).slice(-2);if(c===0)return""+b+e+":"+a;else{e=("0"+e).slice(-2);return""+b+c+":"+e+":"+a}}g["default"]=a}),98);
__d("VideoPlayerPlaybackTimerBase.react",["getFormattedTimestamp","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.currentTime;a=a.duration;return i.jsxs("div",{className:"x14ctfv x1rg5ohu x1pg5gke xss6m8b x7h9g57 xf6vk7d xpcyujq x9hgts1 x2b8uid x27saw0 x3ajldb",children:[i.jsx("span",{className:"x1s688f x15hfatp",children:c("getFormattedTimestamp")(b)}),a!=null&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:" / "}),i.jsx("span",{children:c("getFormattedTimestamp")(a)})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useLiveRewindUtils",["VideoPlayerHooks","VideoPlayerLiveRewindControlContext","react","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=j.useCallback,l=j.useContext,m=10,n=10;function a(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){var c=a.getCurrentState().seekableRanges;c=c!=null?(c=c.end(c.length()-1))!=null?c:0:0;var d=Math.min(a.getPlayheadPosition()+m,c);d===c?(a.setIsLiveRewindActive(!1),a.seek(c)):a.seek(d);b.onLiveRewindControlEvent()},[b,a])}function b(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){var c=a.getCurrentState().seekableRanges;c=(c=c==null?void 0:c.start(0))!=null?c:0;c=Math.max(a.getPlayheadPosition()-n,c);a.seek(c);a.setIsLiveRewindActive(!0);b.onLiveRewindControlEvent()},[b,a])}function e(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){var c=a.getCurrentState().seekableRanges;c=c!=null?(c=c.end(c.length()-1))!=null?c:0:0;a.seek(c);a.play("user_initiated");a.setIsLiveRewindActive(!1);b.onLiveRewindControlEvent()},[b,a])}function f(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){var c=a.getCurrentState().seekableRanges;c=(c=c==null?void 0:c.start(0))!=null?c:0;a.seek(c);a.setIsLiveRewindActive(!0);b.onLiveRewindControlEvent()},[b,a])}function o(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){a.play("user_initiated"),b.onLiveRewindControlEvent()},[b,a])}function p(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){a.pause("user_initiated"),a.setIsLiveRewindActive(!0),b.onLiveRewindControlEvent()},[b,a])}function q(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(){var c=a.getCurrentState().seekableRanges;c=(c=c==null?void 0:c.start(0))!=null?c:0;a.seek(c);a.setIsLiveRewindActive(!0);a.play("user_initiated");b.onLiveRewindControlEvent()},[b,a])}function r(){var a=(i||(i=d("VideoPlayerHooks"))).useController(),b=l(c("VideoPlayerLiveRewindControlContext"));return k(function(c){var d,e=a.getCurrentState().seekableRanges;d=(d=e==null?void 0:e.start(0))!=null?d:0;e=e!=null?(e=e.end(e.length()-1))!=null?e:0:0;d=Math.min(d+c,e);a.scrubEnd(d);d===e?a.setIsLiveRewindActive(!1):a.setIsLiveRewindActive(!0);b.onLiveRewindControlEvent()},[b,a])}function s(){return c("useVideoPlayerControllerSubscription")(function(a){return(a=(a=a.getCurrentState().seekableRanges)==null?void 0:a.start(0))!=null?a:0})}g.useLiveRewindForward=a;g.useLiveRewindBack=b;g.useLiveRewindLive=e;g.useLiveRewindStart=f;g.useLiveRewindPlay=o;g.useLiveRewindPause=p;g.useLiveRewindReplay=q;g.useLiveRewindScrub=r;g.useLiveRewindSeekableStartTime=s}),98);
__d("VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","VideoPlayerPlaybackTimerBase.react","react","useLiveRewindUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");b=a;var k=function(a,b){return a-b.duration};function l(){var a=d("useLiveRewindUtils").useLiveRewindSeekableStartTime(),b=(i||(i=d("VideoPlayerHooks"))).useCurrentTimeThrottled(200),e=i.useCurrentTimeThrottled(1e3,k),f=i.useIsLiveRewindActive();f=f?e:b-a;return j.jsx(c("VideoPlayerPlaybackTimerBase.react"),{currentTime:f,duration:null})}l.displayName=l.name+" [from "+f.id+"]";function m(){var a=(i||(i=d("VideoPlayerHooks"))).useDuration(),b=i.useCurrentTimeThrottled(200);return j.jsx(c("VideoPlayerPlaybackTimerBase.react"),{currentTime:b,duration:a})}m.displayName=m.name+" [from "+f.id+"]";function a(){var a=(i||(i=d("VideoPlayerHooks"))).useIsLive();if(a)return j.jsx(l,{});else return j.jsx(m,{})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WebBloksAbstractButton",["WebBloksComponentContext","WebBloksStyle","react"],(function(a,b,c,d,e,f,g){"use strict";var h=["accessibility_label","badge_count","className","icon","role","tabIndex","title","trailing"],i,j=i||d("react");function a(a){var b=a.accessibility_label,c=a.badge_count,e=a.className,f=a.icon,g=a.role;g=g===void 0?"button":g;var i=a.tabIndex;i=i===void 0?0:i;var l=a.title,m=a.trailing;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var n=d("WebBloksComponentContext").useWebBloksContext();n=n.objectSet;if(f==null&&l==null)return null;var o=k.abstractButton,p=l==null;b=(l=l!=null?l:b)!=null?l:"";l=null;if(f!=null){n=n.environment;var q=n.AssetRenderer;n=n.logger;if(!q)n.mustfix("Trying to render an asset, but AssetRenderer is not defined for %s",JSON.stringify(f));else{n={};b&&(n.alt="",p||(n.className=k.marginRight4));l=j.jsx(q,babelHelpers["extends"]({src:f},n))}}return j.jsxs(j.Fragment,{children:[j.jsxs("div",babelHelpers["extends"]({role:g,tabIndex:i},a,{className:d("WebBloksStyle").classNames(m===!0?k.TrailingButton:"",o,e),children:[l,p?j.jsx("span",{className:k.abstractButton+"_accessible_elem",children:b}):b]})),c!=null&&c>0?c:void 0]})}a.displayName=a.name+" [from "+f.id+"]";var k=d("WebBloksStyle").createStyles({TrailingButton:{backgroundColor:"transparent",border:"none",color:"rgb(23, 99, 207)"},marginRight4:{marginRight:4},abstractButton:function(a){var b;return b={},b[a]={cursor:"pointer",display:"inline-block",textDecoration:"none",whiteSpace:"nowrap",padding:"1px 6px"},b[".gecko "+a+":focus"]={outline:"1px dotted #3b5998",outlineColor:"invert"},b[a+":hover"]={textDecoration:"none"},b[a+" + "+a]={marginLeft:4},b[a+"_accessible_elem"]={clip:"rect(1px, 1px, 1px, 1px)",height:1,overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:1},b}});g["default"]=a}),98);
__d("WebBloksCDSGlimmer",["WebBloksStyle","WebBloksTheme","WebBloksUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k=200;function a(a){var b,c;a=a.node;var e=d("WebBloksTheme").useTheme().getTheme(),f=a.get("index"),g=a.get("color");g=g!=null?d("WebBloksUtils").getRGBColorWithTheme(g,e):void 0;b=(b=a.get("shape"))!=null?b:"rectangle";b=b==="circle"?"50%":d("WebBloksUtils").toPx(a.get("corner_radius"));var h=a.get("dark_opacity"),m=(c=h==null?void 0:h.get("min"))!=null?c:.05,n=(c=h==null?void 0:h.get("max"))!=null?c:.15;h=a.get("light_opacity");var o=(c=h==null?void 0:h.get("min"))!=null?c:.3,p=(c=h==null?void 0:h.get("max"))!=null?c:.5;h=j(function(){return{darkFade:d("WebBloksStyle").keyframes({"0%":{opacity:m},"100%":{opacity:n}}),lightFade:d("WebBloksStyle").keyframes({"0%":{opacity:o},"100%":{opacity:p}})}},[n,p,m,o]);c=h.darkFade;h=h.lightFade;h=e===d("WebBloksTheme").THEME.light?h:c;c=e===d("WebBloksTheme").THEME.light?o:m;return i.jsx("div",{"data-bloks-name":a.styleId,className:l.root,style:{animationDelay:f%10*k+"ms",animationName:h,backgroundColor:g,borderRadius:b,opacity:c}})}a.displayName=a.name+" [from "+f.id+"]";var l=d("WebBloksStyle").createStyles({root:{animationDirection:"alternate",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(0.5, 0.0, 0.5, 1.0)",height:"100%",width:"100%",pointerEvents:"initial"}});g["default"]=a}),98);
__d("WebBloksText",["WebBloksBooleanUtils","WebBloksComponentContext","WebBloksStyle","WebBloksTextStyle","WebBloksTheme","WebBloksUtils","react","useClickablePropsForWebBloks"],(function(a,b,c,d,e,f,g){var h,i=h||(h=d("react"));b=h;var j=b.useLayoutEffect,k=b.useRef,l=1e3/60;function m(a,b,c){var e=k({innerText:""});j(function(){a.current!=null&&a.current.innerText!=null&&(e.current.innerText=a.current.innerText)},[c]);j(function(){var c=a.current;if(c==null||b==null||ResizeObserver==null)return;var f=d("WebBloksUtils").throttle(function(){c.style.whiteSpace="nowrap";c.scrollWidth<=c.clientWidth&&(c.innerText=e.current.innerText);var a=!1;while(c.scrollWidth>c.clientWidth&&c.innerText!=null)c.innerText=""+c.innerText.slice(0,-1+(a?-1*b.length:0))+b,a=!0},l);f();var g=new ResizeObserver(function(){f()});g.observe(c);return function(){g&&g.unobserve(c)}},[b,c])}function a(a){var b=a.node;a=a.externalStyle;var e=b.getExpression("on_click"),f=b.get("text"),g=b.get("text_align"),h=b.get("text_size"),j=b.get("text_style"),k=b.getSubNode("text_themed_color"),l=b.get("text_color"),n=b.get("font_family"),o=b.get("strikethrough"),p=b.getSubNode("text_provider"),q=b.get("truncation_string"),r=b.get("line_height"),s=b.get("line_height_multiplier"),t=b.get("max_number_of_lines");a=d("WebBloksStyle").useStyle(b,a,e!=null);var u=a.ref,v=a.style,w=a.wrapper;a=a.wrapperProps;var x=d("WebBloksTheme").useTheme().getTheme();l=l!=null&&d("WebBloksUtils").convertRGBArrToString(d("WebBloksUtils").convertRGBOrHexStringToArr(l))||k&&d("WebBloksUtils").getRGBColorWithTheme(k,x);k=c("useClickablePropsForWebBloks")(b,e);x=d("WebBloksComponentContext").useWebBloksContext();b=x.renderNode;e=x.bloksContext;x=e.objectSet.environment.fontFamilyMappings;e=p!=null?b(p):f==null?f:f===" "?i.jsx(i.Fragment,{children:"\xa0"}):f;m(u,q,e);b=d("WebBloksUtils").toPx(r);p=b!=null?b:d("WebBloksTextStyle").getLineHeight(s);return w(i.jsx("span",babelHelpers["extends"]({},a,{style:babelHelpers["extends"]({},v,d("WebBloksTextStyle").getLineClampStyle(t),d("WebBloksTextStyle").getTextStyle(j),d("WebBloksTextStyle").getVerticalSpacingStyles(p),{lineHeight:p,fontSize:d("WebBloksUtils").toPx(h),fontFamily:d("WebBloksTextStyle").getFontFamily(n,x),textAlign:d("WebBloksUtils").toHyphen(g),textDecoration:d("WebBloksBooleanUtils").isTrue(o)?"line-through":"",color:l,whiteSpace:"pre-wrap",overflowWrap:"break-word",padding:"unset",maxWidth:"100%"})},k,{children:e})))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XLogoutControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/logout.php",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("maybeSendMessageToIGVR",["InstagramUserAgent","SecurePostMessage"],(function(a,b,c,d,e,f,g){"use strict";var h="https://www.instagram.com";function a(a){c("InstagramUserAgent").is_igvr&&d("SecurePostMessage").sendMessageToSpecificOrigin(window,JSON.stringify(a),h)}g["default"]=a}),98);
__d("polarisGetUserFromUserInfo",["normalizr"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("normalizr").schema.Entity)("userInfo",{},{idAttribute:function(a){return String(a.pk)},processStrategy:function(a){var b;b=(b=a.mutual_followers_count)!=null?b:0;var c={additional_count:0,usernames:[]};if(b>0){var d;c.usernames=(d=(d=a.profile_context_links_with_user_ids)==null?void 0:d.map(function(a){return a.username}).filter(Boolean))!=null?d:[];c.additional_count=b-c.usernames.length}return{aiAgentOwnerUsername:a.ai_agent_owner_username,aiAgentType:a.ai_agent_type,bio:a.biography,counts:{followedBy:a.follower_count,follows:a.following_count,media:a.media_count},fullName:a.full_name,id:String(a.pk),interopMessagingUserFbid:a.interop_messaging_user_fbid!=null&&a.interop_messaging_user_fbid!==""?String(a.interop_messaging_user_fbid):void 0,isPrivate:a.is_private,isUnpublished:a.is_unpublished,isUserInCanada:a.is_in_canada,isVerified:a.is_verified,mutualFollowers:c,profilePictureUrl:a.profile_pic_url,shouldRemoveMessageButtonRiskyInteraction:a.remove_message_entrypoint,showAccountTransparencyDetails:a.show_account_transparency_details,transparencyLabel:(d=a.transparency_label)!=null?d:void 0,transparencyProduct:(b=a.transparency_product)!=null?b:void 0,username:a.username,website:a.external_url,websiteLinkshimmed:a.external_lynx_url}}});function a(a){return d("normalizr").normalize(a,h).entities.userInfo}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{return c(a)}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,d,e,f){e===void 0&&(e=function(){});f===void 0&&(f=function(){});var g=b.getOperationLogger(d).start();e(g);a.then(function(a){f(g),g.log()},function(a){f(g),g.setError(a),g.log()})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,d+" logger")})}g.executeOperationAndLog=a;g.monitorPromiseAndLogOperation=b}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$52=new Map(),this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setPerSessionSampleRate=function(a){this.$3=a;return this};b.setAppendTarget=function(a){this.$47=a;return this};b.setOneObserved=function(a){this.$44=a;return this};b.setOneReqWave=function(a){this.$45=a;return this};b.setOneResWave=function(a){this.$46=a;return this};b.setIsP2pPlayback=function(a){this.$43=a;return this};b.setResult=function(a){this.$4=a;return this};b.setType=function(a){this.$5=a;return this};b.setClientTimeBegin=function(a){this.$6=a;return this};b.setClientTimeDuration=function(a){this.$7=a;return this};b.setClientTimeEnd=function(a){this.$8=a;return this};b.setSegmentCount=function(a){this.$15=a;return this};b.setTimeToFirstByte=function(a){this.$9=a;return this};b.setTimeToLastByte=function(a){this.$10=a;return this};b.setTimeToRequestStart=function(a){this.$11=a;return this};b.setTimeToRequestSent=function(a){this.$12=a;return this};b.setReason=function(a){this.$13=a;return this};b.setResource=function(a){this.$14=a;return this};b.setSegmentStartTime=function(a){this.$16=a;return this};b.setSegmentEndTime=function(a){this.$17=a;return this};b.setLength=function(a){this.$18=a;return this};b.setLiveheadPosition=function(a){this.$19=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$20=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$21=a;return this};b.setManifestType=function(a){this.$22=a;return this};b.setMediaSourceNewDuration=function(a){this.$23=a;return this};b.setMediaSourcePreviousDuration=function(a){this.$24=a;return this};b.setPriorityFloat=function(a){this.$25=a;return this};b.setAppendedBufferMs=function(a){this.$26=a;return this};b.setInitiator=function(a){this.$27=a;return this};b.setPreloadTime=function(a){this.$28=a;return this};b.setConcluder=function(a){this.$29=a;return this};b.setPreviousRepresentationID=function(a){this.$30=a;return this};b.setRepresentationID=function(a){this.$31=a;return this};b.setStreamSwitchReason=function(a){this.$32=a;return this};b.setState=function(a){this.$33=a;return this};b.setContentLengthHeader=function(a){this.$34=a;return this};b.setOriginHitHeader=function(a){this.$36=a;return this};b.setEdgeHitHeader=function(a){this.$37=a;return this};b.setFNAHitHeader=function(a){this.$38=a;return this};b.setCode=function(a){this.$35=a;return this};b.setResponseTimeMsHeader=function(a){this.$39=a;return this};b.setIsTemplatedManifest=function(a){this.$40=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$41=a;return this};b.setPlayerFormat=function(a){this.$42=a;return this};b.setIsRingBufferSample=function(a){this.$48=a;return this};b.setIsOnline=function(a){this.$49=a;return this};b.setProxyStatusHeader=function(a){this.$50=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setPreferredEdgeLatency=function(a){this.$51=a;return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.setIsMixedCodecManifest=function(a){this.$53=a;return this};b.getPerSessionSampleRate=function(){return this.$3};b.setMediaSourceSourceBuffer=function(a,b){this.$52.set(a,b);return this};b.unsetMediaSourceSourceBuffers=function(){this.$52.clear();return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$4};b.getType=function(){return this.$5};b.getClientTimeBegin=function(){return this.$6};b.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8};b.getTimeToRequestStart=function(){return this.$11};b.getTimeToRequestSent=function(){return this.$12};b.getReason=function(){return this.$13};b.getResource=function(){return this.$14};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$16};b.getSegmentEndTime=function(){return this.$17};b.getLength=function(){return this.$18};b.getLiveheadPosition=function(){return this.$19};b.getManifestType=function(){return this.$22};b.getIsMixedCodecManifest=function(){return this.$53};b.getPriorityFloat=function(){return this.$25};b.getAppendedBufferMs=function(){return this.$26};b.getInitiator=function(){return this.$27};b.getPreloadTime=function(){return this.$28};b.getConcluder=function(){return this.$29};b.getContentLengthHeader=function(){return this.$34};b.getOriginHitHeader=function(){return this.$36};b.getEdgeHitHeader=function(){return this.$37};b.getFNAHitHeader=function(){return this.$38};b.getCode=function(){return this.$35};b.getResponseTimeMsHeader=function(){return this.$39};b.getIsTemplatedManifest=function(){return this.$40};b.getOneObserved=function(){return this.$44};b.getOneReqWave=function(){return this.$45};b.getOneResWave=function(){return this.$46};b.getAppendTarget=function(){return this.$47};b.getIsRingBufferSample=function(){return this.$48};b.getIsOnline=function(){return this.$49};b.getProxyStatusHeader=function(){return this.$50};b.getMediaSourceSourceBuffers=function(){return this.$52};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter$p_1=!1;d.$OzErrorEmitter$p_2=!1;d.$OzErrorEmitter$p_3=[];d.emitError=function(a){!d.$OzErrorEmitter$p_1?d.$OzErrorEmitter$p_2?d.$OzErrorEmitter$p_3.push(a):d.$OzErrorEmitter$p_1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter$p_2=b;return d}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter$p_1=!0;a=this.addListener("error",a);this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=[];this.$12=[];this.$22=function(a,b){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed"),b!=null&&a.setReason(b)};this.$19=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();b=b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,f.$3,"drm_create_media_keys",function(){},f.$22);return b};this.$20=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var g=a.getServerCertificate();return g?e.setServerCertificate(g).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$22);return a};this.$21=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$23(b,e,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$23(b,e,{initData:a.data,initDataType:a.type})});a=c("oz-player/shims/OzMaybeNativePromise").all(a);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_request_license",function(){},f.$22);return a};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$13=function(a){this.$7.emitError(a)};b.$14=function(a){var b;b=(b=(b=this.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;this.$10<b?this.$15():this.$13(a)};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$16=function(a){if(!a)return null;var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(b){var a=b;this.$13(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b){var c=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;var e=new Map();this.$17(b,e,"audio");this.$17(a,e,"video");var f;e.forEach(function(a,b){!f?f=c.$18(b,a):f=f["catch"](function(){return c.$18(b,a)})});if(!f){this.$9=!1;return}this.$9=!0;var g=this.$3.getOperationLogger("drm_setup").start();f.then(this.$19).then(this.$20).then(this.$21).then(function(){return g.log()},function(a){a=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keyPromiseChain rejection"});c.$13(a);g.setResult("failed").setError(a).log()})};b.$17=function(a,b,c){var d=this;a.forEach(function(a){var e=d.$16(a.getContentProtectionXml()),f=a.getMimeCodecs();e!=null&&e.forEach(function(a){a=a.provider;var d=a.getKeySystem(),e=b.get(d);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},b.set(d,e));c==="audio"&&!e.audioCapabilities.has(f)&&e.audioCapabilities.set(f,{contentType:f,robustness:a.getAudioRobustness()});c==="video"&&!e.videoCapabilities.has(f)&&e.videoCapabilities.set(f,{contentType:f,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$18=function(a,b){var e=this,f={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};b=window.navigator.requestMediaKeySystemAccess(a,[f]);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$3,"drm_request_media_key_system_access",function(){},function(b){var d=null;b instanceof c("oz-player/loggings/OzOperationLoggerBase")&&b.getError()&&(d="keySystem: "+a+";domConfig: "+JSON.stringify(f));return e.$22(b,d)});return b};b.$23=function(a,b,e){var f=this,g=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"message",function(a){f.$24(g,b,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"keystatuseschange",function(a){f.$25(g)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})}));return g.generateRequest(e.initDataType,e.initData)};b.$24=function(a,b,c){var e=this;c=b.getLicenseRequestInfo(c.message.slice(0));var f=this.$3.getOperationLogger("drm_fetch_license").setResource(c.url).start();return window.fetch(c.url,c).then(function(c){c.ok?f.setResult("success").setCode(c.status).log():f.setResult("failed").setCode(c.status).setError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+c.status+")",extra:{code:c.status.toString()}})).log();return c.arrayBuffer().then(function(f){var g=new Uint8Array(f);g=b.parseLicenseResponse(g);if(g==null||g.byteLength===0){var h=g==null?"License is null or undefined.":"License is 0 bytes.";!c.ok?h+=" HTTP status not OK ("+c.status+")":f.byteLength===0&&(h+=" HTTP status OK ("+c.status+"), but response body is 0 bytes");f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem()+" - "+h,extra:{code:c.status.toString(),headers:c.headers,url:c.url}});h=(h=(h=e.$1)==null?void 0:h.throwNoLicenseError)!=null?h:!1;if(h)throw f;else e.$13(f)}else a.update(g)})})};b.$25=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzPerfLoggerProviderBase",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.cloneContext=function(){var a=this.createLoggerProvider();this.$11(a);return a};b.setType=function(a){this.$1=a;return this};b.setInitiator=function(a){this.$2=a;return this};b.setResource=function(a){this.$4=a;return this};b.setRepresentationID=function(a){this.$3=a;return this};b.setSegmentStartTime=function(a){this.$5=a;return this};b.setSegmentEndTime=function(a){this.$6=a;return this};b.setStreamSwitchReason=function(a){this.$7=a;return this};b.setIsP2pPlayback=function(a){this.$8=a;return this};b.setIsRingBufferSample=function(a){this.$9=a;return this};b.setPerSessionSampleRate=function(a){this.$10=a;return this};b.getType=function(){return this.$1};b.getInitiator=function(){return this.$2};b.getRepresentationID=function(){return this.$3};b.getStreamSwitchReason=function(){return this.$7};b.getResource=function(){return this.$4};b.getSegmentStartTime=function(){return this.$5};b.getSegmentEndTime=function(){return this.$6};b.getIsP2pPlayback=function(){return this.$8};b.getIsRingBufferSample=function(){return this.$9};b.getOperationLogger=function(a){a=this.createOperationLogger(a);return this.setOperationContext(a)};b.setOperationContext=function(a){this.$11(a);return a};b.createOperationLogger=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createOperationLogger"})};b.createLoggerProvider=function(){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createLoggerProvider"})};b.$11=function(a){this.getType()&&a.setType(this.getType()),this.getInitiator()&&a.setInitiator(this.getInitiator()),this.getResource()&&a.setResource(this.getResource()),this.getRepresentationID()&&a.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&a.setStreamSwitchReason(this.getStreamSwitchReason()),typeof this.getSegmentStartTime()==="number"&&a.setSegmentStartTime(this.getSegmentStartTime()),typeof this.getSegmentEndTime()==="number"&&a.setSegmentEndTime(this.getSegmentEndTime()),typeof this.getIsP2pPlayback()==="boolean"&&a.setIsP2pPlayback(this.getIsP2pPlayback()),typeof this.getIsRingBufferSample()==="boolean"&&a.setIsRingBufferSample(this.getIsRingBufferSample())};return a}();g["default"]=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b.getTime()-a.getTime():0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.log=function(){a.prototype.log.call(this);var b=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(b),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return b}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider$p_1=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.createOperationLogger=function(a){return new h(a,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(b){return b.getOperationLogger(a)}))};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider$p_1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(a){function b(b,c){b=a.call(this,b)||this;b.$OzMultiDestinationOperationLogger$p_1=c;return b}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.start=function(){a.prototype.start.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.start()});return this};c.setPerSessionSampleRate=function(b){a.prototype.setPerSessionSampleRate.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPerSessionSampleRate(b)});return this};c.setResult=function(b){a.prototype.setResult.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setResult(b)});return this};c.setError=function(b){a.prototype.setError.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setError(b)});return this};c.setType=function(b){a.prototype.setType.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setType(b)});return this};c.setMediaSourcePreviousDuration=function(b){a.prototype.setMediaSourcePreviousDuration.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setMediaSourcePreviousDuration(b)});return this};c.setMediaSourceNewDuration=function(b){a.prototype.setMediaSourceNewDuration.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setMediaSourceNewDuration(b)});return this};c.setClientTimeBegin=function(b){a.prototype.setClientTimeBegin.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setClientTimeBegin(b)});return this};c.setClientTimeDuration=function(b){a.prototype.setClientTimeDuration.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setClientTimeDuration(b)});return this};c.setClientTimeEnd=function(b){a.prototype.setClientTimeEnd.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setClientTimeEnd(b)});return this};c.setSegmentCount=function(b){a.prototype.setSegmentCount.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setSegmentCount(b)});return this};c.setTimeToFirstByte=function(b){a.prototype.setTimeToFirstByte.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setTimeToFirstByte(b)});return this};c.setTimeToLastByte=function(b){a.prototype.setTimeToLastByte.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setTimeToLastByte(b)});return this};c.setTimeToRequestStart=function(b){a.prototype.setTimeToRequestStart.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setTimeToRequestStart(b)});return this};c.setTimeToRequestSent=function(b){a.prototype.setTimeToRequestSent.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setTimeToRequestSent(b)});return this};c.setReason=function(b){a.prototype.setReason.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setReason(b)});return this};c.setResource=function(b){a.prototype.setResource.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setResource(b)});return this};c.setSegmentStartTime=function(b){a.prototype.setSegmentStartTime.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setSegmentStartTime(b)});return this};c.setSegmentEndTime=function(b){a.prototype.setSegmentEndTime.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setSegmentEndTime(b)});return this};c.setAppendedBufferMs=function(b){a.prototype.setAppendedBufferMs.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setAppendedBufferMs(b)});return this};c.setLength=function(b){a.prototype.setLength.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setLength(b)});return this};c.setLiveheadPosition=function(b){a.prototype.setLiveheadPosition.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setLiveheadPosition(b)});return this};c.setLiveheadSeqNumHeader=function(b){a.prototype.setLiveheadSeqNumHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setLiveheadSeqNumHeader(b)});return this};c.setLiveheadSeqNumMpd=function(b){a.prototype.setLiveheadSeqNumMpd.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setLiveheadSeqNumMpd(b)});return this};c.setManifestType=function(b){a.prototype.setManifestType.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setManifestType(b)});return this};c.setPriorityFloat=function(b){a.prototype.setPriorityFloat.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPriorityFloat(b)});return this};c.setInitiator=function(b){a.prototype.setInitiator.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setInitiator(b)});return this};c.setPreloadTime=function(b){a.prototype.setPreloadTime.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPreloadTime(b)});return this};c.setConcluder=function(b){a.prototype.setConcluder.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setConcluder(b)});return this};c.setPreviousRepresentationID=function(b){a.prototype.setPreviousRepresentationID.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPreviousRepresentationID(b)});return this};c.setRepresentationID=function(b){a.prototype.setRepresentationID.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setRepresentationID(b)});return this};c.setState=function(b){a.prototype.setState.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setState(b)});return this};c.setContentLengthHeader=function(b){a.prototype.setContentLengthHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setContentLengthHeader(b)});return this};c.setEdgeHitHeader=function(b){a.prototype.setEdgeHitHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setEdgeHitHeader(b)});return this};c.setFNAHitHeader=function(b){a.prototype.setFNAHitHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setFNAHitHeader(b)});return this};c.setOriginHitHeader=function(b){a.prototype.setOriginHitHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setOriginHitHeader(b)});return this};c.setCode=function(b){a.prototype.setCode.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setCode(b)});return this};c.setResponseTimeMsHeader=function(b){a.prototype.setResponseTimeMsHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setResponseTimeMsHeader(b)});return this};c.setIsTemplatedManifest=function(b){a.prototype.setIsTemplatedManifest.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsTemplatedManifest(b)});return this};c.setIsLatencyCachupEnabled=function(b){a.prototype.setIsLatencyCachupEnabled.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsLatencyCachupEnabled(b)});return this};c.setPlayerFormat=function(b){a.prototype.setPlayerFormat.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPlayerFormat(b)});return this};c.setIsP2pPlayback=function(b){a.prototype.setIsP2pPlayback.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsP2pPlayback(b)});return this};c.setOneObserved=function(b){a.prototype.setOneObserved.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setOneObserved(b)});return this};c.setOneReqWave=function(b){a.prototype.setOneReqWave.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setOneReqWave(b)});return this};c.setOneResWave=function(b){a.prototype.setOneResWave.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setOneResWave(b)});return this};c.setAppendTarget=function(b){a.prototype.setAppendTarget.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setAppendTarget(b)});return this};c.setIsRingBufferSample=function(b){a.prototype.setIsRingBufferSample.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsRingBufferSample(b)});return this};c.setIsOnline=function(b){a.prototype.setIsOnline.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsOnline(b)});return this};c.setIsMixedCodecManifest=function(b){a.prototype.setIsMixedCodecManifest.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setIsMixedCodecManifest(b)});return this};c.setProxyStatusHeader=function(b){a.prototype.setProxyStatusHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setProxyStatusHeader(b)});return this};c.setPlaybackFbmsParam=function(b){a.prototype.setPlaybackFbmsParam.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPlaybackFbmsParam(b)});return this};c.setPreferredEdgeLatency=function(b){a.prototype.setPreferredEdgeLatency.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setPreferredEdgeLatency(b)});return this};c.setUserInfo=function(b){a.prototype.setUserInfo.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setUserInfo(b)});return this};c.setDynamicStatusHeader=function(b){a.prototype.setDynamicStatusHeader.call(this,b);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setDynamicStatusHeader(b)});return this};c.setMediaSourceSourceBuffer=function(b,c){a.prototype.setMediaSourceSourceBuffer.call(this,b,c);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.setMediaSourceSourceBuffer(b,c)});return this};c.unsetMediaSourceSourceBuffers=function(){a.prototype.unsetMediaSourceSourceBuffers.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.unsetMediaSourceSourceBuffers()});return this};c.log=function(){a.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.log()})};return b}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}function i(a,b,c){if(!a||b===""||c==="")return null;b=(a=a.get(b))!=null?a:"";a=b.split(";");for(b=0;b<a.length;b++){var d=a[b].split(":");if(d.length===2&&d[0]===c){d=parseInt(d[1],10);return isFinite(d)?d:null}}return null}a={getNextValidSegmentId:function(a){return h(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return h(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return h(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return h(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){var b=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),d=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return i(a,b,d)},getBandwidthStandardDeviationEstimate:function(a){return h(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return h(a,"x-mrtt-ms")}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5=null;this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/);this.$7={m4a:{time:0},m4v:{time:0}};this.$8={audio:"m4a",video:"m4v"};this.$9={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.getLast200RequestedTime=function(){return this.$5};b.getLast200RequestedUrlDecisionMinTime=function(){var a=[];for(var b in this.$7)a.push(this.$7[b].time);return Math.min.apply(Math,a)};b.getLast200RequestedUrlDecisionTimeByMimeType=function(a){return(a=this.$7[this.$8[a]])==null?void 0:a.time};b.updateWithResponse=function(a,b,d,e){var f;if(!e.headers||e.status!=200)return;this.$5=b;this.$1=(f=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(e.headers))!=null?f:this.$1;this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(e.headers);this.$10(a,d);(this.$2!=null||this.$2==="200")&&(this.$4=b)};b.$10=function(a,b){a=this.$6.exec(a);if(a!=null){a=a[2];b!=null&&(this.$7[a]={time:b})}};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$11(a);a=this.$12(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$11=function(a){this.$9[a]==null&&(this.$9[a]={segmentCount:0});return this.$9[a].segmentCount=this.$9[a].segmentCount!=null?this.$9[a].segmentCount+1:0};b.$12=function(a){return this.$9[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$1=a,this.$2=b,this.$11=c,this.$6=g,this.$3=d,this.$4=e,this.$5=f,this.$7=h,this.$8=i,this.$9=j,this.$10=k,this.$12=l,this.$13=m}var b=a.prototype;b.getContentProtectionXml=function(){return this.$2};b.getID=function(){return this.$11};b.getBandwidth=function(){return this.$10};b.getMimeCodecs=function(){return c("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)};b.getMimeType=function(){return this.$3};b.getCodecs=function(){return this.$4};b.getVariantKey=function(){return this.$5};b.getLang=function(){return this.$6};b.getRole=function(){return this.$7};b.getDisplayLabel=function(){return this.$11};b.getInitSegment=function(){return this.$8};b.getCustomFieldFirstSegment=function(){return this.$12};b.getCustomField=function(a){if(this.$13==null||!this.$13[a])throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$13[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$9.updateWith(b.$9)};b.getSegmentByTime=function(a){return this.$9.getSegmentByTime(a)};b.getSegment=function(a){return this.$9.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$9.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$9.canPredict()};b.canApproximateId=function(){return this.$9.canApproximateId()};b.getSegmentAfter=function(a){return this.$9.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$9.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$9.addUpdateListener(a)};b.getTimeRanges=function(){return this.$9.getTimeRanges()};b.blockTimeRange=function(a){this.$9.blockTimeRange(a)};b.getEndingSegment=function(){return this.$9.getEndingSegment()};b.getMaxGopSec=function(){return this.$9.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;c.$OzVideoRepresentation$p_5=null;c.$OzVideoRepresentation$p_6=null;c.$OzVideoRepresentation$p_7=null;c.$OzVideoRepresentation$p_1=o;c.$OzVideoRepresentation$p_2=p;c.$OzVideoRepresentation$p_4=n;c.$OzVideoRepresentation$p_3=b;if(n!=null){if(n.playbackResolutionMos!=null){d=c.getCustomField("playbackResolutionMos");c.$OzVideoRepresentation$p_7=d!=null?String(d):null}if(n.playbackResolutionCsvqm!=null){e=c.getCustomField("playbackResolutionCsvqm");c.$OzVideoRepresentation$p_6=e!=null?String(e):null}}return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.getQualityScoreCurveString=function(a){if(a==="csvqm")return this.$OzVideoRepresentation$p_6;else return this.$OzVideoRepresentation$p_7};c.getWidth=function(){return this.$OzVideoRepresentation$p_1};c.getHeight=function(){return this.$OzVideoRepresentation$p_2};c.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var a=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;a&&(this.$OzVideoRepresentation$p_5=a(this.$OzVideoRepresentation$p_3));(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation$p_5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}function b(a){a=(a.split(";")[0]||"").trim();a=(a.split("/")[1]||"").trim();return a}function c(a){a=a.split('codecs="').pop();return a.split(".")[0].trim()}f.getMimeType=a;f.getContainerType=b;f.getParsedCodecFamily=c}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.$2=c,this.$3=b,this.$4=d}var b=a.prototype;b.registerOnUpdateStartListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",a)};b.registerOnUpdateEndListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",a)};b.registerOnUpdateListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",a)};b.registerOnErrorListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",a)};b.getIsUpdating=function(){return this.$1.updating};b.getBuffered=function(){return this.$1.buffered};b.setAppendWindowEnd=function(a){this.$1.appendWindowEnd=a};b.appendBuffer=function(a,b){var c,e=(c=d("oz-player/utils/OzMimeUtil")).getMimeType(b)!==c.getMimeType(this.$3),f=c.getContainerType(b)!==c.getContainerType(this.$3);c=c.getParsedCodecFamily(b)!==c.getParsedCodecFamily(this.$3);if(e||f||c)if(this.$4){try{this.$1.changeType(b)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+b+'"): '+String(a)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}this.$3=b}else throw d("oz-player/utils/OzErrorUtils").createOzError({description:"SourceBufferChangeTypeError: attempted to call changeType() on a SourceBuffer that does not support it.",type:"OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE"});this.$1.appendBuffer(a)};b.abort=function(){this.$1.abort()};b.remove=function(a,b){this.$1.remove(a,b)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.getBuffered().length;c++)b+=a.getBuffered().end(c)-a.getBuffered().start(c);return b}function b(a){return a.reduce(function(a,b){return a+(b.endTime-b.startTime)},0)}function c(a){return a.getBuffered().length==0?0:a.getBuffered().start(0)}function e(a){var b=null;try{b=a.getBuffered()}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function f(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function h(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function i(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e==null?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getTotalInBufferedRanges=b;g.getStartBufferedTime=c;g.getEndBufferedTime=e;g.convertToBufferedTimeRangeArray=f;g.getBufferAheadInBufferedRanges=h;g.getTotalBufferAheadOfPosition=i}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:e,endTime:a}}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.dispatchEvent=function(a){if(this.$1[a]==null)return;this.$1[a].forEach(function(a){return a()})};b.addEventListener=function(a,b){var c=this;this.$1[a]===void 0&&(this.$1[a]=new Set());this.$1[a].add(b);return{remove:function(){c.removeEventListener(a,b)}}};b.removeEventListener=function(a,b){if(!this.$1[a])return;this.$1[a]["delete"](b)};b.destroy=function(){this.$1={}};return a}();f["default"]=a}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,d){var e;e=a.call(this)||this;e.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzObservedSourceBufferState$p_3=[];e.$OzObservedSourceBufferState$p_6=function(){var a;try{a=e.$OzObservedSourceBufferState$p_1.getBuffered()}catch(a){if(a.name==="InvalidStateError"){e.$OzObservedSourceBufferState$p_3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});e.$OzObservedSourceBufferState$p_3=b};e.$OzObservedSourceBufferState$p_1=b;e.$OzObservedSourceBufferState$p_4=d;e.$OzObservedSourceBufferState$p_5();return e}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.$OzObservedSourceBufferState$p_5=function(){var a=this;this.$OzObservedSourceBufferState$p_2.release();this.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){a.$OzObservedSourceBufferState$p_6(),a.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))};d.setSourceBuffer=function(a){this.$OzObservedSourceBufferState$p_1=a,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()};d.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3};d.destroy=function(){a.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()};return b}(c("oz-player/utils/OzFakeEventTarget"));g["default"]=a}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"};b=a;f["default"]=b}),66);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,e,f,g,h){var i=this;h===void 0&&(h=null);this.$4=null;this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$14=0;this.$26=function(){if(i.$10.hasError()){i.$13=!1;i.$12=!1;var a=i.$10.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=i.$10.getErrorCode();b=b!=null?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});i.$4&&i.$4.reject(a);i.$4=null;i.cancelOperationAndCleanQueue()}else if(!i.$13){i.$13=!0;b=i.$10.getVideoNode();a=i.$26;b=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b,"error",a);i.$5.addSubscriptions(b)}};this.$17=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult(i.$12?"failed":"success").log()}a=i.$4;a&&(i.$12?i.$26():(a.resolve(),i.$4&&(i.$4=null)))};this.$18=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult("failed").log()}i.$12=!0};this.$1=a;this.$2=h;this.$3=b;this.$11=e;this.$16();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11);this.$10=f;this.$15=g}var e=a.prototype;e.$16=function(){this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))};e.setSourceBuffer=function(a){if(a==null)return;this.cancelOperationAndCleanQueue();this.$3=a;this.$16();this.$9.setSourceBuffer(a)};e.queueData=function(a,b,d,e,f){e===void 0&&(e=null);f===void 0&&(f=0);var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:g,loggerProvider:e,appendTarget:f,mimeCodecs:b,clearSourceBufferRange:d});a=g.getPromise();this.$7||this.$19()["catch"](function(a){});return a};e.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&!0&&(this.$10.hasError()||this.$3.abort())}catch(b){var c=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(c).setReason(this.$15?this.$15():null).log()}a=this.$4;a&&a.reject(b);this.$6&&(this.$6.reject(b),this.$6=null)};e.getSourceBufferState=function(){return this.$9};e.$20=function(a,b){a=Math.max(a,0);b>0&&b>a&&this.$3.remove(a,b)};e.$21=function(a,b){a=Math.max(a,0);if(b>0&&b>a){var d=this.$22();this.$20(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};e.clearRangeWithWait=function(a){var c=this;this.cancelOperationAndCleanQueue();return a.reduce(function(a,b){var d=b.fromTime,e=b.toTime;return a.then(function(){return c.$21(d,e)})},(h||(h=b("Promise"))).resolve())};e.$22=function(a){var b=this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};e.$23=function(a,b,e,f){var g=this,h=function(){var h=g.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),i=!1,j=!0;try{j=!!g.$3.getBuffered()}catch(a){j=!1}try{i=g.$3.getIsUpdating();if(j)g.$3.appendBuffer(a,b);else{h.resolve();return h.getPromise()}}catch(a){j=a;var k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,l=j.name,m=j.message;l==="QuotaExceededError"?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:i?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:l==="InvalidStateError"&&typeof m==="string"&&/SourceBuffer has been removed/.test(m)?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:l==="InvalidStateError"&&(k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);i=d("oz-player/utils/OzErrorUtils").createOzError({type:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getType():l==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":l==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+g.$1+" appendBuffer("+b+") failed: "+String(m),extra:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getExtra():{originalError:j,code:k}});g.$4=null;h.reject(i)}l=h.getPromise();e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(l,e,"append",function(b){var c;b.setLength(a.byteLength);c=(c=f==null?void 0:f.appendTarget)!=null?c:null;b.setAppendTarget(c)});return l};if(this.$3.getIsUpdating())return this.$22(e).then(h)["catch"](function(a){throw a});this.$14+=a.byteLength;return h()};e.$19=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.mimeCodecs,g=b.deferred,h=b.loggerProvider,i=b.appendTarget,j=b.clearSourceBufferRange;this.$7=!0;var k;b=function(){return e instanceof d("oz-player/shims/OzStreams").OzReadableStream?a.$25(e,f,h,i):a.$23(e,f,h,{appendTarget:i})};j?(k=this.$3.getIsUpdating()?this.$22(h):c("oz-player/shims/OzMaybeNativePromise").resolve(),k=k.then(function(){return a.clearRangeWithWait([{fromTime:j[0],toTime:j[1]}])}).then(b)):k=b();var l=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return k["catch"](function(a){g.reject(a)}).then(function(){var b=l(),c=b.startTime;b=b.endTime;g.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$19()["catch"](function(a){})})};e.$25=function(a,b,e,f){var g=this,h=[],i=0,j=a.getReader(),k=function(){var a=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));g.$6=a;j.read().then(function(b){a.resolve(b),g.$6=null})["catch"](function(b){a.reject(b),g.$6=null});return a.getPromise().then(function(a){if(a.done){var d=c("oz-player/utils/ozConcatUint8Arrays")(h);d=d.buffer;h.length=0;i=0;return d.byteLength>0?g.$23(d,b,e,{appendTarget:f}):c("oz-player/shims/OzMaybeNativePromise").resolve()}d=a.value;a=d;if(f>0){d=d instanceof Uint8Array?d:new Uint8Array(d);h.push(d);i+=d.byteLength;if(i>=f){d=c("oz-player/utils/ozConcatUint8Arrays")(h);d=d.buffer;h.length=0;i=0;a=d}}return a&&a.byteLength>=f?g.$23(a,b,e,{appendTarget:f}).then(function(){return k()}):k()},function(a){if(g.$11.getBool("enable_alternative_audio_tracks"))try{g.$15()==="open"&&(g.$10.hasError()||g.$3.abort())}catch(a){a}else try{g.$3.abort()}catch(a){a}if(typeof a==="object"&&d("oz-player/utils/OzErrorUtils").isOzError(a))return c("oz-player/shims/OzMaybeNativePromise").reject(a);if(typeof a==="object"&&a!=null&&typeof a.name==="string"&&a.name==="TypeError"&&typeof a.message==="string"&&a.message.includes("network error")){var e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Stream read is interrupted (previously TypeError network error)}",extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)}e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Unexpected error while reading from stream: "+String(a),extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)})};return k()};e.$24=function(a){var b=this.$2;b!=null&&b.getOperationLogger("source_buffer_invariant").setError(a).setResult("failed").log();return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+a})};e.destroy=function(){var a=this,b=this.$2;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();b=this.$4;b&&(!this.$13?(b.reject(d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$4=null,a.$5.release(),a.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()}));this.$9.destroy()};e.getDebug=function(){return{SourceBuffer:this.$3}};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function a(){return h.load()}g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,e=a.videoNode,f=a.config,g=a.perfLoggerProvider;g=g===void 0?new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):g;var h=a.isChangeTypeSupported,i=a.useManagedMediaSource,j=a.handleVttCaptionsUpdated,k=a.onClearVideoNodeError;a=a.onRetryVideoElementError;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$18=null;this.$19=null;this.$20=new(c("oz-player/utils/OzErrorEmitter"))();this.$22="undetected";this.$23=!1;this.$24=!1;this.$31=function(){b.$34()||(b.$10=!1);if(!b.$35())return;var a=b.$8.shift();a&&(a(b.$2),b.$10=!0)};this.$5=g;this.$11=f;this.$1=e;this.$21=j;this.$16=k;this.$17=a;this.$23=h;this.$24=i;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;b.$5.getOperationLogger("media_element_error").setError((a=b.$9.getMediaErrorName())!=null?a:void 0).setCode(b.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$8=[];b.$6=[];b.$4.release();b.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();b.$15=b.$15||b.$14||b.$13;a=b.$1.error;var e=(a==null?void 0:a.code)||0,f=!a&&b.$1.poster!=null&&b.$1.poster!=="",g=d("oz-player/utils/OzErrorUtils").createOzError({type:f?"OZ_POSSIBLE_POSTER_LOAD_FAILURE":c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(e),description:(a==null?void 0:a.message)!=null?a.message:"",extra:{originalError:a,code:String(e)}});if(b.$19!=null){b.$5.getOperationLogger("media_element_error").setError(a).setCode(e).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$20.emitError(g);return}b.$19=b.$1.currentTime;b.$18==null&&(b.$18=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$18=null,b.$11.getBool("retry_video_element_error")&&(b.$17!=null&&b.$17(g),b.$25())},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){b.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){b.$14=!1,b.$15=!1,b.$19=null,b.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){b.$14=!1,b.$13=!1,b.$15=!!b.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){b.$14=!1,b.$13=!1}));this.$2=this.$26();this.$5.getOperationLogger("media_source_new").log();this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.$5.getOperationLogger("media_source_open").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.$5.getOperationLogger("media_source_ended").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){b.$5.getOperationLogger("media_source_close").log()}));this.$27(this.$2)}var b=a.prototype;b.$26=function(){return this.$24?new ManagedMediaSource():new MediaSource()};b.$27=function(a){var b=this.$1,c=b.src;c!==""&&URL.revokeObjectURL(c);a?(this.$24&&(b.disableRemotePlayback=!0),b.src=URL.createObjectURL(a)):(b.removeAttribute("src"),b.removeAttribute("srcObject"))};b.$25=function(){var a=this;this.$7.forEach(function(a){a.cancelOperationAndCleanQueue()});this.$2=this.$26();this.$27(this.$2);this.$7.forEach(function(a,b){a.setSourceBuffer(null)});var b=this.$28().then(function(){var b=[];a.$7.forEach(function(c,d){var e=a.$29(d).then(function(b){c.setSourceBuffer(b),a.$30(b,d)});b.push(e)});return c("oz-player/shims/OzMaybeNativePromise").all(b)});b.then(function(){a.$16&&a.$16();a.$19!=null&&(a.$1.currentTime=a.$19);if(a.$15){var b=a.$1.play();return b==null?void 0:b["catch"](function(){})}})["catch"](function(b){a.$20.emitError(b)})};b.$28=function(){var a=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){d.remove(),b.resolve(),a.$31()});this.$3.addSubscriptions(d);return b.getPromise()}else{if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){e.resolve(),a.$31()}));return e.getPromise()}};b.$29=function(a){var b=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return c("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return b.$32(a)})["catch"](function(b){b=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+String(b),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw b});else try{return this.$32(a)}catch(b){var e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw e}};b.$32=function(a){var b=this,e;a.includes("vtt")?e=this.$33(a):e=this.$28().then(function(){return new(c("oz-player/media_source/OzMSESourceBufferImpl"))(b.$2.addSourceBuffer(a),a,b.$11,b.$23)});return e.then(function(c){b.$6.push(c);c.registerOnUpdateListener(function(){b.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).log()});b.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).log();return c})};b.$30=function(a,b){var c=this;this.$4.addSubscriptions(a.registerOnUpdateEndListener(function(){c.$31()}))};b.$33=function(a){var b=this;return c("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(e){if(b.$21!=null){var f=new e({onCaptionsChanged:b.$21,config:b.$11}),g=c("oz-player/shims/ozThrottle")(function(){f.setCurrentVideoTime(b.$1.currentTime)},200);b.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b.$1,"timeupdate",function(){g()}),{remove:function(){g=function(){}}});return f}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): No handleVttCaptionsUpdated callback provided',extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})};b.createSourceBufferManager=function(a,b,e,f){var g=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$29(b).then(function(a){return[void 0,a]}):c("oz-player/shims/OzMaybeNativePromise").all([this.$28(),this.$29(b)])).then(function(e){e[0];e=e[1];var f=new(c("oz-player/media_source/SourceBufferManager"))(a,e,g.$11,g.$9,function(){return g.$2.readyState},g.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(b)));g.$30(e,b);g.$7.set(b,f);return f})["catch"](function(b){var e=d("oz-player/utils/OzErrorUtils").isOzError(b)?b.getExtra():void 0,f=e==null?void 0:e.code;f=d("oz-player/utils/OzErrorUtils").isOzError(b)?""+b.getType()+(f!=null?"#"+f:"")+": "+b.getDescription():String(b);f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+a+": "+f+", support AAC-LC="+(g.$2.constructor.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+g.$2.readyState,extra:babelHelpers["extends"]({},e,{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw f})};b.getReadyState=function(){return this.$2.readyState};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){e.resolve()}));this.$8.push(function(c){if(c.readyState==="open"){var e=d.$5.getOperationLogger("end_of_stream");e.setInitiator(a).setReason(b);e.log();c.endOfStream()}});this.$31();return e.getPromise()};b.updateDuration=function(a,b){var e=this,f=this.$2.duration;if(Number.isFinite(f)&&(!b||f>=a))return;this.$8.push(function(b){b.duration!==f&&!(isNaN(b.duration)&&isNaN(f))&&c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+b.duration+" != "+f}),"MediaSourceManager updateDuration","warn");var g=e.$11.getBool("msm_refactor_wait_for_sourceopen")?b.duration!==Infinity&&a<b.duration:a<b.duration;if(g){e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).setResult("failed").log();return}e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).log();b.duration=a});this.$31();return};b.detach=function(){this.$18&&(c("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null);this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers();this.$27(null);for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$35=function(){return!this.$34()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$34=function(){return this.$6.some(function(a){return a.getIsUpdating()})};b.onError=function(a){return this.$20.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(a){a===void 0&&(a=!0);var b=d.$2;if(!b)return;b=b.getTimeRanges();if(!b.length)return;b=b[b.length-1];d.$1.updateDuration(b.endTime,a)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){b.$5(!1)})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";b=function(b,c){return a.fetch(b,c)};c=function(b,c){return new a.Response(b,c)};f.fetch=b;f.Response=c}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,e,f,g){if(!d("oz-player/shims/OzFetchAPI").fetch)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"fetch api is missing"});var h=null;if("AbortController"in a&&f!=null&&f!=0){var i=new AbortController();h=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return i.abort()},f);f=babelHelpers["extends"]({},e,{signal:i.signal})}else f=babelHelpers["extends"]({},e);g!=null&&(f=babelHelpers["extends"]({},f,{referrer:g}));return d("oz-player/shims/OzFetchAPI").fetch(b,f).then(function(a){c("oz-player/shims/ozClearTimeout")(h);return a})}g["default"]=b}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return a!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var c=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){while(!0){var b=(yield c.read());if(b.done)break;a.enqueue(b.value)}a.close()});function d(b){return a.apply(this,arguments)}return d}()})}g["default"]=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?c("oz-player/shims/OzMaybeNativePromise").resolve({ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}):a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){f=d?d.networkTimeoutMs:null;g=c("oz-player/networks/FetchWithTimeout")(a,b,f);return g.then(function(a){var b=a.ok,d=a.status,f=a.headers;return e!=null&&!b&&typeof a.text==="function"?a.text().then(function(c){return{ok:b,status:d,headers:f,body:c,arrayBuffer:function(){return a.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a)})}b=a;d=b;g["default"]=d}),98);
__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{f(yield a())}catch(a){if(b>0){var i=typeof e==="function"?e(d-b):e;c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){h(b-1)},i)}else g(a)}});return i.apply(this,arguments)}h(d)})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.config,e=a.url,f=a.http,g=a.overrideOzRequestImplementation,h=a.options,i=a.prefetchCache,j=a.mediaStreamType,k=a.onPerfEntryAvailable,l=a.dataAppendedCallback,m=a.dataAppendedErrorCallback,n=g!=null?function(){return g.apply(void 0,arguments)}:c("oz-player/networks/OzFetchRequestImplementation");a=i?i.getCacheValue(e):null;i=a;a=!1;if(i)a=!0,i=i.then(function(a){if(a.initiator==="FETCH"){var b=a.response,e=b.ok,f=b.status,g=b.headers;return!e&&typeof a.response.text==="function"?a.response.text().then(function(b){return{ok:!1,status:f,headers:g,body:b,arrayBuffer:function(){return a.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a.response)}else if(a.initiator==="XHR_REQUEST"){b=c("oz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a.response)}}}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(a){return n(e,f,null,null,j,k,l,m)});else{var o;o=(o=h==null?void 0:h.retryAttempts_SIDX_USE_ONLY)!=null?o:0;if(o>0){var p;p=(p=h==null?void 0:h.retryTimeoutMs_SIDX_USE_ONLY)!=null?p:100;i=c("oz-player/networks/withRetries")(function(){return n(e,f,h,b,j,k,l,m)},o,p)}else i=n(e,f,h,b,j,k,l,m)}return{promise:i,retrievedFromCache:a}}g["default"]=a}),98);
__d("oz-player/utils/OzVideoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";c=1<<31;var g=~c,h=c+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe",OE2:"oe2",ODM:"odm",USS:"uss"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;return a.get(l.OE2)!==null||a.get(l.ODM)!==null||a.get(l.USS)!==null}function b(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=c;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isShortenedExpiryTimestampCdnUrl=a;f.isCdnUrlExpired=b}),66);
__d("oz-player/networks/OzNetworkRequestStream",["Promise","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils","oz-player/utils/OzVideoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$8=!1;this.$10="auto";var b=a.debugName,c=a.config,d=a.baseUri,e=a.baseUriDecisionTime,f=a.options,g=a.requestParamCreator,h=a.networkRequestStreamHandlers,i=a.overrideOzRequestImplementation,j=a.prefetchCache,k=a.networkRequestFetchPriority,l=a.networkRequestStreamRetryHandler,m=a.networkRequestUrlRefreshHandler,n=a.dynamicVideoLibrary,o=a.mediaStreamType,p=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;this.$1=b;this.$2=d;this.$3=f;this.$4=g;this.$11=h!=null?h:[];this.$10=k;this.$12=l;this.$13=m;this.$9=i;this.$14=j;this.$15=c;this.$16=n;this.$17=e;this.$18=o;this.$19=p;this.$20=a}var e=a.prototype;e.$21=function(a){var b=this;a=this.$4.createRequestParam(this.$2,a,this.$10);var d=a.uri;a=a.http;d=d.toString();this.$5=d;a=c("oz-player/networks/OzFetchWithCache")({config:this.$15,url:d,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$14,mediaStreamType:this.$18,onPerfEntryAvailable:function(a){b.$22(a)},dataAppendedCallback:this.$19,dataAppendedErrorCallback:this.$20});var e=a.promise;a=a.retrievedFromCache;this.$8=a;return{requestPromise:e,requestUrl:d}};e.startStream=function(a){var b=this;return this.$23().then(function(){if(b.$15.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(b.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(b.$2.toString()))return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") CDN URL expired.",responseStatus:0,responseHeaders:null,requestUrl:b.$2.toString()}));var e=b.$21(a),f=e.requestPromise,g=e.requestUrl,h=g,i=Date.now();return f.then(function(e){var f;(f=b.$16)==null||f.updateWithResponse(g,i,b.$17,e);b.$7=e;if(b.$12!=null&&e.ok===!1)return b.$12(e,function(){var d=b.$21(a),c=d.requestPromise;d=d.requestUrl;h=d;return c},h)["catch"](function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:h}})});else return e}).then(function(a){var e=[];for(var f=0;f<b.$11.length;f++)try{var g=b.$11[f].onResponse(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}g=a.body;f=a.headers;var i=a.ok;a=a.status;if(!i)return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") HTTP status not OK",responseStatus:a,responseHeaders:f,requestUrl:h,responseBody:typeof g==="string"?g:void 0}));typeof g!=="string"&&typeof g.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);i=g;for(a=0;a<e.length;a++)i=i.pipeThrough(e[a]);return i},function(a){var e=[];for(var f=0;f<b.$11.length;f++)try{var g=b.$11[f].onError(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}if(a instanceof TypeError){g=c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") TypeError: "+a.message,responseStatus:0,responseHeaders:null,requestUrl:h}));for(f=0;f<e.length;f++)g=g.pipeThrough(e[f]);return g}throw a})["catch"](function(a){if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;if(a.name==="AbortError"){var b=a.message;return c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:h,message:b})}return c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:h,message:"Stream processing error. "+a})})})};e.$22=function(a){this.$6=a};e.getLastPerformanceEntry=function(){if(this.$6!=null)return this.$6;return this.$5==null?null:d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)};e.getLastRequestUrl=function(){return this.$5};e.getLastResponse=function(){return this.$7};e.retrievedFromCache=function(){return this.$8};e.$23=function(){var a=this;if(this.$15.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(this.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(this.$2.toString())&&this.$13)return this.$13(this.$2.toString()).then(function(b){b.refreshedUrl!=null&&b.reason==="OK"&&(a.$2=new(c("oz-player/shims/OzURI"))(b.refreshedUrl));return});else return(h||(h=b("Promise"))).resolve()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var e=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=this.$4.getPromise());return e.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+b.$5})}else if(b.$2.length===0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a==null||a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=new i();this.$15=!1;this.$16=!1;this.$17=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$15?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$16?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$16&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$18=b;this.$19=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$15=!!f;this.$16=!!g;this.$17=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$18({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$20())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function(){var d=j.$14.hasMoreBytesToSkip()?j.$14.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$14.hasMoreBytesToSkip()){j.$14.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$20();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$14.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$21()}var b=a.prototype;b.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$21=function(){var a=this;return new this.$19({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$17?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b,e){var f=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var g=b.endByte;a===0&&g==null||(f.addQueryData({bytestart:b.startByte}),g!=null&&f.addQueryData({byteend:g}))}if(d.$2){var h=d.$2(f);h&&Object.keys(h).forEach(function(a){var b=h[a];f.addQueryData(a,b)})}a=d.$1&&d.$1(f)?"include":"same-origin";return{uri:f,http:{credentials:a,priority:e}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-fna-hit"):null},j=function(a){return a?a.get("x-fb-edge-hit"):null},k=function(a){return a?a.get("x-fb-origin-hit"):null},l=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g){d.length&&a.setSegmentCount(d.length),b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(e))).setLiveheadSeqNumHeader(l(g==null?void 0:g.headers)).setContentLengthHeader(h(g==null?void 0:g.headers)).setEdgeHitHeader(j(g==null?void 0:g.headers)).setOriginHitHeader(k(g==null?void 0:g.headers)).setFNAHitHeader(i(g==null?void 0:g.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(g==null?void 0:g.headers)).setUserInfo({segmentPTSHeader:String(c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(g==null?void 0:g.headers))}).setCode(g==null?void 0:g.status).setLength(f)};b=function(a,b,d,e,f,g,i){b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(l(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(j(e==null?void 0:e.headers)).setOriginHitHeader(k(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(i!=null&&i>0?{chunkSize:String(i)}:null)};g.setPerformanceLoggingAttributes=m;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$10=null;this.$15="auto";var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestFetchPriority;i=i===void 0?"auto":i;var j=a.networkRequestStreamRetryHandler,k=a.networkRequestUrlRefreshHandler,l=a.setCustomFetchStreamLoggingAttributes,m=a.dynamicVideoLibrary,n=a.configureCustomRequestParametersForSegment,o=a.onResourceTimingBufferFull;a=a.bandwidthEstimator;this.$2=b;this.$8=g;this.$9=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$8,this.$9);this.$3=d;this.$4=e;this.$5=j;this.$6=k;this.$7=f;this.$10=l;this.$11=m;this.$12=n;this.$13=o;this.$14=a;this.$15=i}var b=a.prototype;b.destroy=function(){};b.request=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.requestOptions,h=a.mediaStreamType,i=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var j=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},k=this.$7?this.$7():null,l=this.$16(d[0]);b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:l,baseUriDecisionTime:null,options:g,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:h,dataAppendedCallback:i,dataAppendedErrorCallback:a});return this.$17(j,b,e,f,d)};b.createPausableStream=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.mediaStreamType,h=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var i=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},j=null,k=this.$2.getNumber("network_seg_timeout_ms");k>0&&(j={networkTimeoutMs:k});k=this.$7?this.$7():null;var l=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:this.$16(d[0]),baseUriDecisionTime:d[0].getOptions().getSegmentNumDecisionTime(),options:j,requestParamCreator:this.$1,networkRequestFetchPriority:this.$15,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:g,dataAppendedCallback:h,dataAppendedErrorCallback:a});return{pausableStream:this.$18(i,l,e||null,f),loggingPayloads:{getRequestUrl:function(){return l.getLastRequestUrl()||null},segments:d,getResponse:function(){return l.getLastResponse()}}}};b.requestRawUrl=function(a){var b=a.debugName,d=a.url,e=a.options;a=a.loggerProvider;var f=this.$7?this.$7():null;b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:new(c("oz-player/shims/OzURI"))(d),baseUriDecisionTime:null,options:e,networkRequestFetchPriority:this.$15,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:f,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null});d={startByte:0,endByte:null};return this.$17(d,b,[],a)};b.$18=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f,this.$13)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})};b.$17=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$18(a,b,c,e);a=h.startStream();var i=this.$19(a);if(e){c=function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$10;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",c,c)}return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$19=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return"done"})})};b.$16=function(a){var b=this.$12,d=new(c("oz-player/shims/OzURI"))(a.getURI().toString());if(b){var e=b(a);e&&Object.keys(e).forEach(function(a){var b=e[a];d.addQueryData(a,b)})}return d};b.getBandwidthEstimator=function(){return this.$14};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$Mpd$p_9=!1;j.$Mpd$p_1=b;j.$Mpd$p_5=g;j.$Mpd$p_2=c;j.$Mpd$p_3=d;j.$Mpd$p_4=e;j.$Mpd$p_6=f;j.$Mpd$p_7=h;j.$Mpd$p_8=i;return j}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.markRefreshed=function(){this.$Mpd$p_10=Date.now()};c.getRefreshDate=function(){return this.$Mpd$p_10};c.updateLocation=function(a){this.$Mpd$p_6=a,this.$Mpd$p_9=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd$p_6};c.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5};c.getVideoRepresentations=function(){return this.$Mpd$p_2};c.getVideoRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentations=function(){return this.$Mpd$p_3};c.getApplicationRepresentations=function(){return this.$Mpd$p_4};c.getCustomField=function(a){var b=this.$Mpd$p_7.get(a);if(!b)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+a});try{return b(this.$Mpd$p_1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd$p_8};c.updateWith=function(a){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=a.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,a.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,a.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,a.getApplicationRepresentations()),this.$Mpd$p_8=a.isStaticMpd(),this.$Mpd$p_5=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd$p_2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_3.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_4.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd$p_11=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$3=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$3};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$4=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$4};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(b){var d=this;this.$8=Date.now();this.$9=Date.now();this.$10=0;this.$11=0;this.$12=function(){};this.$13=function(){};this.$14=function(){};this.$16=new(c("oz-player/networks/OzTransformStream"))();this.$19=!1;this.$20=!1;this.$21=null;this.$22=function(a){d.$25();a.length!=null&&(d.$11+=a.length);d.$26();if(d.$18)return;d.$27()};this.$23=function(){if(d.$21!=null&&d.$21>0)return;var b=Date.now()-d.$8,c=d.$1.getLastPerformanceEntry();c&&d.$13(c.responseStart-c.requestStart,c.responseEnd-c.requestStart,d.$11);!c&&a.__isresourcetimingbufferfull&&d.$15&&d.$15();d.$3>0&&b>0&&d.$10===0&&d.$11>=d.$3&&d.$28(d.$11,b)};var e=b.stream,f=b.loggerProvider,g=b.byteCountPerSample,h=b.minimumBytesToSampleOnClose,i=b.minimumSampleDuration,j=b.maximumSampleBandwidth,k=b.useResponseTimeMs,l=b.responseTimeHandicapMs,m=b.ignoreOnStreamWriteSamples;b=b.onResourceTimingBufferFull;this.$1=e;this.$17=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$18=m;this.$16.addListener("writableWrite",this.$22);this.$16.addListener("writableClose",this.$23);this.$15=b}var e=b.prototype;e.getTransformStream=function(){return this.$16};e.onBandwidthSample=function(a){this.$12=a};e.onNavigationTimingSample=function(a){this.$13=a};e.onEstimateFromHeaders=function(a){this.$14=a};e.$24=function(a,b,c){b=b-c;c=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$21);c.log()}this.$12(a,b)};e.$29=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};e.$28=function(a,b){var d=this.$1.getLastResponse();d=this.$6?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$29(a,b,d)||this.$24(a,b,Math.max(d-this.$7,0))};e.$25=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$20||a==null)return;this.$20=!0;a=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a);a!=null&&this.$14(a)};e.$26=function(){if(this.$19)return;if(this.$21==null){var a=this.$1.getLastResponse();this.$21=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))};e.$27=function(){var a=Date.now(),b=a-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,b,0)&&(this.$24(this.$11-this.$10,b,0),this.$8=a,this.$10=this.$11)};return b}();g["default"]=b}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g){"use strict";var h=2e5;function a(a,b,d,e,f){return{startStream:function(g){var i=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",h),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:f});i.onBandwidthSample(function(a,b){e.addBandwidthSample(a,b)});i.onNavigationTimingSample(function(b,c,d){var f=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(f===0||b<=f)&&e.addNavigationTimingSample(b,c,d)});i.onEstimateFromHeaders(function(a){e.setBandwidthEstimateFromHeaders({meanEstimate:a})});return b.startStream(g).then(function(a){return b.retrievedFromCache()?a:a.pipeThrough(i.getTransformStream())})}}}g.pipeStreamThroughBandwidthEstimator=a}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return function(e,f,g,h){var i=a==="video";return f instanceof c("oz-player/networks/OzNetworkRequestStream")&&i?d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(e.getLegacyConfig(),f,g,b,h):f}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){this.$6=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,e,f){var g=new(c("oz-player/shims/OzDataViewReader"))(new DataView(f.buffer));f=g.readUint32();var i=g.readUint32();if(i!==h)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});f==1&&(f=g.readUint64());i=g.readUint8();g.skip(3);g.skip(4);var j=g.readUint32();if(!j)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var k;i==0?(i=g.readUint32(),k=g.readUint32()):(i=g.readUint64(),k=g.readUint64());g.skip(2);var l=g.readUint16(),m=i,n=e+f+k,o=0,p=a.getBool("sidx_parser_memory_optimization"),q=[];i=function(){var a=g.readUint32(),e=(a&2147483648)>>>31;a=a&2147483647;var f=g.readUint32();g.readUint32();if(e==1)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var h=m/j,i=(m+f)/j;r===0&&(o=h);var k=n,l=k+a-1,s=new(c("oz-player/manifests/OzSegmentOptions"))();q.push(p?new(c("oz-player/manifests/OzDataSegment"))(b,h-o,i-o,k,l):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:h-o,endTime:i-o}},getByteRange:function(){return{startByte:k,endByte:l}},getSequenceNumber:function(){return null},getOptions:function(){return s}});m+=f;n+=a};for(var r=0;r<l;r++)i();return q}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();return a.length>0?a[a.length-1]:null};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/k5cmJzUOK4Y/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f,g){a=[];b=b.createParser();var h=-1,i=-1;while(b.hasMoreData()){var j=b.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=e*j.unscaledTime;j=d+j.relativeOffset;h>=0&&(i>=0||c("oz-player/shims/ozvariant")(0,4010),a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,j-1)));h=k;i=j}if(h>=0){i>=0||c("oz-player/shims/ozvariant")(0,4010);k=f;a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,null))}return a}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=z(d);if(!d)return[];c=new u(c);c=c.parseElement();return c.id!=m?[]:w(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType(f==="video"||f==="audio"?f+";sidx":"sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b),e=new(c("oz-player/manifests/OzSegmentOptions"))();return this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},getOptions:function(){return e}}};b.parseSegmentsContainer=function(){var a=this,b=this.$11();d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$8,"process_sidx");b["catch"](function(b){a.$6.emitError(b)});return new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9)};b.$12=function(a,b,e){a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[a],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b,this.$4.getBandwidthEstimator())],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:e});b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e,null)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,null));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$9=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$2=d;this.$10=f;this.$11=g;this.$13=e;this.$14=a;this.$15=h;this.$3=i;this.$4=j;this.$5=k;this.$6=l!=null?l:null;this.$7=m!=null?m:null;this.$8=n!=null?n:null;this.$16=o;this.$17=p;try{this.$11=this.$11.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$18=function(){var a=this,b=this.$12;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;if(typeof f!=="string")throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$14,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$10,this.$11);b.onError(function(b){var c;if((c=a.$17)!=null&&c.handleError(a.parseID(),b))return;return a.$9.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$19(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)b=this.$19(this.$3[0],{isShared:!0});else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});this.$12=b;return b};b.$19=function(a,b){var e;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$13.mpdUrl;var f=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;f=f!=null?f:b;if(f==null)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var g=this.$13.customSegmentTimelineParser;e=(e=this.$13.customRepresentationParsers)==null?void 0:e.initializationBinary;e=e?e(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$14,a,{baseUrl:f,mpdUrl:b,isStaticMpd:this.$15.manifestType==="static",isTemplatedMpd:this.$15.manifestIsTemplated},g,e)};b.onError=function(a){return this.$9.onError(a)};b.parseInitSegment=function(){return this.$18().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeType=function(){var a;return(a=(a=this.$1.$.mimeType)!=null?a:this.$4)!=null?a:""};b.parseCodecs=function(){var a;return(a=(a=this.$1.$.codecs)!=null?a:this.$5)!=null?a:""};b.parseVariantKey=function(){return this.$6};b.parseLang=function(){return this.$7};b.parseRole=function(){return this.$8};b.parseSegmentsContainer=function(){return this.$18().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$13.customRepresentationParsers?this.$13.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$13.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzApplicationRepresentationParser$p_1=c;b.$OzApplicationRepresentationParser$p_3=e;return b}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.parse=function(){var a=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzAudioRepresentation$p_1=d;b.$OzAudioRepresentation$p_2=l;b.$OzAudioRepresentation$p_3={id:d,displayLabel:b.getDisplayLabel(),mimeCodecs:b.getMimeCodecs(),variantKey:g,lang:h,role:i};return b}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation$p_2/a).toFixed(1)+"Kbps"};c.getDisplayLabel=function(){var b=a.prototype.getLang.call(this),c=a.prototype.getRole.call(this);b=b==null?"Default":b;return c==null?b:b+" - "+c};c.getAudioTrack=function(){return this.$OzAudioRepresentation$p_3};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzAudioRepresentationParser$p_1=c;b.$OzAudioRepresentationParser$p_3=e;return b}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)||this;b.$OzVideoRepresentationParser$p_1=c;b.$OzVideoRepresentationParser$p_2=d;b.$OzVideoRepresentationParser$p_3=e;return b}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),d=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});b=b.getNumber("live_audio_ibr_bandwidth_percentage");b=e*b;for(var f=a.length-1;f>=0;f--)if(a[f].getBandwidth()<=b){d.getOperationLogger("audio_ibr_success").setRepresentationID(a[f].getID()).setReason(e.toString()).log();return a[f]}d.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log();return null};g.getInitialAudioRepresentation=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.blockedRepresentationsManager,d=a.config,e=a.drmManager,f=a.enableAlternativeAudioTracks,g=a.initialRepresentationIDs,h=a.networkManager,i=a.ozParserContext,j=a.perfLoggerProvider;a=a.useManagedMediaSource;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=d;this.$1=h;this.$3=j;this.$4=i;this.$6=e;this.$7=g!=null?g:[];this.$8=b!=null?b:null;this.$9=f;this.$10=a!=null?a:!1;this.$11=!0}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=this,e=[];a=a;var f=this.$4.createXmlParser().parse(a);f=f.MPD&&f.MPD.length>0?f.MPD[0]:null;if(!f){var g=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(g,a.length)+"/"+a.length+"): "+a.substring(0,g)})}g=f.Period&&f.Period.length>0?f.Period[0]:null;if(!g){var h=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(h,a.length)+"/"+a.length+"): "+a.substring(0,h)})}a=g.AdaptationSet||[];h=this.$12(f);this.$11=h==="static";g=this.$13(f);var i=this.$14(this.$15(a,"video"),{manifestType:h,manifestIsTemplated:g},e),j;this.$9?j=this.$16(this.$15(a,"audio"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}):j=this.$17(this.$18(a,"audio"),c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var k=[];if(this.$5.getBool("vtt_caption_representation")){a=this.$15(a,"application");k=this.$17(a[0],c("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e)}a=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(f,i,j,k,a,this.$19(f),this.$4.customParsers||new Map(),this.$11);if(this.$6){g=this.$6;g.startEME(i,j)}e.forEach(function(a){a.onError(b.$2.emitError)});return h};b.$19=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$12=function(a){return a.$.type||"static"};b.$13=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$18=function(a,b){return a.find(this.$20(b))};b.$15=function(a,b){return a.filter(this.$20(b))};b.$20=function(a){return function(b){if(b.$.mimeType!=null)return b.$.mimeType.indexOf(a)!==-1;b=b.Representation;return b&&b.length>0&&b[0].$.mimeType.indexOf(a)!==-1}};b.$17=function(a,b,c,d){var e=this;if(!a)return[];var f=a.Role;f=f!=null?f:[];f=f[0];var g=f?f.$.value:null;f=a.$.lang;var h=f==="und"?null:f;f=a.$.FBVariantKey;var i=f==="und"?null:f!=null?f:null;return a.Representation.map(function(f){f=new b(e.$5,f,(f=f.ContentProtection)!=null?f:a.ContentProtection,e.$4,e.$1,e.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,h,g,e.$7,e.$8);var j=f.parse();d.push(f);return j})};b.$21=function(a){return this.$10?ManagedMediaSource.isTypeSupported(a):MediaSource.isTypeSupported(a)};b.$14=function(a,b,d){var e=this,f=[],g=new Set();a.filter(Boolean).forEach(function(a,h,i){h=h===i.length-1;for(i of a.Representation){var j,k;if((j=i.$.FBAbrPolicyTags)!=null&&j.includes("avoid_on_abr")&&!h)continue;j=a.Role;j=j!=null?j:[];j=j[0];j=j?j.$.value:null;var l=a.$.lang;l=l==="und"?null:l;var m=a.$.FBVariantKey;m=m==="und"?null:m!=null?m:null;k=new(c("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,i,(k=i.ContentProtection)!=null?k:a.ContentProtection,e.$4,e.$1,e.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,m,l,j,e.$7,e.$8);m=k.parse();d.push(k);if(!e.$21(m.getMimeCodecs())){g.add(m.getMimeCodecs());continue}f.push(m)}});return f.filter(Boolean)};b.$16=function(a,b,e){var f=this,g=[],h=new Set();a=a.filter(Boolean).map(function(a){var d=a.Role;d=d!=null?d:[];d=d[0];d=d?d.$.value:null;var g=a.$.lang;g=g==="und"?null:g;var i=a.$.FBVariantKey;i=i==="und"?null:i!=null?i:null;var j=[];for(var k of a.Representation){var l;l=new(c("oz-player/parsers/OzAudioRepresentationParser"))(f.$5,k,(l=k.ContentProtection)!=null?l:a.ContentProtection,f.$4,f.$1,f.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,g,d,f.$7);var m=l.parse();e.push(l);if(!f.$21(m.getMimeCodecs())){h.add(m.getMimeCodecs());continue}j.push(m)}return j});a.forEach(function(a){if(a.length>1){var b=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,f.$5,f.$3);g.push(b!=null?b:a[0])}else g.push.apply(g,a)});return g.filter(Boolean)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker$p_4=0;d.$OzStreamInterruptChecker$p_5=null;d.$OzStreamInterruptChecker$p_6=!1;d.$OzStreamInterruptChecker$p_2=b;d.$OzStreamInterruptChecker$p_3=c;d.$OzStreamInterruptChecker$p_1=d.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon");return d}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),b=a?a.endTime:null,c=!1;b!==null&&(c=b===this.$OzStreamInterruptChecker$p_5);c?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker$p_6=!1);c=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&c>0&&this.$OzStreamInterruptChecker$p_4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker$p_6=!0);this.$OzStreamInterruptChecker$p_5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,e,f,g,h,i,j,k,l){var m;m=a.call(this)||this;m.$OzMpdUpdater$p_8=new(c("oz-player/utils/OzErrorEmitter"))();m.$OzMpdUpdater$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();m.$OzMpdUpdater$p_11=!1;m.$OzMpdUpdater$p_16=0;m.$OzMpdUpdater$p_18=0;m.$OzMpdUpdater$p_19=null;m.$OzMpdUpdater$p_21=!0;m.$OzMpdUpdater$p_22=0;m.$OzMpdUpdater$p_26=function(){var a,b=m.$OzMpdUpdater$p_2.getLocation();m.$OzMpdUpdater$p_21=!1;if(b==null||b==="")return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=(a=e.getQueryData().ms)!=null?a:e.getQueryData().msdev)!=null?a:e.getQueryData().mstest);if(!m.$OzMpdUpdater$p_12.isPlaying()){m.setupUpdateLoop();return}var g=m.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();m.$OzMpdUpdater$p_28(b).then(function(a){var e,h;m.$OzMpdUpdater$p_18=0;m.$OzMpdUpdater$p_29();m.$OzMpdUpdater$p_7=0;if(m.$OzMpdUpdater$p_21)return;var i=babelHelpers["extends"]({},m.$OzMpdUpdater$p_13,{mpdUrl:b});i=new(c("oz-player/parsers/OzMpdParser"))({config:m.$OzMpdUpdater$p_6,ozParserContext:i,networkManager:m.$OzMpdUpdater$p_1,perfLoggerProvider:m.$OzMpdUpdater$p_5,drmManager:m.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1,useManagedMediaSource:m.$OzMpdUpdater$p_23});i.onError(function(a){m.$OzMpdUpdater$p_8.emitError(a),g.setError(a).log()});i=i.parse(a);a=m.$OzMpdUpdater$p_2.isStaticMpd();m.$OzMpdUpdater$p_2.updateWith(i);m.$OzMpdUpdater$p_2.markRefreshed();i.isStaticMpd()&&!a&&m.emit("streamTransitionToStatic");i=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6);a=i&&i.endTime!=0?i.endTime:null;i=String((i=(i=m.$OzMpdUpdater$p_2)==null?void 0:i.getCustomField("currentServerTimeMs"))!=null?i:"");e=String((e=(e=m.$OzMpdUpdater$p_2)==null?void 0:e.getCustomField("lastVideoFrameTs"))!=null?e:"");i={currentServerTimeMs:i,ingestLastVideoFrameTs:e,nowMs:String(Date.now())};e=new Set(((e=(e=m.$OzMpdUpdater$p_2)==null?void 0:e.getVideoRepresentations())!=null?e:[]).map(function(a){return a.getCodecs()})).size>1;h=new Set(((h=(h=m.$OzMpdUpdater$p_2)==null?void 0:h.getAudioRepresentations())!=null?h:[]).map(function(a){return a.getCodecs()})).size>1;g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(m.$OzMpdUpdater$p_2)).setManifestType(m.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(e||h).setIsTemplatedManifest(Boolean(m.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).setUserInfo(i).log();m.$OzMpdUpdater$p_9.notifyMpdUpdated();m.setupUpdateLoop()})["catch"](function(a){m.$OzMpdUpdater$p_29();g.setError(a).log();var c=null;if(d("oz-player/utils/OzErrorUtils").isOzError(a))c=a;else{var e,f=null,h="Caught an unknown error when fetching the manifest.";if(a!=null)if(m.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var i=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),j=i[0];i[1];c=j}else e=a,f=e.code!=null?String(e.code):null,h=e.name+"; "+e.message+"; "+e.description+";";if(c==null){i={originalError:e,url:b};f!==null&&(i.code=f);c=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:h,extra:i})}}m.$OzMpdUpdater$p_27(c,b)})};var n=e.getMinimumUpdatePeriod();m.$OzMpdUpdater$p_7=0;m.$OzMpdUpdater$p_1=f;m.$OzMpdUpdater$p_2=e;m.$OzMpdUpdater$p_12=g;m.$OzMpdUpdater$p_3=n;m.$OzMpdUpdater$p_5=h.cloneContext().setType("manifest");m.$OzMpdUpdater$p_6=b;m.$OzMpdUpdater$p_13=i;m.$OzMpdUpdater$p_14=j;m.$OzMpdUpdater$p_15=k;m.$OzMpdUpdater$p_23=l;m.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){m.$OzMpdUpdater$p_24(),m.setupUpdateLoop()});m.$OzMpdUpdater$p_9=new(c("oz-player/utils/OzStreamInterruptChecker"))(m.$OzMpdUpdater$p_2,m.$OzMpdUpdater$p_6);m.$OzMpdUpdater$p_10.addSubscriptions(m.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(a){m.emit("streamResumedAt",a)}),m.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(a){m.emit("streamInterruptAt",a)}));return m}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.$OzMpdUpdater$p_24=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_25(),this.$OzMpdUpdater$p_21=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater$p_11;b&&(b=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());a=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((a=this.$OzMpdUpdater$p_3)!=null?a:0)*1e3;b&&a&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_26,a))};e.onError=function(a){return this.$OzMpdUpdater$p_8.onError(a)};e.$OzMpdUpdater$p_27=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater$p_18-1,e=a.getExtra().code;this.$OzMpdUpdater$p_19!==e?(this.$OzMpdUpdater$p_19=e,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater$p_11=!0,c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:a,isInitialRequest:!1,retry:function(b){c.emit("manifestFetchErrorRetry",a),f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater$p_8.emitError(a)};e.$OzMpdUpdater$p_30=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater$p_31=function(a){if(!this.$OzMpdUpdater$p_15)return a;a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++);return a.toString()};e.$OzMpdUpdater$p_28=function(a){this.$OzMpdUpdater$p_25();this.$OzMpdUpdater$p_18++;var b=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater$p_30(a,b);a=this.$OzMpdUpdater$p_31(a);b=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:a,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now();this.$OzMpdUpdater$p_20=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater$p_25=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_29()};e.$OzMpdUpdater$p_29=function(){this.$OzMpdUpdater$p_20=null};e.destroy=function(){this.$OzMpdUpdater$p_4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(a,b,c,d,e,f,g){"use strict";g.createTrustedHTMLForDOMParser=d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),c=d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(a);c=this.$1.parseFromString(c,"application/xml");var e=c.querySelector("parsererror");if(e){var f=e.querySelector("h3");f=f?f.nextElementSibling:null;f=f?f.innerHTML:e.innerHTML;e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(f).trim()+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{}})}f=c.documentElement;f!=null&&(b[f.nodeName]=[i(f)]);return b}catch(b){if(d("oz-player/utils/OzErrorUtils").isOzError(b))throw b;else{e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(b)+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return(b=this.$8)!=null?b:a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)};b.$15=function(a){this.$7=!0;return this.$8!=null?!0:a.call(this.$1)};b.$16=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);e.push(d)});var f=c("oz-player/shims/OzMaybeNativePromise").all(e);f.then(function(){d.resolve()})["catch"](function(a){d.reject(a)});return d.getPromise()};b.$14=function(a){var b=this,e=this.$9.length>0?this.$9[0]:null,f=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(e){var g=e.t;e=this.$1.buffered;var h=e.length,i=e.length<=0,j=-1,k=!1;for(var l=0;j<0&&l<h;++l)j=g-f>=e.start(l)&&g+f<e.end(l)?l:j,k=g<e.start(l)-f;l=j>-1;var m=this.$2.getNumber("clear_buffer_on_seek_nudge_s");l&&j>=0&&j<h&&m>0&&(g=Math.min(g,e.end(j)-m),g=Math.max(g,e.start(j)+m));if(i||l||!k)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("no_clear").log(),a.call(this.$1,g),this.$9.shift(),this.$14(a);else{var n=null;this.$11&&(n=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(g*1e3)).setUserInfo({bufferRangesLength:String(h),nudgeSec:String(m)}).start());j=this.$16(Math.max(g-f,0),e.end(h-1)+f);j.then(function(){n&&n.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("after_clear").log(),a.call(b.$1,g),b.$9.shift(),b.$14(a)})["catch"](function(a){n&&n.setError(a).log(),b.$3.emitError(d("oz-player/utils/OzErrorUtils").isOzError(a)?a:d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a=this,b=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");b=b!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");var c=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");c=c!=null?c:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var d=b&&typeof b.get==="function"?b.get:null,e=b&&typeof b.set==="function"?b.set:null,f=c&&typeof c.get==="function"?c.get:null;if(d&&e&&f&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return a.$12(d)},set:function(b){a.$13(e,b)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return a.$15(f)},configurable:!0,enumerable:!0});b=this.$1.currentTime;this.$1.currentTime=b;this.$1.seeking}catch(a){}this.$17(function(){a.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(a.$1,"currentTime",{get:d,set:e,configurable:!0,enumerable:!0}),a.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(a.$1,"seeking",{get:f,configurable:!0,enumerable:!0})})}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=[],this.$2=a,this.$3=b}var b=a.prototype;b.addSample=function(a){var b,c=Math.floor(Date.now()/(1e3*this.$3)),d=c%this.$2;((b=this.$1[d])==null?void 0:b.bucketNumber)!=c&&(this.$1[d]={bucketNumber:0,val:null});this.$1[d]={bucketNumber:c,val:Math.min(a,(b=this.$1[d].val)!=null?b:a)}};b.min=function(){var a=this,b=Date.now(),d=this.$1.filter(function(c){return c!=null&&c.val!=null&&b-a.$2*1e3*a.$3<c.bucketNumber*1e3*a.$3});if(d.length<this.$2)return null;d=d.reduce(function(a,b){if(a==null)return b;var d=b.val;d!=null||c("oz-player/shims/ozvariant")(0,56011);var e=a.val;e!=null||c("oz-player/shims/ozvariant")(0,56011);return d<e?b:a},null);return(d=d)==null?void 0:d.val};b.reset=function(){this.$1=[]};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$8=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$9=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video,i=a.loggerProvider;a=a.getUserSelectedPlaybackRate;this.$1=d;this.$2=e;this.$3=f;this.$15=a;d.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(c("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec")));g!=null&&(this.$8.addSubscriptions(g.addListener("enterBuffering",function(a){if(a==="in_play"){b.$9=0;(a=b.$7)==null||a.reset()}b.$10=!1;(a=b.$6)==null||a.log();b.$6=null})),this.$8.addSubscriptions(g.addListener("leaveBuffering",function(){b.$9===0&&(b.$9=Date.now()),b.$10=!1})));this.$4=h;this.$5=i;if(this.$16()){this.$8.addSubscriptions((e=c("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$17(),b.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),e.listenDOMEvent(this.$4,"waiting",function(){b.$17()}),e.listenDOMEvent(this.$4,"durationchange",function(){b.$17()}),e.listenDOMEvent(this.$4,"seeking",function(){var a;b.$13=Date.now();b.$11=null;(a=b.$7)==null||a.reset()}),e.listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}),e.listenDOMEvent(h,"pause",function(){var a;return(a=b.$7)==null?void 0:a.reset()}))}}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a===0||this.$9==null||this.$9!==0&&this.$9+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$20=function(){var a;a=(a=this.$7)==null?void 0:a.min();return!this.$21()&&a!=null&&a>this.$1.getNumber("steadystate_minbuffer_sec")};b.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a,b=this.$22();return(b==null||(a=b.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");a=this.$23(a);this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(a*1e3);return a};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnableCatchup=function(a){var b=this.$14;!this.$14&&a===!0&&(this.$9=null);this.$14=a;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&a!==b&&this.$18()};b.$24=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)};b.$17=function(){var a,b=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(a=this.$7)==null||a.addSample(b)};b.$18=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;this.$25(b,a)};b.$25=function(a,b){var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),d=this.$1.getNumber("playback_speed_min_buffer_sec");a>d&&(this.$10=!0);var e=this.$1.getNumber("playback_speed_min_duration_sec"),f=this.$1.getNumber("playback_speed_restore_min_duration_sec"),g=this.$1.getNumber("playback_speed_latency_adjustment_rate"),h=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var j;(j=this.$6)==null||j.log();this.$6=null}else if(this.$14&&this.$10&&a<d&&(g>0||h>0)&&b===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){j=h>0?1-h:this.$24(g,d,a);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(j),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(j)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&i>0&&b===0&&(this.$12==null||this.$12+f*1e3<Date.now())&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){h=1+i;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(h),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(h)}else if(this.$14===!1||this.$11==null||this.$11+e*1e3<Date.now()){g=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1;(d=this.$6)==null||d.log();this.$6=null;g!==this.$4.playbackRate&&(this.$12=Date.now())}};b.$26=function(a){try{this.$4.playbackRate=a,this.$11=Date.now()}catch(b){(a=this.$6)==null||a.setError(b).setResult("failed").log();this.$6=null}};b.$22=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$23=function(a){var b,c;if(a<=0)return a;var d=this.$22(),e=d==null||(b=d.getEndingSegment())==null?void 0:b.getTimeRange();if(!e)return a;d=d==null||(c=d.getSegmentByTime((e==null?void 0:e.endTime)-a))==null?void 0:c.getTimeRange();return!d?a:(e==null?void 0:e.endTime)-(d==null?void 0:d.startTime)};b.destroy=function(){this.$8.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_4=new Set();e.$OzPlayheadManager$p_10=new Set();e.$OzPlayheadManager$p_12=function(a){e.$OzPlayheadManager$p_1.currentTime=a};e.$OzPlayheadManager$p_14=!1;e.$OzPlayheadManager$p_15=!1;e.$OzPlayheadManager$p_16=!0;e.$OzPlayheadManager$p_17=!1;e.$OzPlayheadManager$p_23=function(a,b){b===void 0&&(b=null);if(e.$OzPlayheadManager$p_20!=null?!e.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup():!1)return;var c=e.$OzPlayheadManager$p_9;if(c&&c.isEnabled(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8)){c=c.computeNewPlayheadPosition(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8);if(typeof c==="number"){e.$OzPlayheadManager$p_27(c,"live_catch_up_strategy",a,b);return}}c=e.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(c===0)return;var f=e.$OzPlayheadManager$p_5;if(!f)return;var g=e.$OzPlayheadManager$p_7.getCurrentTime(),h=f.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),i=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,h);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6))&&i!==-1){g=h[i];e.$OzPlayheadManager$p_27(g.rangeStart+c,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,j=b.playheadCatchup,k=b.playbackState,l=b.config,m=b.perfLoggerProvider,n=b.seekHandler,o=b.initialPlaybackPosition,p=b.canSupportSkipVideobufferGaps,q=b.liveLatencyManager;b=b.dynamicVideoLibrary;e.$OzPlayheadManager$p_1=f;e.$OzPlayheadManager$p_6=l;e.$OzPlayheadManager$p_7=k;e.$OzPlayheadManager$p_8=g;e.$OzPlayheadManager$p_9=j;e.$OzPlayheadManager$p_11=m;n&&(e.$OzPlayheadManager$p_12=n);e.$OzPlayheadManager$p_17=p;e.$OzPlayheadManager$p_20=q;e.$OzPlayheadManager$p_13=o;e.$OzPlayheadManager$p_21=b;e.$OzPlayheadManager$p_18=new i({video:f,perfLoggerProvider:m});e.$OzPlayheadManager$p_19=new h({video:f,perfLoggerProvider:m,config:l});e.$OzPlayheadManager$p_2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"durationchange",function(){e.setPlaybackPositionOnFirstDurationChange("durationchange",e.$OzPlayheadManager$p_1.duration),e.$OzPlayheadManager$p_23("durationchange"),e.$OzPlayheadManager$p_24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"pause",function(){e.$OzPlayheadManager$p_23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"play",function(){e.$OzPlayheadManager$p_23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"playing",function(){e.$OzPlayheadManager$p_23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"waiting",function(){e.$OzPlayheadManager$p_23.bind(e,"waiting"),e.$OzPlayheadManager$p_24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager$p_23("timeupdate"),e.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&e.$OzPlayheadManager$p_24("timeupdate")},e.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"seeking",function(){e.$OzPlayheadManager$p_22=Date.now()}));return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0};e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager$p_4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager$p_4.add(a);this.$OzPlayheadManager$p_2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager$p_26(a,b),d.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager$p_17&&d.$OzPlayheadManager$p_24("buffer_updated")}))};e.$OzPlayheadManager$p_26=function(a,b){var c=[];this.$OzPlayheadManager$p_4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager$p_10.add(a);a=this.$OzPlayheadManager$p_1.currentTime;a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager$p_3.release();this.$OzPlayheadManager$p_3.engage();this.$OzPlayheadManager$p_3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager$p_23("time_range_updated")}));this.$OzPlayheadManager$p_5=a;this.$OzPlayheadManager$p_23("time_range_set")};e.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)};e.setPlaybackPositionOnFirstDurationChange=function(a,b){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:b+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var c;b=(c=this.$OzPlayheadManager$p_20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager$p_15=!0;if(this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager$p_5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager$p_27(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager$p_24=function(a){var b,c,e=this;if(!this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps"))return;if(!this.$OzPlayheadManager$p_17)return;var f=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(f===0)return;var g=this.$OzPlayheadManager$p_7.getCurrentTime(),h=[];for(var i=0;i<this.$OzPlayheadManager$p_1.buffered.length;i++)h.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(i),endTime:this.$OzPlayheadManager$p_1.buffered.end(i)});i=h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(a,this.$OzPlayheadManager$p_7);var j=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,i),k=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,i),l=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),m=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),n=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager$p_21)==null?void 0:b.getLastSegmentStartPTS();var o=b!=null?b/1e3:null,p=(c=this.$OzPlayheadManager$p_21)==null?void 0:c.getLast200RequestedUrlDecisionMinTime();c=o!=null?d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,o,i):-1;var q=c>=0?i[c]:null,r=function(b){var c=e.$OzPlayheadManager$p_22==null||p==null||e.$OzPlayheadManager$p_22<p;!c&&b!=null&&e.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+b).setResult("failed").setInitiator(a).setUserInfo({last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(e.$OzPlayheadManager$p_22)}).log();return c};if(o!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&r("buf")){if(o<g&&q!=null&&q.rangeStart<=o&&q.rangeEnd!=null&&q.rangeEnd>o){this.$OzPlayheadManager$p_27(o,"reverse_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(q!=null&&c!=k){this.$OzPlayheadManager$p_27(q.rangeStart,"jump_over_buffer_gap_last_dl_range",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,h,this.$OzPlayheadManager$p_6,n,m)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,h,this.$OzPlayheadManager$p_6,n))&&j!==-1&&(l===0||i[j].rangeStart-g<l)&&(this.$OzPlayheadManager$p_16==!0||r("main"))){o=i[j];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&o.rangeStart!==0&&o.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(o.rangeStart+f,"jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(a,{nextBufferedRangeIndex:String(j),limitMaxGapSize:String(l),rangeStart:j!==-1?String(i[j].rangeStart):null,isNearGapThreshold:String(m),numericalError:String(n)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager$p_16=a};e.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()};e.$OzPlayheadManager$p_27=function(a,b,c,d,e){var f=a-this.$OzPlayheadManager$p_1.currentTime,g=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");if(g>0&&Math.abs(f)<=g)return;this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(a*1e3)).setReason(b).setInitiator(c).setType(d).setUserInfo(babelHelpers["extends"]({},e,{seekAdjustment:String(Math.round(f*1e3))})).log();this.$OzPlayheadManager$p_12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=function(){f.$3.getOperationLogger("pause").setState("paused").log()};this.$5=function(){f.$3.getOperationLogger("playing").setState("playing").log()};this.$1=b;this.$3=e;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$1.currentTime};b.getCurrentTimeUpdateTime=function(){return Date.now()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}function b(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}f.determinePositionIndexOfVideoFromViewportVertically=a;f.intersectionObserverEntryIsIntersecting=b}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker$p_1=[];c.$OzPositionToViewportTracker$p_5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker$p_1.find(function(b){return a.target===b.video});b!=null&&(d("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(a)?b.position=c.$OzPositionToViewportTracker$p_7(a):c.$OzPositionToViewportTracker$p_1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker$p_1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker$p_6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker$p_2=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.$OzPositionToViewportTracker$p_4=function(){if(this.$OzPositionToViewportTracker$p_3!=null)return;this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker$p_1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker$p_1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker$p_6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker$p_1,i)};c.$OzPositionToViewportTracker$p_7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker$p_1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker$p_3!=null?b.$OzPositionToViewportTracker$p_3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker$p_1=c;this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport$p_3=b;e.$OzPositionToViewport$p_2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport$p_2.registerVideo(b);e.$OzPositionToViewport$p_1.addSubscriptions(e.$OzPositionToViewport$p_2.addListener("state_changed",function(){e.emit("state_changed")}));return e}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1};d.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f){f=Math.min(1,c/d);c=1+(1-f)*e;d=a.getBandwidth()*c;return d>b?g*(b/d):1-(1-g)*d/b}f.getPlaybackConfidence=a}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$15(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h,this.$14=i,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:c.map(function(a){return a.getID()}).join(","),newCodecs:c.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:c.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzAbrManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$16=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(a,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){var b;a=(a=a==null?void 0:a.length)!=null?a:null;b=(b=(b=this.$9)==null?void 0:b.getSourceBufferState().getBufferedRanges())!=null?b:null;var e=this.$8.getCurrentTime();e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,b);b=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!=null){this.$10=b;this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}b=Date.now();this.$2=b;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$16(this.$6);f=this.$17(g,f,e,a);a=g[0];f=f||a;if(this.$18(e,f)){this.$10="high_buffer";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}a=this.$5;a!==f&&(this.$4=!0,this.$3=b,this.$5=f);this.$10="bandwidth";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setRepresentationID(f.getID()).setPreviousRepresentationID(a==null?void 0:a.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return f};b.$17=function(a,b,c,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],b,c,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),e);h>this.$1.getNumber("abr_confidence_threshold")&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this,c=this.$6;this.$6=a;var d=this.$6.find(function(a){return a.getDisplayLabel()===b.$5.getDisplayLabel()}),e=this.$5;this.$5=d!=null?d:this.$6[0];this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:c.map(function(a){return a.getID()}).join(","),newRepresentationIds:a.map(function(a){return a.getID()}).join(","),newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(e==null?void 0:e.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$2=new Map(),this.$3=new Set(),this.$4=new Set(),this.$5=new(c("oz-player/shims/OzEventEmitter"))(),this.$6=b===!0,this.$7(a),this.$8(a)}var b=a.prototype;b.isBlocked=function(a){return this.$3.has(a)};b.handleError=function(a,b){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(d("oz-player/utils/OzErrorUtils").isOzError(b)&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$2.has(b)){this.$3.has(a)||this.$9(a,b);return!0}}return!1};b.$9=function(a,b){var d,e=this;this.$3.add(a);(d=this.$5)==null||d.emit("representation_blocked",a);d=this.$2.get(b)||0;if(d>0){var f=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$3["delete"](a),e.$4["delete"](f)},d);this.$4.add(f)}};b.applyRestriction=function(a){var b=this;return a.filter(function(a){return!b.$3.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$5?this.$5.addListener("representation_blocked",a):{remove:function(){}}};b.setAvailableRepresentationsCount=function(a){this.$1=a};b.destroy=function(){var a;(a=this.$5)==null||a.removeAllListeners();this.$5=null;for(a of this.$4)c("oz-player/shims/ozClearTimeout")(a);this.$4.clear()};b.$7=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_json"));if(Array.isArray(a)){a.forEach(function(a){a=parseInt(a,10);isNaN(a)||b.$2.set(a,-1)});if(this.$6)for(a=500;a<=599;a++)this.$2.set(a,-1)}}catch(a){}};b.$8=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_temporarily_json"));Object.entries(a).forEach(function(a){var c=a[0];a=a[1];c=parseInt(c,10);a=parseInt(a,10);!isNaN(c)&&!isNaN(a)&&b.$2.set(c,a)})}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy$p_5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy$p_4=b;e.$OzBufferAheadPriorityStrategy$p_1=d;e.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)),e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)));return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy$p_2)return;this.$OzBufferAheadPriorityStrategy$p_2=a;this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy$p_2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b of this.$2)if(b.isActive()){a=b.getBufferTarget();break}for(b of this.$3)a=b.adjustBufferTargetInSeconds(a);this.$1=a;return a};b.handleEvent=function(a){for(var b of this.$3)b.handleEvent(a)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.config;a=a.minimumBufferTargetSec;this.$2=1;this.$1=b;this.$3=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){var b;return Math.max((b=this.$3)!=null?b:this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2)};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector$p_2=null;e.$OzPlayheadAtInterruptionDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector$p_4=null;e.$OzPlayheadAtInterruptionDetector$p_1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector$p_5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector$p_5()});e.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector$p_4=d;return e}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector$p_2=a,this.$OzPlayheadAtInterruptionDetector$p_5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null};d.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var a=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy$p_3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy$p_2=b;d.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy$p_3));return d}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy$p_4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy$p_2=b;e.$OzPositionToViewportPriorityStrategy$p_1=d;e.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy$p_4));return e}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator$p_1=b;(b=d.$OzPriorityCalculator$p_2).addSubscriptions.apply(b,d.$OzPriorityCalculator$p_1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator$p_1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator$p_1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator$p_2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Set(a.map(function(a){return g(a)})),c="av01",d=b.has(c)?c:b.values().next().value;return d==null?a.slice():a.filter(function(a){return g(a)===d})};return a}();function g(a){return a.getMimeCodecs().replace(/\..*$/,"")}f["default"]=a}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e of this.$1)e.isActive(a)&&(d=Math.min(d,e.getSegmentsCount(a,b,c)));return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a){var b=this;return a.filter(function(a){a=b.$1?ManagedMediaSource.isTypeSupported(a.getMimeCodecs()):MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher$p_1=new Map();d.$OzEndOfStreamWatcher$p_4=!1;d.$OzEndOfStreamWatcher$p_2=b;d.$OzEndOfStreamWatcher$p_3=c;return d}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.get(a)===!0&&this.$OzEndOfStreamWatcher$p_1.set(a,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")};d.notifyMediaStreamEnded=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(a,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+b)};d.$OzEndOfStreamWatcher$p_5=function(a,b){var c=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var d=this.$OzEndOfStreamWatcher$p_2.getReadyState();d==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(a,b).then(function(){c.emit("streamEnd")})["catch"](function(){c.emit("streamEnd")})};d.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var a of this.$OzEndOfStreamWatcher$p_1.values())if(!a)return!1;return!0};d.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;this.$8=g;f.then(function(a){h.$5=a},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch SBM promise then - create")});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){h.$9(a,b)}))}var b=a.prototype;b.destroy=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$9=function(a,b){if(a!=="user")return;a=this.$5;if(a==null)return;var d=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),e;for(var f=0;f<this.$4.length;f++)this.$4[f].getID()===d&&(e=this.$4[f]);if(e&&b&&(this.$8||e.getBandwidth()<b.getBandwidth())){d=e.getSegmentByTime(this.$3.getCurrentTime());d&&a.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}};return a}();g["default"]=a}),98);
__d("oz-player/manifests/IOzSegment",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return((a==null?void 0:a.getSequenceNumber())||0)===((b==null?void 0:b.getSequenceNumber())||0)}function b(a,b){return((a==null?void 0:a.getSequenceNumber())||0)>=((b==null?void 0:b.getSequenceNumber())||0)}f.isSequenceNumberEqual=a;f.isSequenceNumberGreaterOrEqual=b}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b,c){var d;c===void 0&&(c=null);d=a.call(this)||this;d.$OzReadableStreamDataReader$p_1=[];d.$OzReadableStreamDataReader$p_3=Infinity;d.$OzReadableStreamDataReader$p_4=0;d.$OzReadableStreamDataReader$p_2=b;if(c!=null){b=c.getNumber("stream_reader_max_buffer_len");d.$OzReadableStreamDataReader$p_3=b>0?b:Infinity}return d}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.onDataWritten=function(a){if(this.$OzReadableStreamDataReader$p_4+a.byteLength>=this.$OzReadableStreamDataReader$p_3){var b=c("oz-player/utils/ozConcatUint8Arrays")(this.$OzReadableStreamDataReader$p_1);b=b.buffer;this.$OzReadableStreamDataReader$p_2(b);this.$OzReadableStreamDataReader$p_1.length=0;this.$OzReadableStreamDataReader$p_4=0}this.$OzReadableStreamDataReader$p_1.push(a);this.$OzReadableStreamDataReader$p_4+=a.byteLength};d.onClose=function(){var a=this.$OzReadableStreamDataReader$p_1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader$p_4=0;this.$OzReadableStreamDataReader$p_2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var b=a.prototype;b.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})}this.$2.resolve();return a};b.getPromise=function(){return this.$3.getPromise()};b.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};b.finish=function(){this.$3.resolve()};b.isCancelled=function(){return this.$5};b.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){if(a){var b=a.pausableStream;return b.pauseStream()}},getStatusChangePromise:function(){return d.getPromise()}}};b.$10=function(a){var b=this,e=a.createStreamResult,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));k.getPromise()["catch"](function(){});a.then(function(){if(e){var a=e.pausableStream;e.loggingPayloads&&(i=e.loggingPayloads);g.resolve(a.getStream());b.$4=a;var f=c("oz-player/shims/OzPerformance").now(),k=b.$11(a.startStream());if(h){var l=function(c){var e=i;if(e){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(c,e.getRequestUrl(),e.segments,f-j,a.getBytesStreamed(),e.getResponse());var g=b.$9;g&&g(c,e.getRequestUrl(),e.getResponse())}};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(k,h,"fetch_stream",l,l)}return k}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),k.reject(a),f.reject(a)})};b.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){var d=this;b=b;b=this.$6(b);var e=this.$5.get(a);if(e===b)return;this.$5.has(a)&&this.remove(a);e=this.$7(b);var f=this.$4[e];f&&f.priority===b||(f={priority:b,queue:[]},this.$4.splice(e,0,f));this.$5.set(a,b);f.queue.push(a);a.getPromise().then(function(){d.remove(a)},function(){d.remove(a)})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzRoundRobinPriorityTaskQueue remove after task run")});this.$3(a,b>=this.$1?"immediate":"normal")};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};b.remove=function(a){var b=this.$5.get(a);if(b!==void 0){b=this.$7(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$7=function(a){a=a;a=this.$6(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$6=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});b["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzSequentialTaskScheduler task complete")});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes,i=a.config;a=a.bandwidthEstimator;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=i;this.$11=a!=null?a:null;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$12(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.$13=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5,this.$11));return a};e.startStreamDeferred=function(a){var b=a.debugName,c=a.segments,d=a.networkManager,e=a.segmentsLoggerProvider,f=a.mediaStreamType,g=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;var h=this.$14(e),i=this.$13();c.length>0?d=d.createPausableStream({debugName:b,segments:c,pipeThroughRangeStreamProviders:i,loggerProvider:e,mediaStreamType:f,dataAppendedCallback:g,dataAppendedErrorCallback:a}):d=null;this.$9=!0;b=h.addStreamDeferred(d,e);return{genStream:b.genStream,cancel:b.cancel,getStatusChangePromise:this.$15(b.getStatusChangePromise)}};e.$14=function(a){var b=this.$2;this.$12(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)):this.$6.updatePriority(b,this.$4);return b};e.$15=function(a){var c=this;return function(){return a().then(function(a){c.$16();return a})["catch"](function(a){c.$16();return(h||(h=b("Promise"))).reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$17()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$16=function(){this.$9=!1,this.$12(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$17()};e.$17=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$12=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null||a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null||a.setError(b);(a=d.$5)==null||a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null||a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();return b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,h,j){h=a.getPredictedSegmentAfter(g);if(h&&b.isPlaying())return h;j=i(b,e,g);h=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),j,h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);g&&g.getTimeRange().startTime>j&&(j=g.getTimeRange().startTime);return a.getSegmentByTime(j)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function b(a,b){var d=new(c("oz-player/manifests/OzSegmentOptions"))();return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},getOptions:function(){return d}})}function d(a){a.getOptions().setSegmentNumDecisionTime(Date.now());return a}g.getMaxSegment=a;g.getSegmentForSequenceNumber=b;g.markSegmentCreateTime=d}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2,j={AUDIO:1,CAPTION:3,VIDEO:0};a=function(a){function b(b){var e;e=a.call(this)||this;e.$OzMediaStream$p_2=0;e.$OzMediaStream$p_3=0;e.$OzMediaStream$p_4=null;e.$OzMediaStream$p_13=null;e.$OzMediaStream$p_15=!1;e.$OzMediaStream$p_16=null;e.$OzMediaStream$p_17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream$p_19=[];e.$OzMediaStream$p_22=0;e.$OzMediaStream$p_29=!0;e.$OzMediaStream$p_31=!1;e.$OzMediaStream$p_32=null;e.$OzMediaStream$p_33=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream$p_35=!0;e.$OzMediaStream$p_38=0;e.$OzMediaStream$p_39=null;e.$OzMediaStream$p_40=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.networkManager,i=b.playbackState,j=b.endOfStreamWatcher,k=b.bufferTargetCalculator,l=b.priorityCalculator,m=b.streamSegmentsCountCalculator,n=b.abrManager,o=b.representation,p=b.loggerProvider,q=b.segmentLocator,r=b.setCustomFetchStreamLoggingAttributes,s=b.blockedRepresentationsManager,t=b.dynamicVideoLibrary,u=b.shouldAppendOncePerStream,v=b.mediaStreamType,w=b.warningEmitter;b=b.mpd;e.$OzMediaStream$p_1=f;e.$OzMediaStream$p_5=g;e.$OzMediaStream$p_5.then(function(a){e.$OzMediaStream$p_6=a,e.$OzMediaStream$p_16&&e.$OzMediaStream$p_16.setSourceBuffer(a),e.$OzMediaStream$p_27.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream$p_47()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - create")});e.$OzMediaStream$p_12=h;e.$OzMediaStream$p_7=i;e.$OzMediaStream$p_14=j;(f=e.$OzMediaStream$p_14)==null||f.registerMediaStream(e);e.$OzMediaStream$p_26=k;e.$OzMediaStream$p_27=l;e.$OzMediaStream$p_28=m;e.$OzMediaStream$p_16=n;e.$OzMediaStream$p_18=p.cloneContext();e.$OzMediaStream$p_36=q;e.$OzMediaStream$p_25=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream$p_39=r;e.$OzMediaStream$p_40=s;e.$OzMediaStream$p_42=t;e.$OzMediaStream$p_43=u;e.$OzMediaStream$p_44=v;e.$OzMediaStream$p_45=w;e.$OzMediaStream$p_46=b;e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_7.addEventListener("seeking",function(){var a=i.getCurrentTime(),b=null;e.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream$p_8.canPredict()&&(e.$OzMediaStream$p_6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0:!1)?b="no_reset_anchor":(b="reset_anchor",e.$OzMediaStream$p_41=Date.now(),e.$OzMediaStream$p_9!=null&&(e.$OzMediaStream$p_48(),e.$OzMediaStream$p_31=!1,e.$OzMediaStream$p_24&&e.$OzMediaStream$p_24.resolve()));e.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(a*1e3).setReason(b).setUserInfo({streamAnchorSegmentNumber:String((a=e.$OzMediaStream$p_9)==null?void 0:a.getSequenceNumber())}).log()}));e.$OzMediaStream$p_40!=null&&e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_40.onRepresentationBlocked(function(a){return e.$OzMediaStream$p_49(a)}));e.$OzMediaStream$p_21=d("oz-player/utils/OzMimeUtil").getMimeType(o.getMimeCodecs());e.$OzMediaStream$p_30=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream$p_21,priorityCalculator:e.$OzMediaStream$p_27,loggerProvider:e.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream$p_39,config:e.$OzMediaStream$p_1,bandwidthEstimator:e.$OzMediaStream$p_12.getBandwidthEstimator()});e.$OzMediaStream$p_23=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(e,e.$OzMediaStream$p_18);e.$OzMediaStream$p_50(o);return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.start=function(){this.$OzMediaStream$p_23.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8};e.switchRepresentation=function(a,b){b===void 0&&(b=null),this.$OzMediaStream$p_50(a,"user",b)};e.onError=function(a){return this.$OzMediaStream$p_33.onError(a)};e.updateRunTimeConfigs=function(a){var b=a.streamDataHandler;a=a.resetStreamAnchor;b!==void 0&&(this.$OzMediaStream$p_34=b);a===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)};e.$OzMediaStream$p_50=function(a,b,e){var f=this;b===void 0&&(b="internal");e===void 0&&(e=null);if(a==null){if(this.$OzMediaStream$p_1.getBool("no_rep_to_switch_fallback_progressive")){var g=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NO_AVAILABLE_REP_TO_SWITCH",description:"No available representation to switch to because all are blocked"});this.$OzMediaStream$p_33.emitError(g)}return}b==="user"&&this.$OzMediaStream$p_48();(g=this.$OzMediaStream$p_20)==null||g.remove();this.$OzMediaStream$p_20=null;g=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init");var h=g.cloneContext().setRepresentationID(a.getID()),i=a.getInitSegment(),j=i.getData(),k=g.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():b).start();this.$OzMediaStream$p_8=a;g=function(){var a;k.log();f.$OzMediaStream$p_26.handleEvent("append_succeeded");f.emit("initAppended");(a=f.$OzMediaStream$p_14)==null||a.notifyRepresentationSwitched(f)};var l=function(b){var c;k.setError(b).log();f.$OzMediaStream$p_51(b);(c=f.$OzMediaStream$p_40)==null||c.handleError(a.getID(),b);if(a.getID()!==f.$OzMediaStream$p_8.getID()){(c=f.$OzMediaStream$p_24)==null||c.resolve()}};if(j==null){i=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[i],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:h,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:g,dataAppendedErrorCallback:l});j=i.getStream()}this.emit("switchRepresentation",b,a);this.$OzMediaStream$p_52({data:j,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:e,dataAppendedCallback:g,dataAppendedErrorCallback:l,loggerProvider:h.cloneContext(),appendTarget:0});if(e){i=a.getSegmentByTime(e[0]);if(i){b=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[i],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:h,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:g,dataAppendedErrorCallback:l});j=b.getStream();this.$OzMediaStream$p_52({data:j,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:g,dataAppendedErrorCallback:l,loggerProvider:h.cloneContext(),appendTarget:1})}}};e.getLoopInterval=function(){return this.$OzMediaStream$p_22};e.execute=function(){var a=this.$OzMediaStream$p_53();if(a){var b=this.$OzMediaStream$p_24=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream$p_54=function(a){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){a=this.$OzMediaStream$p_16.getBestRepresentation(a);if(this.$OzMediaStream$p_8!==a)return a}return null};e.$OzMediaStream$p_55=function(a){var b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,c=this.$OzMediaStream$p_26.computeBufferTarget();if(c<=0)return null;var e=null;a&&(e=this.$OzMediaStream$p_8.getCustomFieldFirstSegment());if(!e&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else{e||(e=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32));if(this.$OzMediaStream$p_8.canPredict()){a=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0;c=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream$p_10&&a>=c){c=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(c||0)>=a?this.$OzMediaStream$p_10:null}}}if(!e&&!this.$OzMediaStream$p_56()){c=this.$OzMediaStream$p_8.getEndingSegment();if(c&&this.$OzMediaStream$p_8.isEndingSegment(c)){a=c.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,b,this.$OzMediaStream$p_9);b>=a&&!this.$OzMediaStream$p_56()&&(e=c)}}return e};e.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15};e.$OzMediaStream$p_58=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,a,this.$OzMediaStream$p_8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream$p_54(f);if(e){this.$OzMediaStream$p_50(e);a=this.$OzMediaStream$p_55(!1);if(!a)return[];else return this.$OzMediaStream$p_58(a,{fetchSingleSegment:!1,preventRepresentationSwitch:!0})}}}return f};e.$OzMediaStream$p_59=function(){var a=this,b=function(b){b==null||b.remove(),a.$OzMediaStream$p_20===b&&(a.$OzMediaStream$p_20=null)};b(this.$OzMediaStream$p_20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream$p_20=d})["catch"](function(a){b(d);throw a})};e.$OzMediaStream$p_53=function(){var a=this,b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var e=this.$OzMediaStream$p_57(),f=this.$OzMediaStream$p_55(e);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&d("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(f,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}d("oz-player/manifests/IOzSegment").isSequenceNumberEqual(f,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0;this.$OzMediaStream$p_37=f;this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream$p_31){var g;this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return null}if(!f||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var i=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),b()},i?i:(a.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var j=this.$OzMediaStream$p_58(f,{fetchSingleSegment:e});if(j.length===0){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((f=this.$OzMediaStream$p_9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var k=j[j.length-1]||null,l=this.$OzMediaStream$p_8,m=function(){return l.isEndingSegment(k)};j.length!==0||c("oz-player/shims/ozvariant")(0,23148);g=j[0];f=g.getTimeRange().startTime;var n=k.getTimeRange().endTime,o={startTime:f,endTime:n,tag:{id:this.$OzMediaStream$p_8.getID()}},p=function(b){v.setAppendedBufferMs(Math.round(b.appendedSec*1e3)),v.log(),a.$OzMediaStream$p_26.handleEvent("append_succeeded"),j.forEach(function(b){a.emit("SegmentAppended",a.$OzMediaStream$p_60(b,o))}),m()&&a.endStream("appended_ending_segment"),a.$OzMediaStream$p_61(o,b)},q=function(b){v.setError(b).log();var c=t||s;c&&c.cancel();a.$OzMediaStream$p_51(b)},r=this.$OzMediaStream$p_18.cloneContext();r.setRepresentationID(this.$OzMediaStream$p_8.getID());r.setSegmentStartTime(f).setSegmentEndTime(n);var s,t;!e?(t=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:j,networkManager:this.$OzMediaStream$p_12,sourceBufferState:b,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:r.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s):(s=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:j,pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:r.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s);this.$OzMediaStream$p_31=!0;var u=this.$OzMediaStream$p_62(g,k,j.length),v=r.getOperationLogger("queued_append");v.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var w=function(c,b){a.$OzMediaStream$p_52({data:c,mimeCodecs:b,clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:q,loggerProvider:r.cloneContext(),appendTarget:u})},x;!!t||!!s||c("oz-player/shims/ozvariant")(0,23147);var y=this.$OzMediaStream$p_8.getMimeCodecs();t?(t.genStream().then(function(a){return w(a,y)})["catch"](function(b){return a.$OzMediaStream$p_33.emitError(b)}),x=t.getStatusChangePromise()):s&&(w(s.getStream(),y),x=s.getStatusChangePromise());!x&&c("oz-player/shims/ozvariant")(0,51928);f=x.then(function(b){a.$OzMediaStream$p_63(b,k);return a.$OzMediaStream$p_64()}).then(function(){a.$OzMediaStream$p_2=0});return f["catch"](function(b){var c,d=a.$OzMediaStream$p_9;a.$OzMediaStream$p_65(k);(c=a.$OzMediaStream$p_40)==null||c.handleError(l.getID(),b);return a.$OzMediaStream$p_66(b,k,d)})};e.handleError=function(a){var b=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");b.setError(a).setResult("failed").log();return this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream$p_66=function(a,b,e){var f=this;this.$OzMediaStream$p_31=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),i=h[0],j=h[1],k=d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(i,this.$OzMediaStream$p_21),l=function(b){f.$OzMediaStream$p_2++;f.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+k.getDescription()).setError(k).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream$p_21).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream$p_9=e;else if(b.behavior==="recover_failed_request"&&d("oz-player/utils/OzErrorUtils").isOzError(a)){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream$p_9=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(f.$OzMediaStream$p_8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.emit("streamErrorRetry",k);return g.resolve()},b.timeoutMs)};this.$OzMediaStream$p_4!==j?(this.$OzMediaStream$p_4=j,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;h=!0;var m=function(){h=!1};i={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){m(),f.$OzMediaStream$p_10=b,f.$OzMediaStream$p_11=b,f.endStream("streamError_event_object"),g.resolve()},error:k,isInitialRequest:!1,retry:function(a){var b;m();l({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};this.emit("streamError",i);h&&(this.$OzMediaStream$p_33.emitError(k),this.$OzMediaStream$p_2=0,g.resolve());return g.getPromise()};e.$OzMediaStream$p_65=function(a){this.$OzMediaStream$p_48();this.$OzMediaStream$p_10=a;this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();a=this.$OzMediaStream$p_6;a&&a.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)};e.$OzMediaStream$p_63=function(a,b){a==="done"&&(this.$OzMediaStream$p_9=b)};e.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1};e.$OzMediaStream$p_52=function(a){this.$OzMediaStream$p_19.push(a),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()};e.$OzMediaStream$p_61=function(a,b){if(a==null)return;this.$OzMediaStream$p_8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?this.$OzMediaStream$p_25.add(b.startTime_UNSAFE,b.endTime_UNSAFE,a.tag):this.$OzMediaStream$p_25.add(a.startTime,a.endTime,a.tag)};e.$OzMediaStream$p_47=function(){var a=this;this.$OzMediaStream$p_19.forEach(function(b){var d=b.data,e=b.mimeCodecs,f=b.clearSourceBufferRange,g=b.dataAppendedCallback,h=b.dataAppendedErrorCallback,i=b.loggerProvider;b=b.appendTarget;d=d instanceof Uint8Array||a.$OzMediaStream$p_34==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream$p_34.bind(a,a.$OzMediaStream$p_8),a.$OzMediaStream$p_1));a.$OzMediaStream$p_6&&a.$OzMediaStream$p_6.queueData(d,e,f,i,b).then(function(a){if(!a)return;g(a)})["catch"](function(a){h(a)})});this.$OzMediaStream$p_19=[]};e.$OzMediaStream$p_67=function(){var a=this.$OzMediaStream$p_6;if(!a)return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=this.$OzMediaStream$p_7.getCurrentTime(),d=[{fromTime:0,toTime:b}],e=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(e>0){e=e/1e3;var f=a.getSourceBufferState();f=f.getBufferedRanges();f=f.length>=1?f[f.length-1].endTime:b;d=[{fromTime:0,toTime:Math.max(0,b-e)}];b+e<f&&d.push({fromTime:b+e,toTime:f})}return a.clearRangeWithWait(d)};e.$OzMediaStream$p_68=function(a){return!1};e.$OzMediaStream$p_51=function(a){var b=this;if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(a,this.$OzMediaStream$p_21));this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var e=this.$OzMediaStream$p_67();e.then(function(){b.restartLoopBody()})["catch"](function(a){a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream$p_33.emitError(a)})}else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_CANCELLED")return;else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn");(e=this.$OzMediaStream$p_45)==null||e.emitError(a)}else c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(a)&&this.$OzMediaStream$p_33.emitError(a)};e.$OzMediaStream$p_62=function(a,b,c){var d=0;if(this.$OzMediaStream$p_43)return Infinity;var e=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29};e.enableAdaptation=function(){this.$OzMediaStream$p_29=!0};e.disableAdaptation=function(){this.$OzMediaStream$p_29=!1};e.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(a){a.destroy()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream$p_25.get(a);if(!b){var c=this.$OzMediaStream$p_8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream$p_7.getDuration()+d&&(b=this.$OzMediaStream$p_25.get(c.endTime-d))}return b?b.id:null};e.endStream=function(a){var b;(b=this.$OzMediaStream$p_14)==null||b.notifyMediaStreamEnded(this,a);this.$OzMediaStream$p_69()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream$p_8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream$p_6){var b=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream("buffered_to_end_time"))}}};e.$OzMediaStream$p_60=function(a,b){return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?j.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?j.VIDEO:j.CAPTION,segment:a,sourceBuffer:(a=(a=this.$OzMediaStream$p_6)==null||(a=a.getDebug())==null?void 0:a.SourceBuffer)!=null?a:null,timeRange:b}};e.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null};e.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()};e.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var a=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream$p_32=a[a.length-1].endTime)}};e.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null};e.$OzMediaStream$p_49=function(a){this.$OzMediaStream$p_8.getID()===a&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream$p_35=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream$p_6;return d?d.clearRangeWithWait([{fromTime:a,toTime:b}]):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a,b){var c=null;for(var d in a){if(d===b)continue;a[d].inBufferAheadTimeSince!=null&&(c=c!=null?Math.min(c,a[d].inBufferAheadTimeSince):a[d].inBufferAheadTimeSince)}return c}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null});(j=this.$2)==null||j.setEnableCatchup(h);j=this.$6(a,b,c,d,e,f,g,h,i);(a=j.segment)==null||a.getOptions().setSegmentNumDecisionTime(Date.now());j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();b=this.$4;if(j.segment&&b!=null){c=j.segment.getOptions();c.setIsDVLEnabled(b.shouldRequestDynamicInfo(i))}return j.segment};b.$6=function(a,b,c,e,f,g,j,k,l){var m,n,o=b.getCurrentTime(),p=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),q=e!=null?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j):{bufferAheadSec:0,bufferedOffset:0},r=q.bufferAheadSec;q=q.bufferedOffset;var s=null,t=null,u=this.$2?this.$2.enabled():!0,v=a.getPredictedSegmentAfter(f),w=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a,j.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,l)),x=!0,y=null;if(p&&k&&((m=v)==null?void 0:m.getSequenceNumber())!=null&&((m=(m=v)==null?void 0:m.getSequenceNumber())!=null?m:0)<=((m=w==null?void 0:w.getSequenceNumber())!=null?m:0)){v=w;s="paired_catchup";this.$3.getOperationLogger("segment_locator").setInitiator(s).setUserInfo({bufferAheadSec:String(r),bufferedOffset:String(q)}).setLength(((m=w==null?void 0:w.getSequenceNumber())!=null?m:0)-((m=(m=v)==null?void 0:m.getSequenceNumber())!=null?m:0)).setType(l).log();x=!1;y=s}else if(p&&k&&u&&v!=null&&(n=this.$2)!=null&&n.isBehindPreferredLiveHeadLatencyWithTolerance()){if(this.$2&&r>this.$2.getPreferredLiveHeadLatencySec()&&q==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(r),bufferedOffset:String(q)}};m=a.getEndingSegment();p=d("oz-player/streams/OzSegmentUtils").getMaxSegment([m,v]);k=j.getNumber("pdash_download_cursor_between_catchups_seg")===0||((k=w==null?void 0:w.getSequenceNumber())!=null?k:0)+j.getNumber("pdash_download_cursor_between_catchups_seg")<((w=m==null?void 0:m.getSequenceNumber())!=null?w:0);if(k){if(((m=p==null?void 0:p.getSequenceNumber())!=null?m:0)>((k=(w=v)==null?void 0:w.getSequenceNumber())!=null?k:0)){this.$5[l].lastSkippedToSegmentNumber=(m=p==null?void 0:p.getSequenceNumber())!=null?m:0;this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(r),bufferedOffset:String(q)}).setLength(((w=p==null?void 0:p.getSequenceNumber())!=null?w:0)-((m=(k=v)==null?void 0:k.getSequenceNumber())!=null?m:0)).setType(l).log()}v=p;s="catchup";x=!1;y=s}}else if(f==null){v=a.getSegmentByTime(o);s="1st_run";w=a.getTimeRanges();t={approx:String(a.canApproximateId()),ranges:String(w.length),mpdStartTime:w.length>0?String(w[w.length-1].startTime):null,mpdEndTime:w.length>0?String(w[w.length-1].endTime):null};this.$5[l].lastSkippedToSegmentNumber=(m=(k=v)==null?void 0:k.getSequenceNumber())!=null?m:0}x&&(x=u,y="stream_state");if(x&&r>c){this.$5[l].inBufferAheadTimeSince==null&&(this.$5[l].inBufferAheadTimeSince=Date.now());return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(r),bufferedOffset:String(q),lastMaxSegNum:String(h(this.$5,l)),segment:v?String(v.getSequenceNumber()):null,computedBufferAheadTarget:String(c)}}}else!x&&r>c&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(r),bufferedOffset:String(q),computedBufferAheadTarget:String(c)}).setReason("disabled_buffer_ahead_rule:"+(y||"")).setType(l).log();p=g&&g.getSequenceNumber()||0;f=v&&v.getSequenceNumber()||0;if(v&&g&&p>=f){o=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(o||0)>=p?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(p)}}}w=e?d("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(e.getBufferedRanges()):0;k=e?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j).bufferAheadSec:0;m=i(this.$5,l);u=Date.now();if(j.getNumber("download_cursor_total_buffer_max_sec")!=0&&j.getNumber("download_cursor_total_buffer_max_sec")<k||j.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&m!=null&&j.getNumber("download_cursor_buffer_ahead_time_max_sec")<(u-m)/1e3){this.$5[l].lastSkippedToSegmentNumber=(y=(x=v)==null?void 0:x.getSequenceNumber())!=null?y:0;this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(r),bufferedOffset:String(q),totalBufferedSec:String(w),computedBufferAheadTarget:String(c),inBufferAheadElapsedTime:String((u-(m!=null?m:0))/1e3)}).setReason("force_paired_catchup").setType(l).log()}this.$5[l].inBufferAheadTimeSince=null;return{segment:v,initiator:s?s:void 0,userInfo:t?t:void 0}};return a}();g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c,"auto").uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}var j="av01",k="vp09",l="avc1";a=function(a){function e(b){var e;e=a.call(this)||this;e.$Player$p_5=new Map();e.$Player$p_6=new Map();e.$Player$p_9=void 0;e.$Player$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player$p_11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_12=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_19=void 0;e.$Player$p_25=[];e.$Player$p_26=void 0;e.$Player$p_27=void 0;e.$Player$p_32=null;e.$Player$p_33=null;e.$Player$p_43=null;e.$Player$p_51=!1;e.$Player$p_54=0;e.$Player$p_55=null;e.$Player$p_56=null;e.$Player$p_57=0;e.$Player$p_58=null;e.$Player$p_59=null;e.$Player$p_60=!1;e.$Player$p_63=null;e.$Player$p_64=null;e.$Player$p_70=!1;e.$Player$p_71=!1;e.$Player$p_76=!1;e.$Player$p_77=null;e.$Player$p_78=!1;e.$Player$p_89=function(){var a=new(c("oz-player/parsers/OzXmlParserImplDOMParser"))();return a};e.$Player$p_91=function(){e.$Player$p_5.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player$p_92=function(){e.$Player$p_5.forEach(function(a){return a.endStream("streamGone")})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNode,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.bandwidthEstimatorOverride;n=n===void 0?null:n;var o=b.customVTTBufferTargetStrategies;o=o===void 0?null:o;var p=b.shouldBlockStatusCode5xx;p=p===void 0?!1:p;var q=b.prefetchCache;q=q===void 0?null:q;var r=b.getOverrideOzRequestImplementation;r=r===void 0?null:r;var s=b.getUserSelectedPlaybackRate,t=b.networkRequestStreamHandlers,u=b.networkRequestStreamRetryHandler,v=b.networkRequestUrlRefreshHandler,w=b.getShouldIncludeCredentials;w=w===void 0?null:w;var x=b.getCustomRequestParametersForURI;x=x===void 0?null:x;var y=b.initialRepresentationIDs;y=y===void 0?[]:y;var z=b.debugCreateInitiator;z=z===void 0?null:z;var A=b.customParsers;A=A===void 0?new Map():A;var B=b.videoPlaybackRestrictions;B=B===void 0?[]:B;var C=b.customSegmentTimelineParser;C=C===void 0?null:C;var D=b.customRepresentationParsers;D=D===void 0?{}:D;var E=b.networkRequestFetchPriority;E=E===void 0?"auto":E;var F=b.videoAbrManagerFactory;F=F===void 0?null:F;var G=b.seekHandler;G=G===void 0?null:G;var H=b.initialPlaybackPositionForDynamicMpd;H=H===void 0?-20:H;var I=b.liveheadFallBehindBlockThreshold;I=I===void 0?30:I;var J=b.liveheadFallBehindBlockMargin;J=J===void 0?5.9:J;var K=b.startTimeStamp;K=K===void 0?0:K;var L=b.drmProviders;L=L===void 0?[]:L;var M=b.getVideoDimensions;M=M===void 0?null:M;var N=b.setCustomFetchStreamLoggingAttributes;N=N===void 0?null:N;var O=b.bufferEndLimit;O=O===void 0?null:O;var P=b.configureCustomRequestParametersForSegment;P=P===void 0?null:P;var Q=b.isClientTriggeredTraceEnabled;Q=Q===void 0?!1:Q;var R=b.enableImmediateQualityDownSwitch;R=R===void 0?!1:R;b=b.userPreferenceLang;b=b===void 0?null:b;e.$Player$p_1=o;e.$Player$p_49=z;o=m.perfLoggerProviders;z=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player$p_17=m||!1;e.$Player$p_16=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player$p_79().concat(o));e.$Player$p_2=f;e.$Player$p_4=i!=null?i:new(c("oz-player/configs/OzPlayerConfig"))(j!=null?j:{});e.$Player$p_78=e.$Player$p_4.getBool("enable_managed_media_source")&&!!window.ManagedMediaSource;e.$Player$p_75=e.$Player$p_78?"changeType"in window.ManagedSourceBuffer.prototype:"changeType"in window.SourceBuffer.prototype;e.$Player$p_12.onError(function(){});e.$Player$p_22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player$p_22.observe(z,e.$Player$p_16);e.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+c("oz-player/shims/OzUuid")()).log();e.$Player$p_53=r;e.$Player$p_28=A;e.$Player$p_67=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player$p_4,p);e.$Player$p_10.addSubscriptions(e.$Player$p_67.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player$p_31=[e.$Player$p_67,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))(e.$Player$p_78)].concat(B);e.$Player$p_75||e.$Player$p_31.push(new(c("oz-player/strategies/OzSingleCodecRestriction"))());e.$Player$p_29=D;e.$Player$p_30=C;e.$Player$p_35=F;e.$Player$p_36=G;e.$Player$p_37=K;e.$Player$p_38=H;e.$Player$p_41=s!=null?s:function(){return 1};e.$Player$p_39=I;e.$Player$p_42=J;e.$Player$p_66=O;e.$Player$p_69=Q;e.$Player$p_71=R;e.$Player$p_47=L;e.$Player$p_63=N;e.$Player$p_3=h;e.$Player$p_7=new(c("oz-player/media_source/MediaSourceManager"))({videoNode:e.$Player$p_3,config:e.$Player$p_4,perfLoggerProvider:e.$Player$p_16,isChangeTypeSupported:e.$Player$p_75,useManagedMediaSource:e.$Player$p_78,handleVttCaptionsUpdated:function(a){var b;b=(b=e.$Player$p_5.get("caption"))==null||(b=b.getCurrentRepresentation())==null?void 0:b.getLang();e.emit("vttCaptionsUpdated",a,b)},onClearVideoNodeError:function(){e.$Player$p_80()},onRetryVideoElementError:function(a){e.emit("videoNodeErrorRetry",a)}});e.$Player$p_7.onError(function(a){e.$Player$p_11.emitError(a)});if(e.$Player$p_4.getBool("clear_on_seek")){m=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player$p_3,e.$Player$p_4,e.$Player$p_5,e.$Player$p_16);m.maybeOverwriteVideoCurrentTimeProperty();e.$Player$p_10.addSubscriptions(m.onError(e.$Player$p_11.emitError));e.$Player$p_64=m}e.$Player$p_24=q;o=e.$Player$p_24&&e.$Player$p_24.getCachedRepresentations();e.$Player$p_25=o||y;e.$Player$p_65=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player$p_4});e.$Player$p_44=t;e.$Player$p_45=w;e.$Player$p_46=x;e.$Player$p_68=P;e.$Player$p_77=n!=null?n:c("oz-player/networks/OzBandwidthEstimator");e.$Player$p_13=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player$p_4,prefetchCache:e.$Player$p_24,networkRequestStreamHandlers:e.$Player$p_44,getOverrideOzRequestImplementation:e.$Player$p_53,getShouldIncludeCredentials:e.$Player$p_45,getCustomRequestParametersForURI:e.$Player$p_46,networkRequestFetchPriority:E,networkRequestStreamRetryHandler:u,networkRequestUrlRefreshHandler:v,setCustomFetchStreamLoggingAttributes:e.$Player$p_63,dynamicVideoLibrary:e.$Player$p_65,configureCustomRequestParametersForSegment:e.$Player$p_68,onResourceTimingBufferFull:function(){e.$Player$p_81()},bandwidthEstimator:e.$Player$p_77});e.$Player$p_18=l;e.$Player$p_8=k;e.$Player$p_14=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player$p_4,e.$Player$p_3,e.$Player$p_16);e.$Player$p_52=M;e.$Player$p_15=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player$p_7,e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_15.addListener("streamEnd",function(){e.$Player$p_51=!0,e.emit("streamEnd")}));e.$Player$p_50=g!=null?g:e.$Player$p_82();e.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player$p_61=new(c("oz-player/states/OzPositionToViewport"))(e.$Player$p_3,e.$Player$p_4));e.$Player$p_72=b;e.$Player$p_73=null;e.$Player$p_74={lang:null,role:null};return e}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.$Player$p_81=function(){if(this.$Player$p_70)return;c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn");this.$Player$p_70=!0};f.$Player$p_83=function(a){var b=this;this.$Player$p_84();var c=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(e){var f,g,c=b.$Player$p_85(a);f=String((f=c.getCustomField("currentServerTimeMs"))!=null?f:"");g=String((g=c.getCustomField("lastVideoFrameTs"))!=null?g:"");f={currentServerTimeMs:f,ingestLastVideoFrameTs:g,nowMs:String(Date.now())};g=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player$p_4);g=g&&g.endTime!=0?g.endTime:null;e.setLiveheadPosition(g).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(b.$Player$p_76).setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated"))).setUserInfo(f);return c});this.$Player$p_86(c)};f.$Player$p_86=function(a){var b=this;this.$Player$p_9=i(a);this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player$p_26=this.$Player$p_87();this.$Player$p_27=this.$Player$p_88();this.$Player$p_67.setAvailableRepresentationsCount(a.getVideoRepresentations().length);if(this.$Player$p_18!=null){var e=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,a,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69,this.$Player$p_78);this.$Player$p_90(e);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError),e.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),e.addListener("manifestFetchErrorRetry",function(a){return b.emit("manifestFetchErrorRetry",a)}),e.addListener("streamTransitionToStatic",this.$Player$p_91),e.addListener("streamGone",this.$Player$p_92));e.setupUpdateLoop();this.$Player$p_21=e}this.$Player$p_4.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player$p_40=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:a,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=this.$Player$p_37:this.$Player$p_37=a.isStaticMpd()?this.$Player$p_37:this.$Player$p_93(a);this.$Player$p_19=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:a,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(e=(e=this.$Player$p_64)==null?void 0:e.getCurrentTimePropertyOverwriteSuccess())!=null?e:!1,liveLatencyManager:this.$Player$p_40});this.$Player$p_20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:a,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16});this.$Player$p_94()["catch"](function(a){var e=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;b.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(a),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player$p_18=a;try{var c=this.$Player$p_8;c!=null?this.$Player$p_83(c):a!=null?this.$Player$p_95(a).then(function(a){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}b.$Player$p_8=a;b.$Player$p_54=0;b.$Player$p_83(a)})["catch"](function(c){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}var e=d("oz-player/utils/OzErrorUtils").isOzError(c)?c:null;e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(c),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:c,url:a})});b.$Player$p_96(e,a)}):this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){c=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(a),extra:babelHelpers["extends"]({},c==null?void 0:c.getExtra(),{originalError:a})}))}};f.$Player$p_93=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a);return Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player$p_95=function(a){this.$Player$p_54++;a=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:a,options:null,loggerProvider:this.$Player$p_16});a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player$p_97=function(){this.$Player$p_55!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)};f.$Player$p_96=function(a,b){var d=this,e=!0,f=this.$Player$p_54-1,g=a.getExtra().code;this.$Player$p_56!==g?(this.$Player$p_56=g,this.$Player$p_57=1):this.$Player$p_57++;var h=function(){e=!1};g={endStream:function(){h(),d.$Player$p_51=!0,d.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player$p_97(),d.$Player$p_55=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player$p_97(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player$p_11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler,d=a.videoStreamDataHandler,e=a.applicationStreamDataHandler;a=a.resetStreamAnchor;if(d!==void 0){var f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({streamDataHandler:d})}if(a!==void 0){f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({resetStreamAnchor:a});d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({resetStreamAnchor:a});(f=this.$Player$p_19)==null||f.resetCurrentTime()}if(c!==void 0){d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}if(e!==void 0){f=this.$Player$p_5.get("caption");f&&f.updateRunTimeConfigs({streamDataHandler:e,resetStreamAnchor:a})}b!=null&&b!==""&&this.$Player$p_98(b)};f.$Player$p_99=function(a,b){var c=this,e=a.getMimeCodecs();e=this.$Player$p_7.createSourceBufferManager(b+"/"+a.getMimeType()+"/"+a.getCodecs(),e,b,a.getInitSegment().getData());this.$Player$p_100(e,b,a);a=e.then(function(a){c.$Player$p_50&&b!=="caption"&&c.$Player$p_50.setSourceBufferState(b,a.getSourceBufferState());return a});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,this.$Player$p_16,"source_attach",function(a){a.setType(b)});return a.then(function(a){if(b!=="caption"){var d;(d=c.$Player$p_19)==null||d.observeSourceBufferState(a.getSourceBufferState(),b)}})};f.isDrm=function(){var a=this.$Player$p_48;if(a!=null){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player$p_84=function(){var a=this.$Player$p_47;if(a.length>0){var b=this.$Player$p_48=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});a.forEach(function(a){b.addProvider(a)});this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError))}};f.$Player$p_101=function(a){var b=this,d=i(this.$Player$p_9);a=[this.$Player$p_4,a,this.$Player$p_102(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return b.$Player$p_103()},d.isStaticMpd()?"static":"dynamic",this.$Player$p_16];d=this.$Player$p_35&&this.$Player$p_35.apply(this,a);return d!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player$p_104=function(a){return a==="caption"?!0:!1};f.$Player$p_100=function(a,b,e){var f=this,g=i(this.$Player$p_9),h=this.$Player$p_6.get(b),j=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:a,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:b!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_105(b),priorityCalculator:this.$Player$p_106(),streamSegmentsCountCalculator:this.$Player$p_107(b),abrManager:h,representation:e,loggerProvider:this.$Player$p_16.cloneContext().setType(b),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_104(b),mediaStreamType:b,warningEmitter:this.$Player$p_12,mpd:g});this.$Player$p_37===0?j.start():(i(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){j.start()})));this.$Player$p_10.addSubscriptions(j.onError(this.$Player$p_11.emitError));this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(j));b==="video"&&(this.$Player$p_33=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),this.$Player$p_102()),j,a,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError)));this.$Player$p_5.set(b,j);this.$Player$p_10.addSubscriptions(j.addListener("switchRepresentation",function(){var c,a=j.getCurrentRepresentation();(c=f.$Player$p_23)==null||c.setTimeRangeProvider(a);(c=f.$Player$p_19)==null||c.setTimeRangeProvider(a);(c=f.$Player$p_20)==null||c.setTimeRangeProvider(a);b==="video"&&f.emit("switchVideoRepresentation")}),j.addListener("SegmentAppended",function(a){f.$Player$p_108("SegmentAppended",a)}),j.addListener("streamError",function(a){f.emit("streamError",a)}),j.addListener("streamErrorRetry",function(a){f.emit("streamErrorRetry",a)}))};f.$Player$p_109=function(){if(this.$Player$p_66!=null)return[new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)];else return[new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(i(this.$Player$p_9),this.$Player$p_4),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]};f.$Player$p_110=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]};f.$Player$p_111=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]};f.$Player$p_87=function(){return new(c("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_109(),this.$Player$p_110())};f.$Player$p_88=function(){return this.$Player$p_1!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_109()),this.$Player$p_111()):this.$Player$p_87()};f.$Player$p_105=function(a){var b=a==="caption"?this.$Player$p_27:this.$Player$p_26;b||c("oz-player/shims/ozvariant")(0,76764,a);return b};f.$Player$p_90=function(a){var b=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player$p_50,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,d);this.$Player$p_10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player$p_16.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player$p_50)==null||c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player$p_16.getOperationLogger("stream_resumed").log();(c=b.$Player$p_50)==null||c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player$p_32=e}};f.$Player$p_106=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player$p_107=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_105(a),this.$Player$p_4)];this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4));a==="video"&&b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_102()));return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player$p_11.onError(a)};f.onWarning=function(a){return this.$Player$p_12.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player$p_9;if(!a||this.$Player$p_2)return null;a=this.$Player$p_5.get("video");a=a&&a.getCurrentRepresentation();if(a instanceof c("oz-player/manifests/OzVideoRepresentation"))return a.getDisplayLabel();a=this.$Player$p_102();a=a[0];return a?a.getDisplayLabel():null};f.getTargetAudioTrack=function(){var a=this.$Player$p_9;if(!a)return null;a=this.$Player$p_5.get("audio");a=a&&a.getCurrentRepresentation();if(a){var b;return{id:a.getID(),displayLabel:a.getDisplayLabel(),lang:(b=a.getLang())!=null?b:null,role:a.getRole(),mimeCodecs:a.getMimeCodecs(),variantKey:a.getVariantKey()}}b=this.$Player$p_112();a=b[0];return a?a.getAudioTrack():null};f.getCurrentPlayingVideoVariant=function(){return this.$Player$p_73};f.getTargetVideoVariant=function(){return this.$Player$p_74};f.switchToVideoQuality=function(a){var b=this.$Player$p_102().find(function(b){return b.getDisplayLabel()===a});if(b){var c=this.$Player$p_5.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.switchToVideoVariant=function(a){this.$Player$p_74=a===null?{lang:null,role:null}:a;if(this.$Player$p_74.lang===((a=(a=this.$Player$p_73)==null?void 0:a.lang)!=null?a:null)&&this.$Player$p_74.role===((a=(a=this.$Player$p_73)==null?void 0:a.role)!=null?a:null)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}else if(!this.$Player$p_9){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant mpd is void"}),"switchToVideoVariant mpd is void","warn");return}else if(!this.$Player$p_113(this.$Player$p_74.lang)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}this.$Player$p_114();this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75&&this.$Player$p_115();this.$Player$p_73=this.$Player$p_74};f.$Player$p_114=function(){var a=this.$Player$p_112()[0];if(a){var b=this.$Player$p_5.get("audio");b&&(b.switchRepresentation(a,[0,this.$Player$p_14.getDuration()]),b.disableAdaptation())}};f.$Player$p_115=function(){var a=this.$Player$p_5.get("video");if(!a)return;var b=a.getCurrentRepresentation();if(b.getLang()===this.$Player$p_74.lang&&b.getRole()===this.$Player$p_74.role)return;b=this.$Player$p_102();if(b.length===0){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74),"warn");return}var e=this.$Player$p_6.get("video");e?(e.updateRepresentations(b),e=e.getBestRepresentation()):e=b[0];if(!e){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74));return}a.switchRepresentation(e,[0,this.$Player$p_14.getDuration()]);return};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player$p_5.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player$p_5.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player$p_9;if(!b)return[];b=this.$Player$p_102().filter(function(b){var c;return!((c=a.$Player$p_67)!=null&&c.isBlocked(b.getID()))});var c=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}),e=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k});c=c?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}):e?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k}):b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===l});return c.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}).map(function(a){return a.getDisplayLabel()})};f.getVideoTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_102().filter(function(b){var c;return!((c=a.$Player$p_67)!=null&&c.isBlocked(b.getID()))}).map(function(a){return{mimeCodecs:a.getMimeCodecs(),codec:a.getCodecs(),codecFamily:d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getMimeCodecs()),displayLabel:a.getDisplayLabel(),qualityLabel:a.getDisplayLabel(),height:a.getHeight(),id:a.getID(),qualityScoreCurveString:a.getQualityScoreCurveString("csvqm"),width:a.getWidth(),lang:a.getLang(),role:a.getRole(),variantKey:a.getVariantKey()}})};f.getAudioTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:b.getAudioRepresentations().filter(function(b){var c;return!((c=a.$Player$p_67)!=null&&c.isBlocked(b.getID()))}).map(function(a){return a.getAudioTrack()})};f.setEnableLiveheadCatchup=function(a){if(this.$Player$p_20){var b;a?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log();(b=this.$Player$p_20)==null||b.setTimelineBlockingEnabled(a)}this.$Player$p_5.forEach(function(b){b.setEnableLiveheadCatchup(a)});(b=this.$Player$p_19)==null||b.setEnableLiveheadCatchup(a)};f.$Player$p_94=function(){var a=this;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_113(this.$Player$p_72)){var c;this.$Player$p_74=babelHelpers["extends"]({},this.$Player$p_74,{lang:(c=this.$Player$p_72)!=null?c:null,role:this.$Player$p_72!=null?"dub":null})}c=this.$Player$p_102()[0];this.$Player$p_62=c&&c.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;c=this.$Player$p_2?[this.$Player$p_116({liveConfigsFromAudioStream:!0}),this.$Player$p_117()]:[this.$Player$p_118(),this.$Player$p_116({liveConfigsFromAudioStream:!1}),this.$Player$p_117()];var e=[];return(h||(h=b("Promise"))).all(c).then(function(){var b=a.$Player$p_5.get("video"),c=a.$Player$p_5.get("audio"),d=a.$Player$p_5.get("caption");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());d&&e.push(d.getCurrentRepresentation());e.forEach(function(b){a.$Player$p_10.addSubscriptions(b.addUpdateListener(function(){a.$Player$p_108("SegmentIndexesUpdated",e)}))});a.$Player$p_108("InitialSegmentIndexes",e);a.$Player$p_3&&a.$Player$p_3.style&&(a.$Player$p_3.style.display=a.$Player$p_2?"none":"block");a.$Player$p_73=a.$Player$p_74;a.emit("initialized")})};f.$Player$p_119=function(a){if(!a.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(a,!0)};f.$Player$p_120=function(a){var b;this.$Player$p_23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4);this.$Player$p_119(a);(b=this.$Player$p_23)==null||b.setTimeRangeProvider(a);(b=this.$Player$p_19)==null||b.setTimeRangeProvider(a);(b=this.$Player$p_20)==null||b.setTimeRangeProvider(a)};f.$Player$p_118=function(){var a=this.$Player$p_102();if(!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),a);if(!b.length){a=a.map(function(a){return a.getDisplayLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+a.join(", "),extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_120(b[0]);a=this.$Player$p_121(b);a&&this.$Player$p_4.getBool("enable_abr_logging")&&this.$Player$p_16.getOperationLogger("video_stream_setup_initial_representation_from_prefetch").setResult("success").setReason("player_initialized").setRepresentationID(a.getID()).setPreviousRepresentationID(null).setUserInfo({initialRepresentationIDs:JSON.stringify(this.$Player$p_25)}).setType("video").setInitiator("Player").log();var e=this.$Player$p_101(a||b[0]);this.$Player$p_6.set("video",e);a||(a=e.getBestRepresentation());return this.$Player$p_99(a||b[0],"video")};f.$Player$p_102=function(){var a=this.$Player$p_9;if(!a)return[];var b=a.getVideoRepresentations();if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75){var c=a.getVideoRepresentationsByVariant(this.$Player$p_74);b=c.length>0?c:a.getVideoRepresentationsByVariant({lang:null,role:null})}var e=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),b);return b.filter(function(a){return e.includes(a)})};f.$Player$p_112=function(){var a=this.$Player$p_9;if(!a)return[];return this.$Player$p_4.getBool("enable_alternative_audio_tracks")?a.getAudioRepresentationsByVariant(this.$Player$p_74):a.getAudioRepresentations()};f.$Player$p_113=function(a){var b=this.$Player$p_9;if(!b)return!1;var c=b.getAudioRepresentations();if(a==null)return!0;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&b.isStaticMpd()){b=c.findIndex(function(b){return b.getLang()===a});return b>-1}return!1};f.$Player$p_116=function(a){var b=this;a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var d=i(this.$Player$p_9),e=d.getAudioRepresentations();a&&this.$Player$p_120(e[0]);a=-1;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.length>1&&d.isStaticMpd()&&(this.$Player$p_72!=null&&(a=e.findIndex(function(a){return a.getLang()===b.$Player$p_72})));if(e.length){d=a>-1?a:e.findIndex(function(a){return a.getLang()==null&&a.getRole()==null});d=d>-1?d:0;return this.$Player$p_99(a>=0&&a<e.length?e[a]:this.$Player$p_122(e)||e[d],"audio")}return c("oz-player/shims/OzMaybeNativePromise").resolve()};f.$Player$p_117=function(){var a=i(this.$Player$p_9);a=a.getApplicationRepresentations();return a.length?this.$Player$p_99(this.$Player$p_123(a)||a[0],"caption"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player$p_9};f.destroy=function(a){var d,e,f=this;a=this.$Player$p_16.getOperationLogger("unload").setInitiator(a).start();(d=this.$Player$p_64)==null||d.destroy();this.$Player$p_97();this.$Player$p_5.forEach(function(a){a.destroy()});this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null);this.$Player$p_5=new Map();this.$Player$p_10.release();this.$Player$p_10.engage();this.$Player$p_14.destroy();this.$Player$p_19&&this.$Player$p_19.destroy();this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null);this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null);this.$Player$p_48&&this.$Player$p_48.destroy();this.$Player$p_61&&this.$Player$p_61.destroy();this.$Player$p_13&&this.$Player$p_13.destroy();this.$Player$p_52&&(this.$Player$p_52=null);this.$Player$p_7&&this.$Player$p_7.detach();this.$Player$p_3.pause();this.$Player$p_4.getBool("enable_revoke_object_url_on_destroy")&&URL.revokeObjectURL(this.$Player$p_3.src);this.$Player$p_3.setAttribute("src","");this.$Player$p_3.removeAttribute("src");this.$Player$p_3.removeAttribute("srcObject");d=(h||(h=b("Promise"))).resolve();"function"===typeof this.$Player$p_3.setMediaKeys&&(d=this.$Player$p_3.setMediaKeys(null));this.$Player$p_21&&this.$Player$p_21.destroy();this.$Player$p_32&&this.$Player$p_32.destroy();this.$Player$p_22.destroy();(e=this.$Player$p_23)==null||e.destroy();this.$Player$p_50&&this.$Player$p_50.destroy();this.$Player$p_67&&this.$Player$p_67.destroy();a.log();this.emit("destroyed");return d["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"Player.destroy","warn")}).then(function(){f.$Player$p_3.load()})};f.$Player$p_121=function(a){var b=this,d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_122=function(a){var b=this,e,f=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});f||(f=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));!f&&!((e=this.$Player$p_9)!=null&&e.isStaticMpd())&&a.length>1&&(f=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,this.$Player$p_4,this.$Player$p_16));return f||null};f.$Player$p_123=function(a){return null};f.$Player$p_85=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_89,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks"),useManagedMediaSource:this.$Player$p_78});a=b.parse(a);this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError));b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_103(),a.getVideoRepresentations());if(b.length>1){var e=d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b[0].getMimeCodecs());this.$Player$p_76=!b.reduce(function(a,b){return a&&d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b.getMimeCodecs())===e},!0)}return a};f.$Player$p_79=function(){var a=[];this.$Player$p_17&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player$p_124=function(a,b){b=this.$Player$p_5.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player$p_124(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player$p_124(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player$p_125("video")};f.getCurrentAudioRepresentation=function(){return this.$Player$p_125("audio")};f.getCurrentPlayingAudioTrackID=function(){var a=this.getCurrentAudioRepresentation();return a==null?void 0:a.getID()};f.$Player$p_125=function(a){var b=this.$Player$p_124(this.$Player$p_14.getCurrentTime(),a),c=this.$Player$p_9;if(!c)return null;c=[];a==="audio"?c=this.$Player$p_112():a==="video"&&(c=this.$Player$p_102());return(a=c.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player$p_5.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player$p_5.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player$p_5.get("video"),c=this.$Player$p_5.get("audio"),d=this.$Player$p_5.get("caption"),e,f,g,h,j,k,l;if(b){var m;e=(m=b.getDebug())==null?void 0:m.MediaStreamAbrManager;f=(m=b.getDebug())==null?void 0:m.SourceBufferManager;if(f){g=(m=f.getDebug())==null?void 0:m.SourceBuffer}}if(c){h=(m=c.getDebug())==null?void 0:m.SourceBufferManager;if(h){j=(m=h.getDebug())==null?void 0:m.SourceBuffer}}if(d){k=(m=d.getDebug())==null?void 0:m.SourceBufferManager;if(k){l=(m=k.getDebug())==null?void 0:m.SourceBuffer}}return{getManifest:function(){return i(a.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:b,VideoAbrManager:e,VideoBufferManager:f,VideoSourceBuffer:g,AudioSourceStream:c,AudioBufferManager:h,AudioSourceBuffer:j,CaptionSourceStream:d,CaptionBufferManager:k,CaptionSourceBuffer:l}};f.injectExternalDebugEvent=function(a,b){this.$Player$p_108(a,b)};f.$Player$p_108=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player$p_82=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return a.$Player$p_51?a.$Player$p_3.duration:Infinity});b.attachPerfLoggerProvider(this.$Player$p_16);this.$Player$p_10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(b){a.emit("leaveBuffering",b)}));return b};f.$Player$p_103=function(){var a=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player$p_18};f.$Player$p_98=function(a){var b=this;this.$Player$p_18=a;var c=this.$Player$p_9;if(!c){this.$Player$p_60=!0;return}else{c.updateLocation(a);this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);a=function(){b.$Player$p_43&&(b.$Player$p_10.releaseOne(b.$Player$p_43),b.$Player$p_43=null),b.$Player$p_5.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getDisplayLabel();e=(d==="video"?b.$Player$p_102():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player$p_6.get(d);d&&d.updateRepresentations(b.$Player$p_102())}d=e[0];e.forEach(function(a){var b=a.getDisplayLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player$p_43=c.addListener("updated",a);this.$Player$p_10.addSubscriptions(this.$Player$p_43)}};f.getPerfLoggerProvider=function(){return this.$Player$p_16};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player$p_9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player$p_9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player$p_126(a,b);a=this.$Player$p_127(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player$p_126=function(a,b){if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player$p_58===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=c("oz-player/shims/OzPerformance").now(),this.$Player$p_58=a);a=a/1e3+b-this.$Player$p_14.getCurrentTime();return a};f.$Player$p_127=function(a,b){var d;if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player$p_14.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player$p_14.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player$p_80=function(){this.$Player$p_5.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);/*FB_PKG_DELIM*/
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","CometThemeInfraBaseThemeContext.react","CometThemeInfraBaseThemeGated.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};function a(a){var b=a.ariaLabelledBy,e=a.children,f=a.ref,g=a.role,h=a.testid;h=a.themeConfig;var l=a.useInvertedDisplayMode;a=a.xstyle;var m=c("useCurrentDisplayMode")();m=m==="dark"?"light":"dark";var n=j(c("CometThemeInfraBaseThemeContext.react"));l=l?c("CometThemeInfraBaseThemeGated.react")?i.jsx(c("CometThemeInfraBaseThemeGated.react"),{"aria-labelledby":b,displayMode:m,ref:f,role:g,testid:void 0,themes:n,xstyle:a,children:e}):i.jsx(c("BaseTheme.react"),{"aria-labelledby":b,config:h!=null?h:k,displayMode:m,ref:f,role:g,testid:void 0,xstyle:a,children:e}):i.jsx(c("BaseView.react"),{"aria-labelledby":b,ref:f,role:g,testid:void 0,xstyle:a,children:e});return d("basePushToast").passesNewToastAPIGK()?i.jsx(c("XPlatReactFocusRegion.react"),{containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:l}):l}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","basePushToast","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useId,k=b.useMemo,l={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingInlineStart:"xa6w9w1",paddingInlineEnd:"x7jv1k3",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderInlineEndColor:"xuc4ihs",borderBottomColor:"xm9qwu6",borderInlineStartColor:"x38i1re",borderStartStartRadius:"x1ghonvh",borderStartEndRadius:"x1c2sbsd",borderEndEndRadius:"x8tb1rc",borderEndStartRadius:"x609f4j",borderTopStyle:"xhf2mca",borderInlineEndStyle:"xaau5u0",borderBottomStyle:"x13y0ya8",borderInlineStartStyle:"xv6865q",borderTopWidth:"xmqxc35",borderInlineEndWidth:"x1a32di2",borderBottomWidth:"x21fg80",borderInlineStartWidth:"xyi7q43",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingInlineStart:"x1rcnc7e",paddingInlineEnd:"x1e7pf15",paddingLeft:null,paddingRight:null,$$css:!0},rootDense:{minWidth:"xktpd3l",$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0}};function a(a){var b,e,f,g,h,m=a.action,n=a.addOnStart,o=a.closeButton,p=a.density,q=a.linkWrapper,r=a.message,s=a.offsetStyles,t=a.onDismiss,u=a.size;u=u===void 0?"full-width":u;var v=a.testid;v=a.themeConfigOverride;var w=a.toastRef,x=a.useInvertedDisplayMode;x=x===void 0?!0:x;a=a.variant;var y=j(),z=k(function(){return m!=null?{}:{"aria-atomic":!0,role:"alert"}},[m]),A=m!=null?i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(b=a.xstyleConfig)==null?void 0:b.item],children:m.element!=null?m.element:m.labelRenderer&&i.jsx(c("BaseInlinePressable.react"),{onPress:function(a){t(),m.onPress(a)},testid:void 0,xstyle:l.link,children:m.labelRenderer(m.label)})}):null;n=i.jsxs(i.Fragment,{children:[n!=null&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(e=a.xstyleConfig)==null?void 0:e.item],children:n}),i.jsx(c("BaseView.react"),babelHelpers["extends"]({xstyle:[l.item,l.itemText,a==null||(f=a.xstyleConfig)==null?void 0:f.item]},z,{children:r({toastMessageId:y})})),A!=null&&(d("basePushToast").passesNewToastAPIGK()?A:i.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:A})),Boolean(o)&&i.jsx(c("BaseView.react"),{xstyle:[l.item,a==null||(g=a.xstyleConfig)==null?void 0:g.item],children:o})]});n=q!=null?q(n):n;return i.jsx(c("BaseToastContentWrapper.react"),{ariaLabelledBy:m!=null&&d("basePushToast").passesNewToastAPIGK?y:void 0,ref:w,role:d("basePushToast").passesNewToastAPIGK()&&(m!=null||Boolean(o))?"dialog":void 0,testid:void 0,themeConfig:v,useInvertedDisplayMode:x,xstyle:[l.root,u==="full-width"&&l.rootFullWidth,p==="dense"&&l.rootDense,s,a==null||(h=a.xstyleConfig)==null?void 0:h.container],children:n})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(a,b,c,d,e,f,g){var h,i="javascript-sandbox",j="OverrideServer",k="www_sandbox",l="www_tier";a=function(){function a(){}var d=a.prototype;d.patchRequestHeaders=function(a){var d={},e=c("RTISubscriptionManagerConfig").bladerunner_www_sandbox,f=c("RTISubscriptionManagerConfig").is_intern;if(!(h||(h=c("isEmpty")))(c("WebDriverConfig").auxiliaryServiceInfo)){var g;g=(g=c("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?g:c("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];g!=null?(typeof g.ip_address==="string"?d[j]=g.ip_address+":18295":typeof g.hostname==="string"&&(d[j]=g.hostname+":18295"),typeof c("WebDriverConfig").originHost==="string"&&(d[k]="www."+c("WebDriverConfig").originHost)):e!=null&&(d[i]=e)}else e!=null&&(d[i]=e);f===!0&&(d[l]="intern");if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){g=b("cr:3024")==null?void 0:b("cr:3024").get();g!=null&&(d.is_test="true",d.original_request_id=g)}c("gkx")("20929")&&(d["Accept-Ack"]="RSAck");for(e in a)d[e]=a[e];d.http_referer=window.location.href;return d};return a}();d=new a();e=d;g["default"]=e}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f,g){var h,i="bladerunner_js_client",j={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$2>=2&&c("FBLogger")(i).info("BladeRunner info: %s",a),this.$3(j.info,a)};b.warn=function(a){this.$2>=1&&c("FBLogger")(i).warn("BladeRunner warn: %s",a),this.$3(j.warning,a)};b.exception=function(a,b){b===void 0&&(b="");var d=b+" "+a.toString();this.$2>=0&&c("FBLogger")(i).warn("BladeRunner exception: %s, %s",b,a.toString());this.$3(j.exception,d)};b.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};b.bumpCounter=function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$1=a};b.setFBLoggerLevel=function(a){this.$2=a};b.$3=function(a,b){};return a}();b=new a();e=b;g["default"]=e}),98);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f,g){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};g.StreamFrameType=a;g.StreamRequestType=b}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){var h=function(){function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};b.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.updateRetryRequestPayload=function(a){a!=null?this.payload=c("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.requestType=o(b.requestType);c.payload=r(b.payload);c.headers=u(b.headers);c.extraHeader=r(b.extraHeader);c.requestTarget=r(b.requestTarget);c.instrumentationData=r(b.instrumentationData);return c};return a}(),i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=p(b.dataId);c.data=r(b.data);c.shouldAck=w(b.shouldAck);return c};var b=a.prototype;b.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};b.rawDataSize=function(){return this.data==null?0:this.data.length};b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return c("Base64").decode(this.data)};b.setData=function(a){this.data=c("Base64").encode(a)};b.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}(),j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=o(b.dataId);c.success=v(b.success);c.message=r(b.message);c.code=p(b.code);return c};return a}();j.ACK_CODE_LANDED_AND_ACCEPTED=20;j.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;j.ACK_CODE_FAILED_TO_LAND=50;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=p(b.streamId);c.message=r(b.message);return c};return a}(),l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.status=o(b.status);c.message=r(b.message);c.code=p(b.code);c.shouldRetry=w(b.shouldRetry);c.retryDelayMs=p(b.retryDelayMs);return c};return a}(),m=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.newBody=r(b.newBody);c.newExtraHeader=r(b.newExtraHeader);c.patchExtraHeader=r(b.patchExtraHeader);c.killBody=w(b.killBody);c.temporary=w(b.temporary);return c};return a}(),n=function(){function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};b.isInstrumented=function(){if(this.type===d("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===d("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(b){var e=new a();e.type=o(b.type);switch(e.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:e.request=h.readObject(s(b.request));break;case d("BladeRunnerTypes").StreamFrameType.DATA:e.data=i.readObject(s(b.data));break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:e.dataAck=j.readObject(s(b.dataAck));break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:e.statusUpdate=l.readObject(s(b.statusUpdate));break;case d("BladeRunnerTypes").StreamFrameType.LOG:e.log=k.readObject(s(b.log));break;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:e.rewriteRequest=m.readObject(s(b.rewriteRequest));break;default:c("BladeRunnerLogger").warn("Frame with unexpected type: "+e.type);return null}return e};a.newRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var a=JSON.parse(this.instrumentationData);return(a=a.dataFlowTracingData)==null?void 0:a.traceId}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e of b.frames){var f=n.readObject(e);f!=null&&d.push(f)}f=b.instrumentationData||null;return new a(c,d,f)};return a}();function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}g.GatewayStreamRequest=h;g.GatewayStreamData=i;g.GatewayStreamDataAck=j;g.GatewayStreamLog=k;g.GatewayStreamStatusUpdate=l;g.GatewayStreamRewriteRequest=m;g.GatewayStreamFrame=n;g.GatewayStreamBatch=a}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});f["default"]=a}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});f["default"]=a}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){this.$4(a);var b=[];for(var e of a.getFrames())this.$2.witnessFrame(e)&&b.push(e);e=this.$2.getRequest();(e=e.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,{},(e=a.getInstrumentationData())==null?void 0:e.auxId,null,a.getInstrumentationDataDfTraceId());b.length>0&&this.$5(new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,b,a.instrumentationData))};b.onDisconnect=function(){this.$2.resetErrors();var a=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){var b=this;a=a.getFrames().filter(function(a){return a.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(a of a){var e=a.getStatusUpdate();if(e.status==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||e.status==d("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,g=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=d("BladeRunnerStreamStatus").StreamStatus.STOPPED;var i=h;e.retryDelayMs!=null&&(i=e.retryDelayMs);c("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?c("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(c("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?c("setTimeoutAcrossTransitions")(function(){return b.$6()},i):this.$6())}else c("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+g+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?c("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):c("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();a!=null&&this.$2.updateRetryRequestPayload(a);this.$3.sendRetryStreamRequest(this.$2)}};b.$5=function(a){c("BladeRunnerLogger").bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(a of a.getFrames())try{switch(a.type){case d("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(a.getData());b.push(a.getData());break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(a.getStatusUpdate().status);break;case d("BladeRunnerTypes").StreamFrameType.LOG:var e=a.getLog().message;e!=null&&this.$1.onLog(e);break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){c("BladeRunnerLogger").bumpCounter("send_to_handler_error"),c("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}this.$7(b)};b.$7=function(a){var b=[];for(a of a)if(a.shouldAck===!0&&a.dataId!=null){var c=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();c.streamId=a.streamId;c.dataId=a.dataId;c.success=!0;b.push(c)}this.$3.sendDataAcks(b)};return a}();g["default"]=a}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("819");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",a);e=b;g["default"]=e}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1857112");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e=b;g["default"]=e}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","FBLogger","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h;e="rs_debug_logging";var i=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","FBLQ:comet_notifications_live_query_experimental"],j=0;function k(){var a=Date.now();j>=a?j+=1:j=a;return j.toString()}var l=function(){function a(a,b,c,e,f,g,h,i,j,k){this.$10=[];this.$11=!1;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.$7=h;this.$8=i;this.$9=j;this.$12=k!=null?k:!1;a=d("ConstUriUtils").getUri(window.location.href);a&&(this.$13=a.getDomain())}var b=a.prototype;b.logE2EEvent=function(a,b,c,d,e,f,g){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=null);if(this.$3==="Falco")return;e={request_id:this.$1,resume_id:"0",retry_id:e,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:b,timestamp_ms:k(),aux_id:d,additional_data:c,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:f};this.$14(e,g)};b.$14=function(a,b){if(!this.$12){c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return a});return}this.$10.push(a);if(this.$11||a.event==c("RequestStreamE2EClientLoggerEvent").FAILURE||a.message_type==c("RequestStreamE2EClientLoggerMessageType").RESPONSE){var d={events:this.$10};c("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return d});this.$10=[];this.$11=!0}};b.getRequestId=function(){return this.$1};return a}();function a(a,b,c){if(a==null||a.method==null)return null;var d=!1;i.includes(a.method)&&(d=!0);if(b==null||b.length==0)return null;b=JSON.parse(b);return b.requestId==null?null:new l(b.requestId,c,a.method,m(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate,b.dgwStreamGroupLoggingId,b.dgwCountPriorStreamsInGroup,d)}function m(a,b){if(a==="FBLQ"&&b.config_id)return b.config_id;if(a==="SKY"){if(b.topic){var c=b.topic.lastIndexOf("/");return c>0?b.topic.substr(0,c):b.topic}return}return a}function b(a,b,d,e,f,g){f===void 0&&(f=null);g===void 0&&(g=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var h={request_id:a.requestId,resume_id:"0",transport:b,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:k(),aux_id:a.auxId,additional_data:f,df_trace_id:g};c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return h})}g.RequestStreamE2ELogger=l;g.createStreamLogger=a;g.logRequestStreamE2EEventStatic=b}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Connected",j="Disconnected",k="/br_sr",l="/sr_res",m=null;function n(a){var b;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return(b=a.request)==null?void 0:b.getInstrumentationData();case d("BladeRunnerTypes").StreamFrameType.DATA:return(b=a.data)==null?void 0:b.getInstrumentationData()}return null}function o(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case d("BladeRunnerTypes").StreamFrameType.DATA:return c("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function p(a){if(a===null)return null;switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case d("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function q(a){var b,c={};a==null||(b=a.frames)==null||b.forEach(function(a){if(a.type===d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){a=(a=a.statusUpdate)==null?void 0:a.status;a=p(a);a!==null&&(c.flow_status=a)}});return c}function r(a,b){var c;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:b.data_base64_size=(c=a.request)==null||(c=c.payload)==null||(c=c.length)==null?void 0:c.toString();break;case d("BladeRunnerTypes").StreamFrameType.DATA:b.data_base64_size=(c=a.data)==null||(c=c.rawDataSize())==null?void 0:c.toString();break}return null}function s(a,b,e){var f=n(a);if(f==null)return;var g=o(a);if(g==null)return;var h=null;switch(b){case d("MqttPublishListener").MqttPublishEvent.SENT:h=c("RequestStreamE2EClientLoggerEvent").SENT;break;case d("MqttPublishListener").MqttPublishEvent.ACKED:h=c("RequestStreamE2EClientLoggerEvent").PUBACK;break;case d("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:h=c("RequestStreamE2EClientLoggerEvent").FAILURE;e.reason==null&&(e.reason=b);break}if(h==null)return;r(a,e);if(((b=a.request)==null?void 0:b.e2eLogger)!=null&&f.clientLoggingDisabled==null){(b=a.request)==null||b.e2eLogger.logE2EEvent(g,h,e,f.auxId)}else d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(f,d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,g,h,e)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:c("FBMqttChannel"),this.$8=new Map(),c("BladeRunnerLogger").setClientSessionId(c("uuidv4")()),this.$9()}a.get=function(){m==null&&(m=new a(c("FBMqttChannel")));return m};var e=a.prototype;e.sendNewStreamRequest=function(b,d){d=new(c("BladeRunnerEventHandler"))(b,d,this);var e=b.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(c("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),c("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$11(d,e.streamId))};e.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};e.sendCancel=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_cancel");var b=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();b.streamId=a.streamId;b.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;this.$13(b,a);this.removeStream(a.streamId)};e.sendAmendment=function(a,b,e){c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=new(d("BladeRunnerTypesInternal").GatewayStreamData)();f.streamId=a;f.setData(b);e!=null&&(f.instrumentationData=e);this.$14(f)};e.sendAmendmentWithAck=function(a,e,f){var g=this;c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var i=this.$15(),j=new(d("BladeRunnerTypesInternal").GatewayStreamData)();j.streamId=a;j.setData(e);j.shouldAck=!0;j.dataId=i;f!=null&&(j.instrumentationData=f);a=new(h||(h=b("Promise")))(function(a,b){g.$8.set(i,{resolve:a,reject:b})});this.$14(j);return a};e.$14=function(a){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};e.sendDataAcks=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};e.removeStream=function(a){this.$6["delete"](a)};e.getStreamCount=function(){return this.$6.size};e.getNextStreamId=function(){this.$5++;return this.$5};e.onMQTTStateChanged=function(a){this.$16();if(a!=j&&a!=i||this.$4==a)return;this.$4=a;c("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==j?(c("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==i&&c("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};e.$12=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};e.$13=function(a,b){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=b.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").SENT)}};e.$17=function(a){for(a of a)this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(a));this.$16()};e.$19=function(){this.$2++;return this.$2};e.$15=function(){this.$3++;return this.$3};e.$16=function(){var a=!1;if(this.$7.getConnectionState()===i&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};e.$20=function(a){var b=this,e=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),f=e.write();if(f.length>this.$21()){var g=Math.floor(a.length/2);if(g===0){a.forEach(function(a){return s(a,d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var h=new Error("Publish is too long: "+f.length);h.stack;this.$22(e,h,"Publish is too long");throw h}this.$20(a.slice(0,g));this.$20(a.slice(g,a.length))}else try{c("BladeRunnerLogger").info("send message to "+k+" ("+f.length+" bytes)");h={qos:1,skipBuffer:!1};if(e.isInstrumented()){var i=Date.now();h.listener={onEvent:function(b){var c=(Date.now()-i).toString();a.forEach(function(a){s(a,b,{latency:c})})}}}this.$7.publish(k,f,h)["catch"](function(a){b.$22(e,a,"Failed publishing to MQTT")});c("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$22(e,a,"Failed publishing to MQTT");throw a}};e.$9=function(){var a=this;c("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?c("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(c("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),c("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(k,function(a){throw new Error("Unexpected response: "+k+" "+a.toString())});this.$7.subscribe(l,function(b){a.$23(b)})};e.$23=function(a){a=d("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};e.$22=function(a,b,e){for(a of a.getFrames())if(a.type===d("BladeRunnerTypes").StreamFrameType.REQUEST){var f=a.getRequest(),g=this.$6.get(f.streamId);g!=null&&this.$24(g,f.streamId,d("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(a.type===d("BladeRunnerTypes").StreamFrameType.DATA){g=a.getData();f=g.dataId;if(g.shouldAck!=null&&g.shouldAck&&f!=null){var h=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();h.streamId=g.streamId;h.dataId=f;h.success=!1;h.code=d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;h.message=e;this.$25(h)}}c("BladeRunnerLogger").info("Failed publishing to MQTT: "+b.message);c("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};e.$25=function(a){var b=this.$8.get(a.dataId);b!=null&&(this.$8["delete"](a.dataId),a.success?b.resolve(!0):a.code===d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?b.resolve(!1):b.reject(a.message))};e.processBatch=function(a){try{d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a),a.getInstrumentationDataDfTraceId());c("BladeRunnerLogger").bumpCounter("socket_process_batch");var b=JSON.stringify(a);c("BladeRunnerLogger").info("Received batch ("+b.length+" bytes)");b=null;for(var e of a.getFrames()){var f=e.getStreamId();b==null&&(b=f);if(f!=null&&b!=f)throw new Error("Received batch with frames for multiple streams");e.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(e.getDataAck())}if(b!=null){f=this.$6.get(b);f!=null?f.onProxyResponse(a):c("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+b)}else c("BladeRunnerLogger").info("Received batch with no frames")}catch(a){c("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");c("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};e.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};e.$11=function(a,b){this.$24(a,b,d("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)};e.$24=function(a,b,c,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=b;g.status=c;g.shouldRetry=e;g.retryDelayMs=f;b=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(b)};e.$10=function(){if(!c("CurrentUser").isLoggedIn()){c("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};e.$21=function(){var a=1024*1024,b=512*1024;try{var d=c("justknobx")._("317");b=d*a}catch(a){}return Math.max(b-1024,0)};return a}();a.maxStreamCount=2e3;g["default"]=a}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){this.$1=a}var c=a.prototype;c.getStreamHandler=function(){return this.$1};c.cancel=function(){};c.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return!1});function c(b){return a.apply(this,arguments)}return c}();c.amendFireAndForget=function(a){};c.amendWithoutAck=function(a){};c.start=function(){return(g||(g=b("Promise"))).resolve()};c.isAlive=function(){return!1};c.canAmend=function(){return!1};c.getStatus=function(){return null};c.getStreamId=function(){return 0};return a}();f["default"]=a}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};b.isAlive=function(){return!(this.$2==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.REJECTED)};b.canAmend=function(){return this.$2==d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STOPPED};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:c=this.getLastStatus()!=d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:c=this.getLastStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var b=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var e of Object.keys(b))this.$1.headers[e]=b[e],d[e]=b[e];this.$1.extraHeader=JSON.stringify(d)}catch(b){c("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();g["default"]=a}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){var h,i=4,j={reason:"stream_dead"};a=function(a){function e(b,d,e){b=a.call(this,b)||this;b.$BladeRunnerSocketStream$p_1=e;b.$BladeRunnerSocketStream$p_2=new(c("BladeRunnerStreamState"))(d);b.$BladeRunnerSocketStream$p_2.setRetriesAllowed(i);return b}babelHelpers.inheritsLoose(e,a);var f=e.prototype;f.start=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.send(),b()})};f.send=function(){var a,b=this.$BladeRunnerSocketStream$p_2.getRequest();(a=b.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=b.payload)==null||(a=a.length)==null?void 0:a.toString()});this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())};f.amendWithAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=this.$BladeRunnerSocketStream$p_2.getRequest(),e=d.getInstrumentationData();if(e){var f,g;e.auxId=c("uuidv4")();(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null||(g=a.length)==null?void 0:g.toString()},e.auxId)}if(this.canAmend()){if(e){var i;(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null||(i=a.length)==null?void 0:i.toString()},e.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(d.streamId,this.$BladeRunnerSocketStream$p_3(a),e==null?null:JSON.stringify(e))}(f=d.e2eLogger)==null||f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,e==null?void 0:e.auxId);return(h||(h=b("Promise"))).reject("Stream is closed or not accepted")});function d(b){return a.apply(this,arguments)}return d}();f.amendFireAndForget=function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e,f;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null||(f=a.length)==null?void 0:f.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d));if(d){var g;(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null||(g=a.length)==null?void 0:g.toString()},d.auxId)}}else{(e=b.e2eLogger)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};f.amendWithoutAck=function(a){this.amendFireAndForget(a)};f.$BladeRunnerSocketStream$p_3=function(a){return typeof a=="object"?btoa(new TextDecoder("utf8").decode(a)):a};f.cancel=function(){var a=this.$BladeRunnerSocketStream$p_2.getRequest();(a=a.e2eLogger)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(d("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};f.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()};f.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()};f.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()};f.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId};return e}(c("BladeRunnerStream"));g["default"]=a}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function j(a,b){var d=c("RequestStreamE2EClientSamplingConfig").sampleRate;if(d>1&&a!=null){a=c("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];a==0?d=0:a!=null&&(d/=a)}return d==1?1:d/b}function k(a,b,d,e){var f=c("uuidv4")();(b.requestId==null||b.requestId===""||typeof b.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?b.requestId=a.requestId:b.requestId=f);b.requestId+="/_"+f.substring(0,4);b.resumeId="0";d!=null?b.sampleRate=d:b.sampleRate=void 0;f="";e!=null&&e.length>0&&(f=e);f.length>0&&(b.requestLogContext!=null&&b.requestLogContext.length>0?b.requestLogContext+=":":b.requestLogContext="",b.requestLogContext+=f);(a==null?void 0:a.method)==="Falco"&&(b.clientLoggingDisabled="Falco");d={};for(e of Object.keys(b).sort())d[e]=b[e];return JSON.stringify(d)}function a(a,b,d,e){b&&(!b.requestId.includes("/")&&!b.requestId.includes("#")||h(0,41721));e=j(a.method,e!=null?e:1);if(c("Random").coinflip(e))return k(a,b||{requestId:""},e,d);return i(b)?k(a,b||{requestId:""},null,d):""}g.isForceLogged=i;g.getSampleRateForLogging=j;g.normalizeInstrumentationData=k;g.validateInstrumentationData=a}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:c("BladeRunnerSocket").get(),b&&(this.$2=b)}var e=a.prototype;e.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};e.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};e.logInfo=function(a){c("BladeRunnerLogger").info(a)};e.bumpCounter=function(a){c("BladeRunnerLogger").bumpCounter(a)};e.$3=function(a,b,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamRequest)();g.streamId=this.$1.getNextStreamId();g.requestType=d("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;g.headers=c("BladeRunnerConfig").patchRequestHeaders(a);g.extraHeader=JSON.stringify(g.headers);g.payload=b!=null?c("Base64").encode(b):null;f!=null&&(f.transport="WEB_RS_MQTT");g.instrumentationData=d("RequestStreamE2ESampling").validateInstrumentationData(g.headers||{},f);g.e2eLogger=d("RequestStreamE2ELogger").createStreamLogger(g.headers,g.instrumentationData,this.$2);return new(c("BladeRunnerSocketStream"))(e,g,this.$1)};return a}();g["default"]=a}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i=["start_time","resources","durations"],j={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function k(a,b,c){return Math.max(0,(c!=null?c:0)-Math.max(a,b!=null?b:0))}function l(){return{blocking:babelHelpers["extends"]({},j),nonblocking:babelHelpers["extends"]({},j),"default":babelHelpers["extends"]({},j)}}function m(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function n(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);m(a,k(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function o(a,b,d,e){var f=l();for(a of c("objectEntries")(a)){var g=a[0],i=a[1];for(i of i){var j=i[0],k=i[1],m=void 0,o=void 0;switch(k.type){case"async":o=null;m=d;break;case"js":case"css":o=[k.src,k.d===1];m=f;break;default:k,h(0,3721)}n(m[g],j,b,o,e)}}return f}function p(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f of c("objectEntries")(b)){var g=f[0],h=f[1];for(h of h.entries()){var i=h[0],j=h[1];a[g].has(i)?e.ef[g].set(i,j):e.overpredicted[g].set(i,j)}}for(i of c("objectEntries")(a)){j=i[0];h=i[1];for(g of h.entries()){f=g[0];a=g[1];b[j].has(f)||e.unpredicted[j].set(f,a)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=p(c,b.tierOne);f=g.unpredicted;g={ef:o(g.ef,b.fetchRsrcsStart,l(),e),overpredicted:o(g.overpredicted,b.fetchRsrcsStart,l(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:o(f,d,l(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i of a.components){var j=c("Bootloader").getComponentTiming(i),n=j.tierTwoStart,p=j.tierTwoEnd,q=j.tierThreeStart;j=j.tierThreeEnd;e=Math.max(e,k(b,n,p));f=Math.max(f,k(b,b,p));g=Math.max(g,k(b,q,j));h=Math.max(h,k(b,b,j))}n=new Set();p=l();q=o(a.tierOne,b,p,n);j=o(a.tierTwo,b,p,n);i=o(a.tierThree,b,p,n);var r=p.blocking.downloaded_count!=0,s=l(),t=d("BootloaderEvents").newResourceMapSet(),u=new Set();for(var v of[a.tierOne,a.tierTwo,a.tierThree])for(var w of c("objectValues")(v))for(var x of w.keys())u.add(x);x=0;w=0;v=0;for(var y of a.beRequests.values()){x+=k(b,b,y.requestStart);w+=y.serverGenTime;v+=y.jsmodsEnd-y.jsmodsStart;m(s[r?"blocking":"nonblocking"],y.responseStart-y.requestStart,[y.uri,!1]);for(var z of c("objectEntries")(y.rsrcs)){var A=z[0],B=z[1];for(B of B){var C=B[0],D=B[1];u.has(C)||t[A].set(C,D)}}}C=o(t,b,p,n);return{ref:a.ref,components:a.components,timeslice_context:(D=a.timesliceContext)==null?void 0:D.name,start_time:b,err_count:n.size,resources:{t1:q,t2:j,t3:i,be:s,unpredicted:C,async:p},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:x,be_server_gen:w,be_jsmods:v,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,i);for(b of c("objectEntries")(b)){var e=b[0],f=b[1];for(f of c("objectEntries")(f)){var g=f[0],h=f[1];for(h of c("objectEntries")(h)){var j=h[0],k=h[1];a[e+"_"+g+"_resources_"+j]=Math.round(Number(k))}}}for(j of c("objectEntries")(d)){k=j[0];h=j[1];a[k+"_duration"]=Math.round(Number(h))}if(a.payloadStats){for(g of c("objectEntries")(a.payloadStats)){f=g[0];e=g[1];for(b of c("objectEntries")(e)){d=b[0];k=b[1];a[f+"_"+d+"_count"]=Math.round(Number(k))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT","ERROR"]);c=a;f["default"]=c}),66);
__d("CometBootloaderErrorsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1109");b=d("FalcoLoggerInternal").create("comet_bootloader_errors",a);e=b;g["default"]=e}),98);
__d("CometBootloaderErrorLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderErrorsFalcoEvent","CometTimeSpentNavigation","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.parent_lid;d("ResourceTimingStore").init();var e=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:b,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}},f=function(a,b){var f=d("BootloaderEventsPerf").computeBLData(a.bootloaderData),g=d("BootloaderEventsPerf").flattenData(f);c("CometBootloaderErrorsFalcoEvent").log(function(){var c=babelHelpers["extends"]({},g,e(f.start_time),{status:b,was_offline:a.offline});a.erroredResources!=null&&(c.errored_resource_urls=Array.from(a.erroredResources));return c})};d("BootloaderEvents").onBootloadError(function(a){f(a,"ERROR")})}g.initLogging=a}),98);
__d("CometBootloaderEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("177");b=d("FalcoLoggerInternal").create("comet_bootloader_events",a);e=b;g["default"]=e}),98);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsFalcoEvent","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","UserTimingUtils","gkx","performance","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=c("gkx")("10211");function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(i||!(b||e||j===!0))return;i=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,g(b.start_time))})});j&&(d("BootloaderEvents").onBootload(function(a){d("UserTimingUtils").measureModern("Bootloader: "+a.components.join(", "),{end:a.callbackEnd-(h||(h=c("performance"))).timeOrigin,start:a.startTime-h.timeOrigin},"Bootloader Events")}),d("BootloaderEvents").onHasteResponse(function(a){d("UserTimingUtils").measureModern("Haste: "+a.source,{end:a.jsmodsEnd-(h||(h=c("performance"))).timeOrigin,properties:[["Source Detail",a.sourceDetail]],start:a.startTime-h.timeOrigin},"Bootloader Events")}));var k=function(a,b){var e=d("BootloaderEventsPerf").computeBLData(a),f=d("BootloaderEventsPerf").flattenData(e);c("CometBootloaderEventsFalcoEvent").log(function(){return babelHelpers["extends"]({},f,g(e.start_time),{status:b})})};b&&d("BootloaderEvents").onBootload(function(a){return k(a,"SUCCESS")});d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return k(a,"TIMEOUT")})}g.initLogging=a}),98);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){if(!c("gkx")("26332"))return;a=a.filter(function(a){return!i.has(a)});if(a.length===0)return;a.forEach(function(a){d("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",a)});var b=(h||(h=c("performanceAbsoluteNow")))(),e=c("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:a},method:"POST"}).then(function(a){return{fetchPredictionsEnd:(h||(h=c("performanceAbsoluteNow")))(),fetchPredictionsStart:b,payload:a}});a.forEach(function(a){return i.set(a,e)})}function a(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);j(a.map(function(a){a=a.name;return a}))}function k(a){if(!c("gkx")("26332"))return;j(a);var b=(h||(h=c("performanceAbsoluteNow")))();a.forEach(function(a){var e=i.get(a);e&&e!==!0&&c("promiseDone")(e,function(e){var f=e.fetchPredictionsEnd,g=e.fetchPredictionsStart;e=e.payload;if(e!=null&&typeof e==="object"){var h;c("Bootloader").loadPredictedResourceMap(e.predictions[a],{onLog:function(c){return d("BootloaderEvents").notifyHasteResponseEF("relay_3d",a,{fetchPredictionsEnd:f,fetchPredictionsStart:g,fetchRsrcsStart:b,tierOne:c})}},(h=(h=e.consistency)==null?void 0:h.rev)!=null?h:null);e.consistency!=null&&c("ClientConsistencyEventEmitter").emit("newEntry",e.consistency)}});i.set(a,!0)})}function b(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);b=a.map(function(a){a=a.name;return a});k(b)}e={fetchPredictedResources:b,fetchPredictedResourcesForQueries:k,fetchPredictions:a,fetchPredictionsForQueries:j};g["default"]=e}),98);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=["action","href","icon","impressionLoggingRef","message","onDismiss","target","testid","truncateText","withoutCloseButton"],k,l=k||(k=d("react")),m=k.useMemo,n={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,k=a.message,o=a.onDismiss,p=a.target,q=a.testid;q=q===void 0?"Toast":q;q=a.truncateText;var r=q===void 0?!0:q;q=a.withoutCloseButton;q=q===void 0?!1:q;var s=babelHelpers.objectWithoutPropertiesLoose(a,j),t=m(function(){return e!=null?{target:p,url:e}:void 0},[e,p]);return l.jsx(c("BaseToast.react"),{action:b!=null?{label:b.label,labelRenderer:function(a){return l.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:a})},onPress:b.onPress,testid:b.testid}:void 0,addOnStart:f,closeButton:q!==!0&&l.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._(/*BTDS*/"Close"),onPress:o,size:24,testid:void 0}),linkWrapper:s.onPress!=null||t!=null?function(a){return l.jsx(c("CometPressable.react"),babelHelpers["extends"]({},s,{expanding:!0,linkProps:t,xstyle:n.pressable,children:a}))}:void 0,message:function(a){a=a.toastMessageId;return l.jsx(c("FDSText.react"),{color:"primary",id:a,numberOfLines:r?4:void 0,type:"body3",children:k})},onDismiss:o,testid:void 0,toastRef:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};e=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.ANALYTICS_SAMPLE_RATE=a;f.BUCKET_DELIMITER=b;f.CONTEXT_BUCKET_STRATEGY=c;f.CONFIG_TYPE=d;f.EMPTY_RESOLVED_CONTEXTS=e;f.EMPTY_RESOLVED_MONITORS=g;f.EMPTY_RESULT_PARAMS=h;f.ERROR=i;f.JSON_SUB_SAMPLE_RATE=j;f.LIST_DELIMITER=k;f.TYPE=l}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(a of a){var c=a.bucketIndex;if(c==void 0)break;b.push(c)}return b};b=function(a){var b=[];for(a of a){var c=a.bucketName;if(c===void 0)break;b.push(c)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(a of a){var c=a.value;if(c===void 0)break;b.push(c)}return b};f.getBucketIndices=a;f.getBucketNames=b;f.getContextNames=c;f.getContextValues=d}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["cfg_ver_timestamp","policy_id","version","sample_rate"],i=function(a){return a.join(d("ContextualConfigConstants").LIST_DELIMITER)},j=function(a,b){for(var c of h)b[c]!=null&&(a[c]=b[c]);b.name&&(a.config_name=b.name)},k=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=i(e.map(function(a){return a.value}))||"INVALID";a.context=i(d("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=i(d("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=i(d("ContextualConfigResolvedContextsUtils").getContextNames(b));a.monitor_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(b))};function a(a,b,c){var e={sample_rate:d("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};j(e,a);k(e,b);c&&(e.config_contents=JSON.stringify(a));return e}g["default"]=a}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2=a,this.$4=d("Random").random()<1/a.sample_rate,this.$3=b,this.$1=c}var b=a.prototype;b.getData=function(){return this.$2};b.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};b.isSampled=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.createEvent=function(a){a=new(c("ContextualConfigExposureEvent"))(a,this.$2,this.$1);return a};return a}();function a(a,b){return new h(a,b)}g["default"]=a}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){};b=function(a){d("MarauderLogger").log("contextual_config_exposure","",a)};e=c("ContextualConfigExposureLoggerFactory")(a,b);g["default"]=e}),98);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===!1)throw new Error(b)}f["default"]=a}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return Array.isArray(a)};b=function(a){return typeof a==="boolean"};c=function(a){return a!=null};e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case d("ContextualConfigConstants").TYPE.BOOL:case d("ContextualConfigConstants").TYPE.FLOAT:case d("ContextualConfigConstants").TYPE.INT:case d("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};g.isArray=a;g.isBoolean=b;g.isDefined=c;g.isKey=e;g.isInteger=f;g.isNonEmptyString=h;g.isNumber=i;g.isString=j;g.isType=k}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(d("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}g["default"]=a}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var f=c("ContextualConfigParseBoolean")(a);e=function(a){return a===f};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:e=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:e=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:e=function(a){return!0};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return e(a)}}g["default"]=a}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return(h||(h=c("ContextualConfigAssert")))(a>0,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};b=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};e=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a<b,d("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};g.assertHasValues=a;g.assertNumberOfValues=b;g.assertValueOrder=e}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=e.map(f?c("ContextualConfigParseInteger"):h||(h=c("ContextualConfigParseFloat"))),i;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var j=f?c("ContextualConfigParseInteger")(a):(h||(h=c("ContextualConfigParseFloat")))(a);i=function(a){return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===j};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,2);d("ContextualConfigPredAssertions").assertValueOrder(g[0],g[1]);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]&&a<g[1]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<=g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a!==g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return i(a)}}g["default"]=a}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=/^\/(.+)\/(.*)$/;function a(a){try{var b=a.match(h);if(b!=null)return new RegExp(b[1],b[2]);else return new RegExp(a)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}g["default"]=a}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){if(typeof a!=="string")throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},i=function(a){var b=[];for(a of a)b.push(h(a));return b};function a(a,b,e){var f=i(e),g;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:g=function(b){return typeof b!=="string"?!1:b===a};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:g=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:g=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:g=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)===-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);g=function(a){return typeof a!=="string"?!1:a.indexOf(f[0])!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);var h=c("ContextualConfigParseRegExp")(f[0]);g=function(a){return typeof a!=="string"?!1:h.test(a)};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return g(a)}}g["default"]=a}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},k=d("ContextualConfigValidators").isKey(d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a)&&k(a.toUpperCase()),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},n=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},o=function(a,b){var e=b.name;n(e);var f=b.strategy;l(f);b=b.values||[];m(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParsePredBoolean")(e,f);case d("ContextualConfigConstants").TYPE.FLOAT:return c("ContextualConfigParsePredNumeric")(e,f,b,!1);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParsePredNumeric")(e,f,b,!0);case d("ContextualConfigConstants").TYPE.STRING:return c("ContextualConfigParsePredString")(e,f,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},p=function(a,b){i(b);var c=b.name;n(c);return{name:c,pred:o(a,b)}};function a(a,b){j(b);return b.map(function(b){return p(a,b)})}g["default"]=a}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a)&&a.length>0,d("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name,d=a.type;a=a.buckets;k(b);l(d);return{name:b,type:d,buckets:c("ContextualConfigParseContextBuckets")(d,a)}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}f["default"]=a}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a),d("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,b){j(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParseBoolean")(b);case d("ContextualConfigConstants").TYPE.FLOAT:return(i||(i=c("ContextualConfigParseFloat")))(b);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParseInteger")(b);case d("ContextualConfigConstants").TYPE.STRING:return b;default:throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_RESULTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},n=function(a,b){for(a of a)if(a.name===b)return a.type;throw new Error(d("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},o=function(a){return function(b){k(b);var d=b.name;l(d);var e=n(a,d);m(e);b=(i||(i=c("ContextualConfigParseResultParamValue")))(e,b.value);return{name:d,type:e,value:b}}};function a(a,b){j(b);return b.map(o(a))}g["default"]=a}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b.map(function(b,c){return{name:a[c].name,value:b}}));i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("ContextualConfigParseDenseResultParams")(a,b)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}g["default"]=a}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name;a=a.type;k(b);l(a);return{name:b,type:a}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(m(a),d("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(a){var b={};for(a of a){if(b[a.name])return!1;b[a.name]=!0}return!0},n=function(a){k(a.name);j(a.type);return a};function a(a){i(a);a=a.map(n);l(a);return a}g["default"]=a}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_VECTOR)},k=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(a,b){k(a.length,b.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=b[d];(i||(i=c("ContextualConfigParseResultParamValue")))(e,f)}},m=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){j(c);b=m(b);var d=a.length;k(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;l(a,c.slice(f,f+d))}return c}g["default"]=a}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,b,c){var e=null;a=a.map(function(a){var f=a.name,g={name:f};if(e!=null)return g;var i;c[f]!=null?i=c[f]:b[f]!=null?i=b[f]():i=null;g.value=i;if(a.buckets!=null){f=h(a.buckets,i);if(f==null){e=new Error(d("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return g}a=f[0];i=f[1];g.bucketName=a;g.bucketIndex=i}return g});return[e,a]}g["default"]=a}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},k=function(a,b,d,e){try{b=b.slice(d,d+a.length);return[null,c("ContextualConfigParseDenseResultParams")(a,b)]}catch(a){return[a,e]}},l=function(a,b,d){try{d=d.reduce(function(b,d,e){(h||(h=c("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return b+a[e]*d},0);return[null,d*b]}catch(a){return[a,-1]}};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);var d=c("ContextualConfigParseContexts")(a.contexts);this.aux=j(d);this.contexts=d;this.defaults=c("ContextualConfigParseDenseDefaults")(b,a.vectorDefaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=b;this.vector=c("ContextualConfigParseVector")(b,d,a.vector)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.aux,e=this.globalContextProviders,f=this.contexts,g=this.defaults,h=this.monitors,i=this.outputs,j=this.vector;f=c("ContextualConfigResolveContexts")(f,e,a);var m=f[0];f=f[1];if(m!=null)return[m,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=l(b,i.length,d("ContextualConfigResolvedContextsUtils").getBucketIndices(f));b=m[0];m=m[1];if(b!=null)return[b,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];b=k(i,j,m,g);i=b[0];j=b[1];if(i!=null)return[i,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=c("ContextualConfigResolveContexts")(h,e,a);g=m[0];b=m[1];return g!=null?[g,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,j,f,b]};return a}();g["default"]=a}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.values=c("ContextualConfigParseResultParams")(b,a.values)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.monitors,f=this.values;e=c("ContextualConfigResolveContexts")(e,b,a);b=e[0];a=e[1];return b!=null?[b,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();g["default"]=a}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(b of b)c[b.name]=b;b=[];for(a of a){var d=c[a.name];b.push(d!=null&&d.name===a.name&&d.type===a.type?d:a)}return b}f["default"]=a}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b);i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(a,b){j(b);var d=b.bucket;b=b.values;k(d);l(b);return{bucket:d,values:c("ContextualConfigParseResultParams")(a,b)}};function a(a,b){i(b);return b.reduce(function(b,c){c=m(a,c);b[c.bucket]=c.values;return b},{})}g["default"]=a}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){j(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.contexts=c("ContextualConfigParseContexts")(a.contexts);this.defaults=c("ContextualConfigParseDefaults")(b,a.defaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.table=c("ContextualConfigParseTable")(b,a.table)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.table;e=c("ContextualConfigResolveContexts")(e,b,a);var j=e[0];e=e[1];if(j!=null)return[j,f,e,[]];j=d("ContextualConfigResolvedContextsUtils").getBucketNames(e).join(d("ContextualConfigConstants").BUCKET_DELIMITER);h=h[j]||i;j=c("ContextualConfigMergePartialResultParams")(f,h);f=c("ContextualConfigResolveContexts")(g,b,a);h=f[0];g=f[1];return h!=null?[h,j,e,[]]:[null,j,e,g]};return a}();g["default"]=a}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[1],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a)&&d("ContextualConfigValidators").isDefined(a.version),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(i.indexOf(a)!==-1,d("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,b){j(a);k(a.version);switch(a.cctype){case d("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(c("DenseContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(c("MultiOutputResolvedContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(c("TableContextualConfig"))(a,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var b=a.prototype;b.get=function(a,b){try{a=this.$1[a];if(typeof a!==typeof b){c("ContextualConfigWarn")(d("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return b}return a}catch(a){c("ContextualConfigWarn")(a.message);return b}};b.getParams=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,d("ContextualConfigConstants").EMPTY_RESULT_PARAMS,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();g["default"]=a}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f,g){"use strict";var h=1/d("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,i=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var b=a.prototype;b.$5=function(){if(this.$1)return this.$1;var a=this.$2,b=this.$4;try{b=c("ContextualConfigParseConfig")(b,a)}catch(a){b=new(c("ErrorContextualConfig"))(a)}this.$1=b;return b};b.$6=function(a){var b=this.isDebugLoggingEnabled,e=this.$3;e=!e&&d("Random").random()<h;e&&(this.$3=!0);a=c("ContextualConfigCollateExposureData")(this.$4,a,e);e=c("ContextualConfigExposureLogger").createEvent(a);e.log(b)};b.resolve=function(a){a===void 0&&(a={});var b=this.$1||this.$5();b=b.resolve(a);this.$6(b);return new(c("ContextualConfigResult"))(b[i])};return a}();g["default"]=a}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.sgTransportId=e,this.$2=f,this.$6=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$7(a,b,null,j.INFO,c,d,e)};b.$7=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$6)return;(k(a)&&this.$1!=null||!k(a)&&this.sgTransportId!=null)&&c("DgwClientFalcoEvent").log(function(){return{event:b,logging_id:h!=null?h:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.sgTransportId,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$7(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var e=this.$1;try{var f=(yield new(h||(h=b("Promise")))(function(b,d){e.set(a,new i(a,c,b))}));f===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms"));e["delete"](a);return f}catch(b){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");e["delete"](a);throw b}});function c(b,c){return a.apply(this,arguments)}return c}();c.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e["delete"](c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function k(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var l=null,m=null;function n(){m==null&&(m=(i||(i=b("Promise"))).resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){l=a}));return m}e=function(){function a(){}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,j=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint,t=a.establishStreamFrame,u=a.trafficTracing;a=a.authToken;var v=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);t!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=k(t));o!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);j!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=j);u!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+u);a!==void 0&&(v[d("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=a);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(v,b)||(v[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(v);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete v[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(v));return f.toStringRawQuery()};return a}();f=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return n()});function c(){return a.apply(this,arguments)}return c}();var c=a.prototype;c.malloc=function(a){try{a=l.__malloc(a);if(a===0){var b;(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null||b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};c.free=function(a){l.__free(a)};c.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};c.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=l.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(j*4);if(f===-1)return;e=f;var g=e+j,h=g+j,i=h+j;b=l.__DgwCodecDecode(c,b,e,g,h,i);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null||h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=l.HEAPU32.subarray(i/j,i/j+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;i=l.HEAPU32.subarray(g/j,g/j+1)[0];var k=l.HEAPU32.subarray(e/j,e/j+1)[0],m=[];c=function(){var b=l.__getDGWFramePtr(k,n),c=l.__getFrameType(b);switch(c){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:c=l.__getDrainReasonFromDrainFrame(b);var e=d("DGWConstants").drainReasonToDrainReasonString(c);(c=a.$2)==null||c.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+e);m.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(e)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:var f=l.__getStreamIdFromStreamGroupFrame(b);c=l.__getEncodedParamsFromEstablishStreamFrame(b);var g=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getEncodedParamsSizeFromEstablishStreamFrame(b)));a.free(c);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEstablishStreamReceived(f,g)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:var h=l.__getStreamIdFromStreamGroupFrame(b);c=l.__getDataFromGroupedStreamDataFrame(b);var i=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getDataSizeFromGroupedStreamDataFrame(b)));a.free(c);var j=l.__getRequiresAckFromGroupedStreamDataFrame(b)?l.__getAckIdFromGroupedStreamDataFrame(b):null;m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamDataReceived(h,i,j)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:var o=l.__getStreamIdFromStreamGroupFrame(b),p=l.__getAckIdFromGroupedStreamAckFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamAckReceived(o,p)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:var q=l.__getStreamIdFromStreamGroupFrame(b);m.push(function(){var b;return(b=a.$3)==null?void 0:b.onGroupedStreamEndOfDataReceived(q)});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:m.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}a.free(b)};for(var n=0;n<i;++n)c();this.free(f);for(b=0;b<m.length;b++)m[b]()};c.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=l.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(j*2);h=a;var i=a+j;e=l.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,i);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null||g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=l.HEAPU32.subarray(h/j,h/j+1)[0];c=l.HEAPU32.subarray(i/j,i/j+1)[0];f=new Uint8Array(l.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};c.encodeAck=function(a,b){var c=this.malloc(j*2);if(c===-1)return null;var e=c,f=c+j;b=l.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null||a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=l.HEAPU32.subarray(e/j,e/j+1)[0];b=l.HEAPU32.subarray(f/j,f/j+1)[0];e=new Uint8Array(l.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};c.encodeDrain=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=l.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(j*2);f=e;var g=e+j;b=l.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null||c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=l.HEAPU32.subarray(f/j,f/j+1)[0];b=l.HEAPU32.subarray(g/j,g/j+1)[0];a=new Uint8Array(l.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};c.encodeEndOfData=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};c.encodePing=function(){var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);return b};c.encodePong=function(){if(this.$5!=null)return this.$5;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null||f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=k;g.DGWUtils=e;g.DGWCodec=f}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g,h={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},i=function(a){function b(b,c){b=a.call(this,b)||this;b.errors=c;return b}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=h);try{return yield k(a,b)}catch(a){throw a.errors[a.errors.length-1]}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=0,d=[],e=b.baseRetryInterval,f=b.backoffFactor;while(c<=b.maxRetries){try{var g=(yield a());return g}catch(a){d.push(a)}yield m(e*Math.pow(f,c));++c}throw new i("Max call count exceeded",d)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield new(g||(g=b("Promise")))(function(b){return window.setTimeout(b,a)})});return n.apply(this,arguments)}f.callWithExponentialBackoff=a}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.tabID=c("uuidv4")();this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={realtime:0,lightspeed:0};this.broadcastChannel=this.$1("DGWGlobalLogger");this.broadcastChannel.onmessage=function(b){b=JSON.parse(String(b.data));var c=!a.otherTabs.has(b.key);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$2())}}var b=a.prototype;b.$1=function(a){if(window.BroadcastChannel!=null)return new BroadcastChannel(a);else return{onmessage:function(a){},postMessage:function(a){}}};b.streamRequested=function(a){switch(a){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()};b.streamClosed=function(a){switch(a){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(a))};b.getGlobalState=function(){var a={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};this.otherTabs.forEach(function(b){a.realtime+=b.realtime,a.lightspeed+=b.lightspeed});return a};b.$2=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(a))};return a}();var h=c("gkx")("4337")?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}};b=function(){return h};g.getInstance=b}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportPingSent=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",a,!0)};b.transportPongReceived=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",a,!0)};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b,c){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b,c))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a.code+" reason: "+a.reason+" wasClean: "+String(a.wasClean)),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=b?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+c+", payloadSize:"+a,!0);this.$4.set(c,{ackRequested:b,payloadSize:a,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+(c!=null?c:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","Promise","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(701242292,"2919");a=function(){function a(a,b,e,f,g,h,k){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=e,this.$8=f,this.$2=h,this.$9=g,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=k,this.$14=Date.now()+(Math.round(d("Random").random()*1e4)+1e4),(i||(i=c("QuickPerformanceLogger"))).markerStart(j,this.$14)}var e=a.prototype;e.send=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this.$11++%d("DGWConstants").MAX_ACK_ID;a=this.$15(a,!0,c);if(!this.$16(a,!0,c))return!1;a=(yield this.$10.waitForAck(c,b!=null?b:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));return a});function c(b,c){return a.apply(this,arguments)}return c}();e.sendFrame=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=this.$11++%d("DGWConstants").MAX_ACK_ID;c=this.$15(c,!0,f);if(c==null)return!1;var g=new Uint8Array(a.length+c.length);g.set(a);g.set(c,a.length);if(!this.$16(g,!0,f))return!1;c=(yield this.$10.waitForAck(f,e!=null?e:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));this.__markerPoint(c?"ack_recevied":"ack_timeout");if(!c){this.__endMarker(3);return(h||(h=b("Promise"))).reject(d("DGWStream").StreamError.ACK_TIMEOUT)}return c});function c(b,c,d){return a.apply(this,arguments)}return c}();e.sendAndForget=function(a){a=this.$15(a,!1,0);return this.$16(a,!1,0)};e.sendFrameAndForget=function(a,b){b=this.$15(b,!1,0);if(b==null)return!1;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return this.$16(c,!1,0)};e.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$17()};e.loggingContext=function(){return this.$9};e.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};e.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};e.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};e.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$18(b),this.$6.onDataReceived(a)};e.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};e.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};e.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)};e.__markerPoint=function(a){var b=this.$14;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$14;(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,a,{instanceKey:b})};e.__endMarker=function(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(j,a,this.$14)};e.$15=function(a,b,c){return this.$2.encodeData(a,b,c,this.$1)};e.$16=function(a,b,c){this.__markerPoint("send_data_start");if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.__markerPoint("send_data_end");this.$12.dataSent(a.length,b,c);return!0};e.$18=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$2<=h)return this.$2++;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<=h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","Run","StreamIdGenerator","asyncToGeneratorRuntime","err","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(701238781,"3037"),k=(a=c("qex")._("2101"))!=null?a:20,l=(e=c("qex")._("2102"))!=null?e:3e4,m=(f=c("qex")._("2103"))!=null?f:!1,n=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};a=function(){function a(b,e,f,g,h,k,l,m){var n=this;this.$18=-1;this.$15=h;this.$17=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$9=!1;this.$3=!0;this.$4=!1;this.$21=!1;this.$22=!1;this.$13=f;this.$11=new TextEncoder();this.$12=new TextDecoder();this.$14=g;h={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){n.$9||(n.$9=!0,n.$15(),n.$13.transportClosed(!0,""),n.$14.streamGroupCallbacks.onStreamGroupMustDrain(a),n.$5.forEach(function(b){b.__drainReceivedHook(a)}),n.onClose(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(a,b,c){if(n.$5.has(a)){var d=n.$5.get(a);d==null||d.__dataReceivedHook(b,c)}else n.$13.receivedFrameForInactiveStream("Data",a,"sendAckID: "+(c!=null?c:"null"))},onGroupedStreamAckReceived:function(a,b){if(n.$5.has(a)){var c=n.$5.get(a);c==null||c.__ackReceivedHook(b)}else n.$13.receivedFrameForInactiveStream("ACK",a,"ackId: "+(b!=null?b:"null"))},onGroupedStreamEndOfDataReceived:function(a){if(n.$5.has(a)){var b=n.$5.get(a);b==null||b.__endOfDataHook()}else n.$13.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(n.$6.has(a)){var c=n.$6.get(a);n.$6["delete"](a);b=JSON.parse(n.$12.decode(b));(b.code===void 0||b.code!==200)&&(c==null||c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null||c.handleEstablishFrameReceived()}else n.$13.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=n.$2.encodePing();if(a==null)return;n.send(a)},onPongReceived:function(){n.$3=!1,n.$22||(n.$22=!0,n.__markerPoint("auth_success")),n.$13.transportPongReceived("readyState:"+n.$1.readyState+", bufferedAmount:"+n.$1.bufferedAmount)}};this.$2=new(d("DGWUtils").DGWCodec)(k,h,g.dgwVersion);this.$20=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);this.$23=d("DGWGlobalLogger").getInstance();d("Run").onUnload(function(){n.$23.tabClosed()});if(g.enableFirstStreamOnWsHandshake){if(l===void 0)throw c("err")("Missing grouped stream options");if(m===void 0)throw c("err")("Missing grouped stream callbacks");var o=this.$17.getNextStreamId();f=this.createEstablishStreamFrame(o,l);k=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(k=g.deviceId)!=null?k:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(h=g.loggingId)!=null?h:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(k=g.regionHint)!=null?k:void 0,establishStreamFrame:f,authToken:(h=g.authToken)!=null?h:void 0});this.$1=e(k);if(!k.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;f=new(d("DGWLoggingContext").DGWLoggingContext)(this.$14.dgwVersion,l.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,l.disableFalcoLogging);h=this.__createGroupedStream(o,m,l,f);this.$16=this.waitForEstablishStream(o,h,l,function(a){n.$5.set(o,a)},function(){n.$17.putBackStreamId(o)})}else this.$1=e(b);this.$23.streamRequested(g.serviceId);(i||(i=c("QuickPerformanceLogger"))).markerStart(j,this.$20);this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var e=a.prototype;e.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};e.close=function(){var a;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("teardown");this.$8=!0;(a=this.$10)==null||a.cancel();this.$1.onopen=function(a){};this.$1.onmessage=function(a){};this.$1.onerror=function(a){};this.$1.onclose=function(a){};this.$1.close()};e.onClose=function(a){var b;this.$23.streamClosed(this.$14.serviceId);this.__markerPoint("abort");this.__markerAnnotate({"int":{abort_code:a}});this.$8=!0;(b=this.$10)==null||b.cancel();this.$1.close(a)};e.abort=function(a,b,c,d,e){if(this.$8)return;this.$23.streamClosed(this.$14.serviceId);this.$8=!0;this.$13.transportClosed(!1,d,e);this.$5.forEach(function(a){a.__transportCloseHook(b)});this.$6.forEach(function(a){a.abortStream(b)});this.$14.streamGroupCallbacks.onStreamGroupError(a);this.$5.clear();this.$6.clear();this.$15();this.onClose(c)};a.getTransportWithInitialStream=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h){yield d("DGWUtils").DGWCodec.initialize();var i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();var j=function(){return a.$24("",e,i,g,f,b,c)};try{j=(yield d("DGWExponentialBackoff").callWithExponentialBackoff(j,h));h=j.$16!=null?j.$16:j.establishGroupedStream(c,b,new(d("DGWLoggingContext").DGWLoggingContext)(e.dgwVersion,b.loggingId,e.serviceId,e.fbId,e.loggingId,b.disableFalcoLogging));return{transport:j,streamPromise:h}}catch(a){throw a}});function e(a,b,d,e,f,g){return c.apply(this,arguments)}return e}();a.getTransport_DEPRECATED=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g){yield d("DGWUtils").DGWCodec.initialize();var h=new(d("DGWTransportEvents").DGWTransportEvents)(e);h.transportEstablishmentPending();var i=function(){return a.$24(b,c,h,f,e)};try{return yield d("DGWExponentialBackoff").callWithExponentialBackoff(i,g)}catch(a){throw a}});function e(a,b,d,e,f){return c.apply(this,arguments)}return e}();e.establishGroupedStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f,g,i){var j=this;g===void 0&&(g=!0);var k=this.getStreamId(),m=this.createEstablishStreamFrame(k,d);a=this.__createGroupedStream(k,a,d,e);a.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:d.streamTraceId}});i!=null&&a.__markerAnnotate(i);e=this.waitForEstablishStream(k,a,d,function(a){j.$5.set(k,a)},function(){j.$17.putBackStreamId(k)});if(f!=null){a.__markerPoint("send_payload_start");a.__markerAnnotate({"int":{establishStreamPayloadSize:f.byteLength}});i=g?yield a.sendFrame(m,f,l):a.sendFrameAndForget(m,f);if(!i){a.__endMarker(3);return(h||(h=b("Promise"))).reject("Failed to send data when establishing stream")}a.__markerPoint("send_payload_end");a.__endMarker(2);return(h||(h=b("Promise"))).resolve(a)}a.__markerPoint("send_establish_stream_start");if(!this.send(m)){a.__endMarker(3);throw c("err")("Websocket connection closed before stream established")}a.__markerPoint("send_establish_stream_end");d=(yield e);a.__endMarker(2);return d});function d(b,c,d,e,f,g){return a.apply(this,arguments)}return d}();a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};e.waitForEstablishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d,e,f){var g=this;this.$13.streamEstablishmentPending(a,d.loggingId);try{var i=(yield new(h||(h=b("Promise")))(function(b,d){g.$6.set(a,new n(c,b,d,3e4,function(){g.streamEndCallback(a)}))}));e(c);this.$13.streamEstablishmentSuccess(a,d.loggingId);return i}catch(b){f();this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,d.loggingId);throw b}});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();a.$24=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e,f,g,h,i){var j=new a(b,d("DGWWebSocketTransport").getWebSocketConnection,e,c,f,g,h,i);j.$1.onmessage=a.$25(j);j.$1.onopen=function(){j.__markerPoint("onopen"),e.transportEstablished(b),j.$10!=null&&j.$10.cancel(),j.$7!=null&&(j.$10=new(d("DGWPinger").DGWPinger)(j.$7,function(){j.$26()},function(){j.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+j.$1.readyState+", bufferedAmount:"+j.$1.bufferedAmount)}))};j.$1.onerror=function(){j.__markerPoint("onerror"),j.$13.transportError("onerror","readyState: "+j.$1.readyState)};j.$1.onclose=a.$27(j);c=(yield a.getTransportPromise(j));return c});function e(a,b,d,e,f,g,h){return c.apply(this,arguments)}return e}();a.getTransportPromise=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield new(h||(h=b("Promise")))(function(b,c){var e=a.$1.onerror,f=a.$1.onmessage,g=a.$1.onclose;a.$19=window.setTimeout(function(){a.$15(),a.$13.transportClosed(!1,"TIMEOUT"),a.__markerPoint("connect_timeout"),a.close(),c(d("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},k*1e3);a.$1.onerror=function(){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),e(),a.close(),m||c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(b){a.$19!=null&&(window.clearTimeout(a.$19),a.$19=null),g(b),b.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(b.code+":"+b.reason)};a.$1.onmessage=function(c){f(c),a.$19!=null&&!a.$3&&(window.clearTimeout(a.$19),a.$19=null,a.__markerPoint("connect_success"),b(a))}}));return c});function c(b){return a.apply(this,arguments)}return c}();a.$25=function(a){return function(b){var c;a.$21||(a.$21=!0,a.__markerPoint("onmessage"));(c=a.$10)==null||c.reset();if(!(b.data instanceof ArrayBuffer)){a.$13.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$27=function(a){return function(b){var c=a.$23.getGlobalState();a.__markerPoint("onclose");a.__markerAnnotate({string:{reason:b.reason},"int":{code:b.code,realtimeWebSockets:c.realtime,lightspeedWebSockets:c.lightspeed}});a.__endMarker(b.code===d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3);(c=a.$10)==null||c.cancel();if(a.$8===!0||a.$4)return;a.$23.streamClosed(a.$14.serviceId);a.$8=!0;if(a.$3===!0){a.$13.transportEstablishmentFailure(b);a.$5.clear();a.$15();return}a.$15();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$13.transportClosed(!1,"Websocket connection failure with code: "+b.code+" reason: "+b.reason+" wasClean: "+String(b.wasClean));c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$14.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$13.transportClosed(!0,""),a.$14.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};e.$26=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");var b=this.send(a);this.$18=this.$1.bufferedAmount;this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(a==null?void 0:a.byteLength)+", sent:"+String(b))};e.isClosedLocally=function(){return this.$3||this.$8||this.$4};e.streamEndCallback=function(a){this.$5["delete"](a),this.$6["delete"](a),this.$17.putBackStreamId(a)};e.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()};e.createEstablishStreamFrame=function(b,e){var f=a.__prefixAppHeaders(e.groupedStreamHeaders);e.streamTraceId!=null&&(f[d("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=e.streamTraceId);e=this.$2.encodeEstablishStream(b,new Uint8Array(this.$11.encode(JSON.stringify(f))));if(e==null){this.$17.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return e};e.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(a){this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};e.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};e.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};e.__markerPoint=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,a,{instanceKey:b})};e.__markerAnnotate=function(a){var b=this.$20;(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,a,{instanceKey:b})};e.__endMarker=function(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(j,a,this.$20)};return a}();g.StreamGroupWebSocketTransport=a}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,e,f,g,h,i,j,k){this.$2=k;this.$1=k.getNewStreamGroupId();k=(k=i.overrideUrl)!=null?k:g;this.$5=null;g=h;if(c("justknobx")._("3090")){var l;g=(l=i.guestFbid)!=null?l:h}this.$3={appId:a,appVersion:b,authType:(l=i.authType)!=null?l:e,deviceId:i.deviceId,dgwVersion:f,headers:i.streamGroupAppHeaders,tier:(h=i.serviceTier)!=null?h:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:k,fbId:g,loggingId:i.loggingId,serviceId:i.serviceId,streamGroupCallbacks:j,keepAliveMs:i.keepAliveMs,regionHint:i.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:i.authToken};this.$4=i;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=i.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:(l=this.$3.loggingId)!=null?l:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0,trafficTracing:(f=this.$4.trafficTracing)!=null?f:void 0,authToken:(h=this.$4.authToken)!=null?h:void 0})}var e=a.prototype;e.initTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this,a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){b.$2.removeStreamGroupAndTransport(b.$1)},a);var c;try{c=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,c);return c});function c(){return a.apply(this,arguments)}return c}();e.establishStream=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=this;if(this.$2.containsStreamGroup(this.$1)===!1){this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(!this.$3.enableFirstStreamOnWsHandshake){this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h);var i;try{i=(yield this.$5),this.$5=null}catch(a){this.$5=null;throw a}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,i)}else{var j=(yield d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,b,this.$3,this.streamGroupLoggingContext,function(){g.$2.removeStreamGroupAndTransport(g.$1)},h));this.$2.setStreamGroupAndTransport(this.$1,j.transport);return j.streamPromise}}return this.establishStreamWithTransport(a,b,c,e,f)});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();e.establishStreamWithTransport=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){var g=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(c!=null),!0,g);g=(yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(b,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,g,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(b=a.verboseLoggingEnabled)!=null?b:!1),c,e,f));return g});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();e.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};e.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){var c;this.handleUserChecks((c=b.authType)!=null?c:this.$3);return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(a){if(!c("CurrentUser").isLoggedInNow()&&d("DGWAuth").fromDGWAuthToString(a)!=="GUEST"&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e,f){var g={};for(a of Object.entries(a)){var h=a[0],i=a[1];typeof i=="string"?g["XRSS-"+h]=i:typeof i=="number"?g["XRSN-"+h]=i.toString():typeof i=="boolean"?g["XRSB-"+h]=i.toString():typeof i=="object"&&i!=null&&(g["XRSO-"+h]=c("Base64").encode(JSON.stringify(i)))}d&&(g["xrs-body"]="true");e!=null&&e.length>0&&(g["xrs-instrumentation"]=c("Base64").encode(e));g["XRS-Accept-Ack"]="RSAck";f!=null&&f.ackTimeoutSec!=null&&(g["XRS-SRAck-Timeout"]=f.ackTimeoutSec.toString());g["XRSS-http_referer"]=window.location.href;if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){h=b("cr:3024")==null?void 0:b("cr:3024").get();h!=null&&(g["XRSB-is_test"]="true",g["XRSS-original_request_id"]=h)}return g}function h(a){return Object.keys(a).reduce(function(b,c){(typeof a[c]==="string"||typeof a[c]==="boolean"||typeof a[c]==="number"||typeof a[c]==="object")&&(b[c]=a[c]);return b},{})}function d(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return{auxId:a.auxId,dfTraceId:(a=a.dataFlowTracingData)==null?void 0:a.traceId}}catch(a){}return null}function e(a,b){var c=a.headers;a=a.body;b.kill_body===!0&&(a=null);b.new_body!=null&&(a=b.new_body);if(b.new_headers!=null)try{c=h(JSON.parse(b.new_headers))}catch(a){}if(b.patch_headers!=null)try{c=babelHelpers["extends"]({},c,h(JSON.parse(b.patch_headers)))}catch(a){}return{headers:c,body:a}}g.convertHeaders=a;g.cleanHeaders=h;g.getInstrumentationDataFieldsFromPayload=d;g.transformContextWithRewriteDelta=e}),98);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=e,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){if(!this.$1)return;this.$6(a)};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();f["default"]=a}),66);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f,g){"use strict";var h="inflight_amends_timeout",i="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var b=a.prototype;b.add=function(a){var b=this;if(this.$2.has(a))throw c("err")(i);var d=new(c("Deferred"))(),e=Date.now(),f=setTimeout(function(){b.$2.has(a)&&b.reject(a,c("err")(h))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};b.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};b.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null||a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};b.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null||a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};b.rejectAll=function(a){for(var b of this.$2.entries()){var c=b[0];b[1];this.reject(c,a)}};b.getSize=function(){return this.$2.size};b.getAllPromises=function(){var a=[];for(var b of this.$2.values())a.push(b.deferred.getPromise());return a};b.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};b.$5=function(a){return this.$2.get(a)};return a}();g["default"]=a}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{expected_existing_headers:"",patch_headers_if_match:""}}function e(){return{bytes:Uint8Array.of()}}function f(){return{message:""}}function i(){return{reason:d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function j(){return{}}function k(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function l(){return{caller_timestamp_ms:"0"}}function m(){return{original_ping_timestamp_ms:"0"}}function n(){return{}}function o(a,b){b.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(b.writeFieldBegin({fname:"new_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.new_headers),b.writeFieldEnd()),a.new_body!=null&&(b.writeFieldBegin({fname:"new_body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.new_body),b.writeFieldEnd()),a.patch_headers!=null&&(b.writeFieldBegin({fname:"patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers),b.writeFieldEnd()),a.kill_body!=null&&(b.writeFieldBegin({fname:"kill_body",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.kill_body),b.writeFieldEnd()),a.temporary!=null&&(b.writeFieldBegin({fname:"temporary",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:5}),b.writeBool(a.temporary),b.writeFieldEnd()),a.conditional_patch_headers!=null&&(b.writeFieldBegin({fname:"conditional_patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),p(a.conditional_patch_headers,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function p(a,b){b.writeStructBegin("ResponseRewriteConditionalPatchHeaders");b.writeFieldBegin({fname:"expected_existing_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.expected_existing_headers!=null)b.writeString(a.expected_existing_headers);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"patch_headers_if_match",ftype:h.STRING,fid:2});if(a.patch_headers_if_match!=null)b.writeString(a.patch_headers_if_match);else{d="";b.writeString(d)}b.writeFieldEnd();a.patch_headers_otherwise!=null&&(b.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers_otherwise),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ResponseData");b.writeFieldBegin({fname:"bytes",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bytes!=null)b.writeBinary(a.bytes);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.metadata!=null&&(b.writeFieldBegin({fname:"metadata",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.metadata),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("LogMessage");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Termination");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.message!=null&&(b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.message),b.writeFieldEnd());a.retry_delay_ms!=null&&(b.writeFieldBegin({fname:"retry_delay_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(c("jsbi").BigInt(a.retry_delay_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd()),a.accepted!=null&&(b.writeFieldBegin({fname:"accepted",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:2}),b.writeBool(a.accepted),b.writeFieldEnd()),a.result!=null&&(b.writeFieldBegin({fname:"result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.result),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function u(a,b){b.writeStructBegin("StreamCheck");b.writeFieldBegin({fname:"stream_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.stream_id!=null)b.writeI64(c("jsbi").BigInt(a.stream_id));else{var e="0";b.writeI64(c("jsbi").BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"last_sequencer",ftype:h.I32,fid:2});if(a.last_sequencer!=null)b.writeI32(a.last_sequencer);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"amendment_count",ftype:h.I32,fid:4});if(a.amendment_count!=null)b.writeI32(a.amendment_count);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"last_status",ftype:h.I32,fid:3});if(a.last_status!=null){b.writeI32((e=a.last_status)!=null?e:0)}else{a=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);b.writeI32(a!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("Ping");b.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.caller_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.streams_to_check!=null){b.writeFieldBegin({fname:"streams_to_check",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.streams_to_check.length});for(d of a.streams_to_check)u(d,b);b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("Pong");b.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.original_ping_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.stream_ids_missing!=null){b.writeFieldBegin({fname:"stream_ids_missing",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I64,size:a.stream_ids_missing.length});for(d of a.stream_ids_missing)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_behind!=null){b.writeFieldBegin({fname:"stream_ids_behind",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:3});b.writeListBegin({etype:h.I64,size:a.stream_ids_behind.length});for(d of a.stream_ids_behind)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_lost_amendments!=null){b.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_lost_amendments.length});for(d of a.stream_ids_with_lost_amendments)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_wrong_status!=null){b.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_wrong_status.length});for(d of a.stream_ids_with_wrong_status)b.writeI64(c("jsbi").BigInt(d));b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;b.writeFieldBegin({fname:"flow_status",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.flow_status)!=null?d:0);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.log!=null){b.writeFieldBegin({fname:"log",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});r(a.log,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.rewrite!=null){b.writeFieldBegin({fname:"rewrite",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});o(a.rewrite,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.data!=null){b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});q(a.data,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.termination!=null){b.writeFieldBegin({fname:"termination",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});s(a.termination,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend_ack!=null){b.writeFieldBegin({fname:"amend_ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});t(a.amend_ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.new_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.new_body=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.kill_body=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).BOOL?b.temporary=a.readBool():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conditional_patch_headers=z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.expected_existing_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_if_match=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_otherwise=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.expected_existing_headers===void 0&&(b.expected_existing_headers="");b.patch_headers_if_match===void 0&&(b.patch_headers_if_match="");return b}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bytes=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bytes===void 0&&(b.bytes=Uint8Array.of());return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");return b}function C(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.retry_delay_ms=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.accepted=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.stream_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.last_sequencer=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.amendment_count=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stream_id===void 0&&(b.stream_id="0");b.last_sequencer===void 0&&(b.last_sequencer=0);b.amendment_count===void 0&&(b.amendment_count=0);b.last_status===void 0&&(b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.caller_timestamp_ms===void 0&&(b.caller_timestamp_ms="0");return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_behind=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(f=0;f<d.size;f++){g=a.readI64().toString();b.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_wrong_status=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.original_ping_timestamp_ms===void 0&&(b.original_ping_timestamp_ms="0");return b}function H(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).I32)if(b==null)e.flow_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),b="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.log=B(a),b="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.rewrite=y(a),b="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.data=A(a),b="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.termination=C(a),b="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend_ack=D(a),b="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.ResponseRewriteRequest$DefaultConstructor=a;g.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=b;g.ResponseData$DefaultConstructor=e;g.LogMessage$DefaultConstructor=f;g.Termination$DefaultConstructor=i;g.AmendStreamAck$DefaultConstructor=j;g.StreamCheck$DefaultConstructor=k;g.Ping$DefaultConstructor=l;g.Pong$DefaultConstructor=m;g.StreamResponseDelta$DefaultConstructor=n;g.serializeResponseRewriteRequest=o;g.serializeResponseRewriteConditionalPatchHeaders=p;g.serializeResponseData=q;g.serializeLogMessage=r;g.serializeTermination=s;g.serializeAmendStreamAck=t;g.serializeStreamCheck=u;g.serializePing=v;g.serializePong=w;g.serializeStreamResponseDelta=x;g.deserializeResponseRewriteRequest=y;g.deserializeResponseRewriteConditionalPatchHeaders=z;g.deserializeResponseData=A;g.deserializeLogMessage=B;g.deserializeTermination=C;g.deserializeAmendStreamAck=D;g.deserializeStreamCheck=E;g.deserializePing=F;g.deserializePong=G;g.deserializeStreamResponseDelta=H}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{body:Uint8Array.of()}}function e(){return{amendment:Uint8Array.of()}}function f(){return{ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function i(){return{delta:[]}}function j(){return{}}function k(a,b){b.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(b.writeFieldBegin({fname:"headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.headers),b.writeFieldEnd()),a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function l(a,b){b.writeStructBegin("RequestStreamBody");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeBinary(a.body);else{a=Uint8Array.of();b.writeBinary(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a,b){b.writeStructBegin("AmendStream");a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"amendment",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.amendment!=null)b.writeBinary(a.amendment);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.is_query!=null&&(b.writeFieldBegin({fname:"is_query",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3}),b.writeBool(a.is_query),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function n(a,b){b.writeStructBegin("StreamResponseAck");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.ack!=null){var e;b.writeI32((e=a.ack)!=null?e:0)}else{e=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);b.writeI32(e!=null?e:0)}b.writeFieldEnd();a.query_result!=null&&(b.writeFieldBegin({fname:"query_result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.query_result),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("StreamResponse");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"delta",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.delta!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.delta.length});for(var e of a.delta)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(e of e)d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(e,b);b.writeListEnd()}b.writeFieldEnd();if(a.ack_level!=null){b.writeFieldBegin({fname:"ack_level",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.ack_level)!=null?e:0);b.writeFieldEnd()}a.query_request!=null&&(b.writeFieldBegin({fname:"query_request",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.query_request),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("Payload");if(a.request_headers!=null){b.writeFieldBegin({fname:"request_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});k(a.request_headers,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.request_body!=null){b.writeFieldBegin({fname:"request_body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});l(a.request_body,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend!=null){b.writeFieldBegin({fname:"amend",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});m(a.amend,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ack!=null){b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});n(a.ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.response!=null){b.writeFieldBegin({fname:"response",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});o(a.response,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ping!=null){b.writeFieldBegin({fname:"ping",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});d("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.pong!=null){b.writeFieldBegin({fname:"pong",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7});d("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function q(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.headers=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function r(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body=Uint8Array.of());return b}function s(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.amendment=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.is_query=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.amendment===void 0&&(b.amendment=Uint8Array.of());return b}function t(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.query_result=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.ack===void 0&&(b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return b}function u(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.delta=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);b.delta.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.ack_level=d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.query_request=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.delta===void 0&&(b.delta=[]);return b}function v(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_headers=q(a),b="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_body=r(a),b="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend=s(a),b="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ack=t(a),b="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.response=u(a),b="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ping=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),b="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+b);else a.skip(g);break;case 7:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.pong=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),b="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.RequestStreamHeaders$DefaultConstructor=a;g.RequestStreamBody$DefaultConstructor=b;g.AmendStream$DefaultConstructor=e;g.StreamResponseAck$DefaultConstructor=f;g.StreamResponse$DefaultConstructor=i;g.Payload$DefaultConstructor=j;g.serializeRequestStreamHeaders=k;g.serializeRequestStreamBody=l;g.serializeAmendStream=m;g.serializeStreamResponseAck=n;g.serializeStreamResponse=o;g.serializePayload=p;g.deserializeRequestStreamHeaders=q;g.deserializeRequestStreamBody=r;g.deserializeAmendStream=s;g.deserializeStreamResponseAck=t;g.deserializeStreamResponse=u;g.deserializePayload=v}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:if(a.seenAccepted)return a;return a.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?a:{flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===b)return a;else return{flowStatus:b,seenAccepted:!0}}}g.getNextState=a}),98);
__d("StreamRetryState",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=2*60*1e3;a=function(){function a(){this.$1=0}var b=a.prototype;b.resetErrorAndRetryCount=function(){this.$1=0};b.onRetry=function(){this.$1+=1};b.getRetryCount=function(){return this.$1};b.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return g*Math.random();var a=g*Math.pow(2,this.$1-3),b=a*Math.random();a=a+b;return Math.min(a,h)};return a}();f["default"]=a}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4,k=0,l=1e3,m=2,n=c("gkx")("20915")?3e4:5e3,o="dgw_stream_send_ack_failure",p=(a=c("qex")._("2097"))!=null?a:!1,q=(e=c("qex")._("2100"))!=null?e:!1;function r(a){if(!a){a=c("err")(o);a.stack;throw a}}function s(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}function t(a){var b={};a=a.delta;a.forEach(function(a){if(a.flow_status){b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status;switch(a.flow_status){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b.flow_status="Accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b.flow_status="Started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b.flow_status="Stopped";break}}else a.log?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:a.rewrite?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:a.data?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:a.termination?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:a.amend_ack&&(b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)});return b}f=function(){function a(a,b,e,f,g,h){var i=this,k;this.$6=null;this.$7={};this.$10=!1;this.$15=new(c("StreamRetryState"))();this.$16=0;this.$17=0;this.$18=0;this.$21=0;var l=null;typeof b==="string"?l=new TextEncoder().encode(b):typeof b==="object"&&(l=b);this.$1={headers:a,body:l};this.$3=e;this.$4=f;this.$12=j;this.$9=!1;this.$14=!1;this.$20=h;l=f==null?void 0:f.serviceId;g!=null&&(this.$22()||(g.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(l)),g.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(l),g.transport="WEB_RS_STARGATE");this.$5=d("RequestStreamE2ESampling").validateInstrumentationData(a,g,f==null?void 0:f.requestLogContext,f==null?void 0:f.upsampleMultiplier);!this.$22()?this.$6=d("RequestStreamE2ELogger").createStreamLogger(a,this.$5,d("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE):this.$7.disableFalcoLogging=!0;(f==null?void 0:f.deviceId)!=null&&(this.$7.deviceId=f.deviceId);this.$6&&(this.$7.loggingId=this.$6.getRequestId());f&&f.overrideUrl!=null&&(this.$7.overrideUrl=f.overrideUrl);l!=null&&(this.$7.serviceId=l);this.$8={flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$19=new(c("InflightAmends"))(n,function(a,b){var d;(d=i.$6)==null||d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers["extends"]({},i.$23(),{latency:b.toString()}),a)},function(a,b){if(b.message!==o){var d;(d=i.$6)==null||d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers["extends"]({},i.$23(),{reason:b.message}),a)}});(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(h=b==null||(k=b.length)==null?void 0:k.toString())!=null?h:"0"},"0","0")}var e=a.prototype;e.getInstrumentationData=function(){return this.$5};e.getE2EClientLogger=function(){return this.$6};e.amendWithAck=function(a){a=this.$24(a,!0);return a==null?(i||(i=b("Promise"))).resolve(!1):this.$19.getPromise(a)||(i||(i=b("Promise"))).resolve(!1)};e.amendWithoutAck=function(a){this.$24(a,!1)};e.cancel=function(){var a;(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};e.start=function(a){var e=this;a===void 0&&(a=!1);var f=String(this.$16++),g=Date.now();return this.$26(f).then(function(){var a;e.$14=!1;e.$21=0;var b=(Date.now()-g).toString();(a=e.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:b},f,String(e.$18))})["catch"](function(g){g.stack;if(g.message===o&&e.$10)return;e.$14=!1;if(g!==d("DGWStream").StreamError.ESTABLISHMENT_ERROR){var h,j=g.message;g===d("DGWStream").StreamError.UNAUTHENTICATED?j="UNAUTHENTICATED":g===d("DGWStream").StreamError.UNAUTHORIZED&&(j="UNAUTHORIZED");(h=e.$6)==null||h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},f,String(e.$18));e.$25(a?d("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:d("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,j,!0);if(g===d("DGWStream").StreamError.UNAUTHENTICATED||g===d("DGWStream").StreamError.UNAUTHORIZED)return;throw g}else{(h=e.$6)==null||h.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(j=g.message)!=null?j:g},f,String(e.$18));e.$15.onRetry();var k=c("gkx")("20916")?e.$15.getBackoffDelayMs():l*Math.pow(m,e.$21);return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,k)}).then(function(){e.$21++;e.$18++;return e.start()})}})};e.getFlowStatus=function(){return this.$8.flowStatus};e.shouldTerminateOrRetry=function(a,e,f,g){var h=this;if(this.$14)return;var j=e;this.$12||(j="cannot retry for error: "+e+" because of hit max retry limitation");if(a!==d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},null,String(this.$18))}e=f&&(c("gkx")("20916")||this.$12);this.$25(a,j,!e);if(e){var l=c("gkx")("20916")?Math.max(g!=null?g:0,this.$15.getBackoffDelayMs()):g!=null?g:k;this.$14=!0;return new(i||(i=b("Promise")))(function(a){return window.setTimeout(a,l)}).then(function(){return h.$27()})["catch"](function(a){})}};e.$28=function(){return this.$11!=null};e.$24=function(a,b){var e,f=this,g=typeof a==="string"?new TextEncoder().encode(a):a,h=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{},h);e=s(this.$5,h);g={amend:{amendment:g,instrumentation_data:e}};b&&g.amend&&(g.amend.amendment_id=h);e=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var i=Date.now();if(this.$29()&&this.$11!=null){var j;b&&this.$19.add(h);this.$11.send(e).then(function(a){var b;r(a);a=(Date.now()-i).toString();(b=f.$6)==null||b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},h)})["catch"](function(a){var b;(b=f.$6)==null||b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},h);f.$19.reject(h,a)});(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(b=a==null||(j=a.length)==null?void 0:j.toString())!=null?b:"0"},h);return h}else{(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},h)}};e.$26=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;if(!this.$9){var e=this.$2||this.$1;try{var f=this.$30();this.$13=f;var g=e.headers.graphiql_sandbox,h=babelHelpers["extends"]({},e.headers,this.$31());g!=null&&(h=babelHelpers["extends"]({},h,{www_sandbox:g,distillery_sandbox:g+":8086"}));g=d("DGWRequestStreamUtils").convertHeaders(h,e.body!=null,this.$5);this.$11=(yield this.$20.establishStream(g,f,this.$7))}catch(a){if(a===d("DGWStream").StreamError.ESTABLISHMENT_ERROR)throw a;if(d("DGWStream").StreamError.isValid(a)&&!d("DGWStream").isRetryableError(a))throw a;else if(d("DGWStream").StreamError.isValid(a)&&d("DGWStream").isRetryableError(a)){this.$32(a);return}throw a}if(this.$9){this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}h=new Uint8Array([]);if(e.body!=null){g={request_body:{body:e.body}};h=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");f=this.$11.send(h).then(function(a){r(a),b.$9&&b.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});(e=this.$6)==null||e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").SENT,{},a,String(this.$18));this.$12=j;return f}else throw new Error("stream_already_canceled")});function e(b){return a.apply(this,arguments)}return e}();e.$29=function(){return this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};e.$25=function(a,b,c){var e;this.$11&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null||e.stop();this.$11=null;this.$10=!0;this.$33(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);c&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+b)};e.$33=function(a){var b=this.$8;this.$8=d("RequestStreamState").getNextState(b,a);return b!==this.$8};e.$27=function(){this.$12--;this.$18++;this.$15.onRetry();return this.start(!0)};e.$34=function(a){var b=this;a=d("CompactSerializerPolyfill").deserialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var e=d("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(a),f=e==null?void 0:e.auxId;e=e==null?void 0:e.dfTraceId;if(!this.$28()){var g;(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},f,String(this.$18),e);return}var i;(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,t(a.response),f,String(this.$18),e,i);g=a.response.delta;g.forEach(function(a){if(a.data)b.$15.resetErrorAndRetryCount(),c("justknobx")._("4109")?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):b.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes)):(h||(h=d("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(b.$22()?"falco":"graphql"));else if(a.flow_status){var e=a.flow_status;e===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$15.resetErrorAndRetryCount();b.$33(e)&&b.$3.onFlowStatus(e)}else if(a.termination){e=(e=a.termination.message)!=null?e:"unknown termination msg";b.$2=null;b.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,e,a.termination.reason===d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)b.$3.onLog(a.log.message);else if(a.amend_ack){e=a.amend_ack.amendment_id;if(e!=null){var f=a.amend_ack.accepted||!1;b.$19.resolve(e,f)}}else if(a.rewrite){e=d("DGWRequestStreamUtils").transformContextWithRewriteDelta(b.$1,a.rewrite);a.rewrite.temporary===!0?b.$2=e:b.$1=e}});(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,t(a.response),f,String(this.$18),e);a.response.ack_level===d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$35(a.response.response_id,f)}else{(g=this.$6)==null||g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}};e.$35=function(a,b){a={ack:{response_id:a,ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=d("CompactSerializerPolyfill").serialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").SENT,{},b,String(this.$18))}else{(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},b,String(this.$18))}};e.$22=function(){return this.$1.headers.method==="Falco"};e.$30=function(){return new(c("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))};e.$39=function(a){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)};e.$36=function(a){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};e.$37=function(a){try{this.$34(a)}catch(b){(a=this.$6)==null||a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:b.message},null,String(this.$18));this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,b.message,!1)}};e.$32=function(a){var b="",c=d("DGWStream").isRetryableError(a);b="StreamError: Received "+a;a=p?this.$12>0:c;c=q?l*m:void 0;this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,b,a,c)};e.$38=function(a,b){this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,b,!0)};e.$31=function(){return c("RtiWebRequestStreamClient").overrideHeaders};e.$23=function(){var a={};c("gkx")("20918")&&(a.pending_amendments_size=this.$19.getSize().toString());return a};return a}();g["default"]=f}),98);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.onStreamGroupError=function(a){this.$1(a)};b.onStreamGroupMustDrain=function(a){this.$2(a)};b.onStreamGroupTransportClose=function(){this.$3()};return a}();f["default"]=a}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="realtime",j=1e4,k=null;a=function(){function a(){this.$1={}}a.get=function(){k==null&&(k=new a());return k};var d=a.prototype;d.$2=function(a){var b;this.$1=(b={},b[a]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},b)};d.getStreamGroupLoggingId=function(a){a===void 0&&(a=null);return(a=this.$1[a!=null?a:i])==null?void 0:a.multiStreamGroupLoggingId};d.guessStreamGroupPriorStreamCount=function(a){a===void 0&&(a=null);return((a=this.$1[a!=null?a:i])==null?void 0:a.multiStreamGroupPriorStreamCountGuess)||0};d.establishStream=function(a,d,e){var f,g=this,k=e.serviceId==null?i:e.serviceId;f=(f=this.$1[k])==null?void 0:f.dgwStreamGroup;if(f==null||!f.canCreateGroupedStream()){var l={deviceId:e.deviceId,serviceId:k,disableFalcoLogging:e.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:e.authToken};e.overrideUrl!=null&&(l.overrideUrl=e.overrideUrl);l.keepAliveMs=j;c("gkx")("20920")&&(l.loggingId=c("uuidv4")());try{f=c("DGWClient")().createStreamGroup(new(c("DGWStreamGroupHandler"))(function(){g.$2(k)},function(){g.$2(k)},function(){g.$2(k)}),l),this.$1[k]={dgwStreamGroup:f,multiStreamGroupLoggingId:l.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(a){return(h||(h=b("Promise"))).reject(a)}}this.$1[k].multiStreamGroupPriorStreamCountGuess++;return f.establishStream({loggingId:e.loggingId,disableFalcoLogging:e.disableFalcoLogging,groupedStreamHeaders:a},d)};return a}();g["default"]=a}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a!=null?a:c("DGWStreamFactory").get()}var d=a.prototype;d.createStream=function(a,d,e,f,g){b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return(h||(h=b("Promise"))).resolve(new(c("DGWRequestStreamRef"))(a,d,f,g,e,this.$1))};return a}();g["default"]=a}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("BaseEventEmitter"))();b=a;g["default"]=b}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i="instagram",j={addListener:function(a){c("InstagramODSObserver").addListener("event",a)},incr:function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(5588,i,a,b),c("InstagramODSObserver").emit("event",{count:b,key:a})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(a,b){j.incr(a,b)}};a=j;g["default"]=a}),98);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","FDSLoadingAnimation.react","FDSTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(){var a=(j||(j=d("VideoPlayerHooks"))).useStreamInterrupted(),b=j.useIsLiveRewindActive();return!a||b?null:k.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:k.jsxs("div",{className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x10l6tqk x13vifvy",children:[k.jsx("div",{children:k.jsx(c("FDSTextPairing.react"),{body:h._(/*BTDS*/"The broadcast is waiting for a signal. It should resume shortly."),bodyColor:"white",headline:h._(/*BTDS*/"Waiting for Live Video Signal"),headlineColor:"white",level:2,textAlign:"center"})}),k.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:k.jsx(c("FDSLoadingAnimation.react"),{size:36})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("IgtsDefaultsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4193");b=d("FalcoLoggerInternal").create("igts_defaults",a);e=b;g["default"]=e}),98);
__d("PolarisAPIFXCALAuthLogin",["PolarisEncryptionHelper","PolarisInstapi","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e={requestUUID:c("uuidv4")()};b=babelHelpers["extends"]({},yield d("PolarisEncryptionHelper").getEncryptedParam("password",b,e),{etoken:f,username:a});return d("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/login/ajax/",{body:b}).then(function(a){return a.data})});return h.apply(this,arguments)}g.fxcalAuthLogin=a}),98);
__d("PolarisAPIFxcalAuthTwoFactorLogin",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h){g={app_id:g,etoken:h,identifier:a,trust_signal:b,two_fac_code:e,username:c,verification_method:f};return d("PolarisInstapi").apiPost("/api/v1/web/fxcal/auth/two_fac_login/ajax/",{body:g}).then(function(a){return a.data})}g.fxcalAuthTwoFactorLogin=a}),98);
__d("PolarisAPILoginTwoFactor",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h){h===void 0&&(h=!1);a={identifier:a,isPrivacyPortalReq:h,queryParams:g,trust_signal:b,username:c,verification_method:f,verificationCode:e};return d("PolarisInstapi").apiPost("/api/v1/web/accounts/login/ajax/two_factor/",{body:a}).then(function(a){return a.data})}g.loginTwoFactor=a}),98);
__d("PolarisAPISendAccountRecoveryEmail",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/accounts/send_account_recovery_email_ajax/",{body:{query:a}}).then(function(a){return a.data})}g.sendAccountRecoveryEmail=a}),98);
__d("PolarisAPISendTwoFactorLoginSms",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={identifier:b,username:a};return d("PolarisInstapi").apiPost("/api/v1/web/accounts/send_two_factor_login_sms/",{body:b}).then(function(a){return a.data})}g.sendTwoFactorLoginSms=a}),98);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10060380564020189"}),null);
__d("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql",["PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"request_data",variableName:"input"}],concreteType:"XDTSendTwoFactorLoginResponse",kind:"LinkedField",name:"xdt_send_two_factor_login_whatsapp",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTTwoFactorLoginInfo",kind:"LinkedField",name:"two_factor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"obfuscated_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_messenger_code_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_new_login_screen",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_not_allowed_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sms_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_two_factor_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_identifier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"whatsapp_two_factor_on",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"two_factor_required",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisAPISendTwoFactorLoginWhatsappMutation",selections:c},params:{id:b("PolarisAPISendTwoFactorLoginWhatsappMutation_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_send_two_factor_login_whatsapp"]},name:"PolarisAPISendTwoFactorLoginWhatsappMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisAPISendTwoFactorLoginWhatsapp",["CometRelay","PolarisAPISendTwoFactorLoginWhatsappMutation.graphql","PolarisRelayEnvironment","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("PolarisAPISendTwoFactorLoginWhatsappMutation.graphql");function a(a,e){return new(i||(i=b("Promise")))(function(b,f){d("CometRelay").commitMutation(c("PolarisRelayEnvironment"),{mutation:j,onCompleted:function(a,c){if(c&&c.length){f(c);return}b(a)},onError:function(a){f([a])},variables:{input:{identifier:e,username:a}}})})}g.sendTwoFactorLoginWhatsapp=a}),98);
__d("PolarisAPISetPrivateAccount",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){a={is_private:a};b&&(a.bypass_rate_limit_dialog="1");c&&(a.privacy_nux_action=!0);e&&(a.using_confirmation_dialog=!0);return d("PolarisInstapi").apiPost("/api/v1/web/accounts/set_private/",{body:a}).then(function(a){return babelHelpers["extends"]({},a.data,{status:a.status})})}g.setPrivateAccount=a}),98);
__d("PolarisAcceptTermsOfUseBody.react",["IGDSBox.react","IGDSCheckbox.react","IGDSDivider.react","IGDSListItem.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisExternalLink.react","PolarisGenericStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;e="https://help.instagram.com/581066165581870";f="https://help.instagram.com/519522125107875";b="https://help.instagram.com/626057554667531";var l=new Map([[d("PolarisAuthStrings").TERMS_OF_USE_REQUIRED,e],[d("PolarisAuthStrings").DATA_POLICY_REQUIRED,f],[d("PolarisAuthStrings").LOCATION_BASED_FEATURES_REQUIRED,b]]);function m(a){var b=d("react-compiler-runtime").c(12),e=a.onToggle,f=a.selected,g=a.subtitleHref;a=a.title;var h;b[0]!==e||b[1]!==f?(h=i.jsx(c("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:f,name:"acceptTermsCheckbox",onChange:e}),b[0]=e,b[1]=f,b[2]=h):h=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:d("PolarisGenericStrings").LEARN_MORE}),b[3]=e):e=b[3];b[4]!==g?(f=i.jsx(c("IGDSBox.react"),{marginBottom:1,children:i.jsx(c("PolarisExternalLink.react"),{href:g,children:e})}),b[4]=g,b[5]=f):f=b[5];b[6]!==a?(e=i.jsx(c("IGDSBox.react"),{marginTop:3,children:i.jsx(c("IGDSText.react"),{maxLines:1,zeroMargin:!0,children:a})}),b[6]=a,b[7]=e):e=b[7];b[8]!==h||b[9]!==f||b[10]!==e?(g=i.jsx(c("IGDSListItem.react"),{addOnEnd:h,paddingX:0,paddingY:0,subtitle:f,title:e}),b[8]=h,b[9]=f,b[10]=e,b[11]=g):g=b[11];return g}function a(a){var b=d("react-compiler-runtime").c(19),e=a.onAcceptAllTermsChange,f=l.size;a=k(!1);var g=a[0],h=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=new Set(),b[0]=a):a=b[0];a=k(a);var n=a[0],o=a[1];b[1]!==g?(a=function(){g?o(new Set()):o(new Set(l.keys())),h(!g)},b[1]=g,b[2]=a):a=b[2];a=a;var p,q;b[3]!==g||b[4]!==e?(p=function(){e(g)},q=[g,e],b[3]=g,b[4]=e,b[5]=p,b[6]=q):(p=b[5],q=b[6]);j(p,q);b[7]!==a||b[8]!==g?(p=i.jsx(c("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:g,name:"acceptAllTermsCheckbox",onChange:a}),b[7]=a,b[8]=g,b[9]=p):p=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(q=i.jsx(c("IGDSBox.react"),{paddingY:4,children:i.jsx(c("IGDSText.react"),{maxLines:1,children:d("PolarisAuthStrings").agreeToAllTermsText(f)})}),b[10]=q):q=b[10];b[11]!==p?(a=i.jsx(c("IGDSListItem.react"),{addOnEnd:p,paddingX:0,paddingY:0,title:q}),b[11]=p,b[12]=a):a=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(q=i.jsx(c("IGDSDivider.react"),{}),b[13]=q):q=b[13];b[14]!==n?(p=Array.from(l.entries()).map(function(a){var b=a[0];a=a[1];var c=n.has(b);return i.jsx(m,{onToggle:function(){var a=new Set(n);c?a["delete"](b):a.add(b);o(a);h(a.size===f)},selected:c,subtitleHref:a,title:b},b.toString())}),b[14]=n,b[15]=p):p=b[15];b[16]!==a||b[17]!==p?(q=i.jsxs(c("IGDSBox.react"),{width:"100%",children:[a,q,p]}),b[16]=a,b[17]=p,b[18]=q):q=b[18];return q}g["default"]=a}),98);
__d("PolarisSignupFormFields.react",["IGDSBox.react","IGDSDialogFooter.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(31),e=a.children,f=a.handleGoBack,g=a.handleNext,h=a.header,j=a.icon,k=a.isNextActionDisabled,l=a.requestInFlight,m=a.signupNonSpecificError,n=a.style;a=a.subHeader;var o;b[0]!==h?(o=i.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:h})}),b[0]=h,b[1]=o):o=b[1];b[2]!==a?(h=i.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:a})}),b[2]=a,b[3]=h):h=b[3];b[4]!==g||b[5]!==k||b[6]!==l||b[7]!==n?(a=n==="default"&&i.jsx(c("IGDSBox.react"),{paddingX:2,paddingY:4,position:"relative",width:"100%",children:i.jsx(c("PolarisIGCoreButton.react"),{disabled:k,fullWidth:!0,loading:l,onClick:g,children:d("PolarisGenericStrings").NEXT})}),b[4]=g,b[5]=k,b[6]=l,b[7]=n,b[8]=a):a=b[8];var p;b[9]!==m?(p=m!=null&&i.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:i.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 xvs91rp xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:i.jsx("p",{"aria-atomic":"true",id:d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:m})})}),b[9]=m,b[10]=p):p=b[10];b[11]!==f||b[12]!==n?(m=n==="default"&&i.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:d("PolarisGenericStrings").GO_BACK})}),b[11]=f,b[12]=n,b[13]=m):m=b[13];var q;b[14]!==e||b[15]!==j||b[16]!==o||b[17]!==h||b[18]!==a||b[19]!==p||b[20]!==m?(q=i.jsxs(c("IGDSBox.react"),{alignItems:"center",maxWidth:350,paddingX:7,paddingY:2,position:"relative",children:[j,o,h,e,a,p,m]}),b[14]=e,b[15]=j,b[16]=o,b[17]=h,b[18]=a,b[19]=p,b[20]=m,b[21]=q):q=b[21];b[22]!==f||b[23]!==g||b[24]!==k||b[25]!==l||b[26]!==n?(e=n==="modal"&&i.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:i.jsx(c("IGDSDialogFooter.react"),{endAdornment:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,disabled:k,loading:l,onClick:g,children:d("PolarisAuthStrings").CONTINUE}),startAdornment:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:d("PolarisGenericStrings").BACK_TEXT})})}),b[22]=f,b[23]=g,b[24]=k,b[25]=l,b[26]=n,b[27]=e):e=b[27];b[28]!==q||b[29]!==e?(j=i.jsxs(i.Fragment,{children:[q,e]}),b[28]=q,b[29]=e,b[30]=j):j=b[30];return j}g["default"]=a}),98);
__d("PolarisSignupTypesHelpers",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={fullName:"",username:""};(a==null?void 0:a.fields)!=null&&Object.keys(a.fields).forEach(function(c){var d;if(((d=a.fields[c])==null?void 0:d.value)!=null)switch(c){case"optIntoOneTap":b[c]=Boolean(a.fields[c].value);break;default:b[c]=a.fields[c].value}});return b}f.convertSignupResultToSignupFields=a}),66);
__d("usePolarisEmailOrPhoneContactpointType",["PolarisReactRedux.react","polarisIsPhoneNumber"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,b=d("PolarisReactRedux.react").useSelector(h);b=b==null||(a=b.fields.emailOrPhone)==null?void 0:a.value;if(b==null)return null;b=c("polarisIsPhoneNumber")(b);return b?"phone":"email"}function h(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),98);
__d("PolarisAcceptTermsOfUseForm.react",["PolarisAcceptTermsOfUseBody.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","react-compiler-runtime","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(18),e=a.onSignup,f=a.requestInFlight,g=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var h=d("PolarisReactRedux.react").useDispatch(),m=d("PolarisReactRedux.react").useSelector(l),n=c("usePolarisEmailOrPhoneContactpointType")(),o;b[0]!==n||b[1]!==h?(o=function(){h(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"back_button_clicked",step:"acceptTerms"})},b[0]=n,b[1]=h,b[2]=o):o=b[2];o=o;var p;b[3]!==n||b[4]!==e||b[5]!==m?(p=function(){e(d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(m)),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"accept_terms_form_next_clicked"})},b[3]=n,b[4]=e,b[5]=m,b[6]=p):p=b[6];p=p;var q,r;b[7]!==n?(q=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n,event_name:"form_load",step:"acceptTerms"})},r=[n],b[7]=n,b[8]=q,b[9]=r):(q=b[8],r=b[9]);j(q,r);q=k(!0);r=q[0];var s=q[1];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(q=i.jsx(c("PolarisAcceptTermsOfUseBody.react"),{onAcceptAllTermsChange:function(a){s(!a)}}),b[10]=q):q=b[10];b[11]!==o||b[12]!==p||b[13]!==r||b[14]!==f||b[15]!==g||b[16]!==a?(q=i.jsx(c("PolarisSignupFormFields.react"),{handleGoBack:o,handleNext:p,header:d("PolarisAuthStrings").AGREE_TO_TERMS,isNextActionDisabled:r,requestInFlight:f,signupNonSpecificError:g,style:a,subHeader:d("PolarisAuthStrings").PERSONAL_INFO_SECURE,children:q}),b[11]=o,b[12]=p,b[13]=r,b[14]=f,b[15]=g,b[16]=a,b[17]=q):q=b[17];return q}function l(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),98);
__d("PolarisAccountPrivacyHelpers",[],(function(a,b,c,d,e,f){"use strict";a={PRIVATE:"private",PUBLIC:"public"};b={NUX_FORM_IMPRESSION:"web_pbd_nux_form_impression",NUX_FORM_NEXT_BUTTON_CLICK:"web_pbd_nux_form_next_button_click",NUX_FORM_SELECT_OPTION:"web_pbd_nux_form_select_option",NUX_FORM_SET_PRIVATE_FAILURE:"web_pbd_nux_form_set_private_failure",NUX_FORM_SET_PRIVATE_SUCCESS:"web_pbd_nux_form_set_private_success",NUX_PAGE_IMPRESSION:"web_pbd_nux_page_impression"};f.PrivacyOptionsEnum=a;f.PBDNuxEventsEnum=b}),66);
__d("PolarisAccountPrivacyBody.react",["IGDSBox.react","IGDSRadioButton.react","IGDSTextVariants.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.selectedBodyOption,f=a.setSelectedBodyOption;if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){a=[{desc:(a=d("PolarisAuthStrings")).PRIVATE_ACCOUNT_DESCRIPTION,label:a.PRIVATE_ACCOUNT,value:d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE},{desc:a.PUBLIC_ACCOUNT_DESCRIPTION,label:a.PUBLIC_ACCOUNT,value:d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PUBLIC}];b[0]=a}else a=b[0];a=a;b[1]!==e||b[2]!==f?(a=i.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:a.map(function(a){return i.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:3,children:i.jsx(c("IGDSRadioButton.react"),{isChecked:a.value===e,label:i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{children:i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"start",children:a.label})}),i.jsx(c("IGDSBox.react"),{marginTop:1,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"start",children:a.desc})})]}),onChange:function(){return f(a.value)},value:a.value})},a.value)})}),b[1]=e,b[2]=f,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("PolarisSettingsActionSetPrivateAccount",["FBLogger","InstagramGenericSettingStrings","PolarisAPISetPrivateAccount","PolarisGenericStrings","PolarisSentryFeedbackActions"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.handleFailure,e=a.handleSuccess,f=a.isNuxAction,g=a.isUsingConfirmationDialog,i=a.privateAccount,j=a.publicToPrivateRateLimitOverride,k=a.setErrorMessage,l=a.setLoading;return function(a){l!=null&&l(!0);k!=null&&k(null);a({privateAccount:i,type:"PRIVATE_ACCOUNT_UPDATE_REQUESTED"});return d("PolarisAPISetPrivateAccount").setPrivateAccount(i,j,f,g).then(function(c){if(i&&c.status==="ok"&&c.has_private_public_switch_restriction){var f=c.privacy_rate_limit_dialog_message;a({message:f,title:c.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PUBLIC_TO_PRIVATE_SWITCH_RATE_LIMITED"});l!=null&&l(!1);k!=null&&k(f);b!=null&&b();return}if(!i&&c.status==="ok"&&c.has_private_public_switch_restriction){f=c.privacy_rate_limit_dialog_message;a({message:f,title:c.privacy_rate_limit_dialog_title,type:"ACCOUNT_PRIVACY_PRIVATE_TO_PUBLIC_SWITCH_RATE_LIMITED"});l!=null&&l(!1);k!=null&&k(f);b!=null&&b();return}c.status==="ok"?(a({privateAccount:i,toast:{text:d("InstagramGenericSettingStrings").GENERIC_SETTINGS_SAVED},type:"PRIVATE_ACCOUNT_UPDATE_SUCCEEDED"}),e!=null&&e()):(a({privateAccount:!i,toast:{actionHandler:function(){return a(h({privateAccount:i}))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"}),l!=null&&l(!1),k!=null&&k(d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE),b!=null&&b())},function(e){var f;l!=null&&l(!1);f=((f=e.responseObject)==null?void 0:f.spam)||!1;if(f){var g,j,m,n,o,p,q;g=(g=e.responseObject)==null?void 0:g.feedback_title;j=(j=e.responseObject)==null?void 0:j.feedback_message;m=(m=e.responseObject)==null?void 0:m.feedback_url;n=(n=e.responseObject)==null?void 0:n.feedback_action;o=(o=e.responseObject)==null?void 0:o.feedback_appeal_label;p=(p=e.responseObject)==null?void 0:p.restriction_enrollment_data;q=(q=e.responseObject)==null?void 0:q.enforcement_transparency_instance_identifier;a(d("PolarisSentryFeedbackActions").showSentryFeedback({action:n,enforcement_transparency_instance_identifier:q,feedback_appeal_label:o,message:j,restriction_enrollment_data:p,sourceOfAction:"set_private_account",title:g,url:m}));k!=null&&k(j);b!=null&&b()}q=(n=e.responseObject)==null?void 0:n.message;a({privateAccount:!i,toast:f?void 0:{actionHandler:function(){return a(h({privateAccount:i}))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:q||d("InstagramGenericSettingStrings").GENERIC_SETTINGS_ERROR},type:"PRIVATE_ACCOUNT_UPDATE_FAILED"});k!=null&&k(q||d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE);b!=null&&b();c("FBLogger")("ig_web").catching(e)})}}g.setPrivateAccount=h}),98);
__d("PolarisAccountPrivacyForm.react",["IGDSBox.react","IGDSLockOutline96Icon.react","IGDSTextVariants.react","IgtsDefaultsFalcoEvent","InstagramODS","PolarisAccountPrivacyBody.react","PolarisAccountPrivacyHelpers","PolarisAuthStrings","PolarisConfig","PolarisGenericOnboardingUnit.react","PolarisReactRedux.react","PolarisSettingsActionSetPrivateAccount","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(32),e=a.buttonLabel,f=a.defaultedToPrivate,g=a.handleNext;a=a.subtitle;var h=f||c("gkx")("6489")||c("gkx")("25363");f=k(h?d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE:null);var l=f[0],m=f[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisConfig").getViewerId(),b[0]=f):f=b[0];var n=f,o=d("PolarisReactRedux.react").useDispatch();f=k(!1);var p=f[0],q=f[1];f=k(null);var r=f[0],s=f[1],t;b[1]!==h?(f=function(){c("InstagramODS").incr("web.pbd.impression"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_IMPRESSION,is_set_to_private:h}})},t=[h,n],b[1]=h,b[2]=f,b[3]=t):(f=b[2],t=b[3]);j(f,t);b[4]!==g||b[5]!==l?(f=function(){c("InstagramODS").incr("web.pbd.set_private_success"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_SUCCESS,target_control_type:l}}),g()},b[4]=g,b[5]=l,b[6]=f):f=b[6];var u=f;b[7]!==l?(t=function(){c("InstagramODS").incr("web.pbd.set_private_failure"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SET_PRIVATE_FAILURE,target_control_type:l}})},b[7]=l,b[8]=t):t=b[8];var v=t;b[9]!==o||b[10]!==v||b[11]!==u||b[12]!==l?(f=function(){c("InstagramODS").incr("web.pbd.next_button_click"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_NEXT_BUTTON_CLICK,target_control_type:l}}),o(d("PolarisSettingsActionSetPrivateAccount").setPrivateAccount({handleFailure:v,handleSuccess:u,isNuxAction:!0,privateAccount:l===d("PolarisAccountPrivacyHelpers").PrivacyOptionsEnum.PRIVATE,publicToPrivateRateLimitOverride:!0,setErrorMessage:s,setLoading:q}))},b[9]=o,b[10]=v,b[11]=u,b[12]=l,b[13]=f):f=b[13];t=f;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){c("InstagramODS").incr("web.pbd.option_select"),c("IgtsDefaultsFalcoEvent").log(function(){return{client_userid:n,event_type:d("PolarisAccountPrivacyHelpers").PBDNuxEventsEnum.NUX_FORM_SELECT_OPTION,target_control_type:a}}),m(a)},b[14]=f):f=b[14];f=f;var w;b[15]!==a?(w=i.jsx(c("IGDSBox.react"),{marginBottom:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:a})}),b[15]=a,b[16]=w):w=b[16];b[17]!==l?(a=i.jsx(c("PolarisAccountPrivacyBody.react"),{selectedBodyOption:l,setSelectedBodyOption:f}),b[17]=l,b[18]=a):a=b[18];b[19]!==w||b[20]!==a?(f=i.jsxs(i.Fragment,{children:[w,a]}),b[19]=w,b[20]=a,b[21]=f):f=b[21];w=l==null;b[22]!==r?(a=r!=null?i.jsx(c("IGDSBox.react"),{paddingX:1,paddingY:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:r})}):null,b[22]=r,b[23]=a):a=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(r=i.jsx(c("IGDSLockOutline96Icon.react"),{alt:d("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,size:64}),b[24]=r):r=b[24];b[25]!==e||b[26]!==t||b[27]!==p||b[28]!==f||b[29]!==w||b[30]!==a?(r=i.jsx(c("PolarisGenericOnboardingUnit.react"),{bodyText:f,buttonDisabled:w,buttonText:e,footer:a,headerText:d("PolarisAuthStrings").ACCOUNT_PRIVACY_HEADER_TEXT,icon:r,isProcessing:p,onButtonClick:t}),b[25]=e,b[26]=t,b[27]=p,b[28]=f,b[29]=w,b[30]=a,b[31]=r):r=b[31];return r}g["default"]=a}),98);
__d("PolarisTooManyAccountsDialog.react",["fbt","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisOneTapLogin","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.onClose;a=a.onConfirm;var f=k;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=f(),b[0]=f):f=b[0];var g;b[1]!==a?(g=a!=null?h._(/*BTDS*/"Edit Accounts"):void 0,b[1]=a,b[2]=g):g=b[2];a=a!=null?a:void 0;var i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Can't Add Account"),b[3]=i):i=b[3];b[4]!==e||b[5]!==g||b[6]!==a?(f=j.jsx(c("PolarisConfirmDialog.react"),{body:f,cancelLabel:d("PolarisGenericStrings").OK_TEXT,confirmLabel:g,onClose:e,onConfirm:a,title:i}),b[4]=e,b[5]=g,b[6]=a,b[7]=f):f=b[7];return f}function k(){return d("PolarisOneTapLogin").TOO_MANY_ACCOUNTS_TEXT}g["default"]=a}),226);
__d("usePolarisOneTapLoginEditModeStateQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"XDTViewer",kind:"LinkedField",name:"xdt_viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"PolarisOneTapLogin",kind:"LinkedField",name:"one_tap_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"edit_mode",storageKey:null}],storageKey:null}]}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePolarisOneTapLoginEditModeStateQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"usePolarisOneTapLoginEditModeStateQuery",selections:a},params:{cacheID:"fded0f553435868ea14676d1156763b5",id:null,metadata:{is_distillery:!0,root_field_name:["xdt_viewer"]},name:"usePolarisOneTapLoginEditModeStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("usePolarisOneTapLoginEditModeState",["CometRelay","PolarisLoginLogger","react","react-compiler-runtime","usePolarisOneTapLoginEditModeStateQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a,c=d("react-compiler-runtime").c(7),e=d("CometRelay").useRelayEnvironment(),f,g;c[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h!==void 0?h:h=b("usePolarisOneTapLoginEditModeStateQuery.graphql"),g={},c[0]=f,c[1]=g):(f=c[0],g=c[1]);f=d("CometRelay").useClientQuery(f,g);c[2]!==e?(g=function(a){d("CometRelay").commitLocalUpdate(e,function(b){b.getRoot().getOrCreateLinkedRecord("xdt_viewer","XDTViewer").getOrCreateLinkedRecord("one_tap_login","PolarisOneTapLogin").setValue(a,"edit_mode")}),d("PolarisLoginLogger").logLoginEvent({event_name:a?"one_tap_login_done_editing_click":"one_tap_login_manage_accounts_click",login_type:"device_based_login"})},c[2]=e,c[3]=g):g=c[3];g=g;f=(f=f==null||(a=f.xdt_viewer)==null||(a=a.one_tap_login)==null?void 0:a.edit_mode)!=null?f:!1;var i;c[4]!==f||c[5]!==g?(i=[f,g],c[4]=f,c[5]=g,c[6]=i):i=c[6];return i}g["default"]=a}),98);
__d("PolarisAuthTypeSwitcher.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSTextVariants.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFastLink.react","PolarisLinkBuilder","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutUpsellExposureV2","PolarisLoginLogger","PolarisMultiSignupTypes","PolarisOneTapLogin","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisRoutes","PolarisSignupActions","PolarisTooManyAccountsDialog.react","PolarisUA","XPolarisLoginControllerRouteBuilder","XPolarisMultiStepSignupControllerRouteBuilder","react","react-compiler-runtime","usePolarisOneTapLoginEditModeState","usePolarisPageID"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));f=i;f.useCallback;var k=f.useState,l=d("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration();function m(a){var b=d("react-compiler-runtime").c(17),e=a.className,f=a.fromLoggedOutDialog,g=a.onClick,i=f===void 0?!1:f,k=d("PolarisReactRedux.react").useDispatch(),m=c("usePolarisPageID")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:h._(/*BTDS*/"Sign up")}),b[0]=a):a=b[0];f=a;b[1]!==k||b[2]!==i||b[3]!==g||b[4]!==m?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup",i?"auth_form_dialog":"auth_form",m);d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"sign_up_button_clicked"});l&&k(d("PolarisSignupActions").setShowRegulatoryConsentModal());return g},b[1]=k,b[2]=i,b[3]=g,b[4]=m,b[5]=a):a=b[5];a=a;var n;b[6]!==m?(n=function(){if(d("PolarisUA").isMobile()&&!l)return c("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:d("PolarisMultiSignupTypes").getFirstStep()}).toString();else if(!d("PolarisUA").isMobile()&&!l||m!=="unifiedHome")return d("PolarisRoutes").EMAIL_SIGNUP_PATH},b[6]=m,b[7]=n):n=b[7];n=n;var o;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Don't have an account?"),b[8]=o):o=b[8];var p;b[9]!==n?(p=n(),b[9]=n,b[10]=p):p=b[10];b[11]!==a||b[12]!==p?(n=j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:p,onClick:a,prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:c("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,preloadCodeOnMount:c("PolarisLoggedOutUpsellExposureV2").xplatform.enable_faster_nav_for_cta,children:f}),b[11]=a,b[12]=p,b[13]=n):n=b[13];b[14]!==e||b[15]!==n?(f=j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"auto",children:j.jsxs("p",{className:e,children:[o," ",n]})}),b[14]=e,b[15]=n,b[16]=f):f=b[16];return f}function n(a){var b=d("react-compiler-runtime").c(10),e=a.className,f=a.fromLoggedOutDialog,g=a.onClick,i=f===void 0?!1:f,k=c("usePolarisPageID")();b[0]!==i||b[1]!==g||b[2]!==k?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login",i?"auth_form_dialog":"auth_form",k);return g},b[0]=i,b[1]=g,b[2]=k,b[3]=a):a=b[3];f=a;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryButton",children:h._(/*BTDS*/"Log in")}),b[4]=a):a=b[4];a=a;b[5]!==f?(a=h._(/*BTDS*/"Have an account? {link that reads Log in}",[h._param("link that reads Log in",j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:d("PolarisLinkBuilder").buildLoginLink("",{source:"auth_switcher"}),onClick:f,children:a}))]),b[5]=f,b[6]=a):a=b[6];b[7]!==e||b[8]!==a?(f=j.jsx("p",{className:e,children:a}),b[7]=e,b[8]=a,b[9]=f):f=b[9];return f}function o(a){var b=d("react-compiler-runtime").c(21),e=a.onSwitchAuthType;a=a.pageType;var f=d("PolarisReactRedux.react").useDispatch(),g=c("usePolarisPageID")(),i=c("usePolarisOneTapLoginEditModeState")(),m=i[0],n=i[1];i=k(!1);var o=i[0],p=i[1];b[0]!==e?(i=function(){d("PolarisOneTapLogin").hasMaxOneTapNonces()?(p(!0),d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_switch_account_too_many_accounts",login_type:"device_based_login"})):(e(d("PolarisAuthActionConstants").AUTH.login),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_switch_account_click",login_type:"device_based_login"}))},b[0]=e,b[1]=i):i=b[1];i=i;var q;b[2]!==m||b[3]!==n?(q=function(){n(!m)},b[2]=m,b[3]=n,b[4]=q):q=b[4];var r=q;b[5]!==g?(q=function(){if(l&&g==="unifiedHome")return;return d("PolarisUA").isMobile()?c("XPolarisMultiStepSignupControllerRouteBuilder").buildUri({step_name:d("PolarisMultiSignupTypes").getFirstStep()}).toString():d("PolarisRoutes").EMAIL_SIGNUP_PATH},b[5]=g,b[6]=q):q=b[6];q=q;if(b[7]!==f||b[8]!==q||b[9]!==i||b[10]!==e||b[11]!==a){var s;b[13]!==a?(s=d("PolarisOneTapLogin").hasMaxOneTapNonces()?void 0:a===d("PolarisAuthConstants").AuthPageType.Signup?c("XPolarisLoginControllerRouteBuilder").buildURL({}):void 0,b[13]=a,b[14]=s):s=b[14];s=j.jsx("div",{children:h._(/*BTDS*/"{link that reads Switch Accounts} or {link that reads sign up}",[h._param("link that reads Switch Accounts",j.jsx(c("IGDSButton.react"),{display:"block",href:s,label:h._(/*BTDS*/"Switch accounts"),onClick:i,variant:"primary_link"})),h._param("link that reads sign up",j.jsx(c("IGDSButton.react"),{display:"block",href:q(),label:h._(/*BTDS*/"Sign Up"),onClick:function(){if(l){f(d("PolarisSignupActions").setShowRegulatoryConsentModal());return}e(d("PolarisAuthActionConstants").AUTH.signup);d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_signup_click",login_type:"device_based_login"})},variant:"primary_link"}))])});b[7]=f;b[8]=q;b[9]=i;b[10]=e;b[11]=a;b[12]=s}else s=b[12];b[15]!==r||b[16]!==o?(q=o&&j.jsx(c("PolarisTooManyAccountsDialog.react"),{onClose:function(){return p(!1)},onConfirm:function(){r(),p(!1)}}),b[15]=r,b[16]=o,b[17]=q):q=b[17];b[18]!==s||b[19]!==q?(i=j.jsxs(j.Fragment,{children:[s,q]}),b[18]=s,b[19]=q,b[20]=i):i=b[20];return i}function a(a){var b=d("react-compiler-runtime").c(29),e=a.authType,f=a.className,g=a.fromLoggedOutDialog,h=a.onNavigate,i=a.onSwitchAuthType,k=a.pageType;a=a.primary;g=g===void 0?!1:g;if(e===d("PolarisAuthActionConstants").AUTH.login||e===d("PolarisAuthActionConstants").AUTH.none){var l;b[0]!==h?(l=function(){return h==null?void 0:h("signup")},b[0]=h,b[1]=l):l=b[1];var p;b[2]!==f||b[3]!==g||b[4]!==l?(p=j.jsx(m,{className:f,fromLoggedOutDialog:g,onClick:l}),b[2]=f,b[3]=g,b[4]=l,b[5]=p):p=b[5];return p}else if(e===d("PolarisAuthActionConstants").AUTH.signup){b[6]!==h?(l=function(){return h==null?void 0:h("login")},b[6]=h,b[7]=l):l=b[7];b[8]!==f||b[9]!==g||b[10]!==l?(p=j.jsx(n,{className:f,fromLoggedOutDialog:g,onClick:l}),b[8]=f,b[9]=g,b[10]=l,b[11]=p):p=b[11];return p}else if(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker||e===d("PolarisAuthActionConstants").AUTH.oneTapLogin){if(b[12]!==e||b[13]!==f){var q;g=d("PolarisOneTapLoginStorage").getLoginNonces();if(e===d("PolarisAuthActionConstants").AUTH.oneTapLogin&&Object.values(g).length===1){l=Object.keys(g)[0];q=g[l].username}p=f;g=q!=null&&j.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:1,position:"relative",children:d("PolarisAuthStrings").notUsernameText(q)});b[12]=e;b[13]=f;b[14]=p;b[15]=g}else p=b[14],g=b[15];b[16]!==i||b[17]!==k||b[18]!==a?(l=j.jsx(o,{onSwitchAuthType:i,pageType:k,primary:a}),b[16]=i,b[17]=k,b[18]=a,b[19]=l):l=b[19];b[20]!==p||b[21]!==g||b[22]!==l?(e=j.jsxs("div",{className:p,children:[g,l]}),b[20]=p,b[21]=g,b[22]=l,b[23]=e):e=b[23];return e}else if(d("PolarisUA").isMobile()){b[24]!==h?(i=function(){return h==null?void 0:h("signup")},b[24]=h,b[25]=i):i=b[25];b[26]!==f||b[27]!==i?(k=j.jsx(m,{className:f,onClick:i}),b[26]=f,b[27]=i,b[28]=k):k=b[28];return k}return null}function b(a){a=a.auth.authType;return{authType:a}}function e(a){return{onSwitchAuthType:function(b){a(d("PolarisAuthActions").switchAuthType(b))}}}f=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=f}),226);
__d("PolarisBarcelonaAppSVGIcon.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j="Threads";function a(a){var b=d("react-compiler-runtime").c(5),c=a.fill;a=a.size;c=c===void 0?"var(--barcelona-logo)":c;a=a===void 0?34:a;var e;b[0]!==c?(e=i.jsx("path",{d:"M141.537 88.9883C140.71 88.5919 139.87 88.2104 139.019 87.8451C137.537 60.5382 122.616 44.905 97.5619 44.745C97.4484 44.7443 97.3355 44.7443 97.222 44.7443C82.2364 44.7443 69.7731 51.1409 62.102 62.7807L75.881 72.2328C81.6116 63.5383 90.6052 61.6848 97.2286 61.6848C97.3051 61.6848 97.3819 61.6848 97.4576 61.6855C105.707 61.7381 111.932 64.1366 115.961 68.814C118.893 72.2193 120.854 76.925 121.825 82.8638C114.511 81.6207 106.601 81.2385 98.145 81.7233C74.3247 83.0954 59.0111 96.9879 60.0396 116.292C60.5615 126.084 65.4397 134.508 73.775 140.011C80.8224 144.663 89.899 146.938 99.3323 146.423C111.79 145.74 121.563 140.987 128.381 132.296C133.559 125.696 136.834 117.143 138.28 106.366C144.217 109.949 148.617 114.664 151.047 120.332C155.179 129.967 155.42 145.8 142.501 158.708C131.182 170.016 117.576 174.908 97.0135 175.059C74.2042 174.89 56.9538 167.575 45.7381 153.317C35.2355 139.966 29.8077 120.682 29.6052 96C29.8077 71.3178 35.2355 52.0336 45.7381 38.6827C56.9538 24.4249 74.2039 17.11 97.0132 16.9405C119.988 17.1113 137.539 24.4614 149.184 38.788C154.894 45.8136 159.199 54.6488 162.037 64.9503L178.184 60.6422C174.744 47.9622 169.331 37.0357 161.965 27.974C147.036 9.60668 125.202 0.195148 97.0695 0H96.9569C68.8816 0.19447 47.2921 9.6418 32.7883 28.0793C19.8819 44.4864 13.2244 67.3157 13.0007 95.9325L13 96L13.0007 96.0675C13.2244 124.684 19.8819 147.514 32.7883 163.921C47.2921 182.358 68.8816 191.806 96.9569 192H97.0695C122.03 191.827 139.624 185.292 154.118 170.811C173.081 151.866 172.51 128.119 166.26 113.541C161.776 103.087 153.227 94.5962 141.537 88.9883ZM98.4405 129.507C88.0005 130.095 77.1544 125.409 76.6196 115.372C76.2232 107.93 81.9158 99.626 99.0812 98.6368C101.047 98.5234 102.976 98.468 104.871 98.468C111.106 98.468 116.939 99.0737 122.242 100.233C120.264 124.935 108.662 128.946 98.4405 129.507Z",fill:c}),b[0]=c,b[1]=e):e=b[1];b[2]!==a||b[3]!==e?(c=i.jsx("svg",{"aria-label":j,height:a,role:"img",viewBox:"0 0 192 192",width:a,xmlns:"http://www.w3.org/2000/svg",children:e}),b[2]=a,b[3]=e,b[4]=c):c=b[4];return c}g["default"]=a}),98);
__d("PolarisFacebookAccountPicker.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisIGCoreConstants","PolarisIGCorePressable.react","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(7),e=a.fbConnectedIgProfiles;a=a.onRequestFBLogin;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x1qjc9v5 x1xp8e9x x5kv4kf xh05dso x13lttk3 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a x1n2onr6 x11njtxf"},b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=j.jsx(c("IGDSBox.react"),{padding:4,position:"relative",children:j.jsx("div",babelHelpers["extends"]({},f,{children:j.jsx(l,{fbConnectedIgProfiles:e,onRequestFBLogin:a})}))}),b[1]=e,b[2]=a,b[3]=f):f=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&j.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:j.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})}),b[4]=e):e=b[4];b[5]!==f?(a=j.jsxs("div",{children:[f,e]}),b[5]=f,b[6]=a):a=b[6];return a}function l(a){var b=d("react-compiler-runtime").c(15),e=a.fbConnectedIgProfiles,f=a.onRequestFBLogin,g=d("PolarisReactRedux.react").useSelector(n),h=d("PolarisReactRedux.react").useSelector(m);if(!f||!e)return null;b[0]!==g||b[1]!==h?(a=function(a){return g&&a!==h},b[0]=g,b[1]=h,b[2]=a):a=b[2];var i=a;b[3]!==g||b[4]!==h?(a=function(a){return g&&a===h},b[3]=g,b[4]=h,b[5]=a):a=b[5];var k=a;if(b[6]!==e||b[7]!==i||b[8]!==k||b[9]!==f){b[11]!==i||b[12]!==k||b[13]!==f?(a=function(a){var b=a.username,e=i(b),g=k(b),h=function(){return f(b)};return j.jsxs(c("PolarisIGCorePressable.react"),{className:"x6s0dn4 x5n08af x1ypdohk x78zum5 x1q0g3np xwhw2v2 xsag5q8",onPress:e?c("emptyFunction"):h,role:"button",tabIndex:0,children:[j.jsx(c("IGDSBox.react"),{marginEnd:3,position:"relative",children:j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:a.profilePictureUrl,size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,username:b})}),j.jsx(c("IGDSBox.react"),{display:"block",flex:"grow",position:"relative",children:j.jsx(c("IGDSText.react"),{weight:"semibold",children:b})}),j.jsx(c("IGDSBox.react"),{position:"relative",children:j.jsx(c("IGDSButton.react"),{display:"block",isDisabled:e,isLoading:g,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:h})})]},b)},b[11]=i,b[12]=k,b[13]=f,b[14]=a):a=b[14];a=e.map(a);b[6]=e;b[7]=i;b[8]=k;b[9]=f;b[10]=a}else a=b[10];return a}function m(a){return a.auth.login.igUsername}function n(a){return a.auth.login.requestInFlight}function a(a){var b=d("react-compiler-runtime").c(5),e=a.fbConnectedIgProfiles;a=a.onRequestFBLogin;d("PolarisLoginLogger").logLoginEvent({event_name:"account_picker_multi_linked_user_form_load"});var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"You can log into these accounts because they're in your Accounts Center."),b[0]=f):f=b[0];f=f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:2,paddingX:3,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:f})}),b[1]=f):f=b[1];b[2]!==e||b[3]!==a?(f=j.jsxs(c("IGDSBox.react"),{position:"relative",width:"350px",children:[f,j.jsx(k,{fbConnectedIgProfiles:e,onRequestFBLogin:a})]}),b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),226);
__d("XPolarisEmailSignupControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/accounts/emailsignup/",Object.freeze({hide_fb_signup:!1}),void 0);b=a;g["default"]=b}),98);
__d("PolarisFacebookLoginForm.react",["fbt","IGDSBox.react","IGDSButton.react","PolarisAuthActionConstants","PolarisAuthConstants","PolarisAuthStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisLoggedOutCtaImpressionLogger","PolarisLoginActionConstants","PolarisLoginLogger","XPolarisEmailSignupControllerRouteBuilder","polarisLogAction","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.$1=function(a,c){a.preventDefault(),b.props.onSwitchAccountsClick(c)},babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){c("polarisLogAction")("facebookLoginFormDisplayed"),d("PolarisLoginLogger").logLoginEvent({event_name:"fb_login_form_load",fbconnect_status:this.props.fbConnectStatus,login_type:"fbconnect"}),d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",this.props.pageID)};e.$2=function(){var a,b;this.props.errorMessage!=null&&this.props.errorMessage!==""&&(a=this.props.errorMessage,b="xkmlbd1 x1qoy3rc xdj266r xyu1916 xat24cr xbt2mb3 xexx8yu xf159sx xx6bls6 xe2zdcy xxymvpz");return a==null||a===""||a===d("PolarisLoginActionConstants").FB_SSO_DISABLED?null:j.jsx("div",{className:b,children:j.jsx("p",{"aria-atomic":"true",id:"errorAlert",role:"alert",children:a},"message")})};e.$3=function(){var a=this,b=this.props.accountInfo.profilePictureUrl,d=this.props.accountInfo.username,e=this.props.requestInFlight;return j.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(b){return a.props.onRequestLogin(d,b)},children:j.jsx("img",babelHelpers["extends"]({alt:h._(/*BTDS*/"{username}'s profile picture",[h._param("username",d)])},{0:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk"},1:{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x1m2trrv xxy3q5o x119j0k9 x1ynp9ky x1lliihq xln7xf2 xk390pu xpyat2d x1anpbxc x11t971q xyorhqc xvc5jky xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x1exxlbk xz5rk10"}}[!!e<<0],{src:b}))})})};e.render=function(){var a=this,b=this.props.accountInfo,e=h._(/*BTDS*/"Continue as {username}",[h._param("username",b.username)]);return j.jsxs("div",{className:"x78zum5 xdt5ytf",children:[this.$2(),this.$3(),j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:"auto",marginStart:"auto",marginTop:4,maxWidth:"100%",minWidth:120,position:"relative",width:"intrinsic",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:function(c){return a.props.onRequestLogin(b.username,c)},children:j.jsx(c("IGDSBox.react"),{paddingX:4,position:"relative",children:j.jsx(c("PolarisIGCoreText").BodyEmphasized,{color:"web-always-white",display:"truncated",zeroMargin:!0,children:e})})})}),j.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x78zum5 xdt5ytf x2lah0s xln7xf2 xk390pu xcxhlts x14z9mp x1fqp7bg x1lziwak xexx8yu xp48ta0 x18d9i69 xtssl2i x1n2onr6 x2b8uid x11njtxf",children:j.jsxs("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xt0psk2 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:[d("PolarisAuthStrings").notUsernameText(b.username)," ",this.props.pageType===d("PolarisAuthConstants").AuthPageType.Signup?j.jsx(c("IGDSButton.react"),{display:"block",href:c("XPolarisEmailSignupControllerRouteBuilder").buildURL({}),label:h._(/*BTDS*/"Sign Up"),onClick:function(b){return a.$1(b,d("PolarisAuthActionConstants").AUTH.signup)},variant:"primary_link"}):j.jsx(c("IGDSButton.react"),{display:"block",label:h._(/*BTDS*/"Switch accounts"),onClick:function(b){return a.$1(b,d("PolarisAuthActionConstants").AUTH.login)},variant:"primary_link"})]})})]})};return b}(j.Component);g["default"]=a}),226);
__d("PolarisLandingFormButtonGroup.react",["IGDSBox.react","IGDSText.react","PolarisAuthStrings","PolarisIGCoreButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={brandForwardPrimaryButtonContainer:{paddingTop:"xexx8yu",paddingInlineEnd:"x64bnmy",paddingBottom:"x18d9i69",paddingInlineStart:"x13jy36j",width:"xh8yej3",$$css:!0}};function k(a){var b=d("react-compiler-runtime").c(6);a=a.button;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={__className:"x5yr21d"},b[0]=e):e=b[0];var f;b[1]!==a.label?(f=i.jsx(c("IGDSText.react"),{color:"primaryButton",weight:"semibold",children:a.label}),b[1]=a.label,b[2]=f):f=b[2];b[3]!==a.onClick||b[4]!==f?(e=i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:e,"data-testid":void 0,onClick:a.onClick,children:f}),b[3]=a.onClick,b[4]=f,b[5]=e):e=b[5];return e}function l(a){var b=d("react-compiler-runtime").c(11),e=a.buttonEnd;a=a.buttonStart;var f;b[0]!==a?(f=a&&i.jsx(k,{button:a}),b[0]=a,b[1]=f):f=b[1];var g;b[2]!==e||b[3]!==a?(g=a&&e&&i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:1,marginStart:1,position:"relative",children:i.jsx(c("IGDSText.react"),{color:"secondaryText",children:d("PolarisAuthStrings").OR})}),b[2]=e,b[3]=a,b[4]=g):g=b[4];b[5]!==e?(a=e&&i.jsx(k,{button:e}),b[5]=e,b[6]=a):a=b[6];b[7]!==f||b[8]!==g||b[9]!==a?(e=i.jsxs(c("IGDSBox.react"),{alignSelf:"center",display:"inlineBlock",marginTop:5,position:"relative",children:[f,g,a]}),b[7]=f,b[8]=g,b[9]=a,b[10]=e):e=b[10];return e}function m(a){var b=d("react-compiler-runtime").c(6),e=a.fullWidth;a=a.primaryButton;e=e===void 0?!1:e;var f;b[0]!==a.label?(f=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",position:"relative",children:a.label}),b[0]=a.label,b[1]=f):f=b[1];var g;b[2]!==e||b[3]!==a.onClick||b[4]!==f?(g=i.jsx(c("PolarisIGCoreButton.react"),{fullWidth:e,large:!0,onClick:a.onClick,children:f}),b[2]=e,b[3]=a.onClick,b[4]=f,b[5]=g):g=b[5];return g}function a(a){var b=d("react-compiler-runtime").c(12),e=a.isBrandForwardStyle,f=a.primaryButton,g=a.secondaryButtonEnd;a=a.secondaryButtonStart;e=e===void 0?!1:e;var h=e&&j.brandForwardPrimaryButtonContainer,k;b[0]!==e||b[1]!==f?(k=e?i.jsx("div",{className:"x1wmp3kr x15b4ht x11g16fi xkyum4 x6ikm8r x10wlt62",children:i.jsx(m,{fullWidth:!0,primaryButton:f})}):i.jsx(m,{primaryButton:f}),b[0]=e,b[1]=f,b[2]=k):k=b[2];b[3]!==h||b[4]!==k?(e=i.jsx(c("IGDSBox.react"),{marginEnd:10,marginStart:10,marginTop:4,position:"relative",xstyle:h,children:k}),b[3]=h,b[4]=k,b[5]=e):e=b[5];b[6]!==g||b[7]!==a?(f=i.jsx(l,{buttonEnd:g,buttonStart:a}),b[6]=g,b[7]=a,b[8]=f):f=b[8];b[9]!==e||b[10]!==f?(h=i.jsxs(i.Fragment,{children:[e,f]}),b[9]=e,b[10]=f,b[11]=h):h=b[11];return h}g["default"]=a}),98);
__d("PolarisLoggedOutCarouselCard.react",["CometImage.react","IGDSBox.react","PolarisHSnapScroll.react","PolarisStepIndicator.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k={image:{display:"x1lliihq",height:"x5yr21d",width:"x14atkfc",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(20),e=a.images,f=a.texts;a=j(0);var g=a[0],h=a[1];b[0]!==g||b[1]!==e.length?(a=function(a){a=a.startPct;a=Math.round(a);a=Math.max(0,Math.min(a,e.length-1));a!==g&&h(a)},b[0]=g,b[1]=e.length,b[2]=a):a=b[2];a=a;if(b[3]!==e||b[4]!==f){var m;b[6]!==f?(m=function(a,b){return i.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1g81zrj xn9wirt",children:[i.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x1vd4hg5 xl56j7k x6ikm8r x10wlt62 x14atkfc",children:i.jsx(c("CometImage.react"),{src:a,xstyle:k.image})}),i.jsx("div",{className:"x1qz8m4s xnh215r xddofbv x1j61x8r xo1l8bm xkds0cx x1ls015a xat24cr xotxm5o x11fxgd9 x2b8uid",children:f[b]||""})]},b)},b[6]=f,b[7]=m):m=b[7];m=e.map(m);b[3]=e;b[4]=f;b[5]=m}else m=b[5];m=m;var n;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(n={className:"x16nrsnc xdj266r xpwdb9g xat24cr xefazk8 x1n2onr6 xh8yej3"},b[8]=n):n=b[8];var o;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(o={next:!0,previous:!0},b[9]=o):o=b[9];b[10]!==m||b[11]!==a||b[12]!==e.length?(o=i.jsx(c("PolarisHSnapScroll.react"),{animationDuration:150,enableMouseSwipe:!0,gutterWidth:0,itemCount:e.length,itemWidth:window.innerWidth,onInteract:l,onVisibilityChange:a,pagerDisabled:o,swipeSize:1,children:m}),b[10]=m,b[11]=a,b[12]=e.length,b[13]=o):o=b[13];b[14]!==g||b[15]!==e.length?(m=e.length>1&&i.jsx(c("PolarisStepIndicator.react"),{className:"x6s0dn4 xxzp1fc x1f889gz xrr41r3 xl56j7k x10l6tqk",numSteps:e.length,selectedStep:g,style:"lightContrast"}),b[14]=g,b[15]=e.length,b[16]=m):m=b[16];b[17]!==o||b[18]!==m?(a=i.jsx(c("IGDSBox.react"),{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:i.jsxs("div",babelHelpers["extends"]({},n,{children:[o,m]}))}),b[17]=o,b[18]=m,b[19]=a):a=b[19];return a}function l(){}g["default"]=a}),98);
__d("PolarisLoggedOutMobileHomeBrandingContent.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSIgLogoFilledIcon.react","PolarisLandingFormUtils","PolarisLoggedOutCarouselCard.react","react","react-compiler-runtime","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(9);a=a.onLogoClick;if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){var e;e=[{images:[i("914477"),i("914478"),i("914479")],texts:[(e=d("PolarisLandingFormUtils")).WATCH_SEND_SHORT_VIDEOS,e.SEE_FRIENDS_CREATORS_UPDATES,e.FIND_SHARE_INTERESTS]},{images:[i("914480"),i("914481"),i("914482")],texts:[e.COMMUNITY_Q_AND_A,e.MATCH_MUSIC_TO_MOMENTS,e.SAVE_CORE_MEMORIES]},{images:[i("914483"),i("914484"),i("914485")],texts:[e.SHARE_WITH_CLOSE_FRIENDS,e.SPARK_DM_CONVERSATIONS,e.DROP_QUICK_NOTES]}];b[0]=e}else e=b[0];e=e;var f=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();f=f.getBrandForwardButtonSwitchUpsellVariant;f=f()==="mweb_button_switch_a";var g=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")(),j=g.getBrandForwardDeeplinkLogoUpsellVariant;g=g.isBrandForwardDeeplinkLogoUpsell;j=j()==="mweb_deeplink_logo";var m;b[1]!==f||b[2]!==j||b[3]!==g||b[4]!==a?(m=f||g?k.jsxs(k.Fragment,{children:[j?k.jsx(c("IGDSBox.react"),{alignItems:"baseline",marginBottom:5,marginTop:2,paddingX:2,children:k.jsx(c("IGDSButton.react"),{icon:k.jsx(c("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47}),onClick:a,variant:"tertiary"})}):k.jsx(c("IGDSBox.react"),{alignItems:"baseline",marginBottom:3,paddingX:6,children:k.jsx(c("IGDSIgLogoFilledIcon.react"),{alt:"ins",color:"ig-primary-text",size:47})}),k.jsxs(c("IGDSBox.react"),{alignItems:"center",marginBottom:13,marginTop:10,paddingX:6,children:[k.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Landing image"),"data-testid":void 0,src:{light:i("914486")}}),k.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xcg35fi xo1l8bm xmx5zq6 x9d7mpn x14vqqas",children:d("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})]})]}):k.jsxs(c("IGDSBox.react"),{marginBottom:3,marginTop:16,paddingY:10,position:"relative",children:[k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:3,marginTop:14,position:"relative",children:k.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Instagram"),src:{dark:i("222731"),light:i("222730")}})}),k.jsx(c("IGDSBox.react"),{marginBottom:16,paddingX:9,position:"relative",children:k.jsx("div",{className:"x1qz8m4s xnh215r x1j61x8r x2b8uid xngnso2 xk50ysn x8y9ox5 xggjnk3",children:d("PolarisLandingFormUtils").SHARE_EVERYDAY_MOMENTS_FBT})})]}),b[1]=f,b[2]=j,b[3]=g,b[4]=a,b[5]=m):m=b[5];f=m;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=e.map(l),b[6]=j):j=b[6];g=j;b[7]!==f?(a=k.jsxs(k.Fragment,{children:[f,g]}),b[7]=f,b[8]=a):a=b[8];return a}function l(a,b){return k.jsx("div",{className:"x1byr4rc xyri2b x1egpv2n x1c1uobl",children:k.jsx(c("PolarisLoggedOutCarouselCard.react"),{images:a.images,texts:a.texts},b)},b)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisLandingForm.react",["IGDSBox.react","InstagramODS","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisFooter.react","PolarisIGCoreText","PolarisIgLiteCarbonUpsellsUtils","PolarisLandingFormButtonGroup.react","PolarisLandingFormUtils","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutMobileHomeBrandingContent.react","PolarisLoggedOutUpsellUtils","PolarisReactRedux.react","PolarisRoutePropUtils","PolarisSignupActions","PolarisUA","XPolarisLoginControllerRouteBuilder","gkx","qex","react","react-compiler-runtime","useCometRouterDispatcher","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell","usePolarisOpenApp","usePolarisPageID"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext;function k(a,b,c){return{primary:{label:c.buttonText,onClick:c.onClickFn},secondary:{end:{label:d("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT_LOWER_CASE,onClick:b},start:{label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:a}}}}function a(a){var b=d("react-compiler-runtime").c(27);a=a.ref;var e=d("PolarisReactRedux.react").useDispatch(),f=c("usePolarisPageID")(),g=c("useCometRouterDispatcher")(),h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=d("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),b[0]=h):h=b[0];var l=h;h=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();h=h.isBrandForwardButtonSwitchUpsell;var m=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")();m=m.isBrandForwardDeeplinkLogoUpsell;h=h||m;m=j(d("PolarisRoutePropUtils").PolarisRoutePropContext);var n;b[1]!==m.routePropQE?(n=m.routePropQE.getNumber("landing_page_value_prop_variant",0),b[1]=m.routePropQE,b[2]=n):n=b[2];m=Number(n);b[3]!==e||b[4]!==f?(n=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("signup","full_page",f),d("PolarisAuthLimitedRegistrationHelpers").hasRestrictedRegistration()?e(d("PolarisSignupActions").setShowRegulatoryConsentModal()):e(d("PolarisAuthActions").switchAuthType(d("PolarisAuthActionConstants").AUTH.signup))},b[3]=e,b[4]=f,b[5]=n):n=b[5];n=n;var o;b[6]!==g||b[7]!==e||b[8]!==f?(o=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login","full_page",f),c("gkx")("17136")===!0||c("qex")._("2511")===!0||c("qex")._("2512")===!0?g==null||g.go(c("XPolarisLoginControllerRouteBuilder").buildUri({mtn:!0}).toString(),{}):e(d("PolarisAuthActions").switchAuthType(d("PolarisAuthActionConstants").AUTH.login))},b[6]=g,b[7]=e,b[8]=f,b[9]=o):o=b[9];o=o;var p=c("usePolarisOpenApp")(),q;b[10]!==p||b[11]!==f?(q=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("app_open","full_page",f),d("PolarisUA").isDesktop()&&c("InstagramODS").incr("web.desktop.app_open_click.PolarisLandingForm"),p(l?{utmCampaignDefault:"rootLandingPage",utmMedium:"installLink"}:void 0)},b[10]=p,b[11]=f,b[12]=q):q=b[12];q=q;var r=d("PolarisLoggedOutUpsellUtils").useGetUpsellTextAndAction(q,l),s;b[13]!==o||b[14]!==n||b[15]!==r?(s=k(o,n,r),b[13]=o,b[14]=n,b[15]=r,b[16]=s):s=b[16];o=s;b[17]!==o.primary||b[18]!==o.secondary.end||b[19]!==o.secondary.start||b[20]!==h||b[21]!==q||b[22]!==m?(n=h?i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisLoggedOutMobileHomeBrandingContent.react"),{onLogoClick:q}),i.jsx(c("IGDSBox.react"),{marginTop:17,children:i.jsx(c("PolarisFooter.react"),{includeLanguageAndCopyright:!0,variant:"centered"})}),i.jsx("div",{className:"x6s0dn4 xm0mo6v xxux13n x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod xl84xjf xixxii4 xh8yej3 x1vjfegm",children:i.jsx(c("PolarisLandingFormButtonGroup.react"),{isBrandForwardStyle:h,primaryButton:o.primary,secondaryButtonEnd:o.secondary.end,secondaryButtonStart:o.secondary.start})})]}):i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{marginBottom:4,paddingX:7,position:"relative",children:i.jsx(c("PolarisIGCoreText"),{Element:"h1",size:"headline2",textAlign:"center",weight:"normal",children:d("PolarisLandingFormUtils").getLoginValuePropText(m)})}),i.jsx(c("PolarisLandingFormButtonGroup.react"),{primaryButton:o.primary,secondaryButtonEnd:o.secondary.end,secondaryButtonStart:o.secondary.start})]}),b[17]=o.primary,b[18]=o.secondary.end,b[19]=o.secondary.start,b[20]=h,b[21]=q,b[22]=m,b[23]=n):n=b[23];b[24]!==a||b[25]!==n?(r=i.jsx(c("IGDSBox.react"),{containerRef:a,flex:"grow",marginTop:5,position:"relative",width:"100%",children:n}),b[24]=a,b[25]=n,b[26]=r):r=b[26];return r}g["default"]=a}),98);
__d("PolarisLoggedOutContentWallDialogAuthCTAs.react",["IGDSText.react","PolarisAppInstallStrings","PolarisConsentStrings.react","PolarisLoggedOutLoginButton.react","PolarisLoggedOutSignupButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={button:{height:"xn3w4p2",$$css:!0}};function a(){var a=d("react-compiler-runtime").c(5),b,e,f,g;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={className:"xkh2ocl x78zum5 xdt5ytf xyamay9 xv54qhq x1l90r2v xf7dkkf x3pnbk8"},e=i.jsx(c("PolarisLoggedOutSignupButton.react"),{ctaTypeV2:"auth_form_dialog",isDismissible:!0,label:d("PolarisAppInstallStrings").SIGNUP_UP_FOR_INSTAGRAM_APP,loginSource:"logged_out_megaphone_signup",variant:"primary",xstyle:j.button}),f=i.jsx(c("PolarisLoggedOutLoginButton.react"),{ctaTypeV2:"auth_form_dialog",loginSource:"logged_out_megaphone_signup",variant:"secondary",xstyle:j.button}),g={className:"xz9dl7a xsag5q8"},a[0]=b,a[1]=e,a[2]=f,a[3]=g):(b=a[0],e=a[1],f=a[2],g=a[3]);a[4]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsxs("div",babelHelpers["extends"]({},b,{children:[e,f,i.jsx("div",babelHelpers["extends"]({},g,{children:i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:d("PolarisConsentStrings.react").instagramTermsOfUseAndPrivacyPolicyText("secondaryText")})}))]})),a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("PolarisLoginActionClearStopDeletionNonce",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a,b){a({deletionDate:null,deletionNonce:null,type:"ACCOUNT_DELETED"})}}f.clearStopDeletionNonce=a}),66);
__d("PolarisLoginActionOneTapLoginRemove",["PolarisAuthStrings","PolarisLoginLogger","PolarisOneTapLogin","PolarisToastActions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,c){d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_account_remove_click",ig_userid:a,login_type:"device_based_login"});try{d("PolarisOneTapLogin").removeLoginNonce(a)}catch(a){d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_account_remove_failed",login_type:"device_based_login"}),b(d("PolarisToastActions").showToast({persistOnNavigate:!0,text:d("PolarisAuthStrings").LOGIN_FAILED_TEXT}))}window.location.reload()}}g.oneTapLoginRemove=a}),98);
__d("PolarisOneTapLoginForm.react",["fbt","CometPressable.react","IGDSBox.react","IGDSButton.react","IGDSDivider.react","IGDSXPanoFilledIcon.react","PolarisAuthStrings","PolarisAuthTypeSwitcher.react","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","PolarisLoginActionOneTapLogin","PolarisLoginActionOneTapLoginRemove","PolarisLoginLogger","PolarisReactRedux.react","PolarisUA","PolarisUserAvatar.react","emptyFunction","react","react-compiler-runtime","stylex","usePolarisOneTapLoginEditModeState","useSingleSimpleImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j,m=l.useCallback,n=l.useState,o=h._(/*BTDS*/"Manage Accounts"),p={account:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",fontWeight:"xwhw2v2",$$css:!0},multiContainer:{paddingBottom:"xx6bls6",paddingTop:"x7sb2j6",$$css:!0},profilePicture:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginInlineEnd:"xbmvrgn",$$css:!0},profilePictureSingle:{borderTopColor:"x1w6pcvv",borderInlineEndColor:"x1kr3336",borderBottomColor:"x1e5933n",borderInlineStartColor:"x8itksh",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",marginTop:"x1xmf6yo",marginInlineEnd:"x11t971q",marginBottom:"x1yztbdb",marginInlineStart:"xvc5jky",$$css:!0},root:{fontSize:"xvs91rp",fontWeight:"xz5fbns",maxWidth:"x1dc814f",width:"xh8yej3",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(12),e=a.handleRemoveOneTapLoginDialogClose,f=a.handleRemoveOneTapLoginDialogConfirm,g=a.userId;a=a.username;var i;b[0]!==a?(i=h._(/*BTDS*/"You'll need to enter your username and password the next time you log in as {username}",[h._param("username",a)]),b[0]=a,b[1]=i):i=b[1];var j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Cancel"),j=h._(/*BTDS*/"Remove"),b[2]=a,b[3]=j):(a=b[2],j=b[3]);var l;b[4]!==f||b[5]!==g?(l=function(){return f(g)},b[4]=f,b[5]=g,b[6]=l):l=b[6];var m;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Remove Account?"),b[7]=m):m=b[7];b[8]!==e||b[9]!==i||b[10]!==l?(a=k.jsx(c("PolarisConfirmDialog.react"),{body:i,cancelLabel:a,confirmLabel:j,onClose:e,onConfirm:l,title:m}),b[8]=e,b[9]=i,b[10]=l,b[11]=a):a=b[11];return a}function r(a){var b=d("react-compiler-runtime").c(33),e=a.fbConnectedUser,f=a.isLoginButtonDisabled,g=a.isLoginButtonLoading,h=a.onRequestFBLogin;if(!e||!h)return null;a=e.fbUserID;var i=e.profilePictureUrl,j=e.username;e=String(a);b[0]!==e||b[1]!==f?(a=f(e),b[0]=e,b[1]=f,b[2]=a):a=b[2];f=a;b[3]!==e||b[4]!==g?(a=g(e),b[3]=e,b[4]=g,b[5]=a):a=b[5];e=a;b[6]!==f||b[7]!==h||b[8]!==j?(g=f?c("emptyFunction"):function(){h(j)},b[6]=f,b[7]=h,b[8]=j,b[9]=g):g=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a="x1w6pcvv x1kr3336 x1e5933n x8itksh x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xbmvrgn",b[10]=a):a=b[10];var l;b[11]!==h||b[12]!==j?(l=function(){return h(j)},b[11]=h,b[12]=j,b[13]=l):l=b[13];b[14]!==i||b[15]!==l||b[16]!==j?(a=k.jsx(c("PolarisUserAvatar.react"),{className:a,isLink:!1,onClick:l,profilePictureUrl:i,size:s,username:j}),b[14]=i,b[15]=l,b[16]=j,b[17]=a):a=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},b[18]=i):i=b[18];b[19]!==j?(l=k.jsx("div",babelHelpers["extends"]({},i,{children:j})),b[19]=j,b[20]=l):l=b[20];b[21]!==h||b[22]!==j?(i=function(){h(j)},b[21]=h,b[22]=j,b[23]=i):i=b[23];var m;b[24]!==f||b[25]!==e||b[26]!==i?(m=k.jsx(c("IGDSBox.react"),{justifyContent:"end",children:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:f,isLoading:e,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:i})}),b[24]=f,b[25]=e,b[26]=i,b[27]=m):m=b[27];b[28]!==m||b[29]!==g||b[30]!==a||b[31]!==l?(f=k.jsxs(c("CometPressable.react"),{onPress:g,role:"button",xstyle:p.account,children:[a,l,m]}),b[28]=m,b[29]=g,b[30]=a,b[31]=l,b[32]=f):f=b[32];return f}var s=38,t=86;function u(a){var b=d("react-compiler-runtime").c(14),e=a.handleLoginClick,f=a.isSingleAccount,g=a.loginNonces,h=a.userId;a=g[h];var j=a.nonce;g=a.profilePicUrl;a=a.username;var l;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"x78zum5 xl56j7k"},b[0]=l):l=b[0];var m=f?p.profilePictureSingle:p.profilePicture,n;b[1]!==m?(n=(i||(i=c("stylex")))(m),b[1]=m,b[2]=n):n=b[2];b[3]!==e||b[4]!==f||b[5]!==j||b[6]!==h?(m=f?function(){return e(h,j)}:void 0,b[3]=e,b[4]=f,b[5]=j,b[6]=h,b[7]=m):m=b[7];f=f?t:s;b[8]!==g||b[9]!==n||b[10]!==m||b[11]!==f||b[12]!==a?(l=k.jsx("div",babelHelpers["extends"]({},l,{children:k.jsx(c("PolarisUserAvatar.react"),{className:n,isLink:!1,onClick:m,profilePictureUrl:g,size:f,username:a})})),b[8]=g,b[9]=n,b[10]=m,b[11]=f,b[12]=a,b[13]=l):l=b[13];return l}function v(a){var b=d("react-compiler-runtime").c(39),e=a.editMode,f=a.handleLoginClick,g=a.handleRemoveAccountClick,h=a.isLoginButtonDisabled,i=a.isLoginButtonLoading,j=a.loginNonces,l=a.userId,m=j[l].nonce,n=j[l].username;b[0]!==h||b[1]!==l?(a=h(l),b[0]=h,b[1]=l,b[2]=a):a=b[2];h=a;b[3]!==i||b[4]!==l?(a=i(l),b[3]=i,b[4]=l,b[5]=a):a=b[5];i=a;b[6]!==e||b[7]!==f||b[8]!==h||b[9]!==m||b[10]!==l?(a=e||h?c("emptyFunction"):function(){return f(l,m)},b[6]=e,b[7]=f,b[8]=h,b[9]=m,b[10]=l,b[11]=a):a=b[11];a=a;var o=h||i,q;b[12]!==g||b[13]!==l||b[14]!==n?(q=function(){return g(l,n)},b[12]=g,b[13]=l,b[14]=n,b[15]=q):q=b[15];var r;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(r=k.jsx(c("IGDSXPanoFilledIcon.react"),{alt:d("PolarisGenericStrings").CLOSE_TEXT,size:12}),b[16]=r):r=b[16];b[17]!==o||b[18]!==q?(r=k.jsx(c("PolarisIGCoreSVGIconButton.react"),{disabled:o,onClick:q,padding:0,children:r}),b[17]=o,b[18]=q,b[19]=r):r=b[19];o=r;b[20]!==f||b[21]!==j||b[22]!==l?(q=k.jsx(u,{handleLoginClick:f,isSingleAccount:!1,loginNonces:j,userId:l}),b[20]=f,b[21]=j,b[22]=l,b[23]=q):q=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"x1qjc9v5 xdt5ytf x1iyjqo2 xs83m0k x6ikm8r x10wlt62 xlyipyv xuxw1ft"},b[24]=r):r=b[24];b[25]!==n?(j=k.jsx("div",babelHelpers["extends"]({},r,{children:n})),b[25]=n,b[26]=j):j=b[26];b[27]!==e||b[28]!==a||b[29]!==h||b[30]!==i||b[31]!==o?(r=k.jsx(c("IGDSBox.react"),{justifyContent:"end",children:e?o:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:h,isLoading:i,label:d("PolarisAuthStrings").LOG_IN_BUTTON_TEXT,onClick:a})}),b[27]=e,b[28]=a,b[29]=h,b[30]=i,b[31]=o,b[32]=r):r=b[32];b[33]!==a||b[34]!==j||b[35]!==r||b[36]!==q||b[37]!==l?(e=k.jsx(c("IGDSBox.react"),{alignItems:"center",columnGap:2,direction:"row",flex:"grow",paddingY:2,children:k.jsxs(c("CometPressable.react"),{onPress:a,role:"button",xstyle:p.account,children:[q,j,r]},l)}),b[33]=a,b[34]=j,b[35]=r,b[36]=q,b[37]=l,b[38]=e):e=b[38];return e}function w(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("IGDSBox.react"),{paddingX:9,paddingY:2,position:"relative",width:"100%",children:k.jsx(c("IGDSDivider.react"),{})}),a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsxs(k.Fragment,{children:[b,k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:4,marginTop:4,position:"relative",children:k.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})})]}),a[1]=b):b=a[1];return b}function x(a){var b=d("react-compiler-runtime").c(3);a=a.onRemoveClick;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Remove Account"),b[0]=e):e=b[0];b[1]!==a?(e=k.jsx(c("IGDSButton.react"),{display:"block",label:e,onClick:a,variant:"primary_link"}),b[1]=a,b[2]=e):e=b[2];return e}function y(a){var b=d("react-compiler-runtime").c(29),e=a.handleLoginClick,f=a.handleRemoveAccountClick,g=a.isLoginButtonLoading,i=a.loginNonces;a=a.showSingleAccountProfilePicture;var j;b[0]!==i?(j=Object.keys(i),b[0]=i,b[1]=j):j=b[1];var l=j[0];j=i[l];var m=j.nonce,n=j.username;b[2]!==n?(j=h._(/*BTDS*/"Continue as {username}",[h._param("username",n)]),b[2]=n,b[3]=j):j=b[3];j=j;var o;b[4]!==e||b[5]!==i||b[6]!==a||b[7]!==l?(o=a&&k.jsx(u,{handleLoginClick:e,isSingleAccount:!0,loginNonces:i,userId:l}),b[4]=e,b[5]=i,b[6]=a,b[7]=l,b[8]=o):o=b[8];b[9]!==g||b[10]!==l?(i=g(l),b[9]=g,b[10]=l,b[11]=i):i=b[11];b[12]!==e||b[13]!==m||b[14]!==l?(a=function(){return e(l,m)},b[12]=e,b[13]=m,b[14]=l,b[15]=a):a=b[15];b[16]!==j||b[17]!==i||b[18]!==a?(g=k.jsx(c("IGDSBox.react"),{marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:4,minWidth:120,position:"relative",width:"intrinsic",children:k.jsx(c("IGDSButton.react"),{isLoading:i,label:j,onClick:a,size:"small",variant:"primary"})}),b[16]=j,b[17]=i,b[18]=a,b[19]=g):g=b[19];b[20]!==f||b[21]!==l||b[22]!==n?(j=k.jsx(c("IGDSBox.react"),{alignItems:"center",marginBottom:5,position:"relative",children:k.jsx(x,{onRemoveClick:function(){return f(l,n)}})}),b[20]=f,b[21]=l,b[22]=n,b[23]=j):j=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(i=d("PolarisUA").isMobile()&&k.jsx(w,{}),b[24]=i):i=b[24];b[25]!==o||b[26]!==g||b[27]!==j?(a=k.jsxs(c("IGDSBox.react"),{direction:"column",flex:"grow",children:[o,g,j,i]}),b[25]=o,b[26]=g,b[27]=j,b[28]=a):a=b[28];return a}function z(a){var b=d("react-compiler-runtime").c(27),e=a.editMode,f=a.fbConnectedUser,g=a.handleLoginClick,i=a.handleManageAccountsClick,j=a.handleRemoveAccountClick,l=a.isLoginButtonDisabled,m=a.isLoginButtonLoading,n=a.loginNonces;a=a.onRequestFBLogin;var q;b[0]!==e?(q=e?h._(/*BTDS*/"Done Editing"):o,b[0]=e,b[1]=q):q=b[1];q=q;var s;b[2]!==n?(s=Object.keys(n),b[2]=n,b[3]=s):s=b[3];var t;b[4]!==e||b[5]!==g||b[6]!==j||b[7]!==l||b[8]!==m||b[9]!==n||b[10]!==s?(t=s.map(function(a){return k.jsx(v,{editMode:e,handleLoginClick:g,handleRemoveAccountClick:j,isLoginButtonDisabled:l,isLoginButtonLoading:m,loginNonces:n,userId:a},"account_"+a)}),b[4]=e,b[5]=g,b[6]=j,b[7]=l,b[8]=m,b[9]=n,b[10]=s,b[11]=t):t=b[11];s=t;b[12]!==f||b[13]!==l||b[14]!==m||b[15]!==a?(t=k.jsx(r,{fbConnectedUser:f,isLoginButtonDisabled:l,isLoginButtonLoading:m,onRequestFBLogin:a}),b[12]=f,b[13]=l,b[14]=m,b[15]=a,b[16]=t):t=b[16];b[17]!==s||b[18]!==t?(f=k.jsxs(c("IGDSBox.react"),{alignItems:"stretch",direction:"column",paddingX:4,xstyle:p.multiContainer,children:[s,t]}),b[17]=s,b[18]=t,b[19]=f):f=b[19];b[20]!==i||b[21]!==q?(a=k.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",children:k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(c("IGDSButton.react"),{display:"block",label:q,onClick:i,variant:"primary_link"})})}),b[20]=i,b[21]=q,b[22]=a):a=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("PolarisUA").isMobile()&&k.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:k.jsx(c("PolarisAuthTypeSwitcher.react"),{primary:!0})}),b[23]=s):s=b[23];b[24]!==f||b[25]!==a?(t=k.jsxs(c("IGDSBox.react"),{direction:"column",flex:"grow",children:[f,a,s]}),b[24]=f,b[25]=a,b[26]=t):t=b[26];return t}function a(a){var b=a.fbConnectedUser,e=a.loginNonces,f=a.onLoginClick,g=a.onRemoveClick,h=a.onRequestFBLogin,i=a.requestInFlight,j=a.requestUserId;a=a.showSingleAccountProfilePicture;a=a===void 0?!0:a;var l=n({id:"",username:""}),o=l[0],r=l[1];l=n(!1);var s=l[0],t=l[1];l=c("usePolarisOneTapLoginEditModeState")();var u=l[0],v=l[1];c("useSingleSimpleImpression")(function(){Object.keys(e).length===1?d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_single_user_form_load",login_type:"device_based_login"}):d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_multi_user_form_load",login_type:"device_based_login"}),d("PolarisLoginLogger").logLoginEvent({event_category:"aymh_home_page_init",event_flow:"aymh",event_name:"aymh_step_view_loaded",event_step:"home_page",extra_client_data:{total_count:Object.keys(e).length.toString()}})});var w=m(function(a,b){f(a,b,function(){return w(a,b)}),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_login_click",extra_client_data:{credential_type:"nonce"},login_type:"device_based_login"})},[f]);l=m(function(a,b){r({id:a,username:b}),t(!0),d("PolarisLoginLogger").logLoginEvent({event_flow:"aymh",event_name:"one_tap_login_remove_account_prompt_show",login_type:"device_based_login"})},[]);var x=m(function(a){g(a)},[g]),A=m(function(){r({id:"",username:""}),t(!1),d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_remove_account_prompt_hide",login_type:"device_based_login"})},[]),B=m(function(){v(!u)},[u,v]),C=function(a){return i&&a!==j},D=function(a){return i&&a===j},E=Object.keys(e).length===1&&!b;return k.jsxs(c("IGDSBox.react"),{alignItems:"stretch",direction:"column",xstyle:p.root,children:[E?k.jsx(y,{handleLoginClick:w,handleRemoveAccountClick:l,isLoginButtonLoading:D,loginNonces:e,showSingleAccountProfilePicture:a}):k.jsx(z,{editMode:u,fbConnectedUser:b,handleLoginClick:w,handleManageAccountsClick:B,handleRemoveAccountClick:l,isLoginButtonDisabled:C,isLoginButtonLoading:D,loginNonces:e,onRequestFBLogin:h}),s&&o.id&&o.username&&k.jsx(q,{handleRemoveOneTapLoginDialogClose:A,handleRemoveOneTapLoginDialogConfirm:x,userId:o.id,username:o.username})]})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b,c;a=a.auth;return{requestInFlight:(a==null||(b=a.login)==null?void 0:b.requestInFlight)===!0,requestUserId:a==null||(c=a.login)==null?void 0:c.userId}}function e(a){return{onLoginClick:function(b,c,e){a(d("PolarisLoginActionOneTapLogin").oneTapLogin({loginNonce:c,retry:e,userId:b}))},onRemoveClick:function(b){a(d("PolarisLoginActionOneTapLoginRemove").oneTapLoginRemove(b))}}}l=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=l}),226);
__d("PolarisBirthdaySignupForm.react",["ix","IGCoreImage.react","IGDSBox.react","IGDSTextVariants.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdayFormInput.react","PolarisBirthdaysAdditionalInfoModal.react","PolarisDateHelpers","PolarisDateStrings","PolarisIGCoreButton.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","gkx","react","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState;function a(a){var b,e=a.onBirthdayEntered,f=a.onSignup,g=a.pageIdentifier,i=a.requestInFlight,m=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var n=d("PolarisReactRedux.react").useDispatch(),o=l(!1),p=o[0],q=o[1],r=d("PolarisReactRedux.react").useSelector(function(a){return(a=a.auth.signup)==null?void 0:a.signupResult});o=l((r==null||(b=r.fields.birthday)==null?void 0:b.value)!=null?d("PolarisDateHelpers").dateToDateType(new Date(r.fields.birthday.value)):d("PolarisDateHelpers").getOneYearAgoDateType());var s=o[0],t=o[1],u=c("usePolarisEmailOrPhoneContactpointType")();o=function(){n(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:u,event_name:"back_button_clicked",step:"birthday"})};var v=d("PolarisAgeCollectionHelpers").isDOBInputAttemptDisabled(s),w=function(){var a=d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(r);a.birthday=d("PolarisDateHelpers").dateTypeToString(s);c("gkx")("14029")===!0&&e();f(a)},x=function(a){d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:g,event_name:"birthday_interaction"}),t(a)};k(function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:u,event_name:"form_load",step:"birthday"})},[u]);return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisSignupFormFields.react"),{handleGoBack:o,handleNext:w,header:d("PolarisAuthStrings").BIRTHDAY_HEADER_TEXT,icon:j.jsx(c("IGCoreImage.react"),{alt:d("PolarisAgeCollectionHelpers").BIRTHDAY_ICON_ALT_TEXT,src:{dark:h("877412"),light:h("877413")}}),isNextActionDisabled:v,requestInFlight:i,signupNonSpecificError:m,style:a,subHeader:d("PolarisAuthStrings").BIRTHDAY_SUBHEADER_TEXT,children:j.jsxs(j.Fragment,{children:[j.jsx(c("IGDSBox.react"),{marginBottom:2,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return q(!0)},children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",children:d("PolarisAuthStrings").BIRTHDAY_WHY_LINK_TEXT})})}),j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(c("PolarisBirthdayFormInput.react"),{birthday:d("PolarisDateHelpers").dateTypeToString(s),onBirthdayChange:x})}),j.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",textAlign:"center",children:d("PolarisDateStrings").getBirthdayDisclaimerText()})})})]})}),p&&j.jsx(c("PolarisBirthdaysAdditionalInfoModal.react"),{onClose:function(){return q(!1)}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisCaptchaSignupForm.react",["IGDSBox.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisReactRedux.react","PolarisRecaptcha","PolarisRegistrationLogger","PolarisSignupActions","PolarisSignupFormFields.react","PolarisSignupTypesHelpers","react","usePolarisEmailOrPhoneContactpointType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSignup,e=a.requestInFlight,f=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var g=d("PolarisReactRedux.react").useDispatch(),h=k(function(){return""}),l=h[0],m=h[1],n=d("PolarisReactRedux.react").useSelector(function(a){return(a=a.auth.signup)==null?void 0:a.signupResult}),o=c("usePolarisEmailOrPhoneContactpointType")();j(function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"form_load",step:"captcha"})},[o]);h=function(){g(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"back_button_clicked",step:"captcha"})};var p=l==="",q=function(){var a=d("PolarisSignupTypesHelpers").convertSignupResultToSignupFields(n);a.captcha=l;b(a)},r=function(a){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:o,event_name:"captcha_solved"}),m(a)};return i.jsxs(c("PolarisSignupFormFields.react"),{handleGoBack:h,handleNext:q,header:d("PolarisAuthStrings").SIGN_UP_BUTTON_TEXT,isNextActionDisabled:p,requestInFlight:e,style:a,subHeader:d("PolarisAuthStrings").SIGN_UP_PHONE_LINK_TEXT,children:[i.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",position:"relative",children:i.jsx(c("PolarisRecaptcha"),{onChange:r})}),f!=null&&i.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:f})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisEmailConfirmationForm.react",["fbt","ix","IGCoreImage.react","IGDSBox.react","IGDSButton.react","IGDSDialogFooter.react","IGDSTextVariants.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreTextInput.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useState,n=6,o=h._(/*BTDS*/"Email confirmation"),p=350;function a(a){var b,e,f=d("react-compiler-runtime").c(64),g=a.onSubmit,h=a.pageIdentifier,j=a.requestInFlight,r=a.signupNonSpecificError;a=a.style;a=a===void 0?"default":a;var s=d("PolarisReactRedux.react").useDispatch(),t=d("PolarisReactRedux.react").useSelector(q),u=(b=t==null||(e=t.fields.emailOrPhone)==null?void 0:e.value)!=null?b:"";b=m("");var v=b[0],w=b[1];b=m(!1);var x=b[0],y=b[1],z=v.length<n||j;b=r;if(b==null&&(t==null?void 0:t.fields)!=null){var A=t.fields;r=Object.keys(A).some(function(a){return((a=A[a])==null?void 0:a.error)!=null});r&&(b=d("PolarisAuthStrings").ERROR_SIGNUP_UNKNOWN)}f[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(a){w(a.target.value)},f[0]=r):r=f[0];r=r;var B;f[1]!==s?(B=function(){s(d("PolarisSignupActions").returnToBaseSignupForm()),d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",event_name:"back_button_clicked",step:"emailConfirmation"})},f[1]=s,f[2]=B):B=f[2];B=B;var C;f[3]!==s||f[4]!==u?(C=function(){s(d("PolarisSignupActions").requestConfirmationEmailWithLogging(u,null,!0))},f[3]=s,f[4]=u,f[5]=C):C=f[5];C=C;var D;f[6]!==v||f[7]!==z||f[8]!==g||f[9]!==t?(D=function(){if(!z&&t!=null){var a=Object.keys(t.fields).reduce(function(a,b){var c;c=(c=t.fields[b])==null?void 0:c.value;c!=null&&b!=="optIntoOneTap"&&(a[b]=c);return a},{});a.emailConfirmationCode=v;g(a)}},f[6]=v,f[7]=z,f[8]=g,f[9]=t,f[10]=D):D=f[10];var E=D,F;f[11]!==h?(D=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:h,event_name:"form_load",step:"emailConfirmation"})},F=[h],f[11]=h,f[12]=D,f[13]=F):(D=f[12],F=f[13]);l(D,F);f[14]!==v.length||f[15]!==E||f[16]!==x?(D=function(){if(x)return;v.length===n&&c("qex")._("2155")===!0&&(y(!0),E())},f[14]=v.length,f[15]=E,f[16]=x,f[17]=D):D=f[17];f[18]!==v||f[19]!==E||f[20]!==x?(F=[v,E,x],f[18]=v,f[19]=E,f[20]=x,f[21]=F):F=f[21];l(D,F);f[22]===Symbol["for"]("react.memo_cache_sentinel")?(D=k.jsx(c("IGCoreImage.react"),{alt:o,src:{dark:i("148908"),light:i("835354")}}),f[22]=D):D=f[22];f[23]===Symbol["for"]("react.memo_cache_sentinel")?(F=k.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:4,position:"relative",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"center",children:d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE_HEADER})}),f[23]=F):F=f[23];var G;f[24]!==u?(G=d("PolarisAuthStrings").emailConfirmationCodeSubheader(u),f[24]=u,f[25]=G):G=f[25];var H;f[26]!==C?(H=k.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisAuthStrings").EMAIL_CONFIRMATION_RESEND_CODE,onClick:C,variant:"primary_link"}),f[26]=C,f[27]=H):H=f[27];f[28]!==G||f[29]!==H?(C=k.jsxs(c("IGDSBox.react"),{alignItems:"center",maxWidth:p,paddingX:7,paddingY:2,position:"relative",children:[D,F,k.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginBottom:4,marginTop:4,position:"relative",children:k.jsxs(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:[G," ",H]})})]}),f[28]=G,f[29]=H,f[30]=C):C=f[30];f[31]!==E?(D=function(a){a.preventDefault(),E()},f[31]=E,f[32]=D):D=f[32];f[33]===Symbol["for"]("react.memo_cache_sentinel")?(F=k.jsx("input",{className:"x1s85apg",type:"submit"}),f[33]=F):F=f[33];f[34]!==h?(G=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"email",containermodule:h,event_name:"confirmation_interaction"})},f[34]=h,f[35]=G):G=f[35];f[36]!==v||f[37]!==G?(H=k.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:k.jsx(c("PolarisIGCoreTextInput.react"),{"aria-label":d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,autoComplete:"off",maxLength:8,name:"email_confirmation_code",onChange:r,onFocus:G,placeholder:d("PolarisAuthStrings").EMAIL_CONFIRMATION_CODE,value:v})}),f[36]=v,f[37]=G,f[38]=H):H=f[38];f[39]!==z||f[40]!==B||f[41]!==E||f[42]!==j||f[43]!==a?(r=a==="default"&&k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",width:"100%",children:k.jsx(c("IGDSButton.react"),{fullWidth:!0,isDisabled:z,isLoading:j,label:d("PolarisGenericStrings").NEXT,onClick:E})}),k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:j,label:d("PolarisGenericStrings").GO_BACK,onClick:B,variant:"primary_link"})})]}),f[39]=z,f[40]=B,f[41]=E,f[42]=j,f[43]=a,f[44]=r):r=f[44];f[45]!==b?(G=b!=null&&k.jsx(c("IGDSBox.react"),{marginTop:4,position:"relative",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"errorOrDestructive",textAlign:"center",children:b})}),f[45]=b,f[46]=G):G=f[46];f[47]!==H||f[48]!==r||f[49]!==G?(b=k.jsxs(c("IGDSBox.react"),{alignItems:"center",margin:"auto",marginBottom:2,marginTop:2,maxWidth:p,paddingX:10,position:"relative",children:[H,r,G]}),f[47]=H,f[48]=r,f[49]=G,f[50]=b):b=f[50];f[51]!==z||f[52]!==B||f[53]!==E||f[54]!==j||f[55]!==a?(H=a==="modal"&&k.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:k.jsx(c("IGDSDialogFooter.react"),{endAdornment:k.jsx(c("IGDSButton.react"),{display:"block",isDisabled:z,isLoading:j,label:d("PolarisAuthStrings").CONTINUE,onClick:E,variant:"primary_link"}),startAdornment:k.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisGenericStrings").BACK_TEXT,onClick:B,variant:"primary_link"})})}),f[51]=z,f[52]=B,f[53]=E,f[54]=j,f[55]=a,f[56]=H):H=f[56];f[57]!==D||f[58]!==b||f[59]!==H?(r=k.jsx(c("IGDSBox.react"),{position:"relative",width:"100%",children:k.jsxs("form",{method:"POST",noValidate:!1,onSubmit:D,children:[F,b,H]})}),f[57]=D,f[58]=b,f[59]=H,f[60]=r):r=f[60];f[61]!==C||f[62]!==r?(G=k.jsxs(k.Fragment,{children:[C,r]}),f[61]=C,f[62]=r,f[63]=G):G=f[63];return G}function q(a){return(a=a.auth.signup)==null?void 0:a.signupResult}g["default"]=a}),226);
__d("PolarisPhoneSignupChangeNumberForm.react",["fbt","IGDSBox.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisSlimTextInput.react","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState,n="phoneSignupConfirmErrorAlert",o=h._(/*BTDS*/"New phone number");function a(a){var b=d("react-compiler-runtime").c(35),e=a.errorMessage,f=a.initialPhoneNumber,g=a.onGoBackClick,i=a.onSubmit;a=a.requestInFlight;var p=l(null),q=m(""),r=q[0],s=q[1],t;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(){var a;(a=p.current)==null||a.focus()},t=[],b[0]=q,b[1]=t):(q=b[0],t=b[1]);k(q,t);b[2]!==r||b[3]!==i?(q=function(a){a.preventDefault(),i(r)},b[2]=r,b[3]=i,b[4]=q):q=b[4];t=q;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(a){s(a.target.value)},b[5]=q):q=b[5];q=q;var u,v,w,x,y,z;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(v={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},w=j.jsx("h2",{className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1jchvi3 x1s688f xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf",children:h._(/*BTDS*/"Change phone number")}),x={className:"x972fbf x10w94by x1qhh985 x14e42zd x1lliihq xln7xf2 x1f6kntn x1fcty0u xd4r4e8 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x2b8uid x11njtxf"},y=j.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd x5n08af xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:h._(/*BTDS*/"Current phone number:")}),z=j.jsx("br",{}),u={className:"x972fbf x10w94by x1qhh985 x14e42zd x1roi4f4 xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[6]=u,b[7]=v,b[8]=w,b[9]=x,b[10]=y,b[11]=z):(u=b[6],v=b[7],w=b[8],x=b[9],y=b[10],z=b[11]);b[12]!==f?(x=j.jsxs("p",babelHelpers["extends"]({},x,{children:[y,z,j.jsx("span",babelHelpers["extends"]({},u,{children:f}))]})),b[12]=f,b[13]=x):x=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(y={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[14]=y):y=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(z="xdj266r x11gldyt x1iymm2a x11hdunq",b[15]=z):z=b[15];b[16]!==r?(u=j.jsx(c("PolarisSlimTextInput.react"),{"aria-label":o,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:z,name:"newPhoneNumber",onChange:q,placeholder:o,ref:p,type:"tel",value:r}),b[16]=r,b[17]=u):u=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Change"),b[18]=f):f=b[18];b[19]!==t||b[20]!==a?(z=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:a,onClick:t,children:f})}),b[19]=t,b[20]=a,b[21]=z):z=b[21];b[22]!==t||b[23]!==u||b[24]!==z?(q=j.jsxs("form",babelHelpers["extends"]({},y,{method:"POST",onSubmit:t,children:[u,z]})),b[22]=t,b[23]=u,b[24]=z,b[25]=q):q=b[25];b[26]!==e?(f=!c("isStringNullOrEmpty")(e)&&j.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 xkmlbd1 x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:j.jsx("p",{"aria-atomic":"true",id:n,role:"alert",children:e})}),b[26]=e,b[27]=f):f=b[27];b[28]!==g?(a=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:d("PolarisGenericStrings").GO_BACK}),b[28]=g,b[29]=a):a=b[29];b[30]!==x||b[31]!==q||b[32]!==f||b[33]!==a?(y=j.jsxs("div",babelHelpers["extends"]({},v,{children:[w,x,q,f,a]})),b[30]=x,b[31]=q,b[32]=f,b[33]=a,b[34]=y):y=b[34];return y}g["default"]=a}),226);
__d("PolarisPhoneSignupConfirmForm.react",["fbt","IGDSBox.react","IGDSText.react","IGDSTextVariants.react","PolarisIGCoreButton.react","PolarisMultiSignupConstants","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSlimTextInput.react","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.useRef,m=b.useState,n="phoneSignupConfirmErrorAlert",o="confirmationCodeDescription",p=h._(/*BTDS*/"Just one more step");function q(a){return h._(/*BTDS*/"Enter the 6-digit code we sent to: {phone number}",[h._param("phone number",a)])}var r="######",s=h._(/*BTDS*/"Confirm");function t(a,b){return j.jsx("div",{className:b,children:j.jsx("p",{"aria-atomic":"true",id:n,role:"alert",children:a})})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(57),e=a.errorMessage,f=a.onChangeNumberClick,g=a.onResendClick,i=a.onSubmit,n=a.pageIdentifier,t=a.phoneNumber,x=a.requestInFlight;a=a.successMessage;var y=m(""),z=y[0],A=y[1];y=m(!1);var B=y[0],C=y[1],D=l(null),E;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(y=function(){(D==null?void 0:D.current)!=null&&D.current.focus()},E=[],b[0]=y,b[1]=E):(y=b[0],E=b[1]);k(y,E);y=w;E=v;var F=d("PolarisReactRedux.react").useSelector(u),G;b[2]!==z||b[3]!==i||b[4]!==F?(G=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",event_name:"twofac_form_next_clicked"});var a=z.replace(/\s+/g,"");if((F==null?void 0:F.fields)!=null){var b=Object.keys(F.fields).reduce(function(a,b){var c;c=(c=F.fields[b])==null?void 0:c.value;c!=null&&b!=="optIntoOneTap"&&(a[b]=c);return a},{});b.twofac=a;i(b)}},b[2]=z,b[3]=i,b[4]=F,b[5]=G):G=b[5];var H=G;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(G=function(a){a=a.target.value;if(!a.match(/^[0-9 ]*$/))return;A(a)},b[6]=G):G=b[6];G=G;var I;b[7]!==z.length||b[8]!==H||b[9]!==B?(I=function(){if(B)return;z.length===d("PolarisMultiSignupConstants").TWO_FAC_CODE_MIN_LENGTH&&c("qex")._("2156")===!0&&(C(!0),H())},b[7]=z.length,b[8]=H,b[9]=B,b[10]=I):I=b[10];var J;b[11]!==z||b[12]!==H||b[13]!==B?(J=[z,H,B],b[11]=z,b[12]=H,b[13]=B,b[14]=J):J=b[14];k(I,J);b[15]===Symbol["for"]("react.memo_cache_sentinel")?(I={className:"x889kno xyri2b x1a8lsjc x1c1uobl"},b[15]=I):I=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(J=j.jsx(c("IGDSBox.react"),{marginBottom:2,marginTop:2,position:"relative",children:j.jsx(c("IGDSText.react"),{size:"label",textAlign:"center",weight:"semibold",children:p})}),b[16]=J):J=b[16];var K;b[17]!==t?(K=q(t),b[17]=t,b[18]=K):K=b[18];b[19]!==K?(t=j.jsxs(c("IGDSBox.react"),{alignItems:"center",id:o,paddingX:7,position:"relative",children:[J,j.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:4,position:"relative",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:K})})]}),b[19]=K,b[20]=t):t=b[20];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(J={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp x1lziwak x1yztbdb xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[21]=J):J=b[21];b[22]!==H?(K=function(a){a.preventDefault(),H()},b[22]=H,b[23]=K):K=b[23];var L;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(L="xdj266r x11gldyt x1iymm2a x11hdunq",b[24]=L):L=b[24];var M;b[25]!==n?(M=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:n,event_name:"confirmation_interaction"})},b[25]=n,b[26]=M):M=b[26];b[27]!==z||b[28]!==M?(L=j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":o,"aria-label":r,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:L,maxLength:6,name:"confirmationCode",onChange:G,onFocus:M,placeholder:r,ref:D,type:"tel",value:z}),b[27]=z,b[28]=M,b[29]=L):L=b[29];b[30]!==H||b[31]!==x?(G=j.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,position:"relative",children:j.jsx(c("PolarisIGCoreButton.react"),{loading:x,onClick:H,children:s})}),b[30]=H,b[31]=x,b[32]=G):G=b[32];b[33]!==K||b[34]!==L||b[35]!==G?(M=j.jsxs("form",babelHelpers["extends"]({},J,{method:"POST",onSubmit:K,children:[L,G]})),b[33]=K,b[34]=L,b[35]=G,b[36]=M):M=b[36];b[37]!==e?(x=e!=null&&e!==""&&y(e),b[37]=e,b[38]=x):x=b[38];b[39]!==a?(J=a!=null&&a!==""&&E(a),b[39]=a,b[40]=J):J=b[40];b[41]===Symbol["for"]("react.memo_cache_sentinel")?(K={className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt x1yztbdb x11hdunq x2b8uid"},b[41]=K):K=b[41];b[42]===Symbol["for"]("react.memo_cache_sentinel")?(L=h._(/*BTDS*/"Change Number"),b[42]=L):L=b[42];b[43]!==f?(G=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:L}),b[43]=f,b[44]=G):G=b[44];b[45]===Symbol["for"]("react.memo_cache_sentinel")?(y=h._(/*BTDS*/"Request New Code"),b[45]=y):y=b[45];b[46]!==g?(e=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:y}),b[46]=g,b[47]=e):e=b[47];b[48]!==G||b[49]!==e?(E=j.jsxs("div",babelHelpers["extends"]({},K,{children:[G," | ",e]})),b[48]=G,b[49]=e,b[50]=E):E=b[50];b[51]!==t||b[52]!==M||b[53]!==x||b[54]!==J||b[55]!==E?(a=j.jsxs("div",babelHelpers["extends"]({},I,{children:[t,M,x,J,E]})),b[51]=t,b[52]=M,b[53]=x,b[54]=J,b[55]=E,b[56]=a):a=b[56];return a}function u(a){return(a=a.auth.signup)==null?void 0:a.signupResult}function v(a){return t(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")}function w(a){return t(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid xkmlbd1")}g["default"]=a}),226);
__d("PolarisPhoneSignupForm.react",["fbt","invariant","FBLogger","IGDSBox.react","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisPhoneSignupChangeNumberForm.react","PolarisPhoneSignupConfirmForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisSignupActions","isStringNullOrEmpty","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useEffect,m=h._(/*BTDS*/"Phone confirmation");function a(a){var b,e=d("react-compiler-runtime").c(33),f=a.onSubmit,g=a.pageIdentifier;a=a.requestInFlight;var j=(b=d("PolarisReactRedux.react")).useSelector(q),r=b.useSelector(p),s=b.useSelector(o),t=b.useSelector(n),u=b.useDispatch();e[0]!==u?(b=function(){return u(d("PolarisSignupActions").switchPhoneSignupStep("changePhoneNumber"))},e[0]=u,e[1]=b):b=e[1];b=b;var v;e[2]!==u?(v=function(){return u(d("PolarisSignupActions").switchPhoneSignupStep("enterCode"))},e[2]=u,e[3]=v):v=e[3];v=v;var w;e[4]!==u?(w=function(a){return u(d("PolarisSignupActions").rerequestSMSCode(a))},e[4]=u,e[5]=w):w=e[5];w=w;var x;e[6]!==u?(x=function(){return u(d("PolarisSignupActions").rerequestSMSCode())},e[6]=u,e[7]=x):x=e[7];x=x;c("isStringNullOrEmpty")(r)&&i(0,51615);var y,z;e[8]!==g?(y=function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:"phone",containermodule:g,event_name:"form_load",step:"twofac"})},z=[g],e[8]=g,e[9]=y,e[10]=z):(y=e[9],z=e[10]);l(y,z);if(s==="enterCode"){e[11]!==t?(y=t&&k.jsx("div",{className:"x1qjc9v5 x972fbf x10w94by x1qhh985 x14e42zd x9f619 x5n08af x78zum5 xdt5ytf x2lah0s xln7xf2 x1f6kntn xd4r4e8 x1anpbxc x3aesyq xyorhqc xqsn43r xexx8yu xyri2b x18d9i69 x1c1uobl x1n2onr6 x2b8uid x11njtxf",children:h._(/*BTDS*/"Your code was resent.")}),e[11]=t,e[12]=y):y=e[12];e[13]!==b||e[14]!==x||e[15]!==f||e[16]!==g||e[17]!==r||e[18]!==a||e[19]!==j?(z=k.jsx(c("PolarisPhoneSignupConfirmForm.react"),{errorMessage:j,onChangeNumberClick:b,onResendClick:x,onSubmit:f,pageIdentifier:g,phoneNumber:r,requestInFlight:a,successMessage:null}),e[13]=b,e[14]=x,e[15]=f,e[16]=g,e[17]=r,e[18]=a,e[19]=j,e[20]=z):z=e[20];e[21]!==y||e[22]!==z?(t=k.jsxs("div",{children:[y,z]}),e[21]=y,e[22]=z,e[23]=t):t=e[23];b=t}else if(s==="changePhoneNumber"){e[24]!==w||e[25]!==v||e[26]!==r||e[27]!==a||e[28]!==j?(x=k.jsx(c("PolarisPhoneSignupChangeNumberForm.react"),{errorMessage:j,initialPhoneNumber:r,onGoBackClick:v,onSubmit:w,requestInFlight:a}),e[24]=w,e[25]=v,e[26]=r,e[27]=a,e[28]=j,e[29]=x):x=e[29];b=x}else{c("FBLogger")("ig_web").mustfix("Unexpected phone signup step");return null}e[30]===Symbol["for"]("react.memo_cache_sentinel")?(f=k.jsx(c("PolarisIGCoreIcon.react"),{alt:m,icon:d("PolarisAssetManagerGlyphMapping").ICONS.PHONE_CONFIRM}),e[30]=f):f=e[30];e[31]!==b?(y=k.jsxs(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:[f,b]}),e[31]=b,e[32]=y):y=e[32];return y}function n(a){return((a=a.auth.signup)==null?void 0:a.resentResetCode)||!1}function o(a){return(a=a.auth.signup)==null?void 0:a.phoneSignupConfirmStep}function p(a){return(a=a.auth.signup)==null||(a=a.signupCredentials)==null?void 0:a.phoneNumber}function q(a){return(a=a.auth.signup)==null?void 0:a.signupNonSpecificError}g["default"]=a}),226);
__d("PolarisEmailDomainHelpers",["PolarisConfig","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h={"aol.com":{initialSuggestion:!1},"bk.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"gmail.com":{initialSuggestion:!0},"gmx.de":{countryCodeFilter:"DE",initialSuggestion:!1},"hotmail.com":{initialSuggestion:!0},"icloud.com":{initialSuggestion:!1},"inbox.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"list.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"live.com":{initialSuggestion:!1},"mail.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"msn.com":{initialSuggestion:!1},"naver.com":{initialSuggestion:!1},"onet.pl":{countryCodeFilter:"PL",initialSuggestion:!1},"outlook.com":{initialSuggestion:!0},"qq.com":{initialSuggestion:!1},"rambler.ru":{countryCodeFilter:"RU",initialSuggestion:!1},"web.de":{countryCodeFilter:"DE",initialSuggestion:!1},"yahoo.co.jp":{countryCodeFilter:"JP",initialSuggestion:!1},"yahoo.com":{initialSuggestion:!0},"yandex.com":{initialSuggestion:!1},"yandex.ru":{countryCodeFilter:"RU",initialSuggestion:!1}},i=c("memoize")(function(){return Object.keys(h).filter(function(a){a=h[a];return"countryCodeFilter"in a?a.countryCodeFilter===d("PolarisConfig").getCountryCode():!0})});b=c("memoize")(function(){return i().reduce(function(a,b){var c=h[b];return!c.initialSuggestion?a:[].concat(a,[b])},[])});var j={"gail.com":"gmail.com","gamel.com":"gmail.com","gamil.com":"gmail.com","gamli.com":"gmail.com","gemil.com":"gmail.com","gma.com":"gmail.com","gmail.co":"gmail.com","gmaile.com":"gmail.com","gmali.com":"gmail.com","gmall.com":"gmail.com","gmel.com":"gmail.com","gmeli.com":"gmail.com","gmile.com":"gmail.com"};function a(a){a=a.split("@");var b=a[0];a=a[1];return a&&Object.prototype.hasOwnProperty.call(j,a)?b+"@"+j[a]:null}g.getPopularDomainList=i;g.getInitialSuggestedPopularDomains=b;g.getSuggestedEmail=a}),98);
__d("PolarisMultiSignupEmailSuggestionDialog.react",["fbt","IGCoreDialog.react","PolarisRegistrationLogger","memoizeStringOnly","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){function b(){var b;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=a.call.apply(a,[this].concat(f))||this,b.handleSuggestionClick=function(a){a===b.props.emailSuggestion?d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:a,contactpoint_type:"email",event_name:"typo_fix_accept"}):d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint:a,contactpoint_type:"email",event_name:"typo_fix_skip"}),b.props.onSelection(a)},b.$1=c("memoizeStringOnly")(function(a){return b.handleSuggestionClick.bind(babelHelpers.assertThisInitialized(b),a)}),babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.getEmailDomain=function(a){return a.split("@")[1]};e.render=function(){var a=this.props,b=a.emailSuggestion;a=a.originalEmail;return j.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:h._(/*BTDS*/"It looks like you misspelled your email address. Did you mean to use {filled email domain} ?",[h._param("filled email domain",j.jsx("span",{className:"x972fbf x10w94by x1qhh985 x14e42zd xln7xf2 xk390pu xl7tqy7 xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",children:"@"+this.getEmailDomain(a)}))]),onModalClose:this.props.onClose,title:h._(/*BTDS*/"Typo?"),children:[j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1(b),children:h._(/*BTDS*/"Use {email suggestion} instead",[h._param("email suggestion","@"+this.getEmailDomain(b))])}),j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.$1(a),children:h._(/*BTDS*/"Keep as is")})]})};return b}(j.Component);g["default"]=a}),226);
__d("PolarisSlimSignupUsernameSuggestions.react",["IGDSBox.react","IGDSButton.react","PolarisRegistrationLogger","isEmail","polarisIsPhoneNumber","qex","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=38,m=134;function n(a){if(a==null||a==="")return null;if(c("isEmail")(a))return"email";return c("polarisIsPhoneNumber")(a)?"phone":null}function a(a){var b=d("react-compiler-runtime").c(26),e=a.emailOrPhone,f=a.onUsernameUpdate,g=a.pageIdentifier,h=a.username;a=a.usernameSuggestions;var p;b[0]!==a?(p=a.filter(o),b[0]=a,b[1]=p):p=b[1];var q=p;a=k(q);p=a[0];var r=a[1];a=k(!1);var s=a[0],t=a[1],u;b[2]!==q||b[3]!==g?(a=function(){q.length>0&&d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:g,event_name:"username_suggestion_fetch_success"}),r(q)},u=[q,g],b[2]=q,b[3]=g,b[4]=a,b[5]=u):(a=b[4],u=b[5]);j(a,u);b[6]!==q[0]||b[7]!==q.length||b[8]!==s||b[9]!==f||b[10]!==h?(a=function(){if(s)return;else if(h!=null&&h!=="")t(!0);else if(q.length>0){var a;a=(a=c("qex")._("2564"))!=null?a:!1;a&&f(q[0]);t(!0)}},b[6]=q[0],b[7]=q.length,b[8]=s,b[9]=f,b[10]=h,b[11]=a):a=b[11];b[12]!==q||b[13]!==s||b[14]!==f||b[15]!==h?(u=[h,q,s,f],b[12]=q,b[13]=s,b[14]=f,b[15]=h,b[16]=u):u=b[16];j(a,u);if(q.length===0)return null;if(b[17]!==e||b[18]!==f||b[19]!==p){b[21]!==e||b[22]!==f?(a=function(a){return i.jsx("div",{className:"x13t61ll x1kchd1x x1u0fnx4 xbxn0j6 x6ikm8r x10wlt62 x1n2onr6",style:{height:l,width:m},children:i.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:1,position:"relative",children:i.jsx(c("IGDSButton.react"),{label:a,onClick:function(){d("PolarisRegistrationLogger").logRegistrationEvent({contactpoint_type:n(e),event_name:"click_username_suggestions"}),f(a)},variant:"secondary"})})},a)},b[21]=e,b[22]=f,b[23]=a):a=b[23];u=p.slice(0,2).map(a);b[17]=e;b[18]=f;b[19]=p;b[20]=u}else u=b[20];b[24]!==u?(a=i.jsx(c("IGDSBox.react"),{direction:"row",height:l,marginEnd:10,marginStart:10,position:"relative",children:u}),b[24]=u,b[25]=a):a=b[25];return a}function o(a){return a.length<14}g["default"]=a}),98);
__d("PolarisTermsPrivacyPolicyBlurb.react",["fbt","IGDSTextVariants.react","PolarisConsentTypes","PolarisExternalRoutes","PolarisFastLink.react","PolarisReactRedux.react","PolarisRoutes","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){return c("gkx")("25366")===!0}function l(a){var b=d("react-compiler-runtime").c(3);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"By signing up, you agree to our {=Terms} & {=Privacy Policy} .",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:"/legal/terms/",target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("=Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:"/legal/privacy/",target:"_blank",children:h._(/*BTDS*/"Privacy Policy")}))])}),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx("p",{className:a,children:e}),b[1]=a,b[2]=e):e=b[2];return e}function m(a){a===void 0&&(a=!0);return j.jsxs(j.Fragment,{children:[j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"People who use our service may have uploaded your contact information to Instagram. {Contact uploading for non-users privacy policy}",[h._param("Contact uploading for non-users privacy policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").FACEBOOK_CONTACT_UPLOADING_AND_NON_USERS,target:"_blank",children:h._(/*BTDS*/"Learn More")}))])}),a&&j.jsxs(j.Fragment,{children:[j.jsx("br",{}),j.jsx("br",{})]})]})}function n(a){var b=d("react-compiler-runtime").c(7);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[m(),h._(/*BTDS*/"By signing up, you agree to our {=Terms}. Learn how we collect, use and share your data in our {Privacy Policy} and how we use cookies and similar technology in our {Cookies Policy}.",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Privacy Policy")})),h._param("Cookies Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisRoutes").NEW_COOKIE_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Cookies Policy")}))])]}),b[0]=e):e=b[0];var f;b[1]!==a?(e=j.jsx("p",{className:a,children:e}),f=k()&&j.jsx("p",{className:a,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:h._(/*BTDS*/"We {=fund our services} by using your personal data to show ads.",[h._param("=fund our services",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"fund our services")}))])})}),b[1]=a,b[2]=e,b[3]=f):(e=b[2],f=b[3]);b[4]!==e||b[5]!==f?(a=j.jsxs(j.Fragment,{children:[e,f]}),b[4]=e,b[5]=f,b[6]=a):a=b[6];return a}function o(a){var b=d("react-compiler-runtime").c(3);a=a.className;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs(d("IGDSTextVariants.react").IGDSTextBody2,{color:"secondaryText",children:[m(),h._(/*BTDS*/"By signing up, you agree to our {=Terms} , {Privacy Policy} and {Cookies Policy} .",[h._param("=Terms",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_LEGAL_TERMS_PATH,target:"_blank",children:h._(/*BTDS*/"Terms")})),h._param("Privacy Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisExternalRoutes").NEW_PRIVACY_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Privacy Policy")})),h._param("Cookies Policy",j.jsx(c("PolarisFastLink.react"),{href:d("PolarisRoutes").NEW_COOKIE_POLICY_PATH,target:"_blank",children:h._(/*BTDS*/"Cookies Policy")}))])]}),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx("p",{className:a,children:e}),b[1]=a,b[2]=e):e=b[2];return e}function p(a){var b=d("react-compiler-runtime").c(3);a=a.className;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=m(!1),b[0]=c):c=b[0];b[1]!==a?(c=j.jsx("p",{className:a,children:c}),b[1]=a,b[2]=c):c=b[2];return c}function a(a){var b=d("react-compiler-runtime").c(8),c=a.className,e=a.cpeOnly;a=a.tosVersion;e=e===void 0?!1:e;if(e){b[0]!==c?(e=j.jsx(p,{className:c}),b[0]=c,b[1]=e):e=b[1];return e}switch(a){case d("PolarisConsentTypes").TosVersion.EU:b[2]!==c?(e=j.jsx(n,{className:c}),b[2]=c,b[3]=e):e=b[3];return e;case d("PolarisConsentTypes").TosVersion.ROW:b[4]!==c?(a=j.jsx(o,{className:c}),b[4]=c,b[5]=a):a=b[5];return a;case d("PolarisConsentTypes").TosVersion.DEFAULT:default:b[6]!==c?(e=j.jsx(l,{className:c}),b[6]=c,b[7]=e):e=b[7];return e}}function b(a){return{tosVersion:a.signup.tosVersion}}e=d("PolarisReactRedux.react").connect(b)(a);g["default"]=e}),226);
__d("PolarisSlimSignupForm.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","IGDSTextVariants.react","PolarisAuthConstants","PolarisAuthLimitedRegistrationHelpers","PolarisAuthStrings","PolarisEmailDomainHelpers","PolarisIGCoreButton.react","PolarisMultiSignupEmailSuggestionDialog.react","PolarisOrBar.react","PolarisRegistrationLogger","PolarisRelayEnvironment","PolarisSlimSignupUsernameSuggestions.react","PolarisSlimTextInput.react","PolarisTermsPrivacyPolicyBlurb.react","PolarisUA","fetchPolarisLoggedOutExperiment","gkx","joinClasses","nullthrows","polarisIsPhoneNumber","polarisSignupSelectors","promiseDone","react","whitelistObjectKeys"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=["username","password","emailOrPhone","fullName","optIntoOneTap"];a=function(a){function b(b){var e,f;f=a.call(this,b)||this;f.$5=function(){f.setState({emailSuggestion:null})};f.$6=function(a){f.setState({emailOrPhone:a,emailSuggestion:null},function(){f.$7()})};f.$8=function(){var a=f.props.usernameSuggestions.indexOf(f.state.username);f.setState({username:f.props.usernameSuggestions[++a]||f.props.usernameSuggestions[0]});d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"suggested_username_refreshed"})};f.$9=function(a){var b;a=a.target;var c=a.name;a=a.value;f.setState((b={},b[c]=a,b))};f.$10=function(){var a=f.state.isPasswordHidden;f.setState({isPasswordHidden:!a});a?d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"show_password_clicked"}):d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"hide_password_clicked"})};f.$11=function(a){if(a.relatedTarget instanceof HTMLElement&&f.$1&&f.$1.contains(a.relatedTarget))return;f.$4(f.state,null)};f.$12=function(a,b){a=a.target.name;f.$4(f.state,a);b&&d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:b})};f.$14=function(a){a.preventDefault();a=f.state.emailOrPhone;d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:f.props.pageIdentifier,event_name:"base_form_next_clicked"});if(a!=null&&!c("polarisIsPhoneNumber")(a)){a=d("PolarisEmailDomainHelpers").getSuggestedEmail(a);if(a!=null){f.setState({emailSuggestion:a});return}}f.$7()};f.$15=function(a){a.keyCode===13&&f.$14(a)};f.$22=function(a){f.setState({username:a})};e={emailOrPhone:((e=b.signupResult)==null||(e=e.fields)==null||(e=e.emailOrPhone)==null?void 0:e.value)||"",emailSuggestion:null,fullName:(e=(e=(e=b.signupResult)==null||(e=e.fields)==null||(e=e.fullName)==null?void 0:e.value)!=null?e:b.initialFullName)!=null?e:"",isPasswordHidden:!0,optIntoOneTap:!1,username:((e=b.signupResult)==null||(e=e.fields)==null||(e=e.username)==null?void 0:e.value)||""};if(f.props.needEmailOrPhone){e.emailOrPhone=(b=(b=(b=b.signupResult)==null||(b=b.fields)==null||(b=b.emailOrPhone)==null?void 0:b.value)!=null?b:f.props.prefillPhoneNumber)!=null?b:""}f.props.needPassword&&(e.password="");f.state=e;f.$2={};f.$3=!1;return f}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){var a=this.props.pageIdentifier==="fbSignupPage"?"fb_signup_form_load":"form_load";d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:this.props.pageIdentifier,event_name:a,fb_userid:this.props.fbUserID,fbconnect_status:this.props.fbConnectedStatus})};e.componentDidUpdate=function(a,b){var c=this.props;this.state.username.length===0&&this.props.usernameSuggestions.length===0&&c.usernameSuggestions.length>=1&&this.setState({username:c.usernameSuggestions[0]});var d=this.state;a.usernameSuggestions.length===0&&c.usernameSuggestions.length>=1&&b.username!==d.username&&this.$4(d,"username")};e.focusUsername=function(){c("nullthrows")(this.$2.username).focus()};e.$4=function(a,b){var d=this.props.onSignupFocusChange;if(d){a=c("whitelistObjectKeys")(a,l);d(a,b)}};e.$13=function(){var a,b,e,f,g;if(this.props.requestInFlight)return!0;a=(a=this.props.signupResult)==null?void 0:a.fields;var h=a==null||(b=a.emailOrPhone)==null?void 0:b.error,i=a==null||(e=a.username)==null?void 0:e.error,j=a==null||(f=a.password)==null?void 0:f.error;a=a==null||(g=a.fullName)==null?void 0:g.error;if(h!==void 0||i!==void 0||j!==void 0||a!==void 0){c("promiseDone")(c("fetchPolarisLoggedOutExperiment")(c("PolarisRelayEnvironment"),{name:"ig_web_desktop_signup_disable_next_button_on_error"}));h=c("gkx")("16475")===!0;return h}i=this.props;j=i.needEmailOrPhone;a=i.needPassword;h=this.state;i=h.emailOrPhone;var k=h.password;h=h.username;return d("polarisSignupSelectors").getSubmitDisabled({needEmailOrPhone:j,needPassword:a},{emailOrPhone:i,password:k,username:h})};e.$7=function(){var a=c("whitelistObjectKeys")(this.state,l);this.$3=!0;this.props.onSubmit(a)};e.$16=function(a){var b;return!!(this.props.signupResult&&(b=this.props.signupResult.fields[a])!=null&&b.validated)};e.$17=function(a){var b;b=(b=this.props.signupResult)==null?void 0:b.fields;if(a==="emailOrPhone"){var c;return(b==null||(c=b.emailOrPhone)==null?void 0:c.value)!==this.state.emailOrPhone}else if(a==="username"){var d;return(b==null||(d=b.username)==null?void 0:d.value)!==this.state.username}else if(a==="password"){var e;return(b==null||(e=b.password)==null?void 0:e.value)!==this.state.password}return!1};e.$18=function(a){var b=this.props,c=b.focusedFields;b=b.signupResult;var d=b==null?void 0:b.wasDryRun;d=!d;if(c){var e=c.current===a;c=c.previous.indexOf(a)>-1;c=!e&&c;var f=this.$17(a)===!1;d=(c||e)&&f}if(d){var g;return b==null||(g=b.fields)==null||(g=g[a])==null?void 0:g.error}return null};e.$19=function(a){return k.jsx("div",{className:"_aaht",children:k.jsx("p",{"aria-atomic":"true",id:d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID,role:"alert",children:a})})};e.$20=function(){return d("PolarisUA").isMobile()?d("PolarisAuthStrings").FB_CONTINUE_BUTTON_TEXT:d("PolarisAuthStrings").FB_LOGIN_BUTTON_TEXT};e.$21=function(){var a=this.props.hideHeader;if(a)return null;a=d("PolarisAuthStrings").SIGN_UP_VALUE_PROP_WITHOUT_GRADIENT;return d("PolarisUA").isMobile()?k.jsx("div",{className:"_aahx",children:k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:a})}):k.jsx("div",{className:"_aahw",children:k.jsx(d("IGDSTextVariants.react").IGDSTextSection,{color:"secondaryText",textAlign:"center",zeroMargin:!0,children:a})})};e.render=function(){var a,b,e=this,f=this.props,g=f.canUsePhone,h=f.signupNonSpecificError;f=f.signupResult;var j=!!(this.props.usernameSuggestions.length&&(!this.props.needEmailOrPhone||this.state.emailOrPhone)),l=f==null?void 0:f.otherError;h!=null&&(l=h);h=l!=null&&(f==null?void 0:f.wasDryRun)===!0;var m=this.$18("emailOrPhone"),n=this.$18("fullName"),o=this.$18("username"),p=this.$18("password"),q=d("PolarisUA").isMobile()?"_aahv":"_aahy";f=(f==null||(a=f.fields.username)==null?void 0:a.errorCode)==null||(f==null||(b=f.fields.username)==null?void 0:b.errorCode)==="username_is_taken";return k.jsxs("div",{className:c("joinClasses")(this.props.className,"_aahz"),"data-testid":void 0,children:[this.state.emailSuggestion!=null?k.jsx(c("PolarisMultiSignupEmailSuggestionDialog.react"),{emailSuggestion:this.state.emailSuggestion,onClose:this.$5,onSelection:this.$6,originalEmail:c("nullthrows")(this.state.emailOrPhone)}):null,k.jsxs("form",{className:"_aah-",method:"post",onBlur:this.$11,onSubmit:this.$14,ref:function(a){return e.$1=a},children:[this.$21(),!this.props.hideFBOption&&k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsxs(c("PolarisIGCoreButton.react"),{onClick:this.props.onSignupWithFBClick,children:[k.jsx("span",{className:"_9zlu _aah_"}),this.$20()]})}),k.jsx("div",{className:"_aai0",children:k.jsx(c("PolarisOrBar.react"),{})})]}),this.props.needEmailOrPhone&&k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("emailOrPhone"),"aria-describedby":m!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":g?d("PolarisAuthStrings").EMAIL_OR_PHONE:d("PolarisAuthStrings").EMAIL,"aria-required":"true",autoCapitalize:"off",autoComplete:"tel",autoCorrect:"off",className:q,errorMessage:m,hasError:!!m,isInputFocused:!0,name:"emailOrPhone",onChange:this.$9,onFocus:function(a){return e.$12(a,"contactpoint_interaction")},onKeyDown:this.$15,placeholder:g?d("PolarisAuthStrings").EMAIL_OR_PHONE:d("PolarisAuthStrings").EMAIL,ref:function(a){return e.$2.emailOrPhone=a},value:this.state.emailOrPhone}),this.props.needPassword&&k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("password"),"aria-describedby":p!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").PASSWORD,"aria-required":"true",autoCapitalize:"off",autoComplete:"new-password",autoCorrect:"off",className:q,errorMessage:p,hasError:!!p,isInputFocused:!0,isPasswordHidden:this.state.isPasswordHidden,name:"password",onChange:this.$9,onFocus:function(a){return e.$12(a,"password_interaction")},onKeyDown:this.$15,onPasswordToggle:this.$10,placeholder:d("PolarisAuthStrings").PASSWORD,ref:function(a){return e.$2.password=a},showPasswordToggleLink:!!this.state.password,type:this.state.isPasswordHidden?"password":"text",value:this.state.password}),k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("fullName"),"aria-describedby":n!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").FULL_NAME,"aria-required":"false",autoCapitalize:"sentences",autoCorrect:"off",className:q,errorMessage:n,hasError:!!n,isInputFocused:!0,name:"fullName",onChange:this.$9,onFocus:function(a){return e.$12(a,"name_interaction_full_name")},onKeyDown:this.$15,placeholder:d("PolarisAuthStrings").FULL_NAME,ref:function(a){return e.$2.fullName=a},value:this.state.fullName}),k.jsx(c("PolarisSlimTextInput.react"),{accepted:this.$16("username"),"aria-describedby":o!=null&&!h?d("PolarisAuthConstants").SLIM_SIGNUP_FORM_ALERT_ID:void 0,"aria-label":d("PolarisAuthStrings").USERNAME,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",canRefresh:j,className:q,errorMessage:o,hasError:!!o,isInputFocused:!0,maxLength:30,name:"username",omitErrorMarginBottom:f,onChange:this.$9,onFocus:function(a){return e.$12(a,"username_interaction")},onKeyDown:this.$15,onRefresh:this.$8,placeholder:d("PolarisAuthStrings").USERNAME,ref:function(a){return e.$2.username=a},value:this.state.username}),f&&k.jsx(c("PolarisSlimSignupUsernameSuggestions.react"),{emailOrPhone:this.state.emailOrPhone,onUsernameUpdate:this.$22,pageIdentifier:this.props.pageIdentifier,username:this.state.username,usernameSuggestions:this.props.usernameSuggestions}),d("PolarisUA").isDesktop()&&k.jsx(c("PolarisTermsPrivacyPolicyBlurb.react"),{className:"_aai1",cpeOnly:d("PolarisAuthLimitedRegistrationHelpers").shouldShowSouthKoreaTOS()}),k.jsxs("div",{children:[k.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{disabled:this.$13(),onClick:this.$14,type:"submit",children:!this.props.gdprRequired&&d("PolarisUA").isDesktop()?i._(/*BTDS*/"Sign up"):i._(/*BTDS*/"Next")})}),this.props.requestInFlight?k.jsx(c("IGDSSpinner.react"),{position:"absolute"}):null]}),l&&!h&&this.$19(l)]})]})};return b}(k.Component);a.defaultProps={hideFBOption:!1,hideHeader:!1,needPassword:!0};g["default"]=a}),226);
__d("polarisIsEligibleForFacebookLogin",["PolarisConfig","PolarisQueryParams"],(function(a,b,c,d,e,f,g){"use strict";var h={CN:!0,CU:!0,IR:!0,KP:!0},i=/^((preprod|business|www)\.)?([a-z0-9-]+\.){0,}instagram\.com$/;function j(a){return!!h[a]}function k(a){return i.test(a)}function a(){return k(window.location.hostname)&&!j(d("PolarisConfig").getCountryCode()||"")&&(!d("PolarisQueryParams").hasForceAuthenticationParam()||d("PolarisQueryParams").hasEnableFBLoginParam())}g["default"]=a}),98);
__d("PolarisSignupForm.react",["invariant","CometRouteURL","IGCoreDialog.react","PolarisAcceptTermsOfUseForm.react","PolarisAccountPrivacyForm.react","PolarisAgeCollectionHelpers","PolarisAuthStrings","PolarisBirthdaySignupForm.react","PolarisCaptchaSignupForm.react","PolarisEmailConfirmationForm.react","PolarisFBConnectHelpers","PolarisFBConnectStatus","PolarisGenericStrings","PolarisLoggedOutCtaClickLogger","PolarisPhoneSignupForm.react","PolarisReactRedux.react","PolarisRegistrationLogger","PolarisRoutes","PolarisSignupActions","PolarisSignupTypes","PolarisSlimSignupForm.react","PolarisUA","polarisIsEligibleForFacebookLogin","qex","react","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");e=function(a){function b(b){var e;e=a.call(this,b)||this;e.$1=function(){d("PolarisRegistrationLogger").logRegistrationEvent({containermodule:e.props.pageIdentifier,event_name:"fbconnect_click",fb_userid:e.props.fbUserID,fbconnect_status:e.props.fbConnectedStatus});var a=d("PolarisRoutes").FXCAL_DISCLOSURE_PATH;d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",e.props.pageIdentifier);d("PolarisFBConnectHelpers").redirectToFBOAuth(a,"signupPage")};e.state={showFacebookLogin:c("polarisIsEligibleForFacebookLogin")()};return e}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){var a=d("CometRouteURL").getWindowURLParams()||{};a=a.hide_fb_signup;Boolean(a)===!0&&this.setState({showFacebookLogin:!1})};e.$2=function(){return d("PolarisUA").isDesktop()&&c("qex")._("33")===!0};e.render=function(){switch(this.props.step){case d("PolarisSignupTypes").STEP.emailConfirmation:return j.jsx(c("PolarisEmailConfirmationForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.phoneConfirmation:return j.jsx(c("PolarisPhoneSignupForm.react"),{onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions});case d("PolarisSignupTypes").STEP.birthday:return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisBirthdaySignupForm.react"),{onBirthdayEntered:this.props.onBirthdayEntered,onSignup:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style}),this.props.signupAgeSpecificError!=null&&j.jsx(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:this.props.onClearAgeError,title:d("PolarisAgeCollectionHelpers").WE_COULDNT_CREATE_AN_ACC,children:j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:this.props.onClearAgeError,children:d("PolarisGenericStrings").OK_TEXT})})]});case d("PolarisSignupTypes").STEP.accountPrivacy:c("vulture")("CSF1e4Q94Qx1U5d393aPFU3T8yY=");return j.jsx(c("PolarisAccountPrivacyForm.react"),{buttonLabel:d("PolarisGenericStrings").NEXT,defaultedToPrivate:!1,handleNext:function(){},subtitle:d("PolarisAuthStrings").ACCOUNT_PRIVACY_SUBHEADER_TEXT});case d("PolarisSignupTypes").STEP.acceptTerms:return j.jsx(c("PolarisAcceptTermsOfUseForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.captcha:return j.jsx(c("PolarisCaptchaSignupForm.react"),{onSignup:this.props.onSignup,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,style:this.props.style});case d("PolarisSignupTypes").STEP.base:default:var a=this.$2()||!this.state.showFacebookLogin;return j.jsx(c("PolarisSlimSignupForm.react"),{canUsePhone:!0,errorNonce:this.props.errorNonce,fbConnectedStatus:this.props.fbConnectedStatus,fbUserID:this.props.fbUserID,focusedFields:this.props.focusedFields,gdprRequired:this.props.gdprRequired,hideFBOption:a,hideHeader:this.props.hideHeader,needEmailOrPhone:!0,onSignupFocusChange:this.props.onSignupFocusChange,onSignupWithFBClick:this.$1,onSubmit:this.props.onSignup,pageIdentifier:this.props.pageIdentifier,requestInFlight:this.props.requestInFlight,signupNonSpecificError:this.props.signupNonSpecificError,signupResult:this.props.signupResult,usernameSuggestions:this.props.usernameSuggestions})}};return b}(j.Component);function a(a,b){var c,e=a.auth,f=e.login&&e.login.submissionCount||e.signup&&e.signup.submissionCount||0;b=e.signup&&e.signup.requestInFlight||b.requestInFlight;return{errorNonce:f,fbConnectedStatus:a.fb.status,fbEligible:a.fb.status!==d("PolarisFBConnectStatus").STATUS.ineligible,fbUserID:a==null||(c=a.fb)==null||(c=c.authResponse)==null?void 0:c.userID,focusedFields:e.signup&&e.signup.signupFocusedField,gdprRequired:a.signup.gdprRequired,requestInFlight:b,signupAgeSpecificError:e.signup&&e.signup.signupAgeSpecificError,signupNonSpecificError:e.signup&&e.signup.signupNonSpecificError,signupResult:e.signup&&e.signup.signupResult,step:e.signup&&e.signup.step||d("PolarisSignupTypes").STEP.base,usernameSuggestions:e.signup&&e.signup.usernameSuggestions||[]}}function b(a,b){return{onBirthdayEntered:function(){a(d("PolarisSignupActions").processBirthday())},onClearAgeError:function(){a({errorMessage:void 0,type:"SIGNUP_ERROR"})},onSignup:function(c){c.emailOrPhone!=null||h(0,51567),a(d("PolarisSignupActions").validateFormAndContinue(c,b.pageIdentifier))},onSignupFocusChange:function(b,c){a(d("PolarisSignupActions").changeSignupFormFocus(b,c)),a(d("PolarisSignupActions").performDryRun(b))}}}f=d("PolarisReactRedux.react").connect(a,b)(e);g["default"]=f}),98);
__d("PolarisAuthTestIDs",[],(function(a,b,c,d,e,f){"use strict";a="login-error-message";b="login-info-message";c="login-success-message";d="auth-message-modal";f.DESKTOP_AUTH_ERROR_MESSAGE=a;f.DESKTOP_AUTH_INFO_MESSAGE=b;f.DESKTOP_AUTH_SUCCESS_MESSAGE=c;f.MOBILE_AUTH_MESSAGE_MODAL=d}),66);
__d("PolarisStopDeletionDialogStrings",["fbt","PolarisExternalLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");var j=b.jsx(c("PolarisExternalLink.react"),{href:"https://help.instagram.com/370452623149242",children:h._(/*BTDS*/"Learn more")});function a(a,b){return h._(/*BTDS*/"You requested to delete {username}. If you want to keep it, you have until {date} to let us know. Otherwise, all your posts and information will be deleted. {Learn More}",[h._param("username",a),h._param("date",b),h._param("Learn More",j)])}e=h._(/*BTDS*/"Want to keep using this account?");f=h._(/*BTDS*/"Keep account");d=h._(/*BTDS*/"Back to log in");g.getDeletionBodyText=a;g.DELETION_TITLE=e;g.DELETION_KEEP_ACCOUNT=f;g.DELETION_BACK_TO_LOGIN=d}),226);
__d("PolarisStopDeletionDialog.react",["IGCoreDialog.react","PolarisStopDeletionDialogStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),c=a.onClose,e=a.onStopDeletion,f=a.stopDeletionDate,g=a.stopDeletionNonce;a=a.username;var h;b[0]!==f||b[1]!==a?(h=d("PolarisStopDeletionDialogStrings").getDeletionBodyText(a,f),b[0]=f,b[1]=a,b[2]=h):h=b[2];b[3]!==e||b[4]!==g?(f=i.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-primary-button",onClick:function(){return e(g)},children:d("PolarisStopDeletionDialogStrings").DELETION_KEEP_ACCOUNT}),b[3]=e,b[4]=g,b[5]=f):f=b[5];b[6]!==c?(a=i.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:c,children:d("PolarisStopDeletionDialogStrings").DELETION_BACK_TO_LOGIN}),b[6]=c,b[7]=a):a=b[7];b[8]!==h||b[9]!==f||b[10]!==a?(c=i.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:h,title:d("PolarisStopDeletionDialogStrings").DELETION_TITLE,children:[f,a]}),b[8]=h,b[9]=f,b[10]=a,b[11]=c):c=b[11];return c}g["default"]=a}),98);
__d("PolarisThirdPartyAuthHelpers",["InstagramQueryParamsHelper","PolarisFBConnectHelpers","PolarisRoutes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){if(c||e){b();return}c=d("PolarisRoutes").FXCAL_DISCLOSURE_PATH;e=a!=null?d("InstagramQueryParamsHelper").appendQueryParams(c,{next:a}):c;d("PolarisFBConnectHelpers").redirectToFBOAuth(e,"loginPage");return}g.handleLoginOrFacebookAuth=a}),98);
__d("usePolarisSendAccountRecoveryEmailForBoost",["PolarisAPISendAccountRecoveryEmail","PolarisAuthStrings","PolarisInstajax","PolarisLoginLogger","PolarisReactRedux.react","nullthrows","react-compiler-runtime","useIGDSToaster"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a instanceof d("PolarisInstajax").AjaxError&&a.message?a.message:d("PolarisAuthStrings").SEND_ACCOUNT_RECOVERY_LINK_FAILED_TEXT}function a(){var a=d("react-compiler-runtime").c(6),b=c("useIGDSToaster")(),e=b.add,f=d("PolarisReactRedux.react").useDispatch(),g=d("PolarisReactRedux.react").useSelector(i);a[0]!==e?(b=function(a){e({message:a,target:"bottom"},{duration:1e4})},a[0]=e,a[1]=b):b=a[1];var j=b;a[2]!==j||a[3]!==f||a[4]!==g?(b=function(){f({type:"ACCOUNT_RECOVERY_MODAL_DISMISSED"});var a=g.accountRecovery,b=a==null?void 0:a.targetUsername;b=b!=null?b:a==null?void 0:a.query;var e={event_flow:"account_recovery",login_identifier:b!=null?b:void 0};d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_submit"},e));d("PolarisAPISendAccountRecoveryEmail").sendAccountRecoveryEmail(c("nullthrows")(b)).then(function(a){j(a.toast_message),d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_success"},e))})["catch"](function(a){j(h(a)),d("PolarisLoginLogger").logLoginEvent(babelHelpers["extends"]({event_name:"boost_account_recovery_send_email_error",extra_client_data:{error_message:a.message}},e))})},a[2]=j,a[3]=f,a[4]=g,a[5]=b):b=a[5];a=b;return a}function i(a){return a.auth}g["default"]=a}),98);
__d("PolarisSlimLoginForm.react",["fbt","CometImage.react","IGDSBox.react","IGDSButton.react","IGDSCheckbox.react","IGDSIconButton.react","IGDSInfoPanoFilledIcon.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAccountSwitcherActions","PolarisAuthStrings","PolarisAuthTestIDs","PolarisAuthTypeSwitcher.react","PolarisConsentQEHelpers","PolarisConsentStrings.react","PolarisFacebookLoginButtonRevamped","PolarisFastLink.react","PolarisIGCoreButton.react","PolarisIsLoggedIn","PolarisLoggedOutCtaClickLogger","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOrBar.react","PolarisQueryParams","PolarisReactRedux.react","PolarisRoutes","PolarisSlimTextInput.react","PolarisStopDeletionDialog.react","PolarisThirdPartyAuthHelpers","PolarisTooManyAccountsDialog.react","PolarisUA","gkx","justknobx","react","react-compiler-runtime","usePolarisPageID","usePolarisSendAccountRecoveryEmailForBoost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect;b.useMemo;var l=b.useRef,m=b.useState,n="slfErrorAlert",o=6,p={profilePicture:{maxWidth:"x193iq5w",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(12),e=a.checkboxId,f=a.checkboxOnChange,g=a.checkboxState,h=a.checkboxText;a=a.disabled;var i=d("PolarisReactRedux.react").useSelector(r);i=d("PolarisUA").isMobile()&&i&&d("PolarisIsLoggedIn").isLoggedIn()?4:10;var k=a?"secondaryText":"primaryText",l;b[0]!==h||b[1]!==k?(l=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:k,children:h}),b[0]=h,b[1]=k,b[2]=l):l=b[2];b[3]!==f||b[4]!==g||b[5]!==a||b[6]!==l?(h=j.jsx(c("IGDSCheckbox.react"),{checkboxShape:"square",isChecked:g,isDisabled:a,name:"LoginCheckbox",onChange:f,size:16,zeroPadding:!0,children:l}),b[3]=f,b[4]=g,b[5]=a,b[6]=l,b[7]=h):h=b[7];b[8]!==e||b[9]!==i||b[10]!==h?(k=j.jsx(c("IGDSBox.react"),{id:e,marginBottom:3,marginEnd:2,marginStart:i,marginTop:3,position:"relative",children:h}),b[8]=e,b[9]=i,b[10]=h,b[11]=k):k=b[11];return k}function r(a){return a.navigation.isAccountSwitcherOpen}function s(a){var b=d("react-compiler-runtime").c(23),e=a.fromLoggedOutDialog,f=a.hideForgotPassword,g=a.isThreadsRequest,i=a.newAuthDesign,k=a.onClick,l=e===void 0?!1:e;a=g===void 0?!1:g;e=i===void 0?!1:i;var m=d("PolarisReactRedux.react").useDispatch();b[0]!==m?(g=function(){return m(d("PolarisAccountSwitcherActions").closeAccountSwitcher())},b[0]=m,b[1]=g):g=b[1];var n=g,o=d("PolarisReactRedux.react").useSelector(t);i=a?"center":"end";if(f===!0)return null;b[2]!==e?(g=e?h._(/*BTDS*/"Forgot?"):h._(/*BTDS*/"Forgot password?"),b[2]=e,b[3]=g):g=b[3];f=g;g=d("PolarisRoutes").PASSWORD_RESET_PATH;if(d("PolarisQueryParams").isFromLoginForAPI()){var p;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("InstagramQueryParamsHelper").appendQueryParams(d("PolarisRoutes").PASSWORD_RESET_PATH,{source:"api-login"}),b[4]=p):p=b[4];g=p}else if(d("PolarisQueryParams").isFromFxcal()){b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("InstagramQueryParamsHelper").appendQueryParams(d("PolarisRoutes").PASSWORD_RESET_PATH,{source:"fxcal"}),b[5]=p):p=b[5];g=p}b[6]!==f||b[7]!==a||b[8]!==e?(p=a?j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:f}):e?j.jsx(d("IGDSTextVariants.react").IGDSTextFootnote,{color:"link",maxLines:1,textAlign:"center",children:f}):d("PolarisUA").isMobile()?j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"primaryButton",textAlign:"center",children:f}):j.jsx(c("IGDSText.react"),{color:"link",zeroMargin:!0,children:f}),b[6]=f,b[7]=a,b[8]=e,b[9]=p):p=b[9];p=p;var q;b[10]!==l||b[11]!==o||b[12]!==k||b[13]!==n?(q=function(a){k==null||k(),d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"forgot_password_click"}),d("PolarisLoginLogger").logLoginEvent({event_category:"search",event_flow:"account_recovery_start",event_name:"account_recovery_start",event_step:"search",extra_client_data:l?{event_source:"login_logged_out_dialog_forgot"}:null}),o&&n()},b[10]=l,b[11]=o,b[12]=k,b[13]=n,b[14]=q):q=b[14];q=q;b[15]!==f||b[16]!==q||b[17]!==o||b[18]!==a||b[19]!==i||b[20]!==e||b[21]!==p?(g=d("PolarisUA").isMobile()&&!(o&&d("PolarisIsLoggedIn").isLoggedIn())||a?j.jsx(c("IGDSBox.react"),{direction:"row",justifyContent:i,marginBottom:e?0:2,marginEnd:e?0:10,marginStart:10,paddingY:3,position:"relative",children:j.jsx(c("PolarisFastLink.react"),{href:g,onClick:q,children:p},"reset")}):j.jsx(c("IGDSBox.react"),{alignContent:"center",alignSelf:"center",display:"flex",marginTop:3,children:j.jsx(c("IGDSButton.react"),{href:g,label:f,onClick:q,variant:d("PolarisUA").isMobile()&&o?"primary_link":"secondary_link"},"reset")}),b[15]=f,b[16]=q,b[17]=o,b[18]=a,b[19]=i,b[20]=e,b[21]=p,b[22]=g):g=b[22];return g}function t(a){return a.navigation.isAccountSwitcherOpen}function aa(a){var b=d("react-compiler-runtime").c(20),e=a.fromLoggedOutDialog,f=a.hideForgotPassword,g=a.isThreadsRequest,h=a.onForgotPasswordClick;a=a.onNavigate;e=e===void 0?!1:e;g=g===void 0?!1:g;var i=d("PolarisReactRedux.react").useSelector(u);if(g)return null;if(d("PolarisUA").isMobile()&&!(i&&d("PolarisIsLoggedIn").isLoggedIn())){if(d("PolarisQueryParams").isFromFxcal()||d("PolarisQueryParams").hasDisableSignupParam())return null;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("PolarisConsentQEHelpers").shouldShowIPFingerPrintingDisclosure(),b[0]=g):g=b[0];g=g;var k;b[1]!==a?(k=j.jsx(c("PolarisAuthTypeSwitcher.react"),{onNavigate:a}),b[1]=a,b[2]=k):k=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=g&&j.jsx(c("IGDSBox.react"),{paddingY:9,width:"80%",children:j.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",textAlign:"center",children:d("PolarisConsentStrings.react").INSTAGRAM_TERMS_OF_USE_AND_PRIVACY_POLICY_TEXT})}),b[3]=g):g=b[3];b[4]!==k?(g=j.jsxs(c("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:[k,g]}),b[4]=k,b[5]=g):g=b[5];return g}if(d("PolarisUA").isDesktop()&&!(i&&d("PolarisIsLoggedIn").isLoggedIn())&&d("PolarisQueryParams").hasEnableSignupWeb()){b[6]!==e||b[7]!==f||b[8]!==h?(k=j.jsx(s,{fromLoggedOutDialog:e,hideForgotPassword:f,onClick:h}),b[6]=e,b[7]=f,b[8]=h,b[9]=k):k=b[9];b[10]!==e||b[11]!==a?(g=j.jsx(c("IGDSBox.react"),{alignItems:"center",marginTop:4,position:"relative",children:j.jsx(c("PolarisAuthTypeSwitcher.react"),{fromLoggedOutDialog:e,onNavigate:a})}),b[10]=e,b[11]=a,b[12]=g):g=b[12];b[13]!==k||b[14]!==g?(i=j.jsxs(j.Fragment,{children:[k,g]}),b[13]=k,b[14]=g,b[15]=i):i=b[15];return i}b[16]!==e||b[17]!==f||b[18]!==h?(a=j.jsx(s,{fromLoggedOutDialog:e,hideForgotPassword:f,onClick:h}),b[16]=e,b[17]=f,b[18]=h,b[19]=a):a=b[19];return a}function u(a){return a.navigation.isAccountSwitcherOpen}function v(a){var b=d("react-compiler-runtime").c(6),e=a.className,f=a.message;a=a.testid;var g;b[0]!==e||b[1]!==f?(g=j.jsx("div",{className:e,children:f}),b[0]=e,b[1]=f,b[2]=g):g=b[2];b[3]!==g||b[4]!==a?(e=j.jsx(c("IGDSText.react"),{testid:void 0,children:g}),b[3]=g,b[4]=a,b[5]=e):e=b[5];return e}function ba(a){var b,e=d("react-compiler-runtime").c(18);a=a.errorMessage;var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f="xkmlbd1 xvs91rp xd4r4e8 x1anpbxc x11gldyt xyorhqc x11hdunq x2b8uid",e[0]=f):f=e[0];e[1]!==a?(f=j.jsx(v,{className:f,message:a,testid:void 0}),e[1]=a,e[2]=f):f=e[2];f=f;var g=c("usePolarisSendAccountRecoveryEmailForBoost")(),h=m(!1),i=h[0],l=h[1],n=a===d("PolarisAuthStrings").ERROR_LOGIN_PASSWORD_BOOST_ACCOUNT_RECOVERY||a===d("PolarisAuthStrings").ERROR_LOGIN_USERNAME_BOOST_ACCOUNT_RECOVERY;h=d("PolarisReactRedux.react").useSelector(w);h=h==null||(b=h.accountRecovery)==null||(b=b.options)==null?void 0:b.is_boost_user_eligible_for_account_recovery;var o;e[3]!==i||e[4]!==g?(o=function(){i||(l(!0),g(),d("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_click"}))},e[3]=i,e[4]=g,e[5]=o):o=e[5];o=o;var p;e[6]!==n?(p=function(){n&&d("PolarisLoginLogger").logLoginEvent({event_flow:"account_recovery",event_name:"boost_account_recovery_error_message_view"})},e[6]=n,e[7]=p):p=e[7];var q;e[8]!==a||e[9]!==n?(q=[n,a],e[8]=a,e[9]=n,e[10]=q):q=e[10];k(p,q);if(n&&h===!0){e[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("IGDSText.react"),{color:"link",maxLines:1,textAlign:"center",zeroMargin:!0,children:d("PolarisAuthStrings").ERROR_LOGIN_BOOST_ACCOUNT_RECOVERY_EMAIL_LINK}),e[11]=a):a=e[11];e[12]!==i||e[13]!==o?(p=j.jsx(c("IGDSBox.react"),{margin:"auto",children:j.jsx(c("PolarisFastLink.react"),{disabled:i,onClick:o,children:a})}),e[12]=i,e[13]=o,e[14]=p):p=e[14];e[15]!==f||e[16]!==p?(q=j.jsxs(c("IGDSBox.react"),{children:[f,p]}),e[15]=f,e[16]=p,e[17]=q):q=e[17];return q}return f}function w(a){return a.auth}function a(a){var b=d("react-compiler-runtime").c(140),e=a.dialogSource,f=a.errorMessage,g=a.fbConnectStatus,i=a.forceLoginIgId,r=a.forceLoginProfilePicUrl,t=a.forceLoginUsername,u=a.fromLoggedOutDialog,w=a.hideFBLogin,x=a.hideForgotPassword,y=a.infoMessage,ia=a.isFBLoggedIn,ja=a.isIGSSODisabled,z=a.isThreadsRequest,A=a.nextUrl,ka=a.onClearStopDeletionNonce,la=a.onLoginWithFBClick,ma=a.onStopAccountDeletion,na=a.onSubmit,B=a.requestInFlight,C=a.stopDeletionDate,D=a.stopDeletionNonce,oa=a.style,E=a.successMessage;a=a.usernameHint;var F=u===void 0?!1:u;u=z===void 0?!1:z;a=m((z=t!=null?t:a)!=null?z:"");var G=a[0],pa=a[1];z=m("");var H=z[0],qa=z[1];a=m(!1);var I=a[0],ra=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(z=d("PolarisOneTapLogin").hasMaxOneTapNonces(),b[0]=z):z=b[0];a=z;var sa=a,ta=c("usePolarisPageID")();z=d("PolarisReactRedux.react").useSelector(ha);b[1]!==ia||b[2]!==ja||b[3]!==A||b[4]!==la||b[5]!==ta?(a=function(){d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",ta),d("PolarisThirdPartyAuthHelpers").handleLoginOrFacebookAuth(A!=null?A:void 0,la,ia,ja)},b[1]=ia,b[2]=ja,b[3]=A,b[4]=la,b[5]=ta,b[6]=a):a=b[6];a=a;var J;b[7]!==F||b[8]!==na||b[9]!==I||b[10]!==H||b[11]!==G?(J=function(a){d("PolarisLoginLogger").logLoginEvent({event_category:F?"logged_out_dialog_interaction":null,event_flow:"login_manual",event_name:"login_button_clicked",event_step:F?"logged_out_dialog":null}),a.preventDefault(),I===!0&&d("PolarisLoginLogger").logLoginEvent({event_name:"one_tap_login_optin"}),c("PolarisLoginQPL").addPointLoginButtonClick(),na(G,H,I)},b[7]=F,b[8]=na,b[9]=I,b[10]=H,b[11]=G,b[12]=J):J=b[12];J=J;var K;bb0:{if(d("PolarisQueryParams").isFromFxcal()||d("PolarisIsLoggedIn").isLoggedIn()||u){K=!1;break bb0}K=!w&&c("gkx")("5230")===!1}w=K;K=m(!1);var L=K[0],ua=K[1];K=m(!0);var M=K[0],va=K[1],wa=l(null);K=d("PolarisAuthStrings").PHONE_USERNAME_OR_EMAIL;bb1:{if(d("PolarisUA").isMobile()){var N;b[13]!==z?(N=z&&d("PolarisIsLoggedIn").isLoggedIn()?"xdj266r x1ys307a xzueoph xyqm7xq":"xdj266r x11gldyt xzueoph x11hdunq",b[13]=z,b[14]=N):N=b[14];N=N;break bb1}var O;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(O="xdj266r x11gldyt xzueoph x11hdunq",b[15]=O):O=b[15];N=O}O=N;var P;b[16]!==e||b[17]!==g||b[18]!==F?(N=function(){d("PolarisLoginLogger").logLoginEvent({event_name:"login_form_load",fbconnect_status:g}),F?d("PolarisLoginLogger").logLoginEvent({event_category:"logged_out_dialog_init",event_flow:"login_manual",event_name:"login_step_view_loaded",event_step:"logged_out_dialog",extra_client_data:{dialog_source:e!=null?e:""}}):d("PolarisLoginLogger").logLoginEvent({event_flow:"login_manual",event_name:"login_step_view_loaded"}),d("PolarisQueryParams").hasForceAuthenticationParam()&&wa.current!=null&&wa.current.focus()},P=[e,g,F],b[16]=e,b[17]=g,b[18]=F,b[19]=P,b[20]=N):(P=b[19],N=b[20]);k(N,P);N=m(!1);var Q=N[0],xa=N[1];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(P=c("justknobx")._("912"),b[21]=P):P=b[21];var ya=P;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(N=function(){var a=function(){if(ya){var a;a=!!((a=document.querySelector("input[name=username]"))!=null&&a.matches("*:-webkit-autofill"));xa(a)}};a();window.setTimeout(a,200)},P=[ya],b[22]=N,b[23]=P):(N=b[22],P=b[23]);k(N,P);b[24]!==M?(N=function(a){va(!M),a.preventDefault()},b[24]=M,b[25]=N):N=b[25];P=N;b[26]!==I?(N=function(){sa?ua(!0):ra(!I)},b[26]=I,b[27]=N):N=b[27];N=N;var za=ga,Aa=fa,R;b[28]!==Q?(R=function(){Q&&xa(!1)},b[28]=Q,b[29]=R):R=b[29];var S=R;R=ea;var T;b[30]!==z?(T=d("PolarisUA").isMobile()&&z&&d("PolarisIsLoggedIn").isLoggedIn(),b[30]=z,b[31]=T):T=b[31];T=T;var U;b[32]!==z?(U=d("PolarisUA").isMobile()&&!(z&&d("PolarisIsLoggedIn").isLoggedIn()),b[32]=z,b[33]=U):U=b[33];U=U;var V=!G&&!H&&!Q&&ya;V=!G||!H||H.length<o||V;var W;b[34]!==z?(W=z&&d("PolarisIsLoggedIn").isLoggedIn(),b[34]=z,b[35]=W):W=b[35];W=W;W=W;var X=f==null||f===""?void 0:n;b[36]!==X||b[37]!==i||b[38]!==r||b[39]!==t||b[40]!==S||b[41]!==O||b[42]!==G?(K=j.jsx(j.Fragment,{children:i!=null&&t!=null&&r!=null?j.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np xdj266r x11gldyt x1fqp7bg x11hdunq",children:[j.jsx("div",{className:"x1ekkm8c x1143rjc xum4auv xj21bgg x972fbf x10w94by x1qhh985 x14e42zd x1kmio9f xln7xf2 xk390pu xc9qbxq xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf x14qfxbe",children:j.jsx(c("CometImage.react"),{alt:h._(/*BTDS*/"{username}'s profile picture",[h._param("username",t)]),src:r,xstyle:p.profilePicture})}),j.jsx("div",{className:"x1kmio9f x13fj5qh",children:j.jsx(c("IGDSText.react"),{size:"label",textAlign:"start",weight:"normal",children:t})})]}):j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":X,"aria-label":K,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:O,"data-testid":void 0,isInputFocused:R(),maxLength:75,name:"username",onChange:function(a){a=a.target;a=a.value;pa(a);S()},onFocus:da,placeholder:K,ref:wa,value:G})}),b[36]=X,b[37]=i,b[38]=r,b[39]=t,b[40]=S,b[41]=O,b[42]=G,b[43]=K):K=b[43];r=K;t=d("PolarisAuthStrings").PASSWORD;K=d("PolarisAuthStrings").ONE_TAP_CHECKBOX_TEXT;var Y;b[44]!==i||b[45]!==S||b[46]!==H.length?(Y=function(a){a=a.target;a=a.value;H.length===0&&a.length>=6&&d("PolarisLoginLogger").logLoginEvent({event_name:"login_form_autofill",ig_userid:i!=null?i:void 0});qa(a);S()},b[44]=i,b[45]=S,b[46]=H.length,b[47]=Y):Y=b[47];var Z=!!H,$=M?"password":"text";b[48]!==X||b[49]!==P||b[50]!==O||b[51]!==M||b[52]!==H||b[53]!==Y||b[54]!==Z||b[55]!==$?(R=j.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":X,"aria-label":t,"aria-required":"true",autoCapitalize:"off",autoCorrect:"off",className:O,"data-testid":void 0,isInputFocused:R(),isPasswordHidden:M,name:"password",onChange:Y,onFocus:ca,onPasswordToggle:P,placeholder:t,showPasswordToggleLink:Z,type:$,value:H}),b[48]=X,b[49]=P,b[50]=O,b[51]=M,b[52]=H,b[53]=Y,b[54]=Z,b[55]=$,b[56]=R):R=b[56];b[57]!==N||b[58]!==I||b[59]!==W||b[60]!==L?(t=W&&j.jsxs(j.Fragment,{children:[j.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[j.jsx(q,{checkboxId:"optIntoOneTap",checkboxOnChange:N,checkboxState:I,checkboxText:K,disabled:sa}),sa&&j.jsx(c("IGDSIconButton.react"),{onClick:N,padding:0,children:j.jsx(c("IGDSInfoPanoFilledIcon.react"),{alt:K,color:"ig-secondary-text",size:16})})]}),L&&j.jsx(c("PolarisTooManyAccountsDialog.react"),{onClose:function(){ua(!1)}})]}),b[57]=N,b[58]=I,b[59]=W,b[60]=L,b[61]=t):t=b[61];b[62]!==x||b[63]!==U||b[64]!==u?(X=U&&!u&&j.jsx(s,{hideForgotPassword:x,onClick:za}),b[62]=x,b[63]=U,b[64]=u,b[65]=X):X=b[65];b[66]!==R||b[67]!==t||b[68]!==X?(P=j.jsxs(j.Fragment,{children:[R,t,X]}),b[66]=R,b[67]=t,b[68]=X,b[69]=P):P=b[69];O=P;Y=T?4:10;Z=T?4:10;$=T?3:2;K=u?"barcelona-primary-button":"ig-primary-button";b[70]===Symbol["for"]("react.memo_cache_sentinel")?(N=j.jsx(c("IGDSBox.react"),{position:"relative",children:h._(/*BTDS*/"Log in")}),b[70]=N):N=b[70];b[71]!==J||b[72]!==V||b[73]!==B||b[74]!==K?(W=j.jsx(c("PolarisIGCoreButton.react"),{color:K,"data-testid":void 0,disabled:V,loading:B,onClick:J,type:"submit",children:N}),b[71]=J,b[72]=V,b[73]=B,b[74]=K,b[75]=W):W=b[75];b[76]!==Y||b[77]!==Z||b[78]!==$||b[79]!==W?(L=j.jsx(c("IGDSBox.react"),{marginBottom:2,marginEnd:Y,marginStart:Z,marginTop:$,position:"relative",children:W}),b[76]=Y,b[77]=Z,b[78]=$,b[79]=W,b[80]=L):L=b[80];b[81]!==x||b[82]!==u?(U=u&&j.jsx(s,{hideForgotPassword:x,isThreadsRequest:u,onClick:za}),b[81]=x,b[82]=u,b[83]=U):U=b[83];b[84]!==L||b[85]!==U?(R=j.jsxs(j.Fragment,{children:[L,U]}),b[84]=L,b[85]=U,b[86]=R):R=b[86];t=R;b[87]!==r||b[88]!==O||b[89]!==t?(X=j.jsxs(j.Fragment,{children:[r,O,t]}),b[87]=r,b[88]=O,b[89]=t,b[90]=X):X=b[90];P=X;b[91]===Symbol["for"]("react.memo_cache_sentinel")?(N=j.jsx("div",{className:"x1hmvnq2 x11gldyt x91k8ka x11hdunq",children:j.jsx(c("PolarisOrBar.react"),{})}),b[91]=N):N=b[91];V=N;if(!w)B=P;else if(d("PolarisUA").isMobile()||z){b[92]!==z||b[93]!==a?(K=j.jsx(c("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:z,onClick:a}),b[92]=z,b[93]=a,b[94]=K):K=b[94];b[95]!==P||b[96]!==K?(Y=j.jsxs(j.Fragment,{children:[K,V,P]}),b[95]=P,b[96]=K,b[97]=Y):Y=b[97];B=Y}else{b[98]!==z||b[99]!==a?(Z=j.jsx(c("PolarisFacebookLoginButtonRevamped"),{isAccountSwitcherOpen:z,onClick:a}),b[98]=z,b[99]=a,b[100]=Z):Z=b[100];b[101]!==P||b[102]!==Z?($=j.jsxs(j.Fragment,{children:[P,V,Z]}),b[101]=P,b[102]=Z,b[103]=$):$=b[103];B=$}b[104]!==y?(W=y!=null&&y!==""&&j.jsx(v,{className:"x1roi4f4 xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:y,testid:void 0}),b[104]=y,b[105]=W):W=b[105];b[106]!==E?(L=E!=null&&E!==""&&j.jsx(v,{className:"x5n08af xvs91rp xd4r4e8 x1anpbxc x11gldyt x4n8cb0 x11hdunq x2b8uid",message:E,testid:void 0}),b[106]=E,b[107]=L):L=b[107];b[108]===Symbol["for"]("react.memo_cache_sentinel")?(U={className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf"},b[108]=U):U=b[108];R=T?3:6;b[109]!==B||b[110]!==R?(r=j.jsx(c("IGDSBox.react"),{marginTop:R,position:"relative",children:B}),b[109]=B,b[110]=R,b[111]=r):r=b[111];b[112]!==f?(O=f!=null&&f!==""&&j.jsx(ba,{errorMessage:f}),b[112]=f,b[113]=O):O=b[113];b[114]!==F||b[115]!==x||b[116]!==u?(t=j.jsx(aa,{fromLoggedOutDialog:F,hideForgotPassword:x,isThreadsRequest:u,onForgotPasswordClick:za,onNavigate:Aa}),b[114]=F,b[115]=x,b[116]=u,b[117]=t):t=b[117];b[118]!==ka||b[119]!==ma||b[120]!==I||b[121]!==H||b[122]!==C||b[123]!==D||b[124]!==G?(X=D!=null&&C!=null&&j.jsx(c("PolarisStopDeletionDialog.react"),{onClose:ka,onStopDeletion:function(a){return ma(G,H,I,a)},stopDeletionDate:C,stopDeletionNonce:D,username:G}),b[118]=ka,b[119]=ma,b[120]=I,b[121]=H,b[122]=C,b[123]=D,b[124]=G,b[125]=X):X=b[125];b[126]!==T||b[127]!==oa?(N=oa==="modal"&&!T&&j.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative"}),b[126]=T,b[127]=oa,b[128]=N):N=b[128];b[129]!==J||b[130]!==r||b[131]!==O||b[132]!==t||b[133]!==X||b[134]!==N?(w=j.jsxs("form",babelHelpers["extends"]({},U,{"data-testid":void 0,id:"loginForm",method:"post",onSubmit:J,children:[r,O,t,X,N]})),b[129]=J,b[130]=r,b[131]=O,b[132]=t,b[133]=X,b[134]=N,b[135]=w):w=b[135];b[136]!==W||b[137]!==L||b[138]!==w?(K=j.jsxs("div",{children:[W,L,w]}),b[136]=W,b[137]=L,b[138]=w,b[139]=K):K=b[139];return K}function ca(){return c("PolarisLoginQPL").addPointPasswordFocus()}function da(){return c("PolarisLoginQPL").addPointUsernameFocus()}function ea(){return!d("PolarisIsLoggedIn").isLoggedIn()&&!d("PolarisUA").isMobile()}function fa(a){a==="signup"&&c("PolarisLoginQPL").endCancelNavigateToSignup()}function ga(){c("PolarisLoginQPL").endCancelNavigateToForgotPassword()}function ha(a){return a.navigation.isAccountSwitcherOpen}g["default"]=a}),226);
__d("PolarisStrategicWebTraffic",["ExecutionEnvironment","PolarisConfig","PolarisDismissEntry","PolarisQueryParams","PolarisUA","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("memoize")(function(){if((h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisDismissEntry").isDismissed(d("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE))return!0;else if((h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisUA").isMobile()&&d("PolarisQueryParams").parseQueryParams().utm_source&&d("PolarisQueryParams").parseQueryParams().utm_source.includes("_sd")){d("PolarisDismissEntry").setDismissEntry(d("PolarisDismissEntry").PROMOTED_TRAFFIC_TYPE);return!0}return!1});a=c("memoize")(function(){return d("PolarisConfig").isProgressiveWebApp()||i()});g.isStrategicTraffic=a}),98);
__d("PolarisFXAuthActions",["FXAuthenticationLogger","PolarisAPIExtractTwoFactorChallengeIfPresent","PolarisAPIFXCALAuthLogin","PolarisAuthStrings","PolarisNavigationUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return function(f,g){f({appId:c,etoken:e,type:"FX_AUTH_LOGIN_ATTEMPTED"});return d("PolarisAPIFXCALAuthLogin").fxcalAuthLogin(a.replace(/\s+$/,""),b,c,e).then(function(a){a.authenticated?h(String(a.username),String(a.profile_pic_url),String(a.blob),String(a.token))(f,g):f({errorDescription:d("PolarisAuthStrings").ERROR_LOGIN_PASSWORD,type:"FX_AUTH_LOGIN_FAILED"})},function(a){a=d("PolarisAPIExtractTwoFactorChallengeIfPresent").extractTwoFactorChallengeIfPresent(a);if(a){f(babelHelpers["extends"]({fromFB:!1,fromFxAuth:!0,timeReceived:Date.now(),type:"TWO_FACTOR_CHALLENGE_RECEIVED"},a));f({type:"FX_AUTH_TWO_FACTOR_REQUIRED"});return}f({errorDescription:d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN,type:"FX_AUTH_LOGIN_FAILED"})})["catch"]()}}function b(){return function(a){a({type:"FX_AUTH_LOGOUT"}),d("FXAuthenticationLogger").logEvent({event:"web_auth_force_logout",target_account_type:1})}}function c(a,b,c){return function(e){if(a==null||b==null||c==null)return;var f=new URL(a);f.searchParams.append("blob",b);f.searchParams.append("token",c);e({redirectUrl:f.toString(),type:"FX_AUTH_CONFIRMED"});d("FXAuthenticationLogger").logEvent({event:"web_auth_confirmed_redirect",target_account_type:1});e=f.toString();d("PolarisNavigationUtils").openURLWithFullPageReload(e);e.startsWith("accountscenter://")&&window.close()}}function h(a,b,c,e){return function(f){f({blob:c,profilePicUrl:b,token:e,type:"FX_AUTH_LOGIN_SUCCEEDED",username:a}),d("FXAuthenticationLogger").logEvent({event:"web_auth_confirm_page_view",target_account_type:1})}}g.fxAuthLoginAction=a;g.fxAuthLogoutAction=b;g.fxAuthConfirmedAction=c;g.fxAuthSucceededAction=h}),98);
__d("polarisUpdateTwoFactorLoginNoncesFromResponse",["PolarisOneTapLogin","PolarisTrustedDevicesUtils","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.loginNonce,e=a.trustedDeviceNonce;a=a.userId;if(a==null)return;c("isStringNullOrEmpty")(e)||d("PolarisTrustedDevicesUtils").addTrustedDevicesNonce(a,e);c("isStringNullOrEmpty")(b)||d("PolarisOneTapLogin").updateLoginNonce(a,b)}g["default"]=a}),98);
__d("PolarisTwoFactorActions",["invariant","CAAWebLoginLoggingUtils","PolarisAPIFxcalAuthTwoFactorLogin","PolarisAPILoginTwoFactor","PolarisAPISendTwoFactorLoginSms","PolarisAPISendTwoFactorLoginWhatsapp","PolarisAuthStrings","PolarisFXAuthActions","PolarisInstajax","PolarisLoginQPL","PolarisOneTapLogin","PolarisQueryParams","PolarisRedirectHelper","polarisGetAppPlatform","polarisLogAction","polarisUpdateTwoFactorLoginNoncesFromResponse"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e,f,g){g===void 0&&(g=!1);return function(i,j){j=j();var k=j.auth,l=k.dyiJobID,m=k.next,n=k.showOneTap;k=j.auth.twoFactor;k||h(0,51503);var o=k.fromFB,p=k.fromFxAuth,q=k.identifier,r=k.username;k=j.fxAuth;j=k.appId;k=k.etoken;i({type:"TWO_FACTOR_VERIFY_ATTEMPTED"});var s={fb:o,platform:d("polarisGetAppPlatform").getAppPlatform(),source:a},t=p?{}:d("PolarisQueryParams").parseQueryParams();o=p?d("PolarisAPIFxcalAuthTwoFactorLogin").fxcalAuthTwoFactorLogin(q,b,r,e,f,j!=null?j:"0",k!=null?k:""):d("PolarisAPILoginTwoFactor").loginTwoFactor(q,b,r,e,f,d("PolarisOneTapLogin").queryParamStringWithOneTapInfo(t),g);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorFormSubmit(f);c("polarisLogAction")("twoFacLoginAttempt",s);o.then(function(a){if(a.authenticated){i({type:"TWO_FACTOR_VERIFY_SUCCEEDED"});c("polarisLogAction")("loginSuccess",babelHelpers["extends"]({},s,{twoFac:!0}));d("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!0,null,null,!1,a.cryptedUid);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").endSuccess();c("polarisUpdateTwoFactorLoginNoncesFromResponse")(a);if(p&&a.blob!==null)i(d("PolarisFXAuthActions").fxAuthSucceededAction(r,String(a.profile_pic_url),String(a.blob),String(a.token)));else{var b;b=(b=t.dyi_job_id)!=null?b:"";d("PolarisRedirectHelper").redirectAfterLogin(m,!!a.reactivated,n&&!!a.oneTapPrompt,a.nonce!=null&&a.nonce!==""?a.nonce:"",l?l:b)}}else{a=d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;i({message:a,type:"TWO_FACTOR_VERIFY_FAILED"});c("polarisLogAction")("loginFailure",babelHelpers["extends"]({},s,{twoFac:!0}));c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointUserError("two_factor_failed")}},function(a){a=a instanceof d("PolarisInstajax").AjaxError&&((a=a.responseObject)==null?void 0:a.message)||d("PolarisAuthStrings").ERROR_LOGIN_UNKNOWN;i({message:a,type:"TWO_FACTOR_VERIFY_FAILED"});c("polarisLogAction")("loginFailure",babelHelpers["extends"]({},s,{twoFac:!0}));d("CAAWebLoginLoggingUtils").logLoginResult("two_fac_redirect","two_fac",1,!1);c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointUserError("two_factor_failed")})}}function i(){return{type:"TWO_FACTOR_CODE_REQUESTED"}}function j(a){return{message:a,type:"TWO_FACTOR_CODE_REQUEST_FAILED"}}function k(a,b){return{identifier:a,timeSent:Date.now(),type:"TWO_FACTOR_CODE_SENT",verificationMethod:b}}function b(){return l("SMS")}function e(){return l("WHATSAPP")}function l(a){return function(b,e){b(i());e=e().auth.twoFactor;e||h(0,51504);var f=e.identifier;e=e.username;c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorRequestNewSMSCode();return a==="SMS"?d("PolarisAPISendTwoFactorLoginSms").sendTwoFactorLoginSms(e,f).then(function(a){b(k(a.two_factor_info.two_factor_identifier,"SMS"))},function(a){var e;e=a instanceof d("PolarisInstajax").AjaxError&&((e=a.responseObject)==null?void 0:e.message)||d("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;b(j(e));c("polarisLogAction")("newCodeSentFailure",{platform:d("polarisGetAppPlatform").getAppPlatform()});c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").markError("request_new_sms_code_failed",a)}):d("PolarisAPISendTwoFactorLoginWhatsapp").sendTwoFactorLoginWhatsapp(e,f).then(function(a){b(k(a.xdt_send_two_factor_login_whatsapp.two_factor_info.two_factor_identifier,"WHATSAPP"))},function(a){var e;e=a instanceof d("PolarisInstajax").AjaxError&&((e=a.responseObject)==null?void 0:e.message)||d("PolarisAuthStrings").TWOFAC_CODE_RESEND_FAILED_TEXT;b(j(e));c("polarisLogAction")("newCodeSentFailure",{platform:d("polarisGetAppPlatform").getAppPlatform()});c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").markError("request_new_whatsapp_code_failed",a)})}}function f(a){return{eligibleForMultipleTotp:!1,fromFB:!1,fromFxAuth:!1,identifier:a.identifier||"",isInSowaExperience:a.isInSowaExperience,lastFourDigits:a.lastFourDigits||"",maskedPhoneNumber:a.maskedPhoneNumber||"",showTrustedDevice:!1,smsTwoFactorOn:a.smsTwoFactorOn||!1,timeReceived:Date.now(),totpTwoFactorOn:a.totpTwoFactorOn||!1,type:"TWO_FACTOR_CHALLENGE_RECEIVED",username:a.username||""}}g.submitVerificationCode=a;g.requestSMSCode=b;g.requestWhatsappCode=e;g.loadTwoFactorAuthenticationData=f}),98);
__d("PolarisTwoFactorForm.react",["fbt","invariant","IGDSBox.react","IGDSCheckbox.react","IGDSDialogFooter.react","IGDSText.react","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIsLoggedIn","PolarisLoginQPL","PolarisNavigationUtils","PolarisReactRedux.react","PolarisSlimTextInput.react","PolarisTwoFactorActions","PolarisUA","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l="twoFactorErrorAlert",m=h._(/*BTDS*/"backup codes"),n=h._(/*BTDS*/"text message"),o=h._(/*BTDS*/"authentication app"),p=h._(/*BTDS*/"resend it"),q=h._(/*BTDS*/"Send code via SMS instead"),r=h._(/*BTDS*/"Send code via WhatsApp instead"),s=h._(/*BTDS*/"Trust this device"),t=h._(/*BTDS*/"We won't ask for a code next time"),u=h._(/*BTDS*/"Security Code"),v=h._(/*BTDS*/"Confirm");h._(/*BTDS*/"Enter login code");var w=h._(/*BTDS*/"Enter the 6-digit code generated by your authentication app."),x=h._(/*BTDS*/"Enter a 6-digit login code generated by an authentication app."),y=h._(/*BTDS*/"Enter one of the 8-digit codes provided when you set up two-factor authentication.");function z(a){var b=d("react-compiler-runtime").c(9),e=a.onClickAuthAppCode,f=a.onClickBackupCode;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(A),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="TOTP"?h._(/*BTDS*/"If you're unable to receive a login code from an authentication app, you can use one of your {=backup codes}.",[h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use one of your backup codes, you can get one from your {=auth app codes}",[h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==i||b[7]!==g?(e=k.jsx("div",babelHelpers["extends"]({},i,{children:g})),b[6]=i,b[7]=g,b[8]=e):e=b[8];return e}function A(a){return a.navigation.isAccountSwitcherOpen}function B(a){var b=d("react-compiler-runtime").c(9),e=a.onClickBackupCode,f=a.onClickSmsCode;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(C),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="SMS"||a==="WHATSAPP"?h._(/*BTDS*/"If you're unable to receive a security code, use one of your {=backup codes}.",[h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:n}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==i||b[7]!==g?(e=k.jsx("div",babelHelpers["extends"]({},i,{children:g})),b[6]=i,b[7]=g,b[8]=e):e=b[8];return e}function C(a){return a.navigation.isAccountSwitcherOpen}function D(a){var b=d("react-compiler-runtime").c(10),e=a.onClickAuthAppCode,f=a.onClickBackupCode,g=a.onClickSmsCode;a=a.verificationMethod;var i=d("PolarisReactRedux.react").useSelector(E),j;b[0]!==i?(j={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&i&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=i,b[1]=j):j=b[1];b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==a?(i=a==="TOTP"?h._(/*BTDS*/"If you're unable to use a login code from an authentication app, you can get one by {=sms code} or use one of your {=backup codes}.",[h._param("=sms code",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:n})),h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):a==="SMS"?h._(/*BTDS*/"If you're unable to receive a security code by text message, you can get one from your {=auth app codes} or use one of your {=backup codes}.",[h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o})),h._param("=backup codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:m})}))]):h._(/*BTDS*/"If you're unable to use a security code from your backup codes, you can get one by {=resend it} or use one from your {=auth app codes}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:n})),h._param("=auth app codes",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:o}))]),b[2]=e,b[3]=f,b[4]=g,b[5]=a,b[6]=i):i=b[6];b[7]!==j||b[8]!==i?(e=k.jsx("div",babelHelpers["extends"]({},j,{children:i})),b[7]=j,b[8]=i,b[9]=e):e=b[9];return e}function E(a){return a.navigation.isAccountSwitcherOpen}function F(a){var b=d("react-compiler-runtime").c(7);a=a.onNewCodeClicked;var e=d("PolarisReactRedux.react").useSelector(G),f;b[0]!==e?(f={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&e&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=e,b[1]=f):f=b[1];b[2]!==a?(e=h._(/*BTDS*/"Didn't get a security code? We can {=resend it}.",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:p})}))]),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=k.jsx("div",babelHelpers["extends"]({},f,{children:e})),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}function G(a){return a.navigation.isAccountSwitcherOpen}function H(a){var b=d("react-compiler-runtime").c(13),e=a.onNewCodeClicked,f=a.onOtherMethodCodeClicked;a=a.verificationMethod;var g=d("PolarisReactRedux.react").useSelector(I),i;b[0]!==g?(i={0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&g&&d("PolarisIsLoggedIn").isLoggedIn())<<0],b[0]=g,b[1]=i):i=b[1];b[2]!==e||b[3]!==f||b[4]!==a?(g=a==="SMS"&&h._(/*BTDS*/"Didn't get a security code? We can {=resend it}. {=send WhatsApp instead}",[h._param("=resend it",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:p})})),h._param("=send WhatsApp instead",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:r})}))]),b[2]=e,b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==f||b[7]!==a?(e=a==="WHATSAPP"&&h._(/*BTDS*/"Didn't get a security code? {=send sms instead}",[h._param("=send sms instead",k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:f,children:k.jsx(c("PolarisIGCoreText").Body,{color:"ig-primary-action",children:q})}))]),b[6]=f,b[7]=a,b[8]=e):e=b[8];b[9]!==i||b[10]!==g||b[11]!==e?(f=k.jsxs("div",babelHelpers["extends"]({},i,{children:[g,e]})),b[9]=i,b[10]=g,b[11]=e,b[12]=f):f=b[12];return f}function I(a){return a.navigation.isAccountSwitcherOpen}var J="verificationCodeDescription";function K(a){switch(a){case"SMS":return 1;case"BACKUP_CODE":return 2;case"TOTP":return 3;case"WHATSAPP":return 6;default:c("vulture")("yhGvsyGQ7jRu4D6I_6RGJXqrpD8=");return 0}}e=function(a){function b(b){var d;d=a.call(this,b)||this;d.$3=function(){c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorCodeFocus()};d.$4=function(a){c("PolarisLoginQPL").isActive()&&c("PolarisLoginQPL").addPointTwoFactorSubmitButtonClick(),d.$5(a)};d.$5=function(a){a.preventDefault();a=d.state;var b=a.currentVerificationMethod,c=a.trustSignal;a=a.verificationCode;a=a.replace(/\s+/g,"");b=K(b).toString();d.props.onSubmit(c,a,b)};d.$6=function(a){a=a.target.value;if(!a.match(/^[0-9 ]*$/))return;d.setState({verificationCode:a})};d.state={currentVerificationMethod:b.totpTwoFactorOn?"TOTP":b.isInSowaExperience?"WHATSAPP":"SMS",trustSignal:b.showTrustedDevice,verificationCode:""};return d}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.componentDidMount=function(){this.$1&&this.$1.focus(),this.$2()};e.componentDidUpdate=function(){this.$2()};e.$2=function(){this.props.hasTwoFactorState||d("PolarisNavigationUtils").openURL("/")};e.$7=function(a){return this.$8(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x1atzwio")};e.$9=function(a){return this.$8(a,"x1f6kntn xd4r4e8 xdj266r x11gldyt xyorhqc x11hdunq x2b8uid x5n08af")};e.$8=function(a,b){return k.jsx("div",{className:b,children:k.jsx("p",{"aria-atomic":"true",id:l,role:"alert",size:"footnote",children:a})})};e.getSubTextIndex=function(){var a=this.state.currentVerificationMethod,b=this.props,c=b.eligibleForMultipleTotp;b=b.isInSowaExperience;switch(a){case"TOTP":return c===!0?0:1;case"BACKUP_CODE":return 2;case"WHATSAPP":return 3;case"SMS":return b?4:5}};e.render=function(){var a=this,b=this.props,e=b.errorMessage,f=b.isAccountSwitcherOpen,g=b.showTrustedDevice,j=b.smsTwoFactorOn,l=b.successMessage;b=b.totpTwoFactorOn;var m=this.state.currentVerificationMethod;j||b||i(0,51594);var n=h._(/*BTDS*/"Enter the code we sent via WhatsApp to your mobile number: {maskedPhoneNumber}.",[h._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),o=h._(/*BTDS*/"Enter the code we sent via SMS to your mobile number: {maskedPhoneNumber}.",[h._param("maskedPhoneNumber",this.props.maskedPhoneNumber)]),p=h._(/*BTDS*/"Enter the code we sent to your number ending in {lastFourDigits}.",[h._param("lastFourDigits",this.props.lastFourDigits)]);n=[x,w,y,n,o,p];return k.jsxs("div",babelHelpers["extends"]({},{0:{className:"x889kno xyri2b x1a8lsjc x1c1uobl"},1:{className:"x889kno xyri2b x18d9i69 x1c1uobl"}}[!!(this.props.style==="modal")<<0],{children:[k.jsx("div",babelHelpers["extends"]({},{0:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 xdj266r x11gldyt xod5an3 x11hdunq x2b8uid"},1:{className:"x5n08af x1lliihq x1f6kntn x1fcty0u xd4r4e8 x2b8uid xdj266r x1ys307a xod5an3 xyqm7xq"}}[!!(d("PolarisUA").isMobile()&&f&&d("PolarisIsLoggedIn").isLoggedIn())<<0],{id:J,children:n[this.getSubTextIndex()]})),k.jsxs("form",{className:"x972fbf x10w94by x1qhh985 x14e42zd x78zum5 xdt5ytf xln7xf2 xk390pu xdj266r x14z9mp xat24cr x1lziwak xexx8yu xyri2b x18d9i69 x1c1uobl x11njtxf",method:"POST",onSubmit:this.$5,children:[k.jsx(c("PolarisSlimTextInput.react"),{"aria-describedby":J,"aria-label":u,"aria-required":"true",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:{0:"xdj266r x11gldyt xzueoph x11hdunq",1:"x14vqqas x1ys307a x1hq5gj4 xyqm7xq"}[!!(d("PolarisUA").isMobile()&&f&&d("PolarisIsLoggedIn").isLoggedIn())<<0],"data-testid":void 0,maxLength:8,name:"verificationCode",onChange:this.$6,onFocus:this.$3,placeholder:u,ref:function(b){return a.$1=b},type:"tel",value:this.state.verificationCode}),this.props.style==="default"&&k.jsx(c("IGDSBox.react"),{marginBottom:4,marginEnd:10,marginStart:10,marginTop:1,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$4,children:v})}),e!=null&&e!==""&&this.$7(e),l!=null&&l!==""&&this.$9(l),g?k.jsx(c("IGDSBox.react"),{marginBottom:6,marginEnd:10,marginStart:10,marginTop:2,position:"relative",children:k.jsx(c("IGDSCheckbox.react"),{isChecked:this.state.trustSignal,onChange:function(){var b=a.state.trustSignal;a.setState({trustSignal:!b})},size:16,children:k.jsxs(c("IGDSBox.react"),{direction:"column",display:"flex",position:"relative",children:[k.jsx(c("IGDSText.react"),{size:"footnote",weight:"semibold",children:s}),k.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:k.jsx(c("IGDSText.react"),{size:"footnote",children:t})})]})})}):null,b&&j&&k.jsx(D,{onClickAuthAppCode:function(){a.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:m}),b&&!j&&k.jsx(z,{onClickAuthAppCode:function(){a.setState({currentVerificationMethod:"TOTP"})},onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},verificationMethod:m}),!b&&m==="WHATSAPP"&&k.jsx(H,{onOtherMethodCodeClicked:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:"WHATSAPP"}),!b&&m==="SMS"&&this.props.isInSowaExperience&&k.jsx(H,{onNewCodeClicked:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},onOtherMethodCodeClicked:function(b){a.props.onNewWhatsappCodeClicked(b),a.setState({currentVerificationMethod:"WHATSAPP"})},verificationMethod:"SMS"}),!b&&m==="SMS"&&!this.props.isInSowaExperience&&k.jsx(F,{onNewCodeClicked:this.props.onNewCodeClicked}),!b&&k.jsx(B,{onClickBackupCode:function(){a.setState({currentVerificationMethod:"BACKUP_CODE"})},onClickSmsCode:function(b){a.props.onNewCodeClicked(b),a.setState({currentVerificationMethod:"SMS"})},verificationMethod:m}),this.props.style==="modal"&&(d("PolarisUA").isMobile()?k.jsx(c("IGDSBox.react"),{marginBottom:8,marginEnd:4,marginStart:3,marginTop:3,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{loading:this.props.requestInFlight,onClick:this.$5,children:d("PolarisAuthStrings").CONTINUE})}):k.jsx(c("IGDSBox.react"),{marginTop:5,position:"relative",width:"100%",children:k.jsx(c("IGDSDialogFooter.react"),{endAdornment:k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,loading:this.props.requestInFlight,onClick:this.$5,children:d("PolarisAuthStrings").CONTINUE}),startAdornment:this.props.onBackClick!=null?k.jsx(c("IGDSBox.react"),{alignItems:"start",justifyContent:"center",paddingX:3,position:"relative",children:k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:this.props.onBackClick,children:d("PolarisGenericStrings").BACK_TEXT})}):null})}))]})]}))};return b}(k.Component);e.defaultProps={style:"default"};function a(a,b){var c,d=a.twoFactor,e=d==null?void 0:d.message;return{eligibleForMultipleTotp:(d==null?void 0:d.eligibleForMultipleTotp)||!1,errorMessage:e&&e.isError&&e.text||((c=b.errorMessage)!=null?c:null),hasTwoFactorState:!!d,isAccountSwitcherOpen:a.navigation.isAccountSwitcherOpen,isInSowaExperience:(d==null?void 0:d.isInSowaExperience)||!1,lastFourDigits:d==null?void 0:d.lastFourDigits,maskedPhoneNumber:d==null?void 0:d.maskedPhoneNumber,requestInFlight:(d==null?void 0:d.requestInFlight)||b.requestInFlight,showTrustedDevice:(d==null?void 0:d.showTrustedDevice)||!1,smsTwoFactorOn:(d==null?void 0:d.smsTwoFactorOn)||!1,successMessage:e&&!e.isError?e.text:"",totpTwoFactorOn:(d==null?void 0:d.totpTwoFactorOn)||!1}}function b(a,b){return{onNewCodeClicked:function(b){a(d("PolarisTwoFactorActions").requestSMSCode())},onNewWhatsappCodeClicked:function(b){a(d("PolarisTwoFactorActions").requestWhatsappCode())},onSubmit:function(c,e,f){a(d("PolarisTwoFactorActions").submitVerificationCode(b.pageIdentifier,c,e,f,(c=b.isPrivacyPortalReq)!=null?c:!1))}}}f=d("PolarisReactRedux.react").connect(a,b)(e);g["default"]=f}),226);
__d("XPolarisLoginControllerParamsRefineValidator",["coerceRouteParams","refine"],(function(a,b,c,d,e,f,g){e=(b=d("refine")).or(b.literal(null),b.string());f=b.object({dyi_job_id:e,e_un:e,enable_fb_login:b.bool(),flo:b.bool(),force_authentication:b.bool(),force_login_igid:e,hl:e,is_from_rle:b.bool(),logged_out_reporting_url:e,mtn:b.bool(),next:e,platform_app_id:e,request_id:e,source:e,target_user_id:e});var h=b.coercion(f),i=Object.freeze({force_authentication:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},target_user_id:{legacyNames:[],"default":null,coercibleType:"STRING"},force_login_igid:{legacyNames:[],"default":null,coercibleType:"STRING"},platform_app_id:{legacyNames:[],"default":null,coercibleType:"STRING"},logged_out_reporting_url:{legacyNames:[],"default":null,coercibleType:"STRING"},next:{legacyNames:[],"default":null,coercibleType:"STRING"},dyi_job_id:{legacyNames:[],"default":null,coercibleType:"STRING"},source:{legacyNames:[],"default":null,coercibleType:"STRING"},hl:{legacyNames:[],"default":null,coercibleType:"STRING"},e_un:{legacyNames:[],"default":null,coercibleType:"STRING"},enable_fb_login:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},request_id:{legacyNames:[],"default":null,coercibleType:"STRING"},is_from_rle:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},mtn:{legacyNames:[],"default":!1,coercibleType:"EXISTS"},flo:{legacyNames:[],"default":!1,coercibleType:"BOOL"}});function a(a){return h(c("coerceRouteParams")(a,i))}g.refineXPolarisLoginControllerParams=a}),98);
__d("PolarisAuthFormCard.react",["fbt","invariant","ix","CometRouteParams","FBLogger","IGCoreImage.react","IGDSBox.react","IGDSDivider.react","IGDSSpinner.react","IGDSText.react","IGDSTextVariants.react","InstagramQueryParamsHelper","PolarisAppsellUnit.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisAuthTypeSwitcher.react","PolarisBarcelonaAppSVGIcon.react","PolarisConfig","PolarisConsentModal.react","PolarisExternalLink.react","PolarisFBConnectActions","PolarisFBConnectHelpers","PolarisFacebookAccountPicker.react","PolarisFacebookLoginForm.react","PolarisIsLoggedIn","PolarisLandingForm.react","PolarisLoggedOutContentWallDialogAuthCTAs.react","PolarisLoggedOutCtaClickLogger","PolarisLoggedOutCtaImpressionLogger","PolarisLoggedOutNetzDGReportLink.react","PolarisLoggedOutUpsellStrings","PolarisLoginActionClearStopDeletionNonce","PolarisLoginActionLogin","PolarisLoginActionLoginWithFBAccessToken","PolarisLoginActionLoginWithFBJSSDK","PolarisLoginLogger","PolarisLoginQPL","PolarisOneTapLogin","PolarisOneTapLoginForm.react","PolarisOneTapLoginStorage","PolarisQueryParams","PolarisReactRedux.react","PolarisSenderNameHelpers","PolarisSignupForm.react","PolarisSignupTypes","PolarisSlimLoginForm.react","PolarisStrategicWebTraffic","PolarisTwoFactorForm.react","PolarisUA","PolarisUserAvatar.react","URI","XPolarisLoginControllerParamsRefineValidator","nullthrows","polarisIsEligibleForFacebookLogin","polarisUserSelectors","react","react-compiler-runtime","stylex","usePolarisCentralizedUpsellState","usePolarisLOXBrandForwardDeeplinkLogoUpsell","usePolarisLOXHomePageBrandForwardButtonSwitchUpsell","usePolarisPageID","usePrevious","useSinglePartialViewImpression","warning"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n=m||(m=d("react")),o=m.useEffect,p=h._(/*BTDS*/"Continue without login."),q=h._(/*BTDS*/"Your password has been reset. Please try logging in again."),r=h._(/*BTDS*/"Log in to follow people on Instagram."),s=h._(/*BTDS*/"Two factor authentication lock icon"),t={mobileBrandingForwardPadding:{paddingTop:"xexx8yu",$$css:!0},mobileBrandPadding:{paddingTop:"xnk5j39",$$css:!0},mobileFooterPadding:{paddingBottom:"xefzj8c",$$css:!0},root:{color:"x5n08af",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k x7qam4e",marginTop:"x14vqqas x15lw1kp",maxWidth:"x1dc814f x1owpceq",width:"xh8yej3",$$css:!0},rootModal:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",maxWidth:"x1319t99",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(66),e=a.authTypeOverride,f=a.dialogSource,g=a.forceLoginIgId,h=a.forceLoginProfilePicUrl,j=a.forceLoginUsername,l=a.fromLoggedOutDialog,m=a.hideAppUpsells,p=a.hideBorder,q=a.hideForgotPassword,r=a.intentSource,s=a.isPrivacyPortalReq,v=a.pageIdentifier,w=a.pageType,x=a.showNetzDGReportLink,y=a.style,z=a.useMobileBrandPadding,A=a.useMobileFooterPadding,B=a.usernameHint;a=a.xstyle;l=l===void 0?!1:l;m=m===void 0?!1:m;q=q===void 0?!1:q;s=s===void 0?!1:s;x=x===void 0?!1:x;y=y===void 0?"default":y;z=z===void 0?!0:z;A=A===void 0?!0:A;var C=c("usePolarisPageID")();v=v!=null?v:C;C=d("PolarisReactRedux.react").useSelector(u);C=C.auth;C=C.authType;var D=e!=null?e:C;D!=null||i(0,51551);e=c("usePolarisLOXHomePageBrandForwardButtonSwitchUpsell")();C=e.isBrandForwardButtonSwitchUpsell;e=c("usePolarisLOXBrandForwardDeeplinkLogoUpsell")();e=e.isBrandForwardDeeplinkLogoUpsell;C=C||e;var E=c("usePrevious")(D),F;b[0]!==D||b[1]!==E?(e=function(){!c("PolarisLoginQPL").isActive()&&E!==d("PolarisAuthActionConstants").AUTH.login&&D===d("PolarisAuthActionConstants").AUTH.login&&c("PolarisLoginQPL").start()},F=[E,D],b[0]=D,b[1]=E,b[2]=e,b[3]=F):(e=b[2],F=b[3]);o(e,F);var G=d("PolarisReactRedux.react").useStore();b[4]!==D||b[5]!==G?(e=function(){if(D===d("PolarisAuthActionConstants").AUTH.login||D===d("PolarisAuthActionConstants").AUTH.twoFactor)return function(){var a=G.getState().auth.authType===d("PolarisAuthActionConstants").AUTH.twoFactor;c("PolarisLoginQPL").isActive()&&!a&&c("PolarisLoginQPL").endCancel()}},F=[D,G],b[4]=D,b[5]=G,b[6]=e,b[7]=F):(e=b[6],F=b[7]);o(e,F);if(b[8]!==D||b[9]!==C||b[10]!==y||b[11]!==z||b[12]!==A||b[13]!==a){b[15]!==D||b[16]!==C||b[17]!==z?(e=d("PolarisUA").isMobile()&&D===d("PolarisAuthActionConstants").AUTH.none&&z&&(C?t.mobileBrandingForwardPadding:t.mobileBrandPadding),b[15]=D,b[16]=C,b[17]=z,b[18]=e):e=b[18];F=(k||(k=c("stylex"))).props(t.root,y==="modal"&&t.rootModal,d("PolarisUA").isMobile()&&!!A&&t.mobileFooterPadding,e,a);b[8]=D;b[9]=C;b[10]=y;b[11]=z;b[12]=A;b[13]=a;b[14]=F}else F=b[14];b[19]!==p||b[20]!==y?(e={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},2:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},3:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu x1n2onr6 x11njtxf x7r02ix xdj266r x14z9mp xat24cr x1lziwak xyri2b x18d9i69 x1c1uobl xz9dl7a xh8yej3 x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"}}[!!(y==="modal")<<1|!!(p===!0)<<0],b[19]=p,b[20]=y,b[21]=e):e=b[21];b[22]!==D||b[23]!==v||b[24]!==C?(z=!C&&n.jsx(W,{authType:D,pageID:v}),b[22]=D,b[23]=v,b[24]=C,b[25]=z):z=b[25];b[26]!==D||b[27]!==f||b[28]!==g||b[29]!==h||b[30]!==j||b[31]!==l||b[32]!==q||b[33]!==r||b[34]!==s||b[35]!==v||b[36]!==w||b[37]!==y||b[38]!==B?(A=n.jsx(L,{authType:D,dialogSource:f,forceLoginIgId:g,forceLoginProfilePicUrl:h,forceLoginUsername:j,fromLoggedOutDialog:l,hideForgotPassword:q,intentSource:r,isPrivacyPortalReq:s,pageID:v,pageType:w,style:y,usernameHint:B}),b[26]=D,b[27]=f,b[28]=g,b[29]=h,b[30]=j,b[31]=l,b[32]=q,b[33]=r,b[34]=s,b[35]=v,b[36]=w,b[37]=y,b[38]=B,b[39]=A):A=b[39];b[40]!==D||b[41]!==A?(a=n.jsx(J,{authType:D,children:A}),b[40]=D,b[41]=A,b[42]=a):a=b[42];b[43]!==v||b[44]!==x?(C=n.jsx(ca,{pageID:v,showNetzDGReportLink:x}),b[43]=v,b[44]=x,b[45]=C):C=b[45];b[46]===Symbol["for"]("react.memo_cache_sentinel")?(f=n.jsx(da,{}),b[46]=f):f=b[46];b[47]!==e||b[48]!==z||b[49]!==a||b[50]!==C?(h=n.jsxs("div",babelHelpers["extends"]({},e,{"data-testid":void 0,children:[z,a,C,f]})),b[47]=e,b[48]=z,b[49]=a,b[50]=C,b[51]=h):h=b[51];b[52]===Symbol["for"]("react.memo_cache_sentinel")?(j=n.jsx(c("PolarisConsentModal.react"),{}),b[52]=j):j=b[52];b[53]!==D||b[54]!==g||b[55]!==l||b[56]!==m||b[57]!==p||b[58]!==v||b[59]!==w||b[60]!==y?(q=n.jsx(ea,{authType:D,forceLoginIgId:g,fromLoggedOutDialog:l,hideAppUpsells:m,hideBorder:p,pageId:v,pageType:w,style:y}),b[53]=D,b[54]=g,b[55]=l,b[56]=m,b[57]=p,b[58]=v,b[59]=w,b[60]=y,b[61]=q):q=b[61];b[62]!==F||b[63]!==h||b[64]!==q?(r=n.jsxs("div",babelHelpers["extends"]({},F,{children:[h,j,q]})),b[62]=F,b[63]=h,b[64]=q,b[65]=r):r=b[65];return r}function u(a){return a}function v(a,b,e){var f=d("react-compiler-runtime").c(4),g;f[0]!==a||f[1]!==b||f[2]!==e?(g={onImpressionStart:function(){a||d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("auth_form",e,{},b!=null?b:void 0)}},f[0]=a,f[1]=b,f[2]=e,f[3]=g):g=f[3];return c("useSinglePartialViewImpression")(g)}function w(a){var b=c("usePolarisCentralizedUpsellState")();b=b[0];b=b.isProfileOrPostPage;return a===d("PolarisAuthActionConstants").AUTH.signup&&b}function x(a){var b=d("react-compiler-runtime").c(4),e=d("PolarisReactRedux.react").useSelector(y);e=e.auth;e=e.signup;var f=c("usePolarisCentralizedUpsellState")();f=f[0];f=f.isProfileOrPostPage;var g;b[0]!==a||b[1]!==f||b[2]!==(e==null?void 0:e.step)?(g=!d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isDesktop()&&f&&(a===d("PolarisAuthActionConstants").AUTH.signup?(e==null?void 0:e.step)===d("PolarisSignupTypes").STEP.base:!0),b[0]=a,b[1]=f,b[2]=e==null?void 0:e.step,b[3]=g):g=b[3];return g}function y(a){return a}function z(){var a=d("react-compiler-runtime").c(6),b=d("PolarisReactRedux.react").useSelector(A);b=b.fb;var c=b.authResponse,e=b.igProfile,f=b.igProfiles;b=b.igSSODisabled;if(e==null)return null;c=c==null?void 0:c.userID;var g;a[0]!==e.profilePictureUrl||a[1]!==e.username||a[2]!==f||a[3]!==b||a[4]!==c?(g={fbUserID:c,igSSODisabled:b,linkedIGProfiles:f,profilePictureUrl:e.profilePictureUrl,username:e.username},a[0]=e.profilePictureUrl,a[1]=e.username,a[2]=f,a[3]=b,a[4]=c,a[5]=g):g=a[5];return g}function A(a){return a}function B(){var a,b,c=d("PolarisReactRedux.react").useSelector(C);c=c.auth;var e=c.login;c=c.twoFactor;if((e==null?void 0:e.errorMessage)!=null)return e.errorMessage;return(c==null||(a=c.message)==null?void 0:a.isError)===!0&&(c==null||(b=c.message)==null?void 0:b.text)!=null?c.message.text:null}function C(a){return a}function D(){var a=d("PolarisReactRedux.react").useSelector(E);a=a.auth;var b=a.login,c=a.signup;a=a.twoFactor;return(c=(b=(b=b==null?void 0:b.requestInFlight)!=null?b:c==null?void 0:c.requestInFlight)!=null?b:a==null?void 0:a.requestInFlight)!=null?c:!1}function E(a){return a}function F(){var a=d("react-compiler-runtime").c(2),b=d("PolarisReactRedux.react").useDispatch(),c;a[0]!==b?(c=function(a){b(d("PolarisAuthActions").switchAuthType(a))},a[0]=b,a[1]=c):c=a[1];return c}function G(){var a=d("react-compiler-runtime").c(2),b=d("PolarisReactRedux.react").useSelector(I);b=b.auth;b=b.next;var e;if(a[0]!==b){e=Symbol["for"]("react.early_return_sentinel");bb0:{var f=new(l||(l=c("URI")))(b),g=f.getPath(),h=f.getDomain();if(h===""&&g==="/oauth/authorize"){h=f.getQueryData();f=(g=h.scope)==null?void 0:g.split(",");e=(f==null?void 0:f.every(H))===!0;break bb0}}a[0]=b;a[1]=e}else e=a[1];return e!==Symbol["for"]("react.early_return_sentinel")?e:!1}function H(a){return a.startsWith("threads_")}function I(a){return a}function J(a){var b=d("react-compiler-runtime").c(1),e=a.authType;a=a.children;var f=d("PolarisReactRedux.react").useSelector(K);f=f.auth;f=f.isFBLoggedIn;if((e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&f==null){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=n.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",minHeight:160,position:"relative",children:n.jsx(c("IGDSSpinner.react"),{size:"small"})}),b[0]=e):e=b[0];return e}return a}function K(a){return a}function L(a){var b=d("react-compiler-runtime").c(30),e=a.authType,f=a.dialogSource,g=a.forceLoginIgId,h=a.forceLoginProfilePicUrl,i=a.forceLoginUsername,j=a.fromLoggedOutDialog,k=a.hideForgotPassword,l=a.intentSource,m=a.isPrivacyPortalReq,o=a.pageID,p=a.pageType,q=a.style;a=a.usernameHint;m=m===void 0?!1:m;var r=d("PolarisReactRedux.react").useSelector(M);r=r.auth;r=r.isFBLoggedIn;var s=z(),t=G(),u=g!=null;r=(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&r===!0&&!!s;if(e===d("PolarisAuthActionConstants").AUTH.signup&&!d("PolarisUA").isMobile()){var v;b[0]!==e||b[1]!==j||b[2]!==l||b[3]!==o||b[4]!==q?(v=n.jsx(N,{authType:e,fromLoggedOutDialog:j,intentSource:l,pageID:o,style:q}),b[0]=e,b[1]=j,b[2]=l,b[3]=o,b[4]=q,b[5]=v):v=b[5];return v}else if(e===d("PolarisAuthActionConstants").AUTH.twoFactor){b[6]!==m||b[7]!==o||b[8]!==q?(v=n.jsx(O,{isPrivacyPortalReq:m,pageID:o,style:q}),b[6]=m,b[7]=o,b[8]=q,b[9]=v):v=b[9];return v}else if(!u&&r&&!t&&(s==null?void 0:s.igSSODisabled)!==!0){b[10]!==e||b[11]!==o||b[12]!==p?(v=n.jsx(P,{authType:e,pageID:o,pageType:p}),b[10]=e,b[11]=o,b[12]=p,b[13]=v):v=b[13];return v}else if(!u&&d("PolarisOneTapLogin").isOneTapLoginEligible()&&e===d("PolarisAuthActionConstants").AUTH.oneTapLogin){b[14]!==e?(r=n.jsx(S,{authType:e}),b[14]=e,b[15]=r):r=b[15];return r}else if(d("PolarisUA").isMobile()&&e===d("PolarisAuthActionConstants").AUTH.none){b[16]!==o?(t=n.jsx(T,{pageID:o}),b[16]=o,b[17]=t):t=b[17];return t}c("warning")(e===d("PolarisAuthActionConstants").AUTH.login||e===d("PolarisAuthActionConstants").AUTH.oneTapLogin||e===d("PolarisAuthActionConstants").AUTH.multiStepSignup,'Expected authType to be "login or oneTapLogin"; got "%s"',e);b[18]!==f||b[19]!==g||b[20]!==h||b[21]!==i||b[22]!==j||b[23]!==k||b[24]!==l||b[25]!==m||b[26]!==o||b[27]!==q||b[28]!==a?(s=n.jsx(U,{dialogSource:f,forceLoginIgId:g,forceLoginProfilePicUrl:h,forceLoginUsername:i,fromLoggedOutDialog:j,hideForgotPassword:k,intentSource:l,isPrivacyPortalReq:m,pageID:o,style:q,usernameHint:a}),b[18]=f,b[19]=g,b[20]=h,b[21]=i,b[22]=j,b[23]=k,b[24]=l,b[25]=m,b[26]=o,b[27]=q,b[28]=a,b[29]=s):s=b[29];return s}function M(a){return a}function N(a){var b=d("react-compiler-runtime").c(9),e=a.authType,f=a.fromLoggedOutDialog,g=a.intentSource,h=a.pageID;a=a.style;f=v(f,g,h);g=D();e=w(e);var i=c("usePolarisCentralizedUpsellState")();i=i[0];i=i.isProfileOrPostPage;if(e){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=n.jsx(c("PolarisLoggedOutContentWallDialogAuthCTAs.react"),{}),b[0]=e):e=b[0];return e}b[1]!==i||b[2]!==h||b[3]!==g||b[4]!==a?(e=n.jsx(c("PolarisSignupForm.react"),{hideHeader:i,pageIdentifier:h,requestInFlight:g,style:a}),b[1]=i,b[2]=h,b[3]=g,b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(i=n.jsx("div",{ref:f,children:e}),b[6]=f,b[7]=e,b[8]=i):i=b[8];return i}function O(a){var b=d("react-compiler-runtime").c(6),e=a.isPrivacyPortalReq,f=a.pageID;a=a.style;e=e===void 0?!1:e;var g=B(),h=D();g=g||"";var i;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==a||b[4]!==g?(i=n.jsx(c("PolarisTwoFactorForm.react"),{errorMessage:g,isPrivacyPortalReq:e,pageIdentifier:f,requestInFlight:h,style:a}),b[0]=e,b[1]=f,b[2]=h,b[3]=a,b[4]=g,b[5]=i):i=b[5];return i}function P(a){var b=d("react-compiler-runtime").c(36),e=a.authType,f=a.pageID;a=a.pageType;var g=d("PolarisReactRedux.react").useSelector(R),h=g.auth;g=g.fb;var i=h.login,j=g.status,k=d("PolarisReactRedux.react").useDispatch();h=z();g=B();var l=F(),m=D(),o=x(e);if(b[0]!==(h==null?void 0:h.linkedIGProfiles)){var p;p=(p=h==null?void 0:h.linkedIGProfiles)!=null?p:[];b[0]=h==null?void 0:h.linkedIGProfiles;b[1]=p}else p=b[1];p=p;var q;b[2]!==k||b[3]!==f?(q=function(a){a!=null?(d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("login_with_fb","auth_form",f),k(d("PolarisLoginActionLoginWithFBJSSDK").loginWithFBJSSDK({pageID:f,source:f},a))):(d("PolarisLoggedOutCtaClickLogger").logLoggedOutCtaClickEvent("fb_connect","auth_form",f),d("PolarisFBConnectHelpers").redirectToFBOAuth("/",f)["catch"](Q))},b[2]=k,b[3]=f,b[4]=q):q=b[4];q=q;var r;b[5]!==h?(r=!!h&&d("PolarisFBConnectHelpers").isFBCUnique(h.username),b[5]=h,b[6]=r):r=b[6];r=r;var s=p.length<=1,t=d("PolarisQueryParams").getShouldRefreshFBCookie();if(d("PolarisOneTapLogin").isOneTapLoginEligible()&&e!==d("PolarisAuthActionConstants").AUTH.fbAccountPicker&&(!t||s)){b[7]!==r?(e=d("PolarisOneTapLoginStorage").getLoginNonces(),t=Object.values(e).length>=1||r,b[7]=r,b[8]=e,b[9]=t):(e=b[8],t=b[9]);if(t){t=r&&s?h:null;s=r&&s?q:void 0;o=!o;var u;b[10]!==e||b[11]!==t||b[12]!==s||b[13]!==o?(u=n.jsx(c("PolarisOneTapLoginForm.react"),{fbConnectedUser:t,loginNonces:e,onRequestFBLogin:s,showSingleAccountProfilePicture:o}),b[10]=e,b[11]=t,b[12]=s,b[13]=o,b[14]=u):u=b[14];return u}}else if(p.length>1&&r){b[15]!==(i==null?void 0:i.deletionNonce)||b[16]!==k||b[17]!==f?(e=function(a){k(d("PolarisLoginActionLoginWithFBAccessToken").loginWithFBAccessToken({pageID:f,skipped:!1,source:"fbSignupPage"},a,i==null?void 0:i.deletionNonce))},b[15]=i==null?void 0:i.deletionNonce,b[16]=k,b[17]=f,b[18]=e):e=b[18];t=e;b[19]!==p||b[20]!==t?(s=n.jsx(c("PolarisFacebookAccountPicker.react"),{fbConnectedIgProfiles:p,onRequestFBLogin:t}),b[19]=p,b[20]=t,b[21]=s):s=b[21];return s}b[22]!==j||b[23]!==l?(o=function(a){d("PolarisLoginLogger").logLoginEvent({event_name:"fb_switch_accounts_click",fbconnect_status:j}),l(a)},b[22]=j,b[23]=l,b[24]=o):o=b[24];u=o;b[25]!==h?(r=c("nullthrows")(h),b[25]=h,b[26]=r):r=b[26];e=a!=null?a:void 0;b[27]!==j||b[28]!==u||b[29]!==g||b[30]!==q||b[31]!==f||b[32]!==m||b[33]!==r||b[34]!==e?(p=n.jsx(c("PolarisFacebookLoginForm.react"),{accountInfo:r,errorMessage:g,fbConnectStatus:j,onRequestLogin:q,onSwitchAccountsClick:u,pageID:f,pageType:e,requestInFlight:m}),b[27]=j,b[28]=u,b[29]=g,b[30]=q,b[31]=f,b[32]=m,b[33]=r,b[34]=e,b[35]=p):p=b[35];return p}function Q(a){return c("FBLogger")("ig_web").catching(a).mustfix("unexpected")}function R(a){return a}function S(a){var b=d("react-compiler-runtime").c(3);a=a.authType;a=x(a);var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisOneTapLoginStorage").getLoginNonces(),b[0]=e):e=b[0];a=!a;b[1]!==a?(e=n.jsx(c("PolarisOneTapLoginForm.react"),{loginNonces:e,showSingleAccountProfilePicture:a}),b[1]=a,b[2]=e):e=b[2];return e}function T(a){var b=d("react-compiler-runtime").c(4),e=a.pageID;b[0]!==e?(a={onImpressionStart:function(){d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("full_page",e)}},b[0]=e,b[1]=a):a=b[1];a=c("useSinglePartialViewImpression")(a);var f;b[2]!==a?(f=n.jsx(c("PolarisLandingForm.react"),{ref:a}),b[2]=a,b[3]=f):f=b[3];return f}function U(a){var b=d("react-compiler-runtime").c(47),e=a.dialogSource,f=a.forceLoginIgId,g=a.forceLoginProfilePicUrl,h=a.forceLoginUsername,i=a.fromLoggedOutDialog,j=a.hideForgotPassword,k=a.intentSource,l=a.isPrivacyPortalReq,m=a.pageID,o=a.style;a=a.usernameHint;var p=l===void 0?!1:l;l=d("PolarisReactRedux.react").useSelector(V);var s=l.auth;l=l.fb;var t=s.isFBLoggedIn,u=s.login;s=s.next;l=l.status;var w=d("PolarisReactRedux.react").useDispatch(),x=F();k=v(i,k,m);var y=G(),A=z(),C=u&&u.source==="follow"?r:"",E=B(),H=D(),I=u&&u.wasPasswordJustReset?q:"",J;b[0]!==w||b[1]!==i||b[2]!==p||b[3]!==m?(J=function(a,b,c){w(d("PolarisLoginActionLogin").login(a,b,{source:m},c,!1,null,i,p))},b[0]=w,b[1]=i,b[2]=p,b[3]=m,b[4]=J):J=b[4];J=J;var K;b[5]!==w?(K=function(a){w(d("PolarisFBConnectActions").setShowSSODisabledModal(a))},b[5]=w,b[6]=K):K=b[6];var L=K;b[7]!==w||b[8]!==i||b[9]!==m?(K=function(a,b,c,e){w(d("PolarisLoginActionLogin").login(a,b,{source:m},c,!1,e,i))},b[7]=w,b[8]=i,b[9]=m,b[10]=K):K=b[10];K=K;var M;b[11]!==w?(M=function(){w(d("PolarisLoginActionClearStopDeletionNonce").clearStopDeletionNonce())},b[11]=w,b[12]=M):M=b[12];M=M;var N;b[13]!==(A==null?void 0:A.igSSODisabled)||b[14]!==(A==null?void 0:A.linkedIGProfiles)||b[15]!==(A==null?void 0:A.username)||b[16]!==L||b[17]!==x?(N=function(){var a;a=(a=A==null?void 0:A.linkedIGProfiles)!=null?a:[];(A==null?void 0:A.igSSODisabled)===!0?(x(d("PolarisAuthActionConstants").AUTH.login),L(A==null?void 0:A.username)):a.length>1?x(d("PolarisAuthActionConstants").AUTH.fbAccountPicker):x(d("PolarisAuthActionConstants").AUTH.fbLogin)},b[13]=A==null?void 0:A.igSSODisabled,b[14]=A==null?void 0:A.linkedIGProfiles,b[15]=A==null?void 0:A.username,b[16]=L,b[17]=x,b[18]=N):N=b[18];N=N;var O;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(O={className:"xod5an3 x1dc814f xh8yej3"},b[19]=O):O=b[19];t=!!t;var P=(A==null?void 0:A.igSSODisabled)===!0,Q=u==null?void 0:u.deletionDate;u=u==null?void 0:u.deletionNonce;a=a!=null?a:void 0;var R;b[20]!==e||b[21]!==l||b[22]!==f||b[23]!==g||b[24]!==h||b[25]!==i||b[26]!==N||b[27]!==j||b[28]!==C||b[29]!==y||b[30]!==E||b[31]!==s||b[32]!==M||b[33]!==J||b[34]!==K||b[35]!==H||b[36]!==o||b[37]!==I||b[38]!==t||b[39]!==P||b[40]!==Q||b[41]!==u||b[42]!==a?(R=n.jsx(c("PolarisSlimLoginForm.react"),{dialogSource:e,errorMessage:E,fbConnectStatus:l,forceLoginIgId:f,forceLoginProfilePicUrl:g,forceLoginUsername:h,fromLoggedOutDialog:i,hideFBLogin:!c("polarisIsEligibleForFacebookLogin")(),hideForgotPassword:j,infoMessage:C,isFBLoggedIn:t,isIGSSODisabled:P,isThreadsRequest:y,nextUrl:s,onClearStopDeletionNonce:M,onLoginWithFBClick:N,onStopAccountDeletion:K,onSubmit:J,requestInFlight:H,stopDeletionDate:Q,stopDeletionNonce:u,style:o,successMessage:I,usernameHint:a}),b[20]=e,b[21]=l,b[22]=f,b[23]=g,b[24]=h,b[25]=i,b[26]=N,b[27]=j,b[28]=C,b[29]=y,b[30]=E,b[31]=s,b[32]=M,b[33]=J,b[34]=K,b[35]=H,b[36]=o,b[37]=I,b[38]=t,b[39]=P,b[40]=Q,b[41]=u,b[42]=a,b[43]=R):R=b[43];b[44]!==k||b[45]!==R?(e=n.jsx("div",babelHelpers["extends"]({},O,{ref:k,children:R})),b[44]=k,b[45]=R,b[46]=e):e=b[46];return e}function V(a){return a}function W(a){var b=d("react-compiler-runtime").c(8),e=a.authType;a=a.pageID;var f=d("PolarisReactRedux.react").useSelector(X);f=f.auth;f=f.signup;var g=x(e),h=c("usePolarisCentralizedUpsellState")();h=h[0];var i=h.isProfileOrPostPage,j=h.lastViewedOwnerID;b[0]!==i||b[1]!==j?(h=function(a){return i&&j!=null?(a=d("polarisUserSelectors").maybeGetUserById(a,j))!=null?a:{}:{}},b[0]=i,b[1]=j,b[2]=h):h=b[2];h=d("PolarisReactRedux.react").useSelector(h);f=!g&&d("PolarisUA").isDesktop()&&e===d("PolarisAuthActionConstants").AUTH.signup?(f==null?void 0:f.step)===d("PolarisSignupTypes").STEP.base:!0;if(g&&(h==null?void 0:h.username)!=null){b[3]!==a||b[4]!==h?(g=n.jsx(aa,{pageID:a,user:h}),b[3]=a,b[4]=h,b[5]=g):g=b[5];return g}else if(f){b[6]!==e?(a=n.jsx(Y,{authType:e}),b[6]=e,b[7]=a):a=b[7];return a}return null}function X(a){return a}function Y(a){var b=d("react-compiler-runtime").c(3);a=a.authType;var e=G(),f;b[0]!==a||b[1]!==e?(f=n.jsx(c("IGDSBox.react"),{marginBottom:3,marginTop:9,position:"relative",children:e?n.jsx(c("PolarisBarcelonaAppSVGIcon.react"),{fill:"var(--barcelona-logo)",size:34}):a===d("PolarisAuthActionConstants").AUTH.twoFactor?n.jsx(c("IGCoreImage.react"),{alt:s,src:{light:j("222729")}}):n.jsx(c("IGCoreImage.react"),{alt:h._(/*BTDS*/"Instagram"),src:{dark:j("222731"),light:j("222730")}})}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}var Z={container:{borderTopColor:"x1yhmmig",borderInlineEndColor:"xpcrz0c",borderBottomColor:"xyb01ml",borderInlineStartColor:"x1vpptxl",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"xmn4e3e",borderInlineEndWidth:"x1if355w",borderBottomWidth:"x2x41l1",borderInlineStartWidth:"xct1zlm",position:"x1n2onr6",$$css:!0}};function aa(a){var b,e=d("react-compiler-runtime").c(15),f=a.pageID;a=a.user;var g=a.fullName,h=a.profilePictureUrl;a=a.username;a=c("nullthrows")(a);var i=d("PolarisReactRedux.react").useSelector(ba);i=i.sharerInformation;f=d("PolarisSenderNameHelpers").shouldShowSenderName(f);b=i!=null&&f?d("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText((b=i.fullName)!=null?b:i.username):d("PolarisLoggedOutUpsellStrings").seePhotosFromFullNameBodyText(g!=null?g:a);g=i!=null&&f?d("PolarisLoggedOutUpsellStrings").joinSharerHeaderText((g=i.fullName)!=null?g:i.username):d("PolarisLoggedOutUpsellStrings").getSeeMoreFrom(a);f=i!=null&&f?(f=i.profilePicUrl)!=null?f:h:h;var j;e[0]!==b||e[1]!==g||e[2]!==f?(j={body:b,header:g,sharerProfilePictureUrl:f},e[0]=b,e[1]=g,e[2]=f,e[3]=j):j=e[3];b=j;g=b.body;f=b.header;j=b.sharerProfilePictureUrl;b=j!=null?j:h;h=(j=i==null?void 0:i.username)!=null?j:a;e[4]!==b||e[5]!==h?(i=n.jsx(c("IGDSBox.react"),{height:104,justifyContent:"center",marginBottom:4,marginTop:8,shape:"circle",width:104,xstyle:Z.container,children:n.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:b,size:96,username:h})}),e[4]=b,e[5]=h,e[6]=i):i=e[6];e[7]!==f?(j=n.jsx(c("IGDSBox.react"),{marginBottom:5,width:"100%",children:n.jsx(c("IGDSText.react"),{color:"primaryText",size:"title",textAlign:"center",weight:"semibold",children:f})}),e[7]=f,e[8]=j):j=e[8];e[9]!==g?(a=n.jsx(c("IGDSBox.react"),{paddingX:10,children:n.jsx(d("IGDSTextVariants.react").IGDSTextBody,{textAlign:"center",children:g})}),e[9]=g,e[10]=a):a=e[10];e[11]!==i||e[12]!==j||e[13]!==a?(b=n.jsxs(c("IGDSBox.react"),{alignItems:"center",marginBottom:4,children:[i,j,a]}),e[11]=i,e[12]=j,e[13]=a,e[14]=b):b=e[14];return b}function ba(a){return a.upsell}function ca(a){var b=d("react-compiler-runtime").c(3),e=a.pageID;a=a.showNetzDGReportLink;if(a!==!0||!d("PolarisConfig").isLoggedOutFRXEligible())return null;a=(a=d("InstagramQueryParamsHelper").getQueryParams(window.location.search))==null?void 0:a.next;a=a!=null?""+window.location.origin+a:e==="StoriesPage"?window.location.href:null;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&n.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",children:n.jsx(c("IGDSDivider.react"),{})}),b[0]=e):e=b[0];b[1]!==a?(e=n.jsxs(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?1:0,marginStart:d("PolarisUA").isMobile()?1:0,paddingX:d("PolarisUA").isMobile()?12:8,paddingY:d("PolarisUA").isMobile()?8:4,position:"relative",children:[e,n.jsx(c("PolarisLoggedOutNetzDGReportLink.react"),{reportedUrlOrContentId:a,textSize:"footnote"})]}),b[1]=a,b[2]=e):e=b[2];return e}function da(){var a=d("react-compiler-runtime").c(3),b=d("CometRouteParams").useCometRefinedRouteParams(d("XPolarisLoginControllerParamsRefineValidator").refineXPolarisLoginControllerParams);b=b==null?void 0:b.logged_out_reporting_url;if(b==null)return null;var e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("PolarisUA").isMobile()&&n.jsx(c("IGDSBox.react"),{marginBottom:6,position:"relative",width:"100%",children:n.jsx(c("IGDSDivider.react"),{})}),a[0]=e):e=a[0];a[1]!==b?(e=n.jsxs(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?1:0,marginStart:d("PolarisUA").isMobile()?1:0,paddingX:d("PolarisUA").isMobile()?12:8,paddingY:d("PolarisUA").isMobile()?8:4,position:"relative",children:[e,n.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",textAlign:"center",children:n.jsx(c("PolarisExternalLink.react"),{href:b,children:p})})]}),a[1]=b,a[2]=e):e=a[2];return e}var $={oneTap:{color:"x1roi4f4",$$css:!0},root:{color:"x5n08af",fontSize:"x1f6kntn",marginTop:"xcxhlts",marginInlineEnd:"xjx09e3",marginBottom:"x1fqp7bg",marginInlineStart:"xx6jrq6",textAlign:"x2b8uid",$$css:!0}};function ea(a){var b=d("react-compiler-runtime").c(18),e=a.authType,f=a.forceLoginIgId,g=a.fromLoggedOutDialog,h=a.hideAppUpsells,i=a.hideBorder,j=a.pageId,l=a.pageType;a=a.style;var m=d("PolarisReactRedux.react").useSelector(ga),o=m.auth;m=m.navigation;o=o.isFBLoggedIn;m=m.isAccountSwitcherOpen;var p=G(),q=w(e),r=z(),s=f!=null,t=(f=r==null?void 0:r.linkedIGProfiles)!=null?f:[],u=(e===d("PolarisAuthActionConstants").AUTH.fbLogin||e===d("PolarisAuthActionConstants").AUTH.fbAccountPicker)&&o===!0&&!!r;f=function(){var a=t.length>1;a=!s&&u&&a;return!p&&d("PolarisUA").isDesktop()&&!d("PolarisQueryParams").hasForceAuthenticationParam()&&(!(e===d("PolarisAuthActionConstants").AUTH.fbLogin&&!d("PolarisOneTapLogin").isOneTapLoginEligible())||a)&&!q};if(!f()||m)return null;o=fa;r=!(h==null||h)&&!d("PolarisStrategicWebTraffic").isStrategicTraffic();b[0]!==i||b[1]!==a?(f={0:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf"},2:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x13fuv20 x1qgpocp x18b5jzi xa0kie1 x1q0q8m5 xxrrrr8 x1t7ytsu x141z70w x178xt8z x1lun4ml xso031l xpilrb4 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix"},1:{className:"x6s0dn4 xvbhtw8 x1pmru9 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"},3:{className:"x6s0dn4 x1yvgwvq xjd31um x1ixjvfu xwt6s21 xkqq1k2 x91jh78 x1xkn691 x4oqio7 x9f619 x78zum5 xjl7jj xdt5ytf x2lah0s xln7xf2 xk390pu xdj266r x14z9mp x1lziwak xyorhqc xzboxd6 x889kno xyri2b x1a8lsjc x1c1uobl x1n2onr6 x11njtxf x7r02ix x1ejq31n x18oe1m7 x1sy0etr xstzfhl x972fbf x10w94by x1qhh985 x14e42zd"}}[!!(a==="modal")<<1|!!(i===!0)<<0],b[0]=i,b[1]=a,b[2]=f):f=b[2];m=e===d("PolarisAuthActionConstants").AUTH.oneTapLogin&&$.oneTap;b[3]!==m?(h=(k||(k=c("stylex")))($.root,m),b[3]=m,b[4]=h):h=b[4];i=l!=null?l:void 0;b[5]!==g||b[6]!==h||b[7]!==i?(a=n.jsx(c("PolarisAuthTypeSwitcher.react"),{className:h,fromLoggedOutDialog:g,onNavigate:o,pageType:i,primary:!0}),b[5]=g,b[6]=h,b[7]=i,b[8]=a):a=b[8];b[9]!==f||b[10]!==a?(m=n.jsx("div",babelHelpers["extends"]({},f,{children:a})),b[9]=f,b[10]=a,b[11]=m):m=b[11];b[12]!==r||b[13]!==j?(l=r?n.jsx(c("PolarisAppsellUnit.react"),{appInstallCampaign:j,ctaTypeV2:"auth_form"}):null,b[12]=r,b[13]=j,b[14]=l):l=b[14];b[15]!==m||b[16]!==l?(o=n.jsxs(n.Fragment,{children:[m,l]}),b[15]=m,b[16]=l,b[17]=o):o=b[17];return o}function fa(a){c("PolarisLoginQPL").isActive()&&a==="signup"&&c("PolarisLoginQPL").endCancelNavigateToSignup()}function ga(a){return a}g["default"]=a}),226);